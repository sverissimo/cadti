(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{127:function(e,a,t){},242:function(e,a,t){},246:function(e,a){},319:function(e,a,t){e.exports=t(481)},332:function(e,a,t){},335:function(e,a,t){},382:function(e,a){},385:function(e,a,t){},386:function(e,a,t){},388:function(e,a){},389:function(e,a){},478:function(e,a,t){},480:function(e,a,t){},481:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(22),i=t.n(o),l=t(54),s=t(51),c=t(63),d=t(281),u=t.n(d),m=t(282),p=t.n(m),f=t(283),g=t(9),h=t(21),b=t(11),v={},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,a=arguments.length>1?arguments[1]:void 0,t=a.type,r=a.payload;switch(t){case"GET_DATA":return Object(b.a)({},e,{},r);case"INSERT_DATA":var n=r.collection,o=r.data;if(e[n]&&o){var i=Object(h.a)(e[n]);return o.forEach((function(e){i.unshift(e)})),Object(b.a)({},e,Object(g.a)({},n,i))}return e;case"UPDATE_DATA":var l=r.collection,s=r.data,c=r.id;if(e[l]&&s){var d=e[l].map((function(e){return s.forEach((function(a){e[c]===a[c]&&(e=a)})),e}));return Object(b.a)({},e,Object(g.a)({},l,d))}return e;case"UPDATE_COLLECTION":var u=r.data,m=r.collection;return Object(b.a)({},e,Object(g.a)({},m,u));case"REMOVE_FROM_INSURANCE":var p=r.apolice,f=r.placaIndex,E=r.vehicleIndex;if(e.seguros){var x=Object(h.a)(e.seguros),S=x.find((function(e){return e.apolice===p})),y=x.findIndex((function(e){return e.apolice===p}));return S.placas.splice(f,1),S.veiculos.splice(E,1),x[y]=S,Object(b.a)({},e,{seguros:x})}return e;case"DELETE_ONE":var w=r.tablePK,C=r.collection;if(e[C]){var k=r.id,O=Object(h.a)(e[C]);C.match("Docs")||(k=Number(k));var j=O.find((function(e){return e[w]===k})),D=O.findIndex((function(e){return e===j}));return O.splice(D,1),Object(b.a)({},e,Object(g.a)({},C,O))}return e;case"SET_COLOR":return Object(b.a)({},e,{setColor:a.payload});case"LOADING":return Object(b.a)({},e,{loading:a.payload});default:return e}},x=Object(s.c)({data:E}),S=t(284),y=t(40),w=t(519),C=t(216),k=t(217),O=t(108),j=t(195),D=t(520),I=t(159),A=t.n(I),N=t(78),P=(t(332),Object(S.a)((function(e){return{toolbarTitle:{flex:1},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto",backgroundColor:"#0398c1",color:"white"},toolbarLink:{padding:"12px 55px 13px 55px",flexShrink:0},mainFeaturedPost:{position:"relative",backgroundColor:e.palette.grey[800],color:e.palette.common.white,marginBottom:e.spacing(4),backgroundImage:"/images/bus_wallpaper.jpg",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},overlay:{position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"rgba(0,0,0,.3)"},mainFeaturedPostContent:Object(g.a)({position:"relative",padding:e.spacing(3)},e.breakpoints.up("md"),{padding:e.spacing(6),paddingRight:0}),mainGrid:{marginTop:e.spacing(3)},card:{display:"flex"},cardDetails:{flex:1},cardMedia:{width:160},markdown:Object(b.a)({},e.typography.body2,{padding:e.spacing(3,0)}),sidebarAboutBox:{padding:e.spacing(2),backgroundColor:e.palette.grey[200]},sidebarSection:{marginTop:e.spacing(3)},footer:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(6,0)}}}))),z=[{title:"P\xe1gina Inicial",link:"/"},{title:"Consultas",link:"/consultas"},{title:"Ve\xedculos",link:"/veiculos"},{title:"Empresas",link:"/empresas"},{title:"Relat\xf3rios",link:"/relatorios"},{title:"Fale Conosco",link:"/faleConosco"}],F=Object(N.f)((function(e){var a=P(),t=Object(r.useState)(document.location.pathname),o=Object(y.a)(t,2),i=o[0],s=o[1],c=e.location.pathname;return Object(r.useEffect)((function(){s(c)}),[c]),n.a.createElement(n.a.Fragment,null,n.a.createElement(w.a,null),n.a.createElement(C.a,null,n.a.createElement(k.a,{size:"small"},"Criar usu\xe1rio"),n.a.createElement(O.a,{component:"h2",variant:"h6",color:"inherit",align:"center",noWrap:!0,className:a.toolbarTitle},"Seinfra - Subsecretaria de Transportes e Mobilidade - MG"),n.a.createElement(j.a,null,n.a.createElement(A.a,null)),n.a.createElement(k.a,{variant:"outlined",size:"small"},"Fazer login")),n.a.createElement(C.a,{component:"nav",variant:"dense",className:a.toolbarSecondary},z.map((function(e,t){var r=e.link,o=e.title;return n.a.createElement(D.a,{component:l.b,to:r,key:t,color:"inherit",noWrap:!0,variant:"body2",href:"",style:{fontFamily:"Segoe UI, Tahoma, Geneva, Verdana, sans-serif",fontSize:"15px",backgroundColor:i.match(r)&&"/"!==r&&"/faleConosco"!==r?"#11a7d2":"",borderBottom:i.match(r)&&"/"!==r&&"/faleConosco"!==r?"1.5px solid #ccc":"",fontWeight:!i.match(r)||"/"!==r&&"/faleConosco"!==r?"400":"500"},className:a.toolbarLink,onClick:function(){return s(r)}},o)}))))})),T=function(){return null},L=t(538),q=t(521),M=function(e){var a=e.items,t=e.tab,r=e.changeTab;return n.a.createElement("div",{className:"tabMenu"},n.a.createElement(L.a,{value:t,indicatorColor:"primary",textColor:"primary",centered:!0,onChange:r},a.map((function(e,a){return n.a.createElement(q.a,{key:a,label:e})}))))},B=t(537),V=t(522),R=t(524),U=t(525),W=t(523),_=t(526),Y=t(273),K=(t(335),Object(S.a)((function(e){return{card:{display:"flex",fontSize:"0.5rem"},cardDetails:{flex:1,fontSize:"0.5rem"},cardMedia:{width:"120px",height:"180px"},footer:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(6,0)}}}))),H=[{title:"Ve\xedculos",date:"07/Nov",description:"Cadastre e altere os dados do ve\xedculo ou solicite sua baixa",link:"/veiculos",imageUrl:"/images/vehicles.jpg"},{title:"Empresas",date:"07/Nov",description:"Cadastre e gerencie dados de empresas, s\xf3cios e procuradores",link:"/empresas",imageUrl:"/images/empresas12.jpg"},{title:"Consultas",date:"03/Dez",description:"Consulte e gerencie dados de ve\xedculos, seguros e empresas",link:"/consultas",imageUrl:"/images/consultas2.jpg"}],G=function(){var e=K();return n.a.createElement(n.a.Fragment,null,n.a.createElement(w.a,null),n.a.createElement("div",{style:{minHeight:"83vh",width:"100%",height:"auto"}},n.a.createElement("main",{className:"homeMainPost"},n.a.createElement("h1",null,"SisMob - MG"),n.a.createElement("h2",null,"Sistema de Gest\xe3o da Mobilidade do Estado de Minas Gerais")),n.a.createElement(V.a,{container:!0,spacing:4,className:e.cardGrid},H.map((function(a){return n.a.createElement(V.a,{item:!0,key:a.title,xs:12,md:4},n.a.createElement(W.a,{component:"span"},n.a.createElement(l.b,{to:a.link,style:{textDecoration:"none"}},n.a.createElement(R.a,{className:e.card},n.a.createElement("div",{className:e.cardDetails},n.a.createElement(U.a,null,n.a.createElement(O.a,{component:"h3",variant:"h6"},a.title),n.a.createElement("br",null),n.a.createElement(O.a,{variant:"body2",paragraph:!0},a.description),n.a.createElement(O.a,{variant:"body2",color:"primary"},"Clique aqui para ",a.title))),n.a.createElement(Y.a,{xsDown:!0},n.a.createElement(_.a,{className:e.cardMedia,component:"img",src:a.imageUrl,title:a.title}))))))})))))},J=(t(127),[{title:"Cadastro de Ve\xedculos",date:"07/Nov",description:"Cadastrar um novo ve\xedculo no sistema.",imageUrl:"/images/add_new.jpg",link:"/cadastro"},{title:"Altera\xe7\xe3o de dados",date:"07/Nov",description:"Alterar dados de um ve\xedculo",link:"/altDados",imageUrl:"/images/pen.png"},{title:"Seguros",date:"07/Nov",description:"Atualizar seguros e ap\xf3lices",link:"/altSeguro",imageUrl:"/images/car_insurance2.png"},{title:"Baixa",date:"07/Nov",description:"Baixa de ve\xedculos",link:"/baixaVeiculo",imageUrl:"/images/remove_doc.png"},{title:"Configura\xe7\xf5es",date:"07/Nov",description:"Chassi, carrocerias, seguradoras, etc",link:"/Config",imageUrl:"/images/config2.jpg"}]);function $(e){var a=e.match;return n.a.createElement("div",null,n.a.createElement("div",{className:"jumbotron"},n.a.createElement("h1",null,"Ve\xedculos"),n.a.createElement("p",null,"Selecione uma das op\xe7\xf5es abaixo.")),n.a.createElement("section",{className:"cardSection"},J.map((function(e,t){var r=e.title,o=e.link,i=e.imageUrl,s=e.description;return n.a.createElement(l.b,{to:a.url+o,key:t,className:"card"},n.a.createElement("span",{className:"cardImage"}," ",n.a.createElement("img",{src:i,alt:"tst"})," "),n.a.createElement("div",{className:"cardText"},n.a.createElement("h3",null,r),n.a.createElement("p",null," ",s)))}))))}var Z,X=t(60),Q=t(5),ee=t.n(Q),ae=t(31),te=t(32),re=t(34),ne=t(33),oe=t(35),ie=t(15),le=t.n(ie),se=t(19),ce=t.n(se),de=t(25),ue=t.n(de),me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(a,t){var r,n;return ee.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=[],n={},!(e.length>0)){t.next=5;break}return e.forEach((function(e){r.push(le.a.get("/api/".concat(e)))})),t.next=5,ee.a.awrap(Promise.all(r).then((function(e){return e.map((function(e){return ce.a.camelizeKeys(e.data)}))})).then((function(a){a.forEach((function(a,t){var r=e[t].replace("getFiles/","").replace("lookUpTable/","");r=ce.a.camelize(r),Object.assign(n,Object(g.a)({},r,a))}))})));case 5:a({type:"GET_DATA",payload:n});case 6:case"end":return t.stop()}}))}},pe=function(e,a){return function(t,r){var n=ce.a.camelizeKeys(e),o={collection:a,data:n},i=r().data.seguradoras;if(!i)return console.log(o),void t({type:"INSERT_DATA",payload:o});if("seguros"===a&&n[0].placas&&1===n[0].placas.length){var l=i.find((function(e){return e.id===n[0].seguradoraId})),s=n[0],d=[],u=[],m=r().data.veiculos,p=m.map((function(e){return e.apolice===s.apolice&&(e.seguradora=l.seguradora,e.dataEmissao=s.dataEmissao,e.vencimento=s.vencimento),e}));m.forEach((function(e){e.apolice===s.apolice&&(d.push(e.placa),u.push(e.veiculoId))})),s.placas=d,s.veiculos=u,s=[s];var f={data:p,collection:"veiculos"};Object(c.b)((function(){t({type:"INSERT_DATA",payload:{data:s,collection:"seguros"}}),t({type:"UPDATE_COLLECTION",payload:f})}))}else t({type:"INSERT_DATA",payload:o})}},fe=function(e,a,t){return function(r){var n=ce.a.camelizeKeys(e);r({type:"UPDATE_DATA",payload:{collection:a,data:n,id:t}})}},ge=function(e,a){return function(t){t({type:"UPDATE_COLLECTION",payload:{data:e=ce.a.camelizeKeys(e),collection:a}})}},he=function(e,a,t){return function(r){a=ce.a.camelize(a),r({type:"DELETE_ONE",payload:{id:e,tablePK:a,collection:t}})}},be=function(){return n.a.createElement("div",{className:"loading"},n.a.createElement("img",{src:"/images/loading.gif",alt:"",height:"60px",width:"60px"}),n.a.createElement("p",null," Carregando... "))},ve=[{collection:"equipamentos",field:"item",label:"Equipamentos",name:"equipamentosId",table:"equipamentos"},{collection:"marcaCarroceria",field:"marca",label:"Marcas de Carroceria",name:"marcaCarroceria",table:"marca_carroceria"},{collection:"carrocerias",field:"modelo",label:"Modelos de Carroceria",name:"modeloCarroceria",table:"modelo_carroceria"},{collection:"marcaChassi",field:"marca",label:"Marcas de Chassi",name:"marcaChassi",table:"marca_chassi"},{collection:"modelosChassi",field:"modeloChassi",label:"Modelos de Chassi",name:"modeloChassi",table:"modelo_chassi"},{collection:"seguradoras",field:"seguradora",label:"Seguradoras",name:"seguradora",table:"seguradora"}],Ee=t(353),xe=function(e,a){var t=[];t=e.map((function(e){return e.replace("getFiles/","").replace("lookUpTable/","")}));var r=function(r){function o(){return Object(ae.a)(this,o),Object(re.a)(this,Object(ne.a)(o).apply(this,arguments))}return Object(oe.a)(o,r),Object(te.a)(o,[{key:"componentDidMount",value:function(){var a,t,r=this;return ee.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=this.props.redux,t=[],e.forEach((function(e){var r=e.replace("getFiles/","").replace("lookUpTable/","");a[r]&&a[r][0]||t.push(e)})),!t[0]){n.next=6;break}return n.next=6,ee.a.awrap(this.props.getData(t));case 6:Z||(Z=Ee()),Z.on("insertVehicle",(function(e){r.props.insertData(e,"veiculos")})),Z.on("insertInsurance",(function(e){r.props.insertData(e,"seguros")})),Z.on("insertEmpresa",(function(e){r.props.insertData(e,"empresas")})),Z.on("insertSocios",(function(e){r.props.insertData(e,"socios")})),Z.on("insertProcuradores",(function(e){r.props.insertData(e,"procuradores")})),Z.on("addElements",(function(e){var a=e.insertedObjects,t=e.table,n=ve.find((function(e){return e.table===t})).collection;r.props.insertData(a,n)})),Z.on("updateElements",(function(e){var a=e.collection,t=e.updatedCollection;r.props.updateCollection(t,a)})),Z.on("updateVehicle",(function(e){r.props.updateData(e,"veiculos","veiculoId")})),Z.on("updateInsurance",(function(e){r.props.updateCollection(e,"seguros")})),Z.on("updateSocios",(function(e){r.props.updateCollection(e,"socios")})),Z.on("deleteOne",(function(e){var a=e.id,t=e.tablePK,n=e.collection;r.props.deleteOne(a,t,n)})),Z.on("insertFiles",(function(e){var a=e.insertedObjects,t=e.collection;console.log(e),r.props.insertData(a,t)}));case 19:case"end":return n.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){Z||(Z=Ee(":3001"));["insertVehicle","insertInsurance","insertEmpresa","insertSocios","insertFiles","insertProcuradores","updateVehicle","updateInsurance","updateSocios","deleteOne"].forEach((function(e){return Z.off(e)}))}},{key:"render",value:function(){var e=this;return 0!==(t=t.map((function(e){return ce.a.camelize(e)}))).length&&t.every((function(a){return e.props.redux.hasOwnProperty(a)}))?n.a.createElement(a,this.props):n.a.createElement(be,null)}}]),o}(n.a.Component);return Object(c.c)((function(e){return{redux:Object(b.a)({},e.data)}}),(function(e){return Object(s.b)({getData:me,insertData:pe,updateData:fe,updateCollection:ge,deleteOne:he},e)}))(r)},Se=function(e){var a=document.querySelectorAll("p"),t=document.querySelectorAll("input"),r=[],n=[],o="Favor verificar o preenchimento dos seguintes campos: ";return a&&a.forEach((function(e){if("Valor inv\xe1lido"===e.textContent||"\u2718"===e.textContent){var a=e.parentNode.querySelectorAll("label");r.push(a[0])}})),t&&t.forEach((function(e){if("date"===e.type&&!ue()(e.value,"YYYY-MM-DD",!0).isValid()){var a=e.parentNode.previousSibling;r.push(a)}})),r[0]?(r.forEach((function(e){return n.push(e.textContent)})),n.forEach((function(e){return o+=e+", "})),o=o.replace("(kg)","").replace("(cm)","").slice(0,-2)+".",e?{openAlertDialog:!0,alertType:"inputError",customMsg:o}:n):null},ye=t(277);function we(e){var a=e.collection,t=e.datalist;return e.value.length>2&&"string"!==typeof a?n.a.createElement("datalist",{id:t},a.map((function(e,a){return n.a.createElement("option",{key:a},e[t])}))):null}var Ce=t(276),ke=Object(S.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"2px",marginBottom:"2px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},select:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"2px",marginBottom:"2px",background:"#fafafa",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},helperText:{margin:"2px 0",fontSize:"0.7rem"}}}));function Oe(e){var a=e.handleInput,t=e.handleBlur,o=e.form,i=e.data,l=ke(),s=l.helperText,c=function(e){var a=i[e.field];return"number"===e.type?a>e.max||a<e.min:(a&&"string"!==typeof a&&(a=a.toString()),!(!e.pattern||!a)&&null===i[e.field].match(e.pattern))},d=function(e){var a=i[e.field];return a&&"string"!==typeof a&&(a=a.toString()),a>e.max||a<e.min?"Valor inv\xe1lido":a&&null===a.match(e.pattern)?"\u2718":e.pattern&&a&&null!==a.match(e.pattern)?"\u2713":" "};return o.map((function(e,o){return n.a.createElement(r.Fragment,{key:o},n.a.createElement(Ce.a,{name:e.field,label:e.label,margin:e.margin,className:l.textField,onChange:a,onBlur:t,type:e.type||"",error:c(e),helperText:d(e),FormHelperTextProps:{className:s},select:e.select||!1,value:i[e.field]||"",disabled:e.disabled||!1,InputLabelProps:{className:l.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888"}},inputProps:{style:{background:e.disabled&&i.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#000",width:e.width||300,height:"7px"},value:"".concat(i[e.field]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1,SelectProps:{style:{background:e.disabled&&i.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#555",fontWeight:400,width:325,height:"44px"}}},!0===e.select&&e.options.map((function(e,a){return n.a.createElement(ye.a,{key:a,value:e},e)}))),!0===e.autoComplete&&n.a.createElement(we,{collection:i[e.collection],datalist:e.datalist,value:i[e.field]||""}))}))}var je=t(135),De=t(275),Ie=t(243),Ae=t(55),Ne=t.n(Ae),Pe=[{field:"seguradora",label:"Seguradora",autoComplete:!0,datalist:"seguradora",collection:"seguradoras"},{field:"apolice",label:"Ap\xf3lice",autoComplete:!0,datalist:"apolice",collection:"seguros",maxLength:25},{type:"date",field:"dataEmissao",label:"Data de Emiss\xe3o"},{type:"date",field:"vencimento",label:"Vencimento"}],ze=[[{field:"placa",label:"Placa",margin:"normal",maxLength:8,pattern:"[a-zA-Z]{3}[-]?[ ]?\\d{4}|[A-Z]{3}[-]?[ ]?[0-9]{1}[A-Z]{1}[0-9]{2}"},{field:"renavam",label:"Renavam",margin:"normal",maxLength:11,pattern:"\\d{11}"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Convencional","Executivo","Leito","Semi-Leito","Urbano"]},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",datalist:"modeloChassi",autoComplete:!0,collection:"modelosChassi"},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",max:Number((new Date).getFullYear()),min:Number((new Date).getFullYear())-10},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",datalist:"modelo",autoComplete:!0,collection:"carrocerias"},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",max:Number((new Date).getFullYear()+1),min:Number((new Date).getFullYear())-10},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50}]].concat([Pe]).concat([[{field:"cilindros",label:"Cilindros",margin:"normal",type:"number",max:12,step:1},{field:"potencia",label:"Pot\xeancia (cv)",margin:"normal",type:"number",max:600},{field:"eixos",label:"Eixos",margin:"normal",type:"number",max:8},{field:"pneumaticos",label:"Pneum\xe1ticos",margin:"normal",type:"number",max:20},{field:"peso_dianteiro",label:"Peso Dianteiro (kg)",margin:"normal",type:"number",max:12e3},{field:"peso_traseiro",label:"Peso Traseiro (kg)",margin:"normal",type:"number",max:15e3},{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piques_poltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distancia_minima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distancia_maxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150}]]).concat([[]]).concat([[]]);function Fe(e){var a=e.close;return n.a.createElement("div",{style:{position:"absolute",top:"0.4%",right:"0.4%"}},n.a.createElement("div",null,n.a.createElement("i",{className:"material-icons right",title:"Fechar",style:{cursor:"pointer",color:"red"},onClick:a},"close")))}t(242);function Te(e){var a=e.data,t=e.equipamentos,r=e.handleCheck,o=e.close;return n.a.createElement("div",{className:"popUpWindow",style:{right:"33%",left:"33%"}},n.a.createElement("h4",{className:"equipaHeader"},"Equipamentos")," ",n.a.createElement("hr",null),n.a.createElement("div",{className:"checkListContainer"},t.map((function(e,t){return n.a.createElement("span",{className:"checkListEquipa",key:t},n.a.createElement(Ie.a,{control:n.a.createElement(De.a,{checked:a[e.item],value:e.item,onChange:function(){return r(e.item)}}),label:n.a.createElement("p",{className:"checkListLabel"},e.item)}))}))),n.a.createElement(Fe,{close:o}))}var Le=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:"6px"},title:{color:"#000",fontWeight:400,fontSize:"0.9rem",textAlign:"center"},selectEmpresa:{marginLeft:e.spacing(1),marginRight:e.spacing(1),minWidth:350,fontColor:"#bbb"},formHolder:{width:900},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)}}})),qe=function(e){var a=e.empresas,t=e.equipamentos,o=e.data,i=e.handleInput,l=e.handleBlur,s=e.handleEquipa,c=e.handleCheck,d=o.razaoSocial,u=o.activeStep,m=o.addEquipa,p=o.delegatarioCompartilhado,f=o.subtitle,g=o.selectedEmpresa,h=Le(),b=h.paper,v=h.container,E=h.title,x=h.selectEmpresa,S=h.button,w=h.formHolder,C=Object(r.useState)(!1),j=Object(y.a)(C,2),D=j[0],I=j[1],A=ze[u];return n.a.createElement(V.a,{container:!0,direction:"row",className:v,justify:"center"},n.a.createElement(V.a,null,n.a.createElement(je.a,{className:b,style:{padding:"0 2% 0 2%"}},n.a.createElement(V.a,{container:!0,justify:"center"},0===u?n.a.createElement(V.a,{item:!0,xs:D?4:12,style:{marginBottom:"15px"}},n.a.createElement(O.a,{className:E}," Selecione a Via\xe7\xe3o"),n.a.createElement(Ce.a,{inputProps:{list:"razaoSocial",name:"razaoSocial",style:{textAlign:"center",fontSize:"0.8rem"}},className:x,value:d,onChange:i,onBlur:l}),n.a.createElement(we,{collection:a,datalist:"razaoSocial",value:d})):n.a.createElement("div",{className:"formTitle"},"Cadastro de Ve\xedculo - ",d),0===u&&D&&n.a.createElement(V.a,{item:!0,xs:4,style:{marginLeft:"30px"}},n.a.createElement(O.a,{className:E}," Empresa autorizada a compartilhar"),n.a.createElement(Ce.a,{inputProps:{list:"razaoSocial",name:"delegatarioCompartilhado",style:{textAlign:"center",fontSize:"0.8rem"}},className:x,value:p,onChange:i,onBlur:l}),n.a.createElement(we,{collection:a,datalist:"razaoSocial",value:p}))),0===u&&n.a.createElement(V.a,{item:!0,xs:12},n.a.createElement(Ie.a,{control:n.a.createElement(De.a,{checked:!0===D,onChange:function(){return I(!D)},value:D}),label:n.a.createElement(O.a,{style:{color:"#2979ff",fontSize:"0.7rem",float:"right"}},"Ve\xedculo Compartilhado?")}))),g?n.a.createElement(V.a,{item:!0,xs:12},u<3&&n.a.createElement(je.a,{className:b},n.a.createElement("div",{className:"formSubtitle"}," ",f[u]),n.a.createElement(Oe,{form:A,data:o,handleBlur:l,handleInput:i}),0===u&&n.a.createElement(V.a,{container:!0,justify:"center"},n.a.createElement(k.a,{variant:"outlined",size:"small",color:"primary",className:S,onClick:s},n.a.createElement(Ne.a,null),"Equipamentos"))),m&&n.a.createElement(Te,{equipamentos:t,close:s,handleCheck:c,data:o})):n.a.createElement(V.a,{container:!0,justify:"center"},n.a.createElement("div",{className:w}))))},Me=t(95),Be=t(289),Ve=t.n(Be),Re=t(94),Ue=t.n(Re);function We(e){var a=e.title,t=e.name,o=e.formData,i=e.handleFiles,l=e.dropDisplay,s=e.single,c=Object(r.useState)(),d=Object(y.a)(c,2),u=d[0],m=d[1];return Object(r.useEffect)((function(){if(o&&"object"===typeof o){var e=!0,a=!1,r=void 0;try{for(var n,i=o.entries()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var l=n.value;t===l[0]&&m(l[1].name)}}catch(s){a=!0,r=s}finally{try{e||null==i.return||i.return()}finally{if(a)throw r}}}}),[o,t]),n.a.createElement(n.a.Fragment,null,a&&n.a.createElement("p",{className:"fileInput"},a),n.a.createElement(Me.a,{onDrop:function(e){return i(e,t)}},(function(e){var a=e.getRootProps,t=e.getInputProps;return n.a.createElement("div",Object.assign({className:u?"dropBox fileAttached":s?"dropBox":"multipleDropBox"},a()),n.a.createElement("input",t()),u?n.a.createElement(r.Fragment,null,n.a.createElement("div",null," ",n.a.createElement(Ue.a,{className:"icon"}),"  ",u," "),s&&n.a.createElement("span",null,"(clique ou arraste outro arquivo para alterar)")):n.a.createElement("div",null," ",n.a.createElement(Ve.a,{className:"icon"}),n.a.createElement("span",null,"  ",l)))})))}var _e=[{title:"CRLV do Ve\xedculo",name:"crlv"},{title:"Ap\xf3lice do Seguro",name:"apoliceDoc"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"DAE Quitada",name:"dae"},{title:"Laudo de Pesagem",name:"pesagem"},{title:"Laudo de Vistoria INMETRO",name:"inmetro"}],Ye=[{title:"Documento de Transfer\xeancia",name:"transferenciaDoc"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"DAE Quitada",name:"dae"},{title:"Laudo de Pesagem",name:"pesagem"},{title:"CRLV com nova placa",name:"newPlateDoc"}],Ke=Object(S.a)((function(e){return{root:{flexGrow:"1",margin:"5px",padding:"8px"},paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 14px 0",height:"auto",minHeight:"350px"},sendButton:{margin:"3% 0 3% 0",backgroundColor:"teal",float:"right"},text:{textAlign:"left",margin:e.spacing(2),fontSize:"0.9rem",fontWeight:"500",color:"#333"},item:{marginTop:"10px",padding:"0 5px"}}}));function He(e){var a,t=e.handleFiles,o=e.parentComponent,i=e.dropDisplay,l=e.formData,s=e.insuranceExists,c=Ke(),d=c.root,u=c.paper,m=c.item;return"cadastro"===o&&(a=_e),"altDados"===o&&(a=Ye),n.a.createElement("div",null,n.a.createElement(je.a,{className:u},n.a.createElement("div",{className:"formSubtitle"}," Anexe os documentos solicitados nos campos abaixo "),n.a.createElement(V.a,{container:!0,className:d},a.map((function(e,a){var o=e.title,c=e.name;return"apoliceDoc"===c&&s?null:n.a.createElement(r.Fragment,{key:a},n.a.createElement(V.a,{item:!0,xs:10,md:4,className:m},n.a.createElement(We,{title:o,name:c,formData:l,dropDisplay:i,handleFiles:t})))})))))}var Ge=t(164),Je=t.n(Ge),$e=t(163),Ze=t.n($e),Xe={display:"flex",justifyContent:"center",width:"100%",alignContent:"center",flexWrap:"wrap"},Qe={textAlign:"center",alignItems:"flex-start",height:"40px",border:"1px #ccc solid",padding:"7px 8px 0 8px",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px"},ea={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},aa={verticalAlign:"middle",padding:"0 0% 0 2%"};function ta(e){var a=e.form,t=e.files,r=[];if(t){var o=!0,i=!1,l=void 0;try{for(var s,c=function(){var e=s.value;a.forEach((function(a){var t=a.name,n=a.title;t===e[0]&&e[1]&&e[1].name&&r.push({label:n,fieldName:t,fileName:e[1].name})}))},d=t.entries()[Symbol.iterator]();!(o=(s=d.next()).done);o=!0)c()}catch(u){i=!0,l=u}finally{try{o||null==d.return||d.return()}finally{if(i)throw l}}}return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:Xe},r.map((function(e,a){return n.a.createElement("div",{style:Qe,key:a},n.a.createElement(Ze.a,{style:aa}),n.a.createElement("span",{style:{verticalAlign:"middle"}}," "," ",e.label),n.a.createElement(Je.a,{style:ea,onClick:function(){return function(e,a){var r=t.get(e),n=window.URL.createObjectURL(r),o=document.createElement("a");o.href=n,r&&("application/pdf"===r.type||r.type.match("image/"))?(o.setAttribute("rel","noopener"),o.setAttribute("target","_blank"),o.setAttribute("title",a)):o.setAttribute("download",a),document.body.appendChild(o),o.click()}(e.fieldName,e.fileName)}}))}))))}var ra=t(165),na=t.n(ra),oa=Object(S.a)((function(e){return{paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 5px 0",height:"auto"}}}));function ia(e){var a,t=e.data,o=e.parentComponent,i=e.form,l=e.filesForm,s=e.files,c=oa().paper,d=[],u={},m=[],p=[];return i.forEach((function(e){e.forEach((function(e){t.hasOwnProperty([e.field])&&(Object.assign(u,Object(g.a)({},e.field,t[e.field])),m.push(e))})),d.push(u),p.push(m),u={},m=[]})),"cadastro"===o&&(a=[{subtitle:"Detalhes do ve\xedculo",form:p[0],data:d[0]},{subtitle:"Detalhes do seguro",form:p[1],data:d[1]},{subtitle:"Informa\xe7\xf5es sobre a vistoria",form:p[2],data:d[2]}]),"altDados"===o&&(a=[{subtitle:"Detalhes do ve\xedculo",form:p[0],data:d[0]},{subtitle:"Informa\xe7\xf5es sobre a vistoria",form:p[1],data:d[1]}]),n.a.createElement(n.a.Fragment,null,n.a.createElement(je.a,{className:c},n.a.createElement("div",{className:"divTable"},a.map((function(e,a){var t=e.subtitle,o=e.form,i=e.data;return n.a.createElement(r.Fragment,{key:a},n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"tHeader",colSpan:o.length},t)),n.a.createElement("tr",null,o.map((function(e,a){return n.a.createElement("th",{key:a},e.label)})))),n.a.createElement("tbody",null,n.a.createElement("tr",null,Object.values(i).map((function(e,a){return n.a.createElement("td",{className:"review",key:a},e)}))))))}))),n.a.createElement("div",{style:{margin:"30px 0 0 25px"}},n.a.createElement("h3",null," Equipamentos "),n.a.createElement("p",null,Array.isArray(t.equipamentosId)&&t.equipamentosId&&t.equipamentosId.map((function(e,a){return n.a.createElement("span",{style:{fontFamily:"Segoe UI, Tahoma, Geneva, Verdana",fontSize:"12px"},key:a},a!==t.equipamentosId.length?e+", ":e)})))),n.a.createElement("h3",{style:{margin:"30px 0 0 25px"}}," ",n.a.createElement(na.a,{style:{verticalAlign:"middle",padding:"0 0 0 8px"}})," Documentos "),s&&n.a.createElement(ta,{form:l,files:s})))}var la=t(540),sa=t(290),ca=t.n(sa);function da(e){var a=e.links,t=e.text;return n.a.createElement(V.a,{style:{marginTop:"1%",paddingLeft:"1%"}},n.a.createElement(la.a,{separator:"\u203a","aria-label":"breadcrumb"},n.a.createElement(l.b,{to:"/",style:{}},n.a.createElement(ca.a,{style:{verticalAlign:"middle",marginRight:"5px",paddingBottom:"3px"}}),n.a.createElement("span",{style:{fontSize:"0.8rem"}},"P\xe1gina inicial")),n.a.createElement(l.b,{color:"primary",to:a[1],style:{fontSize:"0.8rem"}},a[0]),n.a.createElement("span",{style:{fontSize:"0.8rem"}},t)))}var ua=Object(S.a)((function(e){return{button:{margin:e.spacing(1),float:"right"},backButton:{margin:e.spacing(1),float:"left",color:"#333",backgroundColor:"#eee"}}}));function ma(e){var a=e.activeStep,t=e.setActiveStep,r=e.lastStep,o=e.handleSubmit,i=e.disabled,l=ua(),s=l.backButton,c=l.button;return n.a.createElement("div",null,n.a.createElement(k.a,{variant:"contained",className:s,onClick:function(){return t("back")},disabled:0===a},"Voltar"),a<r?n.a.createElement(k.a,{variant:"contained",color:"primary",className:c,onClick:function(){return t("next")},disabled:i},"Avan\xe7ar"):n.a.createElement(k.a,{variant:"contained",color:"primary",className:c,onClick:function(){return o()}},"Aprovar"))}var pa=t(546),fa=t(530),ga=t(541),ha=Object(S.a)((function(e){return{root:{width:"100%",marginTop:"1%"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),padding:"1% 0 0 3%",fontWeight:500}}}));function ba(e){var a=e.activeStep,t=e.steps,r=ha();return n.a.createElement("div",{className:r.root},n.a.createElement(pa.a,{activeStep:a},t.map((function(e,a){return n.a.createElement(fa.a,Object.assign({key:e},{}),n.a.createElement(ga.a,{},e))}))))}var va=t(2),Ea=t(178),xa=t(177),Sa=t(531),ya=t(244),wa=t(547),Ca=Object(S.a)((function(e){return{success:{backgroundColor:Ea.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:xa.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function ka(e){var a=Ca(),t=e.className,o=e.message,i=(e.onClose,e.variant),l=Object(X.a)(e,["className","message","onClose","variant"]);return n.a.createElement(Sa.a,Object.assign({className:Object(va.a)(a[i],t),"aria-describedby":"client-snackbar",message:n.a.createElement(r.Fragment,null,n.a.createElement("span",{id:"client-snackbar",className:a.message},n.a.createElement(ya.a,null,"check"),"    ",o))},l))}function Oa(e){return n.a.createElement("div",null,n.a.createElement(wa.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.open,autoHideDuration:2e3,onClose:e.close},n.a.createElement(ka,{variant:"success",message:e.msg})))}var ja=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.replace(/\D/g,"");return a=(a=(a=(a=(a/100).toFixed(2)+"").replace(".",",")).replace(/(\d)(\d{3})(\d{3}),/g,"$1.$2.$3,")).replace(/(\d)(\d{3}),/g,"$1.$2,")},Da=t(542),Ia=t(535),Aa=t(533),Na=t(534),Pa=t(532);function za(e){var a=e.open,t=e.alertType,r=e.close,o=e.confirm,i=(e.customTitle,e.customMessage),l=void 0===i?"":i,s=function(e){if("object"===typeof e)return{title:"Empresa j\xe1 cadastrada",message:"A empresa ".concat(e.razaoSocial," j\xe1 est\xe1 cadastrada no sistema com o CNPJ ").concat(e.cnpj,".")};switch(e){case"plateNotFound":return{title:"Placa n\xe3o encontrada",message:'A placa informada n\xe3o corresponde a nenhum ve\xedculo da frota da via\xe7\xe3o selecionada. Para cadastrar um novo ve\xedculo, selecione a op\xe7\xe3o Ve\xedculos => "Cadastro de Ve\xedculo" no menu acima.'};case"invalidPlate":return{title:"Placa inv\xe1lida",message:"Certifique-se de que a placa informada \xe9 uma placa v\xe1lida, com tr\xeas letras seguidas de 4 n\xfameros (ex: AAA-0000)"};case"plateExists":return{title:"Placa j\xe1 cadastrada!",message:"A placa informada j\xe1 est\xe1 cadastrada. Para atualizar seguro, alterar dados ou solicitar baixa, utilize as op\xe7\xf5es acima. "};case"invalidModel":return{title:"Modelo n\xe3o cadastrado.",message:l};case"inputError":return{title:"Preenchimento inv\xe1lido.",message:l};case"fieldsMissing":return{title:"Favor preencher todos os campos.",message:"Os campos acima s\xe3o de preenchimento obrigat\xf3rio. Certifique-se de ter preenchido todos eles."};case"invalidInsurance":return{title:"Favor verificar os dados do seguro.",message:"As informa\xe7\xf5es referentes ao seguro do ve\xedculo s\xe3o obrigat\xf3rias. Certifique-se de ter informado todas elas."};case"filesNotFound":return{title:"Arquivos n\xe3o encontrados",message:"N\xe3o h\xe1 nenhum arquivo anexado no sistema para a ".concat("Procura\xe7\xe3o"," selecionada. \n          Ao cadastrar ou atualizar a ").concat("Procura\xe7\xe3o",", certifique-se de anexar o arquivo correspondente.")};case"empresaNotFound":return{title:"Empresa n\xe3o encontrada.",message:"A empresa informada n\xe3o est\xe1 registrada no sistema. Para cadastrar uma nova empresa, utilize a op\xe7\xe3o Empresas -> Cadastrar."};case"seguradoraNotFound":return{title:"Seguradora n\xe3o encontrada.",message:"A seguradora informada n\xe3o est\xe1 registrada no sistema. Favor verificar o nome da seguradora."};case"alreadyExists":return{title:"CPF j\xe1 cadastrado.",message:"O CPF informado corresponde a um s\xf3cio j\xe1 cadastrado. \n          Para remover ou editar as informa\xe7\xf5es dos s\xf3cios, utilize a respectiva op\xe7\xe3o abaixo."};case"numberNotValid":return{title:"N\xfamero inv\xe1lido.",message:"O n\xfamero digitado n\xe3o \xe9 v\xe1lido."};case"overShared":return{title:"Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",message:"A participa\xe7\xe3o societ\xe1ria informada excede a 100%."};case"subShared":return{title:"Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",message:"A participa\xe7\xe3o societ\xe1ria informada n\xe3o soma 100%. Favor informar todos os s\xf3cios com suas respectivas participa\xe7\xf5es."};case"veiculoPendente":return{title:"Pend\xeancias encontradas para este ve\xedculo.",message:"Verifique se h\xe1 alguma aprova\xe7\xe3o pendente quanto ao cadastro, seguro, transfer\xeancia ou altera\xe7\xe3o de dados do ve\xedculo."};case"seguroVencido":return{title:"Pend\xeancias encontradas para o seguro deste ve\xedculo.",message:"Para regularizar o seguro deste ve\xedculo, acesse a op\xe7\xe3o Ve\xedculos=>Seguros no menu acima."};case"contratoVencido":return{title:"Contrato expirado.",message:"O contrato de concess\xe3o com o delegat\xe1rio selecionado est\xe1 expirado."};default:return{title:null,message:null}}}(t),c=s.title,d=s.message;return c&&d?n.a.createElement("div",null,n.a.createElement(Da.a,{open:a,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(Pa.a,{id:"alert-dialog-title"},c),n.a.createElement(Aa.a,null,n.a.createElement(Na.a,{id:"alert-dialog-description"},d)),n.a.createElement(Ia.a,null,n.a.createElement(k.a,{onClick:r,color:"primary"},o?"Cancelar":"Fechar"),o&&n.a.createElement(k.a,{onClick:r,color:"primary",autoFocus:!0},"Confirmar")))):null}var Fa=xe(["veiculos","empresas","modelosChassi","carrocerias","seguradoras","seguros","equipamentos"],function(e){function a(){var e;return Object(ae.a)(this,a),(e=Object(re.a)(this,Object(ne.a)(a).call(this))).state={activeStep:0,steps:["Dados do Ve\xedculo","Dados do seguro","Vistoria e laudos","Documentos","Revis\xe3o"],subtitle:["Informe os dados do Ve\xedculo","Informe os dados do Seguro","Preencha os campos abaixo conforme a vistoria realizada"],razaoSocial:"",frota:[],delegatarioCompartilhado:"",toastMsg:"Ve\xedculo cadastrado!",confirmToast:!1,files:[],fileNames:[],insuranceExists:!1,addEquipa:!1,openAlertDialog:!1,dropDisplay:"Clique ou arraste para anexar"},e.setActiveStep=function(a){var t,r,n,o;return ee.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(0!==e.state.activeStep){i.next=7;break}if(!e.state.frota.filter((function(a){return a.placa===e.state.placa}))[0]){i.next=7;break}return i.next=5,ee.a.awrap(e.setState({placa:""}));case 5:return e.setState({alertType:"plateExists",openAlertDialog:!0}),i.abrupt("return",null);case 7:if(!(t=e.state.errors)||!t[0]){i.next=12;break}return i.next=11,ee.a.awrap(e.setState(Object(b.a)({},e.state,{},Se("setState"))));case 11:return i.abrupt("return");case 12:r=[],n=e.state.equipamentos,o=e.state.activeStep,"next"===a&&e.setState({activeStep:o+1}),"back"===a&&e.setState({activeStep:o-1}),"reset"===a&&e.setState({activeStep:0}),1===o&&(n.forEach((function(a){!0===e.state[a]&&r.push(a)})),r[0]?e.setState({equipamentosId:r}):e.setState({equipamentosId:[]}));case 19:case"end":return i.stop()}}))},e.handleInput=function(a){var t,r,n,o,i,l,s,c,d,u,m,p,f,v,E,x,S,y,w,C,k,O,j,D,I,A;return ee.a.async((function(N){for(;;)switch(N.prev=N.next){case 0:t=e.props.redux,r=t.veiculos,n=t.empresas,o=e.state,i=o.allInsurances,l=o.apolice,s=o.seguradora,c=o.dataEmissao,d=o.vencimento,u=a.target.name,m=a.target.value,e.setState(Object(g.a)({},u,m)),N.t0=u,N.next="razaoSocial"===N.t0?6:"placa"===N.t0?19:"apolice"===N.t0?24:"valorChassi"===N.t0?39:"valorCarroceria"===N.t0?41:43;break;case 6:if(!(p=n.find((function(e){return e.razaoSocial===m})))){N.next=17;break}return f=p.razaoSocial,v=p.delegatarioId,N.next=11,ee.a.awrap(e.setState({selectedEmpresa:p,razaoSocial:f,delegatarioId:v}));case 11:m!==p.razaoSocial&&e.setState({selectedEmpresa:void 0}),E=r.filter((function(a){return a.empresa===e.state.razaoSocial})),x=i.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:E,seguros:x}),N.next=18;break;case 17:e.setState({selectedEmpresa:void 0,frota:[],placa:void 0,apolice:void 0});case 18:return N.abrupt("break",44);case 19:if("string"!==typeof m){N.next=23;break}return m=m.toLocaleUpperCase(),N.next=23,ee.a.awrap(e.setState(Object(g.a)({},u,m)));case 23:return N.abrupt("break",44);case 24:if(S=e.props.redux.seguros,y=e.state.selectedEmpresa,w=Object(h.a)(S.filter((function(e){return e.delegatarioId===y.delegatarioId}))),k=Object(b.a)({},w.find((function(e){return e[u]===m}))),O=Object(b.a)({},w.find((function(a){return a[u]===m&&a.apolice===e.state.apolice}))),"apolice"===u&&(C=k),"seguradora"===u&&(C=O),!(C&&C.dataEmissao&&C.vencimento)){N.next=33;break}return j=ue()(C.dataEmissao).format("YYYY-MM-DD"),D=C.vencimento.toString().slice(0,10),I=C.seguradora,N.next=32,ee.a.awrap(e.setState({seguradora:I,dataEmissao:j,vencimento:D,insuranceExists:C}));case 32:return N.abrupt("return");case 33:if(0!==Object.keys(C).length){N.next=38;break}return A={},Object.assign(A,{empresa:y.razaoSocial,delegatarioId:y.delegatarioId,apolice:l,seguradora:s,dataEmissao:c,vencimento:d,placas:[],veiculos:[]}),N.next=38,ee.a.awrap(e.setState({newInsurance:A,insuranceExists:!1,dataEmissao:"",vencimento:""}));case 38:return N.abrupt("break",44);case 39:case 41:return e.setState(Object(g.a)({},u,ja(m))),N.abrupt("break",44);case 43:case 44:case"end":return N.stop()}}))},e.getId=function(a,t,r,n,o,i,l){var s,c,d,u,m,p;return ee.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:if(c=r.filter((function(e){return e[o].toLowerCase().match(t.toLowerCase())})),""===t&&e.setState((s={},Object(g.a)(s,a,""),Object(g.a)(s,n,""),s)),!c[0]){f.next=10;break}if(d=c[0][o],u=c[0][i],""===t){f.next=8;break}return f.next=8,ee.a.awrap(e.setState((m={},Object(g.a)(m,a,d),Object(g.a)(m,n,u),m)));case 8:f.next=14;break;case 10:return f.next=12,ee.a.awrap(e.setState((p={},Object(g.a)(p,a,""),Object(g.a)(p,n,""),p)));case 12:e.setState({alertType:"invalidModel",openAlertDialog:!0,customMsg:"O modelo de ".concat(l," n\xe3o est\xe1 cadastrado no sistema.")}),document.getElementsByName(a)[0].focus();case 14:case"end":return f.stop()}}))},e.handleBlur=function(a){var t,r,n,o,i,l,s,c,d,u,m,p,f,g,h,b;return ee.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:t=e.props.redux,r=t.empresas,n=t.seguros,o=e.state,i=o.frota,l=o.modelosChassi,s=o.carrocerias,c=o.seguradoras,d=o.allInsurances,u=a.target.name,m=a.target.value,(p=Se())?e.setState({errors:p}):e.setState({errors:void 0}),v.t0=u,v.next="modeloChassi"===v.t0?7:"modeloCarroceria"===v.t0?9:"delegatarioCompartilhado"===v.t0?11:"seguradora"===v.t0?13:"apolice"===v.t0?20:23;break;case 7:return e.getId(u,m,l,"modeloChassiId","modeloChassi","id","chassi"),v.abrupt("break",24);case 9:return e.getId(u,m,s,"modeloCarroceriaId","modelo","id","carroceria"),v.abrupt("break",24);case 11:return e.getId(u,m,r,"compartilhadoId","razaoSocial","delegatarioId"),v.abrupt("break",24);case 13:return v.next=15,ee.a.awrap(e.getId(u,m,c,"seguradoraId","seguradora","id","Seguradora"));case 15:return f=[],e.state.delegatarioId&&""===e.state.seguradora&&(f=d.filter((function(a){return a.delegatarioId===e.state.delegatarioId})),e.setState({seguros:f})),e.state.delegatarioId||""===e.state.seguradora||(f=d.filter((function(a){return a.seguradora===e.state.seguradora})),e.setState({seguros:f})),e.state.delegatarioId&&""!==e.state.seguradora&&(f=d.filter((function(a){return a.delegatarioId===e.state.delegatarioId})).filter((function(a){return a.seguradora===e.state.seguradora})),e.setState({seguros:f})),v.abrupt("break",24);case 20:return(g=n.find((function(e){return e.apolice===m})))&&e.setState({insuranceExists:g}),v.abrupt("break",24);case 23:case 24:if("placa"!==u||"string"===typeof e.state.frota){v.next=42;break}if(7!==m.length){v.next=30;break}return h=m.replace(/(\w{3})/,"$1-"),v.next=29,ee.a.awrap(e.setState({placa:h}));case 29:m=h;case 30:if(8!==m.length){v.next=35;break}return b=m.replace(" ","-"),v.next=34,ee.a.awrap(e.setState({placa:b}));case 34:m=b;case 35:if(!i.find((function(e){return e.placa===m}))){v.next=42;break}return v.next=39,ee.a.awrap(e.setState({placa:null}));case 39:m="",e.setState({alertType:"plateExists",openAlertDialog:!0}),document.getElementsByName("placa")[0].focus();case 42:case"end":return v.stop()}}))},e.handleCadastro=function(){var a,t,r,n,o,i,l,s,c,d,u,m,p,f,h,b,v,E,x,S,y,w,C,k,O,j;return ee.a.async((function(D){for(;;)switch(D.prev=D.next){case 0:if(a=e.state,t=a.anoCarroceria,r=a.equipamentosId,n=a.peso_dianteiro,o=a.peso_traseiro,i=a.poltronas,l=a.delegatarioId,s=a.compartilhadoId,c=a.seguros,d=a.modeloChassiId,u=a.modeloCarroceriaId,m=a.seguradoraId,"Ativo",p=t,f=93*Number(i)+(Number(n)+Number(o)),isNaN(f)&&(f=void 0),h={},ze.forEach((function(a){a.forEach((function(a){for(var t in e.state)t===a.field&&Object.assign(h,Object(g.a)({},t,e.state[t]))}))})),b=h.dataEmissao,v=h.vencimento,h.delegatarioCompartilhado,h.modeloChassi,h.modeloCarroceria,h.seguradora,E=Object(X.a)(h,["dataEmissao","vencimento","delegatarioCompartilhado","modeloChassi","modeloCarroceria","seguradora"]),x={apolice:h.apolice,seguradoraId:m,delegatarioId:l},S=ue()(b,"YYYY-MM-DD",!0).isValid(),y=ue()(v,"YYYY-MM-DD",!0).isValid(),S&&(x.dataEmissao=b),y&&(x.vencimento=v),Object.assign(E,{delegatarioId:l,situacao:"Ativo",indicadorIdade:p,pbt:f,equipamentosId:r,modeloChassiId:d,modeloCarroceriaId:u}),E.delegatarioCompartilhado=s,Object.keys(E).forEach((function(e){""===E[e]&&delete E[e]})),Object.keys(x).forEach((function(e){""===x[e]&&delete x[e]})),w=ce.a.decamelizeKeys(E),C=ce.a.decamelizeKeys(x),!(k=c.filter((function(e){return e.apolice===C.apolice})))[0]){D.next=23;break}return D.next=19,ee.a.awrap(le.a.post("/api/cadastroVeiculo",w).then((function(a){var t=a.data;e.submitFiles(t)})).catch((function(e){return console.log(e)})));case 19:e.resetState(),e.toast(),D.next=36;break;case 23:if(k[0]||void 0===C.apolice||!(C.apolice.length>2)||void 0===C.seguradora_id){D.next=35;break}return D.next=26,ee.a.awrap(le.a.post("/api/cadastroVeiculo",w).then((function(a){console.log(a),O=a.data,e.submitFiles(O)})).catch((function(e){return console.log(e)})));case 26:return D.next=28,ee.a.awrap(le.a.post("/api/cadSeguro",C).then((function(e){return console.log(e.data)})));case 28:return j={table:"veiculo",column:"apolice",value:C.apolice,tablePK:"veiculo_id",ids:[O]},D.next=31,ee.a.awrap(le.a.put("/api/updateInsurances",j).then((function(e){return console.log(e.data)})));case 31:e.resetState(),e.toast(),D.next=36;break;case 35:e.setState({alertType:"invalidInsurance",openAlertDialog:!0});case 36:case"end":return D.stop()}}))},e.handleFiles=function(a,t){var r,n;return ee.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(a&&a.length>0)){o.next=7;break}return r=new FormData,(n=e.state.fileNames).push(Object(g.a)({},t,a[0].name)),o.next=5,ee.a.awrap(e.setState(Object(g.a)({filesNames:n},t,a[0])));case 5:_e.forEach((function(a){var t=a.name;for(var n in e.state)n.match(t)&&(r.append(t,e.state[t]),r.get(n)||r.delete(n))})),e.setState({form:r});case 7:case"end":return o.stop()}}))},e.submitFiles=function(a){var t,r,n,o,i,l,s,c,d,u,m,p,f,g,h,b,v,E;return ee.a.async((function(x){for(;;)switch(x.prev=x.next){case 0:if(t=e.state,r=t.selectedEmpresa,n=t.apolice,o=r.delegatarioId,i=new FormData,l=new FormData,!a||!e.state.form){x.next=23;break}for(i.append("veiculoId",a),s=!0,c=!1,d=void 0,x.prev=7,u=e.state.form.entries()[Symbol.iterator]();!(s=(m=u.next()).done);s=!0)(p=m.value)[0]&&p[1]?"apoliceDoc"===p[0]?(l.append("fieldName","apoliceDoc"),l.append("apolice",n),l.append("empresaId",o),l.append(p[0],p[1])):p[1]&&i.append(p[0],p[1]):(i=null,l=null);x.next=15;break;case 11:x.prev=11,x.t0=x.catch(7),c=!0,d=x.t0;case 15:x.prev=15,x.prev=16,s||null==u.return||u.return();case 18:if(x.prev=18,!c){x.next=21;break}throw d;case 21:return x.finish(18);case 22:return x.finish(15);case 23:for(f=!0,g=!1,h=void 0,x.prev=26,b=i.entries()[Symbol.iterator]();!(f=(v=b.next()).done);f=!0)E=v.value,console.log(E[0],E[1]);x.next=34;break;case 30:x.prev=30,x.t1=x.catch(26),g=!0,h=x.t1;case 34:x.prev=34,x.prev=35,f||null==b.return||b.return();case 37:if(x.prev=37,!g){x.next=40;break}throw h;case 40:return x.finish(37);case 41:return x.finish(34);case 42:if(!i){x.next=45;break}return x.next=45,ee.a.awrap(le.a.post("/api/mongoUpload",i).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})));case 45:if(!l){x.next=48;break}return x.next=48,ee.a.awrap(le.a.post("/api/empresaUpload",l).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})));case 48:case"end":return x.stop()}}),null,null,[[7,11,15,23],[16,,18,22],[26,30,34,42],[35,,37,41]])},e.showFiles=function(a){var t=e.state.files.filter((function(e){return e.metadata.veiculoId===a.toString()}));t[0]?e.setState({filesCollection:t,showFiles:!0,selectedVehicle:a}):(e.setState({alertType:"filesNotFound",openAlertDialog:!0}),e.setState({filesCollection:[]}))},e.resetState=function(){var a={},t=e.props.redux.equipamentos,r={},n={};ze.forEach((function(t){t.forEach((function(t){Object.keys(t).forEach((function(r){"field"===r&&e.state[t[r]]&&Object.assign(a,Object(g.a)({},t[r],void 0))}))}))})),_e.forEach((function(e){var a=e.name;Object.assign(r,Object(g.a)({},a,null))})),t.forEach((function(e){return Object.assign(n,Object(g.a)({},e.item,!1))})),e.setState(Object(b.a)({},a,{},r,{},n,{activeStep:0,razaoSocial:"",selectedEmpresa:void 0,frota:[],delegatarioCompartilhado:"",files:[],fileNames:[],insuranceExists:!1,form:new FormData}))},e.handleCheck=function(a){return e.setState(Object(b.a)({},e.state,Object(g.a)({},a,!e.state[a])))},e.handleEquipa=function(){return e.setState({addEquipa:!e.state.addEquipa})},e.toggleDialog=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.handleEquipa()},e}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentDidMount",value:function(){var e,a,t,r,n,o;return ee.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e=this.props.redux,a=e.modelosChassi,t=e.carrocerias,r=e.seguradoras,n={},!e||!e.equipamentos){i.next=7;break}return e.equipamentos.forEach((function(e){return Object.assign(n,Object(g.a)({},e.item,!1))})),o=Object.keys(n),i.next=7,ee.a.awrap(this.setState(Object(b.a)({modelosChassi:a,carrocerias:t,seguradoras:r,equipamentos:o},n,{allInsurances:this.props.redux.seguros})));case 7:document.addEventListener("keydown",this.escFunction,!1);case 8:case"end":return i.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.confirmToast,t=e.toastMsg,o=e.activeStep,i=e.openAlertDialog,l=e.alertType,s=e.steps,c=e.selectedEmpresa,d=e.placa,u=e.dropDisplay,m=e.form,p=e.insuranceExists,f=this.props.redux,g=f.empresas,h=f.equipamentos;return n.a.createElement(r.Fragment,null,n.a.createElement(da,{links:["Ve\xedculos","/veiculos"],text:"Cadastro de ve\xedculo"}),n.a.createElement(ba,{activeStep:o,steps:s,setActiveStep:this.setActiveStep}),n.a.createElement(qe,{data:this.state,empresas:g,equipamentos:h,handleInput:this.handleInput,handleBlur:this.handleBlur,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck,match:this.props.match}),3===o&&n.a.createElement(He,{parentComponent:"cadastro",handleFiles:this.handleFiles,dropDisplay:u,formData:m,insuranceExists:p}),4===o&&n.a.createElement(ia,{parentComponent:"cadastro",files:this.state.form,filesForm:_e,data:this.state,form:ze}),c&&n.a.createElement(ma,{activeStep:o,lastStep:s.length-1,handleSubmit:this.handleCadastro,setActiveStep:this.setActiveStep,disabled:"string"!==typeof d||""===d}),n.a.createElement(Oa,{open:a,close:this.toast,msg:t}),i&&n.a.createElement(za,{open:i,close:this.toggleDialog,alertType:l,customMessage:this.state.customMsg}))}}]),a}(r.PureComponent)),Ta=[[{field:"placa",label:"Placa",margin:"normal",datalist:"placa",autoComplete:!0,collection:"frota"},{field:"delegatario",label:"Delegat\xe1rio",margin:"normal",datalist:"razaoSocial",autoComplete:!0,collection:"empresas"},{field:"compartilhado",label:"Delegat\xe1rio Compartilhado",margin:"normal",datalist:"razaoSocial",autoComplete:!0,collection:"empresas"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Convencional","Executivo","Leito","Semi-Leito","Urbano"]},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50},{field:"renavam",label:"Renavam",margin:"normal",disabled:!0},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17,disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",disabled:!0},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",disabled:!0},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",disabled:!0},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",disabled:!0},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,disabled:!0}]].concat([[{field:"pesoDianteiro",label:"Peso Dianteiro (kg)",margin:"normal",type:"number",max:12e3},{field:"pesoTraseiro",label:"Peso Traseiro (kg)",margin:"normal",type:"number",max:15e3},{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piquesPoltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150}]]).concat([[]]).concat([[]]),La=(t(385),Object(S.a)((function(e){return{paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1),minWidth:"700px"}}})));function qa(e){var a=e.empresas,t=e.handleInput,r=e.handleBlur,o=e.data.razaoSocial,i=La().paper;return n.a.createElement("div",{className:"selectEmpresa"},n.a.createElement(je.a,{className:i,style:{padding:"0 2% 0 2%"}},n.a.createElement("div",{className:"item"},n.a.createElement("h3",null,"  Selecione a Via\xe7\xe3o "),n.a.createElement("input",{list:"razaoSocial",name:"razaoSocial",className:"selectEmpresa",value:o,onChange:t,onBlur:r}),n.a.createElement(we,{style:{textAlign:"center",width:"500px"},collection:a,datalist:"razaoSocial",value:o}))))}var Ma=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1)},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)}}})),Ba=function(e){var a=e.handleInput,t=e.handleBlur,o=e.data,i=e.handleCheck,l=e.handleEquipa,s=e.altPlacaOption,c=e.showAltPlaca,d=e.empresas,u=e.equipamentos,m=o.activeStep,p=o.subtitle,f=o.placa,g=o.justificativa,h=o.selectedEmpresa,b=o.addEquipa,v=Ma(),E=v.paper,x=v.container,S=Ta[m];return n.a.createElement(r.Fragment,null,n.a.createElement(V.a,{container:!0,direction:"row",className:x,justify:"center"},0===m&&n.a.createElement(qa,{data:o,empresas:d,handleInput:a,handleBlur:t}),h?n.a.createElement(V.a,{item:!0,xs:12},m<3&&n.a.createElement(je.a,{className:E},n.a.createElement("h3",{className:"formSubtitle"}," ",p[m]+(f&&0!==m?" - placa "+f:"")),n.a.createElement(Oe,{form:S,data:o,handleBlur:t,handleInput:a})),0===m&&n.a.createElement(V.a,{container:!0,justify:"center"},n.a.createElement(k.a,{variant:"outlined",size:"small",color:"primary",className:v.button,onClick:l},n.a.createElement(Ne.a,null),"Equipamentos")),s&&f.match("[a-zA-Z]{3}[-]?\\d{4}")&&n.a.createElement("div",{className:"addNewDiv"},n.a.createElement("span",{onClick:function(){return c()}}," \u2192 Clique aqui para alterar a placa para o formato Mercosul.")),b&&n.a.createElement(Te,{equipamentos:u,close:l,handleCheck:i,data:o})):n.a.createElement(V.a,{container:!0,justify:"center"},n.a.createElement("div",{className:v.formHolder}))),1===m&&n.a.createElement(V.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},n.a.createElement(V.a,null,n.a.createElement(Ce.a,{name:"justificativa",value:g,label:"Justificativa",type:"text",onChange:a,InputLabelProps:{shrink:!0,style:{fontWeight:600,marginBottom:"5%"}},inputProps:{style:{paddingBottom:"2%",width:"900px"}},multiline:!0,rows:4,variant:"outlined"}))))};function Va(e){var a=e.open,t=e.close,r=e.handleInput,o=e.handleFiles,i=e.updatePlate,l=e.newPlate,s=e.formData,c=e.dropDisplay,d=function(e){return!(e.length<9&&e.match("[a-zA-Z]{3}?[-]\\d{1}\\w{1}\\d{2}"))};return n.a.createElement("div",null,n.a.createElement(Da.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-title"},n.a.createElement(Pa.a,{id:"form-dialog-title"},"Alterar Placa"),n.a.createElement(Aa.a,null,n.a.createElement(Na.a,null,"Para alterar a placa do ve\xedculo para o padr\xe3op Mercosul, digite a placa no campo abaixo e anexe o CRLV atualizado do ve\xedculo."),n.a.createElement(Ce.a,{autoFocus:!0,margin:"dense",name:"newPlate",label:"Nova placa",type:"text",onChange:r,value:l,error:d(l),fullWidth:!0}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(We,{title:"Nova placa",name:"newPlateDoc",formData:s,dropDisplay:c,handleFiles:o})),n.a.createElement(Ia.a,null,n.a.createElement(k.a,{onClick:t,color:"primary"},"Cancelar"),n.a.createElement(k.a,{onClick:i,color:"primary",disabled:d(l)},"Confirmar"))))}var Ra=xe(["veiculos","empresas","equipamentos"],function(e){function a(){var e;return Object(ae.a)(this,a),(e=Object(re.a)(this,Object(ne.a)(a).call(this))).state={stepTitles:["Informe a placa para alterar os dados abaixo ou mantenha as informa\xe7\xf5es atuais e clique em avan\xe7ar","Altere os dados desejados abaixo e clique em avan\xe7ar","Anexe os documentos solicitados","Revis\xe3o das informa\xe7\xf5es e deferimento"],steps:["Alterar dados do Ve\xedculo","Alterar dados adicionais","Documentos","Revis\xe3o"],subtitle:["Dados do Ve\xedculo","Informa\xe7\xf5es adicionais","Anexe os arquivos solicitados","Revis\xe3o"],empresas:[],razaoSocial:"",delegatarioCompartilhado:"",frota:[],toastMsg:"Dados atualizados!",confirmToast:!1,activeStep:0,files:[],fileNames:[],openAlertDialog:!1,altPlaca:!1,newPlate:"",placa:"",addEquipa:!1,dropDisplay:"Clique ou arraste para anexar"},e.setActiveStep=function(a){var t,r;return ee.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=e.state.errors)||!t[0]){n.next=4;break}return e.setState(Object(b.a)({},e.state,{},Se("setState"))),n.abrupt("return");case 4:r=e.state.activeStep,"next"===a&&e.setState({activeStep:r+1}),"back"===a&&e.setState({activeStep:r-1}),"reset"===a&&e.setState({activeStep:0});case 8:case"end":return n.stop()}}))},e.handleInput=function(a){var t,r,n,o,i,l,s,c,d;return ee.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e.props.redux,r=t.veiculos,n=t.empresas,o=a.target,i=o.name,l=o.value,"razaoSocial"!==i){u.next=13;break}if(!(s=n.find((function(e){return e.razaoSocial===l})))){u.next=11;break}return u.next=6,ee.a.awrap(e.setState({razaoSocial:s.razaoSocial,selectedEmpresa:s}));case 6:l!==s.razaoSocial&&e.setState({selectedEmpresa:void 0}),c=r.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:c}),u.next=13;break;case 11:e.setState({selectedEmpresa:void 0,frota:[]}),e.reset();case 13:"placa"===i&&e.state.frota&&(e.state.frota.find((function(e){return e.placa===l}))||e.state.equipamentos.forEach((function(a){return e.setState(Object(g.a)({},a,!1))}))),"newPlate"===i?"string"===typeof(d=l)&&((d=d.replace(/[a-z]/g,(function(e){return e.toUpperCase()}))).match("[A-Z]{3}[0-9]{1}[A-Z]{1}[0-9]{2}")&&(d=d.replace(/(\w{3})/,"$1-")),e.setState(Object(b.a)({},e.state,{newPlate:d}))):e.setState(Object(g.a)({},i,l));case 15:case"end":return u.stop()}}))},e.getId=function(a,t,r,n,o,i){var l,s,c,d,u,m;return ee.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(s=r.filter((function(e){return e[o].toLowerCase().match(t.toLowerCase())})),""===t&&e.setState((l={},Object(g.a)(l,a,""),Object(g.a)(l,n,""),l)),!s[0]){p.next=10;break}if(c=s[0][o],d=s[0][i],""===t){p.next=8;break}return p.next=8,ee.a.awrap(e.setState((u={},Object(g.a)(u,a,c),Object(g.a)(u,n,d),u)));case 8:p.next=14;break;case 10:return p.next=12,ee.a.awrap(e.setState((m={},Object(g.a)(m,a,""),Object(g.a)(m,n,""),m)));case 12:e.setState({openAlertDialog:!0,alertType:"empresaNotFound"}),document.getElementsByName(a)[0].focus();case 14:case"end":return p.stop()}}))},e.capitalize=function(e,a){if(a&&"string"===typeof a)return"utilizacao"===e&&("RODOVIARIO"===a&&(a="CONVENCIONAL"),"SEMI LEITO - EXECUTIVO"===a&&(a="Semi-Leito"),"Semi-Leito"!==a&&(a=a.charAt(0)+a.slice(1).toLowerCase())),"dominio"===e&&"Sim"===a&&(a="Ve\xedculo pr\xf3prio"),"dominio"===e&&"N\xe3o"===a&&(a="Possuidor"),a},e.handleBlur=function(a){var t,r,n,o,i,l,s,c,d,u,m;return ee.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:t=e.props.redux.empresas,r=e.state,n=r.frota,o=r.equipamentos,i=a.target.name,l=a.target.value,s=[],(c=Se())?e.setState({errors:c}):e.setState({errors:void 0}),p.t0=i,p.next="compartilhado"===p.t0?7:"delegatario"===p.t0?9:12;break;case 7:return e.getId(i,l,t,"delegatarioCompartilhado","razaoSocial","delegatarioId"),p.abrupt("break",13);case 9:return p.next=11,ee.a.awrap(e.getId(i,l,t,"delegatarioId","razaoSocial","delegatarioId"));case 11:return p.abrupt("break",13);case 12:case 13:if(!("placa"===i&&l.length>2&&Array.isArray(e.state.frota))){p.next=24;break}return(d=e.state.frota.find((function(e){return"string"===typeof l?e.placa.toLowerCase().match(l.toLowerCase()):e.placa.match(l)})))&&d.equipamentosId&&(u=d.equipamentosId,o.forEach((function(e){u.toLowerCase().match(e.toLowerCase())&&s.push(e)})),s.forEach((function(a){return e.setState(Object(g.a)({},a,!0))}))),d&&d.utilizacao&&(d.utilizacao=e.capitalize("utilizacao",d.utilizacao)),d&&d.dominio&&(d.dominio=e.capitalize("dominio",d.dominio)),p.next=20,ee.a.awrap(e.setState(Object(b.a)({},d,{equipamentosId:s,disable:!0})));case 20:void 0!==d&&d.hasOwnProperty("empresa")&&e.setState({delegatario:d.empresa}),m={},n[0]&&Object.keys(n[0]).forEach((function(e){return m[e]=""})),""===e.state.placa||d||(e.setState({alertType:"plateNotFound",openAlertDialog:!0}),e.setState(Object(b.a)({},m,{disable:!1})));case 24:case"end":return p.stop()}}))},e.showAltPlaca=function(){e.setState({altPlaca:!0,title:"Altera\xe7\xe3o de placa",message:"Para alterar a placa para o novo padr\xe3o Mercosul, informe a nova placa no campo abaixo."})},e.updatePlate=function(){e.setState({placa:e.state.newPlate}),e.toggleDialog()},e.handleSubmit=function(){var a,t,r,n,o,i,l,s,c,d,u,m,p;return ee.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:return a=e.state,t=a.poltronas,r=a.pesoDianteiro,n=a.pesoTraseiro,o=a.delegatarioId,i=a.delegatarioCompartilhado,l=a.equipamentosId,s=a.newPlate,c=a.selectedEmpresa,d={},Ta.forEach((function(a){a.forEach((function(a){for(var t in e.state)t!==a.field||a.disabled||e.state[t]&&Object.assign(d,Object(g.a)({},t,e.state[t]))}))})),u=93*Number(t)+(Number(r)+Number(n)),isNaN(u)&&(u=void 0),d=Object.assign(d,{delegatarioId:o,delegatarioCompartilhado:i,pbt:u,equipamentosId:l}),d=ce.a.decamelizeKeys(d),Object.keys(d).forEach((function(e){""!==d[e]&&"null"!==d[e]&&d[e]||delete d[e]})),(m=d).placa,m.delegatario,m.compartilhado,p=Object(X.a)(m,["placa","delegatario","compartilhado"]),s&&""!==s&&(p.placa=s),c.delegatarioId!==o&&(p.apolice="Seguro n\xe3o cadastrado"),"veiculo","veiculo_id",f.next=14,ee.a.awrap(le.a.put("/api/updateVehicle",{requestObject:p,table:"veiculo",tablePK:"veiculo_id",id:e.state.veiculoId}));case 14:return f.next=16,ee.a.awrap(e.submitFiles());case 16:e.setState({activeStep:0,razaoSocial:"",selectedEmpresa:void 0}),e.reset(),e.setState({}),e.toast();case 20:case"end":return f.stop()}}))},e.handleFiles=function(a,t){var r,n;return ee.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!a||!a[0]){o.next=10;break}if((r=new FormData).append("veiculoId",e.state.veiculoId),n=e.state.fileNames,!(a&&a.length>0)){o.next=10;break}return n.push(Object(g.a)({},t,a[0].name)),o.next=8,ee.a.awrap(e.setState(Object(g.a)({filesNames:n},t,a[0])));case 8:Ye.forEach((function(a){var t=a.name;for(var n in e.state)n.match(t)&&r.append(t,e.state[t])})),e.setState({form:r});case 10:case"end":return o.stop()}}))},e.submitFiles=function(){var a=e.state.form;le.a.post("/api/mongoUpload",a).then((function(e){return console.log("uploaded")})).catch((function(e){return console.log(e)}))},e.handleCheck=function(a){var t,r;return ee.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.state.equipamentos,r=[],n.next=4,ee.a.awrap(e.setState(Object(b.a)({},e.state,Object(g.a)({},a,!e.state[a]))));case 4:t.forEach((function(a){!0===e.state[a]&&r.push(a)})),r[0]?e.setState({equipamentosId:r}):e.setState({equipamentosId:[]});case 6:case"end":return n.stop()}}))},e.handleEquipa=function(){return e.setState({addEquipa:!e.state.addEquipa})},e.toggleDialog=function(){return e.setState({altPlaca:!e.state.altPlaca})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.reset=function(){var a={};Ta.forEach((function(a){return a.forEach((function(a){return e.setState(Object(g.a)({},a.field,""))}))})),Ye.forEach((function(e){var t=e.name;Object.assign(a,Object(g.a)({},t,void 0))})),e.setState(Object(b.a)({},a,{form:void 0}))},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.handleEquipa()},e}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentDidMount",value:function(){var e,a,t;return ee.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=this.props.redux,a={},!e||!e.equipamentos){r.next=7;break}return e.equipamentos.forEach((function(e){return Object.assign(a,Object(g.a)({},e.item,!1))})),t=Object.keys(a),r.next=7,ee.a.awrap(this.setState(Object(b.a)({equipamentos:t},a)));case 7:document.addEventListener("keydown",this.escFunction,!1);case 8:case"end":return r.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.confirmToast,t=e.toastMsg,o=e.stepTitles,i=e.activeStep,l=e.steps,s=e.altPlaca,c=e.selectedEmpresa,d=e.openAlertDialog,u=e.alertType,m=e.dropDisplay,p=e.form,f=this.props.redux,g=f.empresas,h=f.equipamentos;return n.a.createElement(r.Fragment,null,n.a.createElement(da,{links:["Ve\xedculos","/veiculos"],text:"Altera\xe7\xe3o de dados"}),n.a.createElement(ba,{activeStep:i,steps:l,stepTitles:o,setActiveStep:this.setActiveStep}),i<2&&n.a.createElement(Ba,{data:this.state,empresas:g,equipamentos:h,setActiveStep:this.setActiveStep,altPlacaOption:0===i,handleInput:this.handleInput,handleBlur:this.handleBlur,showAltPlaca:this.showAltPlaca,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck}),2===i&&n.a.createElement(He,{parentComponent:"altDados",handleFiles:this.handleFiles,dropDisplay:m,formData:p}),3===i&&n.a.createElement(ia,{parentComponent:"altDados",files:this.state.form,filesForm:Ye,data:this.state,form:Ta}),c&&n.a.createElement(ma,{activeStep:i,lastStep:l.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep}),n.a.createElement(Oa,{open:a,close:this.toast,msg:t}),n.a.createElement(Va,{open:s,close:this.toggleDialog,newPlate:this.state.newPlate,handleInput:this.handleInput,handleFiles:this.handleFiles,updatePlate:this.updatePlate,dropDisplay:m,formData:p}),d&&n.a.createElement(za,{open:d,close:this.closeAlert,alertType:u,customMessage:this.state.customMsg}))}}]),a}(r.Component)),Ua=t(278),Wa=t(119),_a=t.n(Wa),Ya=[{field:"seguradora",label:"Seguradora",autoComplete:!0,datalist:"seguradora",collection:"seguradoras",maxLength:80},{field:"apolice",label:"Ap\xf3lice",autoComplete:!0,datalist:"apolice",collection:"seguros",maxLength:25},{type:"date",field:"dataEmissao",label:"Data de Emiss\xe3o"},{type:"date",field:"vencimento",label:"Vencimento"}],Ka=Object(S.a)((function(e){return{paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},title:{color:"#000",fontWeight:400,fontSize:"0.9rem",textAlign:"center",marginBottom:"20px"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},chip:{margin:e.spacing(.5)}}}));function Ha(e){var a=e.empresas,t=e.data,o=e.enableAddPlaca,i=e.handleInput,l=e.handleBlur,s=e.addPlate,c=e.removeFromInsurance,d=e.handleFiles,u=e.handleSubmit,m=e.enableChangeApolice,p=e.showAllPlates,f=t.selectedEmpresa,g=t.placa,h=t.apolice,b=t.addedPlaca,v=t.frota,E=t.insuranceExists,x=t.insurance,S=t.dropDisplay,y=t.seguroFile,w=Ka(),C=w.paper,O=w.textField,j=w.chip,D=[];return x&&x.placas&&(x.placas[0]&&null!==x.placas[0]&&(D=x.placas.sort()),void 0!==g&&g.length>2&&D[0]&&(D="string"===typeof g?x.placas.filter((function(e){return e.toLowerCase().match(g.toLowerCase())})).sort():x.placas.filter((function(e){return e.match(g)})).sort())),n.a.createElement(r.Fragment,null,n.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},n.a.createElement(da,{links:["Ve\xedculos","/veiculos"],text:"Seguros"}),n.a.createElement(qa,{data:t,empresas:a,handleInput:i,handleBlur:l}),f&&n.a.createElement(je.a,{className:C},n.a.createElement("h3",{className:"formSubtitle"},"Informe os dados do seguro."),n.a.createElement(Oe,{form:Ya,data:t,handleBlur:l,handleInput:i}),E&&n.a.createElement("div",{className:"addNewDiv"},n.a.createElement("span",{onClick:function(){return m()}}," \u2192 Clique aqui para alterar o n\xfamero da ap\xf3lice mantendo as placas."))),f&&x&&(x.placas||o)&&n.a.createElement(je.a,{className:C},n.a.createElement("p",null,"Utilize as op\xe7\xf5es abaixo para filtrar, adicionar ou excluir placas desta ap\xf3lice"),n.a.createElement("section",{className:"addSeguro"},n.a.createElement("div",null,n.a.createElement(Ce.a,{inputProps:{name:"addedPlaca",list:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Insira a placa",className:O,value:b,onChange:i,onBlur:l}),n.a.createElement(we,{collection:v,datalist:"placa",value:b}),n.a.createElement(k.a,{size:"small",variant:"contained",className:w.button,style:{margin:"10px 0 10px 0"},onClick:function(){return s(b)}},n.a.createElement(Ne.a,null)," Adicionar")),n.a.createElement("div",null,n.a.createElement(Ce.a,{inputProps:{name:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Filtrar",className:O,value:g||"",onChange:i,onBlur:l}),n.a.createElement(A.a,{style:{marginTop:"18px"}})),n.a.createElement(We,{name:"apoliceDoc",formData:y,dropDisplay:S,handleFiles:d,single:!0})),n.a.createElement("div",{className:"addNewDiv",style:{justifyContent:"flex-start",padding:"10px"}},n.a.createElement("span",{onClick:function(){return p()}},"\u2192 Clique aqui para selecionar placas")),x&&x.placas&&x.placas[0]?n.a.createElement("div",{style:{margin:"15px"}},"Placas vinculadas a ap\xf3lice ",x.apolice):n.a.createElement("div",{style:{marginTop:"30px"}}),x&&x.placas&&h&&h.length>2&&D[0]&&D.map((function(e,a){return n.a.createElement(Ua.a,{key:a,label:e,onDelete:function(){return c(e)},className:j,color:"primary",variant:"outlined"})})))),h&&(x||o)&&n.a.createElement("div",{style:{minHeight:"60px",position:"flex"}},n.a.createElement(k.a,{size:"small",color:"primary",className:"saveButton",variant:"contained",onClick:function(){return u()}},"Salvar ",n.a.createElement("span",null,"\xa0\xa0 ")," ",n.a.createElement(_a.a,null))))}var Ga=function(e){var a=e.items,t=e.title,r=e.data,o=e.close,i=e.handleCheck;return n.a.createElement("div",{className:"popUpWindow row"},n.a.createElement("h3",null,t," Clique em \"X\" ou pressione 'esc' para voltar"),n.a.createElement("div",{className:"checkListContainer"},a.map((function(e,a){return n.a.createElement("div",{className:"checkListItem",key:a},n.a.createElement("input",{id:a,type:"checkbox",checked:!0===r[e],onChange:function(){return i(e)}}),n.a.createElement("label",{htmlFor:a},e))}))),n.a.createElement(Fe,{close:o}))};function Ja(e){var a=e.open,t=e.close,r=e.title,o=e.helperMessage,i=e.marca,l=e.marcas,s=e.selectMarca,c=e.newElement,d=e.handleInput,u=e.addNewElement;return n.a.createElement("div",null,n.a.createElement(Da.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-title"},n.a.createElement(Pa.a,{id:"form-dialog-title"},r),n.a.createElement(Aa.a,null,n.a.createElement(Na.a,null,o),n.a.createElement("div",{className:"editFields"},l&&n.a.createElement("div",{className:"configMarca"},n.a.createElement(Ce.a,{onChange:s,value:i,label:"Selecione uma marca",select:!0,InputLabelProps:{shrink:!0},SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},l.map((function(e,a){var t=e.marca;return n.a.createElement(ye.a,{key:a,value:t},t)})))),n.a.createElement("div",{className:"configField"},n.a.createElement(Ce.a,{autoFocus:!0,margin:"dense",name:"newElement",label:"Inserir",type:"text",onChange:d,value:c,fullWidth:!0}))),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null)),n.a.createElement(Ia.a,null,n.a.createElement(k.a,{onClick:t,color:"primary"},"Cancelar"),n.a.createElement(k.a,{onClick:function(){return u()},color:"primary"},"Confirmar"))))}var $a=xe(["veiculos","empresas","seguradoras","seguros"],function(e){function a(){var e;return Object(ae.a)(this,a),(e=Object(re.a)(this,Object(ne.a)(a).call(this))).state={addedPlaca:"",insurance:{},insuranceExists:!1,razaoSocial:"",seguradora:"",deletedVehicles:[],toastMsg:"Seguro atualizado!",confirmToast:!1,dropDisplay:"Clique ou arraste para anexar a ap\xf3lice",showAllPlates:!1},e.checkExistance=function(a,t){var r,n,o,i,l,s,c,d,u;return ee.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(r=JSON.parse(JSON.stringify(e.props.redux.seguros)),n=e.state.selectedEmpresa,o=Object(h.a)(r.filter((function(e){return e.delegatarioId===n.delegatarioId}))),i=Object(b.a)({},o.find((function(e){return e[a]===t}))),!(l=Object.keys(i).length>0)){m.next=10;break}return s=ue()(i.dataEmissao).format("YYYY-MM-DD"),c=i.vencimento.toString().slice(0,10),d=i.seguradora,u=i.seguradoraId,m.next=7,ee.a.awrap(e.setState({seguradora:d,seguradoraId:u,dataEmissao:s,vencimento:c,insurance:i,insuranceExists:l}));case 7:return m.abrupt("return");case 10:e.setState({insuranceExists:l,insurance:{},dataEmissao:"",vencimento:"",deletedVehicles:[]});case 11:case"end":return m.stop()}}))},e.handleInput=function(a){var t,r,n,o,i,l,s,c,d,u,m,p,f,h,b,v,E,x,S,y,w,C,k,O,j,D;return ee.a.async((function(I){for(;;)switch(I.prev=I.next){case 0:t=a.target.value,r=a.target.name,n=e.props.redux,o=n.veiculos,i=n.empresas,l=n.seguradoras,s=e.state,c=s.allInsurances,d=s.selectedEmpresa,u=s.frota,m=s.insurance,p=s.apolice,f=s.dataEmissao,h=s.vencimento,b=s.newInsurance,v=s.seguradora,e.setState(Object(g.a)({},r,t)),I.t0=r,I.next="razaoSocial"===I.t0?6:"apolice"===I.t0?18:"seguradora"===I.t0?20:"addedPlaca"===I.t0?23:26;break;case 6:if(!(E=i.find((function(e){return e.razaoSocial===t})))){I.next=15;break}return I.next=10,ee.a.awrap(e.setState({razaoSocial:E.razaoSocial,selectedEmpresa:E}));case 10:t!==E.razaoSocial&&e.setState({selectedEmpresa:void 0}),x=o.filter((function(a){return a.empresa===e.state.razaoSocial})),S=c.filter((function(a){return a.empresa===e.state.razaoSocial})),y=x.map((function(e){return e.placa})).sort(),e.setState({frota:x,seguros:S,allPlates:y}),I.next=17;break;case 15:e.setState({selectedEmpresa:void 0,frota:[]}),e.clearFields();case 17:return I.abrupt("break",27);case 18:return e.checkExistance("apolice",t),I.abrupt("break",27);case 20:return(w=l.find((function(e){return e.seguradora===t})))&&e.setState({seguradoraId:w.id}),I.abrupt("break",27);case 23:return(C=u.find((function(e){return e.placa===t})))&&e.setState({vehicleFound:C}),I.abrupt("break",27);case 26:case 27:if(k=["seguradora","apolice","dataEmissao","vencimento"].every((function(a){return e.state[a]&&""!==e.state[a]})),"razaoSocial"===r||b||!k||0!==Object.keys(m).length){I.next=36;break}return O={},(D=l.find((function(a){return a.seguradora===e.state.seguradora})))&&(j=D.id),Object.assign(O,{empresa:d.razaoSocial,delegatarioId:d.delegatarioId,apolice:p,seguradora:v,seguradoraId:j,dataEmissao:f,vencimento:h,placas:[],veiculos:[]}),I.next=36,ee.a.awrap(e.setState({insuranceExists:!1,insurance:O,seguradoraId:j}));case 36:case"end":return I.stop()}}))},e.handleBlur=function(a){var t=e.props.redux.seguradoras,r=e.state,n=r.seguradora,o=r.allInsurances,i=r.selectedEmpresa,l=a.target.name;if("seguradora"===l){var s=[],c=t.find((function(e){return e.seguradora.toLowerCase().match(n.toLowerCase())}));c&&n.length>2&&e.setState({seguradora:c.seguradora}),!c&&n.length>2&&e.setState({openAlertDialog:!0,alertType:"seguradoraNotFound",seguradora:void 0}),i&&!n?(s=o.filter((function(e){return e.empresa===i.razaoSocial})),e.setState({seguros:s})):i||""===n?i&&""!==n&&(s=o.filter((function(e){return e.empresa===i.razaoSocial})).filter((function(e){return e.seguradora===n})),e.setState({seguros:s})):(s=o.filter((function(e){return e.seguradora===n})),e.setState({seguros:s}))}if("dataEmissao"===l||"vencimento"===l){var d=Se();d?e.setState({errors:d}):e.setState({errors:void 0})}},e.showAllPlates=function(){var a=e.state,t=a.insurance,r=a.allPlates,n=[],o={};t&&t.placas&&(n=t.placas),r.forEach((function(e){return Object.assign(o,Object(g.a)({},e,!1))})),n.forEach((function(e){return Object.assign(o,Object(g.a)({},e,!0))})),e.setState({allPlatesObj:o,insuredPlates:n,showAllPlates:!e.state.showAllPlates})},e.handleCheck=function(a){var t;return ee.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:(t=Object(b.a)({},e.state.allPlatesObj))[a]=!t[a],!0===t[a]?e.addPlate(a):e.removeFromInsurance(a),e.setState({allPlatesObj:t});case 4:case"end":return r.stop()}}))},e.addPlate=function(a){var t,r,n,o,i,l,s,c;return ee.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(t=e.state,r=t.apolice,n=t.frota,o=n.find((function(e){return e.placa===a})),i=e.state,l=i.insuranceExists,s=i.insurance,a&&""!==a){d.next=4;break}return d.abrupt("return");case 4:if(void 0!==o&&!1!==o.hasOwnProperty("veiculoId")){d.next=9;break}return e.setState({openAlertDialog:!0,alertType:"plateNotFound"}),d.abrupt("return",null);case 9:if(!0!==l||!s.placas||!o.placa){d.next=14;break}if(!s.placas.find((function(e){return e===o.placa}))){d.next=14;break}return e.setState({openAlertDialog:!0,alertType:"plateExists"}),d.abrupt("return",null);case 14:r&&((c=Object(b.a)({},s)).placas||(c.placas=[]),c.veiculos||(c.veiculos=[]),c.placas.push(a),c.veiculos.push(o.veiculoId),e.setState({insurance:c,addedPlaca:""}));case 15:case"end":return d.stop()}}))},e.removeFromInsurance=function(a){var t,r,n,o,i,l,s,c,d,u,m,p,f,g,v,E;return ee.a.async((function(x){for(;;)switch(x.prev=x.next){case 0:t=e.state,r=t.apolice,n=t.frota,o=n.find((function(e){return e.placa===a})),i=o.veiculoId,l=o.placa,s=Object(b.a)({},e.state.insurance),c=Object(h.a)(e.state.deletedVehicles),d=[],u=[],(p=e.props.redux.seguros.find((function(e){return e.apolice===r})))&&p.placas&&(m=p.placas.includes(l)),m&&(f=s.veiculos,g=f.indexOf(i),c.push(f[g]),e.setState({deletedVehicles:c})),s.placas&&(d=s.placas),s.veiculos&&(u=s.veiculos),v=d.indexOf(l),E=u.indexOf(i),s.placas.splice(v,1),s.veiculos.splice(E,1),e.setState({insurance:s});case 11:case"end":return x.stop()}}))},e.updateInsurance=function(){var a=e.state,t=a.insurance,r=a.dataEmissao,n=a.vencimento,o=a.seguradoraId,i=t.id,l=t.veiculos,s={},c=!ue()(r).isSame(ue()(t.dataEmissao)),d=!ue()(n).isSame(ue()(t.vencimento)),u=o!==t.seguradoraId;if(c||d||!u){c&&(s.data_emissao=r),d&&(s.vencimento=n),u&&(s.seguradora_id=o);var m={id:i,columns:Object.keys(s),updates:s,vehicleIds:l};le.a.put("/api/updateInsurance",m).then((function(e){return console.log(e.data)}))}},e.handleSubmit=function(){var a,t,r,n,o,i,l,s,c,d,u,m,p,f,g,v,E,x,S;return ee.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:if(a=e.state,t=a.seguradora,r=a.insuranceExists,n=a.insurance,o=a.errors,i=a.newElement,l=a.deletedVehicles,s=Object(h.a)(e.state.frota),c=[],!o||!o[0]){y.next=5;break}return e.setState(Object(b.a)({},e.state,{},Se("setState"))),y.abrupt("return");case 5:if(t&&""!==t){y.next=8;break}return e.setState({openAlertDialog:!0,alertType:"seguradoraNotFound",seguradora:void 0}),y.abrupt("return");case 8:if(d=e.state,u=d.seguradoraId,m=d.apolice,p=d.dataEmissao,f=d.vencimento,g=d.selectedEmpresa,v={apolice:m,seguradora_id:u,delegatario_id:g.delegatarioId},E=ue()(p,"YYYY-MM-DD",!0).isValid(),x=ue()(f,"YYYY-MM-DD",!0).isValid(),E&&(v.data_emissao=p),x&&(v.vencimento=f),r){y.next=17;break}return n&&(c=n.veiculos),y.next=17,ee.a.awrap(le.a.post("/api/cadSeguro",v));case 17:if(!r){y.next=21;break}return c=n.veiculos,y.next=21,ee.a.awrap(e.updateInsurance());case 21:return S={table:"veiculo",column:"apolice",value:m,tablePK:"veiculo_id",ids:c},i&&r&&n.id&&le.a.put("/api/changeApoliceNumber",{id:n.id,newApoliceNumber:i}),y.next=25,ee.a.awrap(le.a.put("/api/updateInsurances",S).then((function(a){console.log(a.data),e.setState({dontUpdateProps:!0})})));case 25:if(!l){y.next=30;break}return S.value="Seguro n\xe3o cadastrado",S.ids=l,y.next=30,ee.a.awrap(le.a.put("/api/updateInsurances",S));case 30:s=s.map((function(e){return c.forEach((function(a){return e.veiculoId===a?(e.apolice=m,e):e})),e})),e.toast(),e.submitFiles(),e.clearFields(),e.setState({frota:s});case 35:case"end":return y.stop()}}))},e.handleFiles=function(a){var t;return ee.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return(t=new FormData).append("apoliceDoc",a[0]),r.next=4,ee.a.awrap(e.setState({dropDisplay:a[0].name,seguroFile:t}));case 4:case"end":return r.stop()}}))},e.submitFiles=function(){var a,t,r,n,o,i,l,s,c,d;return ee.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(a=e.state,t=a.apolice,r=a.selectedEmpresa,n=new FormData,!e.state.seguroFile){u.next=28;break}for(n.append("fieldName","apoliceDoc"),n.append("apolice",t),n.append("empresaId",r.delegatarioId),o=!0,i=!1,l=void 0,u.prev=9,s=e.state.seguroFile.entries()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0)d=c.value,n.append(d[0],d[1]);u.next=17;break;case 13:u.prev=13,u.t0=u.catch(9),i=!0,l=u.t0;case 17:u.prev=17,u.prev=18,o||null==s.return||s.return();case 20:if(u.prev=20,!i){u.next=23;break}throw l;case 23:return u.finish(20);case 24:return u.finish(17);case 25:return u.next=27,ee.a.awrap(le.a.post("/api/empresaUpload",n).then((function(e){return console.log(e.data)})));case 27:e.toast();case 28:case"end":return u.stop()}}),null,null,[[9,13,17,25],[18,,20,24]])},e.addNewElement=function(){return e.setState({apolice:e.state.newElement,openAddDialog:!1})},e.toggleDialog=function(){return e.setState({openAddDialog:!e.state.openAddDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.clearFields=function(){e.setState({insuranceExists:!1,seguradora:"",insurance:{},apolice:"",dataEmissao:"",vencimento:"",seguroFile:null,deletedVehicles:[],dropDisplay:"Clique ou arraste para anexar a ap\xf3lice"})},e.escFunction=function(a){27===a.keyCode&&(e.state.openAddDialog&&e.toggleDialog(),e.state.showAllPlates&&e.setState({showAllPlates:!1}))},e}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentDidMount",value:function(){this.setState({seguradoras:this.props.redux.seguradoras,allInsurances:this.props.redux.seguros}),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentDidUpdate",value:function(e,a){var t=this.props.redux.seguros,r=this.state,n=r.apolice,o=r.insuranceExists,i=r.dontUpdateProps;if(e.redux.seguros!==t&&!i&&(console.log("Props updated. DUProps state is:",i),o)){var l=t.find((function(e){return e.apolice===n}));this.setState({insuranceExists:l})}}},{key:"render",value:function(){var e=this,a=this.state,t=a.openAlertDialog,o=a.alertType,i=a.openAddDialog,l=a.showAllPlates,s=a.allPlates,c=a.allPlatesObj,d=this.props.redux.empresas,u=Pe.every((function(a){return e.state.hasOwnProperty(a.field)&&""!==e.state[a.field]}));return n.a.createElement(r.Fragment,null,n.a.createElement(Ha,{data:this.state,empresas:d,enableAddPlaca:u,handleInput:this.handleInput,handleBlur:this.handleBlur,addPlate:this.addPlate,removeFromInsurance:this.removeFromInsurance,enableChangeApolice:this.toggleDialog,handleFiles:this.handleFiles,handleSubmit:this.handleSubmit,showAllPlates:this.showAllPlates}),i&&n.a.createElement(Ja,{open:i,close:this.toggleDialog,title:"Alterar n\xfamero da ap\xf3lice",helperMessage:"Informe o n\xfamero atualizado da ap\xf3lice.",handleInput:this.handleInput,addNewElement:this.addNewElement}),l&&n.a.createElement(Ga,{items:s,close:this.showAllPlates,title:"Selecione as placas para adicionar \xe0 ap\xf3lice.",handleCheck:this.handleCheck,data:c}),t&&n.a.createElement(za,{open:t,close:this.closeAlert,alertType:o,customMessage:this.state.customMsg}),n.a.createElement(Oa,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}))}}]),a}(r.Component)),Za=[{field:"placa",label:"Placa",datalist:"placa",autoComplete:!0,collection:"frota",maxLength:8},{field:"renavam",label:"Renavam"},{field:"nChassi",label:"N\xfamero do Chassi",maxLength:17},{field:"delegatario",label:"Delegat\xe1rio",disabled:!0},{field:"utilizacao",label:"Utiliza\xe7\xe3o",disabled:!0},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",disabled:!0},{field:"marcaChassi",label:"Marca do Chassi",disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",disabled:!0},{field:"marcaCarroceria",label:"Marca da Carroceria",disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",disabled:!0},{type:"number",field:"indicadorIdade",label:"Ano",disabled:!0}],Xa=t(544),Qa=t(539),et=t(548),at=t(240),tt=t(490),rt=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1)},formHolder:{width:900},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)}}})),nt=function(e){var a=e.handleInput,t=e.handleBlur,o=e.handleCheck,i=e.handleSubmit,l=e.data,s=e.empresas,c=l.razaoSocial,d=l.frota,u=l.checked,m=l.delegaTransf,p=l.justificativa,f=rt(),g=f.paper,h=f.container,b=f.formHolder;return n.a.createElement(r.Fragment,null,n.a.createElement(da,{links:["Ve\xedculos","/veiculos"],text:"Baixa de ve\xedculo"}),n.a.createElement(qa,{data:l,empresas:s,handleInput:a,handleBlur:t}),n.a.createElement(V.a,{container:!0,direction:"row",className:h,justify:"center"},c&&d[0]&&n.a.createElement(V.a,{item:!0,xs:12},n.a.createElement(je.a,{className:g},n.a.createElement(O.a,{className:"formSubtitle"},"Informe os dados para a baixa"),n.a.createElement(Oe,{form:Za,data:l,handleBlur:t,handleInput:a})),n.a.createElement(V.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{width:"venda"===u||"outro"===u?"1200px":"600px",marginTop:"25px"}},n.a.createElement(V.a,{item:!0,xs:u?6:12},n.a.createElement(at.a,{component:"fieldset"},n.a.createElement(tt.a,{component:"legend"},"Motivo da baixa"),n.a.createElement(et.a,{"aria-label":"position",name:"position",onChange:o,row:!0,style:{width:"auto"},className:"radio"},n.a.createElement(Ie.a,{className:"radio",value:"venda",control:n.a.createElement(Qa.a,{color:"primary"}),label:n.a.createElement("span",{style:{fontSize:"0.8rem"}},"Venda para outra empresa do sistema"),labelPlacement:"start"}),n.a.createElement(Ie.a,{value:"outro",control:n.a.createElement(Qa.a,{color:"primary"}),label:n.a.createElement("span",{style:{fontSize:"0.8rem"}},"Outro"),labelPlacement:"start"})))),"venda"===u?n.a.createElement(V.a,{item:!0,xs:6},n.a.createElement(Ce.a,{inputProps:{list:"razaoSocial",name:"delegaTransf"},value:m,onChange:a,onBlur:t,label:"Informe o delegat\xe1rio para o qual foi transferido o ve\xedculo.",fullWidth:!0}),n.a.createElement(we,{collection:s,datalist:"razaoSocial",value:m})):"outro"===u&&n.a.createElement(V.a,{item:!0,xs:6},n.a.createElement(Ce.a,{name:"justificativa",value:p,label:"Justificativa",type:"text",onChange:a,InputLabelProps:{shrink:!0},multiline:!0,rows:3,variant:"outlined",fullWidth:!0}))),n.a.createElement(V.a,{container:!0,direction:"row",justify:"flex-end",style:{width:"1200px"}},n.a.createElement(V.a,{item:!0,xs:11,style:{width:"1000px"}}),n.a.createElement(V.a,{item:!0,xs:1,style:{align:"right"}},n.a.createElement(k.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"10px 0 10px 0"},onClick:function(){return i()}},"Confirmar ",n.a.createElement("span",null,"\xa0\xa0 ")," ",n.a.createElement(Xa.a,null))))),!c&&!d[0]&&n.a.createElement(V.a,{container:!0,justify:"center"},n.a.createElement("div",{className:b}))))},ot=xe(["veiculos","empresas"],function(e){function a(){var e,t;Object(ae.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=Object(re.a)(this,(e=Object(ne.a)(a)).call.apply(e,[this].concat(n)))).state={empresas:[],razaoSocial:"",frota:[],placa:"",form:{},check:"",delegaTransf:"",toastMsg:"Baixa realizada com sucesso!",confirmToast:!1,openDialog:!1},t.handleInput=function(e){var a,r,n,o,i,l,s,c;return ee.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(a=e.target,r=a.name,n=a.value,o=t.props.redux,i=o.veiculos,l=o.empresas,t.setState(Object(g.a)({},r,n)),"razaoSocial"!==r){d.next=15;break}if(!(s=l.find((function(e){return e.razaoSocial===n})))){d.next=12;break}return d.next=7,ee.a.awrap(t.setState({razaoSocial:s.razaoSocial,selectedEmpresa:s}));case 7:n!==s.razaoSocial&&t.setState({selectedEmpresa:void 0}),c=i.filter((function(e){return e.empresa===t.state.razaoSocial})),t.setState({frota:c}),d.next=15;break;case 12:return d.next=14,ee.a.awrap(t.setState({selectedEmpresa:void 0,frota:[]}));case 14:t.reset();case 15:case"end":return d.stop()}}))},t.handleBlur=function(e){var a,r,n,o,i,l,s;return ee.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(a=t.props.redux.empresas,r=t.state.frota,n=e.target.name,o=e.target.value,"delegaTransf"!==n){c.next=12;break}if(!(o.length>0)){c.next=12;break}if(!(i=a.find((function(e){return e.razaoSocial===o})))){c.next=11;break}return c.next=8,ee.a.awrap(t.setState({delegatarioId:i.delegatarioId,delegaTransf:i.razaoSocial,disableSubmit:!0}));case 8:c.next=12;break;case 11:t.setState({openAlertDialog:!0,alertType:"empresaNotFound",delegaTransf:""});case 12:if("placa"!==n||"string"===typeof r){c.next=19;break}if(""===o&&t.setState({disableSubmit:!0}),!(o.length>0)){c.next=19;break}return o.length>2&&(l=r.find((function(e){return"string"===typeof o?e.placa.toLowerCase().match(o.toLowerCase()):e.placa.match(o)}))),c.next=18,ee.a.awrap(t.setState(Object(b.a)({},l)));case 18:l||(s={},r[0]&&Object.keys(r[0]).forEach((function(e){return s[e]=""})),t.setState({alertType:"plateNotFound",openAlertDialog:!0,disableSubmit:!0}),t.setState(Object(b.a)({},s)));case 19:case"end":return c.stop()}}))},t.handleSubmit=function(){var e,a,r,n,o,i,l;return ee.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e=t.state,a=e.checked,r=e.delegatarioId,n=["selectedEmpresa","placa","delegatarioId"],"venda"===a&&(n.push("delegaTransf"),i=n.every((function(e){return t.state.hasOwnProperty(e)&&""!==t.state[e]})),o={delegatarioId:r,situacao:"pendente"}),"outro"===a&&(n.push("justificativa"),i=n.every((function(e){return t.state.hasOwnProperty(e)&&""!==t.state[e]})),o={situacao:"exclu\xeddo"}),i){s.next=8;break}return s.next=7,ee.a.awrap(t.setState({openAlertDialog:!0,alertType:"fieldsMissing"}));case 7:return s.abrupt("return",null);case 8:return o.apolice="Seguro n\xe3o cadastrado",l=ce.a.decamelizeKeys(o),"veiculo","veiculo_id",s.next=13,ee.a.awrap(le.a.put("/api/updateVehicle",{requestObject:l,table:"veiculo",tablePK:"veiculo_id",id:t.state.veiculoId}).then((function(){return t.toast()})).catch((function(e){return console.log(e)})));case 13:return s.next=15,ee.a.awrap(t.setState({selectedEmpresa:void 0,frota:[],razaoSocial:""}));case 15:t.reset();case 16:case"end":return s.stop()}}))},t.handleCheck=function(e){return t.setState({checked:e.target.value})},t.reset=function(){Za.forEach((function(e){return t.setState(Object(g.a)({},e.field,""))})),t.setState({delegaTransf:"",check:"",justificativa:"",checked:!1})},t.closeAlert=function(){return t.setState({openAlertDialog:!t.state.openAlertDialog})},t.toast=function(){return t.setState({confirmToast:!t.state.confirmToast})},t}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.delegaTransf,t=e.confirmToast,o=e.toastMsg,i=e.checked,l=e.openAlertDialog,s=e.alertType;return n.a.createElement(r.Fragment,null,n.a.createElement(nt,{data:this.state,empresas:this.props.redux.empresas,checked:i,delegaTransf:a,handleInput:this.handleInput,handleBlur:this.handleBlur,handleCheck:this.handleCheck,handleSubmit:this.handleSubmit}),l&&n.a.createElement(za,{open:l,close:this.closeAlert,alertType:s}),n.a.createElement(Oa,{open:t,close:this.toast,msg:o}))}}]),a}(r.Component)),it=t(120),lt=t.n(it),st=t(121),ct=t.n(st),dt=(t(386),Object(S.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"2px",width:"275px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},select:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginBottom:"2px",background:"#fafafa",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"}}})));function ut(e){var a=e.collections,t=e.collection,o=e.data,i=e.staticData,l=e.selectCollection,s=e.handleChange,c=e.enableEdit,d=e.removeItem,u=e.handleSubmit,m=e.openAddDialog,p=dt().textField;return n.a.createElement(r.Fragment,null,n.a.createElement(da,{links:["Ve\xedculos","/veiculos"],text:"Alterar configura\xe7\xf5es de ve\xedculos"}),n.a.createElement("center",null,n.a.createElement("h4",null,"Selecione uma das op\xe7\xf5es abaixo.")),n.a.createElement("div",{className:"selectHeader"},n.a.createElement(Ce.a,{className:p,onChange:l,value:t,select:!0,SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},a.map((function(e,a){return n.a.createElement(ye.a,{key:a,value:e},e)})))),i&&t&&n.a.createElement("div",{className:"divHeader"},n.a.createElement(k.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"10px 0 10px 0"},onClick:function(){return m()}},n.a.createElement(Ne.a,null)," Adicionar")),n.a.createElement("div",{className:"container"},o&&i&&o.map((function(e,a){return n.a.createElement("div",{className:"divCell",key:a},n.a.createElement(Ce.a,{value:e.edit?e[i.field]:e[i.field]+" ("+e.count+")",onChange:s,name:e.field,type:"text",inputProps:{autoCorrect:"off",spellCheck:!1,style:{fontSize:"0.8rem",color:!0===e.edit?"#000":"#999"}},className:p,disabled:!1===e.edit}),n.a.createElement("button",{component:"span",className:"configVehicleIcon",title:"Editar",onClick:function(){return c(a)},display:"none"},n.a.createElement(lt.a,{className:"confIcon",color:"primary"})),n.a.createElement("button",{className:"configVehicleIcon",title:"Remover",onClick:function(){return d(a)}},n.a.createElement(ct.a,{className:"confIcon",color:"secondary"})))}))),o&&n.a.createElement(V.a,{container:!0,direction:"row",justify:"flex-end"},n.a.createElement(V.a,{item:!0,xs:1,style:{align:"right",margin:"20px 95px 10px 0"}},n.a.createElement(k.a,{size:"small",color:"primary",variant:"contained",title:"Salvar",onClick:function(){return u()}},"Salvar ",n.a.createElement("span",null,"\xa0\xa0 ")," ",n.a.createElement(_a.a,null)))))}var mt=xe(["seguradoras","lookUpTable/marca_chassi","modelosChassi","lookUpTable/marca_carroceria","carrocerias","equipamentos","veiculos"],function(e){function a(){var e,t;Object(ae.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=Object(re.a)(this,(e=Object(ne.a)(a)).call.apply(e,[this].concat(n)))).state={collection:"",marca:"",options:[],openAddDialog:!1,confirmToast:!1,toastMsg:"Dados atualizados!"},t.addCounter=function(e,a,t){var r=a.name,n=a.field,o=a.label;return t.forEach((function(a){var t=e.filter((function(e){return"Equipamentos"===o&&e[r]?e[r].toLowerCase().match(a[n].toLowerCase()):e[r]===a[n]})).length;Object.assign(a,{count:t})})),t=t.sort((function(e,a){return e[n].localeCompare(a[n])}))},t.selectCollection=function(e){var a,r,n,o,i,l,s;return ee.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=e.target.value,r=t.props.redux,n=r.veiculos,o=r.marcaChassi,i=r.marcaCarroceria,l=ve.find((function(e){return e.label===a})),s=JSON.parse(JSON.stringify(t.props.redux[l.collection])),(s=t.addCounter(n,l,s)).forEach((function(e){return e.edit=!1})),t.setState({marcas:void 0,marca:""}),"modelosChassi"===l.collection&&t.setState({marcas:o}),"carrocerias"===l.collection&&t.setState({marcas:i}),c.next=9,ee.a.awrap(t.setState({collection:a,data:s,staticData:l}));case 9:case 10:case"end":return c.stop()}}))},t.enableEdit=function(e){var a,r,n,o;return ee.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return a=document.querySelectorAll(".divCell"),r=a[e].childNodes[0],n=r.querySelectorAll("input")[0],!0===(o=Object(h.a)(t.state.data))[e].edit?o[e].edit=!1:(o.forEach((function(e){return e.edit=!1})),o[e].edit=!0),i.next=5,ee.a.awrap(t.setState({data:o}));case 5:n.focus();case 6:case"end":return i.stop()}}))},t.selectMarca=function(e){var a,r=e.target.value,n=t.state.staticData.collection,o=t.props.redux,i=o.marcaChassi,l=o.marcaCarroceria;"modelosChassi"===n&&(a=i),"carrocerias"===n&&(a=l);var s=a.find((function(e){return e.marca===r})).id;t.setState({marca:r,marcaId:s})},t.handleChange=function(e){var a,r,n,o,i;return ee.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return a=e.target.value,r=t.state.staticData.field,n=t.state.data.find((function(e){return!0===e.edit})),o=t.state.data.indexOf(n),n[r]=a,(i=Object(h.a)(t.state.data))[o]=n,l.next=8,ee.a.awrap(t.setState({data:i}));case 8:case"end":return l.stop()}}))},t.handleInput=function(e){var a=e.target.value;t.setState({newElement:a})},t.addNewElement=function(){var e,a,r,n,o,i,l,s,c,d;return ee.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return e=t.state,a=e.staticData,r=e.newElement,n=e.marcaId,o=a.table,i=a.field,l=a.collection,s=t.props.redux.veiculos,c=Object(g.a)({},i,r),n&&(c.marcaId=n),c=ce.a.decamelizeKeys(c),u.next=6,ee.a.awrap(le.a.post("/api/addElement",{table:o,requestElement:c}));case 6:d=t.props.redux[l],d=t.addCounter(s,a,d),t.setState({openAddDialog:!1,data:d});case 9:case"end":return u.stop()}}))},t.removeItem=function(e){var a,r,n,o,i,l;return ee.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=Object(h.a)(t.state.data),r=t.state.staticData,n=r.collection,o=r.table,i=a[e].id,l=t.props.redux[n],!l.find((function(e){return e.id===i}))){s.next=5;break}return s.next=5,ee.a.awrap(le.a.delete("/api/delete?table=".concat(o,"&tablePK=id&id=").concat(i)).catch((function(e){return console.log(e)})));case 5:a.splice(e,1),t.setState({data:a});case 7:case"end":return s.stop()}}))},t.handleSubmit=function(){var e,a,r,n,o,i,l,s,c,d,u,m;return ee.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return e=t.props.redux,a=t.state,r=a.data,n=a.staticData,o=n.collection,i=n.field,l=n.table,s=JSON.parse(JSON.stringify(e[o])),c=[],r.forEach((function(e){if(e.hasOwnProperty("id")){e.count,e.edit;var a=Object(X.a)(e,["count","edit"]);c.push(a)}})),d=[],u={},c.forEach((function(e){s.forEach((function(a){e.id===a.id&&(Object.keys(e).forEach((function(t){e[t]!==a[t]&&(u.id||(u=Object(b.a)({},u,{id:e.id})),Object.assign(u,Object(g.a)({},t,e[t])))})),Object.keys(u).length>0&&d.push(u),u={})}))})),"id",m=ce.a.decamelize(i),c=ce.a.decamelizeKeys(d),p.next=9,ee.a.awrap(le.a.put("/api/editElements",{requestArray:c,table:l,tablePK:"id",column:m}).then((function(e){return console.log("updated.")})).catch((function(e){return console.log(e)})));case 9:c=[],d=[],u={},t.toast(),t.setState({collection:"",staticData:void 0});case 14:case"end":return p.stop()}}))},t.toggleDialog=function(){return t.setState({openAddDialog:!t.state.openAddDialog})},t.toast=function(){return t.setState({confirmToast:!t.state.confirmToast})},t}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentDidMount",value:function(){var e=[];ve.forEach((function(a){e.push(a.label)})),this.setState({options:e})}},{key:"componentDidUpdate",value:function(e){var a=this.props.redux,t=a.veiculos,r=this.state,n=r.staticData,o=r.data;if(!n||!o)return null;var i=n.collection;if(JSON.stringify(e.redux[i])!==JSON.stringify(a[i])){var l=this.addCounter(t,n,a[i]);this.setState({data:l})}}},{key:"render",value:function(){var e=this.state,a=e.options,t=e.collection,o=e.data,i=e.staticData,l=e.openAddDialog,s=e.marca,c=e.marcas,d=e.confirmToast,u=e.toastMsg;return n.a.createElement(r.Fragment,null,n.a.createElement(ut,{collections:a,collection:t,data:o,staticData:i,selectCollection:this.selectCollection,enableEdit:this.enableEdit,handleChange:this.handleChange,handleSubmit:this.handleSubmit,openAddDialog:this.toggleDialog,removeItem:this.removeItem}),l&&n.a.createElement(Ja,{open:l,close:this.toggleDialog,title:i.label,helperMessage:'Para adicionar, insira o nome no campo abaixo e clique em "Confirmar".',marca:s,marcas:c,selectMarca:this.selectMarca,handleInput:this.handleInput,addNewElement:this.addNewElement}),n.a.createElement(Oa,{open:d,close:this.toast,msg:u}))}}]),a}(r.PureComponent)),pt=t(291),ft=t(200),gt=t(292),ht=t.n(gt),bt=function(e,a){if(/\d/.test(e)){var t=new Date(e).getDate()+"/"+(new Date(e).getMonth()+1)+"/"+new Date(e).getFullYear();return a&&(t+=", "+new Date(e).getHours()+":"+(new Date(e).getMinutes()<10?"0"+new Date(e).getMinutes():new Date(e).getMinutes())+"h"),t.toString()}return e},vt=[{field:"placa",title:"Placa"},{field:"modeloCarroceria",title:"Modelo da Carroceria"},{field:"empresa",title:"Delegat\xe1rio"},{field:"seguradora",title:"Seguradora"},{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"vencimento",title:"Vencimento Seguro",render:function(e){return bt(e.vencimento)}},{field:"indicadorIdade",title:"Ano de Fabrica\xe7\xe3o",filtering:!1}],Et=[{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"seguradora",title:"Seguradora"},{field:"empresa",title:"Segurado"},{field:"segurados",title:"N\xfamero de ve\xedculos"},{field:"vencimento",title:"Vencimento",filtering:!1,render:function(e){return bt(e.vencimento)}}],xt=[[{field:"razaoSocial",title:"Raz\xe3o Social"},{field:"delegatarioStatus",title:"Situa\xe7\xe3o"},{field:"vencimentoContrato",title:"Data de Vencimento",filtering:!1,render:function(e){return bt(e.vencimentoContrato)}},{field:"cidade",title:"Munic\xedpio"},{field:"telefone",title:"Telefone"},{field:"frota",title:"Tamanho da frota"}]].concat([[{field:"nomeSocio",title:"Nome"},{field:"cpfSocio",title:"CPF"},{field:"razaoSocial",title:"Delegat\xe1rio(s)"},{field:"emailSocio",title:"E-mail"},{field:"share",title:"Participa\xe7\xe3o Societ\xe1ria (%)",filtering:!1}]]).concat([[{field:"nomeProcurador",title:"Nome"},{field:"cpfProcurador",title:"CPF"},{field:"emailProcurador",title:"E-mail"},{field:"telProcurador",title:"Telefone"}]]).concat([vt]).concat([Et]),St=function(e){var a=e.tab,t=e.collection,r=e.showDetails,o=e.showFiles,i=e.showCertificate,l=e.del,s=["delegatarioId","socioId","procuradorId","veiculoId","apolice"][a],c=["empresas","s\xf3cios","procuradores","ve\xedculos","seguros"];return Array.isArray(t)||(t=[]),n.a.createElement("div",{style:{margin:"10px 0"},className:"noPrint"},n.a.createElement(ht.a,{title:"Pesquisar dados de ".concat(c[a]),columns:xt[a],data:t,style:{fontFamily:"Segoe UI",fontSize:"14px"},options:{filtering:!0,exportButton:!0,exportFileName:c[a],exportCsv:function(e,t){!function(e,a){var t={Sheets:{data:ft.utils.json_to_sheet(e)},SheetNames:["data"]},r=ft.write(t,{bookType:"xlsx",type:"array"}),n=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});pt.saveAs(n,a+".xlsx")}(t,c[a])},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:10},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Registro n\xe3o encontrado.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},actions:[{icon:"info",iconProps:{color:"primary"},tooltip:"Mais informa\xe7\xf5es",onClick:function(e,a){return r(e,a)}},{icon:"file_copy_outline",iconProps:{color:"secondary"},tooltip:"Ver arquivos",onClick:function(e,a){return o(a[s])}},{icon:"class_outlined",iconProps:{color:"action"},tooltip:"Emitir certificado",hidden:3!==a,onClick:function(e,a){return i(a)}}],editable:{onRowDelete:function(e){return ee.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ee.a.awrap(l(e));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))}}}))},yt=[[{field:"empresa",label:"Delegat\xe1rio",width:"120mm",left:"50mm"},{type:"date",field:"vencimentoContrato",label:"Validade do Contrato",width:"36mm",left:"5mm"}]],wt=[[{field:"placa",label:"Placa",width:"25mm",left:"8mm"},{field:"renavam",label:"Renavam",width:"42mm",left:"14mm"},{field:"poltronas",label:"Poltronas",width:"16mm",left:"2mm"},{field:"piquesPoltrona",label:"Piques poltrona",width:"19mm"},{field:"nChassi",label:"N\xfamero do Chassi",width:"50mm",left:"15mm"}],[{field:"marcaChassi",label:"Marca do Chassi",width:"49mm",left:"15mm"},{field:"modeloChassi",label:"Modelo do Chassi",width:"49mm",left:"15mm"},{field:"anoChassi",label:"Ano do chassi"},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)"},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)"}],[{field:"marcaCarroceria",label:"Marca da Carroceria",width:"49mm",left:"15mm"},{field:"modeloCarroceria",label:"Modelo da Carroceria",width:"49mm",left:"15mm"},{field:"anoCarroceria",label:"Ano da carroceria"},{field:"cores",label:"Cores",width:"45mm",left:"15mm"}]],Ct=[[{field:"seguradora",label:"Seguradora",width:"75mm",left:"27.5mm"},{field:"apolice",label:"Ap\xf3lice",width:"35mm",left:"13mm"},{type:"date",field:"dataEmissao",label:"Data de Emiss\xe3o",width:"25mm",left:"5mm"},{type:"date",field:"vencimento",label:"Vencimento",width:"25mm",left:"5mm"}]],kt=[[{field:"eixos",label:"N\xba Eixos",width:"15mm",left:"2mm"},{field:"pbt",label:"Peso Bruto Total",width:"25mm",left:"5mm"},{field:"pesoDianteiro",label:"Peso Dianteiro (kg)",width:"28mm",left:"4mm"},{field:"pesoTraseiro",label:"Peso Traseiro (kg)",width:"28mm",left:"4mm"},{field:"pbt",label:"Peso Bruto Total",width:"25mm",left:"5mm"},{field:"pesoPassageiros",label:"Passag/Bagagem",width:"25mm",left:"3mm"}]],Ot=[[{type:"date",field:"dataRegistro",label:"Data de Registro",width:"35mm",left:"9mm"},{field:"dataExpedicao",label:"Data de expedi\xe7\xe3o",width:"35mm",left:"9mm"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",width:"35mm",left:"9mm"},{field:"equipamentosId",label:"Acess\xf3rios",width:"65mm"}]],jt=[[{field:"compartilhado",label:"Empresas autorizadas a compartilhar",width:"120mm",left:"20mm"},{field:"observacoes",label:"Observa\xe7\xf5es",width:"80mm"}]],Dt=(t(478),t(297)),It=t.n(Dt),At=Object(S.a)((function(e){return{textField:{paddingRight:"25px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"}}}));function Nt(){var e=Object(r.useState)({}),a=Object(y.a)(e,2),t=a[0],o=a[1],i=JSON.parse(localStorage.getItem("vehicle"));console.log("1",i),Object(r.useEffect)((function(){ee.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("2",localStorage),document.querySelectorAll(".MuiToolbar-root").forEach((function(e){return e.style.display="none"})),e.next=5,ee.a.awrap(o(i));case 5:setTimeout((function(){i&&window.print()}),500);case 6:case"end":return e.stop()}})),localStorage.removeItem("vehicle"),console.log("3",localStorage)}),[]);var l=At().textField,s=wt,c=yt,d=Ct,u=kt,m=Ot,p=jt,f={};t&&[s,c,d,u,m,p].forEach((function(e){Object.entries(t).forEach((function(a){var t=Object(y.a)(a,2),r=t[0],n=t[1];e.forEach((function(a,t){a.forEach((function(a,o){a.field===r&&(f=Object.assign(a,{value:n}),e[t][o]=f,f={})}))}))}))}));var g=[{title:"Delegat\xe1rio",form:c},{title:"Caracter\xedsticas do Ve\xedculo",form:s},{title:"Seguro",form:d},{title:"Pesagem",form:u},{title:"Informa\xe7\xf5es gerais",form:m},{title:"Outras informa\xe7\xf5es",form:p}];if(!t){var h=window.location.origin;return window.location.replace(h),null}return n.a.createElement(r.Fragment,null,n.a.createElement("div",{id:"pdfPage",className:"A4"},n.a.createElement("div",{className:"header"},n.a.createElement("img",{src:"/images/certficateHeader.png",height:"100%",width:"100%",alt:"header"})),g.map((function(e,a){var t=e.title,r=e.form;return n.a.createElement("div",{className:"Delegat\xe1rio"!==t?"box":"firstBox",key:a},"Delegat\xe1rio"!==t&&n.a.createElement("span",{className:"boxTitle"},t),r.map((function(e,a){return n.a.createElement("div",{key:a,className:"Delegat\xe1rio"!==t?"divLine":"firstDivLine",style:{marginTop:0===a&&"11mm"}},e.map((function(e,a){return n.a.createElement(Ce.a,{disabled:!0,key:a,name:e.field,label:e.label,className:l,multiline:!!("equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50),rows:e.value&&e.value.length<86?"2":e.value&&e.value.length<140?"3":"4",variant:"equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50?"outlined":"standard",value:"date"===e.type?ue()(e.value).format("DD-MM-YYYY"):"dataExpedicao"===e.field?ue()().format("DD-MM-YYYY"):e.value||"",inputProps:{className:(t=e.field,"equipamentosId"===t||"equipamentosId"===t?void 0:"certificate"),style:{width:e.width||"18mm",fontSize:"2.7mm",padding:"1px 0",margin:"0",flex:"1",color:"#000"}},InputProps:{style:{padding:"equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50?"1mm":""}},InputLabelProps:{shrink:!0,style:{fontSize:"13px",textAlign:"center !important",left:e.left||"0",color:"#000"}}});var t})))})))})),n.a.createElement("div",{className:"porteObrigatorio"},n.a.createElement("img",{src:"/images/porteObrigatorio.png",height:"100%",width:"100%",alt:"porte obrigat\xf3rio"}),n.a.createElement("br",null),"Este certificado pode ser verificado em ",n.a.createElement("span",{className:"link",onClick:function(){return function(){document.querySelectorAll(".MuiToolbar-root").forEach((function(e){return e.style.display="none"}));var e=window.location.origin;window.location.href=e}()}}," http://www.sismob.mg.gov.br "))),n.a.createElement("br",null),n.a.createElement("button",{title:"Imprimir / salvar PDF",className:"noprint printButton",onClick:function(){return window.print()}},n.a.createElement(It.a,{style:{cursor:"pointer",color:"rgb(161, 161, 180)",fontSize:"40pt"}})))}var Pt={field:"razaoSocial",label:"Empresa",width:"340px"},zt={field:"placas",label:"Ve\xedculos cadastrados",width:"340px"},Ft={field:"createdAt",label:"Data do registro no sistema",type:"date",width:"190px"},Tt=[{field:"delegatarioStatus",label:"Status"},{field:"vencimentoContrato",label:"Vencimento do Contrato",type:"date"},Object(b.a)({},Ft),{field:"frota",label:"Tamanho da Frota"},{field:"oldId",label:"C\xf3digo no sistema antigo"},Object(b.a)({},zt)],Lt=[Object(b.a)({},Pt),Object(b.a)({},Ft)],qt=[Object(b.a)({},Pt),Object(b.a)({},Ft),Object(b.a)({},zt),{field:"segurados",label:"N\xfamero de ve\xedculos segurados"}],Mt=[{field:"razaoSocial",label:"Raz\xe3o Social",width:"340px"},{field:"cnpj",label:"CNPJ",maxLength:18,pattern:/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/},{field:"inscricaoEstadual",label:"Inscri\xe7\xe3o Estadual",maxLength:13,pattern:"\\d{13}"},{field:"telefone",label:"Telefone",maxLength:20,pattern:"((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))"},{field:"email",label:"E-mail",type:"email",maxLength:60},{field:"cep",label:"CEP",maxLength:10},{field:"numero",label:"N\xfamero",type:"number",max:32e3},{field:"complemento",label:"Complemento",maxLength:20},{field:"rua",label:"Rua",maxLength:100},{field:"bairro",label:"Bairro",maxLength:40},{field:"cidade",label:"Cidade",maxLength:60},{field:"uf",label:"Estado",maxLength:2,pattern:"[A-Z]{2}"}],Bt=[{field:"nomeSocio",label:"Nome do S\xf3cio",maxLength:90,width:190},{field:"cpfSocio",label:"CPF",maxLength:11,pattern:"\\d{11}",width:190},{field:"telSocio",label:"Telefone",maxLength:16,pattern:"((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))",width:190},{field:"emailSocio",label:"E-mail",maxLength:60,width:190},{field:"share",label:"Participa\xe7\xe3o Societ\xe1ria (%)",maxLength:5,type:"number",max:100,width:190}],Vt=[{field:"nomeProcurador",label:"Nome do Procurador",maxLength:90,width:320},{field:"cpfProcurador",label:"CPF",maxLength:11,pattern:"\\d{11}"},{field:"telProcurador",label:"Telefone",type:"tel",maxLength:20,pattern:"((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))"},{field:"emailProcurador",label:"E-mail",type:"email",maxLength:60,pattern:"[a-zA-Z0-9]@([a-zA-Z0-9])?[.]([a-zA-Z0-9])",width:320}];function Rt(e){var a,t=e.data,r=e.tab,o=e.title,i=e.header,l=e.close,s=(t.tableData,Object(X.a)(t,["tableData"]));switch(r){case 0:a=Mt.concat(Tt);break;case 1:a=Bt.concat(Lt);break;case 2:a=Vt;break;case 3:t.veiculoId,t.laudoId,t.tableData,t.modeloChassiId,t.modeloCarroceriaId,t.delegatarioId;var c=Object(X.a)(t,["veiculoId","laudoId","tableData","modeloChassiId","modeloCarroceriaId","delegatarioId"]);c.dataRegistro=ue()(t.dataRegistro).format("DD/MM/YYYY"),c.dataEmissao=ue()(t.dataEmissao).format("DD/MM/YYYY"),c.vencimento=ue()(t.vencimento).format("DD/MM/YYYY"),s=c,a=ze;break;case 4:a=Pe.concat(qt)}var d=[];return Object.keys(s).forEach((function(e){3===r?a.forEach((function(a){a.forEach((function(a){var t=a.field,r=a.label,n=a.type;if(e===t){var o={};Object.assign(o,{field:t,label:r,value:s[e]}),n&&Object.assign(o,{type:n}),d.push(o),o={}}}))})):a.forEach((function(a){var t=a.field,r=a.label,n=a.type,o=a.width;a.fullWidth;if(e===t){var i={};Object.assign(i,{field:t,label:r,value:s[e]}),n&&Object.assign(i,{type:n}),o&&Object.assign(i,{width:o}),d.push(i),i={}}}))})),Object.keys(s).forEach((function(e){d.find((function(a){return a.field===e}))||3!==r||d.push({field:e,label:e,value:s[e]})})),n.a.createElement("div",{className:"popUpWindow",style:{left:"20%",right:"20%"}},n.a.createElement("h4",{className:"equipaHeader"},o," ",t[i])," ",n.a.createElement("hr",null),n.a.createElement("div",{className:"checkListContainer",style:{justifyContent:"flex-start"}},d.map((function(e,a){var t=e.field,r=e.label,o=e.value,i=e.type,l=e.width;return n.a.createElement("div",{className:"showDetailsItem",style:{width:l||150},key:a},n.a.createElement(Ce.a,{name:t,label:r,value:"date"===i?ue()(o).format("DD/MM/YYYY"):o||"",InputLabelProps:{shrink:!0,style:{fontSize:"0.9rem",fontWeight:500}},inputProps:{style:{fontSize:"0.7rem",width:l||150,fontColor:"#bbb",textAlign:"center"}},variant:"outlined"}))}))),n.a.createElement(Fe,{close:l}))}var Ut=function(e){return e>1024&&e<1048576?Math.round(e/1024)+" KB":e>=1048576&&e<1073741824?(e/1024/1024).toFixed(2)+" MB":e+" bytes"},Wt=function(e,a,t,r){r&&"apoliceDoc"===r&&(t="empresaDocs"),le()({url:"/api/mongoDownload/?collection=".concat(t,"&id=").concat(e),method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=t,r.setAttribute("download",a),document.body.appendChild(r),r.click()})).catch((function(e){console.log(e)}))},_t=[{title:"Contrato Social",name:"contratoSocial"},{title:"Procura\xe7\xe3o",name:"procuracao"},{title:"Ap\xf3lice",name:"apoliceDoc"}],Yt={marginBottom:0,display:"grid",grid:"50px / 4% 40% 25% 25%",width:"99%",margin:"auto",padding:"10px 0 0 0",justifyItems:"auto"},Kt=function(e){var a=e.filesCollection,t=e.close,r=(e.format,e.typeId),o=e.empresas,i=[],l="empresaDocs",s=Object(h.a)(_t);switch(r){case"veiculoId":l="vehicleDocs",(s=Object(h.a)(_e)).find((function(e){return"transferenciaDoc"===e.name}))||s.push({title:"Documento de Transfer\xeancia",name:"transferenciaDoc"}),s.find((function(e){return"newPlateDoc"===e.name}))||s.push({title:"CRLV com nova placa",name:"newPlateDoc"}),s.find((function(e){return"apoliceDoc"===e.name}))||s.push({title:"Ap\xf3lice de seguro",name:"apoliceDoc"})}console.log("ShowFilesComp, filesCollection",a),a&&a[0]&&a.forEach((function(e){s.forEach((function(a){e.metadata&&a.name===e.metadata.fieldName&&i.push(Object(b.a)({},e,{label:a.title}))}))}));return i[0]?n.a.createElement("div",{className:"popUpWindow"},n.a.createElement("h5",null,n.a.createElement("img",{alt:"",src:"/images/folderIcon2.jpg",style:{paddingLeft:"20px",marginRight:"20px"}})," Arquivos"),n.a.createElement("hr",{style:{marginBottom:"5px"}}),n.a.createElement("div",{style:Yt},n.a.createElement("div",null,n.a.createElement("img",{alt:"",src:"/images/multipleFiles2.png",height:"50%"})),["Arquivo","Data de Upload","Tamanho"].map((function(e,a){return n.a.createElement("div",{key:a},n.a.createElement("span",{style:{fontSize:"1.2em",fontWeight:500}},e))}))),n.a.createElement("hr",{style:{margin:"0 0 20px 0"}}),i.map((function(e,a){return n.a.createElement("div",{key:a},n.a.createElement("div",{style:Yt},n.a.createElement("div",{className:"col s1"},n.a.createElement("img",{alt:"",src:"/images/genericFile.png"})),n.a.createElement("div",{className:"col s11"},n.a.createElement("span",{style:{textDecoration:"underline",cursor:"pointer",color:"blue"},onClick:function(){return Wt(e.id,e.filename,l,e.metadata.fieldName)}},e.label+function(e){var a=e.metadata;switch(a.fieldName){case"procuracao":return" - "+o.find((function(e){return e.delegatarioId===Number(a.empresaId)})).razaoSocial;case"apoliceDoc":return a.apolice?" n\xfamero "+a.apolice:" ";default:return""}}(e))),n.a.createElement("div",{className:"col s3"},bt(e.uploadDate,!0)),n.a.createElement("div",{className:"col s3"},Ut(e.length))))})),n.a.createElement(Fe,{close:t})):null},Ht={top:"5%",left:"10%",right:"10%"},Gt=function(e){function a(){var e;return Object(ae.a)(this,a),(e=Object(re.a)(this,Object(ne.a)(a).call(this))).state={tab:0,items:["Empresas","S\xf3cios","Procuradores","Ve\xedculos","Seguros"],tablePKs:["delegatario_id","socio_id","procurador_id","veiculo_id","id"],dbTables:["delegatario","socios","procurador","veiculo","seguro"],options:["empresas","socios","procuradores","veiculos","seguros"],detailsTitle:["Empresa","S\xf3cio","Procurador","Placa","Ap\xf3lice"],detailsHeader:["razaoSocial","nomeSocio","nomeProcurador","placa","apolice"],empresas:[],seguros:[],razaoSocial:"",showDetails:!1,showFiles:!1,openDialog:!1,filesCollection:[],elementDetails:"",vehicleDocs:[],showCertificate:!1},e.changeTab=function(a,t){return ee.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ee.a.awrap(e.setState({tab:t}));case 2:return a.abrupt("return");case 3:case"end":return a.stop()}}))},e.showDetails=function(a,t){var r,n,o,i,l,s,c;return ee.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.props.redux,n=e.state,o=n.options,i=n.tab,l=n.tablePKs,s=l.map((function(e){return ce.a.camelize(e)})),t&&(c=r[o[i]].find((function(e){return e[s[i]]===t[s[i]]}))),void 0===t||!c){a.next=8;break}return a.next=5,ee.a.awrap(e.setState({showDetails:!e.state.showDetails,elementDetails:c}));case 5:a.next=9;break;case 8:e.setState({showDetails:!e.state.showDetails,elementDetails:void 0});case 9:case"end":return a.stop()}}))},e.closeFiles=function(){e.setState({showFiles:!e.state.showFiles})},e.showFiles=function(a){var t=e.state.tab,r=e.props.redux,n=r.veiculos,o=r.socios,i=r.empresaDocs,l=r.vehicleDocs,s=i.filter((function(e){return e.metadata.empresaId===a.toString()})),c="empresaId";switch(t){case 1:s=i.filter((function(e){return e.metadata.empresaId===a.toString()}));var d=o.find((function(e){return e.socioId===a}));if(d){var u=[];s=i.filter((function(e){return e.metadata.empresaId===d.delegatarioId.toString()})).forEach((function(e){e.metadata.socios&&e.metadata.socios.includes(a)&&u.push(e)})),s=u}break;case 2:c="procuracaoId";var m=[];i.forEach((function(e){"procuracao"===e.metadata.fieldName&&e.metadata.procuradores.forEach((function(t){t===a&&m.push(e)}))})),s=m;break;case 3:c="veiculoId",s=l.filter((function(e){return e.metadata.veiculoId===a.toString()}));var p=n.find((function(e){return e.veiculoId===a}));if(p){var f=i.find((function(e){return e.metadata.apolice===p.apolice.toString()}));f&&s.push(f)}break;case 4:s=i.filter((function(e){return e.metadata.apolice===a.toString()}))}s[0]?e.setState({filesCollection:s,showFiles:!0,typeId:c,selectedElement:a}):(e.setState({alertType:"filesNotFound",openAlertDialog:!0}),e.setState({filesCollection:[]}))},e.deleteHandler=function(a){var t=e.state,r=t.dbTables,n=t.tablePKs,o=t.tab,i=r[o],l=n[o],s=ce.a.camelize(l);le.a.delete("/api/delete?table=".concat(i,"&tablePK=").concat(l,"&id=").concat(a[s])).then((function(e){return console.log(e.data)}))},e.showCertificate=function(a){var t,r,n,o,i,l;return ee.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=a.situacao,r=a.vencimento,n=a.vencimentoContrato,o=ue()(r).isBefore(),i=ue()(n).isBefore(),"Ativo"===t){s.next=5;break}return s.next=4,ee.a.awrap(e.setState({alertType:"veiculoPendente",openAlertDialog:!0}));case 4:return s.abrupt("return");case 5:if(!o){s.next=9;break}return s.next=8,ee.a.awrap(e.setState({alertType:"seguroVencido",openAlertDialog:!0}));case 8:return s.abrupt("return");case 9:if(!i){s.next=13;break}return s.next=12,ee.a.awrap(e.setState({alertType:"contratoVencido",openAlertDialog:!0}));case 12:return s.abrupt("return");case 13:l=window.location.origin+"/crv",localStorage.setItem("vehicle",JSON.stringify(a)),window.open(l,"noopener");case 16:case"end":return s.stop()}}))},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.closeCertificate=function(){return e.setState({showCertificate:!e.state.showCertificate})},e.escFunction=function(a){27===a.keyCode&&(e.state.showDetails&&e.showDetails(),e.state.showFiles&&e.closeFiles(),e.state.showCertificate&&e.closeCertificate())},e}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentDidMount",value:function(){return ee.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:document.addEventListener("keydown",this.escFunction,!1);case 1:case"end":return e.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e,a=this.state,t=a.tab,o=a.options,i=a.items,l=a.showDetails,s=a.elementDetails,c=a.showFiles,d=a.selectedElement,u=a.filesCollection,m=a.openAlertDialog,p=a.alertType,f=a.typeId,g=a.tablePKs,h=a.showCertificate,b=a.certified,v=a.detailsTitle,E=a.detailsHeader,x=this.props.redux,S=x.empresas,y=g.map((function(e){return ce.a.camelize(e)}));return s&&l&&(e=x[o[t]].find((function(e){return e[y[t]]===s[y[t]]}))),n.a.createElement(r.Fragment,null,n.a.createElement(M,{items:i,tab:t,changeTab:this.changeTab}),n.a.createElement(St,{tab:t,items:i,collection:this.props.redux[o[t]],showDetails:this.showDetails,showFiles:this.showFiles,del:this.deleteHandler,showCertificate:this.showCertificate}),l&&n.a.createElement(Rt,{close:this.showDetails,data:e||s,tab:t,title:v[t],header:E[t]}),h&&n.a.createElement(Nt,{vehicle:b}),c&&n.a.createElement(Kt,{tab:t,elementId:d,filesCollection:u,close:this.closeFiles,format:Ht,typeId:f,empresas:S}),m&&n.a.createElement(za,{open:m,close:this.closeAlert,alertType:p}))}}]),a}(r.Component),Jt=Object(c.c)(null,{updateCollection:ge})(xe(["veiculos","empresas","socios","procuradores","seguros","seguradoras","getFiles/vehicleDocs","getFiles/empresaDocs"],Gt)),$t=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1),height:"auto"},title:{color:"#000",fontWeight:500,textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300,fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},dropBox:{margin:"2% 0"},dropBoxItem:{margin:"12px 0",border:"1px solid #ccc",borderRadius:"3%",height:"50px",padding:"17px",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#4169E1",backgroundColor:"#fafafa"},dropBoxItem2:{margin:"12px 0",border:"1px solid #ccc",borderRadius:"3%",height:"50px",padding:"0 1% 0 1%",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#00000",backgroundColor:"#fafafa"}}})),Zt=function(e){var a=e.handleInput,t=e.handleBlur,r=e.data,o=e.handleFiles,i=r.activeStep,l=r.stepTitles,s=r.dropDisplay,c=$t(),d=c.paper,u=c.container,m=c.title,p=c.dropBox,f=c.dropBoxItem,g=c.dropBoxItem2,h=Mt;return n.a.createElement(V.a,{container:!0,direction:"row",className:u,justify:"center"},n.a.createElement(V.a,null,n.a.createElement(V.a,{item:!0,xs:12},n.a.createElement(je.a,{className:d},n.a.createElement(O.a,{className:m}," ",l[i]),n.a.createElement(Oe,{form:h,data:r,handleBlur:t,handleInput:a}),n.a.createElement(Me.a,{onDrop:o},(function(e){var a=e.getRootProps,t=e.getInputProps;return n.a.createElement(V.a,Object.assign({container:!0,justify:"center",alignItems:"center",className:p,direction:"row"},a()),n.a.createElement("input",t()),s.match("Clique ou")?n.a.createElement(V.a,{item:!0,xs:6,className:f}," ",s," "):n.a.createElement(V.a,{item:!0,xs:6,className:g}," ",n.a.createElement(Ue.a,null),"  ",s," ",n.a.createElement("br",null)," (clique ou arraste outro arquivo para alterar)"))}))))))},Xt=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1)},title:{color:"#000",fontWeight:500,textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#bbb",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"},addButton:{marginBottom:"1%",padding:"1% 0"}}})),Qt=function(e){var a=e.handleInput,t=e.handleBlur,o=e.data,i=e.addSocio,l=e.removeSocio,s=(e.handleFiles,e.enableEdit),c=e.handleEdit,d=o.activeStep,u=o.stepTitles,m=o.socios,p=Xt(),f=p.paper,g=p.container,h=p.title,b=p.iconButton,v=p.list,E=p.addButton,x=function(e){var a=o[e.field];return e.pattern&&a?null===a.match(e.pattern):a>e.max||a<e.min},S=function(e){var a=o[e.field];return a>e.max||a<e.min?"Valor inv\xe1lido":a&&null===a.match(e.pattern)?"\u2718":e.pattern&&a&&null!==a.match(e.pattern)?"\u2713":void 0};return n.a.createElement(V.a,{container:!0,direction:"row",className:g,justify:"center"},n.a.createElement(V.a,null,n.a.createElement(V.a,{item:!0,xs:12},n.a.createElement(je.a,{className:f},n.a.createElement(O.a,{className:h}," ",u[d]),Bt.map((function(e,i){return n.a.createElement(r.Fragment,{key:i},n.a.createElement(Ce.a,{name:e.field,label:e.label,margin:"normal",className:p.textField,onChange:a,onBlur:t,type:e.type||"",error:x(e),helperText:S(e),select:e.select||!1,value:o[e.field]||"",disabled:e.disabled||!1,InputLabelProps:{className:p.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.75rem",fontWeight:400,color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:e.disabled&&o.disable?"#fff":"#fafafa",height:"7px"},value:"".concat(o[e.field]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1},!0===e.select&&e.options.map((function(e,a){return n.a.createElement(ye.a,{key:a,value:e},e)}))))})),n.a.createElement(k.a,{color:"primary",className:E,onClick:i},n.a.createElement(Ne.a,null)," Adicionar s\xf3cio"))),m.length>0&&n.a.createElement(V.a,{container:!0,direction:"row",className:g,justify:"center",alignItems:"center"},n.a.createElement(V.a,{item:!0,xs:12},n.a.createElement(je.a,{className:f},n.a.createElement("p",{className:h},1===d?"S\xf3cios":"Procuradores"," cadastrados"),m.map((function(e,a){return n.a.createElement(V.a,{key:a},Bt.map((function(a,t){return n.a.createElement(r.Fragment,{key:t+1e3},n.a.createElement(Ce.a,{value:e[a.field]||"",name:a.field,label:a.label,className:v,disabled:"cpfSocio"===a.field||!e.edit,onChange:c,InputLabelProps:{shrink:!0,style:{fontWeight:600}}}))})),n.a.createElement(k.a,{component:"span",className:b,title:"editar",onClick:function(){return s(a)}},n.a.createElement(lt.a,null)),n.a.createElement(k.a,{className:b,color:"secondary",title:"Remover",onClick:function(){return l(a)}},n.a.createElement(ct.a,null)))})))))))},er=Object(S.a)((function(e){return{paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 5px 0",height:"auto"}}}));function ar(e){var a,t=e.data,o=e.empresasForm,i=e.sociosForm,l=e.filesForm,s=e.files,c=t.socios,d=er().paper,u=[],m={},p=[];return o.forEach((function(e){t.hasOwnProperty([e.field])&&(Object.assign(m,Object(g.a)({},e.field,t[e.field])),p.push(e))})),u.push(m),a=[{subtitle:"Detalhes da empresa",form:p,data:u},{subtitle:"Informa\xe7\xf5es sobre os s\xf3cios",form:i,data:c}],n.a.createElement(n.a.Fragment,null,n.a.createElement(je.a,{className:d},n.a.createElement("div",{className:"divTable"},a.map((function(e,a){var t=e.subtitle,o=e.form,i=e.data;return n.a.createElement(r.Fragment,{key:a},n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"tHeader",colSpan:o.length},t)),n.a.createElement("tr",null,o.map((function(e,a){return n.a.createElement("th",{key:a},e.label)})))),n.a.createElement("tbody",null,0===a&&n.a.createElement("tr",null,i.map((function(e,a){return Object.values(e).map((function(e,a){return n.a.createElement("td",{className:"review",key:a},e)}))}))),0!==a&&i.map((function(e,a){return n.a.createElement("tr",null,Object.values(e).map((function(e,a){return n.a.createElement("td",{className:"review",key:a},e)})))})))))}))),n.a.createElement("h3",{style:{margin:"30px 0 0 25px"}}," ",n.a.createElement(na.a,{style:{verticalAlign:"middle",padding:"0 0 0 8px"}})," Documentos "),s&&n.a.createElement(ta,{form:l,files:s})))}var tr=xe(["empresas"],function(e){function a(){var e;return Object(ae.a)(this,a),(e=Object(re.a)(this,Object(ne.a)(a).call(this))).state={activeStep:0,stepTitles:["Preencha os dados da empresa","Informa\xe7\xf5es sobre os s\xf3cios","Revis\xe3o"],steps:["Dados da Empresa","S\xf3cios","Revis\xe3o"],razaoSocial:"",toastMsg:"Empresa cadastrada!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,addedSocios:[0],totalShare:0,socios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",showFiles:!1},e.setActiveStep=function(a){var t,r;return ee.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.state.activeStep,"next"===a&&e.setState({activeStep:t+1}),"back"===a&&e.setState({activeStep:t-1}),"reset"===a&&e.setState({activeStep:0}),!(r=e.state.errors)||!r[0]){n.next=9;break}return n.next=8,ee.a.awrap(e.setState(Object(b.a)({},e.state,{},Se("setState"))));case 8:return n.abrupt("return");case 9:case"end":return n.stop()}}))},e.handleInput=function(a){var t,r,n;return ee.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:t=a.target,r=t.name,n=t.value,e.setState(Object(g.a)({},r,n));case 2:case"end":return o.stop()}}))},e.addSocio=function(){var a,t,r,n;return ee.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=e.state.socios,t={},r=0,n=0,Bt.forEach((function(a){""!==e.state[a.field]&&void 0!==e.state[a.field]||(r+=1)})),100!==r){o.next=7;break}return e.setState({alertType:"fieldsMissing",openAlertDialog:!0}),o.abrupt("return",null);case 7:if(Bt.forEach((function(a){Object.assign(t,Object(g.a)({},a.field,e.state[a.field]))})),a.push(t),a.forEach((function(e){n+=Number(e.share)})),!(n>100)){o.next=15;break}a.pop(),e.setState({alertType:"overShared",openAlertDialog:!0}),o.next=19;break;case 15:return o.next=17,ee.a.awrap(e.setState({socios:a,totalShare:n}));case 17:Bt.forEach((function(a){e.setState(Object(g.a)({},a.field,""))})),document.getElementsByName("nomeSocio")[0].focus();case 19:case"end":return o.stop()}}))},e.enableEdit=function(a){var t=e.state.socios;!0===t[a].edit?t[a].edit=!1:(t.forEach((function(e){return e.edit=!1})),t[a].edit=!0),e.setState({socios:t})},e.handleEdit=function(a){var t=a.target.name,r=e.state.socios,n=a.target.value;"share"===t&&(n=n.replace(",","."));var o=r.filter((function(e){return!0===e.edit}))[0],i=r.indexOf(o);o[t]=n;var l=r;l[i]=o,e.setState({filteredSocios:l})},e.removeSocio=function(a){var t=e.state.socios;t.splice(a,1),e.setState({socios:t})},e.getId=function(a,t,r,n,o,i,l){var s,c,d,u,m,p;return ee.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:if(c=r.filter((function(e){return e[o].toLowerCase().match(t.toLowerCase())})),""===t&&e.setState((s={},Object(g.a)(s,a,""),Object(g.a)(s,n,""),s)),!c[0]){f.next=10;break}if(d=c[0][o],u=c[0][i],""===t){f.next=8;break}return f.next=8,ee.a.awrap(e.setState((m={},Object(g.a)(m,a,d),Object(g.a)(m,n,u),m)));case 8:f.next=14;break;case 10:return f.next=12,ee.a.awrap(e.setState((p={},Object(g.a)(p,a,""),Object(g.a)(p,n,""),p)));case 12:alert(l+" n\xe3o cadastrado"),document.getElementsByName(a)[0].focus();case 14:case"end":return f.stop()}}))},e.handleBlur=function(a){var t,r,n,o,i,l,s;return ee.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:t=e.props.redux.empresas,r=a.target.name,n=a.target.value,(o=Se())?e.setState({errors:o}):e.setState({errors:void 0}),c.t0=r,c.next="cnpj"===c.t0?8:"share"===c.t0?11:"numero"===c.t0?14:19;break;case 8:return(i=t.filter((function(e){return e.cnpj===n})))[0]&&(e.setState({cnpj:""}),e.setState({alertType:i[0],openAlertDialog:!0})),c.abrupt("break",20);case 11:return(n=n.replace(",","."))>100?e.setState({alertType:"overShared",openAlertDialog:!0}):(s=Number(e.state.totalShare)+Number(n),e.setState((l={},Object(g.a)(l,r,n),Object(g.a)(l,"totalShare",s),l))),c.abrupt("break",20);case 14:if(!n||n.match(/^\d+$/)){c.next=18;break}return c.next=17,ee.a.awrap(e.setState({numero:""}));case 17:e.setState({alertType:"numberNotValid",openAlertDialog:!0});case 18:case 19:return c.abrupt("break",20);case 20:case"end":return c.stop()}}))},e.handleFiles=function(a){var t=new FormData;t.append("contratoSocial",a[0]),e.setState({dropDisplay:a[0].name,contratoSocial:t})},e.handleSubmit=function(){var a,t,r,n,o,i,l,s,c,d,u,m;return ee.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return a=e.state,t=a.socios,r=a.contratoSocial,n={},o=new FormData,Mt.forEach((function(a){e.state.hasOwnProperty([a.field])&&Object.assign(n,Object(g.a)({},a.field,e.state[a.field]))})),n.delegatarioStatus="Ativo",Object.entries(n).forEach((function(e){var a=Object(y.a)(e,2),t=a[0],r=a[1];r&&""!==r||delete n[t]})),t.forEach((function(e){delete e.edit,Object.entries(e).forEach((function(e){var a=Object(y.a)(e,2),r=a[0],n=a[1];n&&""!==n||delete t[r]}))})),n=ce.a.decamelizeKeys(n),t=ce.a.decamelizeKeys(t),p.next=9,ee.a.awrap(le.a.post("/api/empresaFullCad",{empresa:n,socios:t}).then((function(e){i=e.data})));case 9:if(!r){p.next=33;break}for(o.append("fieldName","contratoSocial"),o.append("empresaId",i),l=!0,s=!1,c=void 0,p.prev=15,d=r.entries()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0)m=u.value,o.append(m[0],m[1]);p.next=23;break;case 19:p.prev=19,p.t0=p.catch(15),s=!0,c=p.t0;case 23:p.prev=23,p.prev=24,l||null==d.return||d.return();case 26:if(p.prev=26,!s){p.next=29;break}throw c;case 29:return p.finish(26);case 30:return p.finish(23);case 31:return p.next=33,ee.a.awrap(le.a.post("/api/empresaUpload",o).then((function(e){return console.log("file ok.")})));case 33:e.toast(),e.resetState();case 35:case"end":return p.stop()}}),null,null,[[15,19,23,31],[24,,26,30]])},e.resetState=function(){var a={},t={},r={};Mt.forEach((function(t){Object.keys(t).forEach((function(r){"field"===r&&e.state[t[r]]&&Object.assign(a,Object(g.a)({},t[r],void 0))}))})),Bt.forEach((function(a){Object.keys(a).forEach((function(r){"field"===r&&e.state[a[r]]&&Object.assign(t,Object(g.a)({},a[r],void 0))}))})),_t.forEach((function(e){var a=e.name;Object.assign(r,Object(g.a)({},a,void 0))})),e.setState(Object(b.a)({},a,{},t,{},r,{activeStep:0,razaoSocial:"",files:[],fileNames:[],addedSocios:[0],totalShare:0,socios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",showFiles:!1}))},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.showFiles=function(){return e.setState({showFiles:!0})},e.closeFiles=function(){return e.setState({showFiles:!e.state.showFiles})},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.handleEquipa()},e}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.activeStep,t=e.confirmToast,o=e.toastMsg,i=e.steps,l=e.openAlertDialog,s=e.alertType,c=e.contratoSocial;return n.a.createElement(r.Fragment,null,n.a.createElement(da,{links:["Empresas","/empresas"],text:"Cadastro de empresas"}),n.a.createElement(ba,{activeStep:a,steps:i,setActiveStep:this.setActiveStep}),0===a?n.a.createElement(Zt,{data:this.state,handleInput:this.handleInput,handleBlur:this.handleBlur,handleFiles:this.handleFiles}):1===a?n.a.createElement(Qt,{data:this.state,handleInput:this.handleInput,handleBlur:this.handleBlur,addSocio:this.addSocio,removeSocio:this.removeSocio,handleFiles:this.handleFiles,enableEdit:this.enableEdit,handleEdit:this.handleEdit}):2===a&&n.a.createElement(ar,{files:c,filesForm:_t,data:this.state,sociosForm:Bt,empresasForm:Mt}),n.a.createElement(ma,{activeStep:a,lastStep:i.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep}),n.a.createElement(Oa,{open:t,close:this.toast,msg:o}),l&&n.a.createElement(za,{open:l,close:this.closeAlert,alertType:s,customMessage:this.state.customMsg}))}}]),a}(r.Component)),rr=Object(S.a)((function(e){return{toolbar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbarTitle:{flex:1},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto"},toolbarLink:{padding:e.spacing(1),flexShrink:0},mainFeaturedPost:{position:"relative",backgroundColor:e.palette.grey[100],color:e.palette.common.white,marginBottom:e.spacing(4),backgroundImage:"/images/empresaBg2.jpg",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},overlay:{position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"rgba(0,0,0,.1)"},mainFeaturedPostContent:Object(g.a)({position:"relative",padding:e.spacing(3)},e.breakpoints.up("md"),{padding:e.spacing(6),paddingRight:0}),mainGrid:{marginTop:e.spacing(3)},card:{display:"flex"},cardDetails:{flex:1},cardMedia:{width:"120px",height:"180px"},markdown:Object(b.a)({},e.typography.body2,{padding:e.spacing(3,0)}),sidebarAboutBox:{padding:e.spacing(2),backgroundColor:e.palette.grey[200]},sidebarSection:{marginTop:e.spacing(3)},footer:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(6,0)}}})),nr=[{title:"Cadastrar",date:"07/Nov",description:"Cadastrar uma nova empresa no sistema.",imageUrl:"/images/addCompany21.png",link:"/empresas/cadastro"},{title:"S\xf3cios",date:"07/Nov",description:"Gerenciar s\xf3cios e altera\xe7\xf5es de contrato social",link:"/empresas/socios",imageUrl:"/images/socios3.png"},{title:"Procuradores",date:"07/Nov",description:"Alterar rela\xe7\xe3o de procuradores e procura\xe7\xf5es",link:"/empresas/procuradores",imageUrl:"/images/procuradores31.png"}],or=function(){var e=rr();return n.a.createElement(n.a.Fragment,null,n.a.createElement(w.a,null),n.a.createElement("div",{style:{minHeight:"83vh",height:"auto"}},n.a.createElement("main",null,n.a.createElement(je.a,{className:e.mainFeaturedPost},n.a.createElement("div",{style:{height:"90px",width:"100%"}},n.a.createElement("img",{src:"/images/empresasBg2.jpg",alt:"Empresas",width:"100%",height:"280px"})),n.a.createElement("div",{className:e.overlay}),n.a.createElement(V.a,{container:!0},n.a.createElement(V.a,{item:!0,md:4},n.a.createElement("div",{className:e.mainFeaturedPostContent},n.a.createElement(O.a,{component:"h1",variant:"h4",gutterBottom:!0},"Empresas"),n.a.createElement(O.a,{variant:"body1",paragraph:!0},"Selecione uma das op\xe7\xf5es abaixo."))))),n.a.createElement(V.a,{container:!0,spacing:4,className:e.cardGrid},nr.map((function(a){return n.a.createElement(V.a,{item:!0,key:a.title,xs:12,md:4},n.a.createElement(l.b,{to:a.link,style:{textDecoration:"none"}},n.a.createElement(W.a,{component:"span"},n.a.createElement(R.a,{className:e.card},n.a.createElement("div",{className:e.cardDetails},n.a.createElement(U.a,null,n.a.createElement(O.a,{component:"h2",variant:"h6"},a.title),n.a.createElement("br",null),n.a.createElement(O.a,{variant:"body2",paragraph:!0},a.description),n.a.createElement(O.a,{variant:"body2",color:"primary"},a.title))),n.a.createElement(Y.a,{xsDown:!0},n.a.createElement(_.a,{className:e.cardMedia,component:"img",src:a.imageUrl,title:a.title}))))))}))))))},ir=t(298),lr=t.n(ir),sr=t(299),cr=t.n(sr),dr=t(300),ur=t.n(dr),mr=t(6),pr=t(270),fr=t(250),gr=t(248),hr=t(267),br=t(251),vr=Object(mr.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000",fontWeight:600,fontSize:14},body:{fontSize:14}}}))(gr.a),Er=Object(mr.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000"},body:{fontSize:13}}}))(gr.a),xr=Object(mr.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}}))(br.a),Sr=Object(S.a)((function(e){return{root:{flexGrow:"1",padding:"1%",textAlign:"center"},title:{marginTop:"2%",fontColor:"#000",fontSize:"0.9rem",backgroundColor:"#B2DCEA",textAlign:"center"},input:{textAlign:"center"},paper:{color:e.palette.text.secondary,margin:e.spacing(2),width:"100%",padding:"2% 0 1% 0",height:"auto"},table:{marginBottom:e.spacing(2),overflowX:"auto"}}}));function yr(e){var a=e.procuracao,t=e.procuradores,r=Sr(),o=r.title,i=r.table,l=[];return a.procuradores.forEach((function(e){var a=t.find((function(a){return a.procuradorId===e}));l.push(a)})),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{width:"100%",align:"left"}},n.a.createElement(O.a,{className:o}," Procuradores cadastrados ")),n.a.createElement(pr.a,{className:i},n.a.createElement(hr.a,null,n.a.createElement(xr,null,Vt.map((function(e,a){return n.a.createElement(vr,{key:a},e.label)})))),l.map((function(e,a){return e?n.a.createElement(fr.a,{key:a},n.a.createElement(br.a,null,Vt.map((function(a,t){return n.a.createElement(Er,{key:t},e[a.field])})))):null}))))}var wr={display:"flex",justifyContent:"center",width:"100%",alignContent:"center",flexWrap:"wrap",position:"relative"},Cr={textAlign:"center",alignItems:"flex-start",justify:"space-between",lineHeight:"40px",border:"1px #ccc solid",padding:"0 1%",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px",width:180},kr={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},Or={verticalAlign:"middle",padding:"0 0% 0 2%"},jr=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1),height:"auto",backgroundColor:"#fafafa"},containerList:{display:"flex",flexWrap:"wrap",padding:e.spacing(2),height:"auto"},title:{color:"#000",textAlign:"center",fontSize:"1.1rem"},selector:{width:"380px",fontSize:"0.8rem",margin:"10px 0",textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},paper2:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1),position:"relative"},list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#bbb",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"},addButton:{padding:"5px 10px 5px 8px",height:"40px",margin:"5px",float:"right",fontSize:"0.8rem"},dropBox:{margin:"30px 0 15px 0"},dropBoxItem:{border:"1px solid #ccc",borderRadius:"3%",height:"60px",padding:"10px 15px 0 15px",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#4169E1",backgroundColor:"#fafafa"},dropBoxItem2:{margin:"1% 0",border:"1px solid #ccc",borderRadius:"3%",height:"60px",padding:"0 1% 0 1%",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",color:"black"}}})),Dr=function(e){var a=e.handleInput,t=e.redux,o=e.data,i=e.addProc,l=e.removeProc,s=e.handleFiles,c=e.getFile,d=e.plusOne,u=e.minusOne,m=o.procDisplay,p=o.selectedEmpresa,f=o.procsToAdd,g=o.selectedDocs,h=t.empresas,v=t.procuradores,E=jr(),x=E.paper,S=E.container,y=E.title,w=E.dropBox,C=E.dropBoxItem,j=E.dropBoxItem2,D=E.addButton,I=E.paper2,A=E.containerList,N=function(e){var a=o[e.field];return e.pattern&&a?null===a.match(e.pattern):a>e.max||a<e.min},P=function(e){var a=o[e.field];return a>e.max||a<e.min?"Valor inv\xe1lido":a&&null===a.match(e.pattern)?"\u2718":e.pattern&&a&&null!==a.match(e.pattern)?"\u2713":void 0};return n.a.createElement(V.a,{container:!0,direction:"row",className:S,justify:"flex-start"},n.a.createElement(qa,{data:o,empresas:h,handleInput:a}),p&&n.a.createElement(je.a,{className:I},n.a.createElement(O.a,{className:y}," Cadastrar nova procura\xe7\xe3o "),n.a.createElement("h4",{style:{fontWeight:400,fontSize:"0.9em"}},' Se a procura\xe7\xe3o abranger mais de um procurador, clique em "+" para adicionar e anexe apenas 1 vez.'),f.map((function(e,t){return n.a.createElement(V.a,{item:!0,xs:12,key:t,style:{float:"left"}},Vt.map((function(e,i){return n.a.createElement(r.Fragment,{key:i},n.a.createElement(Ce.a,{name:e.field+t,label:e.label,margin:"normal",className:E.textField,onChange:function(e){return a(e)},type:e.type||"",error:N(e),helperText:P(e),select:e.select||!1,value:o[e.field+t]||"",disabled:e.disabled||!1,InputLabelProps:{className:E.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888"}},inputProps:{style:{background:e.disabled&&o.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#000",width:e.width||150,height:"7px"},value:"".concat(o[e.field+t]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1}),t===f.length-1&&3===i&&n.a.createElement(n.a.Fragment,null,n.a.createElement(lr.a,{onClick:function(){return d()},style:{verticalAlign:"middle",position:"absolute",bottom:"136px",right:t>0?"15px":"35px",color:"#009688",fontSize:30,cursor:"pointer",zIndex:1}}),t>0&&n.a.createElement(cr.a,{onClick:function(){return u()},style:{verticalAlign:"middle",position:"absolute",bottom:"136px",right:"45px",color:"red",fontSize:30,cursor:"pointer",zIndex:1}})))})))})),n.a.createElement(V.a,{container:!0,style:{position:"relative"}},n.a.createElement(V.a,{item:!0,xs:6},n.a.createElement(Me.a,{onDrop:s},(function(e){var a=e.getRootProps,t=e.getInputProps;return n.a.createElement(V.a,Object.assign({container:!0,justify:"center",alignItems:"center",className:w,direction:"row"},a()),n.a.createElement("input",t()),m.match("Clique ou")?n.a.createElement(V.a,{item:!0,xs:6,className:C}," ",m," "):n.a.createElement(V.a,{item:!0,xs:6,className:j}," ",n.a.createElement(Ue.a,null),"  ",m," ",n.a.createElement("br",null)," (clique ou arraste outro arquivo para alterar)"))}))),n.a.createElement(V.a,{item:!0,xs:6,className:w},n.a.createElement(Ce.a,{name:"vencimento",label:"Vencimento",margin:"normal",className:E.textField,onChange:function(e){return a(e)},type:"date",helper:"se indeterminado, deixar em branco",value:o.vencimento||"",InputLabelProps:{className:E.textField,shrink:!0,style:{fontSize:"0.8rem",color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:"#fafafa",fontSize:"0.8rem",textAlign:"center",color:"#000",height:"9px"}},variant:"filled"})))),n.a.createElement(V.a,{container:!0,direction:"row",justify:"flex-start",style:{width:"1200px"}},n.a.createElement(V.a,{item:!0,xs:9,style:{width:"1000px"}}),n.a.createElement(V.a,{item:!0,xs:3,style:{align:"right"}},p&&n.a.createElement(k.a,{className:D,size:"small",color:"secondary",variant:"contained",onClick:i},n.a.createElement(Ne.a,null),"Cadastrar procura\xe7\xe3o"))),p&&g[0]&&n.a.createElement("h2",{style:{margin:"25px 0 0 15px"}},"Procura\xe7\xf5es cadastradas"),p&&!g[0]&&n.a.createElement(V.a,{item:!0,xs:12},n.a.createElement(je.a,{className:x},"Nenhum procurador cadastrado para ",p.razaoSocial)),g.length>0&&g.map((function(e,a){return n.a.createElement(V.a,{container:!0,key:.01*a,direction:"row",className:A,justify:"center",alignItems:"flex-start"},n.a.createElement(V.a,{item:!0,xs:12},n.a.createElement(je.a,{style:{padding:"10px 15px 20px 15px"}},n.a.createElement("p",{className:y},"Procura\xe7\xe3o ",e.vencimento?"com vencimento em "+((t=e.vencimento)?ue()(t).format("DD-MM-YYYY"):""):"por prazo indeterminado"),n.a.createElement(yr,{procuradores:v,procuracao:e}),n.a.createElement("div",{style:wr},n.a.createElement("span",{style:Cr},n.a.createElement(Ze.a,{style:Or}),n.a.createElement("span",{style:{verticalAlign:"middle"}}," "," Baixar arquivo"),n.a.createElement(Je.a,{style:kr,onClick:function(){return c(e.procuracaoId)}})),n.a.createElement("span",{style:Object(b.a)({},Cr,{width:90,backgroundColor:"white",border:0,position:"absolute",right:0})},n.a.createElement(ur.a,{color:"secondary",style:kr,onClick:function(){return l(e)}}),"Apagar")))));var t})))},Ir=xe(["empresas","procuradores","procuracoes"],function(e){function a(){var e;return Object(ae.a)(this,a),(e=Object(re.a)(this,Object(ne.a)(a).call(this))).state={empresas:[],razaoSocial:"",toastMsg:"Dados atualizados!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,addedSocios:[0],totalShare:0,filteredProc:[],procDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",procuradores:[],procsToAdd:[1],procuracoesArray:[],selectedDocs:[]},e.handleInput=function(a){var t,r,n,o,i,l,s;return ee.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=a.target.name,r=a.target.value,n=Object(h.a)(e.props.redux.procuracoes),o=[],i=[],l=Object(h.a)(e.props.redux.procuradores),e.setState(Object(b.a)({},e.state,Object(g.a)({},t,r))),"razaoSocial"!==t||!Array.isArray(l)){c.next=16;break}if((n=n.filter((function(e){return e.razaoSocial===r})))[0]&&n.forEach((function(e){e.procuradores.forEach((function(e){var a=l.find((function(a){return a.procuradorId===e}));a&&o.push(a)})),i.push(o),o=[]})),e.setState({procuracoesArray:i,selectedDocs:n}),!(s=e.props.redux.empresas.find((function(e){return e.razaoSocial===r})))){c.next=15;break}return c.next=12,ee.a.awrap(e.setState({razaoSocial:s.razaoSocial,selectedEmpresa:s}));case 12:r!==s.razaoSocial&&e.setState({selectedEmpresa:void 0}),c.next=16;break;case 15:e.setState({selectedEmpresa:void 0});case 16:case"end":return c.stop()}}))},e.addProc=function(){var a,t,r,n,o,i,l,s,c,d,u,m,p,f,b,v,E,x,S,w,C,k;return ee.a.async((function(O){for(;;)switch(O.prev=O.next){case 0:if(a=e.state,t=a.selectedEmpresa,r=a.procFiles,n=a.vencimento,o=Object(h.a)(e.props.redux.procuradores),i=Object(h.a)(e.state.procsToAdd),l=Object(h.a)(e.state.selectedDocs),s=Object(h.a)(e.state.files),c=[],d={},i.forEach((function(a,t){Vt.forEach((function(a){Object.assign(d,Object(g.a)({},a.field,e.state[a.field+t]))}));var r=0;Object.values(d).forEach((function(e){e&&(r+=1)})),r>0&&c.push(d),r=0,d={},Vt.forEach((function(a){e.setState(Object(g.a)({},a.field+t,""))}))})),m=[],p=[],f=new FormData,c.forEach((function(e){(u=o.filter((function(a){return a.cpfProcurador===e.cpfProcurador}))).length>0&&u[0].hasOwnProperty("procuradorId")?p.push(u[0].procuradorId):m.push(e)})),!(m.length>0)){O.next=11;break}return m=ce.a.decamelizeKeys(m),O.next=9,ee.a.awrap(le.a.post("/api/cadProcuradores",{procuradores:m,table:"procurador",tablePK:"procurador_id"}).then((function(e){e.data.forEach((function(e){return p.push(e.procurador_id)}))})));case 9:return O.next=11,ee.a.awrap(le.a.get("/api/procuradores").then((function(a){var t=ce.a.camelizeKeys(a.data);e.setState({procuradores:t})})));case 11:return b={delegatario_id:t.delegatarioId,vencimento:n,status:"vigente",procuradores:p},Object.entries(b).forEach((function(e){var a=Object(y.a)(e,2),t=a[0],r=a[1];r&&""!==r||delete b[t]})),O.next=15,ee.a.awrap(le.a.post("/api/cadProcuracao",b).then((function(e){v=e.data[0].procuracao_id})));case 15:if(b.procuracaoId=v,!r){O.next=44;break}for(f.append("fieldName","procuracao"),f.append("empresaId",t.delegatarioId),f.append("procuracaoId",v),f.append("procuradores",p),E=!0,x=!1,S=void 0,O.prev=24,w=r.entries()[Symbol.iterator]();!(E=(C=w.next()).done);E=!0)k=C.value,f.append(k[0],k[1]);O.next=32;break;case 28:O.prev=28,O.t0=O.catch(24),x=!0,S=O.t0;case 32:O.prev=32,O.prev=33,E||null==w.return||w.return();case 35:if(O.prev=35,!x){O.next=38;break}throw S;case 38:return O.finish(35);case 39:return O.finish(32);case 40:return O.next=42,ee.a.awrap(le.a.post("/api/empresaUpload",f).then((function(e){return console.log(e.data)})));case 42:return O.next=44,ee.a.awrap(le.a.get("/api/getOneFile?collection=empresaDocs&id=".concat(v)).then((function(e){e.data[0]&&s.push(e.data[0])})));case 44:l.reverse(),l.push(b),l.reverse(),e.setState({selectedDocs:l,files:s,procDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",procsToAdd:[1],vencimento:"",procFiles:void 0}),e.toast();case 49:case"end":return O.stop()}}),null,null,[[24,28,32,40],[33,,35,39]])},e.removeProc=function(a){var t,r,n,o,i;return ee.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.state.files,r=a.procuracaoId,n=t.find((function(e){return Number(e.metadata.procuracaoId)===r})),o=Object(h.a)(e.state.selectedDocs),l.next=4,ee.a.awrap(le.a.delete("/api/delete?table=procuracao&tablePK=procuracao_id&id=".concat(r)).then((function(e){console.log(e.data)})));case 4:n&&n.hasOwnProperty("_id")&&le.a.get("/api/deleteFile/".concat(n._id)),i=o.indexOf(a),o.splice(i,1),e.setState({selectedDocs:o});case 8:case"end":return l.stop()}}))},e.handleFiles=function(a){var t=new FormData;t.append("procFile",a[0]),e.setState({procFiles:t,procDisplay:a[0].name})},e.getFile=function(a){var t=e.state.files.find((function(e){return Number(e.metadata.procuracaoId)===a}));if(t){var r=t._id,n=t.filename;Wt(r,n,"empresaDocs")}else e.setState({alertType:"filesNotFound",openAlertDialog:!0})},e.plusOne=function(){var a=Object(h.a)(e.state.procsToAdd);a.push(1),e.setState({procsToAdd:a})},e.minusOne=function(){var a=Object(h.a)(e.state.procsToAdd);a.pop(),e.setState({procsToAdd:a})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.escFunction=function(a){27===a.keyCode&&e.state.openDialog&&e.toggleDialog()},e}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentDidMount",value:function(){var e=this;le.a.get("/api/getFiles/empresaDocs?fieldName=procuracao").then((function(a){return e.setState({files:a.data})})),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.openAlertDialog,t=e.alertType;return n.a.createElement(n.a.Fragment,null,n.a.createElement(da,{links:["Empresas","/empresas"],text:"Altera\xe7\xe3o de procuradores"}),n.a.createElement(Dr,{data:this.state,redux:this.props.redux,handleInput:this.handleInput,removeProc:this.removeProc,handleFiles:this.handleFiles,addProc:this.addProc,handleSubmit:this.handleSubmit,plusOne:this.plusOne,minusOne:this.minusOne,getFile:this.getFile}),n.a.createElement(Oa,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}),a&&n.a.createElement(za,{open:a,close:this.closeAlert,alertType:t,customMessage:this.state.customMsg}))}}]),a}(r.Component)),Ar=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1)},title:{color:"#000",fontWeight:500,textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},helperText:{marginTop:"4px"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#bbb",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"},addButton:{marginBottom:"1%",padding:"1% 0"},dropBox:{margin:"1% 0"},dropBoxItem:{margin:"12px 0",border:"1px solid #ccc",borderRadius:"3%",height:"50px",padding:"17px",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#4169E1",backgroundColor:"#fafafa"},dropBoxItem2:{margin:"12px 0",border:"1px solid #ccc",borderRadius:"3%",height:"50px",padding:"0 1% 0 1%",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#00000",backgroundColor:"#fafafa"}}}));function Nr(e){var a=e.empresas,t=e.data,o=e.removeSocio,i=e.handleBlur,l=e.handleInput,s=e.addSocio,c=e.handleFiles,d=e.enableEdit,u=e.handleEdit,m=e.handleSubmit,p=t.dropDisplay,f=t.filteredSocios,g=t.selectedEmpresa,h=Ar(),b=h.paper,v=h.container,E=h.title,x=h.iconButton,S=h.dropBox,y=h.dropBoxItem,w=h.dropBoxItem2,C=h.list,O=h.addButton,j=function(e){var a=t[e.field];return e.pattern&&a?null===a.match(e.pattern):a>e.max||a<e.min},D=function(e){var a=t[e.field];return a>e.max||a<e.min?"Valor inv\xe1lido":a&&null===a.match(e.pattern)?"\u2718":e.pattern&&a&&null!==a.match(e.pattern)?"\u2713":" "};return n.a.createElement(V.a,{container:!0,direction:"row",className:v,justify:"center"},n.a.createElement(qa,{data:t,empresas:a,handleInput:l,handleBlur:i}),n.a.createElement(V.a,{item:!0,xs:12},n.a.createElement(je.a,{className:b},Bt.map((function(e,a){return n.a.createElement(r.Fragment,{key:a},n.a.createElement(Ce.a,{name:e.field,label:e.label,margin:"normal",className:h.textField,onChange:l,onBlur:i,type:e.type||"",error:j(e),helperText:D(e),FormHelperTextProps:{className:h.helperText},select:e.select||!1,value:t[e.field]||"",disabled:e.disabled,InputLabelProps:{className:h.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:e.disabled&&t.disable?"#fff":"#fafafa",height:"7px"},value:"".concat(t[e.field]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},variant:e.variant||"filled"}))})),n.a.createElement(k.a,{color:"primary",className:O,onClick:s},n.a.createElement(Ne.a,null)," Adicionar s\xf3cio"))),g&&0===f.length&&n.a.createElement(V.a,{item:!0,xs:12},n.a.createElement(je.a,{className:b},"Nenhum s\xf3cio cadastrado para ",g.razaoSocial)),f.length>0&&g&&n.a.createElement(V.a,{container:!0,direction:"row",className:v,justify:"center",alignItems:"center"},n.a.createElement(V.a,{item:!0,xs:12},n.a.createElement(je.a,{className:b},n.a.createElement("p",{className:E},"S\xf3cios cadastrados"),f.map((function(e,a){return n.a.createElement(V.a,{key:a},Bt.map((function(a,t){return n.a.createElement(r.Fragment,{key:t+1e3},n.a.createElement(Ce.a,{value:e[a.field]||"",name:a.field,label:a.label,className:C,disabled:"cpfSocio"===a.field||!e.edit,onChange:u,InputLabelProps:{shrink:!0,style:{fontWeight:600}},inputProps:{style:{fontSize:"0.8rem"}}}))})),n.a.createElement(k.a,{component:"span",className:x,title:"editar",onClick:function(){return d(a)}},n.a.createElement(lt.a,null)),n.a.createElement(k.a,{className:x,color:"secondary",title:"Remover",onClick:function(){return o(a)}},n.a.createElement(ct.a,null)))}))),n.a.createElement(Me.a,{onDrop:c},(function(e){var a=e.getRootProps,t=e.getInputProps;return n.a.createElement(V.a,Object.assign({container:!0,justify:"center",alignItems:"center",className:S,direction:"row"},a()),n.a.createElement("input",t()),p.match("Clique ou")?n.a.createElement(V.a,{item:!0,xs:6,className:y}," ",p," "):n.a.createElement(V.a,{item:!0,xs:6,className:w}," ",n.a.createElement(Ue.a,null),"  ",p," ",n.a.createElement("br",null)," (clique ou arraste outro arquivo para alterar)"))})),n.a.createElement(V.a,{container:!0,direction:"row",justify:"flex-end",style:{width:"1200px"}},n.a.createElement(V.a,{item:!0,xs:10,style:{width:"1000px"}}),n.a.createElement(V.a,{item:!0,xs:1,style:{align:"right"}},n.a.createElement(k.a,{size:"small",color:"primary",variant:"contained",style:{margin:"0px 0 10px 0"},onClick:function(){return m()}},"Salvar ",n.a.createElement("span",null,"\xa0\xa0 ")," ",n.a.createElement(_a.a,null)))))))}var Pr=xe(["empresas","socios"],function(e){function a(){var e,t;Object(ae.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=Object(re.a)(this,(e=Object(ne.a)(a)).call.apply(e,[this].concat(n)))).state={razaoSocial:"",toastMsg:"Dados atualizados!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,dialogTitle:"",addedSocios:[0],totalShare:0,filteredSocios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",showFiles:!1},t.handleInput=function(e){var a,r,n,o,i,l,s;return ee.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(a=t.props.redux,r=a.empresas,n=a.socios,o=e.target.name,i=e.target.value,t.setState(Object(b.a)({},t.state,Object(g.a)({},o,i))),"razaoSocial"!==o){c.next=13;break}if(l=Object(h.a)(n.filter((function(e){return e.razaoSocial===i}))),s=r.find((function(e){return e.razaoSocial===i})),l.length>0?t.setState({filteredSocios:l,selectedEmpresa:s}):t.setState({filteredSocios:[]}),!s){c.next=12;break}return c.next=9,ee.a.awrap(t.setState({razaoSocial:s.razaoSocial,selectedEmpresa:s}));case 9:i!==s.razaoSocial&&t.setState({selectedEmpresa:void 0}),c.next=13;break;case 12:t.setState({selectedEmpresa:void 0});case 13:case"end":return c.stop()}}))},t.handleBlur=function(e){var a,r,n,o;return ee.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:a=t.state.filteredSocios,r=e.target.name,n=e.target.value,i.t0=r,i.next="cpfSocio"===i.t0?6:"share"===i.t0?9:26;break;case 6:return a.find((function(e){return e.cpfSocio===n}))&&(t.setState({alertType:"alreadyExists",openAlertDialog:!0}),t.setState({cpfSocio:""})),i.abrupt("break",27);case 9:if(!n){i.next=25;break}if(!((n=n.replace(",","."))>100)){i.next=16;break}return i.next=14,ee.a.awrap(t.setState({share:""}));case 14:n="",t.setState({alertType:"numberNotValid",openAlertDialog:!0});case 16:if("0"===n||"00"===n||Number(n)){i.next=22;break}return i.next=19,ee.a.awrap(t.setState({share:""}));case 19:t.setState({alertType:"numberNotValid",openAlertDialog:!0}),i.next=25;break;case 22:o=a.map((function(e){return Number(e.share)})).reduce((function(e,a){return e+a})),o+=Number(n),t.setState({totalShare:o,share:n});case 25:case 26:return i.abrupt("break",27);case 27:case"end":return i.stop()}}))},t.addSocio=function(){var e,a;return ee.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=t.state.filteredSocios,a={},!(t.state.totalShare>100)){r.next=4;break}return t.setState({openAlertDialog:!0,alertType:"overShared"}),r.abrupt("return",null);case 4:return Bt.forEach((function(e){Object.assign(a,Object(g.a)({},e.field,t.state[e.field]))})),e.unshift(a),r.next=8,ee.a.awrap(t.setState({filteredSocios:e}));case 8:Bt.forEach((function(e){t.setState(Object(g.a)({},e.field,""))})),document.getElementsByName("nomeSocio")[0].focus();case 10:case"end":return r.stop()}}))},t.removeSocio=function(e){var a,r,n;return ee.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=Object(h.a)(t.state.filteredSocios),r=a[e].socioId,n=t.props.redux.socios,!n.find((function(e){return e.socioId===r}))){o.next=5;break}return o.next=5,ee.a.awrap(le.a.delete("/api/delete?table=socios&tablePK=socio_id&id=".concat(r)).catch((function(e){return console.log(e)})));case 5:a.splice(e,1),t.setState({filteredSocios:a});case 7:case"end":return o.stop()}}))},t.enableEdit=function(e){var a=t.state.filteredSocios;!0===a[e].edit?a[e].edit=!1:(a.forEach((function(e){return e.edit=!1})),a[e].edit=!0),t.setState({filteredSocios:a})},t.handleEdit=function(e){var a=e.target.name,r=e.target.value;"share"===a&&(r=r.replace(",","."));var n=t.state.filteredSocios.filter((function(e){return!0===e.edit}))[0],o=t.state.filteredSocios.indexOf(n);n[a]=r;var i=t.state.filteredSocios;i[o]=n,t.setState({filteredSocios:i})},t.handleSubmit=function(){var e,a,r,n,o,i,l,s,c,d,u,m,p,f,h,b,v,E,x,S,y,w;return ee.a.async((function(C){for(;;)switch(C.prev=C.next){case 0:if(e=t.state,a=e.selectedEmpresa,r=e.contratoSocial,n=e.filteredSocios,o=t.props.redux.socios,!(n.map((function(e){return Number(e.share)})).reduce((function(e,a){return e+a}))>100)){C.next=5;break}return t.setState({openAlertDialog:!0,alertType:"overShared"}),C.abrupt("return",null);case 5:if(i=[],l=[],s=new FormData,(c=Bt.map((function(e){return ce.a.decamelize(e.field)}))).splice(1,1),n.forEach((function(e){var t=e,r=(t.razaoSocial,t.createdAt,t.edit,Object(X.a)(t,["razaoSocial","createdAt","edit"]));if((e=r).delegatarioId=a.delegatarioId,e.hasOwnProperty("socioId"))i.push(e),delete i.socioId;else{var n=o.find((function(a){return a.cpfSocio===e.cpfSocio}));n?(e.socioId=n.socioId,i.push(e)):l.push(e)}})),d="socios",u="socio_id",m=[],p={},f=ce.a.camelizeKeys(t.state.originals),i.forEach((function(e){f.forEach((function(a){e.socioId===a.socioId&&(Object.keys(e).forEach((function(t){e[t]===a[t]&&"socioId"!==t||Object.assign(p,Object(g.a)({},t,e[t]))})),Object.keys(p).length>1&&m.push(p),p={})}))})),i=ce.a.decamelizeKeys(m),l=ce.a.decamelizeKeys(l),h=n.filter((function(e){return void 0!==e.socioId})).map((function(e){return e.socioId})),C.prev=15,!(i.length>0)){C.next=19;break}return C.next=19,ee.a.awrap(le.a.put("/api/editSocios",{requestArray:i,table:d,tablePK:u,keys:c}).then((function(e){return console.log(e.data)})));case 19:if(!(l.length>0)){C.next=22;break}return C.next=22,ee.a.awrap(le.a.post("/api/cadSocios",{socios:l,table:d,tablePK:u}).then((function(e){return e.data.forEach((function(e){return h.push(e.socio_id)}))})));case 22:if(!r){C.next=46;break}for(s.append("empresaId",a.delegatarioId),s.append("socios",h),b=!0,v=!1,E=void 0,C.prev=28,x=r.entries()[Symbol.iterator]();!(b=(S=x.next()).done);b=!0)y=S.value,s.append(y[0],y[1]);C.next=36;break;case 32:C.prev=32,C.t0=C.catch(28),v=!0,E=C.t0;case 36:C.prev=36,C.prev=37,b||null==x.return||x.return();case 39:if(C.prev=39,!v){C.next=42;break}throw E;case 42:return C.finish(39);case 43:return C.finish(36);case 44:return C.next=46,ee.a.awrap(le.a.post("/api/empresaUpload",s).then((function(e){return console.log(e.data)})));case 46:C.next=51;break;case 48:C.prev=48,C.t1=C.catch(15),console.log(C.t1);case 51:i=[],m=[],p={},l=[],t.toast(),w=ce.a.decamelizeKeys(t.props.redux.socios),t.setState({razaoSocial:"",selectedEmpresa:void 0,filteredSocios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",contratoSocial:void 0,originals:w});case 58:case"end":return C.stop()}}),null,null,[[15,48],[28,32,36,44],[37,,39,43]])},t.handleFiles=function(e){var a=new FormData;a.append("contratoSocial",e[0]),t.setState({dropDisplay:e[0].name,contratoSocial:a})},t.toggleDialog=function(){return t.setState({openDialog:!t.state.openDialog})},t.closeAlert=function(){return t.setState({openAlertDialog:!t.state.openAlertDialog})},t.toast=function(){return t.setState({confirmToast:!t.state.confirmToast})},t}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentDidMount",value:function(){var e=ce.a.decamelizeKeys(this.props.redux.socios);this.setState({originals:e})}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.openAlertDialog,t=e.alertType,r=this.props.redux.empresas;return n.a.createElement(n.a.Fragment,null,n.a.createElement(da,{links:["Empresas","/empresas"],text:"Altera\xe7\xe3o do quadro societ\xe1rio"}),n.a.createElement(Nr,{data:this.state,empresas:r,handleInput:this.handleInput,handleBlur:this.handleBlur,addSocio:this.addSocio,removeSocio:this.removeSocio,enableEdit:this.enableEdit,handleEdit:this.handleEdit,handleFiles:this.handleFiles,handleSubmit:this.handleSubmit}),n.a.createElement(Oa,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}),a&&n.a.createElement(za,{open:a,close:this.closeAlert,alertType:t}))}}]),a}(r.Component)),zr=t(202),Fr=t.n(zr),Tr={title:{text:"Ve\xedculos por ano de fabrica\xe7\xe3o",align:"center",marginTop:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:500,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}},legend:{show:!1},chart:{id:"veiculos_ano_fabricacao"},xaxis:{labels:{style:{fontSize:"9px",fontWeight:400,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}}},dataLabels:{enabled:!1},fill:{colors:["#f44336"]},plotOptions:{bar:{horizontal:!1}}},Lr={title:{text:"Percentual de ve\xedculos por ano de fabrica\xe7\xe3o",align:"center",marginTop:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:500,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}},plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0,fontSize:"22px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif ",fontWeight:600,color:"#373d3f",offsetY:-10},value:{show:!0,fontSize:"16px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,color:"#373d3f",offsetY:16,formatter:function(e){return e}},total:{show:!0,showAlways:!0,label:"Total:",fontSize:"20px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:600,color:"#373d3f"}}}}},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},qr=(t(480),function(e){var a=e.empresas,t=e.razaoSocial,r=e.labels,o=e.values,i=e.selectedEmpresa,l=e.selectedVehicles,s=e.mediaIdades,c=e.moda,d=e.handleInput;return n.a.createElement("main",null,n.a.createElement(qa,{empresas:a,data:{razaoSocial:t},handleInput:d}),l&&0!==l.length?n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",{style:{width:"100%",textAlign:"center"}},i?i.razaoSocial:"Exibindo todos os ve\xedculos"," - m\xe9dia de idade da frota: ",s," anos, moda: ",c,"."),n.a.createElement(je.a,null,n.a.createElement("section",{className:"rowContainer"},n.a.createElement(Fr.a,{options:Object(b.a)({},Tr,{xaxis:Object(b.a)({},Tr.xaxis,{categories:r})}),series:[{name:"Ve\xedculos",data:o}],type:"bar",width:"600"}),n.a.createElement(Fr.a,{options:Object(b.a)({},Lr,{labels:r,colors:["#ff7c43","#ffa600","#FF9800","#E91E63","#f95d6a","#2E93fA","#66DA26","#2f4b7c","#665191","#a05195","#d45087","#003f5c","#546E7A"]}),series:o,type:"donut",width:"480"}))),n.a.createElement(je.a,null,n.a.createElement("section",null,n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"tHeader",style:{backgroundColor:"#4Ea3eA",color:"#fff"},colSpan:r.length},"Ve\xedculos por ano de fabrica\xe7\xe3o - ",i?i.razaoSocial:"Exibindo todos os ve\xedculos","  ")),n.a.createElement("tr",null,r.map((function(e,a){return n.a.createElement("th",{key:e},e)})))),n.a.createElement("tbody",null,n.a.createElement("tr",null,o.map((function(e,a){return n.a.createElement("td",{className:"review",key:a},e)})))))))):n.a.createElement("p",null,"Nenhum ve\xedculo cadastrado para ",i.razaoSocial))}),Mr=xe(["veiculos","empresas"],(function(e){var a,t,o=e.redux,i=o.veiculos,l=o.empresas,s=Object(r.useState)(""),c=Object(y.a)(s,2),d=c[0],u=c[1],m=Object(r.useState)(void 0),p=Object(y.a)(m,2),f=p[0],g=p[1];f&&""!==f?(a=f.delegatarioId,t=i.filter((function(e){return e.delegatarioId===a}))):t=i;var b=t.map((function(e){return e.anoCarroceria})).filter((function(e){return null!==e})).sort(),v=b.reduce((function(e,a){return e+a/b.length}),0);v=(new Date).getFullYear()-v.toPrecision(4);var E={};b.forEach((function(e){void 0===E[e]&&(E[e]=0),E[e]+=1}));var x=Object.keys(E),S=Object(h.a)(x.sort((function(e,a){return e-a}))),w=Object.values(E),C=x.sort((function(e,a){return E[e]-E[a]}));return C=C[C.length-1],n.a.createElement(qr,{empresas:l,razaoSocial:d,labels:S,values:w,selectedEmpresa:f,selectedVehicles:t,mediaIdades:v,moda:C,handleInput:function(e){var a=e.target.value;u(a);var t=l.find((function(e){return e.razaoSocial===a}));g(t||"")}})}));function Br(){return n.a.createElement("div",{style:{height:"60vh",width:"100%",margin:"15% 35%"}},n.a.createElement("img",{src:"/images/underConstruction.png",alt:"P\xe1gina em constru\xe7\xe3o"}))}var Vr=function(){return n.a.createElement(N.c,null,n.a.createElement(N.a,{exact:!0,path:"/",component:G}),n.a.createElement(N.a,{path:"/veiculos",exact:!0,component:$}),n.a.createElement(N.a,{path:"/veiculos/cadastro",exact:!0,component:Fa}),n.a.createElement(N.a,{path:"/veiculos/altDados",exact:!0,component:Ra}),n.a.createElement(N.a,{path:"/veiculos/altSeguro",exact:!0,component:$a}),n.a.createElement(N.a,{path:"/veiculos/baixaVeiculo",exact:!0,component:ot}),n.a.createElement(N.a,{path:"/veiculos/config",exact:!0,component:mt}),n.a.createElement(N.a,{path:"/consultas",component:Jt}),n.a.createElement(N.a,{path:"/empresas",exact:!0,component:or}),n.a.createElement(N.a,{path:"/empresas/cadastro",component:tr}),n.a.createElement(N.a,{path:"/empresas/socios",component:Pr}),n.a.createElement(N.a,{path:"/empresas/procuradores",component:Ir}),n.a.createElement(N.a,{path:"/relatorios",component:Mr}),n.a.createElement(N.a,{path:"/crv",component:Nt}),n.a.createElement(N.a,{path:"/faleConosco",component:Br}))};var Rr=function(){var e=Object(S.a)((function(e){return{root:{backgroundColor:"#fbfbfb"}}}))().root,a=Object(s.a)(u.a,p.a,f.a)(s.e);return n.a.createElement(c.a,{store:a(x)},n.a.createElement("div",{className:e},n.a.createElement(B.a,{maxWidth:"lg",style:{minHeight:"100vh"}},n.a.createElement(l.a,null,n.a.createElement(F,null),n.a.createElement(Vr,null)),n.a.createElement(T,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(Rr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[319,1,2]]]);
//# sourceMappingURL=main.64d70dfd.chunk.js.map