(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{160:function(e,a,t){},374:function(e,a,t){},400:function(e,a){},401:function(e,a,t){},433:function(e,a,t){e.exports=t(556)},484:function(e,a){},487:function(e,a,t){},489:function(e,a,t){},490:function(e,a,t){},491:function(e,a,t){},548:function(e,a){},549:function(e,a){},550:function(e,a,t){},551:function(e,a,t){},553:function(e,a,t){},554:function(e,a,t){},555:function(e,a,t){},556:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(25),i=t.n(o),l=t(51),c=t(53),s=t(411),d=t.n(s),u=t(412),m=t.n(u),p=t(413),f=t(8),v=t(24),h=t(2),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"GET_DATA":return Object(h.a)(Object(h.a)({},e),n);case"INSERT_DATA":var r=n.collection,o=n.data;if(e[r]&&o){var i=Object(v.a)(e[r]);return o.forEach((function(e){r.match("Logs")?i.push(e):i.unshift(e)})),Object(h.a)(Object(h.a)({},e),{},Object(f.a)({},r,i))}return e;case"UPDATE_DATA":var l=n.collection,c=n.data,s=n.id;if(e[l]&&c){var d=e[l].map((function(e){return c.forEach((function(a){e[s]!==a[s]&&e[s].toString()!==a[s].toString()||(e=a)})),e}));return Object(h.a)(Object(h.a)({},e),{},Object(f.a)({},l,d))}return e;case"UPDATE_COLLECTION":var u=n.data,m=n.collection;return Object(h.a)(Object(h.a)({},e),{},Object(f.a)({},m,u));case"REMOVE_FROM_INSURANCE":var p=n.apolice,b=n.placaIndex,g=n.vehicleIndex;if(e.seguros){var E=Object(v.a)(e.seguros),S=E.find((function(e){return e.apolice===p})),x=E.findIndex((function(e){return e.apolice===p}));return S.placas.splice(b,1),S.veiculos.splice(g,1),E[x]=S,Object(h.a)(Object(h.a)({},e),{},{seguros:E})}return e;case"DELETE_ONE":var y=n.tablePK,O=n.collection;if(e[O]){var j=n.id,w=Object(v.a)(e[O]);if(!j)return;O.match("Docs")||(j=Number(j)),"laudos"===O&&(j=j.toString());var C=w.find((function(e){return e[y]===j})),k=w.findIndex((function(e){return e[y]===C[y]}));return w.splice(k,1),Object(h.a)(Object(h.a)({},e),{},Object(f.a)({},O,w))}return e;case"SET_COLOR":return Object(h.a)(Object(h.a)({},e),{},{setColor:a.payload});case"LOADING":return Object(h.a)(Object(h.a)({},e),{},{loading:a.payload});default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"LOG_USER":return Object(h.a)(Object(h.a)({},e),n);case"LOG_USER_OUT":return Object(h.a)(Object(h.a)({},e),{},{user:n});default:return e}},E=Object(l.c)({data:b,user:g}),S=function(e,a){return"LOG_USER_OUT"===a.type&&(e={data:{},user:{}}),E(e,a)},x=t(70),y=t(39),O=t(7),j=t.n(O),w=t(9),C=t(45),k=t(46),D=t(48),I=t(47),N=t(23),A=t.n(N),P=t(17),F=t.n(P),T=function(e,a,t){var n=[],r=[];return e.map((function(e){(null===e||void 0===e?void 0:e.equipamentosId)||(e.equipamentosId=[]),(null===e||void 0===e?void 0:e.acessibilidadeId)||(e.acessibilidadeId=[]),e.equipamentosId.forEach((function(e){a.forEach((function(a){var t=a.id,r=a.item;t===e&&n.push(r)}))})),e.acessibilidadeId.forEach((function(e){t.forEach((function(a){var t=a.id,n=a.item;t===e&&r.push(n)}))}));var o=Object(h.a)(Object(h.a)({},e),{},{equipamentos:n,acessibilidade:r});return n=[],r=[],o}))},z=function(e,a){var t=[];return a.forEach((function(a){e.forEach((function(e){var n=e.id,r=e.item;a===n&&t.push(r)}))})),t},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(){var a=Object(w.a)(j.a.mark((function a(t,n){var r,o,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=[],o={},!(e.length>0)){a.next=5;break}return e.forEach((function(e){r.push(F.a.get("/api/".concat(e)))})),a.next=5,Promise.all(r).then((function(e){return e.map((function(e){return A.a.camelizeKeys(e.data)}))})).then((function(a){a.forEach((function(a,t){var n=e[t].replace("getFiles/","").replace("lookUpTable/","").replace("logs/","");n=A.a.camelize(n),Object.assign(o,Object(f.a)({},n,a))}))}));case 5:["acessibilidade","equipamentos"].every((function(e){return o.hasOwnProperty(e)}))&&(l=o.acessibilidade,c=o.equipamentos,s=o.veiculos||(null===(i=n().data)||void 0===i?void 0:i.veiculos),d=T(s,c,l),o.veiculos=d),t({type:"GET_DATA",payload:o});case 7:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},M=function(e,a){return function(t,n){var r=A.a.camelizeKeys(e),o={collection:a,data:r},i=n().data.seguradoras;if(i){if(console.log(o),"veiculos"===a&&r[0]){var l,s,d=n().data,u=d.acessibilidade,m=d.equipamentos,p=[],f=[];(null===(l=r[0])||void 0===l?void 0:l.equipamentosId)&&r[0].equipamentosId.forEach((function(e){m.forEach((function(a){var t=a.id,n=a.item;e.toString()===t.toString()&&p.push(n)}))})),(null===(s=r[0])||void 0===s?void 0:s.acessibilidadeId)&&r[0].acessibilidadeId.forEach((function(e){u.forEach((function(a){var t=a.id,n=a.item;e.toString()===t.toString()&&f.push(n)}))})),r[0].equipamentos=p,r[0].acessibilidade=f}if("seguros"===a&&r[0].placas&&1===r[0].placas.length){var v=i.find((function(e){return e.id===r[0].seguradoraId})),h=r[0],b=[],g=[],E=n().data.veiculos,S=E.map((function(e){return e.apolice===h.apolice&&(e.seguradora=v.seguradora,e.dataEmissao=h.dataEmissao,e.vencimento=h.vencimento),e}));E.forEach((function(e){e.apolice===h.apolice&&(b.push(e.placa),g.push(e.veiculoId))})),h.placas=b,h.veiculos=g,h=[h];var x={data:S,collection:"veiculos"};Object(c.b)((function(){t({type:"INSERT_DATA",payload:{data:h,collection:"seguros"}}),t({type:"UPDATE_COLLECTION",payload:x})}))}else t({type:"INSERT_DATA",payload:o})}else t({type:"INSERT_DATA",payload:o})}},q=function(e,a,t){return function(n,r){var o=A.a.camelizeKeys(e);t=A.a.camelize(t);var i=r().data,l=i.equipamentos,c=i.acessibilidade;"veiculos"===a&&l&&c&&(o=T(o,l,c)),n({type:"UPDATE_DATA",payload:{collection:a,data:o,id:t}})}},V=function(e,a,t,n){return function(r,o){var i=o().data[t];if(e&&e[0]&&a){var l=i.filter((function(a){return e.some((function(e){return e===a[n]}))}));l.forEach((function(e){var t=Object.assign({},e.metadata,a);e.metadata=t})),r({type:"UPDATE_DATA",payload:{collection:t,data:l,id:n}})}}},_=function(e,a){return function(t){t({type:"UPDATE_COLLECTION",payload:{data:e=A.a.camelizeKeys(e),collection:a}})}},B=function(e,a,t){return function(n){a=A.a.camelize(a),n({type:"DELETE_ONE",payload:{id:e,tablePK:a,collection:t}})}},R=function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("img",{src:"/images/loading.gif",alt:"",height:"60px",width:"60px"}),r.a.createElement("p",null," Carregando... "))},U=[{collection:"equipamentos",field:"item",label:"Equipamentos",name:"equipamentosId",table:"equipamentosId"},{collection:"acessibilidade",field:"item",label:"Itens de acessibilidade",name:"acessibilidadeId",table:"acessibilidade"},{collection:"marcaCarroceria",field:"marca",label:"Marcas de Carroceria",name:"marcaCarroceria",table:"marca_carroceria"},{collection:"carrocerias",field:"modelo",label:"Modelos de Carroceria",name:"modeloCarroceria",table:"modelo_carroceria"},{collection:"marcaChassi",field:"marca",label:"Marcas de Chassi",name:"marcaChassi",table:"marca_chassi"},{collection:"modelosChassi",field:"modeloChassi",label:"Modelos de Chassi",name:"modeloChassi",table:"modelo_chassi"},{collection:"seguradoras",field:"seguradora",label:"Seguradoras",name:"seguradora",table:"seguradora"},{collection:"empresasLaudo",field:"empresa",label:"Empresas certificadas INMETRO",name:"empresa",table:"empresa_laudo"},{collection:"laudos",table:"laudos"}],Y=t(38),H=t(3),K=t(147),J=t(358),W=t(557),$=t(359),G=t(579),Z=t(357),X=Object(Z.a)((function(e){return{success:{backgroundColor:K.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:J.a[700]},message:{display:"flex",alignItems:"center"}}}));function Q(e){var a=X(),t=e.className,n=e.message,o=(e.onClose,e.variant),i=Object(Y.a)(e,["className","message","onClose","variant"]);return r.a.createElement(W.a,Object.assign({className:Object(H.a)(a[o],t),"aria-describedby":"client-snackbar",message:n&&r.a.createElement("span",{id:"client-snackbar",className:a.message},r.a.createElement($.a,null,"error"===e.variant?"close":"check"),"    ",n)},i))}function ee(e){return r.a.createElement("div",null,r.a.createElement(G.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.open,autoHideDuration:1500,onClose:e.close},r.a.createElement(Q,{variant:e.status||"success",message:e.msg})))}function ae(e,a){var t=new Date;t.setTime(t.getTime()+12e5),t=t.toUTCString(),document.cookie="".concat(e,"=").concat(a,"; expires=").concat(t,"; path=/")}function te(e){var a=new Date;a.setTime(10),document.cookie="".concat(e,"=; expires=").concat(a.toUTCString(),"; path=/")}function ne(e){for(var a=e+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var r=t[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(a))return r.substring(a.length,r.length)}return""}var re,oe=function(e){return function(a){a({type:"LOG_USER",payload:e})}},ie=function(){return function(){var e=Object(w.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/auth/logout",{method:"GET",credentials:"same-origin"}).then((function(e){te("loggedIn")})).catch((function(e){return console.log(e)}));case 2:a({type:"LOG_USER_OUT"});case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},le=t(463),ce=function(e,a){var t=[];e.includes("logs")||e.push("logs"),t=e.map((function(e){return e.replace("getFiles/","").replace("lookUpTable/","")}));var n=function(n){Object(D.a)(i,n);var o=Object(I.a)(i);function i(){var e;Object(C.a)(this,i);for(var a=arguments.length,t=new Array(a),n=0;n<a;n++)t[n]=arguments[n];return(e=o.call.apply(o,[this].concat(t))).state={confirmToast:!1},e.getUser=Object(w.a)(j.a.mark((function a(){var t,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,F.a.get("/getUser");case 2:t=a.sent,(n=null===t||void 0===t?void 0:t.data)&&e.props.logUser(n);case 5:case"end":return a.stop()}}),a)}))),e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e}return Object(k.a)(i,[{key:"componentDidMount",value:function(){var a=Object(w.a)(j.a.mark((function a(){var t,n,r=this;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=this.props.redux,n=[],e.forEach((function(e){var a=e.replace("getFiles/","").replace("lookUpTable/","").replace("logs/","");t[a]&&t[a][0]||n.push(e)})),!n[0]){a.next=6;break}return a.next=6,this.props.getData(n);case 6:re||(re=le()),re.on("insertVehicle",(function(e){return r.props.insertData(e,"veiculos")})),re.on("insertInsurance",(function(e){return r.props.insertData(e,"seguros")})),re.on("insertEmpresa",(function(e){return r.props.insertData(e,"empresas")})),re.on("insertSocios",(function(e){return r.props.insertData(e,"socios")})),re.on("insertProcuradores",(function(e){return r.props.insertData(e,"procuradores")})),re.on("insertElements",(function(e){var a=e.insertedObjects,t=e.collection;return r.props.insertData(a,t)})),re.on("addElements",(function(e){var a=e.insertedObjects,t=e.table,n=U.find((function(e){return e.table===t})).collection;r.props.insertData(a,n)})),re.on("updateVehicle",(function(e){return r.props.updateData(e,"veiculos","veiculoId")})),re.on("updateInsurance",(function(e){return r.props.updateCollection(e,"seguros")})),re.on("updateSocios",(function(e){return r.props.updateCollection(e,"socios")})),re.on("updateProcuradores",(function(e){var a=e.collection,t=e.data,n=e.primaryKey;return r.props.updateData(t,a,n)})),re.on("updateLogs",(function(e){return r.props.updateData(e,"logs","id")})),re.on("updateAny",(function(e){var a=e.updatedObjects,t=e.collection,n=e.primaryKey;return r.props.updateData(a,t,n)})),re.on("updateDocs",(function(e){var a=e.ids,t=e.metadata,n=e.collection,o=e.primaryKey;return r.props.updateDocs(a,t,n,o)})),re.on("updateElements",(function(e){var a=e.collection,t=e.updatedCollection;return r.props.updateCollection(t,a)})),re.on("deleteOne",(function(e){var a=e.id,t=e.tablePK,n=e.collection;r.props.deleteOne(a,t,n)})),re.on("insertFiles",(function(e){var a=e.insertedObjects,t=e.collection;r.props.insertData(a,t)}));case 24:case"end":return a.stop()}}),a,this)})));return function(){return a.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){re||(re=le(":3001"));["insertVehicle","insertInsurance","insertEmpresa","insertSocios","insertFiles","addElements","insertElements","insertProcuradores","updateVehicle","updateInsurance","updateSocios","updateLogs","deleteOne","updateDocs","updateAny"].forEach((function(e){return re.off(e)}))}},{key:"render",value:function(){var e=this;return ne("loggedIn").length>0?(this.props.user.name||this.getUser(),0!==(t=t.map((function(e){return A.a.camelize(e)}))).length&&t.every((function(a){return e.props.redux.hasOwnProperty(a)}))?r.a.createElement(a,this.props):r.a.createElement(R,null)):(setTimeout((function(){e.props.logUserOut()}),1200),r.a.createElement(ee,{open:!0,close:this.toast,msg:"Sess\xe3o expirada.",status:"error"}))}}]),i}(r.a.Component);return Object(c.c)((function(e){return{redux:Object(h.a)({},e.data),user:e.user}}),(function(e){return Object(l.b)({getData:L,insertData:M,updateData:q,updateCollection:_,deleteOne:B,updateDocs:V,logUser:oe,logUserOut:ie},e)}))(n)},se=(t(487),[{title:"Ve\xedculos",date:"07/Nov",description:"Cadastre e altere os dados do ve\xedculo ou solicite sua baixa",link:"/veiculos",imageUrl:"/images/vehicles.jpg"},{title:"Empresas",date:"07/Nov",description:"Cadastre e gerencie dados de empresas, s\xf3cios e procuradores",link:"/empresas",imageUrl:"/images/empresas12.jpg"},{title:"Consultas",date:"03/Dez",description:"Consulte e gerencie dados de ve\xedculos, seguros e empresas",link:"/consultas",imageUrl:"/images/consultas2.jpg"},{title:"Relat\xf3rios",date:"03/Dez",description:"Acompanhe a situa\xe7\xe3o dos ve\xedculos por meio de gr\xe1ficos e tabelas",link:"/relatorios",imageUrl:"/images/relatorios.jpg"}]),de={nomeSistema:"Sistema de Cadastro do Transporte Intermunicipal de Minas Gerais",siglaSistema:"CadTI - MG"};var ue=ce(["logs","parametros"],(function(e){var a=e.redux.parametros[0].nomes;a&&(de.nomeSistema=null===a||void 0===a?void 0:a.sistema,de.siglaSistema=null===a||void 0===a?void 0:a.siglaSistema);var t=de.nomeSistema,n=de.siglaSistema;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{minHeight:"83vh",width:"100%",height:"auto"}},r.a.createElement("main",{className:"homeMainPost"},r.a.createElement("h1",null,n),r.a.createElement("h2",null,t)),r.a.createElement("section",{className:"homeCardsContainer"},se.map((function(e,a){var t=e.link,n=e.title,o=e.description,i=e.imageUrl;return r.a.createElement("div",{key:a,className:"homeCard"},r.a.createElement(x.b,{to:t,style:{textDecoration:"none"}},r.a.createElement("div",{className:"homeCard"},r.a.createElement("div",{className:"homeCardText"},r.a.createElement("h6",{className:"homeCardText",style:{fontWeight:500}},n),r.a.createElement("p",{className:"homeCardText"},o)),r.a.createElement("div",{className:"homeImage"},r.a.createElement("img",{src:i,alt:n,className:"homeImage"})))))})))))})),me=(t(160),[{title:"Cadastro de Ve\xedculos",date:"07/Nov",description:"Cadastrar um novo ve\xedculo no sistema",imageUrl:"/images/add_new.jpg",link:"/cadastro"},{title:"Altera\xe7\xe3o de dados",date:"07/Nov",description:"Alterar dados de um ve\xedculo",link:"/altDados",imageUrl:"/images/pen.png"},{title:"Seguros",date:"07/Nov",description:"Atualizar seguros e ap\xf3lices",link:"/seguros",imageUrl:"/images/car_insurance2.png"},{title:"Laudos",date:"07/Nov",description:"Laudos de seguran\xe7a veicular",link:"/laudos",imageUrl:"/images/laudos.png"},{title:"Baixa",date:"07/Nov",description:"Baixa de ve\xedculos",link:"/baixaVeiculo",imageUrl:"/images/remove_doc.png"},{title:"Configura\xe7\xf5es",date:"07/Nov",description:"Chassi, carrocerias, seguradoras, etc",link:"/config",imageUrl:"/images/config2.jpg"}]);function pe(e){var a=e.match;return r.a.createElement("div",null,r.a.createElement("section",{className:"jumbotron"},r.a.createElement("h1",null,"Ve\xedculos"),r.a.createElement("p",null,"Selecione uma das op\xe7\xf5es abaixo.")),r.a.createElement("section",{className:"card"},me.map((function(e,t){var n=e.title,o=e.link,i=e.imageUrl,l=e.description;return r.a.createElement(x.b,{to:a.url+o,key:t,className:"card__container"},r.a.createElement("span",{className:"card__image"}," ",r.a.createElement("img",{src:i,alt:n})," "),r.a.createElement("div",{className:"card__text"},r.a.createElement("h3",null,n),r.a.createElement("p",null," ",l)))}))))}var fe=function(e,a){var t,n,r,o=a.veiculos,i=a.empresas,l=a.vehicleDocs,c=a.equipamentos,s=a.acessibilidade,d=null===e||void 0===e?void 0:e.history,u=o.find((function(a){return a.veiculoId===e.veiculoId})),m=JSON.parse(JSON.stringify(u)),p=i.find((function(a){return a.razaoSocial===(null===e||void 0===e?void 0:e.empresa)})),f=null===p||void 0===p?void 0:p.razaoSocial,v=f,b=Object(h.a)({},u)||null;if(Array.isArray(d)&&(n=null===(t=d.reverse().find((function(e){return e.hasOwnProperty("alteracoes")})))||void 0===t?void 0:t.alteracoes),n){var g;Object.keys(n).forEach((function(e){return b[e]=n[e]})),(r=null===(g=i.find((function(e){return e.codigoEmpresa===b.compartilhadoId})))||void 0===g?void 0:g.razaoSocial)&&(b.compartilhado=r);var E=n,S=E.equipamentosId,x=E.acessibilidadeId;S&&(b.equipamentos=z(c,S)),x&&(b.acessibilidade=z(s,x))}var y,O=[],j=[],w={};d.filter((function(e){return e.files})).map((function(e){return e.files})).forEach((function(e){e.forEach((function(e){return O.push(e)}))})),y=l.filter((function(e){return-1!==O.indexOf(e.id)}));var C=[];return y.forEach((function(e){var a=e.metadata.fieldName;C.includes(a)?w[a].push(e):(C.push(a),w[a]=[e])})),Object.keys(w).forEach((function(e){var a;a=w[e].reduce((function(e,a){return new Date(e.uploadDate)>new Date(a.uploadDate)?e:a})),j.push(a),a=[]})),Object(h.a)(Object(h.a)({},b),{},{originalVehicle:m,delegatario:v,compartilhado:r,razaoSocial:f,selectedEmpresa:p,demand:e,demandFiles:j,alteracoes:n,getUpdatedValues:ve})};function ve(e,a){return Object.keys(a).forEach((function(t){a[t]&&e[t]&&("equipamentosId"!==t&&"acessibilidadeId"!==t||a[t].sort((function(e,a){return e-a})),a[t].toString()===e[t].toString()&&delete a[t]),""!==a[t]&&"null"!==a[t]&&a[t]||delete a[t]})),a}var he=t(103),be=function(e){if(e[0].size>3145728)return alert("Arquivo excedeu o limite permitido (3MB)"),!0},ge=function(e,a,t){var n=new FormData;if(e&&e[0]){if(be(e))return;return t.forEach((function(e){for(var t in a)t.match(e.name)&&a[e.name]&&n.set(e.name,a[e.name])})),{form:n}}},Ee=function(){var e=Object(w.a)(j.a.mark((function e(a){var t,n,r,o,i,l,c,s,d,u,m,p,f=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:{},o=f.length>2?f[2]:void 0,i=f.length>3?f[3]:void 0,!(a instanceof FormData)){e.next=12;break}s=new FormData,r.tempFile=!o,s.append("metadata",JSON.stringify(r)),d=Object(he.a)(a);try{for(d.s();!(u=d.n()).done;)m=u.value,s.set(m[0],m[1])}catch(v){d.e(v)}finally{d.f()}return e.next=11,F.a.post("/api/".concat(i),s);case 11:l=e.sent;case 12:if(!(null===(t=l)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.file)){e.next=18;break}return p=l.data.file,c=p.map((function(e){return e.id})),e.abrupt("return",c);case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Se=function(){var e=Object(w.a)(j.a.mark((function e(a,t){var n,r,o,i,l,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.files,r=a.demandFiles,o={tempFile:!1},(null===a||void 0===a?void 0:a.metadata)instanceof Object&&(o=Object.assign(a.metadata,o)),r&&r[0])i=r.map((function(e){return e.id}));else if(n instanceof FormData){l=Object(he.a)(n);try{for(s=function(){var e=c.value;r.forEach((function(a,t){var n;e[0]===(null===a||void 0===a||null===(n=a.metadata)||void 0===n?void 0:n.fieldName)&&r.splice(t,1)}))},l.s();!(c=l.n()).done;)s()}catch(d){l.e(d)}finally{l.f()}i=r.map((function(e){return e.id}))}return e.next=6,F.a.put("/api/updateFilesMetadata",{ids:i,collection:t,metadata:o}).then((function(e){return console.log(e.data)}));case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),xe=function(e,a){var t=new FormData;if(a instanceof FormData&&a.has(e)){var n,r=Object(he.a)(a);try{for(r.s();!(n=r.n()).done;){var o=n.value;t.set(o[0],o[1])}}catch(l){r.e(l)}finally{r.f()}t.delete(e);var i=Object(f.a)({fileToRemove:e,form:t},e,void 0);return Array.from(a.keys(),(function(e){return e})).length<=1&&(a.has("veiculoId")||a.has("empresaId"))?Object(f.a)({fileToRemove:void 0,form:void 0},e,void 0):i}},ye=t(19),Oe=t.n(ye),je=function(e,a){var t=document.querySelectorAll("p"),n=document.querySelectorAll("input"),r=[],o=[],i="Favor verificar o preenchimento dos seguintes campos: ";return t&&t.forEach((function(e){if("Valor inv\xe1lido"===e.textContent||"\u2718"===e.textContent){var a=e.parentNode.querySelectorAll("label");r.push(a[0])}})),n&&!a&&n.forEach((function(e){if("date"===e.type&&!Oe()(e.value,"YYYY-MM-DD",!0).isValid()){var a=e.parentNode.previousSibling;r.push(a)}})),r[0]?(r.forEach((function(e){return o.push(e.textContent)})),o.forEach((function(e){return i+=e+", "})),i=i.replace("(kg)","").replace("(cm)","").slice(0,-2)+".",e?{openAlertDialog:!0,alertType:"inputError",customMsg:i,errors:o}:o):null},we=function(e,a){var t;if(e)return(!a.errorHandler||!a.errorHandler(e))&&(!(!e||!a.errorHandler||a.errorHandler(e))||((null===(t=e)||void 0===t?void 0:t.length)<(null===a||void 0===a?void 0:a.minLength)||("number"===a.type?e>a.max||e<a.min:("string"!==typeof e&&(e=e.toString()),!!a.pattern&&null===e.match(a.pattern)))))},Ce=function(e,a){var t,n;if(e)return a.errorHandler&&a.errorHandler(e)?"\u2713":e&&a.errorHandler&&!a.errorHandler(e)||(null===(t=e)||void 0===t?void 0:t.length)<(null===a||void 0===a?void 0:a.minLength)?"\u2718":(null===(n=e)||void 0===n?void 0:n.length)>=(null===a||void 0===a?void 0:a.minLength)?"\u2713":("string"!==typeof e&&(e=e.toString()),e>a.max||e<a.min?"Valor inv\xe1lido":null===e.match(a.pattern)?"\u2718":a.pattern&&null!==e.match(a.pattern)?"\u2713":" ")},ke={collection:"logs",docs:"vehicleDocs",primaryKey:"veiculoId"},De=ke.collection,Ie=ke.docs,Ne=ke.primaryKey,Ae=[{subject:"Cadastro de ve\xedculo",path:"/solicitacoes/cadastro",requestAction:"Cadastro de ve\xedculo solicitado",responseAction:"Pend\xeancias para o cadastro do ve\xedculo",concludedAction:"Ve\xedculo cadastrado",collection:De,docs:Ie,primaryKey:Ne},{subject:"Reativa\xe7\xe3o de ve\xedculo",path:"/solicitacoes/cadastro",requestAction:"Reativa\xe7\xe3o de ve\xedculo solicitada",responseAction:"Pend\xeancias para a reativa\xe7\xe3o do ve\xedculo",concludedAction:"Ve\xedculo reativado",collection:De,docs:Ie,primaryKey:Ne},{subject:"Altera\xe7\xe3o de dados do ve\xedculo",path:"/solicitacoes/altDados",requestAction:"Altera\xe7\xe3o de dados de ve\xedculo solicitada",responseAction:"Pend\xeancias para a altera\xe7\xe3o de dados veicular",concludedAction:"Dados do ve\xedculo alterados",collection:De,docs:Ie,primaryKey:Ne},Object(h.a)(Object(h.a)({},ke),{},{subject:"Cadastro/altera\xe7\xe3o de seguro",path:"/solicitacoes/seguros",requestAction:"Cadastro de seguro solicitado",responseAction:"Pend\xeancias para o cadastro do seguro",concludedAction:"Seguro cadastrado",primaryKey:"id",collection:De,docs:Ie}),Object(h.a)(Object(h.a)({},ke),{},{subject:"Cadastro de laudo de seguran\xe7a veicular",collection:"logs",path:"/solicitacoes/laudos",requestAction:"Cadastro do laudo solicitado",responseAction:"Pend\xeancias para o cadastro do laudo",concludedAction:"Laudo veicular cadastrado"}),{subject:"Baixa de ve\xedculo",path:"/solicitacoes/baixaVeiculo",requestAction:"Baixa de ve\xedculo solicitada",collection:De,docs:Ie,primaryKey:Ne},{subject:"Configura\xe7\xf5es de Ve\xedculo",collection:"logs",path:"/veiculos/config"},{subject:"Consultas",path:"/consultas"},{subject:"Cadastro de empresa",collection:"empresaLogs",path:"/empresas/cadastro"},{subject:"Altera\xe7\xe3o no quadro/dados de s\xf3cios",requestAction:"Altera\xe7\xe3o no quadro/dados de s\xf3cios solicitada",concludedAction:"Altera\xe7\xe3o de s\xf3cios cadastrada",path:"/solicitacoes/socios",docs:"empresaDocs",primaryKey:"empresaId",collection:De},{subject:"Altera\xe7\xe3o estatut\xe1ria",requestAction:"Altera\xe7\xe3o estatut\xe1ria solicitada",responseAction:"Pend\xeancias para a altera\xe7\xe3o estatut\xe1ria",concludedAction:"Altera\xe7\xe3o estatut\xe1ria cadastrada",path:"/solicitacoes/altContrato",docs:"empresaDocs",primaryKey:"empresaId",collection:De},{subject:"Cadastro de procura\xe7\xf5es/procuradores",collection:De,path:"/solicitacoes/procuradores",docs:"empresaDocs",primaryKey:"empresaId",requestAction:"Cadastro de procura\xe7\xe3o solicitado",responseAction:"Procura\xe7\xe3o indeferida",concludedAction:"Procura\xe7\xe3o cadastrada"}];function Pe(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(w.a)(j.a.mark((function e(a){var t,n,r,o,i,l,c,s,d,u,m,p,f,v,h,b,g,E,S,x,y,O,w,C;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=window.location.pathname,l=(null===(t=Co.getState())||void 0===t||null===(n=t.user)||void 0===n?void 0:n.name)||"Usu\xe1rio n\xe3o identificado",(c=JSON.parse(JSON.stringify(Ae))).forEach((function(e,a){return e.path=Ae[a].path.replace("/veiculos","").replace("/solicitacoes","").replace("/empresas","")})),s="logs",d=null===a||void 0===a?void 0:a.historyLength,u={user:l,createdAt:new Date},m=c.find((function(e){return i.match(e.path)})),p=JSON.parse(JSON.stringify(a)),a.subject&&a.subject.match("Reativa\xe7\xe3o")&&(m=c.find((function(e){return e.subject===a.subject}))),f="vehicleDocs",v="vehicleUpload",a.veiculoId||(f="empresaDocs",v="empresaUpload"),h=Object.assign(a.history,u),p.history=h||{},(d||0===d)&&(d%2===0||0===d?((null===a||void 0===a||null===(b=a.history)||void 0===b?void 0:b.action)||(p.history.action=null===(g=m)||void 0===g?void 0:g.requestAction),p.status="Aguardando an\xe1lise"):((null===a||void 0===a||null===(E=a.history)||void 0===E?void 0:E.action)||(p.history.action=null===(S=m)||void 0===S?void 0:S.responseAction),p.status="Pend\xeancias")),(null===a||void 0===a?void 0:a.id)&&p.empresaId&&delete p.empresaId,(null===a||void 0===a?void 0:a.id)&&p.veiculoId&&delete p.veiculoId,delete p.historyLength,a.id&&!a.subject||(p.subject=(null===a||void 0===a?void 0:a.subject)||(null===(r=m)||void 0===r?void 0:r.subject)),!a.declined){e.next=21;break}return p.history.action="Solicita\xe7\xe3o indeferida",p.status="Solicita\xe7\xe3o indeferida",p.completed=!0,x=F.a.post("/api/logs",{log:p,collection:s}),e.abrupt("return",x);case 21:return a.approved&&!a.declined&&(p.history.action=(null===(y=m)||void 0===y?void 0:y.concludedAction)||"Solicita\xe7\xe3o conclu\xedda",p.status="Solicita\xe7\xe3o conclu\xedda",p.completed=!0,Se(a,f)),e.next=24,Ee(null===a||void 0===a||null===(o=a.history)||void 0===o?void 0:o.files,null===a||void 0===a?void 0:a.metadata,null===p||void 0===p?void 0:p.completed,v);case 24:return(O=e.sent)&&(p.history.files=O),p.metadata,p.approved,p.demandFiles,w=Object(Y.a)(p,["metadata","approved","demandFiles"]),c=JSON.parse(JSON.stringify(Ae)),m=c.find((function(e){return i.match(e.path)})),C=F.a.post("/api/logs",{log:w,collection:s}),e.abrupt("return",C);case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Te=t(16);function ze(e){var a=e.collection,t=void 0===a?[]:a,n=e.datalist,o=e.value,i=e.empresas;return(null===o||void 0===o?void 0:o.length)>2&&"string"!==typeof t?("razaoSocial"===n&&i&&i[0]&&(t=i),r.a.createElement("datalist",{id:n},t.map((function(e,a){return r.a.createElement("option",{key:a},e[n])})))):null}t(489);function Le(e){var a=Object(n.useState)(!0),t=Object(Te.a)(a,2),o=t[0],i=t[1],l=e.empresas,c=e.handleInput,s=e.handleBlur,d=e.shared,u=e.headerTitle,m=e.data,p=m.razaoSocial,f=m.delegatarioCompartilhado,v=m.activeStep,h=m.demand,b="razaoSocial",g=[{title:"Selecione a Via\xe7\xe3o",list:b,name:b,value:p}];return d&&g.push({title:"Empresa autorizada a compartilhar",list:b,name:"delegatarioCompartilhado",value:f}),Object(n.useEffect)((function(){h||v>0?i(!1):0===v&&i(!0);var e=document.getElementsByName("razaoSocial");o&&e[0]&&e[0].focus()}),[h,v,o]),o?r.a.createElement("div",{className:e.hasOwnProperty("shared")?"flex center":"paper flex center",style:{width:"100%",marginBottom:0}},g.map((function(e,a){var t=e.title,n=e.list,o=e.name,i=e.value;return r.a.createElement("div",{className:"flexColumn",key:a},r.a.createElement("h4",{style:{margin:"5px 0",textAlign:"center"}},t),r.a.createElement("input",{list:n,name:o,className:"selectEmpresa",value:i,onChange:c,onBlur:s}),r.a.createElement(ze,{collection:l,datalist:n,value:i}))}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"selectedEmpresa"}," ",u||(null===h||void 0===h?void 0:h.empresa)||""," "))}var Me=t(373),qe=t(372),Ve=Object(Z.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"1px",marginBottom:"1px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},select:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"2px",marginBottom:"2px",background:"#fafafa",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},helperText:{margin:"2px 0",fontSize:"0.7rem"}}}));function _e(e){var a=e.handleInput,t=e.handleBlur,o=e.form,i=e.data,l=e.empresas,c=e.selectOptions,s=e.disableAll,d=e.style,u=void 0===d?{}:d,m=e.disableSome,p=void 0===m?[]:m,f=Ve(),v=f.helperText,b=function(e){var a,t=i[e.field];if(t)return(!e.errorHandler||!e.errorHandler(t))&&(!(!t||!e.errorHandler||e.errorHandler(t))||((null===(a=t)||void 0===a?void 0:a.length)<(null===e||void 0===e?void 0:e.minLength)||("number"===e.type?t>e.max||t<e.min:("string"!==typeof t&&(t=t.toString()),!!e.pattern&&null===t.match(e.pattern)))))},g=function(e){var a,t,n=i[e.field];return n?e.errorHandler&&e.errorHandler(n)?"\u2713":n&&e.errorHandler&&!e.errorHandler(n)||(null===(a=n)||void 0===a?void 0:a.length)<(null===e||void 0===e?void 0:e.minLength)?"\u2718":(null===(t=n)||void 0===t?void 0:t.length)>=(null===e||void 0===e?void 0:e.minLength)?"\u2713":("string"!==typeof n&&(n=n.toString()),n>e.max||n<e.min?"Valor inv\xe1lido":null===n.match(e.pattern)?"\u2718":e.pattern&&null!==n.match(e.pattern)?"\u2713":" "):" "};return r.a.createElement("div",{className:"flex center",style:Object(h.a)({},u)},o.map((function(e,o){return r.a.createElement(n.Fragment,{key:o},r.a.createElement(qe.a,{name:e.field,label:e.label,margin:e.margin,className:f.textField,onChange:a,onBlur:t,type:e.type||"",error:b(e),helperText:g(e),FormHelperTextProps:{className:v},select:e.select||!1,value:i[e.field]||"",disabled:e.disabled||s||p.includes(e.field)||!1,InputLabelProps:{className:f.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"}},inputProps:{style:{background:e.disabled&&i.disable?"#fff":"#fafafa",fontSize:"0.85rem",textAlign:"center",color:"#000",width:e.width||300,height:"7px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"},value:"".concat(i[e.field]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1,SelectProps:{style:{background:e.disabled&&i.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#555",fontWeight:400,width:325,height:"44px"}}},!0===e.select?c?c.map((function(e,a){return r.a.createElement(Me.a,{key:a,value:e},e)})):e.options.map((function(e,a){return r.a.createElement(Me.a,{key:a,value:e},e)})):null),!0===e.autoComplete&&r.a.createElement(ze,{collection:i[e.collection],empresas:l,datalist:e.datalist,value:i[e.field]||""}))})))}function Be(e){var a=e.subtitle,t=e.style,n=void 0===t?{}:t;return r.a.createElement("div",{className:"subtitle",style:n},r.a.createElement("i",{className:"material-icons subtitle__helper"},"arrow_forward"),r.a.createElement("span",{className:"subtitle__text"},a))}var Re=t(404),Ue=t(375),Ye=t(376),He=t(63),Ke=t.n(He),Je=[{field:"cilindros",label:"Cilindros",margin:"normal",type:"number",max:12,step:1},{field:"potencia",label:"Pot\xeancia (cv)",margin:"normal",type:"number",max:600},{field:"eixos",label:"Eixos",margin:"normal",type:"number",max:8},{field:"pneumaticos",label:"Pneum\xe1ticos",margin:"normal",type:"number",max:20},{field:"pesoDianteiro",label:"Peso Dianteiro (kg)",margin:"normal",type:"number",max:12e3},{field:"pesoTraseiro",label:"Peso Traseiro (kg)",margin:"normal",type:"number",max:15e3},{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piquesPoltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150}],We=[[{field:"placa",label:"Placa",margin:"normal",maxLength:8,pattern:"[a-zA-Z]{3}[-]?[ ]?\\d{4}|[A-Z]{3}[-]?[ ]?[0-9]{1}[A-Z]{1}[0-9]{2}"},{field:"renavam",label:"Renavam",margin:"normal",maxLength:11,pattern:/^(\d{9}|\d{11})$/},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Convencional","Executivo","Leito","Semi-Leito","Urbano"]},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",datalist:"modeloChassi",autoComplete:!0,collection:"modelosChassi"},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",max:Number((new Date).getFullYear())},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",datalist:"modelo",autoComplete:!0,collection:"carrocerias"},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",max:Number((new Date).getFullYear()+1)},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50}]].concat([Je]);function $e(e){var a=e.close,t=e.title,n=void 0===t?"Fechar":t;return r.a.createElement("div",{style:{position:"absolute",top:"0.4%",right:"0.4%"}},r.a.createElement("div",null,r.a.createElement("i",{className:"material-icons right",title:n,style:{cursor:"pointer",color:"red"},onClick:a},"close")))}t(374);function Ge(e){var a,t=e.data,n=e.type,o=e.equipamentos,i=e.handleCheck,l=e.close;return Array.isArray(o)&&(null===(a=o[0])||void 0===a?void 0:a.item)&&(o=o.sort((function(e,a){return e.item.localeCompare(a.item)}))),r.a.createElement("div",{className:"popUpWindow",style:{right:"25%",left:"25%"}},r.a.createElement("h4",{className:"equipaHeader"},"equipamentos"===n?"Equipamentos":"Itens de Acessibilidade")," ",r.a.createElement("hr",null),r.a.createElement("div",{className:"checkListContainer"},o.map((function(e,a){return r.a.createElement("span",{className:"checkListEquipa",key:a},r.a.createElement(Ue.a,{control:r.a.createElement(Re.a,{checked:t[e.item],value:e.item,onChange:function(){return i(e.item,n)}}),label:r.a.createElement("p",{className:"checkListLabel"},e.item)}))}))),r.a.createElement($e,{close:l}))}var Ze=Object(Z.a)((function(e){return{button:{marginRight:"15px"}}})),Xe=function(e){var a=e.redux,t=e.data,o=e.handleInput,i=e.handleBlur,l=e.handleEquipa,c=e.handleCheck,s=e.closeEquipa,d=e.resetShared,u=Object(n.useState)(!1),m=Object(Te.a)(u,2),p=m[0],f=m[1],v=Ze().button,h=a.empresas,b=a.equipamentos,g=a.acessibilidade,E=a.modelosChassi,S=a.carrocerias,x=t.activeStep,y=t.addEquipa,O=t.subtitle,j=t.selectedEmpresa,w=t.type,C=t.placa,k=t.reactivated,D=We[x],I=b;"acessibilidade"===w&&(I=g),t.modelosChassi=E,t.carrocerias=S,Object(n.useEffect)((function(){d&&f(!1)}),[d]);var N=O[x];return k&&(N+=" (reativa\xe7\xe3o de ve\xedculo)"),r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:0!==x?"flex center":"paper flex center",style:{width:"100%"}},r.a.createElement("section",{className:"flexColumn",style:{marginBottom:"10px"}},r.a.createElement(Le,{data:t,shared:p,empresas:h,headerTitle:C&&j&&"Cadastro de ve\xedculo ".concat(C," - ").concat(null===j||void 0===j?void 0:j.razaoSocial),handleBlur:i,handleInput:o})),0===x&&r.a.createElement("section",{className:"flex center",style:{width:"100%",margin:"-7px 0 -4px 0"}},r.a.createElement(Ue.a,{control:r.a.createElement(Re.a,{checked:!0===p,onChange:function(){return f(!p)},value:p}),label:r.a.createElement("h4",{style:{color:"#2979ff",fontSize:"0.7rem"}},"Ve\xedculo Compartilhado?")}))),j&&r.a.createElement("main",null,x<2&&r.a.createElement("section",{className:"paper",style:{paddingBottom:"25px"}},r.a.createElement(Be,{subtitle:N}),r.a.createElement(_e,{form:D,data:t,handleBlur:i,handleInput:o})),0===x&&r.a.createElement("section",{className:"flex center",style:{marginTop:"15px"}},r.a.createElement(Ye.a,{variant:"outlined",size:"small",color:"primary",className:v,onClick:function(){return l("equipamentos")}},r.a.createElement(Ke.a,null),"Equipamentos"),r.a.createElement(Ye.a,{variant:"outlined",size:"small",color:"primary",className:v,onClick:function(){return l("acessibilidade")}},r.a.createElement(Ke.a,null),"Acessibilidade")),y&&r.a.createElement(Ge,{equipamentos:I,close:s,handleCheck:c,data:t})))},Qe=t(425),ea=t(417),aa=t.n(ea),ta=t(416),na=t.n(ta);function ra(e){var a=e.name,t=e.removeFile;return r.a.createElement("div",{style:{position:"absolute",top:"0.4%",right:"0.4%"}},r.a.createElement("div",null,r.a.createElement("i",{className:"material-icons right",title:"Remover arquivo",style:{cursor:"pointer",color:"red"},onClick:function(){return t(a)}},"close")))}function oa(e){var a=e.title,t=e.name,o=e.formData,i=e.handleFiles,l=e.dropDisplay,c=e.single,s=e.style,d=e.demandFiles,u=e.fileToRemove,m=e.removeFile,p=Object(n.useState)(),f=Object(Te.a)(p,2),v=f[0],h=f[1],b=Object(n.useState)(),g=Object(Te.a)(b,2),E=g[0],S=g[1];return Object(n.useEffect)((function(){d&&d[0]&&d.forEach((function(e){var a=e.filename,n=e.metadata;t===n.fieldName&&(h(a),S(!0))}))}),[d,t]),Object(n.useEffect)((function(){if(o instanceof FormData){var e,a=Object(he.a)(o.entries());try{for(a.s();!(e=a.n()).done;){var n=e.value;t===n[0]&&(h(n[1].name),S(!1))}}catch(r){a.e(r)}finally{a.f()}}else o||d||h(null)}),[o,t,d,u]),Object(n.useEffect)((function(){if(u===t){var e=null===d||void 0===d?void 0:d.find((function(e){var a;return(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.fieldName)===u}));u&&e?(h(e.filename),S(!0)):u&&u===t&&h(void 0)}}),[d,u,i,t]),r.a.createElement("div",{style:s||null},r.a.createElement("div",{style:{position:"relative",marginRight:"8px"}},a?r.a.createElement("p",{className:"fileInput"},a||""):r.a.createElement("br",null),v&&!E&&r.a.createElement(ra,{removeFile:m,name:t})),r.a.createElement(Qe.a,{onDrop:function(e){return i(e,t)}},(function(e){var a=e.getRootProps,t=e.getInputProps;return r.a.createElement("div",Object.assign({style:E?{backgroundColor:"#aaa"}:{},className:v?"dropBox fileAttached":c?"dropBox":"multipleDropBox"},a()),r.a.createElement("input",t()),v?r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(na.a,{className:"icon"}),v),c&&r.a.createElement("span",null,"(clique ou arraste outro arquivo para alterar)")):r.a.createElement("div",null," ",r.a.createElement(aa.a,{className:"icon"}),r.a.createElement("span",null,"  ",l)))})))}var ia=t(581),la=[{title:"CRLV do Ve\xedculo",name:"crlv"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"DAE Quitada",name:"dae"},{title:"Laudo de Pesagem",name:"pesagem"}],ca=[{title:"Documento de Transfer\xeancia",name:"transferenciaDoc"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"DAE Quitada",name:"dae"},{title:"Laudo de Pesagem",name:"pesagem"},{title:"CRLV com nova placa",name:"newPlateDoc"}],sa=Object(Z.a)((function(e){return{root:{flexGrow:"1",margin:"5px",padding:"8px"},sendButton:{margin:"3% 0 3% 0",backgroundColor:"teal",float:"right"},text:{textAlign:"left",margin:e.spacing(2),fontSize:"0.9rem",fontWeight:"500",color:"#333"},item:{margin:"0 0 18px 0",padding:"0 5px"}}}));function da(e){var a,t=e.handleFiles,o=e.parentComponent,i=e.dropDisplay,l=e.formData,c=e.insuranceExists,s=e.demandFiles,d=e.removeFile,u=e.fileToRemove,m=sa(),p=m.root,f=m.item;return"cadastro"===o&&(a=la),"altDados"===o&&(a=ca),r.a.createElement("div",{className:"paper",style:{color:"#555"}},r.a.createElement(Be,{subtitle:"Anexe os documentos solicitados nos campos abaixo"}),r.a.createElement(ia.a,{container:!0,className:p},a.map((function(e,a){var o=e.title,m=e.name;return"apoliceDoc"===m&&c?null:r.a.createElement(n.Fragment,{key:a},r.a.createElement(ia.a,{item:!0,xs:10,md:4,className:f},r.a.createElement(oa,{title:o,name:m,formData:l,dropDisplay:i,handleFiles:t,demandFiles:s,removeFile:d,fileToRemove:u})))}))))}var ua=t(232),ma=t.n(ua),pa=t(231),fa=t.n(pa),va=function(e,a,t,n){n&&"apoliceDoc"===n&&(t="empresaDocs"),F()({url:"/api/mongoDownload/?collection=".concat(t,"&id=").concat(e),method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download",a),document.body.appendChild(n),n.click()})).catch((function(e){console.log(e)}))},ha={display:"flex",justifyContent:"center",width:"100%",alignContent:"center",flexWrap:"wrap"},ba={textAlign:"center",alignItems:"flex-start",height:"40px",border:"1px #ccc solid",padding:"7px 8px 0 8px",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px"},ga={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},Ea={verticalAlign:"middle",padding:"0 0% 0 2%"};function Sa(e){var a=e.form,t=e.files,n=(e.demand,e.demandFiles),o=e.collection,i=e.style,l=void 0===i?{}:i,c=[];if(n&&n.forEach((function(e){a.forEach((function(a){var t,n=a.name,r=a.title;(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.fieldName)===n&&c.push({id:e.id,label:r,fieldName:n,fileName:e.filename,storage:"server"})}))})),t){var s,d=Object(he.a)(t.entries());try{var u=function(){var e=s.value;a.forEach((function(a){var t=a.name,n=a.title;if(t===e[0]&&e[1]&&e[1].name){var r=c.findIndex((function(e){return(null===e||void 0===e?void 0:e.fieldName)===t}));-1!==r?c[r]={label:n,fieldName:t,fileName:e[1].name,storage:"local"}:c.push({label:n,fieldName:t,fileName:e[1].name,storage:"local"})}}))};for(d.s();!(s=d.n()).done;)u()}catch(m){d.e(m)}finally{d.f()}}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:ha},c.map((function(e,a){return r.a.createElement("div",{style:Object(h.a)(Object(h.a)({},ba),l),key:a},r.a.createElement(fa.a,{style:Ea}),r.a.createElement("span",{style:{verticalAlign:"middle"}}," "," ",e.label),r.a.createElement(ma.a,{style:ga,onClick:function(){return"local"===e.storage?function(e,a){var n=t.get(e),r=window.URL.createObjectURL(n),o=document.createElement("a");o.href=r,n&&("application/pdf"===n.type||n.type.match("image/"))?(o.setAttribute("rel","noopener"),o.setAttribute("target","_blank"),o.setAttribute("title",a)):o.setAttribute("download",a),document.body.appendChild(o),o.click()}(e.fieldName,e.fileName):va(e.id,e.fileName,o,e.fieldName)}}))}))))}function xa(e){var a=e.length,t=e.title,n=e.labels,o=e.fields,i=e.values,l=e.style,c=e.docs,s=e.alteredElements,d=void 0===s?[]:s;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",style:l,colSpan:a},t)),r.a.createElement("tr",null,n.map((function(e,a){return r.a.createElement("th",{key:a,style:l},e)})))),r.a.createElement("tbody",null,r.a.createElement("tr",null,i.map((function(e,a){return r.a.createElement("td",{className:"review",key:a,style:Object(h.a)(Object(h.a)({},l),{},{color:d.includes(o[a])?"red":"#000"}),onClick:function(){return c&&c.id?va(c.id,c.filename,"vehicleDocs",c.metadata.fieldName):null}},(t=e,Oe()(t,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?Oe()(t,Oe.a.ISO_8601,!0).format("DD/MM/YYYY"):t));var t})))))}var ya=t(154),Oa=t(118),ja=t.n(Oa),wa=Object(Z.a)((function(e){return{paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 5px 0",height:"auto"}}}));function Ca(e){var a,t=e.data,o=e.parentComponent,i=e.form,l=e.filesForm,c=e.files,s=wa().paper,d=t.acessibilidade,u=t.equipamentos,m=t.alteracoes,p=t.demand,v=t.demandFiles,h=null===t||void 0===t?void 0:t.originalVehicle,b=[],g={},E=[],S=[],x=[];return i.forEach((function(e){e.forEach((function(e){t.hasOwnProperty([e.field])&&(Object.assign(g,Object(f.a)({},e.field,t[e.field])),E.push(e))})),b.push(g),S.push(E),g={},E=[]})),"cadastro"===o&&(a=[{subtitle:"Detalhes do ve\xedculo",form:S[0]||[],data:b[0]},{subtitle:"Detalhes do seguro",form:S[1]||[],data:b[1]},{subtitle:"Informa\xe7\xf5es sobre a vistoria",form:S[2]||[],data:b[2]}]),"altDados"===o&&(a=[{subtitle:"Detalhes do ve\xedculo",form:S[0],data:b[0]},{subtitle:"Informa\xe7\xf5es sobre a vistoria",form:S[1],data:b[1]}]),m&&"object"===typeof m&&(x=Object.keys(m)),h&&Object.keys(h).forEach((function(e){t[e]&&h[e]&&(t[e]===h[e]||x.includes(e)||x.push(e))})),r.a.createElement(r.a.Fragment,null,r.a.createElement(ya.a,{className:s},r.a.createElement("main",{className:"divTable"},a.map((function(e,a){var t=e.subtitle,o=e.form,i=e.data;return o&&i&&r.a.createElement(n.Fragment,{key:a},r.a.createElement(xa,{length:(null===o||void 0===o?void 0:o.length)||1,title:t,labels:o.map((function(e){return e.label})),fields:o.map((function(e){return e.field})),values:Object.values(i),alteredElements:x}))}))),u&&u[0]&&r.a.createElement("section",{style:{margin:"0 0 13px 20px"}},r.a.createElement("p",{style:{fontWeight:500,color:"#555"}}," Equipamentos "),r.a.createElement("p",null,u&&u.map((function(e,a){return r.a.createElement("span",{style:{fontFamily:"Segoe UI, Tahoma, Geneva, Verdana",fontSize:"12px"},key:a},a!==u.length-1?e+", ":e)})))),d&&d[0]&&r.a.createElement("section",{style:{margin:"0 0 13px 20px"}},r.a.createElement("p",{style:{fontWeight:500,color:"#555"}}," Itens de acessibilidade "),r.a.createElement("p",null,d.map((function(e,a){return r.a.createElement("span",{style:{fontFamily:"Segoe UI, Tahoma, Geneva, Verdana",fontSize:"12px"},key:a},a!==d.length-1?e+", ":e)})))),(c||v)&&r.a.createElement("div",null,r.a.createElement("p",{style:{margin:"0 0 13px 11px",fontWeight:"500",color:"#555"}},r.a.createElement(ja.a,{style:{verticalAlign:"middle",padding:"0 0 0 8px"}})," Documentos"),r.a.createElement(Sa,{demand:p,collection:"vehicleDocs",demandFiles:v,form:l,files:c}))))}var ka=t(600),Da=t(418),Ia=t.n(Da);function Na(e){var a=e.links,t=e.text,n=e.demand;return n&&(a=["Solicita\xe7\xf5es","/solicitacoes"],t="solicita\xe7\xe3o n\xba ".concat(null===n||void 0===n?void 0:n.numero)),r.a.createElement(ia.a,{style:{marginTop:"1%"}},r.a.createElement(ka.a,{separator:"\u203a","aria-label":"breadcrumb"},r.a.createElement(x.b,{to:"/",style:{}},r.a.createElement(Ia.a,{style:{verticalAlign:"middle",marginRight:"5px",paddingBottom:"3px"}}),r.a.createElement("span",{style:{fontSize:"0.8rem"}},"P\xe1gina inicial")),r.a.createElement(x.b,{color:"primary",to:a[1],style:{fontSize:"0.8rem"}},a[0]),r.a.createElement("span",{style:{fontSize:"0.8rem"}},t)))}var Aa=Object(Z.a)((function(e){return{button:{margin:e.spacing(1),float:"right"},backButton:{margin:e.spacing(1),float:"left",color:"#333",backgroundColor:"#eee"},textField:{marginTop:"20px",width:"100%"}}}));function Pa(e){var a,t=e.activeStep,o=e.setActiveStep,i=e.lastStep,l=e.handleSubmit,c=e.disabled,s=e.demand,d=e.uniqueStep,u=e.declineButtonLabel,m=e.setShowPendencias,p=e.showPendencias,f=e.handleInput,v=e.info,h=Aa(),b=h.backButton,g=h.button,E=h.textField;return(null===s||void 0===s?void 0:s.status.match("Pend\xeancias"))&&(a="empresa"),(null===s||void 0===s?void 0:s.status.match("Aguardando"))&&(a="seinfra"),Object(n.useEffect)((function(){function e(e){37===e.keyCode&&e.ctrlKey&&0!==t&&o("back"),39===e.keyCode&&e.ctrlKey&&t!==i&&o("next"),13===e.keyCode&&e.ctrlKey&&l()}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}})),r.a.createElement("div",{style:{width:"100%"}},t<i?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{variant:"contained",className:b,title:0!==t?"Ctrl + \u2190":null,onClick:function(){return o("back")},disabled:0===t},"Voltar"),r.a.createElement(Ye.a,{variant:"contained",color:"primary",title:c?null:"Ctrl + \u2192",className:g,onClick:function(){return o("next")},disabled:c},"Avan\xe7ar")):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},"seinfra"!==a||p?r.a.createElement(qe.a,{name:"info",className:E,value:v,label:s&&"empresa"!==a?s&&d?"Motivos para o indeferimento":"Pend\xeancias/irregularidades para a aprova\xe7\xe3o":"Observa\xe7\xf5es/informa\xe7\xf5es complementares",type:"text",onChange:f,InputLabelProps:{shrink:!0,style:{fontWeight:600,marginBottom:"5%"}},inputProps:{style:{paddingBottom:"2%"},maxLength:600},multiline:!0,rows:3,variant:"outlined"}):null,r.a.createElement("div",{style:{display:"flex",width:"100%"}},t===i&&!d&&r.a.createElement(Ye.a,{variant:"contained",className:b,title:0!==t?"Ctrl + \u2190":null,onClick:function(){return o("back")},disabled:0===t},"Voltar"),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%"}},s&&"empresa"!==a?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{variant:"outlined",color:"secondary",className:g,onClick:function(){return m()}},p?"Cancelar":u||"Registrar pendencias"),r.a.createElement(Ye.a,{variant:"contained",color:p?"secondary":"primary",className:g,onClick:function(){return l(!p)}},p?"Indeferir":"Aprovar")):r.a.createElement(Ye.a,{variant:"contained",color:"primary",className:g,onClick:function(){return l()}},"Enviar solicita\xe7\xe3o")))))}var Fa=t(582),Ta=t(583),za=t(584);function La(e){var a=e.activeStep,t=e.steps;return r.a.createElement("div",{className:"paper",style:{padding:"15px",margin:"10px 0"}},r.a.createElement(Fa.a,{activeStep:a},t.map((function(e,a){var t={};return r.a.createElement(Ta.a,Object.assign({key:e},{}),r.a.createElement(za.a,t,e))}))))}var Ma=function(e,a){if(/\d/.test(e)){var t=new Date(e).getDate()+"/"+(new Date(e).getMonth()+1)+"/"+new Date(e).getFullYear();return a&&(t+=", "+new Date(e).getHours()+":"+(new Date(e).getMinutes()<10?"0"+new Date(e).getMinutes():new Date(e).getMinutes())+"h"),t.toString()}return e},qa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.replace(/\D/g,"");return a=(a=(a=(a=(a/100).toFixed(2)+"").replace(".",",")).replace(/(\d)(\d{3})(\d{3}),/g,"$1.$2.$3,")).replace(/(\d)(\d{3}),/g,"$1.$2,")};var Va=t(585),_a=t(589),Ba=t(587),Ra=t(588),Ua=t(586);function Ya(e){var a=e.open,t=e.alertType,n=e.close,o=e.confirm,i=e.customTitle,l=e.customMessage,c=e.tab,s=function(e){var a="";if((c||0===c)&&(a=["a empresa","o s\xf3cio","a procura\xe7\xe3o","o ve\xedculo","o seguro"][c]),i&&l)return{title:i,message:l};switch(e){case"plateNotFound":return{title:"Placa n\xe3o encontrada",message:'A placa informada n\xe3o corresponde a nenhum ve\xedculo da frota da via\xe7\xe3o selecionada. Para cadastrar um novo ve\xedculo, selecione a op\xe7\xe3o Ve\xedculos => "Cadastro de Ve\xedculo" no menu acima.'};case"invalidPlate":return{title:"Placa inv\xe1lida",message:"Certifique-se de que a placa informada \xe9 uma placa v\xe1lida, com tr\xeas letras seguidas de 4 n\xfameros (ex: AAA-0000)"};case"plateExists":return{title:"Placa j\xe1 cadastrada!",message:"A placa informada j\xe1 est\xe1 cadastrada. Para atualizar seguro, alterar dados ou solicitar baixa, utilize as op\xe7\xf5es acima. "};case"invalidModel":return{title:"Modelo n\xe3o cadastrado.",message:l};case"inputError":return{title:"Preenchimento inv\xe1lido.",message:l};case"fieldsMissing":return{title:"Favor preencher todos os campos.",message:"Os campos acima s\xe3o de preenchimento obrigat\xf3rio. Certifique-se de ter preenchido todos eles."};case"invalidInsurance":return{title:"Favor verificar os dados do seguro.",message:"As informa\xe7\xf5es referentes ao seguro do ve\xedculo s\xe3o obrigat\xf3rias. Certifique-se de ter informado todas elas."};case"filesNotFound":return{title:"Arquivos n\xe3o encontrados",message:"N\xe3o h\xe1 nenhum documento aprovado no sistema para ".concat(a," selecionad").concat(a.charAt(0),".\n          Caso haja uma solicita\xe7\xe3o em aberto para ").concat(a,', acesse a op\xe7\xe3o "Solicita\xe7\xf5es" no menu superior para ter acesso aos arquivos.')};case"empresaNotFound":return{title:"Empresa n\xe3o encontrada.",message:"A empresa informada n\xe3o est\xe1 registrada no sistema. Para cadastrar uma nova empresa, utilize a op\xe7\xe3o Empresas -> Cadastrar."};case"seguradoraNotFound":return{title:"Seguradora n\xe3o encontrada.",message:"A seguradora informada n\xe3o est\xe1 registrada no sistema. Favor verificar o nome da seguradora."};case"alreadyExists":return{title:"CPF j\xe1 cadastrado.",message:"O CPF informado corresponde a um s\xf3cio j\xe1 cadastrado. \n          Para remover ou editar as informa\xe7\xf5es dos s\xf3cios, utilize a respectiva op\xe7\xe3o abaixo."};case"numberNotValid":return{title:"N\xfamero inv\xe1lido.",message:"O n\xfamero digitado n\xe3o \xe9 v\xe1lido."};case"overShared":return{title:"Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",message:"A participa\xe7\xe3o societ\xe1ria informada excede a 100%."};case"subShared":return{title:"Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",message:"A participa\xe7\xe3o societ\xe1ria informada n\xe3o soma 100%. Favor informar todos os s\xf3cios com suas respectivas participa\xe7\xf5es."};case"veiculoPendente":return{title:"Pend\xeancias encontradas para este ve\xedculo.",message:"Verifique se h\xe1 alguma aprova\xe7\xe3o pendente quanto ao cadastro, seguro, transfer\xeancia ou altera\xe7\xe3o de dados do ve\xedculo."};case"seguroVencido":return{title:"Pend\xeancias encontradas para o seguro deste ve\xedculo.",message:"Para regularizar o seguro deste ve\xedculo, acesse a op\xe7\xe3o Ve\xedculos=>Seguros no menu acima."};case"contratoVencido":return{title:"Contrato expirado.",message:"O contrato de concess\xe3o com o delegat\xe1rio selecionado est\xe1 expirado."};default:return{title:null,message:null}}}(t),d=s.title,u=s.message;return d&&u?r.a.createElement("div",null,r.a.createElement(Va.a,{open:a,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Ua.a,{id:"alert-dialog-title"},d),r.a.createElement(Ba.a,null,r.a.createElement(Ra.a,{id:"alert-dialog-description"},u)),r.a.createElement(_a.a,null,r.a.createElement(Ye.a,{onClick:n,color:"primary"},o?"Cancelar":"Fechar"),o&&r.a.createElement(Ye.a,{onClick:n,color:"primary",autoFocus:!0},"Confirmar")))):null}var Ha=function(e,a,t){var n,r;return t[e=A.a.camelize(e)]&&a&&""!==a&&(a=Number(a),n=(r=t[e])<=a),!n&&(r?'A dist\xe2ncia m\xednima para a utiliza\xe7\xe3o "'.concat(e,'" \xe9 de ').concat(r,' cent\xedmetros. Altere a dist\xe2ncia ou clique em "voltar" para alterar a utiliza\xe7\xe3o.'):void 0)},Ka=[{field:"veiculoId",label:"N\xfamero"},{field:"placa",label:"Placa"},{field:"renavam",label:"RENAVAM"},{field:"utilizacao",label:"Utiliza\xe7\xe3o"},{field:"codigoEmpresa",label:"C\xf3digo"},{field:"empresa",label:"Delegat\xe1rio"},{field:"dataRegistro",label:"Data de Registro"},{field:"situacao",label:"Situa\xe7\xe3o"},{field:"dataBaixa",label:"Data baixa"},{field:"nChassi",label:"N\xfamero chassi"},{field:"marcaChassi",label:"Marca chassi"},{field:"modeloChassi",label:"Modelo chassi"},{field:"anoChassi",label:"Ano chassi"},{field:"valorChassi",label:"Valor Chassi"},{field:"marcaCarroceria",label:"Marca carroceria"},{field:"modeloCarroceria",label:"Modelo carroceria"},{field:"anoCarroceria",label:"Ano carroceria"},{field:"indicadorIdade",label:"Indicador de Idade"},{field:"valorCarroceria",label:"Valor carroceria"},{field:"dominio",label:"Leasing"},{field:"delegatarioCompartilhado",label:"Empresas autorizadas a compartilhar"},{field:"cores",label:"Cores"},{field:"seguradora",label:"Seguradora"},{field:"apolice",label:"Ap\xf3lice"},{field:"dataEmissao",label:"Data Inicio"},{field:"vencimento",label:"Data Fim"},{field:"empresaLaudo",label:"Empresa Laudo"},{field:"numeroLaudo",label:"N\xfamero Laudo"},{field:"validade",label:"Validade Laudo"},{field:"cilindros",label:"Cilindros"},{field:"potencia",label:"Pot\xeancia"},{field:"eixos",label:"Eixos"},{field:"pneumaticos",label:"Pneum\xe1ticos"},{field:"pesoDianteiro",label:"Peso Dianteiro"},{field:"pesoTraseiro",label:"Peso Traseiro"},{field:"pbt",label:"PBT"},{field:"poltronas",label:"Poltronas"},{field:"piquesPoltrona",label:"Piques Poltrona"},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima"},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima"},{field:"equipamentos",label:"Equipamentos"},{field:"acessibilidade",label:"Acessibilidade"},{field:"sipro",label:"SIPRO"},{field:"obs",label:"Observa\xe7\xe3o"}],Ja=ce(["veiculos","empresas","modelosChassi","carrocerias","equipamentos","acessibilidade","getFiles/vehicleDocs","parametros"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={activeStep:0,steps:["Dados do Ve\xedculo","Vistoria e laudos","Documentos","Revis\xe3o"],subtitle:["Informe os dados do ve\xedculo.","Preencha os campos abaixo conforme a vistoria realizada"],razaoSocial:"",frota:[],delegatarioCompartilhado:"",toastMsg:"Ve\xedculo cadastrado!",confirmToast:!1,addEquipa:!1,openAlertDialog:!1,dropDisplay:"Clique ou arraste para anexar"},e.setActiveStep=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==e.state.activeStep){a.next=7;break}if(!e.state.frota.filter((function(a){return a.placa===e.state.placa}))[0]){a.next=7;break}return a.next=5,e.setState({placa:""});case 5:return e.setState({alertType:"plateExists",openAlertDialog:!0}),a.abrupt("return",null);case 7:if(!(n=e.state.errors)||!n[0]){a.next=12;break}return a.next=11,e.setState(Object(h.a)(Object(h.a)({},e.state),je("setState")));case 11:return a.abrupt("return");case 12:r=e.state.activeStep,"next"===t&&e.setState({activeStep:r+1}),"back"===t&&e.setState({activeStep:r-1}),"reset"===t&&e.setState({activeStep:0});case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.props.redux,r=n.veiculos,o=n.empresas,i=t.target.name,l=t.target.value,e.setState(Object(f.a)({},i,l)),a.t0=i,a.next="razaoSocial"===a.t0?6:"placa"===a.t0?18:"valorChassi"===a.t0?23:"valorCarroceria"===a.t0?25:27;break;case 6:if(!(c=o.find((function(e){return e.razaoSocial===l})))){a.next=16;break}return s=c.razaoSocial,d=c.codigoEmpresa,a.next=11,e.setState({selectedEmpresa:c,razaoSocial:s,codigoEmpresa:d});case 11:l!==c.razaoSocial&&e.setState({selectedEmpresa:void 0}),u=r.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:u}),a.next=17;break;case 16:e.setState({selectedEmpresa:void 0,frota:[],placa:void 0});case 17:return a.abrupt("break",28);case 18:if("string"!==typeof l){a.next=22;break}return l=l.toLocaleUpperCase(),a.next=22,e.setState(Object(f.a)({},i,l));case 22:return a.abrupt("break",28);case 23:case 25:return e.setState(Object(f.a)({},i,qa(l))),a.abrupt("break",28);case 27:case 28:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.checkValid=function(){var a=Object(w.a)(j.a.mark((function a(t,n,r,o,i,l,c){var s,d,u,m,p,v;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(d=r.filter((function(e){return e[i].toLowerCase().match(n.toLowerCase())})),""===n&&e.setState((s={},Object(f.a)(s,t,""),Object(f.a)(s,o,""),s)),!d[0]){a.next=10;break}if(u=d[0][i],m=d[0][l],""===n){a.next=8;break}return a.next=8,e.setState((p={},Object(f.a)(p,t,u),Object(f.a)(p,o,m),p));case 8:a.next=14;break;case 10:return a.next=12,e.setState((v={},Object(f.a)(v,t,""),Object(f.a)(v,o,""),v));case 12:e.setState({alertType:"invalidModel",openAlertDialog:!0,customTitle:"Modelo inv\xe1lido.",customMsg:"O modelo de ".concat(c," n\xe3o est\xe1 cadastrado no sistema.")}),document.getElementsByName(t)[0].focus();case 14:case"end":return a.stop()}}),a)})));return function(e,t,n,r,o,i,l){return a.apply(this,arguments)}}(),e.handleBlur=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f,v,h,b,g,E,S,x,y,O,w,C,k,D,I,N,A,P;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.props.redux,r=n.empresas,o=n.modelosChassi,i=n.carrocerias,l=n.parametros,c=l[0],s=c.distanciaPoltronas,d=c.idadeBaixa,u=d.idadeMaxCad,m=d.difIdade,p=d.idadeBaixaAut,f=e.state,v=f.anoCarroceria,h=f.anoChassi,b=f.utilizacao,g=f.distanciaMinima,E=f.situacao,S=t.target.name,x=Number(v),y=Number(h),O=(new Date).getFullYear(),w=t.target.value,D=O-u,E&&E.match("Reativa\xe7\xe3o")&&(D=O-p),(I=je())?e.setState({errors:I}):e.setState({errors:void 0}),a.t0=S,a.next="modeloChassi"===a.t0?8:"modeloCarroceria"===a.t0?10:"delegatarioCompartilhado"===a.t0?12:"anoChassi"===a.t0?14:"anoCarroceria"===a.t0?19:"distanciaMinima"===a.t0?24:27;break;case 8:return e.checkValid(S,w,o,"modeloChassiId","modeloChassi","id","chassi"),a.abrupt("break",28);case 10:return e.checkValid(S,w,i,"modeloCarroceriaId","modelo","id","carroceria"),a.abrupt("break",28);case 12:return e.checkValid(S,w,r,"compartilhadoId","razaoSocial","codigoEmpresa"),a.abrupt("break",28);case 14:return C="Ano de chassi inv\xe1lido.",y&&y<D-1&&(k="O ano de fabrica\xe7\xe3o do chassi informado \xe9 anterior \xe0 idade m\xe1xima permitida para cadastro."),x&&y&&(x<y||x>y+m)&&(k="O ano de chassi \xe9 incompat\xedvel com o ano da carroceria informado."),k&&e.setState({anoChassi:"",openAlertDialog:!0,customTitle:C,customMsg:k}),a.abrupt("break",28);case 19:return C="Ano de carroceria inv\xe1lido.",x&&x<D&&(k="O ano de fabrica\xe7\xe3o do carroceria informado \xe9 anterior \xe0 idade m\xe1xima permitida."),x&&y&&(x<y||x>y+m)&&(k="O ano de fabrica\xe7\xe3o carroceria \xe9 incompat\xedvel com o ano do chassi informado."),k&&e.setState({anoCarroceria:"",openAlertDialog:!0,customTitle:C,customMsg:k}),a.abrupt("break",28);case 24:return b&&(N=Ha(b,g,s)),N&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xednima inv\xe1lida.",customMsg:N,distanciaMinima:""}),a.abrupt("break",28);case 27:case 28:if("placa"!==S||"string"===typeof e.state.frota){a.next=40;break}if(7!==w.length){a.next=34;break}return A=w.replace(/(\w{3})/,"$1-"),a.next=33,e.setState({placa:A,reactivated:!1});case 33:w=A;case 34:if(8!==w.length){a.next=39;break}return P=w.replace(" ","-"),a.next=38,e.setState({placa:P,reactivated:!1});case 38:w=P;case 39:e.checkPlateConflict(w);case 40:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.checkPlateConflict=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,F.a.get("/api/alreadyExists?table=veiculos&column=placa&value=".concat(t));case 2:if(n=a.sent,r=null===n||void 0===n?void 0:n.data,o=null===r||void 0===r?void 0:r.vehicleFound,!r){a.next=22;break}if("existing"!==(c=r.status)){a.next=14;break}return(null===o||void 0===o?void 0:o.situacao.match(/Cadastro|Reativa\xe7\xe3o/g))?(i="Solicita\xe7\xe3o aberta.",l="J\xe1 existe uma solicita\xe7\xe3o de cadastro ou reativa\xe7\xe3o para a placa informada. Para acompanhar, acesse 'Solicita\xe7\xf5es' e filtre pela placa do ve\xedculo. "):(i="Ve\xedculo j\xe1 cadastrado.",l="A placa informada corresponde a um ve\xedculo j\xe1 cadastrado. Para alterar o cadastro, v\xe1 para Ve\xedculos -> 'Altera\xe7\xe3o de dados'."),e.setState({customTitle:i,customMsg:l,openAlertDialog:!0,placa:null,reactivated:!1}),t="",a.abrupt("return");case 14:if("Reativado"!==o["Situa\xe7\xe3o"]){a.next=21;break}return a.delegateYield(j.a.mark((function a(){var t,n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(r in t={},n=function(e){Ka.forEach((function(a){var n=a.field,r=a.label;e===r&&["renavam","nChassi","anoChassi","anoCarroceria"].includes(n)&&(t[n]=o[e])}))},o)n(r);return t.situacao="Reativa\xe7\xe3o solicitada",a.next=6,e.setState(Object(h.a)(Object(h.a)({},t),{},{reactivated:!0}));case 6:return a.abrupt("return",{v:void 0});case 7:case"end":return a.stop()}}),a)}))(),"t0",16);case 16:if("object"!==typeof(s=a.t0)){a.next=19;break}return a.abrupt("return",s.v);case 19:a.next=22;break;case 21:"discharged"===c&&(i="Ve\xedculo baixado.",l="A placa informada corresponde a um ve\xedculo baixado. Para reativar seu cadastro, v\xe1 para Ve\xedculos -> Baixa -> 'Gerenciar Ve\xedculos Baixados'.",e.setState({customTitle:i,customMsg:l,openAlertDialog:!0,placa:null,reactivated:!1}),t="");case 22:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleEquipa=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.props.redux[t],r=[],o=[],a.next=4,e.setState({type:t});case 4:!1===e.state.addEquipa&&(e.state[t]&&(o=e.state[t]),n.forEach((function(e){var a=e.item;o.forEach((function(e){e.toLowerCase()===a.toLowerCase()&&r.push(a)}))})),r.forEach((function(a){return e.setState(Object(f.a)({},a,!0))}))),e.setState({addEquipa:!e.state.addEquipa});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleCheck=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.state.type,o=e.props.redux[r]){a.next=3;break}return a.abrupt("return");case 3:return i=[],l=[],"equipamentos"===r&&(c="equipamentosId"),"acessibilidade"===r&&(c="acessibilidadeId"),a.next=8,e.setState(Object(h.a)(Object(h.a)({},e.state),{},Object(f.a)({},t,!e.state[t])));case 8:o.forEach((function(a){var t=a.id,n=a.item;!0===e.state[n]&&(i.push(n),l.push(t))})),i[0]?e.setState((n={},Object(f.a)(n,r,i),Object(f.a)(n,c,l),n)):"equipamentos"===r?e.setState(Object(f.a)({equipamentos:[]},c,[])):"acessibilidade"===r&&e.setState(Object(f.a)({acessibilidade:[]},c,[]));case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleCadastro=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,v,b,g,E,S,x,y,O,w,C,k,D,I,N,P,T,z,L,M,q;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.state,o=r.equipamentosId,i=r.acessibilidadeId,l=r.pesoDianteiro,c=r.pesoTraseiro,s=r.poltronas,d=r.codigoEmpresa,u=r.compartilhadoId,m=r.modeloChassiId,p=r.originalVehicle,v=r.getUpdatedValues,b=r.modeloCarroceriaId,g=r.selectedEmpresa,E=r.showPendencias,S=r.info,x=r.form,y=r.demand,O=r.demandFiles,w=r.reactivated,C=null===y||void 0===y?void 0:y.veiculoId,k=(null===y||void 0===y||null===(n=y.history)||void 0===n?void 0:n.length)||0,I="Cadastro solicitado",N=93*Number(s)+(Number(l)+Number(c)),isNaN(N)&&(N=void 0),P={},We.forEach((function(a){a.forEach((function(a){for(var t in e.state)t===a.field&&Object.assign(P,Object(f.a)({},t,e.state[t]))}))})),P.delegatarioCompartilhado,P.modeloChassi,P.modeloCarroceria,T=Object(Y.a)(P,["delegatarioCompartilhado","modeloChassi","modeloCarroceria"]),Object.assign(T,{codigoEmpresa:d,situacao:I,pbt:N,modeloChassiId:m,modeloCarroceriaId:b,equipamentosId:o,acessibilidadeId:i,apolice:"Seguro n\xe3o cadastrado"}),T.compartilhadoId=u,y&&p&&(T=v(p,T)),z=A.a.decamelizeKeys(T),console.log(z),C){a.next=17;break}return a.next=15,F.a.post("/api/cadastroVeiculo",z).then((function(e){D=e.data})).catch((function(e){return console.log(e)}));case 15:a.next=22;break;case 17:return D=C,y&&t&&!E&&(I="Seguro n\xe3o cadastrado"),"veiculos","veiculo_id",L=Object(h.a)(Object(h.a)({},z),{},{situacao:I}),a.next=22,F.a.put("/api/updateVehicle",{requestObject:L,table:"veiculos",tablePK:"veiculo_id",id:D});case 22:M={empresaId:null===g||void 0===g?void 0:g.codigoEmpresa,veiculoId:D,history:{info:S,files:x},metadata:{veiculoId:D},demandFiles:O,historyLength:k,approved:t},y&&(M.id=null===y||void 0===y?void 0:y.id),w&&(M.subject="Reativa\xe7\xe3o de ve\xedculo"),Pe(M).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),t?e.toast():(q="Solicita\xe7\xe3o de cadastro enviada.",y&&y.status.match("Aguardando")&&(q="Pend\xeancias para o cadastro registradas."),e.toast(q)),y?setTimeout((function(){e.props.history.push("/solicitacoes")}),1500):e.resetState();case 28:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleFiles=function(){var a=Object(w.a)(j.a.mark((function a(t,n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t||!t[0]){a.next=5;break}return a.next=3,e.setState(Object(f.a)({},n,t[0]));case 3:r=ge(t,e.state,la),e.setState(Object(h.a)(Object(h.a)({},r),{},{fileToRemove:null}));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.removeFile=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.state.form,r=xe(t,n),e.setState(Object(h.a)(Object(h.a)({},e.state),r));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.resetState=function(){var a={},t=e.props.redux.equipamentos,n={},r={};We.forEach((function(t){t.forEach((function(t){Object.keys(t).forEach((function(n){"field"===n&&e.state[t[n]]&&Object.assign(a,Object(f.a)({},t[n],void 0))}))}))})),la.forEach((function(e){var a=e.name;Object.assign(n,Object(f.a)({},a,null))})),t.forEach((function(e){return Object.assign(r,Object(f.a)({},e.item,!1))})),e.setState(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},a),n),r),{},{activeStep:0,razaoSocial:"",selectedEmpresa:void 0,frota:[],delegatarioCompartilhado:"",form:new FormData,resetShared:!0}))},e.closeEquipa=function(){return e.setState({addEquipa:!1})},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.closeEquipa()},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,n,r,o,i,l,c,s,d,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props.redux,o=r.equipamentos,i=r.acessibilidade,(l=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.demand)&&(c=!1,(s=fe(l,r)).situacao.match("Reativa\xe7\xe3o")&&(c=!0),this.setState(Object(h.a)(Object(h.a)({},s),{},{activeStep:3,reactivated:c}))),d={},u={},o.forEach((function(e){return Object.assign(d,Object(f.a)({},null===e||void 0===e?void 0:e.item,!1))})),i.forEach((function(e){return Object.assign(u,Object(f.a)({},null===e||void 0===e?void 0:e.item,!1))})),e.next=7,this.setState(Object(h.a)(Object(h.a)({},d),u));case 7:document.addEventListener("keydown",this.escFunction,!1);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({}),document.removeEventListener("keydown",this.escFunction,!1)}},{key:"render",value:function(){var e=this.state,a=e.confirmToast,t=e.toastMsg,o=e.activeStep,i=e.openAlertDialog,l=e.alertType,c=e.steps,s=e.selectedEmpresa,d=e.dropDisplay,u=e.form,m=e.demand,p=e.demandFiles,f=e.showPendencias,v=e.info,h=e.resetShared,b=e.customMsg,g=e.customTitle,E=this.props.redux;return r.a.createElement(n.Fragment,null,r.a.createElement(Na,{links:["Ve\xedculos","/veiculos"],text:"Cadastro de ve\xedculo",demand:m,selectedEmpresa:s}),r.a.createElement(La,{activeStep:o,steps:c,setActiveStep:this.setActiveStep}),r.a.createElement(Xe,{data:this.state,redux:E,handleInput:this.handleInput,handleBlur:this.handleBlur,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck,closeEquipa:this.closeEquipa,match:this.props.match,resetShared:h}),2===o&&r.a.createElement(da,{parentComponent:"cadastro",dropDisplay:d,formData:u,handleFiles:this.handleFiles,demandFiles:p,fileToRemove:this.state.fileToRemove,removeFile:this.removeFile}),3===o&&r.a.createElement(Ca,{parentComponent:"cadastro",files:this.state.form,filesForm:la,data:this.state,form:We}),s&&r.a.createElement(Pa,{activeStep:o,lastStep:c.length-1,setActiveStep:this.setActiveStep,demand:m,setShowPendencias:this.setShowPendencias,showPendencias:f,info:v,handleSubmit:this.handleCadastro,handleInput:this.handleInput}),r.a.createElement(ee,{open:a,close:this.toast,msg:t}),i&&r.a.createElement(Ya,{open:i,close:this.toggleDialog,alertType:l,customMessage:b,customTitle:g}))}}]),t}(n.PureComponent)),Wa=function(e,a){var t=window.location.pathname;Ae.forEach((function(e,a){return e.path=Ae[a].path.replace("/veiculos","").replace("/solicitacoes","").replace("/empresas","")}));var n=Ae.find((function(e){return t.match(null===e||void 0===e?void 0:e.path)})),r=null===n||void 0===n?void 0:n.subject,o=null===n||void 0===n?void 0:n.primaryKey,i=a.find((function(a){return a.subject===r&&a[o]===e.toString()&&!1===a.completed}));return i||!1},$a=[[{field:"placa",label:"Placa",margin:"normal",datalist:"placa",autoComplete:!0,collection:"frota"},{field:"delegatario",label:"Delegat\xe1rio",margin:"normal",datalist:"razaoSocial",autoComplete:!0,collection:"empresas"},{field:"compartilhado",label:"Delegat\xe1rio Compartilhado",margin:"normal",datalist:"razaoSocial",autoComplete:!0,collection:"empresas"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Convencional","Executivo","Leito","Semi-Leito","Urbano"]},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50},{field:"renavam",label:"Renavam",margin:"normal",disabled:!0},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17,disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",disabled:!0},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",disabled:!0},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",disabled:!0},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",disabled:!0},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,disabled:!0}]].concat([[{field:"pesoDianteiro",label:"Peso Dianteiro (kg)",margin:"normal",type:"number",max:12e3},{field:"pesoTraseiro",label:"Peso Traseiro (kg)",margin:"normal",type:"number",max:15e3},{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piquesPoltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150}]]).concat([[]]).concat([[]]),Ga=Object(Z.a)((function(e){return{button:{marginRight:"15px"}}})),Za=function(e){var a=e.handleInput,t=e.handleBlur,n=e.data,o=e.handleCheck,i=e.handleEquipa,l=e.altPlacaOption,c=e.showAltPlaca,s=e.empresas,d=e.equipamentos,u=e.acessibilidade,m=e.close,p=n.activeStep,f=n.subtitle,v=n.placa,h=n.selectedEmpresa,b=n.addEquipa,g=n.demand,E=n.type,S=Ga().button,x=$a[p],y=d;return"acessibilidade"===E&&(y=u),r.a.createElement("div",{className:"flex center"},r.a.createElement("header",{className:"flex center",style:{marginBottom:"10px",width:"100%"}},r.a.createElement(Le,{data:n,empresas:s,headerTitle:h&&"Altera\xe7\xe3o de dados ".concat(v||""," - ").concat(null===h||void 0===h?void 0:h.razaoSocial),handleInput:a,handleBlur:t})),h&&r.a.createElement("main",null,p<2&&r.a.createElement("section",{className:"paper"},r.a.createElement(Be,{subtitle:f[p]}),r.a.createElement(_e,{form:x,data:n,empresas:s,handleBlur:t,handleInput:a,disableSome:g?["placa","delegatario"]:["delegatario"]})),0===p&&r.a.createElement("section",{className:"flex center"},r.a.createElement(Ye.a,{variant:"outlined",size:"small",color:"primary",className:S,onClick:function(){return i("equipamentos")}},r.a.createElement(Ke.a,null),"Equipamentos"),r.a.createElement(Ye.a,{variant:"outlined",size:"small",color:"primary",className:S,onClick:function(){return i("acessibilidade")}},r.a.createElement(Ke.a,null),"Acessibilidade")),l&&v.match("[a-zA-Z]{3}[-]?\\d{4}")&&r.a.createElement("div",{className:"addNewDiv"},r.a.createElement("span",{onClick:function(){return c()}}," \u2192 Clique aqui para alterar a placa para o formato Mercosul.")),b&&r.a.createElement(Ge,{type:E,equipamentos:y,close:m,handleCheck:o,data:n})))};function Xa(e){var a=e.open,t=e.close,n=e.title,o=e.header,i=e.inputNames,l=e.inputLabels,c=e.fileInputName,s=e.confirm,d=e.handleInput,u=e.handleFiles,m=e.values,p=e.formData,f=e.dropDisplay,v=e.type,h=void 0===v?"text":v,b=!0,g=function(e,a){if("newPlate"===e)return a.length<9&&a.match("[a-zA-Z]{3}?[-]\\d{1}\\w{1}\\d{2}")?(b=!1,!1):(b=!0,!0)};return r.a.createElement(Va.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ua.a,{id:"form-dialog-title"},n),r.a.createElement(Ba.a,null,r.a.createElement(Ra.a,null,o),r.a.createElement("br",null),i.map((function(e,a){return r.a.createElement(qe.a,{key:a,autoFocus:"newPlate"===e&&!0,name:e,label:l[a],onChange:d,values:m[a],type:h,error:g(e,m[a]),fullWidth:!0,InputLabelProps:{shrink:!0}})})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(oa,{title:"Anexar arquivo",name:c,formData:p,dropDisplay:f,handleFiles:u})),r.a.createElement(_a.a,null,r.a.createElement(Ye.a,{onClick:t,color:"primary"},"Cancelar"),r.a.createElement(Ye.a,{onClick:s,color:"primary",disabled:b},"Confirmar")))}var Qa=ce(["veiculos","empresas","equipamentos","acessibilidade","getFiles/vehicleDocs","parametros"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={stepTitles:["Informe a placa para alterar os dados abaixo ou mantenha as informa\xe7\xf5es atuais e clique em avan\xe7ar","Altere os dados desejados abaixo e clique em avan\xe7ar","Anexe os documentos solicitados","Revis\xe3o das informa\xe7\xf5es e deferimento"],steps:["Alterar dados do Ve\xedculo","Alterar dados adicionais","Documentos","Revis\xe3o"],subtitle:["Informe os dados do ve\xedculo.","Informa\xe7\xf5es adicionais","Anexe os arquivos solicitados","Revis\xe3o"],empresas:[],razaoSocial:"",compartilhadoId:"",frota:[],toastMsg:"Dados atualizados!",confirmToast:!1,activeStep:0,files:[],openAlertDialog:!1,altPlaca:!1,newPlate:"",placa:"",addEquipa:!1,dropDisplay:"Clique ou arraste para anexar",showPendencias:!1},e.setActiveStep=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(n=e.state.errors)||!n[0]){a.next=4;break}return e.setState(Object(h.a)(Object(h.a)({},e.state),je("setState"))),a.abrupt("return");case 4:r=e.state.activeStep,"next"===t&&e.setState({activeStep:r+1}),"back"===t&&e.setState({activeStep:r-1}),"reset"===t&&e.setState({activeStep:0});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.props.redux,r=n.veiculos,o=n.empresas,i=n.equipamentos,l=t.target,c=l.name,s=l.value,"razaoSocial"!==c){a.next=13;break}if(!(d=o.find((function(e){return e.razaoSocial===s})))){a.next=11;break}return a.next=6,e.setState({razaoSocial:d.razaoSocial,selectedEmpresa:d});case 6:s!==d.razaoSocial&&e.setState({selectedEmpresa:void 0}),u=r.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:u}),a.next=13;break;case 11:e.setState({selectedEmpresa:void 0,frota:[]}),e.reset();case 13:"placa"===c&&e.state.frota&&(e.state.frota.find((function(e){return e.placa===s}))||i.forEach((function(a){return e.setState(Object(f.a)({},a,!1))}))),"newPlate"===c?"string"===typeof(m=s)&&((m=m.replace(/[a-z]/g,(function(e){return e.toUpperCase()}))).match("[A-Z]{3}[0-9]{1}[A-Z]{1}[0-9]{2}")&&(m=m.replace(/(\w{3})/,"$1-")),e.setState(Object(h.a)(Object(h.a)({},e.state),{},{newPlate:m}))):e.setState(Object(f.a)({},c,s));case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.getId=function(){var a=Object(w.a)(j.a.mark((function a(t,n,r,o,i,l){var c,s,d,u,m,p;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=r.filter((function(e){return e[i].toLowerCase().match(n.toLowerCase())})),""===n&&e.setState((c={},Object(f.a)(c,t,""),Object(f.a)(c,o,""),c)),!s[0]){a.next=10;break}if(d=s[0][i],u=s[0][l],""===n){a.next=8;break}return a.next=8,e.setState((m={},Object(f.a)(m,t,d),Object(f.a)(m,o,u),m));case 8:a.next=14;break;case 10:return a.next=12,e.setState((p={},Object(f.a)(p,t,""),Object(f.a)(p,o,""),p));case 12:e.setState({openAlertDialog:!0,alertType:"empresaNotFound"}),document.getElementsByName(t)[0].focus();case 14:case"end":return a.stop()}}),a)})));return function(e,t,n,r,o,i){return a.apply(this,arguments)}}(),e.capitalize=function(e,a){if(a&&"string"===typeof a)return"utilizacao"===e&&("RODOVIARIO"===a&&(a="CONVENCIONAL"),"SEMI LEITO - EXECUTIVO"===a&&(a="Semi-Leito"),"Semi-Leito"!==a&&(a=a.charAt(0)+a.slice(1).toLowerCase())),"dominio"===e&&"Sim"===a&&(a="Ve\xedculo pr\xf3prio"),"dominio"===e&&"N\xe3o"===a&&(a="Possuidor"),a},e.handleBlur=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,v,b,g,E,S,x,y,O,w,C,k,D,I,N,A;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.props.redux,r=n.empresas,o=n.logs,i=n.equipamentos,l=n.acessibilidade,c=n.parametros,s=c[0].distanciaPoltronas,d=e.state,u=d.frota,m=d.demand,p=d.utilizacao,v=d.distanciaMinima,b=t.target.name,g=t.target.value,(E=je())?e.setState({errors:E}):e.setState({errors:void 0}),a.t0=b,a.next="compartilhado"===a.t0?7:"delegatario"===a.t0?9:"distanciaMinima"===a.t0?12:15;break;case 7:return e.getId(b,g,r,"compartilhadoId","razaoSocial","codigoEmpresa"),a.abrupt("break",16);case 9:return a.next=11,e.getId(b,g,r,"codigoEmpresa","razaoSocial","codigoEmpresa");case 11:return a.abrupt("break",16);case 12:return p&&(S=Ha(p,v,s)),S&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xednima inv\xe1lida.",customMessage:S,distanciaMinima:""}),a.abrupt("break",16);case 15:case 16:if(!("placa"===b&&g.length>2&&Array.isArray(e.state.frota))){a.next=36;break}if(!(x=e.state.frota.find((function(e){return"string"===typeof g?e.placa.toLowerCase().match(g.toLowerCase()):e.placa.match(g)})))||"object"!==typeof x){a.next=35;break}return w=e.capitalize("utilizacao",null===(y=x)||void 0===y?void 0:y.utilizacao)||null,C=e.capitalize("dominio",null===(O=x)||void 0===O?void 0:O.dominio)||null,k={},i.concat(l).forEach((function(e){var a=e.item;return Object.assign(k,Object(f.a)({},a,!1))})),x=Object.assign({},x,{utilizacao:w,dominio:C}),D=Object.freeze(x),a.next=26,e.setState(Object(h.a)(Object(h.a)(Object(h.a)({},k),x),{},{originalVehicle:D,disable:!0}));case 26:if(void 0!==x&&x.hasOwnProperty("empresa")&&e.setState({delegatario:x.empresa}),m){a.next=35;break}if("Solicita\xe7\xe3o j\xe1 cadastrada",N="J\xe1 existe uma demanda aberta para o ve\xedculo de placa ".concat(x.placa,'. Para acess\xe1-la, clique em "Solicita\xe7\xf5es" no menu superior.'),!Wa(null===(I=x)||void 0===I?void 0:I.veiculoId,o)){a.next=35;break}return a.next=33,e.setState({customTitle:"Solicita\xe7\xe3o j\xe1 cadastrada",customMessage:N,openAlertDialog:!0,delegatario:""});case 33:return e.reset(),a.abrupt("return");case 35:""===e.state.placa||x||(A={},u[0]&&Object.keys(u[0]).forEach((function(e){return A[e]=""})),e.setState({alertType:"plateNotFound",openAlertDialog:!0}),e.setState(Object(h.a)(Object(h.a)({},A),{},{disable:!1})));case 36:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleEquipa=function(a){var t=e.props.redux[a],n=[],r=[];!1===e.state.addEquipa&&(e.state[a]&&(r=e.state[a]),t.forEach((function(e){var a=e.item;r.forEach((function(e){e.toLowerCase()===a.toLowerCase()&&n.push(a)}))})),n.forEach((function(a){return e.setState(Object(f.a)({},a,!0))})),console.log(e.state)),e.setState({addEquipa:!e.state.addEquipa,type:a})},e.handleCheck=function(){var a=Object(w.a)(j.a.mark((function a(t,n){var r,o,i,l,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.props.redux[n]){a.next=3;break}return a.abrupt("return");case 3:return i=[],l=[],"equipamentos"===n&&(c="equipamentosId"),"acessibilidade"===n&&(c="acessibilidadeId"),a.next=8,e.setState(Object(h.a)(Object(h.a)({},e.state),{},Object(f.a)({},t,!e.state[t])));case 8:o.forEach((function(a){var t=a.id,n=a.item;!0===e.state[n]&&(i.push(n),l.push(t))})),i[0]?e.setState((r={},Object(f.a)(r,n,i),Object(f.a)(r,c,l),r)):"equipamentos"===n?e.setState(Object(f.a)({equipamentos:[]},c,[])):"acessibilidade"===n&&e.setState(Object(f.a)({acessibilidade:[]},c,[]));case 10:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.showAltPlaca=function(){e.setState({altPlaca:!0,title:"Altera\xe7\xe3o de placa",header:"Para alterar a placa do ve\xedculo para o padr\xe3o Mercosul, digite a placa no campo abaixo e anexe o CRLV atualizado do ve\xedculo."})},e.updatePlate=function(){e.setState({placa:e.state.newPlate}),e.toggleDialog()},e.handleSubmit=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,v,h,b,g,E,S,x,y,O,w,C,k,D,I,N,P,T;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.state,o=r.veiculoId,i=r.poltronas,l=r.pesoDianteiro,c=r.pesoTraseiro,s=r.codigoEmpresa,d=r.originalVehicle,u=r.showPendencias,m=r.getUpdatedValues,p=r.compartilhadoId,v=r.newPlate,h=r.selectedEmpresa,b=r.equipamentosId,g=r.acessibilidadeId,E=r.info,S=r.demand,x=r.form,y=r.demandFiles,O=(null===S||void 0===S||null===(n=S.history)||void 0===n?void 0:n.length)||0,w=93*Number(i)+(Number(l)+Number(c)),isNaN(w)&&(w=void 0),C={},$a.forEach((function(a){a.forEach((function(a){for(var t in e.state)t!==a.field||a.disabled||e.state[t]&&Object.assign(C,Object(f.a)({},t,e.state[t]))}))})),C=Object.assign(C,{codigoEmpresa:s,compartilhadoId:p,pbt:w,equipamentosId:b,acessibilidadeId:g}),S&&m&&(C=m(d,C)),(k=C).delegatario,k.compartilhado,D=Object(Y.a)(k,["delegatario","compartilhado"]),v&&""!==v&&(D.placa=v),e.state.compartilhado&&""!==e.state.compartilhado||!(null===d||void 0===d?void 0:d.compartilhadoId)||(D.compartilhadoId="NULL"),t||0!==Object.keys(D).length){a.next=13;break}return e.setState({openAlertDialog:!0,customTitle:"Nenhuma altera\xe7\xe3o",customMessage:"N\xe3o foi realizada nenhuma altera\xe7\xe3o na solicita\xe7\xe3o aberta. Para prosseguir, altere algum dos campos ou adicione uma justificativa."}),a.abrupt("return");case 13:if(I=A.a.decamelizeKeys(D),N={alteracoes:D,info:E,files:x},P={empresaId:null===h||void 0===h?void 0:h.codigoEmpresa,veiculoId:o,history:N,demandFiles:y,metadata:{veiculoId:o},historyLength:O,approved:t},S&&(P.id=null===S||void 0===S?void 0:S.id),Pe(P).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),!S||!t||u){a.next=22;break}return h.codigoEmpresa!==s&&(I.apolice="Seguro n\xe3o cadastrado"),"veiculos","veiculo_id",a.next=22,F.a.put("/api/updateVehicle",{requestObject:I,table:"veiculos",tablePK:"veiculo_id",id:o});case 22:if(t?e.toast():(T="Solicita\xe7\xe3o de altera\xe7\xe3o de dados enviada.",S&&S.status.match("Aguardando")&&(T="Pend\xeancias para a altera\xe7\xe3o de dados registradas."),e.toast(T)),S){a.next=29;break}return a.next=26,e.setState({activeStep:0,razaoSocial:void 0});case 26:e.reset(!0),a.next=30;break;case 29:setTimeout((function(){e.props.history.push("/solicitacoes")}),1500);case 30:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleFiles=function(){var a=Object(w.a)(j.a.mark((function a(t,n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t||!t[0]){a.next=5;break}return a.next=3,e.setState(Object(f.a)({},n,t[0]));case 3:r=ge(t,e.state,ca),e.setState(Object(h.a)(Object(h.a)({},r),{},{fileToRemove:null}));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.removeFile=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.state.form,r=xe(t,n),e.setState(Object(h.a)(Object(h.a)({},e.state),r));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({altPlaca:!e.state.altPlaca})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.closeEquipa=function(){return e.setState({addEquipa:!1})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e.reset=function(a){var t={};$a.forEach((function(a){return a.forEach((function(a){return e.setState(Object(f.a)({},a.field,""))}))})),ca.forEach((function(e){var a=e.name;Object.assign(t,Object(f.a)({},a,void 0))})),a?e.setState(Object(h.a)(Object(h.a)({},t),{},{form:void 0,selectedEmpresa:void 0,razaoSocial:void 0})):e.setState(Object(h.a)(Object(h.a)({},t),{},{form:void 0}))},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.closeEquipa()},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,n,r,o,i,l,c,s,d,u,m,p;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props.redux,o=r.equipamentos,i=r.acessibilidade,(l=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.demand)&&(c=fe(l,r),s=c.originalVehicle,d=c.getUpdatedValues,u=c.alteracoes,d(s,u),this.setState(Object(h.a)(Object(h.a)({},c),{},{activeStep:3}))),m={},p={},o.forEach((function(e){return Object.assign(m,Object(f.a)({},null===e||void 0===e?void 0:e.item,!1))})),i.forEach((function(e){return Object.assign(p,Object(f.a)({},null===e||void 0===e?void 0:e.item,!1))})),e.next=7,this.setState(Object(h.a)(Object(h.a)({},m),p));case 7:document.addEventListener("keydown",this.escFunction,!1);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.props.redux,a=e.empresas,t=e.equipamentos,o=e.acessibilidade,i=this.state,l=i.confirmToast,c=i.toastMsg,s=i.stepTitles,d=i.activeStep,u=i.steps,m=i.altPlaca,p=i.selectedEmpresa,f=i.openAlertDialog,v=i.alertType,h=i.customTitle,b=i.customMessage,g=i.dropDisplay,E=i.form,S=i.title,x=i.header,y=i.newPlate,O=i.demand,j=i.showPendencias,w=i.info,C=i.demandFiles;return r.a.createElement(n.Fragment,null,r.a.createElement(Na,{links:["Ve\xedculos","/veiculos"],text:"Altera\xe7\xe3o de dados",demand:O}),r.a.createElement(La,{activeStep:d,steps:u,stepTitles:s,setActiveStep:this.setActiveStep}),r.a.createElement(Za,{data:this.state,empresas:a,equipamentos:t,acessibilidade:o,setActiveStep:this.setActiveStep,altPlacaOption:0===d,handleInput:this.handleInput,handleBlur:this.handleBlur,showAltPlaca:this.showAltPlaca,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck,close:this.closeEquipa}),2===d&&r.a.createElement(da,{parentComponent:"altDados",dropDisplay:g,formData:E,handleFiles:this.handleFiles,demandFiles:C,fileToRemove:this.state.fileToRemove,removeFile:this.removeFile}),3===d&&r.a.createElement(Ca,{parentComponent:"altDados",data:this.state,form:$a,files:this.state.form,filesForm:ca}),p&&r.a.createElement(Pa,{activeStep:d,lastStep:u.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep,showPendencias:j,setShowPendencias:this.setShowPendencias,info:w,handleInput:this.handleInput,demand:O}),r.a.createElement(ee,{open:l,close:this.toast,msg:c}),r.a.createElement(Xa,{open:m,close:this.toggleDialog,title:S,header:x,inputNames:["newPlate"],inputLabels:["Alterar Placa"],fileInputName:"newPlateDoc",values:[y],handleInput:this.handleInput,handleFiles:this.handleFiles,confirm:this.updatePlate,dropDisplay:g,formData:E}),f&&r.a.createElement(Ya,{open:f,close:this.closeAlert,alertType:v,customMessage:b,customTitle:h}))}}]),t}(n.Component)),et=t(406),at=t(150),tt=t.n(at),nt=t(149),rt=t.n(nt),ot=[{field:"seguradora",label:"Seguradora",autoComplete:!0,datalist:"seguradora",collection:"seguradoras",width:225},{field:"apolice",label:"Ap\xf3lice",autoComplete:!0,datalist:"apolice",collection:"seguros",maxLength:25,width:225},{type:"date",field:"dataEmissao",label:"In\xedcio da vig\xeancia",width:225},{type:"date",field:"vencimento",label:"Vencimento",width:225}],it=[{title:"Contrato Social",name:"contratoSocial"},{title:"Procura\xe7\xe3o",name:"procuracao"},{title:"Ap\xf3lice",name:"apoliceDoc"},{title:"Altera\xe7\xe3o de contrato social",name:"altContratoDoc"}],lt=Object(Z.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"25%",minWidth:310,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"}}}));function ct(e){var a=e.empresas,t=e.data,o=e.seguros,i=e.seguradoras,l=e.enableAddPlaca,c=e.handleInput,s=e.handleBlur,d=e.addPlate,u=e.removeFromInsurance,m=e.handleFiles,p=e.handleSubmit,f=e.enableChangeApolice,v=e.showAllPlates,h=e.removeFile,b=e.setShowPendencias,g=t.selectedEmpresa,E=t.placa,S=t.apolice,x=t.addedPlaca,y=t.allVehicles,O=t.frota,j=t.demandFiles,w=t.fileToRemove,C=t.demand,k=t.insurance,D=t.dropDisplay,I=t.apoliceDoc,N=t.showPendencias,A=t.info,P=t.renderedPlacas;t.seguradoras=i;var F=lt(),T=F.textField,z=o.some((function(e){return e.apolice===S}));return r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},r.a.createElement(Na,{links:["Ve\xedculos","/veiculos"],text:"Seguros",demand:C}),r.a.createElement(Le,{data:t,empresas:a,handleInput:c,handleBlur:s}),g&&r.a.createElement("section",{className:"paper"},r.a.createElement(Be,{subtitle:"Informe os dados do seguro."}),r.a.createElement(_e,{form:ot,data:t,handleBlur:s,handleInput:c}),z&&r.a.createElement("div",{className:"addNewDiv"},r.a.createElement("span",{onClick:function(){return f()}}," \u2192 Clique aqui para adicionar nova ap\xf3lice mantendo as placas abaixo selecionadas."))),g&&l&&r.a.createElement("main",{className:"paper",style:{textAlign:"center",color:"#555"}},r.a.createElement("p",null,"Utilize as op\xe7\xf5es abaixo para filtrar, adicionar ou excluir placas desta ap\xf3lice"),r.a.createElement("section",{className:"flex spaceBetween",style:{paddingTop:"17px"}},r.a.createElement("div",null,r.a.createElement(qe.a,{inputProps:{name:"addedPlaca",list:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Insira a placa",className:T,value:x,onChange:c,onBlur:s}),r.a.createElement(ze,{collection:y,datalist:"placa",value:x}),r.a.createElement(Ye.a,{size:"small",variant:"contained",className:F.button,style:{margin:"10px 0 10px 0"},onClick:function(){return d(x)}},r.a.createElement(Ke.a,null)," Adicionar")),r.a.createElement("div",null,r.a.createElement(qe.a,{inputProps:{name:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Filtrar",className:T,value:E||"",onChange:c,onBlur:s}),r.a.createElement(rt.a,{style:{marginTop:"18px"}})),C?j[0]&&r.a.createElement("div",{style:{width:"225px",marginTop:"15px"}},r.a.createElement(Sa,{demand:C,collection:"empresaDocs",demandFiles:j,form:it,style:{width:"200px"}})):r.a.createElement(oa,{name:"apoliceDoc",formData:I,dropDisplay:D,handleFiles:m,demandFiles:j,removeFile:h,fileToRemove:w,style:{padding:"0 10px",margin:"0 10px",width:"28%",minWidth:"320px"}})),r.a.createElement("div",{className:"addNewDiv",style:{justifyContent:"flex-start",padding:"10px"}},r.a.createElement("span",{onClick:function(){return v()}},"\u2192 Clique aqui para selecionar placas")),(null===k||void 0===k?void 0:k.placas)&&(null===k||void 0===k?void 0:k.placas[0])?r.a.createElement("div",{style:{marginTop:"15px"}},"Placas vinculadas a ap\xf3lice ",k.apolice):r.a.createElement("div",{style:{marginTop:"30px"}}),k&&k.placas&&S&&S.length>2&&P&&P[0]&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:{fontSize:"0.7rem",marginBottom:"10px",marginTop:"3px",color:"#787b6e"}},"Selecionado",P.length>1?"s":""," ",P.length," ve\xedculo",P.length>1?"s":""," de ",null===O||void 0===O?void 0:O.length),r.a.createElement("div",{className:"placasChipContainer"},P.map((function(e,a){var t=e.placa,n=e.compartilhado,o=e.outsider,i=e.irregular,l=e.delCompartilhado,c=e.owner;return r.a.createElement("div",{onMouseOver:function(e){return function(e,a){var t=e.compartilhado,n=e.outsider,r=e.irregular,o=e.delCompartilhado,i=e.owner;a.target.title="Ve\xedculo pr\xf3prio",t&&(a.target.title="Ve\xedculo pr\xf3prio. Compartilhado por: ".concat(o)),n&&(a.target.title="Autorizado compartilhamento. Propriet\xe1rio: ".concat(i)),r&&(a.target.title="N\xc3O autorizado compartilhamento! Propriet\xe1rio: ".concat(i))}({compartilhado:n,outsider:o,irregular:i,delCompartilhado:l,owner:c},e)},key:a},r.a.createElement(et.a,{key:a,label:t,onDelete:function(){return u(t)},className:n?"chip-compartilhado":o?"chip-outsider":i?"chip-irregular":"chip",variant:"outlined"}))})))))),S&&(k||l)&&!C?r.a.createElement("div",{style:{minHeight:"60px",position:"flex"}},r.a.createElement(Ye.a,{size:"small",color:"primary",className:"saveButton",variant:"contained",onClick:function(){return p()}},"Salvar ",r.a.createElement("span",null,"\xa0\xa0 ")," ",r.a.createElement(tt.a,null))):g&&C?r.a.createElement(Pa,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:C,setShowPendencias:b,showPendencias:N,info:A,handleSubmit:p,handleInput:c}):null)}var st=function(e){var a=e.items,t=e.title,n=e.data,o=e.close,i=e.selectAll,l=e.handleCheck,c=e.selectAllPlates;return r.a.createElement("div",{className:"popUpWindow row"},r.a.createElement("h6",null,t," Clique em \"X\" ou pressione 'esc' para voltar"),r.a.createElement("div",{style:{margin:"10px 0",fontSize:"0.8rem"}},r.a.createElement("input",{id:"all",type:"checkbox",checked:!0===i,onChange:function(){return c()}}),r.a.createElement("label",{htmlFor:"all"},i?"Desmarcar todas selecionadas":"Selecionar todas")),r.a.createElement("main",{className:"checkListContainer"},a.map((function(e,a){return r.a.createElement("div",{className:"checkListItem",key:a},r.a.createElement("input",{id:a,type:"checkbox",checked:!0===n[e],onChange:function(){return l(e)}}),r.a.createElement("label",{htmlFor:a},e))}))),r.a.createElement($e,{close:o}))};function dt(e){var a=e.open,t=e.close,n=e.title,o=e.helperMessage,i=e.marca,l=e.marcas,c=e.selectMarca,s=e.newElement,d=e.handleInput,u=e.addNewElement;return r.a.createElement("div",null,r.a.createElement(Va.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ua.a,{id:"form-dialog-title"},n),r.a.createElement(Ba.a,null,r.a.createElement(Ra.a,null,o),r.a.createElement("div",{className:"editFields"},l&&r.a.createElement("div",{className:"configMarca"},r.a.createElement(qe.a,{onChange:c,value:i,label:"Selecione uma marca",select:!0,InputLabelProps:{shrink:!0},SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},l.map((function(e,a){var t=e.marca;return r.a.createElement(Me.a,{key:a,value:t},t)})))),r.a.createElement("div",{className:"configField"},r.a.createElement(qe.a,{autoFocus:!0,margin:"dense",name:"newElement",label:"Inserir",type:"text",onChange:d,value:s,fullWidth:!0}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(_a.a,null,r.a.createElement(Ye.a,{onClick:t,color:"primary"},"Cancelar"),r.a.createElement(Ye.a,{onClick:function(){return u()},color:"primary"},"Confirmar"))))}var ut=function(e,a,t){var n,r={name:"nomeSocio",id:"socioId"};document.location.pathname.match("procurador")&&(r={name:"nomeProcurador",id:"procuradorId"});var o,i,l,c,s=a.empresas,d=a.empresaDocs,u=r,m=u.name,p=u.id,f=(null===e||void 0===e?void 0:e.history)||[],v=null===f||void 0===f?void 0:f.length,h=s.find((function(a){return a.codigoEmpresa===(null===e||void 0===e?void 0:e.empresaId)})),b=null===h||void 0===h?void 0:h.razaoSocial,g=[],E=[];(f[0]&&(o=f[v-1]),o)&&(g=(null===(l=o)||void 0===l?void 0:l.newMembers)||[],E=(null===(c=o)||void 0===c?void 0:c.oldMembers)||[]);var S=(null===(n=f.reverse().find((function(e){return e.files})))||void 0===n?void 0:n.files)||[];S[0]&&(i=d.find((function(e){return e.id===S[0]}))),E[0]&&t.forEach((function(e){E.forEach((function(a){e[p]===a[p]&&Object.keys(a).forEach((function(t){e[t]=a[t]}))}))}));var x=t.concat(g).sort((function(e,a){return e[m].localeCompare(a[m])}));return{razaoSocial:b,selectedEmpresa:h,demand:e,latestDoc:i,newMembers:g,oldMembers:E,getUpdatedValues:mt,filteredSocios:x}};function mt(e,a){return Object.keys(a).forEach((function(t){a[t]&&e[t]&&("equipamentosId"!==t&&"acessibilidadeId"!==t||a[t].sort((function(e,a){return e-a})),a[t].toString()===e[t].toString()&&delete a[t]),""!==a[t]&&"null"!==a[t]&&a[t]||delete a[t]})),a}var pt=ce(["veiculos","empresas","seguradoras","seguros","getFiles/empresaDocs"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={addedPlaca:"",razaoSocial:"",seguradora:"",deletedVehicles:[],toastMsg:"Seguro atualizado!",confirmToast:!1,dropDisplay:"Clique ou arraste para anexar a ap\xf3lice",showAllPlates:!1,showPendencias:!1,selectAll:!1},e.filterInsurances=Object(w.a)(j.a.mark((function a(){var t,n,r,o,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.props.redux.seguros,n=e.state.selectedEmpresa,r=n.codigoEmpresa,o=t.filter((function(e){return e.codigoEmpresa===r})),a.next=6,F.a.get("/api/allVehicles?codigoEmpresa=".concat(r));case 6:i=a.sent,l=A.a.camelizeKeys(null===i||void 0===i?void 0:i.data)||[],c=l.map((function(e){return e.placa})).sort(),s=l.filter((function(e){return e.codigoEmpresa===r})),d=s.map((function(e){return e.placa})),e.setState({seguros:o,allVehicles:l,frota:s,ownedPlacas:d,allPlates:c});case 12:case"end":return a.stop()}}),a)}))),e.checkExistance=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=JSON.parse(JSON.stringify(e.props.redux.seguros)),r=e.state,o=r.selectedEmpresa,i=r.demand,l=o.codigoEmpresa,c=Object(v.a)(n.filter((function(e){return e.codigoEmpresa===l}))),s=Object(h.a)({},c.find((function(e){return e.apolice===t}))),i&&e.state.insurance&&(s=e.state.insurance),!(Object.keys(s).length>0)){a.next=11;break}return d=Oe()(s.dataEmissao).format("YYYY-MM-DD"),u=Oe()(s.vencimento).format("YYYY-MM-DD"),p=(m=s).seguradora,f=m.seguradoraId,a.next=8,e.setState({seguradora:p,seguradoraId:f,dataEmissao:d,vencimento:u,insurance:s});case 8:return a.abrupt("return");case 11:e.setState({dataEmissao:"",vencimento:"",deletedVehicles:[],insurance:{}});case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.renderPlacas=function(a){var t=e.state,n=t.allVehicles,r=t.insurance,o=t.ownedPlacas;if(r){a||(a=r.placas||[]);var i=[];a.forEach((function(e){var a=n.find((function(a){return a.placa===e})),t=a.placa,r=a.empresa,l=a.compartilhado,c={placa:t,owner:r,delCompartilhado:l};o.includes(t)?c.compartilhado=!!l:l?Object.assign(c,{outsider:!0}):Object.assign(c,{irregular:!0}),i.push(c)})),e.setState({renderedPlacas:i})}},e.handleInput=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,v,h,b,g,E,S,x,y,O,w,C;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=t.target.value,r=t.target.name,o=e.props.redux,i=o.empresas,l=o.seguradoras,c=e.state,s=c.selectedEmpresa,d=c.allVehicles,u=c.insurance,m=c.apolice,p=c.dataEmissao,v=c.vencimento,h=c.newInsurance,b=c.seguradora,e.setState(Object(f.a)({},r,n)),a.t0=r,a.next="razaoSocial"===a.t0?6:"apolice"===a.t0?17:"seguradora"===a.t0?21:"placa"===a.t0?24:"addedPlaca"===a.t0?27:30;break;case 6:if(!(g=i.find((function(e){return e.razaoSocial===n})))){a.next=14;break}return a.next=10,e.setState({razaoSocial:g.razaoSocial,selectedEmpresa:g});case 10:n!==g.razaoSocial&&e.setState({selectedEmpresa:void 0}),e.filterInsurances(),a.next=16;break;case 14:e.setState({selectedEmpresa:void 0,frota:[]}),e.clearFields();case 16:return a.abrupt("break",31);case 17:return a.next=19,e.checkExistance(n);case 19:return e.renderPlacas(),a.abrupt("break",31);case 21:return(E=l.find((function(e){return e.seguradora===n})))&&e.setState({seguradoraId:E.id}),a.abrupt("break",31);case 24:return S=[],(null===u||void 0===u?void 0:u.placas)&&(u.placas[0]&&null!==u.placas[0]&&(S=u.placas.sort()),void 0!==n&&n.length>2&&S[0]&&(S="string"===typeof n?u.placas.filter((function(e){return e.toLowerCase().match(n.toLowerCase())})).sort():u.placas.filter((function(e){return e.match(n)})).sort()),e.renderPlacas(S)),a.abrupt("break",31);case 27:return(x=d.find((function(e){return e.placa===n})))&&e.setState({vehicleFound:x}),a.abrupt("break",31);case 30:case 31:if(y=["seguradora","apolice","dataEmissao","vencimento"].every((function(a){return e.state[a]&&""!==e.state[a]})),"razaoSocial"===r||h||!y||u){a.next=39;break}return(w=l.find((function(a){return a.seguradora===e.state.seguradora})))&&(O=w.id),C={empresa:s.razaoSocial,codigoEmpresa:s.codigoEmpresa,apolice:m,seguradora:b,seguradoraId:O,dataEmissao:p,vencimento:v,placas:[],veiculos:[]},a.next=39,e.setState({insurance:C,seguradoraId:O});case 39:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleBlur=function(a){var t=e.props.redux,n=t.seguradoras,r=t.seguros,o=e.state,i=o.seguradora,l=o.selectedEmpresa,c=a.target.name,s=null===l||void 0===l?void 0:l.codigoEmpresa;if("seguradora"===c){var d=[],u=n.find((function(e){return e.seguradora.toLowerCase().match(i.toLowerCase())}));u&&i.length>2&&e.setState({seguradora:u.seguradora,seguradoraId:u.id}),!u&&i.length>2&&e.setState({openAlertDialog:!0,alertType:"seguradoraNotFound",seguradora:void 0}),l&&!i?(d=r.filter((function(e){return e.codigoEmpresa===s})),e.setState({seguros:d})):l||""===i?l&&""!==i&&(d=r.filter((function(e){return e.codigoEmpresa===s})).filter((function(e){return e.seguradora===i})),e.setState({seguros:d})):(d=r.filter((function(e){return e.seguradora===i})),e.setState({seguros:d}))}if("dataEmissao"===c||"vencimento"===c){var m=je();m?e.setState({errors:m}):e.setState({errors:void 0})}},e.showAllPlates=function(){var a=e.state,t=a.insurance,n=a.allPlates,r=[],o={};(null===t||void 0===t?void 0:t.placas)&&(r=t.placas),n.forEach((function(e){return Object.assign(o,Object(f.a)({},e,!1))})),r.forEach((function(e){return Object.assign(o,Object(f.a)({},e,!0))})),e.setState({allPlatesObj:o,insuredPlates:r,showAllPlates:!e.state.showAllPlates})},e.handleCheck=function(){var a=Object(w.a)(j.a.mark((function a(t){var n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:(n=Object(h.a)({},e.state.allPlatesObj))[t]=!n[t],!0===n[t]?e.addPlate(t):e.removeFromInsurance(t),e.setState({allPlatesObj:n});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.selectAllPlates=function(){var a=e.state,t=a.allPlates,n=a.selectAll,r={};t&&t.forEach((function(a){n?(r[a]=!1,e.removeFromInsurance(a)):(r[a]=!0,e.addPlate(a,!0))})),e.setState({selectAll:!n,allPlatesObj:r})},e.addPlate=function(){var a=Object(w.a)(j.a.mark((function a(t,n){var r,o,i,l,c,s,d,u,m;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.state,o=r.apolice,i=r.allVehicles,l=r.deletedVehicles,c=r.insurance,s=i.find((function(e){return e.placa===t})),t&&""!==t){a.next=3;break}return a.abrupt("return");case 3:if(void 0!==s&&!1!==s.hasOwnProperty("veiculoId")){a.next=8;break}return e.setState({openAlertDialog:!0,alertType:"plateNotFound"}),a.abrupt("return",null);case 8:if(!(c&&c.placas&&s.placa)||n){a.next=13;break}if(!c.placas.find((function(e){return e===s.placa}))){a.next=13;break}return e.setState({openAlertDialog:!0,alertType:"plateExists"}),a.abrupt("return",null);case 13:o&&c&&(d=Object(h.a)({},c),u=s.veiculoId,d.placas||(d.placas=[]),d.veiculos||(d.veiculos=[]),d.placas.includes(t)||d.placas.push(t),d.veiculos.includes(u)||d.veiculos.push(u),l.includes(u)&&(m=l.indexOf(u),l.splice(m,1)),e.renderPlacas(null===d||void 0===d?void 0:d.placas),e.setState({insurance:d,addedPlaca:"",deletedVehicles:l}));case 14:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.removeFromInsurance=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f,b,g,E,S;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.state,r=n.apolice,o=n.allVehicles,i=o.find((function(e){return e.placa===t})),l=i.veiculoId,c=i.placa,s=Object(h.a)({},e.state.insurance),d=Object(v.a)(e.state.deletedVehicles),u=[],m=[],(f=e.props.redux.seguros.find((function(e){return e.apolice===r})))&&f.placas&&(p=f.placas.includes(c)),p&&(b=s.veiculos,g=b.indexOf(l),d.includes(b[g])||(d.push(b[g]),e.setState({deletedVehicles:d}))),s.placas&&(u=s.placas),s.veiculos&&(m=s.veiculos),E=u.indexOf(c),S=m.indexOf(l),s.placas.splice(E,1),s.veiculos.splice(S,1),a.next=12,e.setState({insurance:s});case 12:e.renderPlacas();case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.updateInsurance=function(){var a=e.state,t=a.insurance,n=a.dataEmissao,r=a.vencimento,o=a.seguradoraId,i=t.id,l=t.veiculos,c={},s=!Oe()(n).isSame(Oe()(t.dataEmissao)),d=!Oe()(r).isSame(Oe()(t.vencimento)),u=o!==t.seguradoraId;if(!s&&!d&&u)return null;s&&(c.data_emissao=n),d&&(c.vencimento=r),u&&(c.seguradora_id=o);var m={id:i,columns:Object.keys(c),updates:c,vehicleIds:l};F.a.put("/api/updateInsurance",m).then((function(e){return console.log(e.data)}))},e.handleSubmit=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f,v,b,g,E,S,x,y,O,w,C,k,D,I,N;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,r=n.seguradora,o=n.insurance,i=n.errors,l=n.deletedVehicles,c=n.seguradoraId,s=n.apolice,d=n.dataEmissao,u=n.vencimento,m=n.selectedEmpresa,p=n.demand,f=n.demandFiles,v=n.apoliceDoc,b=n.info,g=[],!i||!i[0]){a.next=5;break}return e.setState(Object(h.a)(Object(h.a)({},e.state),je("setState"))),a.abrupt("return");case 5:if(r&&""!==r){a.next=8;break}return e.setState({openAlertDialog:!0,alertType:"seguradoraNotFound",seguradora:void 0}),a.abrupt("return");case 8:if((null===o||void 0===o?void 0:o.veiculos)&&o.veiculos[0]){a.next=11;break}return e.setState({openAlertDialog:!0,customTitle:"Nenhum ve\xedculo inserido",customMsg:'N\xe3o foi inserido nenhum ve\xedculo para o seguro informado. Para inserir, digite a placa no campo "Insira a placa" ou clique para selecionar a(s) placa(s) do(s) ve\xedculo(s) coberto(s) por esse seguro.'}),a.abrupt("return");case 11:if(E={apolice:s,seguradora_id:c,codigo_empresa:m.codigoEmpresa},S=Oe()(d,"YYYY-MM-DD",!0),x=Oe()(u,"YYYY-MM-DD",!0),y=S.isValid(),O=x.isValid(),w=x.isSameOrBefore(S,"day"),C=x.isBefore(Oe()(),"day"),k=S.isAfter(Oe()(),"day"),D=S.isSameOrBefore(Oe()(),"day"),!w){a.next=15;break}return alert("A data de vencimento informada \xe9 anterior ao in\xedcio da vig\xeancia."),a.abrupt("return");case 15:if(!C){a.next=18;break}return alert("O seguro informado est\xe1 vencido."),a.abrupt("return");case 18:if(k&&(E.situacao="Aguardando in\xedcio da vig\xeancia"),D&&(E.situacao="Vigente"),y&&(E.data_emissao=d),O&&(E.vencimento=u),p){a.next=32;break}return o&&(g=o.veiculos),E.codigoEmpresa,(I=Object(Y.a)(E,["codigoEmpresa"])).seguradora=r,I=A.a.camelizeKeys(I),N={empresaId:null===m||void 0===m?void 0:m.codigoEmpresa,history:Object(h.a)(Object(h.a)({},I),{},{vehicleIds:g,files:v}),demandFiles:f,metadata:{fieldName:"apoliceDoc",apolice:s,empresaId:null===m||void 0===m?void 0:m.codigoEmpresa},historyLength:0,approved:t},l[0]&&(N.history.deletedVehicles=l),Pe(N),e.confirmAndResetState("Solicita\xe7\xe3o de cadastro de seguro enviada"),a.abrupt("return");case 32:!1===t&&(Pe({id:p.id,history:{info:b},declined:!0}).then((function(e){return console.log(e)})),e.confirmAndResetState("Solicita\xe7\xe3o indeferida!")),!0===t&&e.approveInsurance(E);case 34:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.approveInsurance=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f,v,b,g,E,S,x,y,O;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.props.redux.seguros,r=e.state,o=r.apolice,i=r.vencimento,l=r.dataEmissao,c=r.seguradoraId,s=r.insurance,d=r.demand,u=r.demandFiles,m=s.veiculos,p={table:"veiculos",column:"apolice",value:o,tablePK:"veiculo_id",ids:m},!(f=n.find((function(e){return e.apolice===o})))){a.next=16;break}if(v=Oe()(f.dataEmissao).isSame(Oe()(l)),b=Oe()(f.vencimento).isSame(Oe()(i)),g=JSON.stringify(m)===JSON.stringify(f.veiculos),!(v&&b&&g)){a.next=8;break}return e.setState({openAlertDialog:!0,customTitle:"Seguro existente",customMsg:"O seguro informado j\xe1 existe no sistema. Para cadastrar um novo seguro, altere o n\xfamero da ap\xf3lice, ou as datas de emiss\xe3o e vencimento."}),a.abrupt("return");case 8:if("Vigente"!==t.situacao){a.next=16;break}return S={dataEmissao:l,vencimento:i,seguradoraId:c,situacao:t.situacao},S=A.a.decamelizeKeys(S),x=Object.keys(S),y={id:null===f||void 0===f?void 0:f.id,vehicleIds:m,columns:x,updates:S},a.next=14,F.a.put("/api/updateInsurance",Object(h.a)({},y));case 14:(O=null===d||void 0===d||null===(E=d.history[0])||void 0===E?void 0:E.deletedVehicles)&&(p.deletedVehicles=O);case 16:if("Aguardando in\xedcio da vig\xeancia"!==t.situacao){a.next=21;break}return t.veiculos=m,console.log(Object(h.a)({},t)),a.next=21,F.a.post("/api/cadSeguroMongo",Object(h.a)({},t));case 21:if("Vigente"!==t.situacao||f){a.next=24;break}return a.next=24,F.a.post("/api/cadSeguro",t).then((function(e){200===e.status&&console.log(e.status,"cadSeguroOk")}));case 24:return a.next=26,F.a.put("/api/updateInsurances",p).then((function(a){console.log(a.data),e.setState({dontUpdateProps:!0})}));case 26:Pe({id:d.id,demandFiles:u,history:{},metadata:{},approved:!0}),e.confirmAndResetState();case 29:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.confirmAndResetState=function(a){var t=e.state.demand;e.toast(a),e.clearFields(),t&&setTimeout((function(){e.props.history.push("/solicitacoes")}),1500)},e.handleFiles=function(){var a=Object(w.a)(j.a.mark((function a(t){var n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!be(t)){a.next=2;break}return a.abrupt("return");case 2:return(n=new FormData).append("apoliceDoc",t[0]),a.next=6,e.setState({apoliceDoc:n,fileToRemove:null});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.removeFile=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.state.apoliceDoc,r=xe(t,n),e.setState(Object(h.a)(Object(h.a)({},e.state),r));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.addNewElement=function(){return e.setState({apolice:e.state.newElement,openAddDialog:!1})},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({openAddDialog:!e.state.openAddDialog})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.clearFields=function(){e.setState({seguradora:"",insurance:void 0,apolice:"",dataEmissao:"",vencimento:"",apoliceDoc:null,deletedVehicles:[],dropDisplay:"Clique ou arraste para anexar a ap\xf3lice"})},e.escFunction=function(a){27===a.keyCode&&(e.state.openAddDialog&&e.toggleDialog(),e.state.showAllPlates&&e.setState({showAllPlates:!1}))},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,n,r,o,i,l,c,s,d,u,m;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.redux,!(o=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.demand)){e.next=13;break}return i=ut(o,r,[]),l=i.latestDoc,i.newMembers,i.oldMembers,i.filteredSocios,c=Object(Y.a)(i,["latestDoc","newMembers","oldMembers","filteredSocios"]),s=null===o||void 0===o?void 0:o.history[0],d={},ot.forEach((function(e){var a=e.field;s.hasOwnProperty(a)&&(d[a]=s[a])})),u=r.veiculos.filter((function(e){return s.vehicleIds.some((function(a){return a===e.veiculoId}))})),d.placas=u.map((function(e){return e.placa})),d.veiculos=u.map((function(e){return e.veiculoId})),m=null===s||void 0===s?void 0:s.seguradoraId,e.next=10,this.setState(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},this.state),c),d),{},{insurance:d,demand:o,seguradoraId:m,demandFiles:[l]}));case 10:return e.next=12,this.filterInsurances();case 12:this.renderPlacas();case 13:document.addEventListener("keydown",this.escFunction,!1);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.openAlertDialog,o=a.alertType,i=a.openAddDialog,l=a.showAllPlates,c=a.allPlates,s=a.allPlatesObj,d=a.selectAll,u=a.customTitle,m=a.customMsg,p=this.props.redux,f=p.empresas,v=p.seguradoras,h=p.seguros,b=ot.every((function(a){return e.state.hasOwnProperty(a.field)&&""!==e.state[a.field]}));return r.a.createElement(n.Fragment,null,r.a.createElement(ct,{data:this.state,empresas:f,seguros:h,seguradoras:v,enableAddPlaca:b,handleInput:this.handleInput,handleBlur:this.handleBlur,addPlate:this.addPlate,removeFromInsurance:this.removeFromInsurance,enableChangeApolice:this.toggleDialog,handleFiles:this.handleFiles,handleSubmit:this.handleSubmit,showAllPlates:this.showAllPlates,setShowPendencias:this.setShowPendencias,removeFile:this.removeFile}),i&&r.a.createElement(dt,{open:i,close:this.toggleDialog,title:"Alterar n\xfamero da ap\xf3lice",helperMessage:"Informe o n\xfamero atualizado da ap\xf3lice.",handleInput:this.handleInput,addNewElement:this.addNewElement}),l&&r.a.createElement(st,{items:c,close:this.showAllPlates,title:"Selecione as placas para adicionar \xe0 ap\xf3lice.",handleCheck:this.handleCheck,data:s,selectAll:d,selectAllPlates:this.selectAllPlates}),t&&r.a.createElement(Ya,{open:t,close:this.closeAlert,alertType:o,customTitle:u,customMessage:m}),r.a.createElement(ee,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}))}}]),t}(n.Component));function ft(e){var a,t,o=e.open,i=e.type,l=e.close,c=e.confirm,s=e.element,d=e.id,u=e.index;e.customTitle,e.customMessage;return"delete"===i&&(a="Confirmar exclus\xe3o",t="Tem certeza que deseja excluir esse registro?",s&&(t=t.replace("?",": "))),a&&t?r.a.createElement("div",null,r.a.createElement(Va.a,{open:o,onClose:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Ua.a,{id:"alert-dialog-title"},a),r.a.createElement(Ba.a,null,r.a.createElement(Ra.a,{id:"alert-dialog-description"},s?r.a.createElement(n.Fragment,null,t,r.a.createElement("strong",null,"  ",s,"    "),"?"):t)),r.a.createElement(_a.a,null,r.a.createElement(Ye.a,{onClick:l,autoFocus:!0}," Cancelar "),r.a.createElement(Ye.a,{onClick:function(){return c(d||u)},color:"primary"}," Confirmar ")))):null}var vt=[{field:"id",label:"N\xfamero do laudo",maxLength:30},{field:"validade",label:"Data de validade",type:"date"},{field:"empresaLaudo",label:"Empresa emissora",select:!0}],ht=function(e){var a=e.veiculoId,t=e.city,n=e.placa,o=e.onClick,i=e.style;return r.a.createElement("div",{id:a,onClick:o,style:i,className:"placaContainer"},r.a.createElement("div",{className:"placaCity"},t),r.a.createElement("div",{className:"placaCode"},n))},bt=t(119),gt=t.n(bt);function Et(e){var a=e.table,t=e.docsCollection,n=e.length,o=e.title,i=e.style,l=e.idIndex,c=void 0===l?0:l,s=e.filePK,d=e.deleteIconProperties,u=void 0===d?{}:d,m=e.deleteFunction,p=a.tableHeaders,f=a.arrayOfRows,v=a.docs;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",style:i,colSpan:n},o)),r.a.createElement("tr",null,p.map((function(e,a){return r.a.createElement("th",{key:a,style:i},e)})))),r.a.createElement("tbody",null,f.map((function(e,a){return r.a.createElement("tr",{key:a},e.map((function(a,n){var o,l;return r.a.createElement("td",{key:n,style:i,className:"link"===a.type&&a.fileId?"link2":"review",onClick:function(){var n;return a.field===s&&a.fileId?function(e){var a=v.find((function(a){return a.id===e}));e&&a&&va(a.id,a.filename,t,a.metadata.fieldName)}(a.fileId):"delete"===(null===a||void 0===a?void 0:a.action)?m(null===(n=e[c])||void 0===n?void 0:n.value):null}},"date"===a.type?(l=a.value,Oe()(l,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?Oe()(l,Oe.a.ISO_8601,!0).format("DD/MM/YYYY"):l):"delete"===(null===a||void 0===a?void 0:a.action)&&(null===(o=e[c])||void 0===o?void 0:o.value)?r.a.createElement(gt.a,u):a.value)})))}))))}var St=t(214),xt=t(6),yt=Object(xt.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return r.a.createElement(St.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"}},e))})),Ot=function(e){var a=e.anchorEl,t=e.handleClose,n=e.menuOptions;return r.a.createElement(r.a.Fragment,null,r.a.createElement(yt,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:t},n.map((function(e,a){var t=e.title,n=e.onClick;return r.a.createElement(Me.a,{key:a,onClick:n},t)}))))},jt=t(248),wt=t.n(jt),Ct=t(151),kt=t.n(Ct),Dt=r.a.memo((function(e){var a=e.empresas,t=e.razaoSocial,n=e.selectedEmpresa,o=e.filteredVehicles,i=e.selectedVehicle,l=e.stateInputs,c=e.selectOptions,s=e.table,d=e.anchorEl,u=e.laudoDoc,m=e.dropDisplay,p=e.functions,f=e.demand,v=e.demandFiles,b=e.showPendencias,g=e.info,E=e.fileToRemove,S=null===i||void 0===i?void 0:i.placa,x=p.handleInput,y=p.clickOnPlate,O=p.showDetails,j=p.handleFiles,w=p.handleSubmit,C=p.closeMenu,k=p.clear,D=p.removeFile,I=p.deleteLaudo,N=p.setShowPendencias,A=function(e){if(!(e&&e[0]&&e[0].validade))return{backgroundColor:"rgb(136, 13, 13)"};var a=e[0].validade;return Oe()(a,Oe.a.ISO_8601).isValid()&&Oe()(a).isAfter(Oe()().toDate())?{backgroundColor:"rgb(13, 136, 13)"}:Oe()(a,Oe.a.ISO_8601).isValid()&&Oe()(a).isBefore(Oe()().toDate())?{backgroundColor:"rgb(197, 128, 0)"}:void 0};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Na,{links:["Ve\xedculos","/veiculos"],text:"Laudos",demand:f,selectedEmpresa:n}),r.a.createElement("div",{style:f?{marginTop:"15px"}:{}},r.a.createElement(Le,{empresas:a,data:{razaoSocial:t,demand:f},headerTitle:S&&n&&"Cadastro de laudo veicular ".concat(S," - ").concat(null===n||void 0===n?void 0:n.razaoSocial),handleInput:x})),n&&!Array.isArray(n)&&r.a.createElement(r.a.Fragment,null,!f&&r.a.createElement("header",{className:"flex",style:{marginBottom:"15px",justifyContent:"space-between"}},i?r.a.createElement(ht,{veiculoId:i.veiculoId,onClick:y,style:Object(h.a)(Object(h.a)({},A(i.laudos)),{},{marginLeft:0}),city:n.cidade,placa:i.placa}):r.a.createElement(Be,{subtitle:"Selecione o ve\xedculo para atualizar consultar ou inserir o laudo de seguran\xe7a veicular.",style:{marginTop:"25px"}}),r.a.createElement("div",null,r.a.createElement(qe.a,{inputProps:{name:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Filtrar",onChange:x}),r.a.createElement(rt.a,{style:{marginTop:"10px"}}))),i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"paper",style:f?{marginTop:"15px"}:{}},r.a.createElement(Be,{subtitle:f?"Verifique as informa\xe7\xf5es abaixo, confira com o laudo anexo e escolha uma das op\xe7\xf5es abaixo.":"Para inserir novo laudo, informe o n\xfamero, a data de vencimento, a empresa que emitiu e anexe o documento referente ao laudo."}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(_e,{form:vt,data:l,handleInput:x,selectOptions:c}),f?v&&r.a.createElement(Sa,{demand:f,collection:"vehicleDocs",demandFiles:v,form:[{title:"Laudo veicular",name:"laudoDoc"}]}):r.a.createElement(oa,{name:"laudoDoc",formData:u,dropDisplay:m,handleFiles:j,removeFile:D,fileToRemove:E,single:!0,style:{width:"400px",margin:"15px auto 0 auto"}})),r.a.createElement("section",null,n&&!f?r.a.createElement(Ye.a,{size:"small",color:"primary",className:"saveButton",variant:"contained",onClick:function(){return w()}},"Cadastrar Laudo"):n&&f?r.a.createElement(Pa,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:f,setShowPendencias:function(){return N(!b)},showPendencias:b,info:g,handleSubmit:w,handleInput:x}):null)),r.a.createElement("section",null,r.a.createElement("h4",null,i?null:r.a.createElement("div",{className:"flex",style:{justifyContent:"space-between"}},r.a.createElement("div",null,"Exibindo ".concat(o.length," ve\xedculos com mais de 15 anos.")),r.a.createElement("div",{className:"flex placasCaption",style:{fontSize:"0.8rem"}},r.a.createElement("span",null,r.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(13, 136, 13)"}},r.a.createElement(wt.a,null))," Laudo vigente"),r.a.createElement("span",null,r.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(197, 128, 0)"}},r.a.createElement(wt.a,null))," Laudo vencido                                            "),r.a.createElement("span",null,r.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(136, 13, 13)"}},r.a.createElement(wt.a,null))," Nenhum Laudo cadastrado"))))),!i&&r.a.createElement("section",{className:"center flex paper"},o.map((function(e,a){return r.a.createElement(ht,{key:a,veiculoId:e.veiculoId,onClick:y,style:A(e.laudos),city:n.cidade,placa:e.placa})}))),r.a.createElement(Ot,{anchorEl:d,handleClose:C,menuOptions:[{title:"Detalhes",onClick:O}]})),i&&i.laudos&&!f&&r.a.createElement(r.a.Fragment,null,"object"===typeof s?r.a.createElement("div",{className:"paper",style:{marginTop:"52px",width:"100%",padding:"0",borderRadius:"5px",overflow:"hidden"}},r.a.createElement(Et,{length:s.tableHeaders.length,title:"Laudos vinculados ao ve\xedculo placa ".concat(i.placa),table:s,style:{textAlign:"center",padding:"8px 0"},deleteIconProperties:{color:"secondary",title:"Apagar Laudo",style:{cursor:"pointer"}},deleteFunction:I,idIndex:1,filePK:"laudoDoc",docsCollection:"vehicleDocs"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,s)),r.a.createElement("div",{className:"voltarDiv",onClick:k},r.a.createElement(kt.a,{size:"small"}),r.a.createElement("span",{style:{padding:"2px 0 0 2px",marginLeft:"2px",fontSize:"1rem"}},"Voltar"))))}));var It={field:"razaoSocial",label:"Empresa",width:"340px"},Nt={field:"createdAt",label:"Data do registro no sistema",type:"date",width:"190px"},At={field:"cnpj",label:"CNPJ",maxLength:18,pattern:/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/,errorHandler:function(e){return function(e){if(""===(e=e.replace(/[^\d]+/g,"")))return!1;if(14!==e.length)return!1;if("00000000000000"===e||"11111111111111"===e||"22222222222222"===e||"33333333333333"===e||"44444444444444"===e||"55555555555555"===e||"66666666666666"===e||"77777777777777"===e||"88888888888888"===e||"99999999999999"===e)return!1;for(var a=e.length-2,t=e.substring(0,a),n=e.substring(a),r=0,o=a-7,i=a;i>=1;i--)r+=t.charAt(a-i)*o--,o<2&&(o=9);if((r%11<2?0:11-r%11).toString()!==n.charAt(0))return!1;a+=1,t=e.substring(0,a),r=0,o=a-7;for(var l=a;l>=1;l--)r+=t.charAt(a-l)*o--,o<2&&(o=9);return(r%11<2?0:11-r%11).toString()===n.charAt(1)}(e)}},Pt={field:"cpfSocio",label:"CPF",maxLength:14,width:190,errorHandler:function(e){return function(e){if(e){var a,t;if(a=0,"00000000000"===e)return!1;for(var n=1;n<=9;n++)a+=parseInt(e.substring(n-1,n))*(11-n);if(10!==(t=10*a%11)&&11!==t||(t=0),t!==parseInt(e.substring(9,10)))return!1;a=0;for(var r=1;r<=10;r++)a+=parseInt(e.substring(r-1,r))*(12-r);return 10!==(t=10*a%11)&&11!==t||(t=0),t===parseInt(e.substring(10,11))}}((a=e)?a.replace(/(\.|\/|-)/g,""):void 0);var a}},Ft={label:"Telefone",maxLength:15,pattern:"((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))"},Tt={label:"E-mail",type:"email",maxLength:60,pattern:"[a-zA-Z0-9]@[a-zA-Z0-9]{1,20}?[.]([a-zA-Z0-9])"},zt=[{field:"razaoSocial",width:"540px"},{field:"rua",width:"540px"},{field:"situacao",label:"Situa\xe7\xe3o"},Object(h.a)(Object(h.a)({},Nt),{},{width:"150px"}),{field:"frota",label:"Tamanho da Frota"},{field:"oldId",label:"C\xf3digo no sistema antigo"}],Lt=[Object(h.a)({},It),Object(h.a)({},Nt)],Mt=[Object(h.a)({},It),Object(h.a)({},Nt),Object(h.a)({},{field:"placas",label:"Ve\xedculos cadastrados",width:"340px"}),{field:"segurados",label:"N\xfamero de ve\xedculos segurados"}],qt=[{field:"dataRegistro",label:"Data do registro no sistema",type:"date"},{field:"pbt",label:"Peso Bruto Total"},{field:"situacao",label:"Situa\xe7\xe3o"},{field:"indicadorIdade",label:"Indicador de idade"},{field:"equipamentosId",label:"Equipamentos"},{field:"compartilhado",label:"Compartilhado por"},{field:"marcaChassi",label:"Marca do Chassi"},{field:"marcaCarroceria",label:"Marca da Carroceria"}],Vt=[[{field:"placa",label:"Placa",margin:"normal",maxLength:8,pattern:"[a-zA-Z]{3}[-]?[ ]?\\d{4}|[A-Z]{3}[-]?[ ]?[0-9]{1}[A-Z]{1}[0-9]{2}"},{field:"renavam",label:"Renavam",margin:"normal",maxLength:11,pattern:/^(\d{9}|\d{11})$/},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Convencional","Executivo","Leito","Semi-Leito","Urbano"]},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",datalist:"modeloChassi",autoComplete:!0,collection:"modelosChassi"},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",max:Number((new Date).getFullYear()),min:Number((new Date).getFullYear())-10},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",datalist:"modelo",autoComplete:!0,collection:"carrocerias"},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",max:Number((new Date).getFullYear()+1),min:Number((new Date).getFullYear())-10},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50}]].concat([ot]).concat([Je]),_t=[{field:"razaoSocial",label:"Raz\xe3o Social"},Object(h.a)(Object(h.a)({},At),{},{maxLength:18,pattern:/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/}),{field:"inscricaoEstadual",label:"Inscri\xe7\xe3o Estadual",maxLength:13,pattern:"\\d{13}"},Object(h.a)(Object(h.a)({},Ft),{},{field:"telefone",label:"Telefone"}),Object(h.a)(Object(h.a)({},Tt),{},{field:"email",label:"E-mail"}),{field:"cep",label:"CEP",maxLength:10},{field:"numero",label:"N\xfamero",type:"number",max:32e3},{field:"complemento",label:"Complemento",maxLength:20},{field:"rua",label:"Rua",maxLength:100},{field:"bairro",label:"Bairro",maxLength:40},{field:"cidade",label:"Cidade",maxLength:60},{field:"uf",label:"Estado",maxLength:2,pattern:"[A-Z]{2}"},{field:"vencimentoContrato",label:"Vencimento do Contrato",type:"date"}],Bt=[{field:"nomeSocio",label:"Nome do S\xf3cio",maxLength:90,width:195},Object(h.a)(Object(h.a)({},Pt),{},{width:195}),Object(h.a)(Object(h.a)({},Ft),{},{field:"telSocio",width:195}),Object(h.a)(Object(h.a)({},Tt),{},{field:"emailSocio",width:195}),{field:"share",label:"Participa\xe7\xe3o Societ\xe1ria (%)",type:"number",max:100,width:195}],Rt=[{field:"nomeProcurador",label:"Nome do Procurador",maxLength:90,width:240},Object(h.a)(Object(h.a)({},Pt),{},{field:"cpfProcurador",width:240}),Object(h.a)(Object(h.a)({},Ft),{},{field:"telProcurador",width:240}),Object(h.a)(Object(h.a)({},Tt),{},{field:"emailProcurador",width:240})],Ut=function(e,a){if(a){delete a.tableData;var t=[],n=Yt(e);return Object.keys(a).forEach((function(r){if(3===e){var o=a,i=(o.veiculoId,o.laudoId,o.tableData,o.modeloChassiId,o.modeloCarroceriaId,o.codigoEmpresa,o.vencimentoContrato,o.delegatarioCompartilhado,o.acessibilidadeId,o.equipamentosId,Object(Y.a)(o,["veiculoId","laudoId","tableData","modeloChassiId","modeloCarroceriaId","codigoEmpresa","vencimentoContrato","delegatarioCompartilhado","acessibilidadeId","equipamentosId"]));a=i}n.forEach((function(e){var n=e.field,o=e.label,i=e.type,l=e.width;e.fullWidth;if(r===n){var c={};Object.assign(c,{field:n,label:o,value:a[r]}),i&&Object.assign(c,{type:i}),l&&Object.assign(c,{width:l}),t.push(c),c={}}}))})),Object.keys(a).forEach((function(n){t.find((function(e){return e.field===n}))||3!==e||t.push({field:n,label:n,value:a[n]})})),t}};function Yt(e){var a;switch(e){case 0:return a=function(e,a){var t,n=[],r=Object(v.a)(a);return e.forEach((function(e){r.forEach((function(a,o){e.field===a.field?(t=Object.assign({},e,a),r.splice(o,1),n.push(t)):n.find((function(a){return a.field===e.field}))||n.push(e)}))})),n=n.concat(r)}(_t,zt);case 1:return a=Bt.concat(Lt);case 2:return a=Rt;case 3:var t=[];return(a=Vt.concat([qt])).forEach((function(e){t=[].concat(Object(v.a)(t),Object(v.a)(e))})),t;case 4:return a=ot.concat(Mt);default:return a}}var Ht=[{field:"nomeProcurador",title:"Nome"},{field:"cpfProcurador",title:"CPF"},{field:"emailProcurador",title:"E-mail"},{field:"telProcurador",title:"Telefone"},{field:"vencimento",title:"Validade da procura\xe7\xe3o",type:"date",format:function(e){return e||"Prazo indeterminado"}},{field:"fileId",title:"Baixar Procura\xe7\xe3o",type:"link"}],Kt=[{field:"numeroAlteracao",label:"N\xfamero da altera\xe7\xe3o"},{field:"numeroRegistro",label:"Registro na junta comercial"},{field:"numeroSei",label:"N\xfamero do registro SEI"},{field:"dataJunta",label:"Registro na Junta Comercial",type:"date",format:function(e){return e||"Nenhuma data informada"}},{field:"fileId",label:"Baixar altera\xe7\xe3o contratual",value:"Clique para baixar o arquivo",type:"link"}];function Jt(e){var a=e.data,t=e.tab,o=e.title,i=e.header,l=e.close,c=e.empresas,s=e.procuracoes,d=e.procuradores,u=e.empresaDocs,m=e.altContrato,p=Object(n.useState)(),f=Object(Te.a)(p,2),v=f[0],b=f[1],g=Object(n.useState)(),E=Object(Te.a)(g,2),S=E[0],x=E[1],y=Object(n.useState)([]),O=Object(Te.a)(y,2),C=O[0],k=O[1],D=Ut(t,a)||[],I=D.find((function(e){return"obs"===e.field}));Object(n.useEffect)((function(){!function(e){if(0===e){var t,n,r,o=[],i=[],l=[],m=[],p=null===(t=D.find((function(e){return"razaoSocial"===e.field})))||void 0===t?void 0:t.value,f=null===(n=c.find((function(e){return e.razaoSocial===p})))||void 0===n?void 0:n.codigoEmpresa,v=s.filter((function(e){return e.codigoEmpresa===f})),g=u.filter((function(e){var a,t;return"procuracao"===(null===(a=e.metadata)||void 0===a?void 0:a.fieldName)&&(null===(t=e.metadata)||void 0===t?void 0:t.empresaId)===f}));d.forEach((function(e){v.forEach((function(a){if(a.procuradores.some((function(a){return a===e.procuradorId}))){var t=Object(h.a)(Object(h.a)({},e),{},{vencimento:a.vencimento}),n=u.find((function(e){return e.metadata.procuracaoId===a.procuracaoId}));n&&(t.fileId=null===n||void 0===n?void 0:n.id),o.push(t)}}))})),o.forEach((function(e){Ht.forEach((function(a){var t=a.field;if(i.some((function(e){return e===a.title}))||i.push(a.title),e.hasOwnProperty(t)&&!m.some((function(e){return e.hasOwnProperty(t)}))){if(r="fileId"===t&&e.fileId?Object(h.a)(Object(h.a)({},a),{},{value:"Clique para baixar a procura\xe7\xe3o",fileId:e.fileId}):Object(h.a)(Object(h.a)({},a),{},{value:e[t]}),a.format){var n=a.format(e[t]);r=Object(h.a)(Object(h.a)({},a),{},{value:n})}m.push(r)}})),l.push(m),m=[]})),o[0]&&b({mainTitle:"Procuradores cadastrados para ".concat(null===a||void 0===a?void 0:a.razaoSocial),tableHeaders:i,arrayOfRows:l,docs:g}),N()}}(t)}),[t]);var N=function(){var e=Object(w.a)(j.a.mark((function e(){var t,n,r,o,i,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m&&(t=m.filter((function(e){return e.codigoEmpresa===a.codigoEmpresa})),n=u.filter((function(e){var t;return"altContratoDoc"===(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.fieldName)&&(null===e||void 0===e?void 0:e.metadata.empresaId)===a.codigoEmpresa})),r=[],o=[],i=[],l={},t.forEach((function(e){Kt.forEach((function(a){var t=a.field;if(r.includes(a.label)||r.push(a.label),"fileId"===t||e.hasOwnProperty(t)&&!i.some((function(e){return e.hasOwnProperty(t)}))){if("fileId"===t){var o,c=n.find((function(a){return a.metadata.numeroRegistro===e.numeroRegistro}));(c=null===(o=c)||void 0===o?void 0:o.id)&&(l=Object(h.a)(Object(h.a)({},a),{},{value:null===a||void 0===a?void 0:a.value,fileId:c}))}else l=Object(h.a)(Object(h.a)({},a),{},{value:e[t]});if(a.format){var s=a.format(e[t]);l=Object(h.a)(Object(h.a)({},a),{},{value:s})}i.push(l)}})),o.push(i),i=[]})),t[0]&&x({mainTitle:"Altera\xe7\xf5es do contrato social - ".concat(null===a||void 0===a?void 0:a.razaoSocial),tableHeaders:r,arrayOfRows:o,docs:n}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=[];v&&e.push(v),S&&e.unshift(S),e[0]&&k(e)}),[v,S]),r.a.createElement("div",{className:"popUpWindow",style:{left:"20%",right:"20%"}},r.a.createElement("h4",{className:"equipaHeader"},o," ",a[i])," ",r.a.createElement("hr",null),r.a.createElement("main",{className:"checkListContainer",style:{justifyContent:"flex-start"}},D.map((function(e,a){var t=e.field,n=e.label,o=e.value,i=e.type,l=e.width;return"obs"!==t&&r.a.createElement("div",{className:"showDetailsItem",style:{width:l||150},key:a},r.a.createElement(qe.a,{name:t,label:n,value:"date"===i?Oe()(o).format("DD/MM/YYYY"):o||"",InputLabelProps:{shrink:!0,style:{fontSize:"0.9rem",fontWeight:500}},inputProps:{style:{fontSize:"0.7rem",width:l||150,fontColor:"#bbb",textAlign:"center"}},variant:"outlined"}))}))),C[0]&&C.map((function(e,a){return r.a.createElement("section",{key:a},r.a.createElement("hr",{style:{margin:"12px 0"}}),r.a.createElement(Et,{length:e.tableHeaders.length,title:e.mainTitle,table:e,style:{textAlign:"center",padding:"8px 0"},idIndex:1,filePK:"fileId",docsCollection:"empresaDocs"}))})),3===t&&(null===I||void 0===I?void 0:I.value)&&r.a.createElement("footer",{className:"flexColumn"},r.a.createElement("label",{htmlFor:"obs",className:"obs__label"},"Observa\xe7\xf5es:"),r.a.createElement("textarea",{name:"obs",id:"obs",className:"obs__textArea",defaultValue:null===I||void 0===I?void 0:I.value,cols:"30",rows:"6",disabled:!0})),r.a.createElement($e,{close:l}))}var Wt=[{field:"empresaLaudo",title:"Empresa Emissora"},{field:"id",title:"N\xfamero do Laudo"},{field:"createdAt",title:"Registro no sistema",type:"date"},{field:"validade",title:"Data de validade",type:"date"},{field:"laudoDoc",title:"Laudo",type:"link"},{field:"delete",title:"Remover",action:"delete",deleteFile:!0}],$t=1,Gt=ce(["veiculos","empresas","empresasLaudo","laudos","getFiles/vehicleDocs"],(function(e){var a,t,o=e.redux,i=o.veiculos,l=o.empresas,c=o.empresasLaudo,s=o.laudos,d=o.vehicleDocs,u=null===e||void 0===e||null===(a=e.location)||void 0===a||null===(t=a.state)||void 0===t?void 0:t.demand,m=Object.freeze({dropDisplay:"Clique ou arraste o arquivo para anexar o laudo",stateInputs:{id:void 0,validade:"",empresaLaudo:""}}),p=Object(n.useState)(""),b=Object(Te.a)(p,2),g=b[0],E=b[1],S=Object(n.useState)(),x=Object(Te.a)(S,2),y=x[0],O=x[1],C=Object(n.useState)(),k=Object(Te.a)(C,2),D=k[0],I=k[1],N=Object(n.useState)([]),A=Object(Te.a)(N,2),P=A[0],T=A[1],z=Object(n.useState)(!1),L=Object(Te.a)(z,2),M=L[0],q=L[1],V=Object(n.useState)(),_=Object(Te.a)(V,2),B=_[0],R=_[1],U=Object(n.useState)(null),H=Object(Te.a)(U,2),K=H[0],J=H[1],W=Object(n.useState)(m.dropDisplay),$=Object(Te.a)(W,2),G=$[0],Z=$[1],X=Object(n.useState)(),Q=Object(Te.a)(X,2),ae=Q[0],te=Q[1],ne=Object(n.useState)(Object(h.a)({},m.stateInputs)),re=Object(Te.a)(ne,2),oe=re[0],ie=re[1],le=Object(n.useState)(!1),ce=Object(Te.a)(le,2),se=ce[0],de=ce[1],ue=Object(n.useState)("Laudo enviado com sucesso."),me=Object(Te.a)(ue,2),pe=me[0],ve=me[1],he=Object(n.useState)(),ge=Object(Te.a)(he,2),Ee=ge[0],Se=ge[1],xe=Object(n.useState)(),ye=Object(Te.a)(xe,2),Oe=ye[0],we=ye[1],Ce=Object(n.useState)(),ke=Object(Te.a)(Ce,2),De=ke[0],Ie=ke[1],Ne=Object(n.useState)(!1),Ae=Object(Te.a)(Ne,2),Fe=Ae[0],ze=Ae[1],Le=Object(n.useState)({open:!1,type:"inputError",msg:""}),Me=Object(Te.a)(Le,2),qe=Me[0],Ve=Me[1],_e=Object(n.useState)({open:!1,type:"delete",element:void 0}),Be=Object(Te.a)(_e,2),Re=Be[0],Ue=Be[1];if(Object(n.useEffect)((function(){document.addEventListener("keydown",(function(e){27===e.keyCode&&q(!1),J(null)}))}),[]),u&&1===$t){$t++;var Ye=u.history,He={},Ke=fe(u,e.redux),Je=Ke.selectedEmpresa,We=Ke.demandFiles,$e=Ke.originalVehicle;Object.entries(Ye[0]).forEach((function(e){var a=Object(Te.a)(e,2),t=a[0],n=a[1];oe.hasOwnProperty(t)&&(He[t]=n)})),O(Je),E(Je.razaoSocial),ie(He),we(We),R($e)}Object(n.useEffect)((function(){function e(){return(e=Object(w.a)(j.a.mark((function e(){var a,t,n,r,o,l,c,d;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y||""===y){e.next=18;break}return a=(new Date).getFullYear(),t=i.filter((function(e){return e.empresa===y.razaoSocial})),n=t.filter((function(e){return a-e.anoCarroceria>14&&null!==e.anoCarroceria})).sort((function(e,a){return e.placa.localeCompare(a.placa)})),r=[],o=[],n.forEach((function(e){s.forEach((function(a){e.veiculoId===a.veiculoId&&o.push(a)})),o.sort((function(e,a){var t=new Date(e.validade);return new Date(a.validade)-t})),r.push(Object(h.a)(Object(h.a)({},e),{},{laudos:o})),o=[]})),e.next=6,I(r);case 6:return e.next=8,T(r);case 8:if(!(B&&(null===r||void 0===r?void 0:r.length)>0)){e.next=16;break}if((null===(d=r.find((function(e){return e.veiculoId===B.veiculoId})))||void 0===d||null===(l=d.laudos)||void 0===l?void 0:l.length)===(null===B||void 0===B||null===(c=B.laudos)||void 0===c?void 0:c.length)){e.next=15;break}return e.next=13,R(d);case 13:e.next=16;break;case 15:return e.abrupt("return");case 16:e.next=21;break;case 18:I(),T([]),O();case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[y,i,s,B]);var Ge=Object(n.useCallback)((function(e){var a=e.target.name,t=e.target.value;if("razaoSocial"!==a){if("placa"===a&&D[0]){if("string"===typeof t&&(t=t.toLocaleUpperCase()),t&&""!==t){var n,r=D.filter((function(e){return e.placa.match(t)}));return 1===r.length&&(n=r[0]),T(r),void R(n)}T(D)}ie(Object(h.a)(Object(h.a)({},oe),{},Object(f.a)({},a,t)))}else{E(t);var o=l.find((function(e){return e.razaoSocial===t}));O(o)}}),[E,l,D,oe]),Ze=function(){var e=Object(w.a)(j.a.mark((function e(a){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B?(a.persist(),J(a.target)):((t=a.currentTarget.id)&&(n=D.find((function(e){return e.veiculoId.toString()===t}))),R(n),T([n]));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){if(B&&!u)if(B.laudos&&B.laudos[0]){var e=null===B||void 0===B?void 0:B.laudos,a=d.filter((function(e){return"laudoDoc"===e.metadata.fieldName})),t=[],n=[],r=[],o=Object(v.a)(Wt);e.forEach((function(e){o.forEach((function(t){var o,i=a.find((function(a){return a.metadata.laudoId===e.id||a.metadata.laudoId.toString()===e.id.toString()}));i&&(o=i.id),n.includes(t.title)||n.push(t.title);t.title;var l=Object(Y.a)(t,["title"]);"laudoDoc"===t.field?r.push(Object(h.a)(Object(h.a)({},l),{},{value:e[t.field],fileId:o})):r.push(Object(h.a)(Object(h.a)({},l),{},{value:e[t.field]}))})),r[4].fileId?r[4].value="Clique para visualizar o laudo":r[4].value="Nenhum arquivo encontrado",t.push(r),r=[]})),o=Object(v.a)(Wt),Se({tableHeaders:n,arrayOfRows:t,docs:a})}else Se("Nenhum laudo cadastrado para o ve\xedculo placa ".concat(B.placa,"."))}),[B,s,d,u]),Object(n.useEffect)((function(){$t=1}),[]);var Xe=function(){B?(q(!M),J(null)):(q(!1),R(void 0),J(null))},Qe=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,d,m,p,f,v,b;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=null===y||void 0===y?void 0:y.codigoEmpresa,r=null===B||void 0===B?void 0:B.veiculoId,o=oe.empresaLaudo,i=Object(Y.a)(oe,["empresaLaudo"]),l=je()||[],!(d=s.find((function(e){return e.id===oe.id})))){a.next=7;break}return Ve(Object(h.a)(Object(h.a)({},qe),{},{open:!0,msg:"O laudo informado j\xe1 existe no sistema. Laudo n\xba "+d.id.toString()})),na(),a.abrupt("return");case 7:if(Object.keys(oe).forEach((function(e){if("validade"!==e&&(!oe[e]||""===oe[e])){var a,t=null===(a=vt.find((function(a){return a.field===e})))||void 0===a?void 0:a.label;l.push(t)}})),!l[0]){a.next=12;break}return Ve(Object(h.a)(Object(h.a)({},qe),{},{open:!0,msg:"Favor verificar o preenchimento dos seguintes campos: "+l.toString()})),na(),a.abrupt("return");case 12:if(void 0!==t){a.next=20;break}return m=Object(h.a)({},oe),p={empresaId:n,veiculoId:r,history:m,historyLength:0,metadata:{fieldName:"laudoDoc",veiculoId:r}},ae&&(p.history.files=ae),Pe(p).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})),na("all fields, reset state please!"),ea("laudoDoc"),aa(),a.abrupt("return");case 20:if(!1===t&&(Pe({id:u.id,empresaId:n,history:{info:null===oe||void 0===oe?void 0:oe.info},declined:!0}).then((function(e){return console.log(e)})),ve("Solicita\xe7\xe3o indeferida!"),aa(),setTimeout((function(){e.history.push("/solicitacoes")}),1500)),!0!==t){a.next=34;break}return(f=c.find((function(e){return e.empresa===o})))&&(i.empresa_id=f.id),i.veiculo_id=B.veiculoId,b={table:"laudos",requestElement:i},a.next=28,F.a.post("/api/addElement",b).then((function(e){var a;v=null===e||void 0===e||null===(a=e.data[0])||void 0===a?void 0:a.id,console.log(e.data)})).catch((function(e){return console.log(e)}));case 28:Pe({id:u.id,veiculoId:r,demandFiles:Oe,history:{},metadata:{laudoId:v,tempFile:"false"},approved:t}).then((function(e){return console.log(e.data)})),setTimeout((function(){e.history.push("/solicitacoes")}),1500),ve("Laudo aprovado!"),aa(),na("Clear all Of It!!!");case 34:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();var ea=function(){var e=Object(w.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ie(a),te(void 0);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),aa=function(){return de(!se)},ta=function(){return Ue(Object(h.a)(Object(h.a)({},Re),{},{open:!1}))},na=function(e){e&&ie(Object(h.a)({},m.stateInputs)),te(),Z(m.dropDisplay),I(),T()},ra=e.redux.empresasLaudo.map((function(e){return e.empresa}));return r.a.createElement(n.Fragment,null,r.a.createElement(Dt,{empresas:l,razaoSocial:g,selectedEmpresa:y,filteredVehicles:P,selectedVehicle:B,anchorEl:K,stateInputs:oe,selectOptions:ra,dropDisplay:G,laudoDoc:ae,table:Ee,demand:u,demandFiles:Oe,showPendencias:Fe,fileToRemove:De,functions:{handleInput:Ge,clickOnPlate:Ze,showDetails:Xe,handleFiles:function(e,a){if(!be(e)&&e&&e[0]){var t=new FormData;t.append("fieldName","laudoDoc"),t.append("laudoId",oe.id),t.append("veiculoId",B.veiculoId),t.append(a,e[0]),te(t),Ie(void 0)}},handleSubmit:Qe,closeMenu:function(){return J(null)},clear:function(){document.querySelector('[name = "placa"]').value="",T(D),R()},removeFile:ea,setShowPendencias:ze,deleteLaudo:function(e){Ue(Object(h.a)(Object(h.a)({},Re),{},{open:!0,element:"laudo n\xba ".concat(e),laudoId:e}))}}}),M&&r.a.createElement(Jt,{close:Xe,data:Object(h.a)(Object(h.a)({},B),{},{tableData:""}),tab:3,title:"Ve\xedculo",header:"- informa\xe7\xf5es"}),Re.open&&r.a.createElement(ft,Object.assign({},Re,{close:ta,confirm:function(e){var a=B.veiculoId;if(e){ta(),F.a.delete("/api/delete?table=laudos&tablePK=id&id=".concat(e,"&veiculoId=").concat(a)).then((function(e){var a=e.data;return console.log(a)}));var t=d.find((function(a){return"laudoDoc"===a.metadata.fieldName&&a.metadata.laudoId===e.toString()}));t&&F.a.delete("/api/deleteFile?collection=vehicleDocs&id=".concat(null===t||void 0===t?void 0:t.id)).then((function(e){var a=e.data;return console.log(a)}))}},id:Re.laudoId})),qe.open&&r.a.createElement(Ya,{open:qe.open,close:function(){return Ve(Object(h.a)(Object(h.a)({},qe),{},{open:!qe.open}))},alertType:qe.type,customMessage:qe.msg}),r.a.createElement(ee,{open:se,close:aa,msg:pe}))})),Zt=Object(n.createContext)(null);function Xt(e){var a=e.motivosBaixa,t=e.selectMotivo,n=e.selectedMotivo,o=e.demand;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flexColumn"},!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Selecione o motivo da baixa"),r.a.createElement(qe.a,{className:"config__selector",onChange:t,name:"selectedOption",value:n||"",select:!0,placeholder:"Clique para selecionar...",SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},a.map((function(e,a){return r.a.createElement(Me.a,{key:a,value:e},e)}))))))}var Qt=t(599),en=t(377),an=t(287),tn=(t(490),[{value:"baixar",label:"Baixar ve\xedculo"},{value:"gerenciar",label:"Gerenciar ve\xedculos baixados"}]);function nn(e){e.empresas;var a=e.selectOption;e.parametros,e.demand,e.checked,e.delegaTransf,e.justificativa,e.pendencias,e.handleInput,e.handleBlur,e.handleCheck,e.handleSubmit;return r.a.createElement("div",{className:"flex center"},r.a.createElement("div",{className:"flexColumn "},r.a.createElement("h3",{className:"radio__title"},"Selecione uma das op\xe7\xf5es abaixo"),r.a.createElement(an.a,{component:"fieldset"},r.a.createElement(en.a,{"aria-label":"position",name:"position",onChange:a,row:!0,style:{width:"auto"},className:"radio"},tn.map((function(e,a){var t=e.value,n=e.label;return r.a.createElement(Ue.a,{key:a,className:"radio",value:t,label:r.a.createElement("span",{className:"radio__legend"}," ",n," "),control:r.a.createElement(Qt.a,{color:"primary",size:"small"})})}))))))}var rn=function(e){var a=e.action,t=e.onClick,n=e.disabled,o=function(){return null},i="";return"save"===a&&(o=function(){return r.a.createElement(tt.a,null)},i="Salvar"),r.a.createElement(Ye.a,{size:"small",color:"primary",className:"saveButton",variant:"contained",onClick:function(){return t()},disabled:n},e.label||i," ",r.a.createElement("span",null,"\xa0\xa0 ")," ",o())},on=function(e){var a=e.data,t=e.handleInput,n=e.searchDischarged,o=e.downloadXls,i=e.reactivateVehicle,l=a.placaBaixada,c=a.dischargedFound,s=a.notFound,d=a.reactivate,u=a.selectedOption,m=JSON.parse(JSON.stringify(Ka)),p=m.find((function(e){return"Observa\xe7\xe3o"===e.label})),f=m.indexOf(p);return m.splice(f,1),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex center paper"},r.a.createElement("header",{className:"searchDischarged__header"},r.a.createElement("div",{className:"searchDischarged"},r.a.createElement("div",null,r.a.createElement("form",{onSubmit:n},r.a.createElement(qe.a,{type:"text",name:"placaBaixada",label:"Pesquisar pela placa do ve\xedculo",value:l||"",onChange:t,placeholder:"Digite a placa",InputLabelProps:{style:{fontSize:"0.7rem"}},InputProps:{style:{width:"250px",marginRight:"10px",fontSize:"0.9rem",textAlign:"center"}}})),r.a.createElement("span",{action:"search",onClick:n,style:{marginTop:"18px"}},r.a.createElement(rt.a,{className:"pointer"}))),r.a.createElement("div",{className:"downloadXls",onClick:o},r.a.createElement("img",{className:"downloadXls__icon",src:"baixar"===u?"":"/images/excel.png",alt:"Fazer o download do arquivo xlsx",title:"Arquivo xlsx com todos os ve\xedculos baixados"})))),c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"dischargedContainer"},m.map((function(e,a){var t=e.label;return r.a.createElement(qe.a,{label:t,key:a,value:c[t],disabled:!0,InputLabelProps:{style:{fontSize:"0.7rem"},shrink:!0},InputProps:{style:{width:"250px",margin:"8px 10px 0 0",fontSize:"0.7rem",color:"Situa\xe7\xe3o"===t&&"Reativado"===c[t]?"red":"#444"}}})}))),r.a.createElement("section",{className:"obs"},r.a.createElement("label",{htmlFor:"obs",className:"obs__label"},"Observa\xe7\xf5es:"),r.a.createElement("textarea",{name:"obs",id:"obs",className:"obs__textArea",defaultValue:c["Observa\xe7\xe3o"],cols:"30",rows:"6"})),d&&r.a.createElement("footer",{className:"reactivate"},r.a.createElement(rn,{action:"save",label:"Reativar",onClick:function(){return i()}})))),s&&r.a.createElement("h3",null,"Ve\xedculo n\xe3o encontrado."))},ln=t(419),cn=t.n(ln),sn=[{field:"placa",label:"Placa",datalist:"placa",autoComplete:!0,collection:"frota",maxLength:8},{field:"renavam",label:"Renavam"},{field:"nChassi",label:"N\xfamero do Chassi",maxLength:17},{field:"utilizacao",label:"Utiliza\xe7\xe3o",disabled:!0},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",disabled:!0},{field:"marcaChassi",label:"Marca do Chassi",disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",disabled:!0},{field:"marcaCarroceria",label:"Marca da Carroceria",disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",disabled:!0},{type:"number",field:"indicadorIdade",label:"Ano",disabled:!0}],dn=function(e){var a=e.selectOption,t=e.handleInput,o=e.handleBlur,i=e.handleCheck,l=e.handleSubmit,c=e.selectMotivo,s=e.data,d=e.empresas,u=e.motivosBaixa,m=e.searchDischarged,p=e.downloadXls,f=e.reactivateVehicle,v=e.setShowPendencias,h=s.selectedEmpresa,b=s.selectedOption,g=s.checked,E=s.delegaTransf,S=s.justificativa,x=s.selectedMotivo,y=s.demand,O=s.info,j=s.motivo,w=s.showPendencias;return r.a.createElement(n.Fragment,null,r.a.createElement(Na,{links:["Ve\xedculos","/veiculos"],text:"Baixa de ve\xedculo",demand:y}),r.a.createElement(Le,{data:s,empresas:d,handleInput:t,handleBlur:o}),r.a.createElement("div",{className:"flexColumn"},h&&r.a.createElement(r.a.Fragment,null,!y&&r.a.createElement(nn,{demand:y,checked:g,delegaTransf:E,justificativa:S,empresas:d,selectOption:a,handleInput:t,handleBlur:o,handleCheck:i,handleSubmit:l}),"baixar"===b?r.a.createElement("div",{className:"flex"},r.a.createElement("section",{className:"paper"},r.a.createElement("h3",{style:{marginBottom:"7px"}},y?"Solicita\xe7\xe3o n\xba".concat(null===y||void 0===y?void 0:y.numero," - ").concat(null===y||void 0===y?void 0:y.subject):"Informe os dados para a baixa"),y&&r.a.createElement("h4",null,j),y&&r.a.createElement("h4",null,"Situa\xe7\xe3o: ",null===y||void 0===y?void 0:y.status),r.a.createElement(_e,{form:sn,data:s,handleBlur:o,handleInput:t,disableAll:!!y})),r.a.createElement(Xt,{demand:y,selectedOption:b,motivosBaixa:u,selectMotivo:c,selectedMotivo:x,info:O,empresas:d,handleInput:t,handleBlur:o,handleSubmit:l,setShowPendencias:v,showPendencias:w})):"gerenciar"===b?r.a.createElement(on,{data:s,handleInput:t,searchDischarged:m,downloadXls:p,reactivateVehicle:f}):null,y||"baixar"!==b?y?r.a.createElement(Pa,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:y,setShowPendencias:v,showPendencias:w,info:O,handleSubmit:l,handleInput:t}):null:r.a.createElement("div",{className:"flexEnd"},r.a.createElement(Ye.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"10px 0 10px 0"},onClick:function(){return l()}},"Confirmar ",r.a.createElement("span",null,"\xa0\xa0 ")," ",r.a.createElement(cn.a,null))))))},un=function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={empresas:[],razaoSocial:"",frota:[],placa:"",form:{},check:"",delegaTransf:"",toastMsg:"Solicita\xe7\xe3o de Baixa Enviada",confirmToast:!1,openDialog:!1,showPendencias:!1},e.selectOption=function(a){return e.setState({selectedOption:a.target.value})},e.selectMotivo=function(a){return e.setState({selectedMotivo:a.target.value})},e.handleInput=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.target,r=n.name,o=n.value,i=e.props.redux,l=i.veiculos,c=i.empresas,e.setState(Object(f.a)({},r,o)),!("razaoSocial"===r&&o.length>2)){a.next=15;break}if(!(s=c.find((function(e){return e.razaoSocial===o})))){a.next=12;break}return a.next=7,e.setState({razaoSocial:s.razaoSocial,selectedEmpresa:s});case 7:o!==s.razaoSocial&&e.setState({selectedEmpresa:void 0}),d=l.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:d}),a.next=15;break;case 12:return a.next=14,e.setState({selectedEmpresa:void 0,frota:[]});case 14:e.reset();case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleBlur=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f,v,b,g,E;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.props.redux,r=n.empresas,o=n.logs,i=e.state,l=i.frota,c=i.demand,s=t.target.name,d=t.target.value,"delegaTransf"!==s){a.next=14;break}if(!(d.length>0)){a.next=14;break}if(!(u=r.find((function(e){return e.razaoSocial===d})))){a.next=13;break}return m=u.razaoSocial,p=u.codigoEmpresa,a.next=9,e.setState({delegaTransf:m,delegaTransfId:p,disableSubmit:!0});case 9:console.log(e.state),a.next=14;break;case 13:e.setState({openAlertDialog:!0,alertType:"empresaNotFound",delegaTransf:""});case 14:if("placa"!==s||"string"===typeof l){a.next=30;break}if(d&&""!==d||e.setState({disableSubmit:!0}),d.length>2&&(f=l.find((function(e){return"string"===typeof d?e.placa.toLowerCase().match(d.toLowerCase()):e.placa.match(d)}))),!f){a.next=29;break}if(c){a.next=25;break}if("Solicita\xe7\xe3o j\xe1 cadastrada",b="J\xe1 existe uma demanda aberta para o ve\xedculo de placa ".concat(f.placa,'. Para acess\xe1-la, clique em "Solicita\xe7\xf5es" no menu superior.'),g=Wa(null===(v=f)||void 0===v?void 0:v.veiculoId,o),console.log(f),!g){a.next=25;break}return e.setState({customTitle:"Solicita\xe7\xe3o j\xe1 cadastrada",customMessage:b,openAlertDialog:!0,delegatario:"",placa:void 0}),a.abrupt("return");case 25:return a.next=27,e.setState(Object(h.a)(Object(h.a)({},f),{},{selectedVehicle:f}));case 27:a.next=30;break;case 29:""!==e.state.placa&&(E={},l[0]&&Object.keys(l[0]).forEach((function(e){return E[e]=""})),e.setState({alertType:"plateNotFound",openAlertDialog:!0,disableSubmit:!0}),e.setState(Object(h.a)({},E)));case 30:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleSubmit=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f,v;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,r=n.selectedEmpresa,o=n.veiculoId,i=n.selectedMotivo,l=n.demand,c=n.selectedVehicle,s=n.info,d=n.motivo,u=c.dataEmissao,m=c.vencimento,p=c.dataRegistro,f={empresaId:null===r||void 0===r?void 0:r.codigoEmpresa,veiculoId:o,history:{info:i?"Motivo da baixa: ".concat(i):d},historyLength:0,approved:t},l&&(f.id=null===l||void 0===l?void 0:l.id),!1!==t){a.next=8;break}return f.declined=!0,f.history.info=s,a.next=8,e.setState({toastMsg:"Baixa de ve\xedculo indeferida."});case 8:if(Pe(f).then((function(e){return console.log(e.data)})),!t){a.next=19;break}return"veiculos","veiculo_id",v={},Ka.forEach((function(e){var a=e.field,t=e.label;c[a]&&(v[t]=c[a].toString())})),Object.assign(v,{"Situa\xe7\xe3o":"Baixado","Data de Registro":new Date(p).toLocaleDateString(),"Data baixa":(new Date).toLocaleDateString(),"Data Inicio":new Date(u).toLocaleDateString(),"Data Fim":new Date(m).toLocaleDateString(),"Observa\xe7\xe3o":"Motivo da baixa: ".concat(i)}),console.log(v),F.a.post("/api/baixaVeiculo",v),a.next=17,F.a.delete("/api/delete?table=".concat("veiculos","&tablePK=").concat("veiculo_id","&id=").concat(o)).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 17:return a.next=19,e.setState({toastMsg:"Baixa realizada com sucesso."});case 19:return e.toast(),a.next=22,e.setState({selectedEmpresa:void 0,frota:[],razaoSocial:""});case 22:e.reset(),l&&setTimeout((function(){e.props.history.push("/solicitacoes")}),1500);case 24:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.searchDischarged=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),r=e.state.placaBaixada,o=e.props.redux.parametros,i=null===(n=o[0])||void 0===n?void 0:n.idadeBaixa,l=i.idadeBaixaAut,a.next=7,F.a.get("/api/getOldVehicles?placa=".concat(r));case 7:c=a.sent,(s=null===c||void 0===c?void 0:c.data)[0]?(d=s[0],u=(new Date).getFullYear(),m=+d["Ano carroceria"],p=!0,(u-m>l||"Reativado"===d["Situa\xe7\xe3o"])&&(p=!1),e.setState({dischargedFound:s[0],notFound:!1,reactivate:p})):e.setState({notFound:!0,dischargedFound:void 0});case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.reactivateVehicle=function(){var a=e.state.dischargedFound,t={placa:null===a||void 0===a?void 0:a.Placa,"Situa\xe7\xe3o":"Reativado"},n="O ve\xedculo de placa ".concat(null===a||void 0===a?void 0:a.Placa," poder\xe1 ser recadastrado no sistema acessando as op\xe7\xf5es Ve\xedculos -> Cadastro de Ve\xedculos.");F.a.patch("/api/reactivateVehicle",t).then((function(a){200===a.status&&e.setState({customMessage:n,customTitle:"Ve\xedculo reativado.",openAlertDialog:!0,placaBaixada:"",dischargedFound:void 0}),console.log(a.data)}))},e.reset=function(){sn.forEach((function(a){return e.setState(Object(f.a)({},a.field,""))})),e.setState({delegaTransf:"",check:"",justificativa:"",checked:!1,demand:void 0})},e.downloadXls=function(){e.setState({loading:!0}),F()({url:"/api/oldVehiclesXls",method:"GET",responseType:"blob",onDownloadProgress:function(e){Math.round(e.loaded)}}).then((function(a){var t=a.headers["content-disposition"],n=t.indexOf("=")+1,r=t.slice(n),o=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");i.href=o,i.setAttribute("download",r),document.body.appendChild(i),i.click(),e.setState({loading:!1})})).catch((function(e){console.log(e)}))},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.handleCheck=function(a){return e.setState({checked:a.target.value})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,n,r,o,i,l,c,s,d,u,m,p,f;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.demand)){e.next=5;break}return i=this.props.redux,l=i.empresas,c=i.veiculos,s=r.empresa,d=r.veiculo,u=l.find((function(e){return e.razaoSocial===s})),m=c.filter((function(e){return e.placa===d})),p=m.find((function(e){return e.placa===d})),f=null===r||void 0===r||null===(o=r.history[0])||void 0===o?void 0:o.info,e.next=5,this.setState(Object(h.a)(Object(h.a)({razaoSocial:s,selectedEmpresa:u,placa:d,frota:m},p),{},{selectedVehicle:p,demand:r,selectedOption:"baixar",motivo:f}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.redux,a=e.empresas,t=e.parametros[0].motivosBaixa,o=this.state,i=o.delegaTransf,l=o.confirmToast,c=o.toastMsg,s=o.checked,d=o.openAlertDialog,u=o.customTitle,m=o.customMessage,p=o.alertType,f=o.loading;return r.a.createElement(n.Fragment,null,r.a.createElement(dn,{data:this.state,empresas:a,motivosBaixa:t,checked:s,selectOption:this.selectOption,selectMotivo:this.selectMotivo,delegaTransf:i,handleInput:this.handleInput,handleBlur:this.handleBlur,handleCheck:this.handleCheck,handleSubmit:this.handleSubmit,searchDischarged:this.searchDischarged,downloadXls:this.downloadXls,reactivateVehicle:this.reactivateVehicle,setShowPendencias:this.setShowPendencias}),d&&r.a.createElement(Ya,{open:d,close:this.closeAlert,alertType:p,customTitle:u,customMessage:m}),r.a.createElement(ee,{open:l,close:this.toast,msg:c}),f&&r.a.createElement(R,null))}}]),t}(n.Component);un.contextType=Zt;var mn=ce(["veiculos","empresas","parametros","equipamentos","acessibilidade"],un),pn=t(217),fn=t(152),vn=t.n(fn);t(491);function hn(e){var a=e.collections,t=e.collection,o=e.data,i=e.staticData,l=e.selectCollection,c=e.handleChange,s=e.enableEdit,d=e.confirmDelete,u=(e.handleSubmit,e.openAddDialog);return r.a.createElement(n.Fragment,null,r.a.createElement(Na,{links:["Ve\xedculos","/veiculos"],text:"Alterar configura\xe7\xf5es de ve\xedculos"}),r.a.createElement("center",null,r.a.createElement("h4",null,"Selecione uma das op\xe7\xf5es abaixo.")),r.a.createElement("header",{className:"selectHeader"},r.a.createElement(qe.a,{className:"config__selector",onChange:l,value:t,select:!0,SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},a.map((function(e,a){return r.a.createElement(Me.a,{key:a,value:e},e)})))),i&&t&&r.a.createElement("div",{className:"divHeader"},r.a.createElement(Ye.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"10px 0 10px 0"},onClick:function(){return u()}},r.a.createElement(Ke.a,null)," Adicionar")),r.a.createElement("div",{className:"container"},o&&i&&o.map((function(e,a){return r.a.createElement("div",{className:"divCell",key:a},r.a.createElement(qe.a,{value:e.edit?e[i.field]:e[i.field]+" ("+e.count+")",onChange:c,name:e.field,type:"text",inputProps:{autoCorrect:"off",spellCheck:!1,style:{fontSize:"0.8rem",color:!0===e.edit?"#000":"#999"}},className:"config__textField",disabled:!1===e.edit}),r.a.createElement("button",{component:"span",className:"configVehicleIcon",title:"Editar",onClick:function(){return s(a)},display:"none"},r.a.createElement(vn.a,{className:"confIcon",color:"primary"})),r.a.createElement("button",{className:"configVehicleIcon",title:"Remover",onClick:function(){return d(a)}},r.a.createElement(gt.a,{className:"confIcon",color:"secondary"})))}))))}var bn=ce(["seguradoras","lookUpTable/marca_chassi","modelosChassi","lookUpTable/marca_carroceria","carrocerias","equipamentos","veiculos","acessibilidade","empresasLaudo"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={collection:"",marca:"",options:[],openAddDialog:!1,confirmToast:!1,toastMsg:"Dados atualizados!",confirmDialogProps:{open:!1}},e.addCounter=function(e,a,t){var n=a.name,r=a.field,o=a.label;return t.forEach((function(a){var t=e.filter((function(e){return!e.hasOwnProperty(n)||"Itens de acessibilidade"!==o&&"Equipamentos"!==o?e[n]===a[r]:e[n].find((function(e){return e===a.id}))})).length;Object.assign(a,{count:t})})),t=t.sort((function(e,a){return e[r].localeCompare(a[r])}))},e.selectCollection=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.target.value,r=e.props.redux,o=r.veiculos,i=r.marcaChassi,l=r.marcaCarroceria,c=U.find((function(e){return e.label===n})),s=JSON.parse(JSON.stringify(e.props.redux[c.collection])),(s=e.addCounter(o,c,s)).forEach((function(e){return e.edit=!1})),e.setState({marcas:void 0,marca:""}),"modelosChassi"===c.collection&&e.setState({marcas:i}),"carrocerias"===c.collection&&e.setState({marcas:l}),a.next=9,e.setState({collection:n,data:s,staticData:c});case 9:case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.enableEdit=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f,v,h,b,g,E,S;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(S=function(){return(S=Object(w.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.forEach((function(e){return e.edit=!1})),p[t].edit=!0,e.next=4,this.setState({data:p,editIndex:t});case 4:s.focus();case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},E=function(){return S.apply(this,arguments)},i=JSON.parse(JSON.stringify(e.props.redux)),l=document.querySelectorAll(".divCell"),c=l[t].childNodes[0],s=c.querySelectorAll("input")[0],d=e.state,u=d.updatedObj,m=d.staticData,p=JSON.parse(JSON.stringify(e.state.data)),f=p[t],v=null===(n=e.state)||void 0===n||null===(r=n.staticData)||void 0===r?void 0:r.field,void 0===(null===f||void 0===f?void 0:f.edit)&&(f.edit=!1),h=i[m.collection].find((function(e){return e.id===f.id?Object.freeze(e):{}})),b=p[t][v]===h[v],g=p.some((function(e,a){return a!==t&&!0===e.edit&&(o=p.indexOf(e),e)}))){a.next=18;break}if(!1!==f.edit){a.next=14;break}return p[t].edit=!0,a.next=11,e.setState({data:p});case 11:s.focus(),a.next=17;break;case 14:p[t].edit=!1,u&&!b&&e.handleSubmit(u),e.setState({data:p,editIndex:void 0});case 17:return a.abrupt("return");case 18:g&&!f.edit&&(E.call(Object(pn.a)(e)),h=i[m.collection].find((function(e){var a;return e.id===(null===(a=p[o])||void 0===a?void 0:a.id)})),b=p[o][v]===h[v],u&&!b&&e.handleSubmit(u));case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.selectMarca=function(a){var t,n=a.target.value,r=e.state.staticData.collection,o=e.props.redux,i=o.marcaChassi,l=o.marcaCarroceria;"modelosChassi"===r&&(t=i),"carrocerias"===r&&(t=l);var c=t.find((function(e){return e.marca===n})).id;e.setState({marca:n,marcaId:c})},e.handleChange=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=t.target.value,r=e.state,o=r.staticData,i=r.data,l=o.field,c=i.find((function(e){return!0===e.edit})),s=i.indexOf(c),c[l]=n,(d=Object(v.a)(e.state.data))[s]=c,u=Object(f.a)({id:null===c||void 0===c?void 0:c.id},l,n),e.setState({data:d,updatedObj:u});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(a){var t=a.target.value;e.setState({newElement:t})},e.addNewElement=Object(w.a)(j.a.mark((function a(){var t,n,r,o,i,l,c,s,d,u;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state,n=t.staticData,r=t.newElement,o=t.marcaId,i=n.table,l=n.field,c=n.collection,s=e.props.redux.veiculos,d=Object(f.a)({},l,r),o&&(d.marcaId=o),d=A.a.decamelizeKeys(d),a.next=6,F.a.post("/api/addElement",{table:i,requestElement:d});case 6:u=e.props.redux[c],u=e.addCounter(s,n,u),e.setState({openAddDialog:!1,data:u,marcaId:void 0});case 9:case"end":return a.stop()}}),a)}))),e.confirmDelete=function(a){var t=e.state,n=t.data,r=t.staticData.field,o=n[a][r],i={open:!0,type:"delete",element:"".concat(o),index:a};e.setState({confirmDialogProps:i})},e.removeItem=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.closeConfirmDialog(),n=Object(v.a)(e.state.data),r=e.state.staticData,o=r.collection,i=r.table,l=n[t].id,c=e.props.redux[o],!c.find((function(e){return e.id===l}))){a.next=6;break}return a.next=6,F.a.delete("/api/delete?table=".concat(i,"&tablePK=id&id=").concat(l)).catch((function(e){return console.log(e)}));case 6:n.splice(t,1),e.setState({data:n});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleSubmit=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.state.staticData,r=n.field,o=n.table,"id",i=A.a.decamelize(r),l=[A.a.decamelizeKeys(t)],a.next=3,F.a.put("/api/editElements",{requestArray:l,table:o,tablePK:"id",column:i}).catch((function(e){return console.log(e)}));case 3:e.setState({updatedObj:void 0});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.closeConfirmDialog=function(){var a=Object(h.a)({},e.state.confirmDialogProps);a.open=!1,e.setState({confirmDialogProps:a})},e.toggleDialog=function(){return e.setState({openAddDialog:!e.state.openAddDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=[];U.forEach((function(a){e.push(a.label)})),this.setState({options:e})}},{key:"componentDidUpdate",value:function(e){var a=JSON.parse(JSON.stringify(this.props.redux)),t=a.veiculos,n=this.state,r=n.staticData,o=n.data,i=n.editIndex;if(!r||!o)return null;var l=r.collection;if(JSON.stringify(e.redux[l])!==JSON.stringify(a[l])){var c=this.addCounter(t,r,a[l]);(i||0===i)&&(c[i].edit=!0),this.setState({data:c})}}},{key:"render",value:function(){var e=this.state,a=e.options,t=e.collection,o=e.data,i=e.staticData,l=e.openAddDialog,c=e.marca,s=e.marcas,d=e.confirmToast,u=e.toastMsg,m=e.confirmDialogProps;return r.a.createElement(n.Fragment,null,r.a.createElement(hn,{collections:a,collection:t,data:o,staticData:i,selectCollection:this.selectCollection,enableEdit:this.enableEdit,handleChange:this.handleChange,handleSubmit:this.handleSubmit,openAddDialog:this.toggleDialog,confirmDelete:this.confirmDelete}),l&&r.a.createElement(dt,{open:l,close:this.toggleDialog,title:i.label,helperMessage:'Para adicionar, insira o nome no campo abaixo e clique em "Confirmar".',marca:c,marcas:s,selectMarca:this.selectMarca,handleInput:this.handleInput,addNewElement:this.addNewElement}),m.open&&r.a.createElement(ft,Object.assign({},m,{close:this.closeConfirmDialog,confirm:this.removeItem})),r.a.createElement(ee,{open:d,close:this.toast,msg:u}))}}]),t}(n.PureComponent)),gn=t(234),En=t.n(gn),Sn=[{field:"placa",title:"Placa"},{field:"empresa",title:"Delegat\xe1rio"},{field:"seguradora",title:"Seguradora"},{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"vencimento",title:"Vencimento Seguro",render:function(e){return Ma(e.vencimento)}},{field:"situacao",title:"Situa\xe7\xe3o"},{field:"compartilhado",title:"Compartilhado por"},{field:"indicadorIdade",title:"Indicador de idade",render:function(e){var a=e.indicadorIdade,t=" anos";if(a||0===a)return-1===a&&(a=0),1!==a&&0!==a||(t=" ano"),a.toString()+t}}],xn=[{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"seguradora",title:"Seguradora"},{field:"empresa",title:"Segurado"},{field:"situacao",title:"Situa\xe7\xe3o"},{field:"segurados",title:"N\xfamero de ve\xedculos"},{field:"dataEmissao",title:"In\xedcio da vig\xeancia",filtering:!1,render:function(e){return Ma(e.dataEmissao)}},{field:"vencimento",title:"Vencimento",filtering:!1,render:function(e){return Ma(e.vencimento)}}],yn=[[{field:"razaoSocial",title:"Raz\xe3o Social"},{field:"cnpj",title:"CNPJ"},{field:"vencimentoContrato",title:"Vencimento do Cadastro",filtering:!1,render:function(e){return Ma(e.vencimentoContrato)}},{field:"cidade",title:"Munic\xedpio"},{field:"telefone",title:"Telefone"},{field:"frota",title:"Tamanho da frota"}]].concat([[{field:"nomeSocio",title:"Nome"},{field:"cpfSocio",title:"CPF"},{field:"razaoSocial",title:"Delegat\xe1rio(s)"},{field:"emailSocio",title:"E-mail"},{field:"telSocio",title:"Telefone"},{field:"share",title:"Participa\xe7\xe3o Societ\xe1ria (%)",filtering:!1}]]).concat([[{field:"nomeProcurador",title:"Nome"},{field:"cpfProcurador",title:"CPF"},{field:"emailProcurador",title:"E-mail"},{field:"telProcurador",title:"Telefone"}]]).concat([Sn]).concat([xn]),On=t(240),jn=t(156);var wn=function(e,a,t,n){var r=e[a],o=function(e,a){var t=JSON.parse(JSON.stringify(a));Array.isArray(t)&&t.forEach((function(a,t){Object.entries(a).forEach((function(t){var n=Object(Te.a)(t,2),r=n[0],o=n[1],i=e.find((function(e){return e.field===r}));if(i){var l=null===i||void 0===i?void 0:i.label;o=function(e){return Oe()(e,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()&&(e=Oe()(e).format("DD/MM/YYYY")),e}(o),a[l]=o,delete a[r]}else delete a[r]}))}));return t}(t,n),i={Sheets:{data:jn.utils.json_to_sheet(o)},SheetNames:["data"]},l=jn.write(i,{bookType:"xlsx",type:"array"}),c=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});On.saveAs(c,r+".xlsx")},Cn=function(e){var a=e.tab,t=e.collection,n=e.showDetails,o=e.showFiles,i=e.showCertificate,l=e.del,c=["codigoEmpresa","socioId","procuradorId","veiculoId","apolice"][a],s=["empresas","s\xf3cios","procuradores","ve\xedculos","seguros"],d=Yt(a);return Array.isArray(t)||(t=[]),t=t.map((function(e){return Object(h.a)({},e)})),r.a.createElement("div",{style:{margin:"10px 0"},className:"noPrint"},r.a.createElement(En.a,{title:"Pesquisar dados de ".concat(s[a]),columns:yn[a],data:t,style:{fontFamily:"Segoe UI",fontSize:"14px"},options:{filtering:!0,exportButton:!0,exportFileName:s[a],exportCsv:function(e,t){wn(s,a,d,t)},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:20,rowStyle:{fontSize:"0.5rem"}},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Registro n\xe3o encontrado.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},actions:[{icon:"info",iconProps:{color:"primary"},tooltip:"Mais informa\xe7\xf5es",onClick:function(e,a){return n(e,a)}},{icon:"file_copy_outline",iconProps:{color:"secondary"},tooltip:"Ver arquivos",onClick:function(e,a){return o(a[c])}},{icon:"class_outlined",iconProps:{color:"action"},tooltip:"Emitir certificado",hidden:3!==a,onClick:function(e,a){return i(a)}}],editable:{onRowDelete:function(){var e=Object(w.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}}))},kn=t(596),Dn=t(380),In=t(86),Nn=t(597),An=t(594),Pn=(t(401),Object(Z.a)((function(e){return{toolbarTitle:{flex:1},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto",backgroundColor:"#0398c1",color:"white"},toolbarLink:{padding:"12px 55px 13px 55px",flexShrink:0}}}))),Fn=[{title:"P\xe1gina Inicial",link:"/"},{title:"Consultas",link:"/consultas"},{title:"Ve\xedculos",link:"/veiculos"},{title:"Empresas",link:"/empresas"},{title:"Relat\xf3rios",link:"/relatorios"},{title:"Solicita\xe7\xf5es ",link:"/solicitacoes"}],Tn=Object(xt.a)((function(e){return{badge:{right:-8,top:-1,padding:"0 4px"}}}))(An.a);var zn=Object(c.c)((function(e){var a,t;return{logs:null===(a=e.data)||void 0===a?void 0:a.logs,parametros:null===(t=e.data)||void 0===t?void 0:t.parametros}}),(function(e){return Object(l.b)({logUserOut:ie},e)}))(Object(y.f)((function(e){var a=null===e||void 0===e?void 0:e.logs,t=e.parametros,o=e.location.pathname,i=localStorage.getItem("demand"),l=Pn(),c=l.toolbarTitle,s=l.toolbarSecondary,d=l.toolbarLink,u=Object(n.useState)(document.location.pathname),m=Object(Te.a)(u,2),p=m[0],f=m[1],v=Object(n.useState)(),h=Object(Te.a)(v,2),b=h[0],g=h[1];Object(n.useEffect)((function(){if(a&&Array.isArray(a)){var e=a.filter((function(e){return!1===(null===e||void 0===e?void 0:e.completed)})).length;g(e)}f(o)}),[o,b,a]);var E=function(e){var a,t=null===(a=document.querySelector("a[href='/solicitacoes']"))||void 0===a?void 0:a.style,n="",r="";return"/solicitacoes"===p||i?t&&(t["background-color"]="#11a7d2",t["border-bottom"]="1.5px solid #ccc"):p.match(e)&&"/"!==e&&(n="#11a7d2",r="1.5px solid #ccc",t&&(t["background-color"]="",t["border-bottom"]="")),{bgColor:n,borderB:r,borderT:"",fontW:"400"}},S="",y="";if(t&&t[0]){var O=t[0].nomes;S=O.secretaria,y=O.siglaSecretaria}var C=function(){var a=Object(w.a)(j.a.mark((function a(){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",e.logUserOut());case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(kn.a,null),r.a.createElement(Dn.a,null,r.a.createElement(Ye.a,{size:"small"},"Criar usu\xe1rio"),r.a.createElement(In.a,{component:"h2",variant:"h6",color:"inherit",align:"center",noWrap:!0,className:c},y," - ",S),r.a.createElement(Ye.a,{variant:"outlined",size:"small",onClick:function(){return C()}},"Sair")),r.a.createElement(Dn.a,{component:"nav",variant:"dense",className:s},Fn.map((function(e,a){var t=e.link,n=e.title;return r.a.createElement(Nn.a,{component:x.b,to:t,key:a,color:"inherit",noWrap:!0,variant:"body2",href:"",style:{fontFamily:"Segoe UI, Tahoma, Geneva, Verdana, sans-serif",fontSize:"15px",backgroundColor:E(t).bgColor,borderBottom:E(t).borderB,fontWeight:E(t).fontW,borderTop:E(t).borderT},className:d,onClick:function(){return f(t)}},"Solicita\xe7\xf5es "===n?r.a.createElement(Tn,{badgeContent:b,color:"secondary"},r.a.createElement("span",null,n)):n)})),r.a.createElement(Nn.a,{component:x.b,to:"/parametros"},r.a.createElement("span",{className:"material-icons",style:{color:"white",cursor:"pointer"},title:"Alterar par\xe2metros do sistema"},"settings"))))}))),Ln=function(){return null},Mn=t(598),qn=t(591),Vn=function(e){var a=e.items,t=e.tab,n=e.changeTab;return r.a.createElement("div",{className:"tabMenu"},r.a.createElement(Mn.a,{value:t,indicatorColor:"primary",textColor:"primary",centered:!0,onChange:n},a.map((function(e,a){return r.a.createElement(qn.a,{key:a,label:e})}))))},_n=[[{field:"empresa",label:"Delegat\xe1rio",width:"120mm",left:"50mm"},{type:"date",field:"vencimentoContrato",label:"Validade do Contrato",width:"36mm",left:"5mm"}]],Bn=[[{field:"placa",label:"Placa",width:"25mm",left:"8mm"},{field:"renavam",label:"Renavam",width:"42mm",left:"14mm"},{field:"poltronas",label:"Poltronas",width:"16mm",left:"2mm"},{field:"piquesPoltrona",label:"Piques poltrona",width:"19mm"},{field:"nChassi",label:"N\xfamero do Chassi",width:"50mm",left:"15mm"}],[{field:"marcaChassi",label:"Marca do Chassi",width:"49mm",left:"15mm"},{field:"modeloChassi",label:"Modelo do Chassi",width:"49mm",left:"15mm"},{field:"anoChassi",label:"Ano do chassi"},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)"},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)"}],[{field:"marcaCarroceria",label:"Marca da Carroceria",width:"49mm",left:"15mm"},{field:"modeloCarroceria",label:"Modelo da Carroceria",width:"49mm",left:"15mm"},{field:"anoCarroceria",label:"Ano da carroceria"},{field:"cores",label:"Cores",width:"45mm",left:"15mm"}]],Rn=[[{field:"seguradora",label:"Seguradora",width:"75mm",left:"27.5mm"},{field:"apolice",label:"Ap\xf3lice",width:"35mm",left:"13mm"},{type:"date",field:"dataEmissao",label:"Data de Emiss\xe3o",width:"25mm",left:"5mm"},{type:"date",field:"vencimento",label:"Vencimento",width:"25mm",left:"5mm"}]],Un=[[{field:"eixos",label:"N\xba Eixos",width:"15mm",left:"2mm"},{field:"pbt",label:"Peso Bruto Total",width:"25mm",left:"5mm"},{field:"pesoDianteiro",label:"Peso Dianteiro (kg)",width:"28mm",left:"4mm"},{field:"pesoTraseiro",label:"Peso Traseiro (kg)",width:"28mm",left:"4mm"},{field:"pbt",label:"Peso Bruto Total",width:"25mm",left:"5mm"},{field:"pesoPassageiros",label:"Passag/Bagagem",width:"25mm",left:"3mm"}]],Yn=[[{type:"date",field:"dataRegistro",label:"Data de Registro",width:"35mm",left:"9mm"},{field:"dataExpedicao",label:"Data de expedi\xe7\xe3o",width:"35mm",left:"9mm"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",width:"35mm",left:"9mm"},{field:"equipamentosId",label:"Acess\xf3rios",width:"65mm"}]],Hn=[[{field:"compartilhado",label:"Empresas autorizadas a compartilhar",width:"120mm",left:"20mm"},{field:"observacoes",label:"Observa\xe7\xf5es",width:"80mm"}]],Kn=t(421),Jn=t.n(Kn),Wn=(t(550),function(e){var a=e.nomes,t=a.secretaria,n=a.subsecretaria,o=a.superintendencia;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"certHeader__container"},r.a.createElement("div",{className:"certHeader__brasao"},r.a.createElement("img",{src:"/images/brasao.png",alt:"Bras\xe3o de Minas Gerais",className:"certHeader__img"})),r.a.createElement("div",{className:"certHeader__text"},r.a.createElement("p",null,t),r.a.createElement("p",null,n),r.a.createElement("p",null,o),r.a.createElement("h2",null,"Certificado de Registro e Seguro"))))}),$n=Object(Z.a)((function(e){return{textField:{paddingRight:"25px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"}}})),Gn=function(e){var a=e.nomes,t=e.checkMulti,o=e.redirect,i=e.carac,l=e.delega,c=e.seg,s=e.peso,d=e.info,u=e.obs,m=$n().textField,p=[{title:"Delegat\xe1rio",form:l},{title:"Caracter\xedsticas do Ve\xedculo",form:i},{title:"Seguro",form:c},{title:"Pesagem",form:s},{title:"Informa\xe7\xf5es gerais",form:d},{title:"Outras informa\xe7\xf5es",form:u}];return r.a.createElement(n.Fragment,null,r.a.createElement("div",{id:"pdfPage",className:"A4"},r.a.createElement("header",{className:"header"},r.a.createElement(Wn,{nomes:a})),p.map((function(e,a){var n=e.title,o=e.form;return r.a.createElement("section",{className:"Delegat\xe1rio"!==n?"box":"firstBox",key:a},"Delegat\xe1rio"!==n&&r.a.createElement("span",{className:"boxTitle"},n),o.map((function(e,a){return r.a.createElement("div",{key:a,className:"Delegat\xe1rio"!==n?"divLine":"firstDivLine"},e.map((function(e,a){return r.a.createElement(qe.a,{disabled:!0,key:a,name:e.field,label:e.label,className:m,multiline:!!("equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50),rows:e.value&&e.value.length<86?"2":e.value&&e.value.length<140?"3":"4",variant:"equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50?"outlined":"standard",value:"date"===e.type?Oe()(e.value).format("DD-MM-YYYY"):"dataExpedicao"===e.field?Oe()().format("DD-MM-YYYY"):e.value||"",inputProps:{className:t(e.field),style:{width:e.width||"18mm",fontSize:"2.7mm",padding:"1px 0",margin:"0",flex:"1",color:"#000"}},InputProps:{style:{padding:"equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50?"1mm":""}},InputLabelProps:{shrink:!0,style:{fontSize:"13px",textAlign:"center !important",left:e.left||"0",color:"#000"}}})})))})))})),r.a.createElement("footer",{className:"certFooter"},r.a.createElement("h1",{className:"certFooter__title"},"PORTE OBRIGAT\xd3RIO"),r.a.createElement("p",{className:"certFooter__text"},"Este certificado pode ser verificado em ",r.a.createElement("span",{className:"link",onClick:function(){return o()}}," http://www.cadti.mg.gov.br ")))),r.a.createElement("button",{title:"Imprimir / salvar PDF",className:"noprint printButton",onClick:function(){return window.print()}},r.a.createElement(Jn.a,{style:{cursor:"pointer",color:"rgb(161, 161, 180)",fontSize:"40pt"}})))};function Zn(){var e=Object(n.useState)({}),a=Object(Te.a)(e,2),t=a[0],o=a[1],i=Object(n.useState)({}),l=Object(Te.a)(i,2),c=l[0],s=l[1];Object(n.useEffect)((function(){function e(){return(e=Object(w.a)(j.a.mark((function e(){var a,t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("vehicle")),t=JSON.parse(localStorage.getItem("nomes")),document.querySelectorAll(".MuiToolbar-root").forEach((function(e){return e.style.display="none"})),e.next=5,o(a);case 5:if(!t){e.next=8;break}return e.next=8,s(t);case 8:setTimeout((function(){a&&window.print()}),500);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),localStorage.removeItem("vehicle")}),[]);var d=Bn,u=_n,m=Rn,p=Un,f=Yn,v=Hn,h={};t&&[d,u,m,p,f,v].forEach((function(e){Object.entries(t).forEach((function(a){var t=Object(Te.a)(a,2),n=t[0],r=t[1];e.forEach((function(a,t){a.forEach((function(a,o){a.field===n&&(h=Object.assign(a,{value:r}),e[t][o]=h,h={})}))}))}))}));if(!t){var b=window.location.origin;return window.location.replace(b),null}return r.a.createElement(Gn,{nomes:c,checkMulti:function(e){return"equipamentosId"===e||"equipamentosId"===e?void 0:"certificate"},redirect:function(){document.querySelectorAll(".MuiToolbar-root").forEach((function(e){return e.style.display="none"}));var e=window.location.origin;window.location.href=e},carac:d,delega:u,seg:m,peso:p,info:f,obs:v})}var Xn=function(e){return e>1024&&e<1048576?Math.round(e/1024)+" KB":e>=1048576&&e<1073741824?(e/1024/1024).toFixed(2)+" MB":e+" bytes"},Qn={marginBottom:0,display:"grid",grid:"50px / 4% 40% 25% 25%",width:"99%",margin:"auto",padding:"10px 0 0 0",justifyItems:"auto"},er=function(e){var a=e.filesCollection,t=e.close,n=e.typeId,o=e.empresas,i=e.filesIds,l=e.razaoSocial,c=[],s="empresaDocs",d=Object(v.a)(it);switch(n){case"veiculoId":s="vehicleDocs",(d=Object(v.a)(la)).find((function(e){return"transferenciaDoc"===e.name}))||d.push({title:"Documento de Transfer\xeancia",name:"transferenciaDoc"}),d.find((function(e){return"newPlateDoc"===e.name}))||d.push({title:"CRLV com nova placa",name:"newPlateDoc"}),d.find((function(e){return"apoliceDoc"===e.name}))||d.push({title:"Ap\xf3lice de seguro",name:"apoliceDoc"}),d.find((function(e){return"laudoDoc"===e.name}))||d.push({title:"Laudo de seguran\xe7a veicular",name:"laudoDoc"})}i&&(a=a.filter((function(e){return-1!==i.indexOf(e.id)}))),a&&a[0]&&a.forEach((function(e){d.forEach((function(a){e.metadata&&a.name===e.metadata.fieldName&&c.push(Object(h.a)(Object(h.a)({},e),{},{label:a.title}))}))}));return c[0]?r.a.createElement("div",{className:i?"":"popUpWindow"},r.a.createElement("h5",null,r.a.createElement("img",{alt:"",src:"/images/folderIcon2.jpg",style:{paddingLeft:"20px",marginRight:"20px"}})," Arquivos"),r.a.createElement("hr",{style:{marginBottom:"5px"}}),r.a.createElement("div",{style:Qn},r.a.createElement("div",null,r.a.createElement("img",{alt:"",src:"/images/multipleFiles2.png",height:"50%"})),["Arquivo","Data de Upload","Tamanho"].map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement("span",{style:{fontSize:"1.2em",fontWeight:500}},e))}))),r.a.createElement("hr",{style:{margin:"0 0 20px 0"}}),c.map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement("div",{style:Qn},r.a.createElement("div",{className:"col s1"},r.a.createElement("img",{alt:"",src:"/images/genericFile.png"})),r.a.createElement("div",{className:"col s11"},r.a.createElement("span",{style:{textDecoration:"underline",cursor:"pointer",color:"blue"},onClick:function(){return va(e.id,e.filename,s,e.metadata.fieldName)}},function(e){var a=e.metadata,t=e.label;switch(a.fieldName){case"procuracao":if(l)return t+" - "+l;var n=o.find((function(e){return e.codigoEmpresa===Number(a.empresaId)}));return t+" - "+(null===n||void 0===n?void 0:n.razaoSocial)||"";case"apoliceDoc":return a.apolice?t+" n\xfamero "+a.apolice:t;case"altContratoDoc":return a.numeroAlteracao?"".concat(a.numeroAlteracao,"\xaa ")+t:t;default:return t}}(e))),r.a.createElement("div",{className:"col s3"},Ma(e.uploadDate,!0)),r.a.createElement("div",{className:"col s3"},Xn(e.length))))})),r.a.createElement($e,{close:t})):null},ar={top:"5%",left:"10%",right:"10%"},tr=function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={tab:0,items:["Empresas","S\xf3cios","Procuradores","Ve\xedculos","Seguros"],tablePKs:["codigo_empresa","socio_id","procurador_id","veiculo_id","id"],dbTables:["empresas","socios","procuradores","veiculos","seguros"],options:["empresas","socios","procuradores","veiculos","seguros"],detailsTitle:["Empresa","S\xf3cio","Procurador","Placa","Ap\xf3lice"],detailsHeader:["razaoSocial","nomeSocio","nomeProcurador","placa","apolice"],empresas:[],seguros:[],razaoSocial:"",showDetails:!1,showFiles:!1,openDialog:!1,filesCollection:[],elementDetails:"",vehicleDocs:[],showCertificate:!1},e.changeTab=function(){var a=Object(w.a)(j.a.mark((function a(t,n){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.setState({tab:n});case 2:return a.abrupt("return");case 3:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.showDetails=function(){var a=Object(w.a)(j.a.mark((function a(t,n){var r,o,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.props.redux,o=e.state,i=o.options,l=o.tab,c=o.tablePKs,s=c.map((function(e){return A.a.camelize(e)})),n&&(d=r[i[l]].find((function(e){return e[s[l]]===n[s[l]]}))),void 0===n||!d){a.next=8;break}return a.next=5,e.setState({showDetails:!e.state.showDetails,elementDetails:d});case 5:a.next=9;break;case 8:e.setState({showDetails:!e.state.showDetails,elementDetails:void 0});case 9:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.closeFiles=function(){e.setState({showFiles:!e.state.showFiles})},e.showFiles=function(a){var t,n,r=e.state.tab,o=e.props.redux,i=o.veiculos,l=o.socios,c=o.empresaDocs,s=o.vehicleDocs;switch(r){case 0:t=c.filter((function(e){var t;return e.metadata.empresaId===a&&!1===(null===(t=e.metadata)||void 0===t?void 0:t.tempFile)})),n="empresaId";break;case 1:t=c.filter((function(e){return e.metadata.empresaId===a}));var d=l.find((function(e){return e.socioId===a}));if(d){var u=[];t=c.filter((function(e){return e.metadata.empresaId===d.codigoEmpresa})).forEach((function(e){e.metadata.socios&&e.metadata.socios.includes(a)&&u.push(e)})),t=u}break;case 2:n="procuracaoId";var m=[];c.forEach((function(e){var t,n;"procuracao"===(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.fieldName)&&((null===e||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.procuradores)&&e.metadata.procuradores.forEach((function(t){t===a&&m.push(e)})))})),t=m;break;case 3:n="veiculoId",t=s.filter((function(e){return e.metadata.veiculoId===a}));var p=i.find((function(e){return e.veiculoId===a}));if(p){var f=c.find((function(e){var a,t;return(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.apolice)===(null===p||void 0===p||null===(t=p.apolice)||void 0===t?void 0:t.toString())}));f&&t.push(f)}break;case 4:t=c.filter((function(e){return e.metadata.apolice===a}))}(t=t.filter((function(e){var a;return!1===(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.tempFile)})))[0]?(t=t.sort((function(e,a){return new Date(e.uploadDate)-new Date(a.uploadDate)})).reverse(),e.setState({filesCollection:t,showFiles:!0,typeId:n,selectedElement:a})):(e.setState({alertType:"filesNotFound",openAlertDialog:!0,subject:n}),e.setState({filesCollection:[]}))},e.deleteHandler=function(a){var t=e.state,n=t.dbTables,r=t.tablePKs,o=t.tab,i=n[o],l=r[o],c=A.a.camelize(l);F.a.delete("/api/delete?table=".concat(i,"&tablePK=").concat(l,"&id=").concat(a[c])).then((function(e){return console.log(e.data)}))},e.showCertificate=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f,v,h;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.props.redux,r=n.laudos,o=n.parametros,i=t.veiculoId,l=t.anoCarroceria,c=t.situacao,s=t.vencimento,d=t.vencimentoContrato,u=Oe()(s).isBefore(),m=Oe()(d).isBefore(),p=(new Date).getFullYear(),!(p-l>=15)){a.next=7;break}if(f=r.find((function(e){return e.veiculoId===i})),Oe()(null===f||void 0===f?void 0:f.validade).isAfter(Oe()())){a.next=7;break}return a.next=6,e.setState({openAlertDialog:!0,customTitle:"Certificado de seguran\xe7a veicular pendente.",customMessage:"O laudo de seguran\xe7a veicular n\xe3o est\xe1 registrado no sistema ou se encontra vencido. Para regularizar, acesse Ve\xedculos -> Laudos."});case 6:return a.abrupt("return");case 7:if("Ativo"===c){a.next=11;break}return a.next=10,e.setState({alertType:"veiculoPendente",openAlertDialog:!0});case 10:return a.abrupt("return");case 11:if(!u){a.next=15;break}return a.next=14,e.setState({alertType:"seguroVencido",openAlertDialog:!0});case 14:return a.abrupt("return");case 15:if(!m){a.next=19;break}return a.next=18,e.setState({alertType:"contratoVencido",openAlertDialog:!0});case 18:return a.abrupt("return");case 19:v=window.location.origin+"/crv",localStorage.setItem("vehicle",JSON.stringify(t)),o&&o[0]&&(h=o[0].nomes,localStorage.setItem("nomes",JSON.stringify(h))),window.open(v,"noopener");case 23:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.closeCertificate=function(){return e.setState({showCertificate:!e.state.showCertificate})},e.escFunction=function(a){27===a.keyCode&&(e.state.showDetails&&e.showDetails(),e.state.showFiles&&e.closeFiles(),e.state.showCertificate&&e.closeCertificate())},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e,a=this.state,t=a.tab,o=a.options,i=a.items,l=a.showDetails,c=a.elementDetails,s=a.showFiles,d=a.selectedElement,u=a.filesCollection,m=a.typeId,p=a.tablePKs,f=a.showCertificate,v=a.certified,h=a.detailsTitle,b=a.detailsHeader,g=a.openAlertDialog,E=a.alertType,S=a.customTitle,x=a.customMessage,y=this.props.redux,O=y.empresas,j=y.procuracoes,w=y.procuradores,C=y.empresaDocs,k=y.altContrato,D=p.map((function(e){return A.a.camelize(e)}));return c&&l&&(e=y[o[t]].find((function(e){return e[D[t]]===c[D[t]]}))),r.a.createElement(n.Fragment,null,r.a.createElement(Vn,{items:i,tab:t,changeTab:this.changeTab}),r.a.createElement(Cn,{tab:t,items:i,collection:this.props.redux[o[t]],showDetails:this.showDetails,showFiles:this.showFiles,del:this.deleteHandler,showCertificate:this.showCertificate}),l&&r.a.createElement(Jt,{close:this.showDetails,data:e||c,tab:t,title:h[t],header:b[t],empresas:O,procuracoes:j,procuradores:w,empresaDocs:C,altContrato:k}),f&&r.a.createElement(Zn,{vehicle:v}),s&&r.a.createElement(er,{tab:t,elementId:d,filesCollection:u,close:this.closeFiles,format:ar,typeId:m,empresas:O,empresaDocs:C}),g&&r.a.createElement(Ya,{open:g,close:this.closeAlert,alertType:E,tab:t,customMessage:x,customTitle:S}))}}]),t}(n.Component),nr=Object(c.c)(null,{updateCollection:_})(ce(["veiculos","empresas","socios","procuradores","seguros","seguradoras","procuracoes","getFiles/vehicleDocs","getFiles/empresaDocs","equipamentos","acessibilidade","laudos","altContrato","parametros"],tr)),rr=function(e){var a=e.handleInput,t=e.handleBlur,n=e.data,o=e.handleFiles,i=e.removeFile,l=n.activeStep,c=n.stepTitles,s=n.dropDisplay,d=n.contratoSocial,u=n.fileToRemove;return r.a.createElement("div",{className:"flex paper"},r.a.createElement(Be,{subtitle:c[l]}),r.a.createElement("main",null,r.a.createElement(_e,{form:_t,data:n,handleBlur:t,handleInput:a}),r.a.createElement("div",{className:"flex center"},r.a.createElement(oa,{name:"contratoSocial",formData:d,dropDisplay:s,handleFiles:o,removeFile:i,fileToRemove:u,style:{width:"40%"}}))))},or=[{field:"nomeSocio",label:"Nome do S\xf3cio",maxLength:90,width:195},Object(h.a)(Object(h.a)({},Pt),{},{width:195}),Object(h.a)(Object(h.a)({},Ft),{},{field:"telSocio",width:195}),Object(h.a)(Object(h.a)({},Tt),{},{field:"emailSocio",width:195}),{field:"share",label:"Participa\xe7\xe3o Societ\xe1ria (%)",type:"number",max:100,width:195}],ir=Object(Z.a)((function(e){return{list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#999",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"}}})),lr=function(e){var a=e.socios,t=e.empresas,o=e.handleInput,i=e.handleBlur,l=e.data,c=e.addSocio,s=e.enableEdit,d=e.handleEdit,u=e.removeSocio,m=e.handleSubmit,p=e.setShowPendencias,f=l.activeStep,v=l.stepTitles,h=l.filteredSocios,b=l.contratoSocial,g=l.selectedEmpresa,E=l.demand,S=l.showPendencias,x=l.info,y=ir(),O=y.iconButton,j=y.list,w=[it[0]],C=!0;return v&&(C=!1),r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"flex center"},C&&r.a.createElement("header",{style:{marginBottom:"10px",width:"100%"}},r.a.createElement(Le,{data:l,empresas:t,handleInput:o,handleBlur:i})),!g&&C||!C?v&&r.a.createElement("section",{className:"flex center paper"},r.a.createElement(Be,{subtitle:v[f]}),r.a.createElement("div",{className:"flex center",style:{padding:"10px 0",width:"100%"}},r.a.createElement(_e,{form:or,data:l,handleBlur:i,handleInput:o})),r.a.createElement("div",{style:{margin:"5px 0 7px 84.58%",width:"100%"}},r.a.createElement(Ye.a,{color:"primary",variant:"outlined",size:"small",onClick:c},r.a.createElement(Ke.a,null)," Adicionar s\xf3cio"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Utilize as op\xe7\xf5es abaixo para editar dados dos s\xf3cios"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))),g&&0===h.length&&r.a.createElement("section",null,r.a.createElement("p",null,"Nenhum s\xf3cio cadastrado para ",g.razaoSocial)),(null===a||void 0===a?void 0:a.length)>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"flexColumn center paper"},r.a.createElement("p",null," S\xf3cios cadastrados"),a.map((function(e,a){return r.a.createElement("div",{key:a},or.map((function(a,t){return r.a.createElement(n.Fragment,{key:t+1e3},r.a.createElement(qe.a,{value:e[a.field]||"",name:a.field,label:a.label,className:j,onChange:d,error:e.edit?we(e[a.field],a):null,helperText:e.edit?Ce(e[a.field],a):null,type:null===a||void 0===a?void 0:a.type,disabled:!("share"!==a.field||!C)||!e.edit,InputLabelProps:{shrink:!0,style:{fontWeight:600,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",color:"#888"}},inputProps:{style:{fontSize:"13px",color:!0===e.edit?"#000":"new"===e.status?"green":"modified"===e.status?"#FF2500":"deleted"===e.status?"red":"#888",textDecoration:"deleted"!==e.status||e.edit?"":"line-through"}}}))})),r.a.createElement(Ye.a,{component:"span",className:O,title:"editar",onClick:function(){return s(a)}},r.a.createElement(vn.a,null)),!C&&r.a.createElement(Ye.a,{className:O,color:"deleted"===e.status?"primary":"secondary",title:"deleted"===e.status?"Desfazer exclus\xe3o":"Remover",onClick:function(){return u(a)}},"deleted"===e.status?r.a.createElement("i",{className:"material-icons"},"undo"):r.a.createElement(gt.a,null)))}))),C&&E?r.a.createElement("section",null,b&&r.a.createElement(Sa,{demand:E,collection:"empresaDocs",demandFiles:[b],form:w}),r.a.createElement(Pa,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:E,setShowPendencias:p,showPendencias:S,info:x,handleSubmit:m,handleInput:o})):C?r.a.createElement("section",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(Ye.a,{size:"small",color:"primary",variant:"contained",style:{margin:"0px 0 10px 0"},onClick:function(){return m()}},"Enviar ",r.a.createElement("span",null,"\xa0\xa0 ")," ",r.a.createElement(tt.a,null)))):null))},cr=Object(Z.a)((function(e){return{paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 5px 0",height:"auto"}}}));function sr(e){var a,t=e.data,o=e.empresasForm,i=e.sociosForm,l=e.filesForm,c=e.files,s=t.socios,d=cr().paper,u=[],m={},p=[];return o.forEach((function(e){t.hasOwnProperty([e.field])&&(Object.assign(m,Object(f.a)({},e.field,t[e.field])),p.push(e))})),u.push(m),a=[{subtitle:"Detalhes da empresa",form:p,data:u},{subtitle:"Informa\xe7\xf5es sobre os s\xf3cios",form:i,data:s}],r.a.createElement(r.a.Fragment,null,r.a.createElement(ya.a,{className:d},r.a.createElement("div",{className:"divTable"},a.map((function(e,a){var t=e.subtitle,o=e.form,i=e.data;return r.a.createElement(n.Fragment,{key:a},r.a.createElement("table",{style:1===a?{tableLayout:"fixed"}:{}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",colSpan:o.length},t)),r.a.createElement("tr",null,o.map((function(e,a){return r.a.createElement("th",{key:a},e.label)})))),r.a.createElement("tbody",null,0===a&&r.a.createElement("tr",null,i.map((function(e,a){return Object.values(e).map((function(e,a){return r.a.createElement("td",{className:"review",key:a},e)}))}))),0!==a&&i.map((function(e,a){return r.a.createElement("tr",{key:a},Object.values(e).map((function(e,a){return r.a.createElement("td",{className:"review",key:a},e)})))})))))}))),r.a.createElement("h3",{style:{margin:"30px 0 0 25px"}}," ",r.a.createElement(ja.a,{style:{verticalAlign:"middle",padding:"0 0 0 8px"}})," Documentos "),c&&r.a.createElement(Sa,{form:l,files:c})))}function dr(e,a){return e.match("cnpj")?function(e){var a=function(e){return e.keyCode};document.addEventListener("keypress",a);var t,n=e.toString();return t=(n=(n=(n=n.replace(".","")).replace("/","")).replace("-","")).length+1,14!==a&&(3===t&&(e=n.substr(0,2)+"."),6===t&&(e=n.substr(0,2)+"."+n.substr(2,5)+"."),10===t&&(e=n.substr(0,2)+"."+n.substr(2,3)+"."+n.substr(6,3)+"/"),15===t&&(e=n.substr(0,2)+"."+n.substr(2,3)+"."+n.substr(6,3)+"/"+n.substr(9,4)+"-"+n.substr(13,2))),e}(a):e.match("cpf")?function(e){if(e)return e=e.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")}(a):e.match("tel")?function(e){if(e)return 13===(e=e.replace(/(?!\d)./g,"").replace(/(\d{2})/,"($1) ")).length&&(e=e.replace(/(\d{4})(\d)/,"$1-$2")),14===e.length&&(e=e.replace(/(\d{5})(\d)/,"$1-$2")),e}(a):e.match("share")?function(e){if(e)return e.length>=5&&(e=e.slice(0,5)),e}(a):a}var ur=ce(["empresas"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={activeStep:0,stepTitles:["Preencha os dados da empresa","Informa\xe7\xf5es sobre os s\xf3cios","Revis\xe3o"],steps:["Dados da Empresa","S\xf3cios","Revis\xe3o"],razaoSocial:"",toastMsg:"Empresa cadastrada!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,addedSocios:[0],totalShare:0,socios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",showFiles:!1},e.setActiveStep=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state.activeStep,"next"===t&&e.setState({activeStep:n+1}),"back"===t&&e.setState({activeStep:n-1}),"reset"===t&&e.setState({activeStep:0}),!(r=e.state.errors)||!r[0]){a.next=9;break}return a.next=8,e.setState(Object(h.a)(Object(h.a)({},e.state),je("setState")));case 8:return a.abrupt("return");case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(a){var t=a.target,n=t.name,r=dr(n,t.value);e.setState(Object(f.a)({},n,r))},e.addSocio=Object(w.a)(j.a.mark((function a(){var t,n,r,o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.state.socios,n={},r=0,o=0,Bt.forEach((function(a){""!==e.state[a.field]&&void 0!==e.state[a.field]||(r+=1)})),100!==r){a.next=7;break}return e.setState({alertType:"fieldsMissing",openAlertDialog:!0}),a.abrupt("return",null);case 7:if(Bt.forEach((function(a){Object.assign(n,Object(f.a)({},a.field,e.state[a.field]))})),t.push(n),t.forEach((function(e){o+=Number(e.share)})),!(o>100)){a.next=15;break}t.pop(),e.setState({alertType:"overShared",openAlertDialog:!0}),a.next=19;break;case 15:return a.next=17,e.setState({socios:t,totalShare:o});case 17:Bt.forEach((function(a){e.setState(Object(f.a)({},a.field,""))})),document.getElementsByName("nomeSocio")[0].focus();case 19:case"end":return a.stop()}}),a)}))),e.enableEdit=function(a){var t=e.state.socios;!0===t[a].edit?t[a].edit=!1:(t.forEach((function(e){return e.edit=!1})),t[a].edit=!0),e.setState({socios:t})},e.handleEdit=function(a){var t=a.target.name,n=e.state.socios,r=a.target.value;"share"===t&&(r=r.replace(",","."));var o=n.filter((function(e){return!0===e.edit}))[0],i=n.indexOf(o);o[t]=r;var l=n;l[i]=o,e.setState({filteredSocios:l})},e.removeSocio=function(a){var t=e.state.socios;t.splice(a,1),e.setState({socios:t})},e.getId=function(){var a=Object(w.a)(j.a.mark((function a(t,n,r,o,i,l,c){var s,d,u,m,p,v;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(d=r.filter((function(e){return e[i].toLowerCase().match(n.toLowerCase())})),""===n&&e.setState((s={},Object(f.a)(s,t,""),Object(f.a)(s,o,""),s)),!d[0]){a.next=10;break}if(u=d[0][i],m=d[0][l],""===n){a.next=8;break}return a.next=8,e.setState((p={},Object(f.a)(p,t,u),Object(f.a)(p,o,m),p));case 8:a.next=14;break;case 10:return a.next=12,e.setState((v={},Object(f.a)(v,t,""),Object(f.a)(v,o,""),v));case 12:alert(c+" n\xe3o cadastrado"),document.getElementsByName(t)[0].focus();case 14:case"end":return a.stop()}}),a)})));return function(e,t,n,r,o,i,l){return a.apply(this,arguments)}}(),e.handleBlur=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=t.target.name,r=t.target.value,(o=je())?e.setState({errors:o}):e.setState({errors:void 0}),a.t0=n,a.next="cnpj"===a.t0?7:"share"===a.t0?13:"numero"===a.t0?16:21;break;case 7:return a.next=9,F.a.get("/api/alreadyExists?table=empresas&column=cnpj&value=".concat(r));case 9:return i=a.sent,(null===i||void 0===i?void 0:i.data)&&("Empresa j\xe1 cadastrada.","O CNPJ informado corresponde a uma empresa j\xe1 est\xe1 cadastrada no sistema. Para alterar os dados da empresa, v\xe1 para Empresas -> Altera\xe7\xe3o de dados.",e.setState({cnpj:"",customTitle:"Empresa j\xe1 cadastrada.",customMsg:"O CNPJ informado corresponde a uma empresa j\xe1 est\xe1 cadastrada no sistema. Para alterar os dados da empresa, v\xe1 para Empresas -> Altera\xe7\xe3o de dados.",openAlertDialog:!0})),a.abrupt("break",22);case 13:return(r=r.replace(",","."))>100?e.setState({alertType:"overShared",openAlertDialog:!0}):(c=Number(e.state.totalShare)+Number(r),e.setState((l={},Object(f.a)(l,n,r),Object(f.a)(l,"totalShare",c),l))),a.abrupt("break",22);case 16:if(!r||r.match(/^\d+$/)){a.next=20;break}return a.next=19,e.setState({numero:""});case 19:e.setState({alertType:"numberNotValid",openAlertDialog:!0});case 20:case 21:return a.abrupt("break",22);case 22:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleFiles=function(a){if(!be(a)){var t=new FormData;t.append("contratoSocial",a[0]),e.setState({contratoSocial:t})}},e.handleSubmit=Object(w.a)(j.a.mark((function a(){var t,n,r,o,i,l;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state,n=t.socios,r=t.contratoSocial,o={},_t.forEach((function(a){e.state.hasOwnProperty([a.field])&&Object.assign(o,Object(f.a)({},a.field,e.state[a.field]))})),o.situacao="Ativo",Object.entries(o).forEach((function(e){var a=Object(Te.a)(e,2),t=a[0],n=a[1];n&&""!==n||delete o[t]})),n.forEach((function(e){delete e.edit,Object.entries(e).forEach((function(e){var a=Object(Te.a)(e,2),t=a[0],r=a[1];r&&""!==r||delete n[t]}))})),o=A.a.decamelizeKeys(o),n=A.a.decamelizeKeys(n),a.next=9,F.a.post("/api/empresaFullCad",{empresa:o,socios:n}).then((function(e){i=e.data.codigo_empresa,l=e.data.socioIds}));case 9:e.submitFile(i,l,r),e.toast(),e.resetState();case 12:case"end":return a.stop()}}),a)}))),e.submitFile=function(){var e=Object(w.a)(j.a.mark((function e(a,t,n){var r,o,i,l,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n instanceof FormData)){e.next=9;break}r=new FormData,o={fieldName:"contratoSocial",empresaId:a,socios:t,tempFile:!1},o=JSON.stringify(o),r.append("metadata",o),i=Object(he.a)(n.entries());try{for(i.s();!(l=i.n()).done;)c=l.value,r.append(c[0],c[1])}catch(s){i.e(s)}finally{i.f()}return e.next=9,F.a.post("/api/empresaUpload",r).then((function(e){return console.log("file ok.")}));case 9:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),e.removeFile=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.state.contratoSocial,r=xe(t,n),e.setState(Object(h.a)(Object(h.a)({},e.state),r));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.resetState=function(){var a={},t={},n={};_t.forEach((function(t){Object.keys(t).forEach((function(n){"field"===n&&e.state[t[n]]&&Object.assign(a,Object(f.a)({},t[n],void 0))}))})),Bt.forEach((function(a){Object.keys(a).forEach((function(n){"field"===n&&e.state[a[n]]&&Object.assign(t,Object(f.a)({},a[n],void 0))}))})),it.forEach((function(e){var a=e.name;Object.assign(n,Object(f.a)({},a,void 0))})),e.setState(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},a),t),n),{},{activeStep:0,razaoSocial:"",files:[],fileNames:[],addedSocios:[0],totalShare:0,socios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",showFiles:!1}))},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.showFiles=function(){return e.setState({showFiles:!0})},e.closeFiles=function(){return e.setState({showFiles:!e.state.showFiles})},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.handleEquipa()},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1),document.querySelector("input[name='razaoSocial']").style.width="300px"}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.socios,t=e.activeStep,o=e.confirmToast,i=e.toastMsg,l=e.steps,c=e.openAlertDialog,s=e.alertType,d=e.contratoSocial,u=e.customMsg,m=e.customTitle;return r.a.createElement(n.Fragment,null,r.a.createElement(Na,{links:["Empresas","/empresas"],text:"Cadastro de empresas"}),r.a.createElement(La,{activeStep:t,steps:l,setActiveStep:this.setActiveStep}),0===t?r.a.createElement(rr,{data:this.state,handleInput:this.handleInput,handleBlur:this.handleBlur,handleFiles:this.handleFiles,removeFile:this.removeFile}):1===t?r.a.createElement(lr,{data:this.state,socios:a,handleInput:this.handleInput,handleBlur:this.handleBlur,addSocio:this.addSocio,removeSocio:this.removeSocio,handleFiles:this.handleFiles,enableEdit:this.enableEdit,handleEdit:this.handleEdit}):2===t&&r.a.createElement(sr,{data:this.state,files:d,filesForm:it,empresasForm:_t,sociosForm:Bt}),r.a.createElement(Pa,{activeStep:t,lastStep:l.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep}),r.a.createElement(ee,{open:o,close:this.toast,msg:i}),c&&r.a.createElement(Ya,{open:c,close:this.closeAlert,alertType:s,customMessage:u,customTitle:m}))}}]),t}(n.Component)),mr=(t(551),[{title:"Cadastrar",date:"07/Nov",description:"Cadastrar uma nova empresa no sistema.",imageUrl:"/images/addCompany21.png",link:"/empresas/cadastro"},{title:"Altera\xe7\xe3o do Contrato Social",date:"07/Nov",description:"Altera\xe7\xe3o de dados da empresa ou contrato social",link:"/altContrato",imageUrl:"/images/pen2.png"},{title:"S\xf3cios",date:"07/Nov",description:"Visualizar ou editar dados dos s\xf3cios",link:"/empresas/socios",imageUrl:"/images/socios3.png"},{title:"Procura\xe7\xf5es",date:"07/Nov",description:"Cadastrar procura\xe7\xf5es e procuradores",link:"/empresas/procuradores",imageUrl:"/images/procuradores31.png"}]),pr=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"jumbo"},r.a.createElement("div",null,r.a.createElement("h1",{className:"jumbo__title"},"Empresas"),r.a.createElement("p",{className:"jumbo__description"},"Selecione uma das op\xe7\xf5es abaixo."))),r.a.createElement("main",{className:"cardContainer"},mr.map((function(e,a){var t=e.link,n=e.title,o=e.description,i=e.imageUrl;return r.a.createElement(x.b,{to:t,style:{textDecoration:"none"},key:a},r.a.createElement("div",{className:"cardE"},r.a.createElement("div",{className:"cardE__text"},r.a.createElement("h3",null,n),r.a.createElement("p",null,o)),r.a.createElement("figure",{className:"cardE__image"},r.a.createElement("img",{src:i,alt:""}))))}))))},fr=t(241),vr=t.n(fr),hr=t(422),br=t.n(hr),gr=t(242),Er=t.n(gr),Sr=t(396),xr=t(384),yr=t(379),Or=t(391),jr=t(385),wr=Object(xt.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000",fontWeight:600,fontSize:14},body:{fontSize:14}}}))(yr.a),Cr=Object(xt.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000"},body:{fontSize:13}}}))(yr.a),kr=Object(xt.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}}))(jr.a),Dr=Object(Z.a)((function(e){return{root:{flexGrow:"1",padding:"1%",textAlign:"center"},title:{marginTop:"2%",fontColor:"#000",fontSize:"0.9rem",backgroundColor:"#B2DCEA",textAlign:"center"},input:{textAlign:"center"},paper:{color:e.palette.text.secondary,margin:e.spacing(2),width:"100%",padding:"2% 0 1% 0",height:"auto"},table:{marginBottom:e.spacing(2),overflowX:"auto"}}}));function Ir(e){var a=e.procuracao,t=e.procuradores,n=Dr(),o=n.title,i=n.table,l=[];return a.procuradores.forEach((function(e){var a=t.find((function(a){return a.procuradorId===e}));l.push(a)})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:"100%",align:"left"}},r.a.createElement(In.a,{className:o}," Procuradores cadastrados ")),r.a.createElement(Sr.a,{className:i},r.a.createElement(Or.a,null,r.a.createElement(kr,null,Rt.map((function(e,a){return r.a.createElement(wr,{key:a},e.label)})))),l.map((function(e,a){return e?r.a.createElement(xr.a,{key:a},r.a.createElement(jr.a,null,Rt.map((function(a,t){return r.a.createElement(Cr,{key:t},e[a.field])})))):null}))))}var Nr={textAlign:"center",alignItems:"flex-start",justify:"space-between",lineHeight:"40px",border:"1px #ccc solid",padding:"0 1%",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px",width:180},Ar={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},Pr={verticalAlign:"middle",padding:"0 0% 0 2%"},Fr=Object(Z.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},addButton:{padding:"5px 10px 5px 8px",height:"40px",margin:"5px",float:"right",fontSize:"0.8rem"}}})),Tr=function(e){var a=e.redux,t=e.data,o=e.handleInput,i=e.addProc,l=e.removeProc,c=e.handleFiles,s=e.getFile,d=e.plusOne,u=e.minusOne,m=e.checkExpires,p=e.setShowPendencias,f=e.removeFile,v=t.dropDisplay,b=t.selectedEmpresa,g=t.procsToAdd,E=t.selectedDocs,S=t.procuracao,x=t.expires,y=t.demand,O=t.showPendencias,j=t.info,w=t.demandFiles,C=t.fileToRemove,k=a.empresas,D=a.procuradores,I=Fr(),N=I.addButton,A=I.textField,P=function(e,a){var n=t[e.field+a];return(!e.errorHandler||!e.errorHandler(n))&&(!(!n||!e.errorHandler||e.errorHandler(n))||(e.pattern&&n?null===n.match(e.pattern):n>e.max||n<e.min||(null===n||void 0===n?void 0:n.length)<(null===e||void 0===e?void 0:e.minLength)))},F=function(e,a){var n=t[e.field+a];return e.errorHandler&&e.errorHandler(n)?"\u2713":n&&e.errorHandler&&!e.errorHandler(n)?"\u2718":n>e.max||n<e.min?"Valor inv\xe1lido":n&&null===n.match(e.pattern)?"\u2718":e.pattern&&n&&null!==n.match(e.pattern)?"\u2713":(null===n||void 0===n?void 0:n.length)<(null===e||void 0===e?void 0:e.minLength)?"\u2718":(null===n||void 0===n?void 0:n.length)>=(null===e||void 0===e?void 0:e.minLength)?"\u2713":void 0};return r.a.createElement("div",{className:"flex"},r.a.createElement("header",{className:"flex center",style:{marginBottom:"10px",width:"100%"}},r.a.createElement(Le,{data:t,empresas:k,handleInput:o})),b&&r.a.createElement("section",{className:"paper flexColumn",style:{position:"relative",width:"100%"}},r.a.createElement("div",{className:"flexColumn",style:{alignItems:"center"}},r.a.createElement("h6",null," Cadastrar nova procura\xe7\xe3o "),r.a.createElement("h4",{style:{fontWeight:400,fontSize:"0.9em"}},' Se a procura\xe7\xe3o abranger mais de um procurador, clique em "+" para adicionar e anexe apenas 1 vez.')),g.map((function(e,a){return r.a.createElement("div",{className:"flex",key:a},Rt.map((function(e,i){return r.a.createElement(n.Fragment,{key:i},r.a.createElement(qe.a,{name:e.field+a,label:e.label,margin:"normal",className:A,onChange:function(e){return o(e)},type:e.type||"",error:P(e,a),helperText:F(e,a),select:e.select||!1,value:t[e.field+a]||"",disabled:e.disabled||!1,InputLabelProps:{className:A,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888"}},inputProps:{style:{background:e.disabled&&t.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#000",width:e.width||150,height:"7px"},value:"".concat(t[e.field+a]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1}),a===g.length-1&&3===i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(vr.a,{onClick:function(){return d()},style:{verticalAlign:"middle",position:"absolute",bottom:"112px",right:a>0?"40px":"68px",color:"#009688",fontSize:30,cursor:"pointer",zIndex:1}}),a>0&&r.a.createElement(br.a,{onClick:function(){return u()},style:{verticalAlign:"middle",position:"absolute",bottom:"112px",right:"70px",color:"red",fontSize:30,cursor:"pointer",zIndex:1}})))})))})),r.a.createElement("div",{className:"flex",style:{alignItems:"center",padding:"0 20px",width:"100%",margin:"12px 0 6px 0"}},r.a.createElement("div",{style:{width:"50%"}},y?r.a.createElement("div",{className:"flex"},r.a.createElement(Sa,{demand:y,collection:"empresaDocs",demandFiles:w,form:it,style:{minWidth:"220px"}})):r.a.createElement(oa,{name:"procuracao",formData:S,dropDisplay:v,handleFiles:c,demandFiles:w,removeFile:f,fileToRemove:C})),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"50%",paddingTop:"8px"}},r.a.createElement("div",{style:{marginTop:"12px"}},r.a.createElement(Ue.a,{control:r.a.createElement(Re.a,{checked:!0===x,onChange:function(){return m()},value:x}),label:r.a.createElement("span",{style:{color:"#2979ff",fontSize:"0.8em",float:"right"}},"Procura\xe7\xe3o por prazo determinado?")})),r.a.createElement(qe.a,{name:"vencimento",label:"Vencimento",margin:"normal",className:A,onChange:function(e){return o(e)},type:"date",helper:"se indeterminado, deixar em branco",value:t.vencimento||"",disabled:!1===x,InputLabelProps:{className:A,shrink:!0,style:{fontSize:"0.8rem",color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:"#fafafa",fontSize:"0.8rem",textAlign:"center",color:"#000",height:"9px"}},variant:"filled"})))),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%"}},b&&!y?r.a.createElement(Ye.a,{className:N,size:"small",color:"secondary",variant:"contained",onClick:function(){return i()}},r.a.createElement(Ke.a,null),"Cadastrar procura\xe7\xe3o"):b&&y?r.a.createElement(Pa,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:y,setShowPendencias:p,showPendencias:O,info:j,handleSubmit:i,handleInput:o}):null),r.a.createElement("section",{className:"flexColumn",style:{width:"100%",paddingRight:"0"}},!b||E[0]||y?b&&E[0]&&r.a.createElement("h2",{style:{margin:"25px 0 0 15px"}},"Procura\xe7\xf5es cadastradas"):r.a.createElement("div",{className:"flex paper"},"Nenhum procurador cadastrado para ",b.razaoSocial),E.length>0&&E.map((function(e,a){return r.a.createElement("div",{key:.01*a,className:"flexColumn paper",style:{padding:"10px 15px 20px 15px"}},r.a.createElement("h5",null,"Procura\xe7\xe3o ",e.vencimento?"com vencimento em "+((t=e.vencimento)?Oe()(t).format("DD-MM-YYYY"):""):"por prazo indeterminado"),r.a.createElement(Ir,{procuradores:D,procuracao:e}),r.a.createElement("div",{className:"flex center",style:{position:"relative"}},r.a.createElement("span",{style:Nr},r.a.createElement(fa.a,{style:Pr}),r.a.createElement("span",{style:{verticalAlign:"middle"}}," "," Baixar arquivo"),r.a.createElement(ma.a,{style:Ar,onClick:function(){return s(e.procuracaoId)}})),r.a.createElement("span",{style:Object(h.a)(Object(h.a)({},Nr),{},{width:90,backgroundColor:"white",border:0,position:"absolute",right:0})},r.a.createElement(Er.a,{color:"secondary",style:Ar,onClick:function(){return l(e)}}),"Apagar")));var t}))))},zr=ce(["empresas","procuradores","procuracoes","getFiles/empresaDocs"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={empresas:[],razaoSocial:"",toastMsg:"Procura\xe7\xe3o cadastrada!",confirmToast:!1,fileNames:[],openDialog:!1,expires:!1,filteredProc:[],dropDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",procuradores:[],procsToAdd:[1],procuracoesArray:[],selectedDocs:[],showPendencias:!1},e.handleInput=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.target.name,r=e.props.redux.empresas,o=Object(v.a)(e.props.redux.procuradores),i=JSON.parse(JSON.stringify(e.props.redux.procuracoes)),l=t.target.value,c=dr(n,l),e.setState(Object(f.a)({},n,c)),"razaoSocial"!==n||!Array.isArray(o)){a.next=14;break}if(!(s=r.find((function(e){return e.razaoSocial===l})))){a.next=13;break}return d=i.filter((function(e){return e.codigoEmpresa===s.codigoEmpresa})),a.next=10,e.setState({selectedEmpresa:s,selectedDocs:d,razaoSocial:s.razaoSocial});case 10:l!==s.razaoSocial&&e.setState({selectedEmpresa:void 0,selectedDocs:[]}),a.next=14;break;case 13:e.setState({selectedEmpresa:void 0,selectedDocs:[]});case 14:n.match("cpfProcurador")&&(u=o.find((function(e){return e.cpfProcurador===l})))&&(m=n.charAt(n.length-1),Object.keys(e.state).forEach((function(a){a!==n&&e.state[a]===l&&(alert("Este CPF j\xe1 foi informado."),e.setState(Object(f.a)({},n,"")),p=!0)})),p||Rt.forEach((function(a){var t=a.field,n=t+m;e.setState(Object(f.a)({},n,u[t]))})));case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.addProc=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,h,b,g,E,S,x;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.props.redux,r=e.state,o=r.selectedEmpresa,i=r.demand,l=r.procuracao,c=r.vencimento,s=r.expires,d=r.info,u=o.codigoEmpresa,m=JSON.parse(JSON.stringify(n.procuradores)),p=Object(v.a)(e.state.procsToAdd),h=[],b={},p.forEach((function(a,t){Rt.forEach((function(a){Object.assign(b,Object(f.a)({},a.field,e.state[a.field+t]))}));var n=0;Object.values(b).forEach((function(e){e&&(n+=1)})),n>0&&h.push(b),n=0,b={},Rt.forEach((function(a){e.setState(Object(f.a)({},a.field+t,""))}))})),E=[],S=[],h.forEach((function(e){var a;(null===(a=g=m.find((function(a){return a.cpfProcurador===e.cpfProcurador})))||void 0===a?void 0:a.procuradorId)?(Object.keys(e).forEach((function(a){e[a]===g[a]&&delete e[a]})),e.procuradorId=g.procuradorId,S.push(e)):E.push(e)})),void 0===t&&(x={status:"Aguardando aprova\xe7\xe3o",empresaId:u,history:{files:l,newMembers:E,oldMembers:S,vencimento:c,expires:s},metadata:{fieldName:"procuracao",empresaId:u}},Object.entries(x).forEach((function(e){var a=Object(Te.a)(e,2),t=a[0];a[1]||delete x[t]})),x.approved=t,x.historyLength=0,Pe(x).then((function(e){return console.log(e)})),e.setState({toastMsg:"Solicita\xe7\xe3o de cadastro enviada",confirmToast:!0}),setTimeout((function(){e.resetState()}),1500)),!1===t&&(Pe({id:i.id,empresaId:u,history:{info:d},declined:!0}).then((function(e){return console.log(e)})),e.setState({toastMsg:"Solicita\xe7\xe3o indeferida!",confirmToast:!0}),setTimeout((function(){e.props.history.push("/solicitacoes")}),1500)),!0===t&&(E=A.a.decamelizeKeys(E),S=A.a.decamelizeKeys(S),e.approveProc(E,S));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.approveProc=function(){var a=Object(w.a)(j.a.mark((function a(t,n){var r,o,i,l,c,s,d,u,m,p,f,v;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.state,o=r.selectedEmpresa,i=r.demandFiles,l=r.vencimento,c=r.demand,s=o.codigoEmpresa,d=n.map((function(e){return e.procurador_id})),!(t.length>0)){a.next=6;break}return t=A.a.decamelizeKeys(t),u={table:"procuradores",tablePK:"procurador_id",procuradores:t,empresas:[s]},a.next=6,F.a.post("/api/cadProcuradores",u).then((function(e){e.data.forEach((function(e){return d.push(e.procurador_id)}))}));case 6:return m={table:"procuradores",tablePK:"procurador_id",requestArray:n,keys:Rt.map((function(e){return A.a.decamelize(e.field)}))},n&&n[0]&&F.a.put("/api/editProc",Object(h.a)({},m)).then((function(e){return console.log(e)})),p={codigo_empresa:s,vencimento:l,status:"vigente",procuradores:d},Object.entries(p).forEach((function(e){var a=Object(Te.a)(e,2),t=a[0],n=a[1];n&&""!==n||delete p[t]})),a.next=12,F.a.post("/api/cadProcuracao",p).then((function(e){return f=e.data[0].procuracao_id}));case 12:p.procuracaoId=f,v={id:c.id,demandFiles:i,history:{},approved:!0},i&&(v.metadata={fieldName:"procuracao",empresaId:o.codigoEmpresa,procuracaoId:f,procuradores:d}),Pe(v).then((function(e){return console.log(e)})),e.toast(),c&&setTimeout((function(){e.props.history.push("/solicitacoes")}),1500),e.resetState();case 19:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.removeProc=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.procuracaoId,r=e.props.redux.empresaDocs.find((function(e){return Number(e.metadata.procuracaoId)===n})),o=Object(v.a)(e.state.selectedDocs),a.next=4,F.a.delete("/api/delete?table=procuracoes&tablePK=procuracao_id&id=".concat(n)).then((function(e){return console.log(e.data)}));case 4:r&&r.hasOwnProperty("id")&&F.a.delete("/api/deleteFile?collection=empresaDocs&id=".concat(r.id)).then((function(e){var a=e.data;return console.log(a)})),i=o.indexOf(t),o.splice(i,1),e.setState({selectedDocs:o});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleFiles=function(a){if(!be(a)){var t=new FormData;t.append("procuracao",a[0]),e.setState({procuracao:t,fileToRemove:null})}},e.removeFile=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.state.procuracao,r=xe(t,n),e.setState(Object(h.a)(Object(h.a)({},e.state),r));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.getFile=function(a){var t=e.props.redux.empresaDocs.find((function(e){return Number(e.metadata.procuracaoId)===a}));if(t){var n=t.id,r=t.filename;va(n,r,"empresaDocs")}else e.setState({alertType:"filesNotFound",openAlertDialog:!0})},e.plusOne=function(){var a=Object(v.a)(e.state.procsToAdd);a.push(1),e.setState({procsToAdd:a})},e.minusOne=function(){var a=Object(v.a)(e.state.procsToAdd);a.pop(),e.setState({procsToAdd:a})},e.checkExpires=function(){!0===e.state.expires&&e.setState({vencimento:""}),e.setState({expires:!e.state.expires})},e.resetState=function(){var a=e.state.procsToAdd,t=Rt.map((function(e){return e.field})),n={};a.forEach((function(a,r){t.forEach((function(a){e.state.hasOwnProperty(a+r)&&(n[a+r]=void 0)}))})),e.removeFile("procuracao"),e.setState(Object(h.a)(Object(h.a)({},n),{},{dropDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",procsToAdd:[1],vencimento:void 0,procuracao:void 0,expires:!1}))},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.escFunction=function(a){27===a.keyCode&&e.state.openDialog&&e.toggleDialog()},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,n,r,o,i,l,c,s,d,u,m,p,v,b,g,E=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.props.redux,(o=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.demand)&&(i=JSON.parse(JSON.stringify(r.procuradores)),l=ut(o,r,i),c=l.latestDoc,s=Object(Y.a)(l,["latestDoc"]),d=o.history,u=d[0],m=u.vencimento,p=u.expires,v=d[0].newMembers||[],b=d[0].oldMembers||[],console.log(l),g=[],b[0]&&b.forEach((function(e){i.forEach((function(a){Object.keys(a).forEach((function(t){(null===e||void 0===e?void 0:e.procuradorId)!==(null===a||void 0===a?void 0:a.procuradorId)||e[t]||(e[t]=a[t])}))}))})),(v[0]||b[0])&&v.concat(b).forEach((function(e,a){g.push(a),Rt.forEach((function(t){var n=t.field;E.setState(Object(f.a)({},n+a,e[n]))}))})),this.setState({vencimento:m,expires:p,procsToAdd:g}),this.setState(Object(h.a)(Object(h.a)({},s),{},{demandFiles:[c]}))),document.addEventListener("keydown",this.escFunction,!1);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.openAlertDialog,t=e.alertType,n=e.demand;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Na,{links:["Empresas","/empresas"],text:"Cadastro de procura\xe7\xf5es",demand:n}),r.a.createElement(Tr,{data:this.state,redux:this.props.redux,handleInput:this.handleInput,removeProc:this.removeProc,handleFiles:this.handleFiles,removeFile:this.removeFile,addProc:this.addProc,handleSubmit:this.handleSubmit,plusOne:this.plusOne,minusOne:this.minusOne,getFile:this.getFile,checkExpires:this.checkExpires,setShowPendencias:this.setShowPendencias}),r.a.createElement(ee,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}),a&&r.a.createElement(Ya,{open:a,close:this.closeAlert,alertType:t,customMessage:this.state.customMsg}))}}]),t}(n.Component)),Lr=ce(["empresas","socios","getFiles/empresaDocs"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={razaoSocial:"",toastMsg:"Dados atualizados!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,dialogTitle:"",addedSocios:[0],totalShare:0,filteredSocios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",showFiles:!1,showPendencias:!1},e.handleInput=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.props.redux.empresas,r=t.target.name,o=t.target.value,i=dr(r,o),e.setState(Object(f.a)({},r,i)),"razaoSocial"!==r){a.next=14;break}if(l=A.a.camelizeKeys(e.state.originals),c=l.filter((function(e){return e.razaoSocial===o})).map((function(e){return e})),s=n.find((function(e){return e.razaoSocial===o})),c.length>0?e.setState({filteredSocios:c,selectedEmpresa:s}):e.setState({filteredSocios:[]}),!s){a.next=13;break}return a.next=10,e.setState({razaoSocial:s.razaoSocial,selectedEmpresa:s});case 10:o!==s.razaoSocial&&e.setState({selectedEmpresa:void 0}),a.next=14;break;case 13:e.setState({selectedEmpresa:void 0});case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleBlur=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.state,r=n.filteredSocios,o=n.share,i=t.target.name,l=t.target.value,a.t0=i,a.next="cpfSocio"===a.t0?6:"share"===a.t0?9:22;break;case 6:return r.find((function(e){return e.cpfSocio===l}))&&(e.setState({alertType:"alreadyExists",openAlertDialog:!0}),e.setState({cpfSocio:""})),a.abrupt("break",23);case 9:if(!o||"number"===typeof o){a.next=12;break}return a.next=12,e.setState({share:Number(e.state.share)});case 12:if(!l){a.next=21;break}if(!((l=e.state.share)>100)){a.next=19;break}return a.next=17,e.setState({share:""});case 17:l="",e.setState({alertType:"numberNotValid",openAlertDialog:!0});case 19:l<0&&(l*=-1,e.setState({share:l})),l>0&&(c=0,(s=r.map((function(e){return e.share?Number(e.share):0})))[0]&&(c=s.reduce((function(e,a){return e+a}))),c+=l,e.setState({totalShare:c}));case 21:case 22:return a.abrupt("break",23);case 23:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.addSocio=Object(w.a)(j.a.mark((function a(){var t,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.state.filteredSocios,n={},!(e.state.totalShare>100)){a.next=4;break}return e.setState({openAlertDialog:!0,alertType:"overShared"}),a.abrupt("return",null);case 4:return or.forEach((function(a){Object.assign(n,Object(f.a)({},a.field,e.state[a.field]))})),t.unshift(n),a.next=8,e.setState({filteredSocios:t});case 8:or.forEach(function(){var a=Object(w.a)(j.a.mark((function a(t){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.setState(Object(f.a)({},t.field,void 0));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),document.getElementsByName("nomeSocio")[0].focus();case 10:case"end":return a.stop()}}),a)}))),e.removeSocio=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=Object(v.a)(e.state.filteredSocios),(r=n[t]).status&&"deleted"!==r.status?(r.originalStatus=r.status,r.status="deleted"):"deleted"===(null===r||void 0===r?void 0:r.status)?r.status=null===r||void 0===r?void 0:r.originalStatus:r.status="deleted",e.setState({filteredSocios:n});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.enableEdit=function(a){var t=e.state.filteredSocios;!0===t[a].edit?t[a].edit=!1:(t.forEach((function(e){return e.edit=!1})),t[a].edit=!0),e.setState({filteredSocios:t})},e.handleEdit=function(a){var t=a.target.name,n=a.target.value;n=dr(t,n);var r=e.state.filteredSocios.filter((function(e){return!0===e.edit}))[0],o=e.state.filteredSocios.indexOf(r);r[t]=n;var i=e.state.filteredSocios;i[o]=r,e.setState({filteredSocios:i})},e.handleSubmit=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,v,b,g,E,S,x,y,O,C,k,D,I;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.props.redux.socios,o=e.state,i=o.selectedEmpresa,l=o.filteredSocios,c=o.demand,s=o.contratoSocial,d=o.info,u=i.codigoEmpresa,m=(null===c||void 0===c||null===(n=c.history)||void 0===n?void 0:n.length)||0,(p={}).metadata={},!(+l.map((function(e){var a=e.share;return"string"===typeof a&&(a=Number(a)),a||0})).reduce((function(e,a){return e+a})).toFixed(2)>100)){a.next=8;break}return e.setState({openAlertDialog:!0,alertType:"overShared"}),a.abrupt("return",null);case 8:if(v=[],b=[],(g=or.map((function(e){return A.a.decamelize(e.field)}))).splice(1,1),l.forEach((function(e){var a=e,t=(a.razaoSocial,a.createdAt,a.edit,Object(Y.a)(a,["razaoSocial","createdAt","edit"]));if((e=t).codigoEmpresa=u,e.hasOwnProperty("socioId"))v.push(e),delete v.socioId;else{var n,o=r.find((function(a){return a.cpfSocio===e.cpfSocio}));if(o)e.socioId=o.socioId,v.push(e);else"deleted"!==(null===(n=e)||void 0===n?void 0:n.status)&&(e.status="new",b.push(e))}})),E="socios",S="socio_id",x=[],y={},k=A.a.camelizeKeys(e.state.originals),v.forEach((function(e){k.forEach(function(){var a=Object(w.a)(j.a.mark((function a(t){var n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.socioId===t.socioId&&(Object.keys(e).forEach((function(a){!e[a]||""===e[a]||e[a]===t[a]&&"socioId"!==a||Object.assign(y,Object(f.a)({},a,e[a]))})),Object.keys(y).length>1&&("deleted"!==(null===(n=y)||void 0===n?void 0:n.status)?(e.status="modified",y.status="modified"):C=!0,x.push(y)),(y.share||C)&&(O=!0),y={});case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())})),(b=b.filter((function(e){return"deleted"!==e.status}))).forEach((function(e){Object.keys(e).forEach((function(a){e[a]&&""!==e[a]||delete e[a]}))})),v.filter((function(e){return"modified"===(null===e||void 0===e?void 0:e.status)}))[0]||b[0]||s||!1===t||C){a.next=21;break}return alert("Nenhuma altera\xe7\xe3o foi realizada."),a.abrupt("return");case 21:if(D=!1,I=l.filter((function(e){return void 0!==e.socioId})).map((function(e){return e.socioId})),t||!(b.length>0||O)){a.next=26;break}e.setState({toastMsg:"Altera\xe7\xe3o estatu\xe1ria enviada!"}),a.next=48;break;case 26:if((O||0!==b.length)&&!t){a.next=48;break}if(p.completed=!0,p.metadata.tempFile="false",v=A.a.decamelizeKeys(x),b=A.a.decamelizeKeys(b),a.prev=31,!(b.length>0)){a.next=37;break}return b.forEach((function(e){return delete e.status})),a.next=36,F.a.post("/api/cadSocios",{socios:b,table:E,tablePK:S}).then((function(e){return e.data.forEach((function(e){return I.push(e.socio_id)}))}));case 36:D=!0;case 37:if(!(v.length>0)){a.next=43;break}return v.forEach(function(){var e=Object(w.a)(j.a.mark((function e(a,t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("deleted"!==(null===a||void 0===a?void 0:a.status)){e.next=5;break}return e.next=3,F.a.delete("/api/delete?table=socios&tablePK=socio_id&id=".concat(a.socio_id)).catch((function(e){return console.log(e)}));case 3:-1!==I.indexOf(a.socio_id)&&(I.splice(t,1),D=!0);case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()),(v=v.filter((function(e){return"modified"===e.status}))).forEach((function(e){return delete e.status})),a.next=43,F.a.put("/api/editSocios",{requestArray:v,table:E,tablePK:S,keys:g}).then((function(e){return console.log(e.data)}));case 43:a.next=48;break;case 45:a.prev=45,a.t0=a.catch(31),console.log(a.t0);case 48:p=Object(h.a)(Object(h.a)({},p),{},{id:null===c||void 0===c?void 0:c.id,empresaId:u,info:d,history:{},historyLength:m,approved:t}),x.length>0&&(p.history.oldMembers=x),b.length>0&&(p.history.newMembers=b),s&&c&&(p.demandFiles=[s]),!1===t&&(p.declined=!0),p.completed&&(p.approved=!0),!s||D||c||(p.history.files=s,p.metadata={fieldName:"contratoSocial",empresaId:u}),p.metadata.socios=I,Pe(p).then((function(a){console.log(null===a||void 0===a?void 0:a.data),e.toast()})).catch((function(e){return console.log(e)})),v=[],x=[],y={},b=[],e.resetState(),c&&setTimeout((function(){e.props.history.push("/solicitacoes")}),1500);case 63:case"end":return a.stop()}}),a,null,[[31,45]])})));return function(e){return a.apply(this,arguments)}}(),e.handleFiles=function(a){if(!be(a)&&a&&a[0]){var t=new FormData;t.append("contratoSocial",a[0]),e.setState({contratoSocial:t,fileToRemove:null})}},e.removeFile=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.state.contratoSocial,r=xe(t,n),e.setState(Object(h.a)(Object(h.a)({},e.state),r));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.resetState=function(){var a=e.state.filteredSocios;a&&a.forEach((function(e){return e.edit=!1})),e.setState({razaoSocial:"",selectedEmpresa:void 0,filteredSocios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",contratoSocial:void 0})},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e,a,t,n=this,r=this.props.redux,o=null===(e=this.props)||void 0===e||null===(a=e.location)||void 0===a||null===(t=a.state)||void 0===t?void 0:t.demand,i=A.a.decamelizeKeys(r.socios),l=JSON.parse(JSON.stringify(r.socios)),c=l.filter((function(e){return e.razaoSocial===n.state.razaoSocial}));if(o){var s=l.filter((function(e){return e.codigoEmpresa===o.empresaId}));console.log(s);var d=ut(o,r,s),u=d.latestDoc,m=Object(Y.a)(d,["latestDoc"]);console.log(d),this.setState(Object(h.a)(Object(h.a)({},m),{},{contratoSocial:u,originals:i}))}else this.setState({originals:i,filteredSocios:c})}},{key:"componentDidUpdate",value:function(e,a){var t=e.redux.socios,n=a.originals,r=A.a.decamelizeKeys(t);JSON.stringify(r)!==JSON.stringify(n)&&this.setState({originals:r})}},{key:"componentWillUnmount",value:function(){this.setState({}),document.removeEventListener("keydown",this.escFunction,!1)}},{key:"render",value:function(){var e=this.state,a=e.filteredSocios,t=e.openAlertDialog,n=e.alertType,o=this.props.redux.empresas;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Na,{links:["Empresas","/empresas"],text:"Altera\xe7\xe3o do quadro societ\xe1rio"}),r.a.createElement(lr,{data:this.state,socios:a,empresas:o,handleInput:this.handleInput,handleBlur:this.handleBlur,addSocio:this.addSocio,removeSocio:this.removeSocio,enableEdit:this.enableEdit,handleEdit:this.handleEdit,handleFiles:this.handleFiles,handleSubmit:this.handleSubmit,removeFile:this.removeFile,setShowPendencias:this.setShowPendencias}),r.a.createElement(ee,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}),t&&r.a.createElement(Ya,{open:t,close:this.closeAlert,alertType:n}))}}]),t}(n.Component)),Mr=t(181),qr=t.n(Mr),Vr={title:{text:"Ve\xedculos por ano de fabrica\xe7\xe3o",align:"center",marginTop:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:500,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}},legend:{show:!1},chart:{id:"veiculos_ano_fabricacao"},xaxis:{labels:{style:{fontSize:"9px",fontWeight:400,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}}},dataLabels:{enabled:!1},plotOptions:{bar:{horizontal:!1}}},_r={title:{text:"Percentual de ve\xedculos por ano de fabrica\xe7\xe3o",align:"center",marginTop:10,marginBottom:20,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"13px",fontWeight:500,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}},plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0,fontSize:"20px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif ",fontWeight:600,color:"#373d3f",offsetY:-10},value:{show:!0,fontSize:"15px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,color:"#373d3f",offsetY:16,formatter:function(e){return e}},total:{show:!0,showAlways:!0,label:"Total:",fontSize:"20px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:600,color:"#373d3f"}}}}},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},Br=(t(553),function(e){var a=e.empresas,t=e.razaoSocial,n=e.selectedEmpresa,o=e.selectedVehicles,i=e.labels,l=e.values,c=e.tableLabels,s=e.tableData,d=e.mediaIdades,u=e.moda,m=e.handleInput,p=e.segurosVencidos,f=e.segurosVigentes,v=e.oldVehicles,b=e.veiculosNovos;return r.a.createElement("main",{className:"relatorios"},r.a.createElement(Le,{empresas:a,data:{razaoSocial:t},handleInput:m}),o&&0!==o.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{width:"100%",textAlign:"center"}},n?n.razaoSocial:"Exibindo todos os ve\xedculos"," - M\xe9dia de idade da frota: ",d," anos. Moda do ano de fabrica\xe7\xe3o: ",u,"."),r.a.createElement(ya.a,null,r.a.createElement("section",{className:"rowContainer"},r.a.createElement(qr.a,{options:Object(h.a)(Object(h.a)({},Vr),{},{xaxis:Object(h.a)(Object(h.a)({},Vr.xaxis),{},{categories:i})}),series:[{name:"Ve\xedculos",data:l}],type:"bar",width:"600"}),r.a.createElement(qr.a,{options:Object(h.a)(Object(h.a)({},_r),{},{labels:i,colors:["#ff7c43","#ffa600","#FF9800","#f95d6a","#f44336","#2E93fA","#3333ff","#66DA26","#669999","#E91E63","#d45087","#a05195","#665191","#2f4b7c","#003f5c"]}),series:l,type:"donut",width:"480"}))),r.a.createElement(ya.a,null,r.a.createElement("section",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",style:{color:"#fff",backgroundColor:"rgb(84, 110, 122, 0.7)"},colSpan:c.length},"Ve\xedculos por ano - ",n?n.razaoSocial:"Exibindo todos os ve\xedculos","  ")),r.a.createElement("tr",null,c.map((function(e,a){return r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,s.map((function(e,a){return r.a.createElement("tr",{key:a},e.map((function(e,a){return r.a.createElement("td",{className:"review relatorioTD",key:a},e)})))})))))),r.a.createElement("section",{className:"rowContainer"},r.a.createElement(qr.a,{options:{title:Object(h.a)(Object(h.a)({},_r.title),{},{text:"Seguros vencidos: ".concat(p," / vigentes: ").concat(f)}),labels:["Seguros vencidos","Seguros vigentes"],colors:["#FF9800","#3333ff"]},series:[Number(p),Number(f)],type:"pie",width:"400"}),r.a.createElement(qr.a,{options:{title:Object(h.a)(Object(h.a)({},_r.title),{},{text:"Idade superior a 15 anos: ".concat(v," / inferior 15 anos: ").concat(b)}),labels:["Ve\xedculos com mais de 15 anos","Ve\xedculos com menos de 15 anos"],colors:["#f44336","#2E93fA"]},series:[Number(v),Number(b)],type:"pie",width:"420",height:"220"}))):r.a.createElement("p",null,"Nenhum ve\xedculo cadastrado para ",n.razaoSocial))}),Rr=function(e){var a=Object(v.a)(e);if(a.shift(),a[0])return a.reduce((function(e,a){return e+a}))},Ur=function(e){return e.filter((function(e){return!e.vencimento||Oe()(e.vencimento).isValid()&&Oe()(e.vencimento).isBefore(Oe()())&&e.veiculoId&&e})).length},Yr=ce(["veiculos","empresas"],(function(e){var a,t,o=e.redux,i=o.veiculos,l=o.empresas,c=Object(n.useState)(""),s=Object(Te.a)(c,2),d=s[0],u=s[1],m=Object(n.useState)(void 0),p=Object(Te.a)(m,2),f=p[0],h=p[1],b=Object(n.useState)(""),g=Object(Te.a)(b,2),E=g[0],S=g[1],x=Object(n.useState)(""),y=Object(Te.a)(x,2),O=y[0],j=y[1],w=Object(n.useState)(""),C=Object(Te.a)(w,2),k=C[0],D=C[1];f&&""!==f?(a=f.codigoEmpresa,t=i.filter((function(e){return e.codigoEmpresa===a}))):t=i;var I=t.map((function(e){return e.anoCarroceria})).filter((function(e){return null!==e})).sort(),N=I.reduce((function(e,a){return e+a/I.length}),0);N=((new Date).getFullYear()-N).toFixed(2);var A={};I.forEach((function(e){void 0===A[e]&&(A[e]=0),A[e]+=1}));var P=Object.keys(A),F=Object(v.a)(P.sort((function(e,a){return e-a}))),T=Object.values(A),z={},L=[],M={};F.forEach((function(e){t.forEach((function(a){var t;a.anoCarroceria&&a.anoCarroceria.toString()===e&&(L.push({veiculoId:a.veiculoId,poltronas:a.poltronas}),z[e]?(t=z[e]).push.apply(t,Object(v.a)(L)):z[e]=L,L=[])})),M[e]=z[e],z={}}));var q=0,V=["Capacidade Total"],_=[],B=["Capacidade M\xe9dia"];Object.keys(M).forEach((function(e){M[e].forEach((function(e){q+=e.poltronas})),V.push(q),B.push((q/M[e].length).toFixed(2));var a=V.reduce((function(e,a){return e+a}),0);_.push(a),q=0})),V.push(Rr(V));var R=["Ano"],U=["N\xba de Ve\xedculos"];R.push.apply(R,Object(v.a)(F).concat(["Total"])),U.push.apply(U,Object(v.a)(T)),U.push(Rr(U)),B.push(function(e){var a=e.map((function(e){return Number(e)}));if(a.shift(),a[0])return(a.reduce((function(e,a){return e+a}))/a.length).toFixed(2)}(B));var Y=[U,B,V],H=P.sort((function(e,a){return A[e]-A[a]}));H=H[H.length-1];var K=(new Date).getFullYear();Object(n.useEffect)((function(){var e=(new Date).getFullYear(),a=Ur(t),n=t.filter((function(a){return e-a.anoCarroceria>14&&null!==a.anoCarroceria})).length;S(a),j(t.length-a),D(n)}),[t]);var J,W,$,G=[];return d.length>2&&f?(G=Ur(t),W=t.filter((function(e){return K-e.anoCarroceria>14&&null!==e.anoCarroceria})).length,J=t.length-G,$=t.length-W):(G=E,J=O,W=k,$=t.length-k),r.a.createElement(Br,{empresas:l,razaoSocial:d,labels:F,values:T,tableLabels:R,tableData:Y,selectedEmpresa:f,selectedVehicles:t,mediaIdades:N,moda:H,handleInput:function(e){var a,t=e.target.value;u(t),t.length>2?(a=l.find((function(e){return e.razaoSocial===t})))&&h(a):h("")},segurosVencidos:G,segurosVigentes:J,oldVehicles:W,veiculosNovos:$})})),Hr=t(423),Kr=t.n(Hr),Jr=t(424),Wr=t.n(Jr);function $r(e){var a,t=e.tableData,n=e.staticFields,o=e.title,i=e.tableStyle,l=e.style,c=e.completed,s=e.showInfo,d=e.showFiles,u=e.setShowFiles,m=e.filesCollection,p=e.primaryKey,f=e.close,v=e.filesIds,b=e.razaoSocial,g=[],E=[],S=[];if(t.forEach((function(e,a){n.forEach((function(t){g.includes(t.title)||g.push(t.title),"info"===t.field?S.push(Object(h.a)(Object(h.a)({},t),{},{index:a,files:null===e||void 0===e?void 0:e.files})):"files"===t.field?S.push(Object(h.a)(Object(h.a)({},t),{},{files:null===e||void 0===e?void 0:e.files})):t.action?S.push(Object(h.a)(Object(h.a)({},t),{},{id:null===e||void 0===e?void 0:e.id})):S.push(Object(h.a)(Object(h.a)({},t),{},{value:e[t.field]}))})),E.push(S),S=[]})),c){var x=g.indexOf("Analisar solicita\xe7\xe3o");g[x]="Conclu\xedda"}var y=(null===(a=E[0])||void 0===a?void 0:a.length)||"";return d?r.a.createElement(r.a.Fragment,null,r.a.createElement(er,{filesCollection:m,close:f,typeId:p,filesIds:v,razaoSocial:b}),r.a.createElement("footer",null,r.a.createElement("div",{className:"voltarDiv",style:{padding:"0px",margin:"30px 0 0 0",position:"absolute",bottom:"1%",zIndex:"10"}},r.a.createElement(Ye.a,{variant:"outlined",color:"primary",onClick:function(){return u(!1)}},r.a.createElement(kt.a,{size:"tiny"}),r.a.createElement("span",{style:{padding:"2px 0 0 2px",marginLeft:"2px",fontSize:".85rem"}},"Voltar"))))):r.a.createElement("table",{style:i||void 0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",style:l,colSpan:y},o)),r.a.createElement("tr",null,g.map((function(e,a){return r.a.createElement("th",{key:a,style:l},e)})))),r.a.createElement("tbody",null,E.map((function(e,a){return r.a.createElement("tr",{key:a},e.map((function(e,a){return r.a.createElement("td",{key:a,style:(null===e||void 0===e?void 0:e.style)?e.style:l,className:"link"===e.type&&e.laudoDocId?"link2":"review"},"date"===e.type?(n=e.value,Oe()(n,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?Oe()(n,Oe.a.ISO_8601,!0).format("DD/MM/YYYY, HH:mm[h]"):n):(null===e||void 0===e?void 0:e.action)?function(e,a,n){var o,i=!(null===(o=t[a])||void 0===o?void 0:o.info);switch(e){case"info":return r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start"}},r.a.createElement("span",{className:"button",style:i?{cursor:"default"}:{},component:"span",title:i?"Nenhuma informa\xe7\xe3o adicional":"Ver informa\xe7\xf5es adicionais",onClick:function(){return s(a)}},r.a.createElement(Kr.a,{color:i?"disabled":"primary"})),n?r.a.createElement("span",{className:"button",component:"span",title:"Ver arquivos",onClick:function(){u(n)}},r.a.createElement(ja.a,null)):r.a.createElement("span",{style:{padding:"2px 10px 0 17px"}}," - "));case"completed":return r.a.createElement(Wr.a,{style:{color:"green"}});default:return}}(e.action,null===e||void 0===e?void 0:e.index,null===e||void 0===e?void 0:e.files):e.value);var n})))}))))}var Gr=[{field:"action",title:"Movimenta\xe7\xe3o"},{field:"user",title:"Usu\xe1rio"},{field:"createdAt",title:"Registro no sistema",type:"date"},{field:"info",title:"Informa\xe7\xf5es adicionais",action:"info",style:{textAlign:"center"}}];function Zr(e){var a=e.solicitacao,t=e.showInfo,n=e.historyLog,o=e.setHistoryLog,i=e.close,l=e.vehicleDocs,c=e.empresaDocs,s=e.showFiles,d=e.setShowFiles,u=e.filesIds,m=a.history,p=Oe()(null===n||void 0===n?void 0:n.createdAt).format("DD/MM/YYYY, HH:mm[h]"),f={};return f=a.hasOwnProperty("veiculoId")?{primaryKey:"veiculoId",filesCollection:l}:{primaryKey:"empresaId",filesCollection:c},r.a.createElement("main",{className:"popUpWindow",sytle:{width:"90%"}},n?r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"infoLogHeader"},r.a.createElement("h3",null,"Informa\xe7\xf5es adicionais"),r.a.createElement("hr",null),r.a.createElement("div",{className:"floatRight"},"Inserido por ",null===n||void 0===n?void 0:n.user," ",p?"\xe0s "+p:"")),r.a.createElement("section",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,n.info)),r.a.createElement("footer",null,r.a.createElement("div",{className:"voltarDiv",style:{padding:"0px",margin:"30px 0 0 0",position:"absolute",bottom:"1%"}},r.a.createElement(Ye.a,{variant:"outlined",color:"primary",onClick:function(){return o(!1)}},r.a.createElement(kt.a,{size:"tiny"}),r.a.createElement("span",{style:{padding:"2px 0 0 2px",marginLeft:"2px",fontSize:".85rem"}},"Voltar"))))):r.a.createElement($r,Object.assign({},f,{tableData:m,staticFields:Gr,length:Gr.length,title:"Solicita\xe7\xe3o n\xba ".concat(null===a||void 0===a?void 0:a.numero),id:a.id,razaoSocial:null===a||void 0===a?void 0:a.empresa,showInfo:t,style:{padding:"9px 4px"},tableStyle:{marginTop:"23px"},showFiles:s,setShowFiles:d,close:i,filesIds:u})),r.a.createElement($e,{close:i}))}function Xr(e){var a=e.completed,t=e.showCompleted;return r.a.createElement("header",{style:{display:"flex",justifyContent:"flex-end",height:"50px",paddingBotom:"10px"}},r.a.createElement(Ue.a,{style:{marginTop:"20px"},control:r.a.createElement(Re.a,{checked:!0===a,onChange:function(){return t(!a)},value:a}),label:r.a.createElement("p",{style:{color:"#2979ff",fontSize:"0.7rem",float:"right"}}," Mostrar solicita\xe7\xf5es conclu\xeddas")}))}var Qr=[{field:"numero",title:"N\xfamero"},{field:"subject",title:"Solicita\xe7\xe3o"},{field:"empresa",title:"Empresa"},{field:"veiculo",title:"Ve\xedculo"},{field:"status",title:"Situa\xe7\xe3o"},{field:"updatedAt",title:"\xdaltima Atualiza\xe7\xe3o",type:"date"}],eo=function(e){var a=e.tableData,t=e.title,n=e.showDetails,o=e.assessDemand,i=e.completed,l=(e.showInfo,JSON.parse(JSON.stringify(a)));l.forEach((function(e){return delete e.history}));return r.a.createElement("div",{style:{margin:"10px 0"},className:"noPrint"},r.a.createElement(En.a,{title:t,columns:Qr,data:l,style:{fontFamily:"Segoe UI",fontSize:"14px"},options:{filtering:!0,exportButton:!0,exportFileName:"Solicita\xe7\xf5es",exportCsv:function(e,a){!function(e,a){var t={Sheets:{data:jn.utils.json_to_sheet(e)},SheetNames:["data"]},n=jn.write(t,{bookType:"xlsx",type:"array"}),r=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});On.saveAs(r,a+".xlsx")}(function(e){var a=["id","v","veiculoId","empresaId","tableData","createdAt","completed"];return e.forEach((function(e,t){Object.keys(e).forEach((function(t){Qr.forEach((function(n){var r=n.field,o=n.title;t===r?(e[o]=e[t],delete e[t]):a.includes(t)&&delete e[t]}))}))})),e}(a),"Solicita\xe7\xf5es")},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:10},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Nenhuma solicita\xe7\xe3o aberta no momento.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},actions:[{icon:"history_icon",iconProps:{color:"primary"},tooltip:"Ver hist\xf3rico",onClick:function(e,a){return n(a.id)}},function(e){return{icon:i?"Solicita\xe7\xe3o indeferida"===(null===e||void 0===e?void 0:e.status)?"clear":"done_icon":"assignment_turned_in_outlined",iconProps:{className:i?"":"assessDemandButton",color:"Solicita\xe7\xe3o indeferida"===(null===e||void 0===e?void 0:e.status)?"secondary":i?"action":"disabled"},tooltip:(null===e||void 0===e?void 0:e.status.match("Aguardando"))?"Analisar solicita\xe7\xe3o":(null===e||void 0===e?void 0:e.status.match("Pend\xeancias"))?"Abrir solicita\xe7\xe3o":"Solicita\xe7\xe3o indeferida"===(null===e||void 0===e?void 0:e.status)?"Indeferida":"Conclu\xedda",onClick:function(e,a){return i?null:o(a.id)}}}]}))};var ao=ce(["veiculos","empresas","logs","getFiles/vehicleDocs","getFiles/empresaDocs"],(function(e){var a=e.redux,t=a.veiculos,o=a.empresas,i=a.vehicleDocs,l=a.empresaDocs,c=Object(n.useState)([]),s=Object(Te.a)(c,2),d=s[0],u=s[1],m=Object(n.useState)(!1),p=Object(Te.a)(m,2),f=p[0],b=p[1],g=Object(n.useState)(),E=Object(Te.a)(g,2),S=E[0],x=E[1],y=Object(n.useState)(!1),O=Object(Te.a)(y,2),C=O[0],k=O[1],D=Object(n.useState)(),I=Object(Te.a)(D,2),N=I[0],A=I[1],P=Object(n.useState)({openAlertDialog:!1,customMessage:"",customTitle:""}),F=Object(Te.a)(P,2),T=F[0],z=F[1],L=Object(n.useState)(!1),M=Object(Te.a)(L,2),q=M[0],V=M[1],_=Object(n.useState)(),B=Object(Te.a)(_,2),R=B[0],U=B[1],H=T.openAlertDialog,K=T.customTitle,J=T.customMessage;Object(n.useEffect)((function(){function e(e){27===e.keyCode&&(q||N||b(),q?V(!1):N&&A())}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[N,q]),Object(n.useEffect)((function(){function a(){return(a=Object(w.a)(j.a.mark((function a(){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=Object(v.a)(e.redux.logs),r=n.map((function(e){var a,n;e.empresa=null===(a=o.find((function(a){return a.codigoEmpresa===e.empresaId})))||void 0===a?void 0:a.razaoSocial,e.veiculo=null===(n=t.find((function(a){return a.veiculoId===e.veiculoId})))||void 0===n?void 0:n.placa;e.__v;return Object(Y.a)(e,["__v"])})),r=C?r.filter((function(e){return!0===e.completed})):r.filter((function(e){return!1===e.completed})),u(r);case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[t,o,C,e.redux.logs]);var W=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=d.find((function(e){return e.id===t})),x(r),(o=null===(n=Ae.find((function(e){return null===r||void 0===r?void 0:r.subject.match(e.subject)})))||void 0===n?void 0:n.path).match("/solicitacoes")||(o="/solicitacoes"+o),e.history.push({pathname:o,state:{demand:r}});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),$=function(){var e=Object(w.a)(j.a.mark((function e(a){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!1),V(!1),t=d.find((function(e){return e.id===a})),e.next=5,x(t);case 5:b(!0);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xr,{completed:C,showCompleted:k}),r.a.createElement(eo,{tableData:d,title:C?"Solicita\xe7\xf5es conclu\xeddas":"Solicita\xe7\xf5es em andamento",showDetails:$,assessDemand:W,completed:C,style:{textAlign:"center"}}),f&&r.a.createElement(Zr,{solicitacao:S,close:function(){b(!1),V(!1)},showInfo:function(e){if(S&&(null===S||void 0===S?void 0:S.history)){var a=null===S||void 0===S?void 0:S.history[e];if(!(null===a||void 0===a?void 0:a.info))return;A(a)}},historyLog:N,setHistoryLog:A,vehicleDocs:i,empresaDocs:l,setShowFiles:function(e){e?(V(!0),U(e)):V(!1)},showFiles:q,filesIds:R}),H&&r.a.createElement(Ya,{open:H,close:function(){return z(Object(h.a)(Object(h.a)({},T),{},{openAlertDialog:!H}))},customMessage:J,customTitle:K}))})),to=[{field:"numeroAlteracao",label:"N\xfamero da altera\xe7\xe3o",maxLength:3,pattern:"^\\d{1,3}$",width:"240px"},{field:"numeroRegistro",label:"Registro na junta comercial",maxLength:40,width:"240px"},{field:"numeroSei",label:"N\xfamero do registro SEI (se houver)",maxLength:30,width:"240px"},{field:"dataJunta",label:"Data de registro na Junta Comercial",type:"date",width:"240px"}];function no(e){var a=e.data,t=e.forms,o=e.filesForm,i=e.files,l=e.demandFiles;t.forEach((function(e){e.forEach((function(e){Object.entries(a).forEach((function(a){var t=Object(Te.a)(a,2),n=t[0],r=t[1];e.field===n&&(e.value=r)}))}))}));var c=t[0].findIndex((function(e){return"vencimentoContrato"===e.field}));if(-1!==c){var s=t[0][c].value;s&&Oe()(s).isValid()&&(s=Oe()(s).format("DD/MM/YYYY"),t[0][c].value=s)}var d=["Dados da empresa","Informa\xe7\xf5es sobre a altera\xe7\xe3o do contrato social"];return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"flex"},r.a.createElement("div",{className:"divTable"},t.map((function(e,a){return r.a.createElement(n.Fragment,{key:a},r.a.createElement("table",{style:1===a?{tableLayout:"fixed"}:{}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",colSpan:e.length},d[a])),r.a.createElement("tr",null,e.map((function(e,a){var t=e.label;return r.a.createElement("th",{key:a},t)})))),r.a.createElement("tbody",null,r.a.createElement("tr",null,e.map((function(e,a){var t=e.value;return r.a.createElement("td",{className:"review",key:a},t)}))))))}))),r.a.createElement("h3",{style:{margin:"30px 0 0 25px"}}," ",r.a.createElement(ja.a,{style:{verticalAlign:"middle",padding:"0 0 0 8px"}})," Documentos "),(i||l)&&r.a.createElement(Sa,{demandFiles:l,form:o,files:i,collection:"empresaDocs"})))}var ro=Object(Z.a)((function(e){return{list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#999",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"}}})),oo=function(e){var a=e.handleInput,t=e.handleBlur,o=e.data,i=e.addSocio,l=e.enableEdit,c=e.handleEdit,s=e.removeSocio,d=o.selectedEmpresa,u=o.subtitles,m=o.activeStep,p=o.filteredSocios,f=ro(),v=f.iconButton,h=f.list;return r.a.createElement(r.a.Fragment,null,d&&r.a.createElement("section",{className:"flex paper"},r.a.createElement(Be,{subtitle:u[m]}),r.a.createElement("div",{className:"flex center"},r.a.createElement("div",{style:{padding:"10px 0",width:"100%"}},r.a.createElement(_e,{form:Bt,data:o,handleBlur:t,handleInput:a})),r.a.createElement("div",{style:{margin:"5px 0 7px 84.58%",width:"100%"}},r.a.createElement(Ye.a,{color:"primary",variant:"outlined",size:"small",onClick:i},r.a.createElement(Ke.a,null)," Adicionar s\xf3cio")))),d&&0===p.length&&r.a.createElement("section",null,r.a.createElement("p",null,"Nenhum s\xf3cio cadastrado para ",d.razaoSocial)),(null===p||void 0===p?void 0:p.length)>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"flex center paper"},r.a.createElement("p",null," S\xf3cios cadastrados"),p.map((function(e,a){return r.a.createElement("div",{key:a},Bt.map((function(a,t){return r.a.createElement(n.Fragment,{key:t+1e3},r.a.createElement(qe.a,{value:e[a.field]||"",name:a.field,label:a.label,className:h,disabled:!e.edit||"cpfSocio"===a.field,onChange:c,error:e.edit?we(e[a.field],a):null,helperText:e.edit?Ce(e[a.field],a):null,type:null===a||void 0===a?void 0:a.type,InputLabelProps:{shrink:!0,style:{fontWeight:600,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",color:"#888"}},inputProps:{style:{fontSize:"13px",color:!0===e.edit?"#000":"new"===e.status?"green":"modified"===e.status?"#FF2500":"deleted"===e.status?"red":"#888",textDecoration:"deleted"!==e.status||e.edit?"":"line-through"}}}))})),r.a.createElement(Ye.a,{component:"span",className:v,title:"editar",onClick:function(){return l(a)}},r.a.createElement(vn.a,null)),r.a.createElement(Ye.a,{className:v,color:"deleted"===e.status?"primary":"secondary",title:"deleted"===e.status?"Desfazer exclus\xe3o":"Remover",onClick:function(){return s(a)}},"deleted"===e.status?r.a.createElement("i",{className:"material-icons"},"undo"):r.a.createElement(gt.a,null)))})))))},io=function(e){var a=e.empresas,t=e.data,n=e.setActiveStep,o=e.enableEdit,i=e.handleEdit,l=e.addSocio,c=e.removeSocio,s=e.handleInput,d=e.handleSubmit,u=e.handleFiles,m=e.removeFile,p=e.setShowPendencias,f=t.selectedEmpresa,v=t.demand,h=t.demandFiles,b=t.activeStep,g=t.stepTitles,E=t.subtitles,S=t.dropDisplay,x=t.altContratoDoc,y=t.fileToRemove,O=t.info,j=t.showPendencias,w="Altera\xe7\xe3o de contrato social - ".concat(null===f||void 0===f?void 0:f.razaoSocial),C=[_t,to];return r.a.createElement("main",null,r.a.createElement("header",null,r.a.createElement(Na,{links:["Empresas","/empresas"],text:"Altera\xe7\xe3o de dados e contrato social"}),r.a.createElement("section",null,r.a.createElement(La,{activeStep:b,steps:g,setActiveStep:n})),r.a.createElement("div",{className:"flex center"},r.a.createElement(Le,{empresas:a,data:t,headerTitle:w,handleInput:s}))),(null===f||void 0===f?void 0:f.cnpj)&&r.a.createElement(r.a.Fragment,null,2!==b?r.a.createElement("section",{className:"flex paper"},r.a.createElement(Be,{subtitle:E[b]}),b<2?r.a.createElement(r.a.Fragment,null,r.a.createElement(_e,{form:C[b],data:t,handleInput:s,style:{width:"100%"}}),1===b&&r.a.createElement("div",{className:"flex center",style:{width:"100%"}},r.a.createElement(oa,{name:"altContratoDoc",style:{width:"440px"},dropDisplay:S,formData:x,handleFiles:u,demandFiles:h,removeFile:m,fileToRemove:y}))):r.a.createElement(no,{data:t,forms:C,files:x,demandFiles:h,filesForm:it})):r.a.createElement("section",null,r.a.createElement(oo,{data:t,handleInput:s,addSocio:l,removeSocio:c,handleFiles:u,enableEdit:o,handleEdit:i})),r.a.createElement("footer",null,r.a.createElement(Pa,{demand:v,declineButtonLabel:"Indeferir",setShowPendencias:p,showPendencias:j,info:O,activeStep:b,lastStep:g.length-1,setActiveStep:n,handleInput:s,handleSubmit:d}))))},lo=ce(["empresas","socios","getFiles/empresaDocs"],(function(e){var a=e.redux,t=a.empresas,o=a.socios,i=Object(n.useState)({razaoSocial:"",activeStep:0,stepTitles:["Alterar dados da empresa","Informa\xe7\xf5es sobre altera\xe7\xe3o do contrato social","Informa\xe7\xf5es sobre s\xf3cios","Revis\xe3o"],subtitles:["Utilize os campos abaixo caso deseje editar os dados da empresa","Informe as altera\xe7\xf5es no contrato social e anexe uma c\xf3pia do documento","Adicione ou altere s\xf3cios e suas respectivas participa\xe7\xf5es.","Revise os dados informados."],dropDisplay:"Clique ou arraste para anexar a c\xf3pia da altera\xe7\xe3o do contrato social ",demand:void 0,confirmToast:!1,filteredSocios:[],showPendencias:!1,openAlertDialog:!1}),l=Object(Te.a)(i,2),c=l[0],s=l[1];Object(n.useEffect)((function(){var a,n,r=null===e||void 0===e||null===(a=e.location)||void 0===a||null===(n=a.state)||void 0===n?void 0:n.demand;if(r&&r.history[0]){var i,l=e.redux.empresaDocs,d=null===r||void 0===r?void 0:r.history[0],u=d.altContrato,m=d.socioUpdates,p=d.files,f=t.find((function(e){return e.empresaId===r.codigoEmpresa})),v={},b=JSON.parse(JSON.stringify(o.filter((function(e){return e.codigoEmpresa===f.codigoEmpresa}))));if(u&&to.forEach((function(e){var a=e.field;return v[a]=u[a]})),m[0]){var g=[];b.forEach((function(e){m.forEach((function(a){e.socioId===(null===a||void 0===a?void 0:a.socioId)&&Object.keys(a).forEach((function(t){e[t]=a[t]})),"new"!==a.status||g.includes(a)||g.push(a)}))})),b=b.concat(g)}p&&(i=l.filter((function(e){return p.includes(e.id)}))),s(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},c),u),f),{},{selectedEmpresa:f,demand:r,demandFiles:i,filteredSocios:b,activeStep:3}))}}),[]),Object(n.useEffect)((function(){if(c.selectedEmpresa){var e=c.selectedEmpresa.codigoEmpresa,a=JSON.parse(JSON.stringify(o.filter((function(a){return a.codigoEmpresa===e}))))||[];s(Object(h.a)(Object(h.a)({},c),{},{originalSocios:a}))}}),[c.selectedEmpresa]);var d=function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,n,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=c.filteredSocios,t={},n=0,r=0,Bt.forEach((function(e){""!==c[e.field]&&void 0!==c[e.field]||(n+=1)})),100!==n){e.next=7;break}return s(Object(h.a)(Object(h.a)({},c),{},{alertType:"fieldsMissing",openAlertDialog:!0})),e.abrupt("return",null);case 7:if(Bt.forEach((function(e){Object.assign(t,Object(f.a)({},e.field,c[e.field]))})),t.status="new",a.push(t),a.sort((function(e,a){return e.nomeSocio.localeCompare(a.nomeSocio)})),a.forEach((function(e){r+=Number(e.share)})),!(r>100)){e.next=17;break}return a.pop(),e.next=16,s(Object(h.a)(Object(h.a)({},c),{},{alertType:"overShared",openAlertDialog:!0}));case 16:return e.abrupt("return");case 17:return o={},Bt.forEach((function(e){return o[e.field]=""})),e.next=21,s(Object(h.a)(Object(h.a)(Object(h.a)({},c),o),{},{filteredSocios:a,totalShare:r}));case 21:setTimeout((function(){console.log(c),document.getElementsByName("nomeSocio")[0].focus()}),200);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,s,d,u,f,g,x,y,O,C;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=c.demand,r=c.altContratoDoc,o=b(to),i=b(_t),l=p(i),s=m(),d=v({demand:n,altContrato:o,socioUpdates:s,approved:t}),u=[],f="Solicita\xe7\xe3o de altera\xe7\xe3o contratual enviada.",n||o||l||r||s||s[0]){a.next=5;break}return alert("Nenhuma modifica\xe7\xe3o registrada!"),a.abrupt("return");case 5:if(!l){a.next=12;break}if(F.a.put("/api/editTableRow",l),f="Dados da empresa alterados com sucesso.",s[0]||o||r){a.next=12;break}return S("Dados da empresa atualizados!"),setTimeout((function(){E()}),750),a.abrupt("return");case 12:if(!n||!t){a.next=28;break}if(o&&F.a.post("/api/altContrato",o),!s){a.next=28;break}if(g=s.newSocios,x=s.oldSocios,y=s.deletedSocios,O={table:"socios",tablePK:"socio_id"},!g[0]){a.next=19;break}return a.next=19,F.a.post("/api/cadSocios",{socios:g}).then(function(){var e=Object(w.a)(j.a.mark((function e(a){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=null===a||void 0===a?void 0:a.data.map((function(e){return e.socio_id})))[0]&&(u=u.concat(t));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 19:if(!x[0]){a.next=25;break}return a.next=22,F.a.put("/api/editSocios",Object(h.a)({requestArray:x},O));case 22:C=x.map((function(e){return e.socio_id})),u=u.concat(C),console.log(u,x,C);case 25:y[0]&&y.forEach((function(e){F.a.delete("/api/delete?table=socios&tablePK=socio_id&id=".concat(e.socio_id))})),f="Altera\xe7\xe3o de contrato social aprovada.",console.log(u);case 28:!1===t&&(f="Solicita\xe7\xe3o indeferida."),u[0]&&(d.metadata.socios=u),console.log(u),Pe(d).then((function(e){console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),n?setTimeout((function(){e.history.push("/solicitacoes")}),1500):setTimeout((function(){E()}),900),S(f);case 34:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),m=function(){var e=c.originalSocios,a=c.filteredSocios,t=c.selectedEmpresa,n=c.demand,r=t.codigoEmpresa,o=[],i={};if(a.forEach((function(a){delete a.edit,a.socioId?e.forEach(function(){var e=Object(w.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.socioId===t.socioId&&(Object.keys(a).forEach((function(e){!a[e]||""===a[e]||a[e]===t[e]&&"socioId"!==e||Object.assign(i,Object(f.a)({},e,a[e]))})),Object.keys(i).length>1&&("deleted"!==(null===(n=i)||void 0===n?void 0:n.status)&&(a.status="modified",i.status="modified"),i.socioId&&i.status&&("deleted"===(null===(r=i)||void 0===r?void 0:r.status)||Object.keys(i).length>2)?o.push(i):(a.status=void 0,i.status=void 0)),i={});case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()):(a.codigoEmpresa=r,o.push(a))})),!n)return o;if(o[0]){var l=(o=A.a.decamelizeKeys(o)).filter((function(e){return"new"===e.status})),s=o.filter((function(e){return"modified"===e.status})),d=o.filter((function(e){return"deleted"===e.status}));return l.forEach((function(e){return delete e.status})),s.forEach((function(e){return delete e.status})),d.forEach((function(e){return delete e.status})),{newSocios:l,oldSocios:s,deletedSocios:d}}return null},p=function(e){var a=c.selectedEmpresa,t=a.codigoEmpresa;for(var n in a)e[n]&&e[n]===a[n]&&delete e[n];if(Object.keys(e).length>0)return{id:t,table:"empresas",tablePK:"codigo_empresa",updates:A.a.decamelizeKeys(e)}},v=function(e){var a,t=e.demand,n=e.altContrato,r=e.approved,o=e.socioUpdates,i=c.selectedEmpresa,l=c.info,s=c.altContratoDoc,d=c.numeroAlteracao,u=i.codigoEmpresa;(t||(a={history:{altContrato:n,info:l,socioUpdates:o},empresaId:u,historyLength:0,approved:r},!1===r&&(a.declined=!0),s&&(a.history.files=s,a.metadata={fieldName:"altContratoDoc",empresaId:u,numeroAlteracao:d})),t&&!1===r)&&(a={id:t.id,empresaId:t.empresaId,history:{info:l},declined:!0});t&&!0===r&&(a={id:t.id,demandFiles:c.demandFiles,history:{},metadata:{numeroAlteracao:c.numeroAlteracao,numeroRegistro:c.numeroRegistro},approved:r});return a},b=function(e){var a=c.selectedEmpresa,t={codigoEmpresa:null===a||void 0===a?void 0:a.codigoEmpresa};return e.forEach((function(e){var a=e.field;for(var n in c)n===a&&c[n]&&Object.assign(t,Object(f.a)({},n,c[n]))})),Object.keys(t).length>1?t:null},g=function(){var e=Object(w.a)(j.a.mark((function e(a){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c.altContratoDoc,n=xe(a,t),s(Object(h.a)(Object(h.a)({},c),n));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),E=function(){var e={};[to,Bt].forEach((function(a){a.forEach((function(a){var t=a.field;Object.assign(e,Object(f.a)({},t,""))}))})),s(Object(h.a)(Object(h.a)(Object(h.a)({},c),e),{},{activeStep:0,razaoSocial:"",selectedEmpresa:void 0,filteredSocios:[],altContratoDoc:void 0,fileToRemove:void 0}))},S=function(e){return s(Object(h.a)(Object(h.a)({},c),{},{confirmToast:!c.confirmToast,toastMsg:e}))},x=c.filteredSocios,y=c.confirmToast,O=c.toastMsg,C=c.openAlertDialog,k=c.alertType,D=c.customMessage,I=c.customTitle;return r.a.createElement(r.a.Fragment,null,r.a.createElement(io,{empresas:t,data:c,setActiveStep:function(e){var a=c.activeStep;"next"===e&&a++,"back"===e&&a--,"reset"===e&&(a=0),s(Object(h.a)(Object(h.a)({},c),{},{activeStep:a})),3===a&&m()},handleInput:function(e){var a,n=e.target,r=n.name,i=n.value,l={};if("razaoSocial"===r){var d,u,m=null===(d=l=t.find((function(e){return e.razaoSocial===i}))||{})||void 0===d?void 0:d.vencimentoContrato;m&&m.length>0&&(l.vencimentoContrato=m.substr(0,10)),(null===(u=l)||void 0===u?void 0:u.codigoEmpresa)&&(a=JSON.parse(JSON.stringify(o.filter((function(e){return e.codigoEmpresa===l.codigoEmpresa}))))),s(Object(h.a)(Object(h.a)(Object(h.a)({},c),l),{},Object(f.a)({selectedEmpresa:l,filteredSocios:a},r,i)))}else{var p=dr(r,i);s(Object(h.a)(Object(h.a)({},c),{},Object(f.a)({},r,p)))}},handleSubmit:u,handleFiles:function(e){if(!be(e)&&e&&e[0]){var a=new FormData;a.append("altContratoDoc",e[0]),s(Object(h.a)(Object(h.a)({},c),{},{altContratoDoc:a,fileToRemove:null}))}},removeFile:g,socios:x,addSocio:d,removeSocio:function(e){var a=c.filteredSocios,t=a[e];"new"===(null===t||void 0===t?void 0:t.status)?(a.splice(e,1),s(Object(h.a)(Object(h.a)({},c),{},{filteredSocios:a}))):(t.status&&"deleted"!==t.status?(t.originalStatus=t.status,t.status="deleted"):"deleted"===(null===t||void 0===t?void 0:t.status)?t.status=null===t||void 0===t?void 0:t.originalStatus:t.status="deleted",s(Object(h.a)(Object(h.a)({},c),{},{filteredSocios:a})))},enableEdit:function(e){var a=c.filteredSocios;!0===a[e].edit?(a[e].edit=!1,m()):(a.forEach((function(e){return e.edit=!1})),a[e].edit=!0),s(Object(h.a)(Object(h.a)({},c),{},{filteredSocios:a}))},handleEdit:function(e){var a=e.target.name,t=c.filteredSocios,n=e.target.value;"share"===a&&(n=n.replace(",","."));var r=t.find((function(e){return!0===e.edit})),o=t.indexOf(r);r[a]=n;var i=t;i[o]=r,s(Object(h.a)(Object(h.a)({},c),{},{filteredSocios:i}))},setShowPendencias:function(){return s(Object(h.a)(Object(h.a)({},c),{},{showPendencias:!c.showPendencias}))}}),r.a.createElement(ee,{open:y,close:S,msg:O}),C&&r.a.createElement(Ya,{open:C,alertType:k,close:function(){return s(Object(h.a)(Object(h.a)({},c),{},{openAlertDialog:!c.openAlertDialog}))},customMessage:D,customTitle:I}))})),co=function(e){var a=e.data,t=e.handleInput,n=e.plusOne,o=e.removeOne,i=Object(v.a)(null===a||void 0===a?void 0:a.newState)||[];return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("h4",{className:"singleParams__title"},"Clique nos campos abaixo para editar e/ou adicione novos.")),i.map((function(e,a){return r.a.createElement("section",{className:"singleParams__container",key:a},r.a.createElement("div",{className:"singleParams__rowContainer"},r.a.createElement(qe.a,{name:a.toString(),value:i[a],onChange:t,variant:"filled",InputProps:{style:{margin:"8px 0"}},inputProps:{style:{width:"300px",textAlign:"center",fontSize:"10pt",height:"30px",padding:"5px 0"}}}),r.a.createElement("div",{className:"singleParams__deleteIcon",title:"Remover",onClick:function(){return o(a)}},r.a.createElement(Er.a,null))))})),r.a.createElement("div",{className:"addIcon"},r.a.createElement("div",{className:"addIcon__container",onClick:function(){return n()}},r.a.createElement("span",{className:"addIcon__text"},"Adicionar"),r.a.createElement(vr.a,{className:"addIcon__icon"}))))},so=(t(554),function(e){var a=e.data,t=e.selectOption,n=e.handleInput,o=e.handleSubmit,i=e.plusOne,l=e.removeOne,c=a.tab,s=a.options,d=a.selectedOption,u=a.form,m=a.modified;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Na,{links:["Par\xe2metros","/parametros"],text:"Alterar par\xe2metros do sistema"}),r.a.createElement("header",{className:"selectHeader"},r.a.createElement("h4",{className:"parametrosTitle"},"Alterar par\xe2metros do sistema - Selecione uma das op\xe7\xf5es abaixo."),r.a.createElement(qe.a,{className:"config__selector",onChange:t,name:"selectedOption",value:d||"",select:!0,placeholder:"Clique para selecionar...",SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},s.map((function(e,a){return r.a.createElement(Me.a,{key:a,value:e},e)})))),u&&c<3&&r.a.createElement("main",{className:"configForm"},r.a.createElement(_e,{form:u,data:a,handleInput:n,style:{width:"100%",flexDirection:"column"}})),3===c&&r.a.createElement(co,{form:u,data:a,plusOne:i,removeOne:l,handleInput:n,style:{width:"100%",flexDirection:"column"}}),d&&r.a.createElement("div",{style:{minHeight:"60px",position:"flex"}},r.a.createElement(rn,{action:"save",onClick:o,disabled:!m})))}),uo={variant:"outlined",pattern:/^[0-9]*$/,maxLength:2},mo=uo.variant,po=[Object(h.a)({field:"idadeMaxCad",label:"Idade m\xe1xima para cadastro (anos)"},uo),Object(h.a)(Object(h.a)({field:"difIdade",label:"Diferen\xe7a toler\xe1vel de idade da carroceria e chassi (anos)"},uo),{},{maxLength:1}),Object(h.a)({field:"idadeBaixaAut",label:"Idade para baixa autom\xe1tica (anos)"},uo),{field:"diaBaixaAut",label:"Dia para baixa autom\xe1tica (dd/mm)",maxLength:5,pattern:/^(0[1-9]|[12][0-9]|30(?!\/02)|31(?!\/(0[2469]|11)))\/(0[1-9]|1[0-2])$/,variant:mo},Object(h.a)(Object(h.a)({field:"prazoAvisoBaixa",label:"Prazo para aviso de baixa (dias)"},uo),{},{maxLength:3})],fo=[{field:"convencional",label:"Convencional"},{field:"executivo",label:"Executivo"},{field:"semiLeito",label:"Semi-Leito"},{field:"leito",label:"Leito"},{field:"urbano",label:"Urbano"}],vo=[{field:"secretaria",label:"Nome da Secretaria"},{field:"subsecretaria",label:"Nome da Subsecretaria"},{field:"superintendencia",label:"Nome da Superintendencia"},{field:"diretoria",label:"Nome da diretoria"},{field:"sistema",label:"Nome do sistema"},{field:"siglaSecretaria",label:"Sigla da Secretaria"},{field:"siglaSistema",label:"Sigla do Sistema"}],ho=[{field:"motivoBaixa",label:"Inserir novo motivo"}],bo=ce(["parametros"],(function(e){var a=Object(n.useState)({options:["Idade e prazos para baixa","Dist\xe2ncia m\xednima entre poltronas","Nomenclaturas","Motivos para baixa do ve\xedculo"],params:["idadeBaixa","distanciaPoltronas","nomes","motivosBaixa"],forms:[po,fo,vo,ho]}),t=Object(Te.a)(a,2),o=t[0],i=t[1],l=Object(n.useCallback)((function(a){var t,n,r,l=a.target,c=l.name,s=l.value,d=e.redux.parametros,u=o.options,m=o.forms,p=o.params,v=u.indexOf(s),b=m[v],g=d[0][p[v]];g&&(null===(t=d[0])||void 0===t?void 0:t.id)&&(g.id=d[0].id),i(3===v?Object(h.a)(Object(h.a)({},o),{},(n={initState:g,newState:g},Object(f.a)(n,c,s),Object(f.a)(n,"tab",v),Object(f.a)(n,"form",b),Object(f.a)(n,"modified",!1),n)):Object(h.a)(Object(h.a)(Object(h.a)({},o),g),{},(r={initState:g},Object(f.a)(r,c,s),Object(f.a)(r,"tab",v),Object(f.a)(r,"form",b),Object(f.a)(r,"newState",void 0),Object(f.a)(r,"modified",!1),r)))}),[e.redux,o]),c=function(){var e=Object(w.a)(j.a.mark((function e(a){var t,n,r,l,c,d,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.tab,n=a.target,r=n.name,l=n.value,3===t?((d=Object(v.a)(o.newState))[r]=l,c=s(null,null,d),i(Object(h.a)(Object(h.a)({},o),{},{newState:d,modified:c}))):(c=s(r,l),i(Object(h.a)(Object(h.a)({},o),{},(u={},Object(f.a)(u,r,l),Object(f.a)(u,"modified",c),u))));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),s=function(e,a,t){var n,r,i,l=o.initState,c=!1;return t?i=l.toString()!==t.toString():(Object.keys(l).forEach((function(a){a!==e&&o[a].toString()!==l[a].toString()&&(n=!0)})),r=l[e]&&l[e].toString()!==a),(r||n||i)&&(c=!0),c};return r.a.createElement(r.a.Fragment,null,r.a.createElement(so,{data:o,selectOption:l,plusOne:function(){var e=Object(v.a)(o.initState);o.newState&&(e=Object(v.a)(o.newState)),e[e.length]="",i(Object(h.a)(Object(h.a)({},o),{},{newState:e}))},removeOne:function(e){var a=o.initState,t=o.newState,n=Object(v.a)(a);t&&(n=Object(v.a)(t)),n.splice(e,1);var r=s(null,null,n);i(Object(h.a)(Object(h.a)({},o),{},{newState:n,modified:r}))},handleInput:c,handleSubmit:function(){var e,a=o.tab,t=o.forms,n=o.params,r=o.initState,l=o.newState,c=r.id,s=t[a].map((function(e){return e.field})),d=n[a],u={};3===a?(l.forEach((function(e,a){""===e&&l.splice(a,1)})),i(Object(h.a)(Object(h.a)({},o),{},{newState:l})),u=l):s.forEach((function(e){return Object.assign(u,Object(f.a)({},e,o[e]))})),F.a.put("/api/parametros",(e={},Object(f.a)(e,d,u),Object(f.a)(e,"id",c),e)).catch((function(e){return console.log(e)})),i(Object(h.a)(Object(h.a)({},o),{},{modified:!1}))}}))})),go=(t(555),function(e){var a=e.data,t=e.handleInput,o=e.handleSubmit,i=a.title,l=a.form,c=a.buttonLabel;Object(n.useEffect)((function(){setTimeout((function(){var e=document.getElementById("email");e&&e.focus()}),600)}),[]);var s=function(e){var t,n=a[null===e||void 0===e?void 0:e.field];if(n)return(!e.errorHandler||!e.errorHandler(n))&&(!(!n||!e.errorHandler||e.errorHandler(n))||((null===(t=n)||void 0===t?void 0:t.length)<(null===e||void 0===e?void 0:e.minLength)||("string"!==typeof n&&(n=n.toString()),!!e.pattern&&null===n.match(e.pattern))))},d=function(e){var t,n,r=a[e.field];return r?e.errorHandler&&e.errorHandler(r)?"\u2713":r&&e.errorHandler&&!e.errorHandler(r)||(null===(t=r)||void 0===t?void 0:t.length)<(null===e||void 0===e?void 0:e.minLength)?"\u2718":(null===(n=r)||void 0===n?void 0:n.length)>=(null===e||void 0===e?void 0:e.minLength)?"\u2713":("string"!==typeof r&&(r=r.toString()),r>e.max||r<e.min?"Valor inv\xe1lido":null===r.match(e.pattern)?"\u2718":e.pattern&&null!==r.match(e.pattern)?"\u2713":" "):" "};return r.a.createElement("div",{className:"flexColumn login"},r.a.createElement("h2",{className:"login__title"},"CadTI - Cadastro do Transporte Intermunicipal - Seinfra MG"),r.a.createElement("div",{className:"login__form paper"},r.a.createElement("header",null,r.a.createElement("h4",{className:"header2 login__subtitle"},i)),r.a.createElement("section",{className:"flexColumn center"},l.map((function(e,n){var o=e.name,i=e.label,l=e.options,c=e.type,u=void 0===c?"text":c,m=Object(Y.a)(e,["name","label","options","type"]);return r.a.createElement("div",{className:"input",key:n},r.a.createElement(qe.a,{id:o,name:o,label:i,value:a[o]||"",onChange:t,type:u,error:s(m),helperText:d(m),InputProps:{style:{width:"260px"}},InputLabelProps:{style:{fontSize:"10pt",color:"#223"}},select:!!l},l&&l.map((function(e,a){var t=e.optionLabel,n=e.optionValue;return r.a.createElement(Me.a,{key:a,value:n},t)}))))})),r.a.createElement(rn,{label:c,onClick:o})),r.a.createElement("footer",{className:"login__footer"},r.a.createElement("p",null,"Ainda n\xe3o \xe9 cadastrado?"),r.a.createElement("p",null,"Esqueceu sua senha?"))))}),Eo=[{name:"email",label:"E-mail"},{name:"password",label:"Senha",type:"password"}],So=[{name:"name",label:"Nome Completo"},Object(h.a)(Object(h.a)({},Pt),{},{name:"cpf",field:"cpf"})].concat(Eo,[{name:"confirmPassword",label:"Confirme sua senha"},{name:"role",label:"Perfil de usu\xe1rio",options:[{optionLabel:"Administrador",optionValue:"admin"},{optionLabel:"Delegat\xe1rio",optionValue:"empresa"},{optionLabel:"T\xe9cnico Seinfra",optionValue:"seinfra"}]}]),xo=[{title:"Fazer login",form:Eo,buttonLabel:"entrar",endPoint:"/auth/login"},{title:"Cadastro de Usu\xe1rio",form:So,buttonLabel:"Cadastrar",endPoint:"/auth/signUp",toastMsg:"Usu\xe1rio cadastrado."},{title:"Recupera\xe7\xe3o de senha",form:So,buttonLabel:"Recuperar senha",endPoint:"/auth/forgotPassword",toastMsg:"Senha enviada para o e-mail registrado."}];var yo=Object(c.c)((function(e){return{redux:Object(h.a)({},e.user)}}),(function(e){return Object(l.b)({logUser:oe},e)}))((function(e){var a=Object(n.useState)(Object(h.a)({tab:0},xo[0])),t=Object(Te.a)(a,2),o=t[0],i=t[1],l=o.endPoint,c=o.toastMsg,s=o.tab,d=function(){var a=Object(w.a)(j.a.mark((function a(){var t,n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,F.a.post(l,o);case 3:return a.next=5,F.a.get("/getUser");case 5:t=a.sent,n=null===t||void 0===t?void 0:t.data,ae("loggedIn",!0),e.logUser(n),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),m(null===a.t0||void 0===a.t0||null===(r=a.t0.response)||void 0===r?void 0:r.data);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(){return a.apply(this,arguments)}}(),u=function(){var e=Object(w.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.post(l,o).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 2:i(Object(h.a)({tab:0},xo[0]));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(e){return i(Object(h.a)(Object(h.a)({},o),{},{confirmToast:!o.confirmToast,toastMsg:e}))},p=o.confirmToast;return r.a.createElement(r.a.Fragment,null,r.a.createElement(go,{data:o,handleInput:function(e){var a=e.target,t=a.name,n=dr(t,a.value);i(Object(h.a)(Object(h.a)({},o),{},Object(f.a)({},t,n)))},handleSubmit:function(){0===s&&d(),1===s&&u(),c&&m(c)}}),r.a.createElement(ee,{open:p,close:m,msg:c,status:0===s?"error":"success"}))})),Oo=function(){return r.a.createElement(y.c,null,r.a.createElement(y.a,{exact:!0,path:"/",component:ue}),r.a.createElement(y.a,{path:"/veiculos",exact:!0,component:pe}),r.a.createElement(y.a,{path:"/veiculos/cadastro",exact:!0,component:Ja}),r.a.createElement(y.a,{path:"/veiculos/altDados",exact:!0,component:Qa}),r.a.createElement(y.a,{path:"/veiculos/seguros",exact:!0,component:pt}),r.a.createElement(y.a,{path:"/veiculos/laudos",exact:!0,component:Gt}),r.a.createElement(y.a,{path:"/veiculos/baixaVeiculo",exact:!0,component:mn}),r.a.createElement(y.a,{path:"/veiculos/config",exact:!0,component:bn}),r.a.createElement(y.a,{path:"/consultas",component:nr}),r.a.createElement(y.a,{path:"/empresas",exact:!0,component:pr}),r.a.createElement(y.a,{path:"/altContrato",exact:!0,component:lo}),r.a.createElement(y.a,{path:"/empresas/cadastro",component:ur}),r.a.createElement(y.a,{path:"/empresas/socios",component:Lr}),r.a.createElement(y.a,{path:"/empresas/procuradores",component:zr}),r.a.createElement(y.a,{path:"/relatorios",component:Yr}),r.a.createElement(y.a,{path:"/crv",component:Zn}),r.a.createElement(y.a,{path:"/solicitacoes",exact:!0,component:ao}),r.a.createElement(y.a,{path:"/solicitacoes/cadastro",exact:!0,component:Ja}),r.a.createElement(y.a,{path:"/solicitacoes/altDados",exact:!0,component:Qa}),r.a.createElement(y.a,{path:"/solicitacoes/seguros",exact:!0,component:pt}),r.a.createElement(y.a,{path:"/solicitacoes/baixaVeiculo",exact:!0,component:mn}),r.a.createElement(y.a,{path:"/solicitacoes/laudos",exact:!0,component:Gt}),r.a.createElement(y.a,{path:"/solicitacoes/altContrato",exact:!0,component:lo}),r.a.createElement(y.a,{path:"/solicitacoes/socios",exact:!0,component:Lr}),r.a.createElement(y.a,{path:"/solicitacoes/procuradores",exact:!0,component:zr}),r.a.createElement(y.a,{path:"/parametros",exact:!0,component:bo}),r.a.createElement(y.a,{path:"/userAuth",exact:!0,component:yo}))},jo=t(595);var wo=Object(c.c)((function(e){return{redux:Object(h.a)({},e.user)}}))((function(){return ne("loggedIn").length>0?r.a.createElement("div",{className:"app"},r.a.createElement(jo.a,{maxWidth:"lg",style:{minHeight:"100vh"}},r.a.createElement(x.a,null,r.a.createElement(zn,null),r.a.createElement(Oo,null)),r.a.createElement(Ln,null))):r.a.createElement(yo,null)})),Co=Object(l.a)(d.a,m.a,p.a)(l.e)(S,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var ko=function(){return r.a.createElement(c.a,{store:Co},r.a.createElement(wo,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ko,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[433,1,2]]]);
//# sourceMappingURL=main.de4a20e0.chunk.js.map