(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{279:function(e,a,t){e.exports=t(394)},306:function(e,a,t){},394:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(24),i=t.n(o),l=t(58),c=t(400),s=t(26),d=t(29),u=t(10),m=t(437),p=t(196),f=t(197),g=t(88),h=t(180),b=t(438),v=t(246),x=t.n(v),E=Object(c.a)(function(e){return{toolbar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbarTitle:{flex:1},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto",backgroundColor:"#0398c1",color:"white",borderBottom:"solid 3px #fff"},toolbarLink:{padding:e.spacing(1),flexShrink:0},mainFeaturedPost:{position:"relative",backgroundColor:e.palette.grey[800],color:e.palette.common.white,marginBottom:e.spacing(4),backgroundImage:"/images/bus_wallpaper.jpg",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},overlay:{position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"rgba(0,0,0,.3)"},mainFeaturedPostContent:Object(u.a)({position:"relative",padding:e.spacing(3)},e.breakpoints.up("md"),{padding:e.spacing(6),paddingRight:0}),mainGrid:{marginTop:e.spacing(3)},card:{display:"flex"},cardDetails:{flex:1},cardMedia:{width:160},markdown:Object(d.a)({},e.typography.body2,{padding:e.spacing(3,0)}),sidebarAboutBox:{padding:e.spacing(2),backgroundColor:e.palette.grey[200]},sidebarSection:{marginTop:e.spacing(3)},footer:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(6,0)}}}),S=[{title:"P\xe1gina Inicial",link:"/"},{title:"Certid\xf5es",link:"/certidoes"},{title:"Consultas",link:"/consultas"},{title:"Ve\xedculos",link:"/veiculos"},{title:"Empresas",link:"/empresasHome"},{title:"Fale Conosco",link:"/faleConosco"}],y=function(){var e=Object(n.useState)(document.location.pathname),a=Object(s.a)(e,2),t=a[0],o=a[1],i=E();return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null),r.a.createElement(p.a,{className:i.toolbar},r.a.createElement(f.a,{size:"small"},"Criar usu\xe1rio"),r.a.createElement(g.a,{component:"h2",variant:"h6",color:"inherit",align:"center",noWrap:!0,className:i.toolbarTitle},"Seinfra - Subsecretaria de Transportes e Mobilidade - MG"),r.a.createElement(h.a,null,r.a.createElement(x.a,null)),r.a.createElement(f.a,{variant:"outlined",size:"small"},"Fazer login")),r.a.createElement(p.a,{component:"nav",variant:"dense",className:i.toolbarSecondary},S.map(function(e,a){return r.a.createElement(b.a,{component:l.b,to:e.link,key:a,color:"inherit",noWrap:!0,variant:"body2",href:"",className:i.toolbarLink,onClick:function(){return o(e.link)}},t===e.link?r.a.createElement("strong",null," ",e.title," "):e.title)})))},k=function(){return null},w=t(115),C=t(461),j=t(439),O=function(e){var a=e.items,t=e.tab,n=e.changeTab;return r.a.createElement(w.a,{style:{backgroundColor:"#e1f5fe"}},r.a.createElement(C.a,{value:t,indicatorColor:"primary",textColor:"primary",centered:!0,onChange:n},a.map(function(e,a){return r.a.createElement(j.a,{key:a,label:e})})))},I=t(440),P=t(441),z=t(443),N=t(444),F=t(442),A=t(445),D=t(236),B=Object(c.a)(function(e){return{toolbar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbarTitle:{flex:1},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto"},toolbarLink:{padding:e.spacing(1),flexShrink:0},mainFeaturedPost:{position:"relative",backgroundColor:e.palette.grey[800],color:e.palette.common.white,marginBottom:e.spacing(4),backgroundImage:"/images/bus_wallpaper.jpg",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},overlay:{position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"rgba(0,0,0,.3)"},mainFeaturedPostContent:Object(u.a)({position:"relative",padding:e.spacing(3)},e.breakpoints.up("md"),{padding:e.spacing(6),paddingRight:0}),mainGrid:{marginTop:e.spacing(3)},card:{display:"flex",fontSize:"0.5rem"},cardDetails:{flex:1,fontSize:"0.5rem"},cardMedia:{width:"120px",height:"180px"},markdown:Object(d.a)({},e.typography.body2,{padding:e.spacing(3,0)}),sidebarAboutBox:{padding:e.spacing(2),backgroundColor:e.palette.grey[200]},sidebarSection:{marginTop:e.spacing(3)},footer:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(6,0)}}}),T=[{title:"Ve\xedculos",date:"07/Nov",description:"Cadastre e altere os dados do ve\xedculo ou solicite sua baixa",link:"/veiculos",imageUrl:"/images/vehicles.jpg"},{title:"Empresas",date:"07/Nov",description:"Cadastre e gerencie dados de empresas, s\xf3cios e procuradores",link:"/empresasHome",imageUrl:"/images/empresas12.jpg"},{title:"Consultas",date:"03/Dez",description:"Consulte e gerencie dados de ve\xedculos, seguros e empresas",link:"/consultas",imageUrl:"/images/consultas2.jpg"}],L=function(){var e=B();return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null),r.a.createElement(I.a,{maxWidth:"lg",style:{minHeight:"83vh",height:"auto",backgroundColor:"#fafafa"}},r.a.createElement("main",null,r.a.createElement(w.a,{className:e.mainFeaturedPost},r.a.createElement("img",{style:{position:"absolute",height:"260px",width:"100%"},src:"/images/bus_wallpaper.jpg",alt:"background"}),"}",r.a.createElement("div",{className:e.overlay}),r.a.createElement(P.a,{container:!0},r.a.createElement(P.a,{item:!0,md:6},r.a.createElement("div",{className:e.mainFeaturedPostContent},r.a.createElement(g.a,{component:"h1",variant:"h3",color:"inherit",gutterBottom:!0},"SisMob - MG"),r.a.createElement(g.a,{variant:"h5",color:"inherit",paragraph:!0},"Sistema de Gest\xe3o da Mobilidade do Estado de Minas Gerais"))))),r.a.createElement(P.a,{container:!0,spacing:4,className:e.cardGrid},T.map(function(a){return r.a.createElement(P.a,{item:!0,key:a.title,xs:12,md:4},r.a.createElement(F.a,{component:"span"},r.a.createElement(l.b,{to:a.link,style:{textDecoration:"none"}},r.a.createElement(z.a,{className:e.card},r.a.createElement("div",{className:e.cardDetails},r.a.createElement(N.a,null,r.a.createElement(g.a,{component:"h3",variant:"h6"},a.title),r.a.createElement("br",null),r.a.createElement(g.a,{variant:"body2",paragraph:!0},a.description),r.a.createElement(g.a,{variant:"body2",color:"primary"},"Clique aqui para ",a.title))),r.a.createElement(D.a,{xsDown:!0},r.a.createElement(A.a,{className:e.cardMedia,component:"img",src:a.imageUrl,title:a.title}))))))})))))},q=t(20),R=t(8),M=t.n(R),W=t(18),V=t(32),_=t(30),K=t(34),U=t(33),H=t(35),G=t(12),Z=t.n(G),$=t(23),J=t.n($),Y=t(2),X=t(446),Q=t(447),ee=t(448),ae=t(206),te=t(467),ne=Object(c.a)(function(e){return{success:{backgroundColor:X.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:Q.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}});function re(e){var a=ne(),t=e.className,o=e.message,i=(e.onClose,e.variant),l=Object(q.a)(e,["className","message","onClose","variant"]);return r.a.createElement(ee.a,Object.assign({className:Object(Y.a)(a[i],t),"aria-describedby":"client-snackbar",message:r.a.createElement(n.Fragment,null,r.a.createElement("span",{id:"client-snackbar",className:a.message},r.a.createElement(ae.a,null,"check"),"    ",o))},l))}function oe(e){return r.a.createElement("div",null,r.a.createElement(te.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.open,autoHideDuration:2e3,onClose:e.close},r.a.createElement(re,{variant:"success",message:e.msg})))}var ie=t(239),le=t(207),ce=t(240),se=t(84),de=t.n(se),ue=t(237),me=[{field:"seguradora",label:"Seguradora",margin:"normal",autoComplete:!0,datalist:"seguradora",collection:"seguradoras"},{field:"apolice",label:"Ap\xf3lice",margin:"normal",autoComplete:!0,datalist:"apolice",collection:"seguros"},{type:"date",field:"dataEmissao",label:"Data de Emiss\xe3o",margin:"normal"},{type:"date",field:"vencimento",label:"Vencimento",margin:"normal"}],pe=[[{field:"placa",label:"Placa",margin:"normal",datalist:"placa",autoComplete:!0,collection:"frota"},{field:"delegatario",label:"Delegat\xe1rio",margin:"normal",datalist:"razaoSocial",autoComplete:!0,collection:"empresas"},{field:"compartilhado",label:"Delegat\xe1rio Compartilhado",margin:"normal",datalist:"razaoSocial",autoComplete:!0,collection:"empresas"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Convencional","Executivo","Leito","Semi-Leito","Urbano"]},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal"},{field:"renavam",label:"Renavam",margin:"normal",disabled:!0},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17,disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",disabled:!0},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",max:2020,disabled:!0},{type:"number",field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",disabled:!0},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",max:2020,disabled:!0},{type:"number",field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,disabled:!0}]].concat([[{field:"pesoDianteiro",label:"Peso Dianteiro (kg)",margin:"normal",type:"number",max:12e3},{field:"pesoTraseiro",label:"Peso Trasiero (kg)",margin:"normal",type:"number",max:15e3},{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piquesPoltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150}]]).concat([[]]).concat([[]]),fe=[{field:"placa",label:"Placa",margin:"normal",datalist:"placa",autoComplete:!0,collection:"frota"},{field:"renavam",label:"Renavam",margin:"normal"},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17},{field:"delegatario",label:"Delegat\xe1rio",margin:"normal",disabled:!0},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",disabled:!0},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",disabled:!0},{field:"marcaChassi",label:"Marca do Chassi",margin:"normal",disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",disabled:!0},{field:"marcaCarroceria",label:"Marca da Carroceria",margin:"normal",disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",disabled:!0},{type:"number",field:"indicadorIdade",label:"Ano",margin:"normal",disabled:!0}],ge=[].concat([me]).concat([me]).concat([pe]).concat([fe]),he=[[{field:"placa",label:"Placa",margin:"normal",maxLength:8,pattern:"[a-zA-Z]{3}[-]?\\d{4}"},{field:"renavam",label:"Renavam",margin:"normal",maxLength:11,pattern:"\\d{11}"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Convencional","Executivo","Leito","Semi-Leito","Urbano"]},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",datalist:"modeloChassi",autoComplete:!0,collection:"modelosChassi"},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",max:2020},{type:"number",field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",datalist:"modelo",autoComplete:!0,collection:"carrocerias"},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",max:2020},{type:"number",field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal"}]].concat([me]).concat([[{field:"cilindros",label:"Cilindros",margin:"normal",type:"number",max:12,step:1},{field:"potencia",label:"Pot\xeancia (cv)",margin:"normal",type:"number",max:600},{field:"eixos",label:"Eixos",margin:"normal",type:"number",max:8},{field:"pneumaticos",label:"Pneum\xe1ticos",margin:"normal",type:"number",max:20},{field:"peso_dianteiro",label:"Peso Dianteiro (kg)",margin:"normal",type:"number",max:12e3},{field:"peso_traseiro",label:"Peso Trasiero (kg)",margin:"normal",type:"number",max:15e3},{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piques_poltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distancia_minima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distancia_maxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150}]]).concat([[]]).concat([[]]);function be(e){var a=e.collection,t=e.datalist;return e.value.length>2&&"string"!==typeof a?r.a.createElement("datalist",{id:t},a.map(function(e,a){return r.a.createElement("option",{key:a},e[t])})):null}var ve=Object(c.a)(function(e){return{item:{color:"#000",fontSize:"0.8rem",textAlign:"center"}}});function xe(e){var a=e.data,t=e.equipamentos,n=e.handleCheck,o=ve().item;return r.a.createElement(P.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"baseline"},t.map(function(e,t){return r.a.createElement(P.a,{key:t},r.a.createElement(le.a,{control:r.a.createElement(ie.a,{checked:a[e.item],value:e.item,onChange:function(){return n(e.item)}}),label:r.a.createElement(g.a,{className:o},e.item)}))}))}function Ee(e){var a=e.close,t=e.children,n=e.title,o=e.format;return r.a.createElement("div",null,r.a.createElement("div",{className:"card z-depth-5",style:{position:"fixed",height:"80vh",top:o?o.top:"10%",right:o?o.right:"33%",left:o?o.left:"33%",padding:"5px 0px 7px 20px",borderRadius:"15px",border:"1px solid #aaa",backgroundColor:"white",zIndex:10,boxShadow:"2px",overflowY:"auto"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",null,r.a.createElement("h5",null,n))),t,r.a.createElement("div",{style:{position:"absolute",top:"0.4%",right:"0.4%"}},r.a.createElement("div",null,r.a.createElement("i",{className:"material-icons right",title:"Fechar",style:{cursor:"pointer",color:"red"},onClick:a},"close")))))}var Se=Object(c.a)(function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1)},title:{color:"#000",fontWeight:400,fontSize:"0.9rem",textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)}}}),ye=function(e){var a=e.handleInput,t=e.handleBlur,o=e.data,i=e.handleEquipa,l=e.handleCheck,c=e.altPlacaOption,d=e.showAltPlaca,u=o.tab,m=o.empresas,p=o.razaoSocial,h=o.activeStep,b=o.equipamentos,v=o.addEquipa,x=o.delegatarioCompartilhado,E=o.subtitle,S=o.placa,y=Se(),k=y.paper,C=y.container,j=y.title,O=Object(n.useState)(!1),I=Object(s.a)(O,2),z=I[0],N=I[1],F=[];F=0===u?he[h]:2===u?pe[h]:3===u?fe:ge[u];var A=function(e){var a=o.form[e.field];return e.pattern&&a?null===o.form[e.field].match(e.pattern):a>e.max||a<e.min},D=function(e){var a=o.form[e.field];return a>e.max||a<e.min?"Valor inv\xe1lido":a&&null===a.match(e.pattern)?"\u2718":e.pattern&&a&&null!==a.match(e.pattern)?"\u2713":void 0};return r.a.createElement(P.a,{container:!0,direction:"row",className:C,justify:"center"},r.a.createElement(P.a,null,r.a.createElement(w.a,{className:k,style:{padding:"0 2% 0 2%"}},r.a.createElement(P.a,{container:!0,justify:"center"},r.a.createElement(P.a,{item:!0,xs:z?4:12,style:{marginBottom:"15px"}},r.a.createElement(g.a,{className:j}," Selecione a Via\xe7\xe3o"),r.a.createElement(ue.a,{inputProps:{list:"razaoSocial",name:"razaoSocial"},className:y.textField,value:p,onChange:a,onBlur:t}),r.a.createElement(be,{collection:m,datalist:"razaoSocial",value:p})),z&&r.a.createElement(P.a,{item:!0,xs:4},r.a.createElement(g.a,{className:j}," Empresa autorizada a compartilhar"),r.a.createElement(ue.a,{inputProps:{list:"razaoSocial",name:"delegatarioCompartilhado"},className:y.textField,value:x,onChange:a,onBlur:t}),r.a.createElement(be,{collection:m,datalist:"razaoSocial",value:x}))),0===u&&r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(le.a,{control:r.a.createElement(ie.a,{checked:!0===z,onChange:function(){return N(!z)},value:z}),label:r.a.createElement(g.a,{style:{color:"#2979ff",fontSize:"0.7rem",float:"right"}},"Ve\xedculo Compartilhado?")}))),p&&function(){var e=o.empresas.filter(function(e){return e.razaoSocial===p});return!(!e||!e[0])}()?r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(w.a,{className:k},r.a.createElement(g.a,{className:j}," ",E[u]),o.form&&F[0]&&F.map(function(e,i){return r.a.createElement(n.Fragment,{key:i},r.a.createElement(ue.a,{name:e.field,label:e.label,margin:e.margin,className:y.textField,onChange:a,onBlur:t,type:e.type||"",error:A(e),helperText:D(e),select:e.select||!1,value:o[e.field]||"",disabled:e.disabled||!1,InputLabelProps:{className:y.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.8rem",fontWeight:400,color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:e.disabled&&o.disable?"#fff":"#efefef",textAlign:"center",color:"#000",fontWeight:"500",width:e.width||""},value:"".concat(o[e.field]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1},!0===e.select&&e.options.map(function(e,a){return r.a.createElement(ce.a,{key:a,value:e},e)})),!0===e.autoComplete&&r.a.createElement(be,{collection:o[e.collection],datalist:e.datalist,value:o[e.field]||""}))}),0===h&&0===u&&r.a.createElement(P.a,{container:!0,justify:"center"},r.a.createElement(f.a,{variant:"outlined",size:"small",color:"primary",className:y.button,onClick:i},r.a.createElement(de.a,null),"Equipamentos")),v&&r.a.createElement(Ee,{close:i,title:"Equipamentos"},r.a.createElement(xe,{equipamentos:b,close:i,handleCheck:l,data:o})),c&&S.match("[a-zA-Z]{3}[-]?\\d{4}")&&r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(g.a,{style:{color:"#2979ff",fontWeight:500,fontSize:"0.75rem",padding:"2% 0 1% 70%",cursor:"pointer"},onClick:function(){return d()}},"\u2192 Clique aqui para alterar a placa para o formato Mercosul.")))):r.a.createElement(P.a,{container:!0,justify:"center"},r.a.createElement("div",{className:y.formHolder}))))},ke=[{title:"CRLV do Ve\xedculo",name:"crlv"},{title:"Ap\xf3lice do Seguro",name:"apoliceDoc"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"DAE Quitada",name:"dae"},{title:"Laudo de Pesagem",name:"pesagem"},{title:"Laudo de Vistoria INMETRO",name:"inmetro"}],we=[{title:"Documento de Transfer\xeancia",name:"transferenciaDoc"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"DAE Quitada",name:"dae"},{title:"Laudo de Pesagem",name:"pesagem"},{title:"CRLV com nova placa",name:"newPlateDoc"}],Ce=Object(c.a)(function(e){return{root:{flexGrow:"1",margin:"1%",padding:"1%"},textField:{marginLeft:e.spacing(1),marginRight:"2%",width:"97%",fontSize:"0.8rem",fontColor:"#bbb"},input:{display:"none"},paper:{color:e.palette.text.secondary,margin:e.spacing(2),width:"100%",padding:"2% 0 4% 0",height:"400px"},button:{margin:"3% 0 3% 0",float:"right bottom"},sendButton:{margin:"3% 0 3% 0",backgroundColor:"teal",float:"right"},text:{textAlign:"left",margin:e.spacing(2),fontSize:"0.9rem",fontWeight:"500",color:"#333"},resize:{fontSize:"0.8rem",color:"#888"},item:{marginTop:"2%"}}}),je=function(e){document.getElementById(e).click()};function Oe(e){var a,t=e.handleFiles,o=e.tab,i=Ce(),l=i.root,c=i.textField,s=i.button,d=i.input,u=i.paper,m=i.resize,p=i.item;return 0===o&&(a=ke),2===o&&(a=we),r.a.createElement("div",null,r.a.createElement(w.a,{className:u},r.a.createElement(P.a,{container:!0,className:l},a.map(function(e,a){var o=e.title,i=e.name;return r.a.createElement(n.Fragment,{key:a},r.a.createElement(P.a,{item:!0,xs:10,md:4,className:p},r.a.createElement(ue.a,{id:i,className:c,fullWidth:!0,placeholder:"Nenhum arquivo selecionado",onChange:t,onClick:function(){return je(i)},disabled:!0,InputProps:{classes:{input:m}},label:o,InputLabelProps:{shrink:!0,style:{fontWeight:500,color:"#000",marginBottom:"5%"}}})),r.a.createElement(P.a,{item:!0,xs:2,md:1,style:{paddingTop:"2%"}},r.a.createElement(f.a,{variant:"outlined",component:"label",className:s,color:"primary"},"Selecionar",r.a.createElement("input",{id:i,className:d,name:i,type:"file",onChange:t}))),r.a.createElement(P.a,{item:!0,md:1}))}))))}var Ie=t(451),Pe=t(452),ze=t(241),Ne=Object(c.a)(function(e){return{root:{flexGrow:"1",margin:"1%",padding:"1%",textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"9%",width:150,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},input:{textAlign:"center"},paper:{color:e.palette.text.secondary,margin:e.spacing(2),width:"100%",padding:"2% 0 4% 0",height:"500px"},equipa:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"9%",width:600,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"}}});function Fe(e){var a,t,n=e.data,o=[],i=Ne(),l=i.textField,c=i.paper,s=i.root,d=i.equipa,u=i.icon,m=n.tab,p=n.justificativa;return 0===m&&(a=he),2===m&&(a=pe),a.forEach(function(e){e.forEach(function(e){for(var a in n)a===e.field&&o.push({label:e.label,field:a,value:n[a]})})}),0===m&&(t=n.equipamentos_id.toString().replace(/,/g,", ")),r.a.createElement(w.a,{className:c},r.a.createElement(P.a,{container:!0,direction:"row",className:s},o.map(function(e,a){return r.a.createElement(P.a,{item:!0,xs:6,md:3,lg:2,key:a},r.a.createElement(ue.a,{id:e.field,className:l,value:e.value,label:e.label,disabled:!0,type:"text",InputLabelProps:{className:l,shrink:!0,style:{fontSize:"0.9rem",fontWeight:600,color:"#000",marginBottom:"5%"}},inputProps:{style:{textAlign:"center",color:"#000",backgroundColor:"#f7f7ff",paddingBottom:"2%",height:"40px",fontSize:"0.9rem"}},variant:"outlined"}))}),r.a.createElement(P.a,{container:!0,justify:"flex-end"},r.a.createElement(ze.a,{title:"Ver arquivos"},r.a.createElement(Ie.a,{color:"default","aria-label":"files",className:u},r.a.createElement(Pe.a,null)))),2===m&&r.a.createElement(P.a,{item:!0,xs:12,style:{margin:"2% 0"}},r.a.createElement(ue.a,{name:"justificativa",value:p,label:"Justificativa",type:"text",disabled:!0,InputLabelProps:{shrink:!0,style:{fontWeight:600}},inputProps:{style:{height:"60px",width:"900px"}},multiline:!0,rows:4,variant:"outlined"})),0===m&&r.a.createElement(P.a,{item:!0,xs:12,style:{display:t?void 0:"none"}},r.a.createElement(ue.a,{id:"equipamentos",className:d,value:t,label:"Acess\xf3rios",disabled:!0,type:"text",InputLabelProps:{shrink:!0,style:{fontSize:"0.9rem",fontWeight:600,color:"#000",marginBottom:"5%"}},inputProps:{style:{textAlign:"center",color:"#000",backgroundColor:"#f7f7ff",paddingBottom:"2%",height:"40px",fontSize:"0.7rem"}},multiline:!0,variant:"outlined"}))))}var Ae=t(453),De=t(454),Be=t(242),Te=Object(c.a)(function(e){return{root:{},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},title:{color:"#000",fontWeight:400,fontSize:"0.9rem",textAlign:"center",marginBottom:"20px"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},chip:{margin:e.spacing(.5)}}});function Le(e){var a=e.data,t=e.insuranceExists,n=e.handleInput,o=e.handleBlur,i=e.addPlateInsurance,l=e.deleteInsurance,c=(e.handleDelete,Te()),s=c.paper,d=c.title,u=c.textField,m=a.placa,p=a.apolice,h=a.addedPlaca,b=a.frota,v=[];return t.hasOwnProperty("placas")&&(null!==t.placas[0]&&(v=t.placas.sort()),void 0!==m&&m.length>2&&v[0]&&(v="string"===typeof m?t.placas.filter(function(e){return e.toLowerCase().match(m.toLowerCase())}).sort():t.placas.filter(function(e){return e.match(m)}).sort())),r.a.createElement(w.a,{className:s},r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(P.a,null,r.a.createElement(g.a,{className:d},"Utilize as op\xe7\xf5es abaixo para filtrar, adicionar ou excluir placas desta ap\xf3lice"),r.a.createElement(P.a,{container:!0,justify:"space-around",alignItems:"flex-end",spacing:2},r.a.createElement(P.a,{item:!0},r.a.createElement(ue.a,{inputProps:{name:"addedPlaca",list:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Insira a placa",className:u,value:h,onChange:n,onBlur:o}),r.a.createElement(be,{collection:b,datalist:"placa",value:h}),r.a.createElement(f.a,{size:"small",variant:"contained",className:c.button,style:{margin:"10px 0 10px 0"},onClick:function(){return i(h,p)}},r.a.createElement(Ae.a,null)," Adicionar")),r.a.createElement(P.a,{item:!0},r.a.createElement(ue.a,{inputProps:{name:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Filtrar",className:u,value:m||"",onChange:n,onBlur:o}),r.a.createElement(De.a,{style:{marginTop:"18px"}}))),r.a.createElement(P.a,{container:!0,spacing:1,alignItems:"center",justify:"center"}),t.hasOwnProperty("apolice")?r.a.createElement("div",{style:{marginTop:"30px"}},r.a.createElement(g.a,{className:d},"Placas vinculadas a ap\xf3lice ",t.apolice)):r.a.createElement("div",{style:{marginTop:"30px"}}),t&&v&&v[0]&&v.map(function(e,a){return r.a.createElement(Be.a,{key:a,label:e,onDelete:function(){return l(e)},className:c.chip,color:"primary",variant:"outlined"})}))))}var qe=Object(c.a)(function(e){return{button:{margin:e.spacing(1),float:"right"},backButton:{margin:e.spacing(1),float:"left",color:"#333",backgroundColor:"#eee"}}});function Re(e){var a=e.activeStep,t=e.setActiveStep,n=e.lastStep,o=e.handleSubmit,i=qe(),l=i.backButton,c=i.button;return r.a.createElement("div",null,r.a.createElement(f.a,{variant:"contained",className:l,onClick:function(){return t("back")},disabled:0===a},"Voltar"),a<n?r.a.createElement(f.a,{variant:"contained",color:"primary",className:c,onClick:function(){return t("next")}},"Avan\xe7ar"):r.a.createElement(f.a,{variant:"contained",color:"primary",className:c,onClick:function(){return o()}},"Aprovar"))}var Me=t(468),We=t(455),Ve=t(462),_e=Object(c.a)(function(e){return{root:{width:"100%",marginTop:"1%"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),padding:"1% 0 0 3%",fontWeight:500}}});function Ke(e){var a=e.activeStep,t=e.steps,n=_e();return r.a.createElement("div",{className:n.root},r.a.createElement(Me.a,{activeStep:a},t.map(function(e,a){return r.a.createElement(We.a,Object.assign({key:e},{}),r.a.createElement(Ve.a,{},e))})))}var Ue=t(465),He=t(459),Ge=t(457),Ze=t(458),$e=t(456),Je=function(e){document.getElementById(e).click()};function Ye(e){var a=e.open,t=e.close,n=e.handleInput,o=e.handleFiles,i=e.updatePlate,l=e.newPlate,c=function(e){return!(e.length<9&&e.match("[a-zA-Z]{3}?[-]\\d{1}\\w{1}\\d{2}"))};return r.a.createElement("div",null,r.a.createElement(Ue.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-title"},r.a.createElement($e.a,{id:"form-dialog-title"},"Alterar Placa"),r.a.createElement(Ge.a,null,r.a.createElement(Ze.a,null,"Para alterar a placa do ve\xedculo para o padr\xe3op Mercosul, digite a placa no campo abaixo e anexe o CRLV atualizado do ve\xedculo."),r.a.createElement(ue.a,{autoFocus:!0,margin:"dense",name:"newPlate",label:"Nova placa",type:"text",onChange:n,value:l,error:c(l),fullWidth:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ue.a,{id:"newPlateDoc",fullWidth:!0,placeholder:"Nenhum arquivo selecionado",onChange:o,onClick:function(){return Je("newPlate")},disabled:!0,label:"Anexar CRLV atualizado do ve\xedculo",InputLabelProps:{shrink:!0,style:{fontWeight:500,color:"#3F51B5",marginBottom:"5%"}}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(f.a,{variant:"outlined",component:"label",color:"primary"},"Procurar",r.a.createElement("input",{id:"newPlateDoc",name:"newPlateDoc",type:"file",style:{display:"none"},onChange:o}))),r.a.createElement(He.a,null,r.a.createElement(f.a,{onClick:t,color:"primary"},"Cancelar"),r.a.createElement(f.a,{onClick:i,color:"primary",disabled:c(l)},"Confirmar"))))}var Xe=function(e){function a(){var e,t;Object(V.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(K.a)(this,(e=Object(U.a)(a)).call.apply(e,[this].concat(r)))).state={tab:2,stepTitles:["Informe a placa para alterar os dados abaixo ou mantenha as informa\xe7\xf5es atuais e clique em avan\xe7ar","Altere os dados desejados abaixo e clique em avan\xe7ar","Anexe os documentos solicitados","Revis\xe3o das informa\xe7\xf5es e deferimento"],steps:["Alterar dados do Ve\xedculo","Alterar dados adicionais","Documentos","Revis\xe3o"],subtitle:["Informe os dados do Ve\xedculo","Informe os dados do Seguro","Preencha os campos abaixo","Informe os dados para a baixa"],form:{},empresas:[],razaoSocial:"",delegatarioCompartilhado:"",frota:[],toastMsg:"Dados atualizados!",confirmToast:!1,activeStep:0,files:[],fileNames:[],openDialog:!1,altPlaca:!1,newPlate:"",placa:""},t.setActiveStep=function(e){var a=t.state.activeStep;"next"===e&&t.setState({activeStep:a+1}),"back"===e&&t.setState({activeStep:a-1}),"reset"===e&&t.setState({activeStep:0})},t.handleInput=function(e){var a=e.target,n=a.name,r=a.value;if("newPlate"===n){var o=r;"string"===typeof o&&((o=o.replace(/[a-z]/g,function(e){return e.toUpperCase()})).match("[A-Z]{3}[0-9]{1}[A-Z]{1}[0-9]{2}")&&(o=o.replace(/(\w{3})/,"$1-")),t.setState(Object(d.a)({},t.state,{newPlate:o})))}else t.setState(Object(u.a)({},n,r))},t.getId=function(){var e=Object(W.a)(M.a.mark(function e(a,n,r,o,i,l,c){var s,d,m,p,f,g;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d=r.filter(function(e){return e[i].toLowerCase().match(n.toLowerCase())}),""===n&&t.setState((s={},Object(u.a)(s,a,""),Object(u.a)(s,o,""),s)),!d[0]){e.next=10;break}if(m=d[0][i],p=d[0][l],""===n){e.next=8;break}return e.next=8,t.setState((f={},Object(u.a)(f,a,m),Object(u.a)(f,o,p),f));case 8:e.next=14;break;case 10:return e.next=12,t.setState((g={},Object(u.a)(g,a,""),Object(u.a)(g,o,""),g));case 12:alert(c+" n\xe3o cadastrado"),document.getElementsByName(a)[0].focus();case 14:case"end":return e.stop()}},e)}));return function(a,t,n,r,o,i,l){return e.apply(this,arguments)}}(),t.handleBlur=function(){var e=Object(W.a)(M.a.mark(function e(a){var n,r,o,i,l,c,s,u,m;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state,r=n.empresas,o=n.frota,i=n.veiculos,l=a.target.name,c=a.target.value,e.t0=l,e.next="compartilhado"===e.t0?6:"delegatario"===e.t0?8:"razaoSocial"===e.t0?11:15;break;case 6:return t.getId(l,c,r,"delegatarioCompartilhado","razaoSocial","delegatarioId"),e.abrupt("break",16);case 8:return e.next=10,t.getId(l,c,r,"delegatarioId","razaoSocial","delegatarioId","Empresa");case 10:return e.abrupt("break",16);case 11:return e.next=13,t.getId(l,c,r,"donoDaFrotaId","razaoSocial","delegatarioId","Empresa");case 13:return t.state.donoDaFrotaId&&(s=i.filter(function(e){return e.delegatarioId===t.state.donoDaFrotaId}),t.setState({frota:s})),e.abrupt("break",16);case 15:case 16:if("placa"!==l||"string"===typeof t.state.frota){e.next=24;break}return u=t.state.frota.filter(function(e){return"string"===typeof c?e.placa.toLowerCase().match(c.toLowerCase()):e.placa.match(c)})[0],e.next=20,t.setState(Object(d.a)({},u,{disable:!0}));case 20:void 0!==u&&u.hasOwnProperty("empresa")&&t.setState({delegatario:u.empresa}),m={},o[0]&&Object.keys(o[0]).forEach(function(e){return m[e]=""}),""===t.state.placa||u||(t.props.createAlert("plateNotFound"),t.setState(Object(d.a)({},m,{disable:!1})));case 24:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.handleEdit=function(){var e=Object(W.a)(M.a.mark(function e(a){var n,r,o,i,l,c,s,d,m,p;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,r=n.poltronas,o=n.pesoDianteiro,i=n.pesoTraseiro,l=n.delegatarioId,c=n.delegatarioCompartilhado,s={},pe.forEach(function(e){e.forEach(function(e){for(var a in t.state)a!==e.field||e.disabled||Object.assign(s,Object(u.a)({},a,t.state[a]))})}),d=93*Number(r)+(Number(o)+Number(i)),isNaN(d)&&(d=void 0),s=Object.assign(s,{delegatarioId:l,delegatarioCompartilhado:c,pbt:d}),s=J.a.decamelizeKeys(s),(m=s).placa,m.delegatario,m.compartilhado,p=Object(q.a)(m,["placa","delegatario","compartilhado"]),"veiculo","veiculo_id",e.next=11,Z.a.put("/api/updateVehicle",{requestObject:p,table:"veiculo",tablePK:"veiculo_id",id:t.state.veiculoId});case 11:return e.next=13,t.submitFiles();case 13:t.toast();case 14:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.toast=function(e){t.setState({confirmToast:!t.state.confirmToast})},t.handleFiles=function(){var e=Object(W.a)(M.a.mark(function e(a){var n,r,o,i,l;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.target,r=n.name,!(o=n.files)||!o[0]){e.next=12;break}if(document.getElementById(r).value=o[0].name,(i=new FormData).append("veiculoId",t.state.veiculoId),l=t.state.fileNames,!(o&&o.length>0)){e.next=12;break}return l.push(Object(u.a)({},r,o[0].name)),e.next=10,t.setState(Object(u.a)({filesNames:l},r,o[0]));case 10:we.forEach(function(e){var a=e.name;for(var n in t.state)n.match(a)&&(i.append("id",a),i.append(a,t.state[a]))}),t.setState({form:i});case 12:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.submitFiles=function(){var e=t.state.form;Z.a.post("/api/mongoUpload",e).then(function(e){return console.log(e.data)}).catch(function(e){return console.log(e)})},t.toggleDialog=function(){t.setState({altPlaca:!t.state.altPlaca})},t.showAltPlaca=function(){t.setState({altPlaca:!0,title:"Altera\xe7\xe3o de placa",message:"Para alterar a placa para o novo padr\xe3o Mercosul, informe a nova placa no campo abaixo."})},t.updatePlate=Object(W.a)(M.a.mark(function e(){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"veiculo","veiculo_id",a={placa:t.state.newPlate},e.next=3,Z.a.put("/api/updateVehicle",{requestObject:a,table:"veiculo",tablePK:"veiculo_id",id:t.state.veiculoId});case 3:return e.next=5,t.submitFiles();case 5:t.toggleDialog(),t.toast();case 7:case"end":return e.stop()}},e)})),t}return Object(H.a)(a,e),Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=Object(W.a)(M.a.mark(function e(){var a,t,n=this;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Z.a.get("/api/veiculos"),t=Z.a.get("/api/empresas"),e.next=4,Promise.all([a,t]).then(function(e){return e.map(function(e){return J.a.camelizeKeys(e.data)})}).then(function(e){var a=Object(s.a)(e,2),t=a[0],r=a[1];n.setState({veiculos:t,empresas:r})});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.confirmToast,t=e.toastMsg,o=e.activeStep,i=e.steps,l=e.stepTitles,c=e.tab,s=e.altPlaca;return r.a.createElement(n.Fragment,null,r.a.createElement(Ke,{activeStep:o,steps:i,stepTitles:l,setActiveStep:this.setActiveStep}),o<2&&r.a.createElement(ye,{data:this.state,altPlacaOption:0===o,handleInput:this.handleInput,handleBlur:this.handleBlur,showAltPlaca:this.showAltPlaca}),1===o&&r.a.createElement(P.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(P.a,null,r.a.createElement(ue.a,{name:"justificativa",value:this.state.justificativa,label:"Justificativa",type:"text",onChange:this.handleInput,InputLabelProps:{shrink:!0,style:{fontWeight:600,marginBottom:"5%"}},inputProps:{style:{paddingBottom:"2%",width:"900px"}},multiline:!0,rows:4,variant:"outlined"}))),2===o&&r.a.createElement(Oe,{tab:c,handleFiles:this.handleFiles,handleSubmit:this.submitFiles,handleNames:this.handleNames}),3===o&&r.a.createElement(Fe,{data:this.state}),r.a.createElement(Re,{activeStep:o,lastStep:i.length-1,handleSubmit:this.handleEdit,setActiveStep:this.setActiveStep}),r.a.createElement(oe,{open:a,close:this.toast,msg:t}),r.a.createElement(Ye,{open:s,close:this.toggleDialog,newPlate:this.state.newPlate,handleInput:this.handleInput,handleFiles:this.handleFiles,updatePlate:this.updatePlate}))}}]),a}(n.Component),Qe=(t(306),t(460)),ea=t(463),aa=t(469),ta=t(209),na=t(402),ra=function(e){function a(){var e,t;Object(V.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(K.a)(this,(e=Object(U.a)(a)).call.apply(e,[this].concat(r)))).state={tab:3,subtitle:["Informe os dados do Ve\xedculo","Informe os dados do Seguro","Preencha os campos abaixo","Informe os dados para a baixa"],empresas:[],razaoSocial:"",delegatarioCompartilhado:"",frota:[],placa:"",form:{},check:"",delegaTransf:"",toastMsg:"Baixa realizada com sucesso!",confirmToast:!1,openDialog:!1},t.setActiveStep=function(e){var a=t.state.activeStep;"next"===e&&t.setState({activeStep:a+1}),"back"===e&&t.setState({activeStep:a-1}),"reset"===e&&t.setState({activeStep:0})},t.handleInput=function(e){var a,n=e.target,r=n.name,o=n.value,i=J.a.decamelize(r);"razaoSocial"!==r?t.setState((a={},Object(u.a)(a,r,o),Object(u.a)(a,"form",Object(d.a)({},t.state.form,Object(u.a)({},i,o))),a)):t.setState(Object(u.a)({},r,o))},t.getId=function(){var e=Object(W.a)(M.a.mark(function e(a,n,r,o,i,l,c){var s,d,m,p,f,g;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d=r.filter(function(e){return e[i].toLowerCase().match(n.toLowerCase())}),""===n&&t.setState((s={},Object(u.a)(s,a,""),Object(u.a)(s,o,""),s)),!d[0]){e.next=10;break}if(m=d[0][i],p=d[0][l],""===n){e.next=8;break}return e.next=8,t.setState((f={},Object(u.a)(f,a,m),Object(u.a)(f,o,p),f));case 8:e.next=14;break;case 10:return e.next=12,t.setState((g={},Object(u.a)(g,a,""),Object(u.a)(g,o,""),g));case 12:alert(c+" n\xe3o cadastrado"),document.getElementsByName(a)[0].focus();case 14:case"end":return e.stop()}},e)}));return function(a,t,n,r,o,i,l){return e.apply(this,arguments)}}(),t.handleBlur=function(){var e=Object(W.a)(M.a.mark(function e(a){var n,r,o,i,l,c,s,u,m;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state,r=n.empresas,o=n.frota,i=n.veiculos,l=a.target.name,c=a.target.value,e.t0=l,e.next="compartilhado"===e.t0?6:"delegaTransf"===e.t0?8:"razaoSocial"===e.t0?11:15;break;case 6:return t.getId(l,c,r,"delegatarioCompartilhado","razaoSocial","delegatarioId"),e.abrupt("break",16);case 8:return e.next=10,t.getId(l,c,r,"delegatarioId","razaoSocial","delegatarioId","Empresa");case 10:return e.abrupt("break",16);case 11:return e.next=13,t.getId(l,c,r,"donoDaFrotaId","razaoSocial","delegatarioId","Empresa");case 13:return t.state.donoDaFrotaId&&(s=i.filter(function(e){return e.delegatarioId===t.state.donoDaFrotaId}),t.setState({frota:s})),e.abrupt("break",16);case 15:case 16:if("placa"!==l||"string"===typeof t.state.frota){e.next=25;break}if(!(c.length>2)){e.next=24;break}return u=t.state.frota.filter(function(e){return"string"===typeof c?e.placa.toLowerCase().match(c.toLowerCase()):e.placa.match(c)})[0],e.next=21,t.setState(Object(d.a)({},u,{disable:!0}));case 21:void 0!==u&&u.hasOwnProperty("empresa")&&t.setState({delegatario:u.empresa}),e.next=25;break;case 24:t.state.placa.length<0&&!u&&(m={},o[0]&&Object.keys(o[0]).forEach(function(e){return m[e]=""}),t.props.createAlert("plateNotFound"),t.setState(Object(d.a)({},m,{disable:!1})));case 25:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.handleSubmit=function(){var e=Object(W.a)(M.a.mark(function e(a){var n,r,o,i,l,c,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,r=n.delegatarioId,o=n.justificativa,i=n.checked,l=n.delegaTransf,["placa","renavam","nChassi"].every(function(e){return t.state.hasOwnProperty(e)&&""!==t.state[e]})){e.next=5;break}return t.props.createAlert("fieldsMissing"),e.abrupt("return",null);case 5:if("venda"!==i||l){e.next=8;break}return t.props.createAlert("fieldsMissing"),e.abrupt("return",null);case 8:if("outro"!==i||o){e.next=11;break}return t.props.createAlert("fieldsMissing"),e.abrupt("return",null);case 11:if("outro"===i||"venda"===i){e.next=14;break}return t.props.createAlert("fieldsMissing"),e.abrupt("return",null);case 14:if(!(t.state.placa.length<=2)){e.next=19;break}return t.props.createAlert("invalidPlate"),e.abrupt("return",null);case 19:if([],!(t.state.frota.filter(function(e){return e.placa===t.state.placa}).length<1)){e.next=24;break}return t.props.createAlert("plateNotFound"),e.abrupt("return",null);case 24:"venda"===i&&(c={delegatarioId:r,situacao:"pendente"}),"outro"===i&&(c={situacao:"exclu\xeddo"}),s=J.a.decamelizeKeys(c),"veiculo","veiculo_id",Z.a.put("/api/updateVehicle",{requestObject:s,table:"veiculo",tablePK:"veiculo_id",id:t.state.veiculoId}).then(function(){return t.toast()}).catch(function(e){return console.log(e)});case 29:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.toast=function(e){t.setState({confirmToast:!t.state.confirmToast})},t.handleFiles=function(){var e=Object(W.a)(M.a.mark(function e(a){var n,r,o,i,l;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.target,r=n.name,!(o=n.files)||!o[0]){e.next=11;break}if(document.getElementById(r).value=o[0].name,i=new FormData,l=t.state.fileNames,!(o&&o.length>0)){e.next=11;break}return l.push(Object(u.a)({},r,o[0].name)),e.next=9,t.setState(Object(u.a)({filesNames:l},r,o[0]));case 9:ke.forEach(function(e){var a=e.name;for(var n in t.state)n.match(a)&&(i.append("id",a),i.append(a,t.state[a]))}),t.setState({form:i});case 11:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.handleCheck=function(e){var a=e.target.value;t.setState({checked:a})},t}return Object(H.a)(a,e),Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=Object(W.a)(M.a.mark(function e(){var a,t,n=this;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Z.a.get("/api/veiculos"),t=Z.a.get("/api/empresas"),e.next=4,Promise.all([a,t]).then(function(e){return e.map(function(e){return J.a.camelizeKeys(e.data)})}).then(function(e){var a=Object(s.a)(e,2),t=a[0],r=a[1];n.setState({veiculos:t,empresas:r})});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this,a=this.state,t=a.delegaTransf,o=a.confirmToast,i=a.toastMsg,l=a.checked;return r.a.createElement(n.Fragment,null,r.a.createElement(ye,{data:this.state,handleInput:this.handleInput,handleBlur:this.handleBlur}),r.a.createElement(P.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{width:"venda"===l||"outro"===l?"1200px":"600px"}},r.a.createElement(P.a,{item:!0,xs:l?6:12},r.a.createElement(ta.a,{component:"fieldset"},r.a.createElement(na.a,{component:"legend"},"Motivo da baixa"),r.a.createElement(aa.a,{"aria-label":"position",name:"position",onChange:this.handleCheck,row:!0,style:{width:"auto"},className:"radio"},r.a.createElement(le.a,{className:"radio",value:"venda",control:r.a.createElement(ea.a,{color:"primary",inputProps:{style:{fontSize:"0.5rem"}}}),label:"Venda para outra empresa do sistema",labelPlacement:"start"}),r.a.createElement(le.a,{value:"outro",control:r.a.createElement(ea.a,{color:"primary"}),label:"Outro",labelPlacement:"start"})))),"venda"===l&&r.a.createElement(P.a,{item:!0,xs:6},r.a.createElement(ue.a,{inputProps:{list:"razaoSocial",name:"delegaTransf"},value:t,onChange:this.handleInput,onBlur:this.handleBlur,label:"Informe o delegat\xe1rio para o qual foi transferido o ve\xedculo.",fullWidth:!0}),r.a.createElement(be,{collection:this.props.data.empresas,datalist:"razaoSocial",value:t})),"outro"===l&&r.a.createElement(P.a,{item:!0,xs:6},r.a.createElement(ue.a,{name:"justificativa",value:this.state.justificativa,label:"Justificativa",type:"text",onChange:this.handleInput,InputLabelProps:{shrink:!0},multiline:!0,rows:4,variant:"outlined",fullWidth:!0}))),r.a.createElement(P.a,{container:!0,direction:"row",justify:"flex-end",style:{width:"1200px"}},r.a.createElement(P.a,{item:!0,xs:11,style:{width:"1000px"}}),r.a.createElement(P.a,{item:!0,xs:1,style:{align:"right"}},r.a.createElement(f.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"10px 0 10px 0"},onClick:function(){return e.handleSubmit()}},"Confirmar ",r.a.createElement("span",null,"\xa0\xa0 ")," ",r.a.createElement(Qe.a,null)))),r.a.createElement(oe,{open:o,close:this.toast,msg:i}))}}]),a}(n.Component);function oa(e){var a=e.title,t=e.message,n=e.open,o=e.close,i=e.confirm;return r.a.createElement("div",null,r.a.createElement(Ue.a,{open:n,onClose:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement($e.a,{id:"alert-dialog-title"},a),r.a.createElement(Ge.a,null,r.a.createElement(Ze.a,{id:"alert-dialog-description"},t)),r.a.createElement(He.a,null,r.a.createElement(f.a,{onClick:o,color:"primary"},i?"Cancelar":"Fechar"),i&&r.a.createElement(f.a,{onClick:o,color:"primary",autoFocus:!0},"Confirmar"))))}var ia=function(e){function a(){var e;return Object(V.a)(this,a),(e=Object(K.a)(this,Object(U.a)(a).call(this))).state={tab:0,items:["Cadastro de Ve\xedculo","Atualiza\xe7\xe3o de Seguro","Altera\xe7\xe3o de dados","Baixa de Ve\xedculo"],steps:["Dados do Ve\xedculo","Dados do seguro","Vistoria e laudos","Documentos","Revis\xe3o"],subtitle:["Informe os dados do Ve\xedculo","Informe os dados do Seguro","Preencha os campos abaixo","Informe os dados para a baixa"],form:{},empresas:[],razaoSocial:"",delegatarioCompartilhado:"",frota:[],toastMsg:"Ve\xedculo cadastrado!",confirmToast:!1,activeStep:0,files:[],fileNames:[],modelosChassi:[],seguradoras:[],insuranceExists:!1,equipamentos:[],addEquipa:!1,addedPlaca:"",openDialog:!1},e.changeTab=function(a,t){e.setState({tab:t,toastMsg:["Ve\xedculo cadastrado!","Seguro atualizado!","Dados Alterados!","Ve\xedculo Baixado."][t],razaoSocial:"",frota:[],placa:"",delegatarioCompartilhado:"",apolice:"",seguradora:"",dataEmissao:"",vencimento:"",seguros:e.state.allInsurances})},e.setActiveStep=function(){var a=Object(W.a)(M.a.mark(function a(t){var n,r,o;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==e.state.activeStep){a.next=7;break}if(!e.state.frota.filter(function(a){return a.placa===e.state.placa})[0]){a.next=7;break}return a.next=5,e.setState({placa:""});case 5:return e.createAlert("plateExists"),a.abrupt("return",null);case 7:n=[],r=e.state.equipamentos,o=e.state.activeStep,"next"===t&&e.setState({activeStep:o+1}),"back"===t&&e.setState({activeStep:o-1}),"reset"===t&&e.setState({activeStep:0}),1===o&&(r.forEach(function(){var a=Object(W.a)(M.a.mark(function a(t){return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!0!==e.state[t.item]){a.next=3;break}return a.next=3,n.push(t.item);case 3:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()),e.setState({equipamentos_id:n}));case 14:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(){var a=Object(W.a)(M.a.mark(function a(t){var n,r,o,i;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=t.target.name,o=t.target.value,i=J.a.decamelize(r),"razaoSocial"!==r&&e.setState((n={},Object(u.a)(n,r,o),Object(u.a)(n,"form",Object(d.a)({},e.state.form,Object(u.a)({},i,o))),n)),"placa"!==r||0!==e.state.tab){a.next=12;break}if("string"!==typeof o){a.next=10;break}return o=o.toLocaleUpperCase(),a.next=9,e.setState(Object(u.a)({},r,o));case 9:return a.abrupt("return",null);case 10:a.next=13;break;case 12:e.setState(Object(u.a)({},r,o));case 13:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),e.getId=function(){var a=Object(W.a)(M.a.mark(function a(t,n,r,o,i,l,c){var s,d,m,p,f,g;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d=r.filter(function(e){return e[i].toLowerCase().match(n.toLowerCase())}),""===n&&e.setState((s={},Object(u.a)(s,t,""),Object(u.a)(s,o,""),s)),!d[0]){a.next=10;break}if(m=d[0][i],p=d[0][l],""===n){a.next=8;break}return a.next=8,e.setState((f={},Object(u.a)(f,t,m),Object(u.a)(f,o,p),f));case 8:a.next=14;break;case 10:return a.next=12,e.setState((g={},Object(u.a)(g,t,""),Object(u.a)(g,o,""),g));case 12:alert(c+" n\xe3o cadastrado"),document.getElementsByName(t)[0].focus();case 14:case"end":return a.stop()}},a)}));return function(e,t,n,r,o,i,l){return a.apply(this,arguments)}}(),e.handleBlur=function(){var a=Object(W.a)(M.a.mark(function a(t){var n,r,o,i,l,c,s,d,u,m,p,f,g,h,b,v,x,E,S,y,k,w;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=e.state,r=n.empresas,o=n.tab,i=n.frota,l=n.placa,c=n.modelosChassi,s=n.carrocerias,d=n.seguradoras,u=n.allInsurances,m=n.veiculos,p=t.target.name,f=t.target.value,a.t0=p,a.next="modeloChassi"===a.t0?6:"modeloCarroceria"===a.t0?8:"delegatarioCompartilhado"===a.t0?10:"seguradora"===a.t0?12:"razaoSocial"===a.t0?19:"apolice"===a.t0?23:"addedPlaca"===a.t0?26:30;break;case 6:return e.getId(p,f,c,"modeloChassiId","modeloChassi","id","Chassi"),a.abrupt("break",31);case 8:return e.getId(p,f,s,"modeloCarroceriaId","modelo","id","Modelo de carroceria"),a.abrupt("break",31);case 10:return e.getId(p,f,r,"compartilhadoId","razaoSocial","delegatarioId"),a.abrupt("break",31);case 12:return a.next=14,e.getId(p,f,d,"seguradoraId","seguradora","id","Seguradora");case 14:return g=[],e.state.delegatarioId&&""===e.state.seguradora&&(g=u.filter(function(a){return a.delegatarioId===e.state.delegatarioId}),e.setState({seguros:g})),e.state.delegatarioId||""===e.state.seguradora||(g=u.filter(function(a){return a.seguradora===e.state.seguradora}),e.setState({seguros:g})),e.state.delegatarioId&&""!==e.state.seguradora&&(g=u.filter(function(a){return a.delegatarioId===e.state.delegatarioId}).filter(function(a){return a.seguradora===e.state.seguradora}),e.setState({seguros:g})),a.abrupt("break",31);case 19:return a.next=21,e.getId(p,f,r,"delegatarioId","razaoSocial","delegatarioId","Empresa");case 21:return e.state.delegatarioId&&(h=m.filter(function(a){return a.delegatarioId===e.state.delegatarioId}),b=u.filter(function(a){return a.delegatarioId===e.state.delegatarioId}),e.setState({frota:h,seguros:b})),a.abrupt("break",31);case 23:return(v=e.state.seguros.filter(function(a){return a.apolice===e.state.apolice}))&&void 0!==v[0]&&v[0].dataEmissao&&v[0].vencimento?(x=v[0].dataEmissao.toString().slice(0,10),E=v[0].vencimento.toString().slice(0,10),S=v[0].seguradora,e.setState({seguradora:S,dataEmissao:x,vencimento:E,insuranceExists:v[0]})):(v=!1,e.setState({insuranceExists:!1})),a.abrupt("break",31);case 26:return y=e.state.addedPlaca,(k=i.filter(function(e){return e.placa.match(y)}))&&k[0]&&k[0].length>0&&e.setState({addedPlaca:k[0].placa}),a.abrupt("break",31);case 30:case 31:if("placa"!==p||"string"===typeof e.state.frota){a.next=52;break}if(0!==o){a.next=52;break}if(7!==f.length){a.next=45;break}return w=f.replace(/(\w{3})/,"$1-"),a.next=37,e.setState({placa:w});case 37:if(f=w,!i.filter(function(a){return a.placa===e.state.placa})[0]){a.next=45;break}return a.next=42,e.setState({placa:null});case 42:f="",e.createAlert("plateExists"),document.getElementsByName("placa")[0].focus();case 45:if(!i.filter(function(e){return e.placa===l})[0]){a.next=52;break}return a.next=49,e.setState({placa:null});case 49:f="",e.createAlert("plateExists"),document.getElementsByName("placa")[0].focus();case 52:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),e.handleCadastro=function(){var a=Object(W.a)(M.a.mark(function a(t){var n,r,o,i,l,c,s,d,m,p,f,g,h,b,v,x,E,S,y,k,w,C,j,O;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,r=n.anoCarroceria,o=n.equipamentos_id,i=n.peso_dianteiro,l=n.peso_traseiro,c=n.poltronas,s=n.delegatarioId,d=n.compartilhadoId,m=n.seguros,p=n.modeloChassiId,f=n.modeloCarroceriaId,g=n.seguradoraId,"Ativo",h=r,b=93*Number(c)+(Number(i)+Number(l)),isNaN(b)&&(b=void 0),v={},he.forEach(function(a){a.forEach(function(a){for(var t in e.state)t===a.field&&Object.assign(v,Object(u.a)({},t,e.state[t]))})}),x=e.state.form,E=new FormData,S=v.dataEmissao,y=v.vencimento,v.delegatarioCompartilhado,v.modeloChassi,v.modeloCarroceria,v.seguradora,k=Object(q.a)(v,["dataEmissao","vencimento","delegatarioCompartilhado","modeloChassi","modeloCarroceria","seguradora"]),w={apolice:v.apolice,seguradoraId:g,dataEmissao:S,vencimento:y},Object.assign(k,{delegatarioId:s,situacao:"Ativo",indicadorIdade:h,pbt:b,equipamentos_id:o,modeloChassiId:p,modeloCarroceriaId:f}),k.delegatarioCompartilhado=d,C=J.a.decamelizeKeys(k),j=J.a.decamelizeKeys(w),!(O=m.filter(function(e){return e.apolice===j.apolice}))[0]){a.next=20;break}return a.next=16,Z.a.post("/api/cadastroVeiculo",C).then(function(e){var a=e.data[0].veiculo_id;E.append("veiculoId",a);var t=!0,n=!1,r=void 0;try{for(var o,i=x.entries()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var l=o.value;E.append(l[0],l[1])}}catch(c){n=!0,r=c}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}});case 16:Z.a.post("/api/mongoUpload",E).then(function(e){console.log(e.data)}).catch(function(e){return console.log(e)}),e.toast(),a.next=30;break;case 20:if(O[0]||void 0===j.apolice||!(j.apolice.length>3)||void 0===j.seguradora_id){a.next=29;break}return a.next=23,Z.a.post("/api/cadSeguro",j).then(function(e){return console.log(e.data)});case 23:return a.next=25,Z.a.post("/api/cadastroVeiculo",C).then(function(e){var a=e.data[0].veiculo_id;E.append("veiculoId",a);var t=!0,n=!1,r=void 0;try{for(var o,i=x.entries()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var l=o.value;E.append(l[0],l[1])}}catch(c){n=!0,r=c}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}});case 25:Z.a.post("/api/mongoUpload",E).then(function(e){console.log(e.data)}).catch(function(e){return console.log(e)}),e.toast(),a.next=30;break;case 29:alert("Favor verificar os dados do seguro.");case 30:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),e.toast=function(a){e.setState({confirmToast:!e.state.confirmToast})},e.handleFiles=function(){var a=Object(W.a)(M.a.mark(function a(t){var n,r,o,i,l;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.target,r=n.name,!(o=n.files)||!o[0]){a.next=11;break}if(document.getElementById(r).value=o[0].name,i=new FormData,l=e.state.fileNames,!(o&&o.length>0)){a.next=11;break}return l.push(Object(u.a)({},r,o[0].name)),a.next=9,e.setState(Object(u.a)({filesNames:l},r,o[0]));case 9:ke.forEach(function(a){var t=a.name;for(var n in e.state)n.match(t)&&i.append(t,e.state[t])}),e.setState({form:i});case 11:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),e.submitFiles=function(){var a=Object(W.a)(M.a.mark(function a(t){var n;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.state.form,a.next=3,Z.a.post("/api/mongoUpload",n).then(function(e){return console.log(e.data)}).catch(function(e){return console.log(e)});case 3:e.toast();case 4:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),e.handleEquipa=function(a){e.setState({addEquipa:!e.state.addEquipa})},e.handleCheck=function(a){e.setState(Object(d.a)({},e.state,Object(u.a)({},a,!e.state[a])))},e.deleteInsurance=function(){var a=Object(W.a)(M.a.mark(function a(t){var n,r,o,i,l,c,s;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.setState({vehicleFound:e.state.frota.filter(function(e){return e.placa===t})[0]});case 2:return n=e.state.vehicleFound,r=e.state.insuranceExists,o=r.placas,i=r.veiculos,l={table:"veiculo",column:"apolice",value:"Seguro n\xe3o cadastrado",tablePK:"veiculo_id",id:n.veiculoId},c=o.indexOf(t),o.splice(c,1),s=i.indexOf(n.veiculoId),i.splice(s,1),a.next=11,Z.a.put("/api/UpdateInsurance",l).catch(function(e){return console.log(e)});case 11:return r.placas=o,r.veiculos=i,e.setState({insuranceExists:r}),a.abrupt("return",null);case 15:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),e.updateInsurance=function(){var a=Object(W.a)(M.a.mark(function a(t,n){var r,o,i,l,c,s,d,u,m,p,f,g,h,b,v,x,E,S,y,k;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.setState({vehicleFound:e.state.frota.filter(function(e){return e.placa===t})[0]});case 2:if(r=e.state.vehicleFound,o=e.state.insuranceExists,i=o.placas,l=o.veiculos,t.match("[a-zA-Z]{3}[-]?\\d{4}")){a.next=7;break}return e.setState({openDialog:!0,dialogTitle:"Placa inv\xe1lida",message:"Certifique-se de que a placa informada \xe9 uma placa v\xe1lida, com tr\xeas letras seguidas de 4 n\xfameros (ex: AAA-0000)"}),a.abrupt("return",null);case 7:if(void 0!==r&&!1!==r.hasOwnProperty("veiculoId")){a.next=12;break}return e.setState({openDialog:!0,dialogTitle:"Placa n\xe3o encontrada",message:'A placa informada n\xe3o corresponde a nenhum ve\xedculo da frota da via\xe7\xe3o selecionada. Para cadastrar um novo ve\xedculo, selecione a op\xe7\xe3o "Cadastro de Ve\xedculo" no menu acima.'}),a.abrupt("return",null);case 12:if(void 0===o||!o.hasOwnProperty("placas")||!r.hasOwnProperty("placa")){a.next=17;break}if(void 0===o.placas.find(function(e){return e===r.placa})){a.next=17;break}return e.setState({openDialog:!0,dialogTitle:"Placa j\xe1 cadastrada",message:'A placa informada j\xe1 est\xe1 cadastrada na ap\xf3lice. Para pesquisar as placas cadastradas, utilize o campo "filtrar" abaixo.'}),a.abrupt("return",null);case 17:if(c={table:"veiculo",column:"apolice",value:n,tablePK:"veiculo_id",id:r.veiculoId},n&&(i||(i=[]),i.push(t),l||(l=[]),l.push(r.veiculoId),o.hasOwnProperty("placas")&&o.hasOwnProperty("veiculos")&&((s=o).placas=i,s.veiculos=l,e.setState({insuranceExists:s}))),he[1].every(function(a){return e.state.hasOwnProperty(a.field)&&""!==e.state[a.field]})){a.next=23;break}return alert("Favor preencher todos os campos referentes ao seguro."),a.abrupt("return",null);case 23:if(o.hasOwnProperty("apolice")){a.next=27;break}return d=e.state,u=d.seguradoraId,m=d.apolice,p=d.dataEmissao,f=d.vencimento,g={seguradora_id:u,apolice:m,data_emissao:p,vencimento:f},a.next=27,Z.a.post("/api/cadSeguro",g);case 27:return"Seguro n\xe3o cadastrado"!==r.apolice&&(h=e.state.seguros,b=h.findIndex(function(e){return e.apolice===r.apolice}),h[b]&&(v=h[b].placas,x=h[b].veiculos,E=v.indexOf(r.placa),S=v.indexOf(r.veiculoId),v.splice(E,1),x.splice(S,1),h[b].placas=v,h[b].veiculos=x,e.setState({seguros:h}))),a.next=30,Z.a.put("/api/UpdateInsurance",c).catch(function(e){return console.log(e)});case 30:return a.next=32,Z.a.get("/api/seguros").then(function(e){return J.a.camelizeKeys(e.data)}).then(function(a){return e.setState({seguros:a}),a}).then(function(a){return e.setState({insuranceExists:a.filter(function(e){return e.apolice===n})[0]})}).catch(function(e){return console.log(e)});case 32:return y=e.state.frota,k=e.state.frota.findIndex(function(e){return e.veiculoId===r.veiculoId}),y[k].apolice=n,a.next=37,e.setState({frota:y});case 37:document.getElementsByName("razaoSocial")[0]&&document.getElementsByName("razaoSocial")[0].focus(),document.getElementsByName("seguradora")[0]&&document.getElementsByName("seguradora")[0].focus(),document.getElementsByName("apolice")[0]&&document.getElementsByName("apolice")[0].focus(),document.getElementsByName("addedPlaca")[0]&&document.getElementsByName("addedPlaca")[0].focus(),e.setState({addedPlaca:""});case 42:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}(),e.toggleDialog=function(){e.setState({openDialog:!e.state.openDialog})},e.createAlert=function(a){var t,n;switch(a){case"plateNotFound":t="Placa n\xe3o encontrada",n='A placa informada n\xe3o corresponde a nenhum ve\xedculo da frota da via\xe7\xe3o selecionada.Para cadastrar um novo ve\xedculo, selecione a op\xe7\xe3o "Cadastro de Ve\xedculo" no menu acima.';break;case"invalidPlate":t="Placa inv\xe1lida",n="Certifique-se de que a placa informada \xe9 uma placa v\xe1lida, com tr\xeas letras seguidas de 4 n\xfameros (ex: AAA-0000)";break;case"fieldsMissing":t="Favor preencher todos os campos.",n="Os campos acima s\xe3o de preenchimento obrigat\xf3rio. Certifique-se de ter preenchido todos eles.";break;case"plateExists":t="Placa j\xe1 cadastrada!",n="A placa informada j\xe1 est\xe1 cadastrada. Para atualizar seguro, alterar dados ou solicitar baixa, utilize as op\xe7\xf5es acima. "}e.setState({openDialog:!0,dialogTitle:t,message:n})},e.showFiles=function(a){var t=e.state.files.filter(function(e){return e.metadata.veiculoId===a.toString()});t[0]?e.setState({filesCollection:t,showFiles:!0,selectedVehicle:a}):(e.createAlert("filesNotFound"),e.setState({filesCollection:[]}))},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.handleEquipa()},e}return Object(H.a)(a,e),Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=Object(W.a)(M.a.mark(function e(){var a,t,n,r,o,i,l,c,d=this;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Z.a.get("/api/modelosChassi"),t=Z.a.get("/api/carrocerias"),n=Z.a.get("/api/veiculos"),r=Z.a.get("/api/empresas"),o=Z.a.get("/api/seguradoras"),i=Z.a.get("/api/seguros"),l=Z.a.get("/api/equipa"),e.next=9,Promise.all([a,t,n,r,o,i,l]).then(function(e){return e.map(function(e){return J.a.camelizeKeys(e.data)})}).then(function(e){var a=Object(s.a)(e,7),t=a[0],n=a[1],r=a[2],o=a[3],i=a[4],l=a[5],c=a[6];d.setState({modelosChassi:t,carrocerias:n,veiculos:r,empresas:o,seguradoras:i,equipamentos:c,seguros:l,allInsurances:l})});case 9:c={},this.state.equipamentos.forEach(function(e){return Object.assign(c,Object(u.a)({},e.item,!1))}),this.setState(c),document.addEventListener("keydown",this.escFunction,!1);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this,a=this.state,t=a.tab,o=a.items,i=a.confirmToast,l=a.toastMsg,c=a.activeStep,s=a.openDialog,d=a.dialogTitle,u=a.message,m=a.steps,p=he[1].every(function(a){return e.state.hasOwnProperty(a.field)&&""!==e.state[a.field]});return r.a.createElement(n.Fragment,null,r.a.createElement(O,{items:o,tab:t,changeTab:this.changeTab}),0===t&&r.a.createElement(Ke,{activeStep:c,steps:m,setActiveStep:this.setActiveStep}),t<2&&c<3?r.a.createElement(ye,{data:this.state,handleInput:this.handleInput,handleBlur:this.handleBlur,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck}):0===t&&3===c?r.a.createElement(Oe,{tab:t,handleFiles:this.handleFiles,handleSubmit:this.submitFiles,handleNames:this.handleNames,showFiles:this.showFiles}):0===t&&4===c?r.a.createElement(Fe,{data:this.state}):r.a.createElement(n.Fragment,null),0===t&&r.a.createElement(Re,{activeStep:c,lastStep:m.length-1,handleSubmit:this.handleCadastro,setActiveStep:this.setActiveStep}),1===t&&p&&r.a.createElement(Le,{data:this.state,insuranceExists:this.state.insuranceExists,handleInput:this.handleInput,handleBlur:this.handleBlur,addPlateInsurance:this.updateInsurance,deleteInsurance:this.deleteInsurance}),2===t&&r.a.createElement(Xe,{data:this.state,getId:this.getId,createAlert:this.createAlert}),3===t&&r.a.createElement(ra,{data:this.state,getId:this.getId,createAlert:this.createAlert}),r.a.createElement(oe,{open:i,close:this.toast,msg:l}),r.a.createElement(oa,{open:s,close:this.toggleDialog,title:d,message:u}))}}]),a}(n.Component),la=t(250),ca=t.n(la),sa=function(e,a){if(/\d/.test(e)){var t=new Date(e).getDate()+"/"+(new Date(e).getMonth()+1)+"/"+new Date(e).getFullYear();return a&&(t+=", "+new Date(e).getHours()+":"+(new Date(e).getMinutes()<10?"0"+new Date(e).getMinutes():new Date(e).getMinutes())+"h"),t.toString()}return e},da=[{field:"placa",title:"Placa"},{field:"modeloCarroceria",title:"Modelo da Carroceria"},{field:"empresa",title:"Delegat\xe1rio"},{field:"seguradora",title:"Seguradora"},{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"vencimento",title:"Vencimento Seguro",render:function(e){return sa(e.vencimento)}},{field:"indicadorIdade",title:"Ano de Fabrica\xe7\xe3o",filtering:!1}],ua=[{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"seguradora",title:"Seguradora"},{field:"empresa",title:"Segurado"},{field:"segurados",title:"N\xfamero de ve\xedculos"},{field:"vencimento",title:"Vencimento",filtering:!1,render:function(e){return sa(e.vencimento)}}],ma=[[{field:"razaoSocial",title:"Raz\xe3o Social"},{field:"delegatarioStatus",title:"Situa\xe7\xe3o"},{field:"vencimentoContrato",title:"Data de Vencimento",filtering:!1,render:function(e){return sa(e.vencimentoContrato)}},{field:"cidade",title:"Munic\xedpio"},{field:"telefone",title:"Telefone"},{field:"frota",title:"Tamanho da frota"}]].concat([[{field:"nomeSocio",title:"Nome"},{field:"cpfSocio",title:"CPF"},{field:"razaoSocial",title:"Delegat\xe1rio(s)"},{field:"emailSocio",title:"E-mail"},{field:"share",title:"Participa\xe7\xe3o Societ\xe1ria (%)",filtering:!1}]]).concat([[{field:"nomeProcurador",title:"Nome"},{field:"cpfProcurador",title:"CPF"},{field:"emailProcurador",title:"E-mail"},{field:"telProcurador",title:"Telefone"}]]).concat([da]).concat([ua]),pa=Object(c.a)(function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(2)},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},input:{textAlign:"center"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(2)},button:{margin:e.spacing(1),float:"right"}}}),fa=function(e){var a=e.tab,t=e.collection,n=e.showDetails,o=e.showFiles,i=e.handleEdit,l=e.del,c=pa().paper,s=["delegatarioId","socioId","procuradorId","veiculoId"][a];return r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(w.a,{className:c},r.a.createElement(ca.a,{title:"Pesquisar dados de ".concat(["empresas","s\xf3cios","procuradores","ve\xedculos","seguros"][a]),columns:ma[a],data:t,options:{filtering:!0,actionsColumnIndex:-1,searchFieldStyle:{color:"#024"},headerStyle:{backgroundColor:"#FAFAFC",height:"5px",maxHeight:"8px"},emptyRowsWhenPaging:!1,pageSize:10},localization:{body:{emptyDataSourceMessage:"Carregando...",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar"},pagination:{rowsPerPageOptions:[5,10,25,50,100],labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},actions:[{icon:"info",iconProps:{color:"primary"},tooltip:"Mais informa\xe7\xf5es",onClick:function(e,a){return n(e,a)}},{hidden:1===a||4===a,icon:"file_copy_outline",iconProps:{color:"secondary"},tooltip:"Ver arquivos",onClick:function(e,a){return o(a[s])}}],editable:{onRowDelete:function(){var e=Object(W.a)(M.a.mark(function e(a){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(a);case 2:return e.abrupt("return",new Promise(function(e,n){setTimeout(function(){var n=t,r=n.indexOf(a);n.splice(r,1),i({data:n},function(){return e()}),e()},200)}));case 3:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}()}}),r.a.createElement("div",null)))},ga=Object(c.a)(function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"9%",width:150,fontSize:"0.6rem",fontColor:"#bbb",textAlign:"center"}}});function ha(e){var a=e.data,t=e.tab,n=ga().textField,o=(a.veiculoId,a.laudoId,a.tableData,a.modeloChassiId,a.modeloCarroceriaId,a.delegatarioId,Object(q.a)(a,["veiculoId","laudoId","tableData","modeloChassiId","modeloCarroceriaId","delegatarioId"]));3===t&&(o.dataRegistro=sa(a.dataRegistro),o.dataEmissao=sa(a.dataEmissao),o.vencimento=sa(a.vencimento));var i,l=[];return Object.entries(o).forEach(function(e){var a=Object(s.a)(e,2),t=a[0],n=a[1];void 0===(i=he[0].find(function(e){return e.field===t}))&&(i=he[1].find(function(e){return e.field===t})),void 0===i&&(i=he[2].find(function(e){return e.field===t})),void 0!==i?i=l.push([i.label,n]):l.push([t,n])}),r.a.createElement(P.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"baseline"},l.map(function(e,a){return r.a.createElement(P.a,{key:a,item:!0,xs:6,sm:4,md:3,lg:2},r.a.createElement(ue.a,{className:n,label:e[0],value:e[1]||"",InputLabelProps:{shrink:!0,style:{fontSize:"0.9rem",fontWeight:500}},inputProps:{style:{fontSize:"0.7rem"}},variant:"outlined"}))}))}var ba=function(e){return e>1024&&e<1048576?Math.round(e/1024)+" KB":e>=1048576&&e<1073741824?(e/1024/1024).toFixed(2)+" MB":e+" bytes"},va=function(e,a,t){Z()({url:"/api/mongoDownload/?collection=".concat(t,"&id=").concat(e),method:"GET",responseType:"blob"}).then(function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download",a),document.body.appendChild(n),n.click()}).catch(function(e){console.log(e)})},xa=[{title:"Contrato Social",name:"contratoSocial"},{title:"Procura\xe7\xe3o",name:"procuracao"}],Ea={marginBottom:0,display:"grid",grid:"50px / 4% 40% 25% 25%",width:"99%",margin:"auto",padding:"10px 0 0 0",justifyItems:"auto"},Sa=function(e){var a=e.filesCollection,t=e.close,n=e.format,o=e.typeId,i=e.empresas,l=[],c="empresaDocs",s=xa;switch(o){case"veiculoId":c="vehicleDocs",0===(s=ke).filter(function(e){return"transferenciaDoc"===e.name}).length&&s.push({title:"Documento de Transfer\xeancia",name:"transferenciaDoc"}),0===s.filter(function(e){return"newPlateDoc"===e.name}).length&&s.push({title:"CRLV com nova placa",name:"newPlateDoc"})}a&&a[0]&&a.forEach(function(e){s.forEach(function(a){a.name===e.metadata.fieldName&&l.push(Object(d.a)({},e,{label:a.title}))})});return l[0]?r.a.createElement(Ee,{title:"Arquivos",close:t,format:n},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"row"},r.a.createElement("h5",null,r.a.createElement("img",{alt:"",src:"/images/folderIcon2.jpg",style:{paddingLeft:"20px",marginRight:"20px"}}))),r.a.createElement("hr",{style:{marginBottom:"5px"}}),r.a.createElement("div",{style:Ea},r.a.createElement("div",null,r.a.createElement("img",{alt:"",src:"/images/multipleFiles2.png",height:"50%"})),r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:"1.2em",fontWeight:500}},"Arquivo")),r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:"1.2em",fontWeight:500}},"Data de Upload")),r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:"1.2em",fontWeight:500}},"Tamanho"))),r.a.createElement("hr",{style:{margin:"0 0 20px 0"}}),l.map(function(e,a){return r.a.createElement("div",{key:a},r.a.createElement("div",{style:Ea},r.a.createElement("div",{className:"col s1"},r.a.createElement("img",{alt:"",src:"/images/genericFile.png"})),r.a.createElement("div",{className:"col s11"},r.a.createElement("span",{style:{textDecoration:"underline",cursor:"pointer",color:"blue"},onClick:function(){return va(e._id,e.filename,c)}},e.label+function(e){var a=e.metadata;return"procuracao"===a.fieldName?" - "+i.find(function(e){return e.delegatarioId===Number(a.empresaId)}).razaoSocial:""}(e))),r.a.createElement("div",{className:"col s3"},sa(e.uploadDate,!0)),r.a.createElement("div",{className:"col s3"},ba(e.length))))}))):null},ya={top:"5%",left:"10%",right:"10%"},ka=function(e){function a(){var e;return Object(V.a)(this,a),(e=Object(K.a)(this,Object(U.a)(a).call(this))).state={tab:0,items:["Empresas","S\xf3cios","Procuradores","Ve\xedculos","Seguros"],tablePKs:["delegatario_id","socios","procurador_id","veiculo_id","apolice"],dbTables:["delegatario","socios","procurador","veiculo","seguro"],empresas:[],seguros:[],razaoSocial:"",showDetails:!1,showFiles:!1,openDialog:!1,filesCollection:[],elementDetails:"",vehicleFiles:[]},e.changeTab=function(){var a=Object(W.a)(M.a.mark(function a(t,n){var r,o;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.setState({tab:n});case 2:r=["empresas","socios","procuradores","veiculos","seguros"],o=e.state[r[n]],e.setState({collection:o});case 4:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}(),e.handleEdit=function(a){e.setState({data:a})},e.showDetails=function(a,t){void 0!==t?e.setState({showDetails:!e.state.showDetails,elementDetails:t}):e.setState({showDetails:!e.state.showDetails,elementDetails:void 0})},e.closeFiles=function(){e.setState({showFiles:!e.state.showFiles})},e.showFiles=function(a){var t=e.state.tab,n=e.state.empresaFiles.filter(function(e){return e.metadata.empresaId===a.toString()}),r="empresaId";switch(t){case 2:r="procuracaoId";var o=[];e.state.empresaFiles.forEach(function(e){"procuracao"===e.metadata.fieldName&&e.metadata.procuradores.forEach(function(t){t===a&&o.push(e)})}),n=o;break;case 3:r="veiculoId",n=e.state.vehicleFiles.filter(function(e){return e.metadata.veiculoId===a.toString()})}n[0]?e.setState({filesCollection:n,showFiles:!0,typeId:r,selectedElement:a}):(e.createAlert("filesNotFound"),e.setState({filesCollection:[]}))},e.deleteHandler=function(a){var t=e.state,n=t.dbTables,r=t.tablePKs,o=t.tab,i=n[o],l=r[o],c=J.a.camelize(l);Z.a.delete("/api/delete?table=".concat(i,"&tablePK=").concat(l,"&id=").concat(a[c])).then(function(e){return console.log(e.data)})},e.createAlert=function(a){var t,n,r;switch(a){case"filesNotFound":r=e.state.dbTables[e.state.tab],t="Arquivos n\xe3o encontrados",n="N\xe3o h\xe1 nenhum arquivo anexado no sistema para o ".concat(r," selecionado. \n                Ao cadastrar ou atualizar os dados do ").concat(r,", certifique-se de anexar os documentos solicitados.")}e.setState({openDialog:!0,dialogTitle:t,message:n})},e.toggleDialog=function(){e.setState({openDialog:!e.state.openDialog})},e.escFunction=function(a){27===a.keyCode&&(e.state.showDetails&&e.showDetails(),e.state.showFiles&&e.closeFiles())},e}return Object(H.a)(a,e),Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=Object(W.a)(M.a.mark(function e(){var a,t,n,r,o,i=this;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=Z.a.get("/api/veiculos"),t=Z.a.get("/api/seguros"),n=Z.a.get("/api/empresas"),r=Z.a.get("/api/socios"),o=Z.a.get("/api/proc"),Z.a.get("/api/getFiles/vehicle").then(function(e){return i.setState({vehicleFiles:e.data})}),Z.a.get("/api/getFiles/empresa").then(function(e){return i.setState({empresaFiles:e.data})}),Promise.all([a,t,n,r,o]).then(function(e){return e.map(function(e){return J.a.camelizeKeys(e.data)})}).then(function(e){var a=Object(s.a)(e,5),t=a[0],n=a[1],r=a[2],o=a[3],l=a[4];i.setState({veiculos:t,seguros:n,empresas:r,socios:o,procuradores:l,collection:r})}),document.addEventListener("keydown",this.escFunction,!1);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.tab,t=e.items,o=e.collection,i=e.showDetails,l=e.elementDetails,c=e.showFiles,s=e.selectedElement,d=e.filesCollection,u=e.openDialog,m=e.dialogTitle,p=e.message,f=e.typeId,g=e.empresas;return r.a.createElement(n.Fragment,null,r.a.createElement(O,{items:t,tab:a,changeTab:this.changeTab}),r.a.createElement(fa,{tab:a,items:t,collection:o,showDetails:this.showDetails,showFiles:this.showFiles,handleEdit:this.handleEdit,del:this.deleteHandler}),i&&r.a.createElement(Ee,{close:this.showDetails,title:"Informa\xe7\xf5es sobre o ve\xedculo",format:ya},r.a.createElement(ha,{data:l,tab:a})),c&&r.a.createElement(Sa,{tab:a,elementId:s,filesCollection:d,close:this.closeFiles,format:ya,typeId:f,empresas:g}),r.a.createElement(oa,{open:u,close:this.toggleDialog,title:m,message:p}))}}]),a}(n.Component),wa=t(108),Ca=t(106),ja=t.n(Ca),Oa=[{field:"razaoSocial",label:"Raz\xe3o Social",maxLength:90},{field:"cnpj",label:"CNPJ",maxLength:14,pattern:"\\d{14}"},{field:"inscricaoEstadual",label:"Inscri\xe7\xe3o Estadual",maxLength:13,pattern:"\\d{13}"},{field:"telefone",label:"Telefone",maxLength:12,pattern:"?[(]/d{2-3}?[)]?[ ]/d{4}?[-]/d{4}"},{field:"email",label:"E-mail",type:"email",maxLength:60},{field:"cep",label:"CEP",maxLength:10},{field:"numero",label:"N\xfamero",type:"number"},{field:"complemento",label:"Complemento",maxLength:20},{field:"rua",label:"Rua",maxLength:100},{field:"bairro",label:"Bairro",maxLength:40},{field:"cidade",label:"Cidade",maxLength:60},{field:"uf",label:"Estado",maxLength:2}],Ia=Object(c.a)(function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1),height:"auto"},title:{color:"#000",fontWeight:500,textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300,fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},dropBox:{margin:"2% 0"},dropBoxItem:{margin:"12px 0",border:"1px solid #ccc",borderRadius:"3%",height:"50px",padding:"17px",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#4169E1",backgroundColor:"#fafafa"},dropBoxItem2:{margin:"12px 0",border:"1px solid #ccc",borderRadius:"3%",height:"50px",padding:"0 1% 0 1%",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#00000",backgroundColor:"#fafafa"}}}),Pa=function(e){var a=e.handleInput,t=e.handleBlur,o=e.data,i=e.handleFiles,l=o.activeStep,c=o.stepTitles,s=o.dropDisplay,d=Ia(),u=d.paper,m=d.container,p=d.title,f=d.dropBox,h=d.dropBoxItem,b=d.dropBoxItem2,v=function(e){var a=o.form[e.field];return e.pattern&&a?null===o.form[e.field].match(e.pattern):a>e.max||a<e.min},x=function(e){var a=o.form[e.field];return a>e.max||a<e.min?"Valor inv\xe1lido":a&&null===a.match(e.pattern)?"\u2718":e.pattern&&a&&null!==a.match(e.pattern)?"\u2713":void 0};return r.a.createElement(P.a,{container:!0,direction:"row",className:m,justify:"center"},r.a.createElement(P.a,null,r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(w.a,{className:u},r.a.createElement(g.a,{className:p}," ",c[l]),Oa.map(function(e,i){return r.a.createElement(n.Fragment,{key:i},r.a.createElement(ue.a,{name:e.field,label:e.label,margin:"normal",className:d.textField,onChange:a,onBlur:t,type:e.type||"",error:v(e),helperText:x(e),select:e.select||!1,value:o[e.field]||"",disabled:e.disabled||!1,InputLabelProps:{className:d.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",color:"#444"}},inputProps:{style:{background:e.disabled&&o.disable?"#fff":"#fafafa",fontSize:"0.85rem",color:"#000",textAlign:"center",width:e.width||"",height:"8px"},value:"".concat(o[e.field]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1}))}),r.a.createElement(wa.a,{onDrop:i},function(e){var a=e.getRootProps,t=e.getInputProps;return r.a.createElement(P.a,Object.assign({container:!0,justify:"center",alignItems:"center",className:f,direction:"row"},a()),r.a.createElement("input",t()),s.match("Clique ou")?r.a.createElement(P.a,{item:!0,xs:6,className:h}," ",s," "):r.a.createElement(P.a,{item:!0,xs:6,className:b}," ",r.a.createElement(ja.a,null),"  ",s," ",r.a.createElement("br",null)," (clique ou arraste outro arquivo para alterar)"))})))))},za=t(151),Na=t.n(za),Fa=t(152),Aa=t.n(Fa),Da=[{field:"nomeSocio",label:"Nome do S\xf3cio",maxLength:90},{field:"cpfSocio",label:"CPF",maxLength:11,pattern:"\\d{11}"},{field:"telSocio",label:"Telefone",maxLength:16,pattern:"((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))"},{field:"emailSocio",label:"E-mail",maxLength:60},{field:"share",label:"Participa\xe7\xe3o Societ\xe1ria (%)",maxLength:5,max:100}],Ba=Object(c.a)(function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1)},title:{color:"#000",fontWeight:500,textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#bbb",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"},addButton:{marginBottom:"1%",padding:"1% 0"}}}),Ta=function(e){var a=e.handleInput,t=e.handleBlur,o=e.data,i=e.addSocio,l=e.removeSocio,c=(e.handleFiles,e.enableEdit),s=e.handleEdit,d=o.activeStep,u=o.stepTitles,m=o.socios,p=Ba(),h=p.paper,b=p.container,v=p.title,x=p.iconButton,E=p.list,S=p.addButton,y=function(e){var a=o[e.field];return e.pattern&&a?null===a.match(e.pattern):a>e.max||a<e.min},k=function(e){var a=o[e.field];return a>e.max||a<e.min?"Valor inv\xe1lido":a&&null===a.match(e.pattern)?"\u2718":e.pattern&&a&&null!==a.match(e.pattern)?"\u2713":void 0};return r.a.createElement(P.a,{container:!0,direction:"row",className:b,justify:"center"},r.a.createElement(P.a,null,r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(w.a,{className:h},r.a.createElement(g.a,{className:v}," ",u[d]),Da.map(function(e,i){return r.a.createElement(n.Fragment,{key:i},r.a.createElement(ue.a,{name:e.field,label:e.label,margin:"normal",className:p.textField,onChange:a,onBlur:t,type:e.type||"",error:y(e),helperText:k(e),select:e.select||!1,value:o[e.field]||"",disabled:e.disabled||!1,InputLabelProps:{className:p.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.75rem",fontWeight:400,color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:e.disabled&&o.disable?"#fff":"#fafafa",height:"7px"},value:"".concat(o[e.field]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1},!0===e.select&&e.options.map(function(e,a){return r.a.createElement(ce.a,{key:a,value:e},e)})))}),r.a.createElement(f.a,{color:"primary",className:S,onClick:i},r.a.createElement(de.a,null)," Adicionar s\xf3cio"))),m.length>0&&r.a.createElement(P.a,{container:!0,direction:"row",className:b,justify:"center",alignItems:"center"},r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(w.a,{className:h},r.a.createElement("p",{className:v},1===d?"S\xf3cios":"Procuradores"," cadastrados"),m.map(function(e,a){return r.a.createElement(P.a,{key:a},Da.map(function(a,t){return r.a.createElement(n.Fragment,{key:t+1e3},r.a.createElement(ue.a,{value:e[a.field]||"",name:a.field,label:a.label,className:E,disabled:"cpfSocio"===a.field||!e.edit,onChange:s,InputLabelProps:{shrink:!0,style:{fontWeight:600}}}))}),r.a.createElement(f.a,{component:"span",className:x,title:"editar",onClick:function(){return c(a)}},r.a.createElement(Na.a,null)),r.a.createElement(f.a,{className:x,color:"secondary",title:"Remover",onClick:function(){return l(a)}},r.a.createElement(Aa.a,null)))}))))))},La=t(154),qa=t.n(La),Ra=t(153),Ma=t.n(Ra),Wa={display:"flex",justifyContent:"center",width:"100%",alignContent:"center",flexWrap:"wrap"},Va={textAlign:"center",alignItems:"flex-start",lineHeight:"40px",border:"1px #ccc solid",padding:"0 1%",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px"},_a={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},Ka={verticalAlign:"middle",padding:"0 0% 0 2%"};function Ua(e){var a,t=e.data.contratoSocial;t&&(a=t.get("contratoSocial")||new FormData);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:Wa},t&&r.a.createElement("div",{style:Va},r.a.createElement(Ma.a,{style:Ka})," "," Contrato Social",r.a.createElement(qa.a,{style:_a,onClick:function(){return function(e,t){var n;"contratoSocial"===e&&(n=a);var r=window.URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.setAttribute("download",t),document.body.appendChild(o),o.click()}("contratoSocial",a.name)}}))))}var Ha=t(258),Ga=t.n(Ha),Za=t(5),$a=t(233),Ja=t(214),Ya=t(213),Xa=t(231),Qa=t(215),et=Object(Za.a)(function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000",fontWeight:600},body:{fontSize:14}}})(Ya.a),at=Object(Za.a)(function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000"},body:{fontSize:12}}})(Ya.a),tt=Object(Za.a)(function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}})(Qa.a),nt=Object(c.a)(function(e){return{root:{flexGrow:"1",padding:"1%",textAlign:"center"},title:{marginTop:"2%",fontColor:"#000",fontWeight:500,backgroundColor:"#B2DCEA"},input:{textAlign:"center"},paper:{color:e.palette.text.secondary,margin:e.spacing(2),width:"100%",padding:"2% 0 1% 0",height:"auto"},table:{marginBottom:e.spacing(2),overflowX:"auto"}}});function rt(e){var a=e.data,t=nt(),o=t.title,i=t.paper,l=t.root,c=t.table,s=a.socios,d={};Oa.forEach(function(e){a.hasOwnProperty([e.field])&&Object.assign(d,Object(u.a)({},e.field,a[e.field]))});var m=[{subtitle:"Detalhes da Empresa",form:Oa,data:d=[d]},{subtitle:"S\xf3cios",form:Da,data:s}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{className:i},r.a.createElement(P.a,{container:!0,direction:"row",className:l},m.map(function(e,a){var t=e.subtitle,i=e.form,l=e.data;return r.a.createElement(n.Fragment,{key:a},r.a.createElement("div",{style:{width:"100%",align:"left"}},r.a.createElement(g.a,{className:o}," ",t," ")),r.a.createElement("br",null),r.a.createElement($a.a,{className:c},r.a.createElement(Xa.a,null,r.a.createElement(tt,null,i.map(function(e,a){return r.a.createElement(et,{key:a},e.label)}))),l.map(function(e,a){return r.a.createElement(Ja.a,{key:a},r.a.createElement(Qa.a,null,i.map(function(a,t){return r.a.createElement(at,{key:t},e[a.field])})))})))}),r.a.createElement("h3",null," ",r.a.createElement(Ga.a,{style:{verticalAlign:"middle",padding:"0 0 0 4%"}})," Documentos "),r.a.createElement(Ua,{data:a}))))}var ot=t(464),it=t(259),lt=t.n(it);function ct(e){var a=e.links,t=e.text;return r.a.createElement(P.a,{style:{marginTop:"1%",paddingLeft:"1%"}},r.a.createElement(ot.a,{separator:"\u203a","aria-label":"breadcrumb"},r.a.createElement(l.b,{to:"/",style:{}},r.a.createElement(lt.a,{style:{verticalAlign:"middle",marginRight:"5px",paddingBottom:"3px"}}),r.a.createElement("span",{style:{fontSize:"0.8rem"}},"P\xe1gina inicial")),r.a.createElement(l.b,{color:"primary",to:a[1],style:{fontSize:"0.8rem"}},a[0]),r.a.createElement("span",{style:{fontSize:"0.8rem"}},t)))}var st=function(e){function a(){var e;return Object(V.a)(this,a),(e=Object(K.a)(this,Object(U.a)(a).call(this))).state={activeStep:0,stepTitles:["Preencha os dados da empresa","Informa\xe7\xf5es sobre os s\xf3cios","Revis\xe3o"],steps:["Dados da Empresa","S\xf3cios","Revis\xe3o"],form:{},empresas:[],razaoSocial:"",frota:[],toastMsg:"Empresa cadastrada!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,addedSocios:[0],totalShare:0,socios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",showFiles:!1},e.setActiveStep=function(){var a=Object(W.a)(M.a.mark(function a(t){var n;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=e.state.activeStep,"next"===t&&e.setState({activeStep:n+1}),"back"===t&&e.setState({activeStep:n-1}),"reset"===t&&e.setState({activeStep:0});case 4:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(){var a=Object(W.a)(M.a.mark(function a(t){var n,r,o;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=t.target,r=n.name,o=n.value,e.setState(Object(u.a)({},r,o));case 2:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),e.addSocio=Object(W.a)(M.a.mark(function a(){var t,n,r,o,i;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.state.socios,r={},o=0,i=0,(n=Da).forEach(function(a){""!==e.state[a.field]&&void 0!==e.state[a.field]||(o+=1)}),100!==o){a.next=7;break}return e.createAlert("missingRequiredFields"),a.abrupt("return",null);case 7:if(n.forEach(function(a){Object.assign(r,Object(u.a)({},a.field,e.state[a.field]))}),t.push(r),t.forEach(function(e){i+=Number(e.share)}),!(i>100)){a.next=15;break}t.pop(),e.createAlert("overShared"),a.next=19;break;case 15:return a.next=17,e.setState({socios:t,totalShare:i});case 17:Da.forEach(function(a){e.setState(Object(u.a)({},a.field,""))}),document.getElementsByName("nomeSocio")[0].focus();case 19:case"end":return a.stop()}},a)})),e.enableEdit=function(a){var t=e.state.socios;!0===t[a].edit?t[a].edit=!1:(t.forEach(function(e){return e.edit=!1}),t[a].edit=!0),e.setState({socios:t})},e.handleEdit=function(a){var t=a.target.name,n=e.state.socios,r=a.target.value;"share"===t&&(r=r.replace(",","."));var o=n.filter(function(e){return!0===e.edit})[0],i=n.indexOf(o);o[t]=r;var l=n;l[i]=o,e.setState({filteredSocios:l})},e.removeSocio=function(a){var t=e.state.socios;t.splice(a,1),e.setState({socios:t})},e.getId=function(){var a=Object(W.a)(M.a.mark(function a(t,n,r,o,i,l,c){var s,d,m,p,f,g;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d=r.filter(function(e){return e[i].toLowerCase().match(n.toLowerCase())}),""===n&&e.setState((s={},Object(u.a)(s,t,""),Object(u.a)(s,o,""),s)),!d[0]){a.next=10;break}if(m=d[0][i],p=d[0][l],""===n){a.next=8;break}return a.next=8,e.setState((f={},Object(u.a)(f,t,m),Object(u.a)(f,o,p),f));case 8:a.next=14;break;case 10:return a.next=12,e.setState((g={},Object(u.a)(g,t,""),Object(u.a)(g,o,""),g));case 12:alert(c+" n\xe3o cadastrado"),document.getElementsByName(t)[0].focus();case 14:case"end":return a.stop()}},a)}));return function(e,t,n,r,o,i,l){return a.apply(this,arguments)}}(),e.handleBlur=function(){var a=Object(W.a)(M.a.mark(function a(t){var n,r,o,i,l,c;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=e.state.empresas,r=t.target.name,o=t.target.value,a.t0=r,a.next="cnpj"===a.t0?6:"share"===a.t0?9:"numero"===a.t0?12:17;break;case 6:return(i=n.filter(function(e){return e.cnpj===o}))[0]&&(e.setState({cnpj:""}),e.createAlert(i[0])),a.abrupt("break",18);case 9:return(o=o.replace(",","."))>100?e.createAlert("overShared"):(c=Number(e.state.totalShare)+Number(o),e.setState((l={},Object(u.a)(l,r,o),Object(u.a)(l,"totalShare",c),l))),a.abrupt("break",18);case 12:if(!o||o.match(/^\d+$/)){a.next=16;break}return a.next=15,e.setState({numero:""});case 15:e.createAlert("numberNotValid");case 16:case 17:return a.abrupt("break",18);case 18:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),e.handleFiles=function(a){var t=new FormData;t.append("contratoSocial",a[0]),e.setState({dropDisplay:a[0].name,contratoSocial:t})},e.handleSubmit=Object(W.a)(M.a.mark(function a(){var t,n,r,o,i,l,c,d,m,p,f,g;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state,n=t.socios,r=t.contratoSocial,o={},i=new FormData,Oa.forEach(function(a){e.state.hasOwnProperty([a.field])&&Object.assign(o,Object(u.a)({},a.field,e.state[a.field]))}),o.delegatarioStatus="Ativo",console.log(n,o),Object.entries(o).forEach(function(e){var a=Object(s.a)(e,2),t=a[0];a[1]||(o[t]=null)}),n.forEach(function(e){delete e.edit,Object.entries(e).forEach(function(e){var a=Object(s.a)(e,2),t=a[0];a[1]||(n[t]=null)})}),o=J.a.decamelizeKeys(o),n=J.a.decamelizeKeys(n),a.next=10,Z.a.post("/api/empresaFullCad",{empresa:o,socios:n}).then(function(e){return l=e.data});case 10:if(!r){a.next=34;break}for(i.append("fieldName","contratoSocial"),i.append("empresaId",l),c=!0,d=!1,m=void 0,a.prev=16,p=r.entries()[Symbol.iterator]();!(c=(f=p.next()).done);c=!0)g=f.value,i.append(g[0],g[1]);a.next=24;break;case 20:a.prev=20,a.t0=a.catch(16),d=!0,m=a.t0;case 24:a.prev=24,a.prev=25,c||null==p.return||p.return();case 27:if(a.prev=27,!d){a.next=30;break}throw m;case 30:return a.finish(27);case 31:return a.finish(24);case 32:return a.next=34,Z.a.post("/api/empresaUpload",i).then(function(e){return console.log("file ok.")});case 34:e.toast();case 35:case"end":return a.stop()}},a,null,[[16,20,24,32],[25,,27,31]])})),e.createAlert=function(a){var t,n;if("object"===typeof a)t="Empresa j\xe1 cadastrada",n="A empresa ".concat(a.razaoSocial," j\xe1 est\xe1 cadastrada no sistema com o CNPJ ").concat(a.cnpj,".");else switch(a){case"overShared":t="Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",n="A participa\xe7\xe3o societ\xe1ria informada excede a 100%.";break;case"subShared":t="Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",n="A participa\xe7\xe3o societ\xe1ria informada n\xe3o soma 100%. Favor informar todos os s\xf3cios com suas respectivas participa\xe7\xf5es.";break;case"missingRequiredFields":t="Campos de preenchimento obrigat\xf3rio.",n="Favor preencher todos os campos do formul\xe1rio.";break;case"numberNotValid":t="N\xfamero inv\xe1lido.",n="O n\xfamero n\xe3o pode conter pontos, virgulas ou caracteres especiais."}e.setState({openDialog:!0,dialogTitle:t,message:n})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.showFiles=function(){return e.setState({showFiles:!0})},e.closeFiles=function(){return e.setState({showFiles:!e.state.showFiles})},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.handleEquipa()},e}return Object(H.a)(a,e),Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this;Z.a.get("/api/empresas").then(function(e){return J.a.camelizeKeys(e.data)}).then(function(a){return e.setState({empresas:a})}),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.activeStep,t=e.confirmToast,o=e.toastMsg,i=e.steps,l=e.openDialog,c=e.dialogTitle,s=e.message;return r.a.createElement(n.Fragment,null,r.a.createElement(ct,{links:["Empresas","/empresasHome"],text:"Cadastro de empresas"}),r.a.createElement(Ke,{activeStep:a,steps:i,setActiveStep:this.setActiveStep}),0===a?r.a.createElement(Pa,{data:this.state,handleInput:this.handleInput,handleBlur:this.handleBlur,handleFiles:this.handleFiles}):1===a?r.a.createElement(Ta,{data:this.state,handleInput:this.handleInput,handleBlur:this.handleBlur,addSocio:this.addSocio,removeSocio:this.removeSocio,handleFiles:this.handleFiles,enableEdit:this.enableEdit,handleEdit:this.handleEdit}):r.a.createElement(rt,{data:this.state,showFiles:this.showFiles}),r.a.createElement(Re,{activeStep:a,lastStep:i.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep}),r.a.createElement(oe,{open:t,close:this.toast,msg:o}),r.a.createElement(oa,{open:l,close:this.toggleDialog,title:c,message:s}))}}]),a}(n.Component),dt=Object(c.a)(function(e){return{toolbar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbarTitle:{flex:1},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto"},toolbarLink:{padding:e.spacing(1),flexShrink:0},mainFeaturedPost:{position:"relative",backgroundColor:e.palette.grey[100],color:e.palette.common.white,marginBottom:e.spacing(4),backgroundImage:"/images/empresaBg2.jpg",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},overlay:{position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"rgba(0,0,0,.1)"},mainFeaturedPostContent:Object(u.a)({position:"relative",padding:e.spacing(3)},e.breakpoints.up("md"),{padding:e.spacing(6),paddingRight:0}),mainGrid:{marginTop:e.spacing(3)},card:{display:"flex"},cardDetails:{flex:1},cardMedia:{width:"120px",height:"180px"},markdown:Object(d.a)({},e.typography.body2,{padding:e.spacing(3,0)}),sidebarAboutBox:{padding:e.spacing(2),backgroundColor:e.palette.grey[200]},sidebarSection:{marginTop:e.spacing(3)},footer:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(6,0)}}}),ut=[{title:"Cadastrar",date:"07/Nov",description:"Cadastrar uma nova empresa no sistema.",imageUrl:"/images/addCompany21.png",link:"/empresas"},{title:"S\xf3cios",date:"07/Nov",description:"Gerenciar s\xf3cios e altera\xe7\xf5es de contrato social",link:"/socios",imageUrl:"/images/socios3.png"},{title:"Procuradores",date:"07/Nov",description:"Alterar rela\xe7\xe3o de procuradores e procura\xe7\xf5es",link:"/procuradores",imageUrl:"/images/procuradores31.png"}],mt=function(){var e=dt();return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null),r.a.createElement(I.a,{maxWidth:"lg",style:{minHeight:"83vh",height:"auto",backgroundColor:"#fafafa"}},r.a.createElement("main",null,r.a.createElement(w.a,{className:e.mainFeaturedPost},r.a.createElement("img",{style:{position:"absolute",height:"100%",width:"100%"},src:"/images/empresasBg2.jpg",alt:"background"}),r.a.createElement("div",{className:e.overlay}),r.a.createElement(P.a,{container:!0},r.a.createElement(P.a,{item:!0,md:4},r.a.createElement("div",{className:e.mainFeaturedPostContent},r.a.createElement(g.a,{component:"h1",variant:"h4",gutterBottom:!0},"Empresas"),r.a.createElement(g.a,{variant:"body1",paragraph:!0},"Selecione uma das op\xe7\xf5es abaixo."))))),r.a.createElement(P.a,{container:!0,spacing:4,className:e.cardGrid},ut.map(function(a){return r.a.createElement(P.a,{item:!0,key:a.title,xs:12,md:4},r.a.createElement(l.b,{to:a.link,style:{textDecoration:"none"}},r.a.createElement(F.a,{component:"span"},r.a.createElement(z.a,{className:e.card},r.a.createElement("div",{className:e.cardDetails},r.a.createElement(N.a,null,r.a.createElement(g.a,{component:"h2",variant:"h6"},a.title),r.a.createElement("br",null),r.a.createElement(g.a,{variant:"body2",paragraph:!0},a.description),r.a.createElement(g.a,{variant:"body2",color:"primary"},a.title))),r.a.createElement(D.a,{xsDown:!0},r.a.createElement(A.a,{className:e.cardMedia,component:"img",src:a.imageUrl,title:a.title}))))))})))))},pt=t(47),ft=t(260),gt=t.n(ft),ht=t(261),bt=t.n(ht),vt=t(262),xt=t.n(vt),Et=t(263),St=t.n(Et),yt=[{field:"nomeProcurador",label:"Nome do Procurador",maxLength:90,width:320},{field:"cpfProcurador",label:"CPF",maxLength:11,pattern:"\\d{11}"},{field:"telProcurador",label:"Telefone",type:"tel",maxLength:20,pattern:"((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))"},{field:"emailProcurador",label:"E-mail",type:"email",maxLength:60,pattern:"[a-zA-Z0-9]@([a-zA-Z0-9])?[.]([a-zA-Z0-9])",width:320}],kt=Object(Za.a)(function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000",fontWeight:600,fontSize:14},body:{fontSize:14}}})(Ya.a),wt=Object(Za.a)(function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000"},body:{fontSize:13}}})(Ya.a),Ct=Object(Za.a)(function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}})(Qa.a),jt=Object(c.a)(function(e){return{root:{flexGrow:"1",padding:"1%",textAlign:"center"},title:{marginTop:"2%",fontColor:"#000",fontSize:"0.9rem",backgroundColor:"#B2DCEA",textAlign:"center"},input:{textAlign:"center"},paper:{color:e.palette.text.secondary,margin:e.spacing(2),width:"100%",padding:"2% 0 1% 0",height:"auto"},table:{marginBottom:e.spacing(2),overflowX:"auto"}}});function Ot(e){var a=e.procuracao,t=e.procuradores,n=jt(),o=n.title,i=n.table,l=[];return a.procuradores.forEach(function(e){var a=t.find(function(a){return a.procuradorId===e});l.push(a)}),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:"100%",align:"left"}},r.a.createElement(g.a,{className:o}," Procuradores cadastrados ")),r.a.createElement($a.a,{className:i},r.a.createElement(Xa.a,null,r.a.createElement(Ct,null,yt.map(function(e,a){return r.a.createElement(kt,{key:a},e.label)}))),l.map(function(e,a){return e?r.a.createElement(Ja.a,{key:a},r.a.createElement(Qa.a,null,yt.map(function(a,t){return r.a.createElement(wt,{key:t},e[a.field])}))):null})))}var It={display:"flex",justifyContent:"center",width:"100%",alignContent:"center",flexWrap:"wrap",position:"relative"},Pt={textAlign:"center",alignItems:"flex-start",justify:"space-between",lineHeight:"40px",border:"1px #ccc solid",padding:"0 1%",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px",width:180},zt={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},Nt={verticalAlign:"middle",padding:"0 0% 0 2%"},Ft=Object(c.a)(function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1),minHeight:"80vh",height:"auto",backgroundColor:"#fafafa"},containerList:{display:"flex",flexWrap:"wrap",padding:e.spacing(2),height:"auto"},title:{color:"#000",textAlign:"center",fontSize:"1.1rem"},selector:{width:"380px",fontSize:"0.8rem",margin:"10px 0",textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},paper2:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1),position:"relative"},list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#bbb",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"},addButton:{padding:"5px 10px 5px 8px",height:"40px",margin:"5px",float:"right",fontSize:"0.8rem"},dropBox:{margin:"30px 0 15px 0"},dropBoxItem:{border:"1px solid #ccc",borderRadius:"3%",height:"60px",padding:"10px 15px 0 15px",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#4169E1",backgroundColor:"#fafafa"},dropBoxItem2:{margin:"1% 0",border:"1px solid #ccc",borderRadius:"3%",height:"60px",padding:"0 1% 0 1%",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",color:"black"}}}),At=function(e){var a=e.handleInput,t=e.handleBlur,o=e.data,i=e.addProc,l=e.removeProc,c=e.handleFiles,s=e.getFile,u=e.plusOne,m=e.minusOne,p=o.procDisplay,h=o.razaoSocial,b=o.empresas,v=o.selectedEmpresa,x=o.procsToAdd,E=o.selectedDocs,S=o.procuradores,y=Ft(),k=y.paper,C=y.container,j=y.title,O=y.dropBox,I=y.dropBoxItem,z=y.dropBoxItem2,N=y.addButton,F=y.paper2,A=y.containerList,D=y.selector,B=function(e){var a=o[e.field];return e.pattern&&a?null===a.match(e.pattern):a>e.max||a<e.min},T=function(e){var a=o[e.field];return a>e.max||a<e.min?"Valor inv\xe1lido":a&&null===a.match(e.pattern)?"\u2718":e.pattern&&a&&null!==a.match(e.pattern)?"\u2713":void 0};return r.a.createElement(P.a,{container:!0,direction:"row",className:C,justify:"flex-start"},r.a.createElement(P.a,null,r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(w.a,{className:k},r.a.createElement(P.a,{item:!0,xs:12,style:{marginBottom:"15px"}},r.a.createElement(g.a,{className:j},"  Gerenciar procura\xe7\xf5es"),r.a.createElement(ue.a,{inputProps:{list:"razaoSocial",name:"razaoSocial",style:{fontSize:15,textAlign:"center"}},className:D,value:h,onChange:a,placeholder:"Selecione a empresa"}),r.a.createElement(be,{collection:b,datalist:"razaoSocial",value:h})))),v&&r.a.createElement(w.a,{className:F},r.a.createElement(g.a,{className:j}," Cadastrar nova procura\xe7\xe3o "),r.a.createElement("h4",{style:{fontWeight:400,fontSize:"0.9em"}},' Se a procura\xe7\xe3o abranger mais de um procurador, clique em "+" para adicionar e anexe apenas 1 vez.'),x.map(function(e,i){return r.a.createElement(P.a,{item:!0,xs:12,key:i,style:{float:"left"}},yt.map(function(e,l){return r.a.createElement(n.Fragment,{key:l},r.a.createElement(ue.a,{name:e.field+i,label:e.label,margin:"normal",className:y.textField,onChange:function(e){return a(e)},onBlur:t,type:e.type||"",error:B(e),helperText:T(e),select:e.select||!1,value:o[e.field+i]||"",disabled:e.disabled||!1,InputLabelProps:{className:y.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888"}},inputProps:{style:{background:e.disabled&&o.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#000",width:e.width||150,height:"7px"},value:"".concat(o[e.field+i]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1}),i===x.length-1&&3===l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(bt.a,{onClick:function(){return u()},style:{verticalAlign:"middle",position:"absolute",bottom:"136px",right:i>0?"15px":"35px",color:"#009688",fontSize:30,cursor:"pointer",zIndex:1}}),i>0&&r.a.createElement(xt.a,{onClick:function(){return m()},style:{verticalAlign:"middle",position:"absolute",bottom:"136px",right:"45px",color:"red",fontSize:30,cursor:"pointer",zIndex:1}})))}))}),r.a.createElement(P.a,{container:!0,style:{position:"relative"}},r.a.createElement(P.a,{item:!0,xs:6},r.a.createElement(wa.a,{onDrop:c},function(e){var a=e.getRootProps,t=e.getInputProps;return r.a.createElement(P.a,Object.assign({container:!0,justify:"center",alignItems:"center",className:O,direction:"row"},a()),r.a.createElement("input",t()),p.match("Clique ou")?r.a.createElement(P.a,{item:!0,xs:6,className:I}," ",p," "):r.a.createElement(P.a,{item:!0,xs:6,className:z}," ",r.a.createElement(ja.a,null),"  ",p," ",r.a.createElement("br",null)," (clique ou arraste outro arquivo para alterar)"))})),r.a.createElement(P.a,{item:!0,xs:6,className:O},r.a.createElement(ue.a,{name:"vencimento",label:"Vencimento",margin:"normal",className:y.textField,onChange:function(e){return a(e)},type:"date",helper:"se indeterminado, deixar em branco",value:o.vencimento||"",InputLabelProps:{className:y.textField,shrink:!0,style:{fontSize:"0.8rem",color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:"#fafafa",fontSize:"0.8rem",textAlign:"center",color:"#000",height:"9px"}},variant:"filled"})))),r.a.createElement(P.a,{container:!0,direction:"row",justify:"flex-start",style:{width:"1200px"}},r.a.createElement(P.a,{item:!0,xs:9,style:{width:"1000px"}}),r.a.createElement(P.a,{item:!0,xs:3,style:{align:"right"}},v&&r.a.createElement(f.a,{className:N,size:"small",color:"secondary",variant:"contained",onClick:i},r.a.createElement(de.a,null),"Cadastrar procura\xe7\xe3o"))),v&&E[0]&&r.a.createElement("h2",{style:{margin:"25px 0 0 15px"}},"Procura\xe7\xf5es cadastradas"),v&&!E[0]&&r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(w.a,{className:k},"Nenhum procurador cadastrado para ",v.razaoSocial)),E.length>0&&E.map(function(e,a){return r.a.createElement(P.a,{container:!0,key:.01*a,direction:"row",className:A,justify:"center",alignItems:"flex-start"},r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(w.a,{style:{padding:"10px 15px 20px 15px"}},r.a.createElement("p",{className:j},"Procura\xe7\xe3o ",e.vencimento?"com vencimento em "+((t=e.vencimento)?gt()(t).format("DD-MM-YYYY"):""):"por prazo indeterminado"),r.a.createElement(Ot,{procuradores:S,procuracao:e}),r.a.createElement("div",{style:It},r.a.createElement("span",{style:Pt},r.a.createElement(Ma.a,{style:Nt}),r.a.createElement("span",{style:{verticalAlign:"middle"}}," "," Baixar arquivo"),r.a.createElement(qa.a,{style:zt,onClick:function(){return s(e.procuracaoId)}})),r.a.createElement("span",{style:Object(d.a)({},Pt,{width:90,backgroundColor:"white",border:0,position:"absolute",right:0})},r.a.createElement(St.a,{color:"secondary",style:zt,onClick:function(){return l(e)}}),"Apagar")))));var t})))},Dt={top:"15%",left:"10%",right:"10%",bottom:"15%"},Bt=function(e){function a(){var e;return Object(V.a)(this,a),(e=Object(K.a)(this,Object(U.a)(a).call(this))).state={empresas:[],razaoSocial:"",toastMsg:"Dados atualizados!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,addedSocios:[0],totalShare:0,filteredProc:[],procDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",showFiles:!1,procuradores:[],procsToAdd:[1],procuracoesArray:[],selectedDocs:[]},e.handleInput=function(){var a=Object(W.a)(M.a.mark(function a(t){var n,r,o,i,l,c,s;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.target.name,r=t.target.value,o=Object(pt.a)(e.state.procuracoes),i=[],l=[],c=Object(pt.a)(e.state.procuradores),e.setState(Object(d.a)({},e.state,Object(u.a)({},n,r))),"razaoSocial"!==n||!Array.isArray(c)){a.next=16;break}if((o=o.filter(function(e){return e.razaoSocial===r}))[0]&&o.forEach(function(e){e.procuradores.forEach(function(e){var a=c.find(function(a){return a.procuradorId===e});a&&i.push(a)}),l.push(i),i=[]}),e.setState({procuracoesArray:l,selectedDocs:o}),!(s=e.state.empresas.find(function(e){return e.razaoSocial===r}))){a.next=15;break}return a.next=12,e.setState({razaoSocial:s.razaoSocial,selectedEmpresa:s});case 12:r!==s.razaoSocial&&e.setState({selectedEmpresa:void 0}),a.next=16;break;case 15:e.setState({selectedEmpresa:void 0});case 16:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),e.handleBlur=function(){var e=Object(W.a)(M.a.mark(function e(a){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),e.addProc=Object(W.a)(M.a.mark(function a(){var t,n,r,o,i,l,c,s,d,m,p,f,g,h,b,v,x,E,S,y,k,w;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.state,n=t.selectedEmpresa,r=t.procuradores,o=t.procFiles,i=t.vencimento,l=Object(pt.a)(e.state.procsToAdd),c=Object(pt.a)(e.state.selectedDocs),s=Object(pt.a)(e.state.files),d=[],m={},l.forEach(function(a,t){yt.forEach(function(a){Object.assign(m,Object(u.a)({},a.field,e.state[a.field+t]))});var n=0;Object.values(m).forEach(function(e){e&&(n+=1)}),n>0&&d.push(m),n=0,m={},yt.forEach(function(a){e.setState(Object(u.a)({},a.field+t,""))})}),f=[],g=[],h=new FormData,d.forEach(function(e){(p=r.filter(function(a){return a.cpfProcurador===e.cpfProcurador})).length>0&&p[0].hasOwnProperty("procuradorId")?g.push(p[0].procuradorId):f.push(e)}),!(f.length>0)){a.next=12;break}return f=J.a.decamelizeKeys(f),a.next=10,Z.a.post("/api/cadProcuradores",{procuradores:f,table:"procurador",tablePK:"procurador_id"}).then(function(e){e.data.forEach(function(e){return g.push(e.procurador_id)})});case 10:return a.next=12,Z.a.get("/api/proc").then(function(a){var t=J.a.camelizeKeys(a.data);e.setState({procuradores:t})});case 12:return b={delegatario_id:n.delegatarioId,vencimento:i,status:"vigente",procuradores:g},a.next=15,Z.a.post("/api/cadProcuracao",b).then(function(e){v=e.data[0].procuracao_id});case 15:if(b.procuracaoId=v,!o){a.next=44;break}for(h.append("fieldName","procuracao"),h.append("empresaId",n.delegatarioId),h.append("procuracaoId",v),h.append("procuradores",g.toString()),x=!0,E=!1,S=void 0,a.prev=24,y=o.entries()[Symbol.iterator]();!(x=(k=y.next()).done);x=!0)w=k.value,h.append(w[0],w[1]);a.next=32;break;case 28:a.prev=28,a.t0=a.catch(24),E=!0,S=a.t0;case 32:a.prev=32,a.prev=33,x||null==y.return||y.return();case 35:if(a.prev=35,!E){a.next=38;break}throw S;case 38:return a.finish(35);case 39:return a.finish(32);case 40:return a.next=42,Z.a.post("/api/empresaUpload",h).then(function(e){return console.log("uploaded")});case 42:return a.next=44,Z.a.get("/api/getOneFile?collection=empresaDocs&id=".concat(v)).then(function(e){e.data[0]&&s.push(e.data[0])});case 44:c.reverse(),c.push(b),c.reverse(),e.setState({selectedDocs:c,files:s,procDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",procsToAdd:[1]}),e.toast();case 49:case"end":return a.stop()}},a,null,[[24,28,32,40],[33,,35,39]])})),e.removeProc=function(){var a=Object(W.a)(M.a.mark(function a(t){var n,r,o,i,l;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.state.files,r=t.procuracaoId,o=n.find(function(e){return Number(e.metadata.procuracaoId)===r}),i=Object(pt.a)(e.state.selectedDocs),a.next=4,Z.a.delete("/api/delete?table=procuracao&tablePK=procuracao_id&id=".concat(r)).then(function(e){console.log(e.data)});case 4:o&&o.hasOwnProperty("_id")&&Z.a.get("/api/deleteFile/".concat(o._id)),l=i.indexOf(t),i.splice(l,1),e.setState({selectedDocs:i});case 8:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),e.enableEdit=function(a){var t=Object(pt.a)(e.state.filteredProc);!0===t[a].edit?t[a].edit=!1:(t.forEach(function(e){e.edit=!1}),t[a].edit=!0),e.setState({filteredProc:t})},e.handleEdit=function(a){var t=a.target,n=t.name,r=t.value,o=e.state.filteredProc.filter(function(e){return!0===e.edit})[0],i=e.state.filteredProc.indexOf(o);o[n]=r;var l=Object(pt.a)(e.state.filteredProc);l[i]=o,e.setState({filteredProc:l})},e.handleFiles=function(a){var t=new FormData;t.append("procFile",a[0]),e.setState({procFiles:t,procDisplay:a[0].name})},e.getFile=function(a){var t=e.state.files.find(function(e){return Number(e.metadata.procuracaoId)===a});if(t){var n=t._id,r=t.filename;va(n,r,"empresaDocs")}else e.createAlert("filesNotFound")},e.showFiles=function(a){var t=e.state.files.filter(function(e){return e.metadata.cpfProcurador===a.toString()});t[0]?e.setState({filesCollection:t,showFiles:!0,selectedElement:a}):(console.log("filesNotFound"),e.setState({filesCollection:[]}))},e.plusOne=function(){var a=Object(pt.a)(e.state.procsToAdd);a.push(1),e.setState({procsToAdd:a})},e.minusOne=function(){var a=Object(pt.a)(e.state.procsToAdd);a.pop(),e.setState({procsToAdd:a})},e.createAlert=function(a){var t,n;switch(a){case"filesNotFound":t="Arquivos n\xe3o encontrados",n="N\xe3o h\xe1 nenhum arquivo anexado no sistema para a ".concat("Procura\xe7\xe3o"," selecionada. \n                Ao cadastrar ou atualizar a ").concat("Procura\xe7\xe3o",", certifique-se de anexar o arquivo correspondente.");break;case"fieldsMissing":t="Favor preencher todos os campos.",n="Os campos acima s\xe3o de preenchimento obrigat\xf3rio. Certifique-se de ter preenchido todos eles.";break;case"plateExists":t="Placa j\xe1 cadastrada!",n="A placa informada j\xe1 est\xe1 cadastrada. Para atualizar seguro, alterar dados ou solicitar baixa, utilize as op\xe7\xf5es acima. "}e.setState({openDialog:!0,dialogTitle:t,message:n})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.escFunction=function(a){27===a.keyCode&&e.state.openDialog&&e.toggleDialog()},e}return Object(H.a)(a,e),Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=Z.a.get("/api/empresas"),t=Z.a.get("/api/proc"),n=Z.a.get("/api/procuracoes");Promise.all([a,t,n]).then(function(e){return e.map(function(e){return J.a.camelizeKeys(e.data)})}).then(function(a){var t=Object(s.a)(a,3),n=t[0],r=t[1],o=t[2];e.setState({empresas:n,procuradores:r,procuracoes:o,originalProc:J.a.decamelizeKeys(r)})}),Z.a.get("/api/getFiles/empresa?fieldName=procuracao").then(function(a){return e.setState({files:a.data})}),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.showFiles,t=e.selectedElement,n=e.filesCollection,o=e.openDialog,i=e.dialogTitle,l=e.message;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ct,{links:["Empresas","/empresasHome"],text:"Altera\xe7\xe3o de procuradores"}),r.a.createElement(At,{data:this.state,handleInput:this.handleInput,removeProc:this.removeProc,handleFiles:this.handleFiles,addProc:this.addProc,enableEdit:this.enableEdit,handleEdit:this.handleEdit,handleSubmit:this.handleSubmit,showFiles:this.showFiles,plusOne:this.plusOne,minusOne:this.minusOne,getFile:this.getFile}),a&&r.a.createElement(Sa,{elementId:t,typeId:"procuracao",filesCollection:n,format:Dt,close:this.closeFiles}),r.a.createElement(oe,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}),r.a.createElement(oa,{open:o,close:this.toggleDialog,title:i,message:l}))}}]),a}(n.Component),Tt=t(264),Lt=t.n(Tt),qt=Object(c.a)(function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1)},title:{color:"#000",fontWeight:500,textAlign:"center"},selector:{width:"380px",fontSize:"0.8rem",margin:"10px 0",textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#bbb",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"},addButton:{marginBottom:"1%",padding:"1% 0"},dropBox:{margin:"1% 0"},dropBoxItem:{margin:"12px 0",border:"1px solid #ccc",borderRadius:"3%",height:"50px",padding:"17px",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#4169E1",backgroundColor:"#fafafa"},dropBoxItem2:{margin:"12px 0",border:"1px solid #ccc",borderRadius:"3%",height:"50px",padding:"0 1% 0 1%",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#00000",backgroundColor:"#fafafa"}}});function Rt(e){var a=e.data,t=e.removeSocio,o=e.handleBlur,i=e.handleInput,l=e.addSocio,c=e.handleFiles,s=e.enableEdit,d=e.handleEdit,u=e.handleSubmit,m=a.dropDisplay,p=a.razaoSocial,h=a.empresas,b=a.filteredSocios,v=a.form,x=a.selectedEmpresa,E=qt(),S=E.paper,y=E.container,k=E.title,C=E.iconButton,j=E.dropBox,O=E.dropBoxItem,I=E.dropBoxItem2,z=E.list,N=E.addButton,F=E.selector,A=function(e){var t=a[e.field];return e.pattern&&t?null===t.match(e.pattern):t>e.max||t<e.min},D=function(e){var t=a[e.field];return t>e.max||t<e.min?"Valor inv\xe1lido":t&&null===t.match(e.pattern)?"\u2718":e.pattern&&t&&null!==t.match(e.pattern)?"\u2713":void 0};return r.a.createElement(P.a,{container:!0,direction:"row",className:y,justify:"center"},r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(w.a,{className:S},r.a.createElement(P.a,{item:!0,xs:12,style:{marginBottom:"15px"}},r.a.createElement(g.a,{className:k},"  Altera\xe7\xe3o de quadro societ\xe1rio - Selecione a Via\xe7\xe3o"),r.a.createElement(ue.a,{inputProps:{list:"razaoSocial",name:"razaoSocial",style:{fontSize:15,textAlign:"center"}},className:F,value:p,onChange:i,placeholder:"Selecione a empresa"}),r.a.createElement(be,{collection:h,datalist:"razaoSocial",value:p})))),x[0]&&r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(w.a,{className:S},Da.map(function(e,t){return r.a.createElement(n.Fragment,{key:t},r.a.createElement(ue.a,{name:e.field,label:e.label,margin:"normal",className:E.textField,onChange:i,onBlur:o,type:e.type||"",error:A(e),helperText:D(e),select:e.select||!1,value:a[e.field]||"",disabled:e.disabled,InputLabelProps:{className:E.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:e.disabled&&a.disable?"#fff":"#fafafa",height:"7px"},value:"".concat(a[e.field]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1}))}),r.a.createElement(f.a,{color:"primary",className:N,onClick:l},r.a.createElement(de.a,null)," Adicionar s\xf3cio"))),x[0]&&0===b.length&&r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(w.a,{className:S},"Nenhum s\xf3cio cadastrado para ",x[0].razaoSocial)),b.length>0&&x&&r.a.createElement(P.a,{container:!0,direction:"row",className:y,justify:"center",alignItems:"center"},r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(w.a,{className:S},r.a.createElement("p",{className:k},"S\xf3cios cadastrados"),b.map(function(e,a){return r.a.createElement(P.a,{key:a},v.map(function(a,t){return r.a.createElement(n.Fragment,{key:t+1e3},r.a.createElement(ue.a,{value:e[a.field]||"",name:a.field,label:a.label,className:z,disabled:"cpfSocio"===a.field||!e.edit,onChange:d,InputLabelProps:{shrink:!0,style:{fontWeight:600}},inputProps:{style:{fontSize:"0.8rem"}}}))}),r.a.createElement(f.a,{component:"span",className:C,title:"editar",onClick:function(){return s(a)}},r.a.createElement(Na.a,null)),r.a.createElement(f.a,{className:C,color:"secondary",title:"Remover",onClick:function(){return t(a)}},r.a.createElement(Aa.a,null)))})),r.a.createElement(wa.a,{onDrop:c},function(e){var a=e.getRootProps,t=e.getInputProps;return r.a.createElement(P.a,Object.assign({container:!0,justify:"center",alignItems:"center",className:j,direction:"row"},a()),r.a.createElement("input",t()),m.match("Clique ou")?r.a.createElement(P.a,{item:!0,xs:6,className:O}," ",m," "):r.a.createElement(P.a,{item:!0,xs:6,className:I}," ",r.a.createElement(ja.a,null),"  ",m," ",r.a.createElement("br",null)," (clique ou arraste outro arquivo para alterar)"))}),r.a.createElement(P.a,{container:!0,direction:"row",justify:"flex-end",style:{width:"1200px"}},r.a.createElement(P.a,{item:!0,xs:10,style:{width:"1000px"}}),r.a.createElement(P.a,{item:!0,xs:1,style:{align:"right"}},r.a.createElement(f.a,{size:"small",color:"primary",variant:"contained",style:{margin:"0px 0 10px 0"},onClick:function(){return u()}},"Salvar ",r.a.createElement("span",null,"\xa0\xa0 ")," ",r.a.createElement(Lt.a,null)))))))}var Mt=function(e){function a(){var e,t;Object(V.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(K.a)(this,(e=Object(U.a)(a)).call.apply(e,[this].concat(r)))).state={empresas:[],razaoSocial:"",toastMsg:"Dados atualizados!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,dialogTitle:"",addedSocios:[0],totalShare:0,filteredSocios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",showFiles:!1,selectedEmpresa:[]},t.handleInput=function(){var e=Object(W.a)(M.a.mark(function e(a){var n,r,o,i,l;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.target.name,r=a.target.value,o=t.state.socios,t.setState(Object(d.a)({},t.state,Object(u.a)({},n,r))),"razaoSocial"!==n){e.next=14;break}if(i=o.filter(function(e){return e.razaoSocial===r}),l=t.state.empresas.filter(function(e){return e.razaoSocial===r}),i.length>0?t.setState({filteredSocios:i,selectedEmpresa:l}):t.setState({filteredSocios:[]}),!(l.length>0)){e.next=13;break}return e.next=10,t.setState({razaoSocial:l[0].razaoSocial,selectedEmpresa:l});case 10:r!==l[0].razaoSocial&&t.setState({selectedEmpresa:[]}),e.next=14;break;case 13:t.setState({selectedEmpresa:[]});case 14:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.handleBlur=function(){var e=Object(W.a)(M.a.mark(function e(a){var n,r,o,i;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state.filteredSocios,r=a.target.name,o=a.target.value,e.t0=r,e.next="cpfSocio"===e.t0?6:"share"===e.t0?9:22;break;case 6:return n.find(function(e){return e.cpfSocio===o})&&(t.createAlert("alreadyExists"),t.setState({cpfSocio:""})),e.abrupt("break",23);case 9:if(!o){e.next=21;break}if("0"===(o=o.replace(",","."))||"00"===o||Number(o)){e.next=18;break}return e.next=14,t.setState({share:""});case 14:console.log(o),t.createAlert("numberNotValid"),e.next=21;break;case 18:i=n.map(function(e){return Number(e.share)}).reduce(function(e,a){return e+a}),i+=Number(o),t.setState({totalShare:i,share:o});case 21:case 22:return e.abrupt("break",23);case 23:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.addSocio=Object(W.a)(M.a.mark(function e(){var a,n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.filteredSocios,n={},Da.forEach(function(e){Object.assign(n,Object(u.a)({},e.field,t.state[e.field]))}),a.push(n),e.next=5,t.setState({filteredSocios:a});case 5:Da.forEach(function(e){t.setState(Object(u.a)({},e.field,""))}),document.getElementsByName("nomeSocio")[0].focus();case 7:case"end":return e.stop()}},e)})),t.removeSocio=function(){var e=Object(W.a)(M.a.mark(function e(a){var n,r,o,i;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(pt.a)(t.state.filteredSocios),r=Object(pt.a)(t.state.socios),o=n[a].socioId,i=J.a.camelizeKeys(t.state.originalSocios),!i.find(function(e){return e.socioId===o})){e.next=5;break}return e.next=5,Z.a.delete("/api/delete?table=socios&tablePK=socio_id&id=".concat(o)).catch(function(e){return console.log(e)});case 5:r=r.filter(function(e){return e!==n[a]}),n.splice(a,1),t.setState({filteredSocios:n,socios:r});case 8:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.enableEdit=function(e){var a=t.state.filteredSocios;!0===a[e].edit?a[e].edit=!1:(a.forEach(function(e){return e.edit=!1}),a[e].edit=!0),t.setState({filteredSocios:a})},t.handleEdit=function(e){var a=e.target.name,n=t.state.socios,r=e.target.value;"share"===a&&(r=r.replace(",","."));var o=t.state.filteredSocios.filter(function(e){return!0===e.edit})[0],i=t.state.filteredSocios.indexOf(o);o[a]=r;var l=t.state.filteredSocios;l[i]=o,t.setState({socios:n,filteredSocios:l})},t.handleSubmit=Object(W.a)(M.a.mark(function e(){var a,n,r,o,i,l,c,s,d,m,p,f,g,h,b,v,x,E,S,y;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.state,n=a.selectedEmpresa,r=a.socios,o=a.contratoSocial,i=t.state.filteredSocios,l=[],c=[],s=new FormData,(d=Da.map(function(e){return J.a.decamelize(e.field)})).splice(1,1),i.forEach(function(e){var a=e,t=(a.razaoSocial,a.createdAt,a.edit,Object(q.a)(a,["razaoSocial","createdAt","edit"]));if((e=t).delegatarioId=n[0].delegatarioId,e.hasOwnProperty("socioId"))l.push(e),delete l.socioId;else{var o=r.find(function(a){return a.cpfSocio===e.cpfSocio});o?(e.socioId=o.socioId,l.push(e)):c.push(e)}}),m="socios",p="socio_id",f=[],g={},h=J.a.camelizeKeys(t.state.originalSocios),l.forEach(function(e){h.forEach(function(a){e.socioId===a.socioId&&(Object.keys(e).forEach(function(t){e[t]===a[t]&&"socioId"!==t||Object.assign(g,Object(u.a)({},t,e[t]))}),Object.keys(g).length>1&&f.push(g),g={})})}),l=J.a.decamelizeKeys(f),c=J.a.decamelizeKeys(c),e.prev=10,!(l.length>0)){e.next=14;break}return e.next=14,Z.a.put("/api/editSocios",{requestArray:l,table:m,tablePK:p,keys:d}).then(function(e){return console.log(e.data)});case 14:if(!(c.length>0)){e.next=17;break}return e.next=17,Z.a.post("/api/cadSocios",{socios:c,table:m,tablePK:p}).then(function(e){Z.a.get("/api/socios").then(function(e){return J.a.camelizeKeys(e.data)}).then(function(e){var a=e.filter(function(e){return e.razaoSocial===n[0].razaoSocial});a.length>0&&t.setState({filteredSocios:a,socios:e})}),console.log(e.data)});case 17:if(!o){e.next=40;break}for(s.append("empresaId",n[0].delegatarioId),b=!0,v=!1,x=void 0,e.prev=22,E=o.entries()[Symbol.iterator]();!(b=(S=E.next()).done);b=!0)y=S.value,s.append(y[0],y[1]);e.next=30;break;case 26:e.prev=26,e.t0=e.catch(22),v=!0,x=e.t0;case 30:e.prev=30,e.prev=31,b||null==E.return||E.return();case 33:if(e.prev=33,!v){e.next=36;break}throw x;case 36:return e.finish(33);case 37:return e.finish(30);case 38:return e.next=40,Z.a.post("/api/empresaUpload",s).then(function(e){return console.log(e.data)});case 40:e.next=45;break;case 42:e.prev=42,e.t1=e.catch(10),console.log(e.t1);case 45:t.toast();case 46:case"end":return e.stop()}},e,null,[[10,42],[22,26,30,38],[31,,33,37]])})),t.handleFiles=function(e){var a=new FormData;a.append("contratoSocial",e[0]),t.setState({dropDisplay:e[0].name,contratoSocial:a})},t.createAlert=function(e){var a,n;switch(e){case"alreadyExists":a="CPF j\xe1 cadastrado.",n="O CPF informado corresponde a um s\xf3cio j\xe1 cadastrado. \n                Para remover ou editar as informa\xe7\xf5es dos s\xf3cios, utilize a respectiva op\xe7\xe3o abaixo.";break;case"numberNotValid":a="N\xfamero inv\xe1lido.",n="O n\xfamero digitado n\xe3o \xe9 v\xe1lido.";break;case"overShared":a="Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",n="A participa\xe7\xe3o societ\xe1ria informada excede a 100%.";break;case"subShared":a="Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",n="A participa\xe7\xe3o societ\xe1ria informada n\xe3o soma 100%. Favor informar todos os s\xf3cios com suas respectivas participa\xe7\xf5es."}t.setState({openDialog:!0,dialogTitle:a,message:n})},t.toggleDialog=function(){return t.setState({openDialog:!t.state.openDialog})},t.toast=function(){return t.setState({confirmToast:!t.state.confirmToast})},t}return Object(H.a)(a,e),Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=Z.a.get("/api/empresas"),t=Z.a.get("/api/socios");Promise.all([a,t]).then(function(e){return e.map(function(e){return J.a.camelizeKeys(e.data)})}).then(function(a){var t=Object(s.a)(a,2),n=t[0],r=t[1];e.setState({empresas:n,socios:r,form:Da,originalSocios:J.a.decamelizeKeys(r)})})}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.openDialog,t=e.dialogTitle,n=e.message;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ct,{links:["Empresas","/empresasHome"],text:"Altera\xe7\xe3o do quadro societ\xe1rio"}),r.a.createElement(Rt,{data:this.state,handleInput:this.handleInput,handleBlur:this.handleBlur,removeSocio:this.removeSocio,handleFiles:this.handleFiles,addSocio:this.addSocio,enableEdit:this.enableEdit,handleEdit:this.handleEdit,handleSubmit:this.handleSubmit}),r.a.createElement(oe,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}),r.a.createElement(oa,{open:a,close:this.toggleDialog,title:t,message:n}))}}]),a}(n.Component),Wt=t(87);function Vt(){return r.a.createElement("div",{style:{height:"60vh",width:"100%",margin:"15% 35%"}},r.a.createElement("img",{src:"/images/underConstruction.png",alt:"P\xe1gina em constru\xe7\xe3o"}))}var _t=function(e){return r.a.createElement(Wt.c,null,r.a.createElement(Wt.a,{exact:!0,path:"/",component:L}),r.a.createElement(Wt.a,{path:"/certidoes",component:Vt}),r.a.createElement(Wt.a,{path:"/veiculos",component:ia}),r.a.createElement(Wt.a,{path:"/consultas",component:ka}),r.a.createElement(Wt.a,{path:"/empresas",component:st}),r.a.createElement(Wt.a,{path:"/empresasHome",component:mt}),r.a.createElement(Wt.a,{path:"/socios",component:Mt}),r.a.createElement(Wt.a,{path:"/procuradores",component:Bt}),r.a.createElement(Wt.a,{path:"/faleConosco",component:Vt}))};var Kt=function(){var e=Object(c.a)(function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})().root;return r.a.createElement("div",{className:e},r.a.createElement(I.a,{maxWidth:"lg"},r.a.createElement(l.a,null,r.a.createElement(y,null),r.a.createElement(_t,null)),r.a.createElement(k,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Kt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[279,1,2]]]);