{"version":3,"sources":["Store/dataReducer.js","Store/userReducer.js","rootReducer.js","Utils/idsToString.js","Store/dataActions.js","Layouts/Loading.jsx","Forms/configVehicleForm.js","Reusable Components/ReactToast.jsx","Utils/documentCookies.js","Store/userActions.js","Store/StoreHOC.jsx","HomeTemplate.jsx","Veiculos/VeiculosHome.jsx","Utils/setDemand.js","Utils/handleFiles.js","Utils/checkInputErrors.js","Solicitacoes/logRoutesConfig.js","Utils/logGenerator.js","Utils/autoComplete.jsx","Reusable Components/SelectEmpresa.jsx","Reusable Components/TextInput.jsx","Reusable Components/FormSubtiltle.jsx","Forms/vistoriaForm.js","Forms/cadVehicleForm.js","Reusable Components/ClosePopUpButton.jsx","Veiculos/AddEquipa.jsx","Veiculos/CadVeiculoTemplate.jsx","Reusable Components/RemoveFileButton.jsx","Reusable Components/DragAndDrop.jsx","Forms/cadVehicleFiles.js","Forms/altDadosFiles.js","Veiculos/VehicleDocs.jsx","Utils/downloadFile.js","Reusable Components/ShowLocalFiles.jsx","Reusable Components/StandardTable.jsx","Veiculos/VehicleReview.jsx","Reusable Components/Crumbs.jsx","Reusable Components/StepperButtons.jsx","Reusable Components/Stepper.jsx","Utils/formatValues.js","Reusable Components/AlertDialog.jsx","Utils/validaDistanciaMinima.js","Forms/dischargedForm.js","Veiculos/CadVeiculo.jsx","Utils/checkDemand.js","Forms/altForm.js","Forms/altFormVistoria.js","Veiculos/AltDadosTemplate.jsx","Reusable Components/FormDialog.jsx","Veiculos/AltDados.jsx","Forms/seguroForm.js","Forms/empresaFiles.js","Veiculos/SegurosTemplate.jsx","Veiculos/ShowAllPlates.jsx","Veiculos/ConfigAddDialog.jsx","Utils/setEmpresaDemand.js","Veiculos/Seguros.jsx","Reusable Components/ConfirmDialog.jsx","Forms/laudoForm.js","Reusable Components/Placa.jsx","Reusable Components/CustomTable.jsx","Reusable Components/OnClickMenu.jsx","Veiculos/LaudosTemplate.jsx","Forms/commonFields.js","Utils/cnpjValidator.js","Utils/cpfValidator.js","Forms/joinForms.js","Forms/cadForm.js","Forms/empresasForm.js","Forms/sociosForm.js","Forms/procuradorForm.js","Utils/createFormPattern.js","Forms/procuradorEmpresaTable.js","Forms/altContratoTable.js","Reusable Components/ShowDetails.jsx","Forms/laudosTable.js","Veiculos/Laudos.jsx","Store/ReactContext.jsx","Veiculos/BaixaMotivo.jsx","Veiculos/BaixaOptions.jsx","Reusable Components/CustomButton.jsx","Veiculos/BaixaGerenciar.jsx","Forms/baixaForm.js","Veiculos/BaixaTemplate.jsx","Veiculos/BaixaVeiculo.jsx","Veiculos/ConfigTemplate.jsx","Veiculos/Config.jsx","Consultas/tables.js","Consultas/exportToXlsx.js","Consultas/ConsultasTemplate.jsx","Layouts/Header.jsx","Layouts/Footer.jsx","Layouts/TabMenu.jsx","Forms/certificate.js","Veiculos/CertificateHeader.jsx","Veiculos/CertificateTemplate.jsx","Veiculos/Certificate.jsx","Utils/formatFileSize.js","Reusable Components/ShowFiles.jsx","Consultas/ConsultasContainer.jsx","Empresas/EmpresasTemplate.jsx","Forms/dadosSociosForm.js","Empresas/SociosTemplate.jsx","Empresas/EmpresaCadReview.jsx","Utils/valueParser.js","Empresas/EmpresasContainer.jsx","Empresas/EmpresasHome.jsx","Empresas/Procurador.jsx","Empresas/ProcuradoresTemplate.jsx","Empresas/Procuradores.jsx","Empresas/Socios.jsx","Relatorios/chartsConfig.js","Relatorios/RelatoriosTemplate.jsx","Relatorios/Relatorios.jsx","Reusable Components/Table.jsx","Forms/solicitacaoTable.js","Solicitacoes/SolHistory.jsx","Solicitacoes/SolicitacoesTemplate.jsx","Forms/solicitacoesTable.js","Solicitacoes/SolicitacoesTable.jsx","Solicitacoes/Solicitacoes.jsx","Forms/altContratoForm.js","Empresas/EmpresaReview.jsx","Empresas/AltSociosTemplate.jsx","Empresas/AltContratoTemplate.jsx","Empresas/AltContrato.jsx","Parametros/SimpleParams.jsx","Parametros/ParametrosTemplate.jsx","Forms/parametrosForm.js","Parametros/Parametros.jsx","Auth/UserAuthTemplate.jsx","Auth/userAuthForms.js","Auth/UserAuth.jsx","Routes.jsx","Authentication.jsx","App.jsx","serviceWorker.js","index.js"],"names":["dataReducer","state","action","type","payload","collection","data","update","forEach","el","match","push","unshift","id","map","v","toString","apolice","placaIndex","vehicleIndex","seguros","seguro","find","s","index","findIndex","placas","splice","veiculos","tablePK","updatedData","Number","element","setColor","loading","userReducer","user","appReducer","combineReducers","rootReducer","idsToString","equipamentos","acessibilidade","equipNames","accessNames","equipamentosId","acessibilidadeId","eqId","item","result","setNamesFromIds","ids","namesArray","elementId","getData","collectionsArray","dispatch","getState","a","promiseArray","globalState","length","collectionName","axios","get","Promise","all","then","res","r","humps","camelizeKeys","responseArray","i","key","replace","camelize","Object","assign","every","p","hasOwnProperty","insertData","dataFromServer","seguradoras","console","log","eqNames","acNames","acId","seguradora","sg","seguradoraId","plates","vehicles","updatedCollection","dataEmissao","vencimento","placa","veiculoId","collectionPayload","batch","updateData","updateDocs","metadata","primarykey","stateCollection","selectedDocs","filter","doc","some","meta","updateCollection","deleteOne","Loading","className","src","alt","height","width","configVehicleForm","field","label","name","table","useStyles1","makeStyles","theme","success","backgroundColor","green","error","palette","dark","info","primary","main","warning","amber","message","display","alignItems","MySnackbarContentWrapper","props","classes","variant","onClose","other","SnackbarContent","clsx","aria-describedby","Icon","CustomizedSnackbars","Snackbar","anchorOrigin","vertical","horizontal","open","autoHideDuration","close","status","msg","setCookie","cname","cvalue","d","Date","setTime","getTime","toUTCString","document","cookie","deleteCookie","getCookie","ca","split","c","charAt","substring","indexOf","socket","logUser","logUserOut","fetch","method","credentials","catch","err","socketIO","require","requestArray","WrappedComponent","collections","includes","req","With","confirmToast","getUser","Axios","request","toast","setState","redux","this","colName","on","insertedObjects","updatedObjects","primaryKey","object","off","col","setTimeout","React","Component","connect","bindActionCreators","featuredPosts","title","date","description","link","imageUrl","namesToRender","nomeSistema","siglaSistema","StoreHOC","nomes","parametros","sistema","Fragment","style","minHeight","to","textDecoration","fontWeight","menuCards","VeiculosHome","url","setDemand","demand","alteracoes","compartilhado","empresas","vehicleDocs","history","vehicle","originalVehicle","JSON","parse","stringify","selectedEmpresa","e","razaoSocial","empresa","delegatario","selectedVehicle","Array","isArray","reverse","keys","codigoEmpresa","compartilhadoId","allDemandFiles","fileIds","latestDocs","filesPerFieldName","files","array","fieldExists","file","fieldName","lastDoc","reduce","b","uploadDate","demandFiles","getUpdatedValues","originalObj","newObj","sort","sizeExceedsLimit","size","alert","handleFiles","filesFormTemplate","formData","FormData","obj","set","form","postFilesReturnIds","completed","filesEndPoint","filesToSend","tempFile","append","pair","post","filesArray","filesIds","f","updateFilesMetadata","filesCollection","put","removeFile","existingFiles","has","delete","returnObj","fileToRemove","undefined","from","k","checkInputErrors","sendState","dontSetDate","querySelectorAll","inputs","errors","errString","textContent","l","parentNode","moment","value","isValid","previousSibling","slice","openAlertDialog","alertType","customMsg","errorHandler","minLength","max","min","pattern","helper","docs","logRoutesConfig","subject","path","requestAction","responseAction","concludedAction","logGenerator","window","location","pathname","userName","store","logRoutes","historyLength","commonFields","createdAt","logConfig","empresaId","declined","approved","filteredLog","autoComplete","datalist","SelectEmpresa","useState","enableSelect","setEnabled","handleInput","handleBlur","shared","headerTitle","delegatarioCompartilhado","activeStep","list","headerTitles","useEffect","selectInput","getElementsByName","focus","marginBottom","margin","textAlign","onChange","onBlur","useStyles","textField","marginLeft","spacing","marginRight","marginTop","fontSize","fontColor","select","background","helperText","TextInput","selectOptions","disableAll","disableSome","TextField","FormHelperTextProps","disabled","InputLabelProps","shrink","color","fontFamily","inputProps","disable","maxLength","multiline","rows","fullWidth","SelectProps","opt","MenuItem","options","FormSubtiltle","subtitle","vistoriaForm","step","cadVehicleForm","getFullYear","zero","concat","ClosePopUpButton","position","top","right","cursor","onClick","AddEquipa","handleCheck","localeCompare","left","eq","FormControlLabel","control","Checkbox","checked","button","handleEquipa","closeEquipa","resetShared","setShared","modelosChassi","carrocerias","addEquipa","reactivated","eqCollection","conditionalSubtitle","paddingBottom","Button","RemoveFileButton","DragAndDrop","dropDisplay","single","fileName","setFileName","fileExists","setFileExistance","filename","entries","demandFile","onDrop","getRootProps","getInputProps","cadVehicleFiles","altDadosFiles","root","flexGrow","padding","sendButton","float","text","VehicleDocs","filesForm","parentComponent","insuranceExists","Grid","container","xs","md","downloadFile","originalName","responseType","response","URL","createObjectURL","Blob","createElement","href","setAttribute","body","appendChild","click","divContainer","justifyContent","alignContent","flexWrap","divFiles","border","borderRadius","icon","verticalAlign","paddingLeft","fileIcon","ShowLocalFiles","fileArray","storage","createLink","StandardTable","labels","fields","values","alteredElements","colSpan","j","ISO_8601","format","paper","secondary","Revisao","ultimateData","vehicleDetails","newForm","filledForm","Paper","y","Crumbs","links","numero","Breadcrumbs","separator","aria-label","backButton","StepperButtons","role","setActiveStep","lastStep","handleSubmit","uniqueStep","declineButtonLabel","setShowPendencias","showPendencias","nextShortcut","keyCode","ctrlKey","addEventListener","removeEventListener","flexDirection","CustomStepper","steps","Stepper","labelProps","Step","StepLabel","formatDate","test","getDate","getMonth","getHours","getMinutes","formatMoney","toFixed","AlertDialog","confirm","customTitle","customMessage","tab","createAlert","Dialog","aria-labelledby","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","validaDistanciaMinima","utilizacao","dist","distancias","validDistance","dischargedForm","frota","toastMsg","prevActiveStep","target","toLocaleUpperCase","checkValid","stateId","dbName","dbId","alertLabel","toLowerCase","nombre","distanciaPoltronas","idadeBaixa","idadeMaxCad","difIdade","idadeBaixaAut","anoCarroceria","anoChassi","distanciaMinima","situacao","carr","chas","currentYear","maxYear","errorMsg","validateDist","x","checkPlateConflict","checkExistance","placaMatch","vehicleFound","reactivatedVehicle","vEquip","currentEquipa","ve","arrayOfEquips","stateKey","handleCadastro","pesoDianteiro","pesoTraseiro","poltronas","modeloChassiId","modeloCarroceriaId","existingVeiculoId","oldHistoryLength","pbt","isNaN","review","modeloChassi","modeloCarroceria","vReview","decamelizeKeys","requestObject","resetState","newState","resetFiles","resetEquip","toggleDialog","escFunction","demandState","allEqs","allAcs","CadVeiculoTemplate","PureComponent","checkDemand","logsCollection","component","exists","altForm","altPlacaOption","showAltPlaca","header","inputNames","inputLabels","fileInputName","inputName","stepTitles","altPlaca","newPlate","reset","toUpperCase","getId","capitalize","logs","dominio","resetEquips","freeze","ce","updatePlate","tempObj","camelizedRequest","closeAlert","resetAll","AltDadosTemplate","seguroForm","empresaFiles","minWidth","SegurosTemplate","enableAddPlaca","addPlate","removeFromInsurance","enableChangeApolice","showAllPlates","addedPlaca","allVehicles","insurance","apoliceDoc","renderedPlacas","paddingTop","outsider","irregular","delCompartilhado","owner","onMouseOver","getOwner","Chip","onDelete","ShowAllPlates","items","selectAll","selectAllPlates","htmlFor","ConfigAddDialog","helperMessage","marca","marcas","selectMarca","newElement","addNewElement","setEmpresaDemand","socios","associateKeys","lastUpdate","latestDoc","empresaDocs","newMembers","oldMembers","latestDocId","om","filteredSocios","deletedVehicles","filterInsurances","filteredInsurances","allPlates","ownedPlacas","inputValue","se","renderPlacas","veiculo","newInsurance","clearFields","selectedSeguradora","checkFields","valid","seg","allPlatesObj","insuredPlates","plate","updatedState","placaInput","allSelected","check","updateInsurance","updates","emissaoDidChange","isSame","vencimentoDidChange","seguradoraDidChange","data_emissao","seguradora_id","requestObj","columns","vehicleIds","cadSeguro","codigo_empresa","emis","venc","validEmissao","validVenc","invalido","isSameOrBefore","vencido","isBefore","pendente","isAfter","vigente","confirmAndResetState","approveInsurance","column","de","vExists","dontUpdateProps","confirmMessage","openAddDialog","filteredState","insuranceVehicles","ConfirmDialog","laudoForm","Placa","city","docsCollection","idIndex","filePK","deleteIconProperties","deleteFunction","tableHeaders","arrayOfRows","fileId","getFile","StyledMenu","withStyles","Menu","elevation","getContentAnchorEl","transformOrigin","OnClickMenu","anchorEl","handleClose","menuOptions","keepMounted","Boolean","memo","filteredVehicles","stateInputs","laudoDoc","functions","clickOnPlate","showDetails","closeMenu","clear","deleteLaudo","renderColor","laudos","validade","toDate","cidade","overflow","cnpj","cnpjString","tamanho","numeros","digitos","soma","pos","cnpjValidator","cpf","cpfString","strCPF","Soma","Resto","parseInt","cpfValidator","input","phone","email","eForm","sForm","segForm","vForm","cadForm","empresasForm","sociosForm","procuradorForm","dataToReturn","tableData","formPattern","setForm","vData","laudoId","vencimentoContrato","jForm","updatedObj","updatedForm","joinForm","jf","mergeForms","consolidateForm","procuradorEmpresaTable","altContratoTable","ShowDetails","procuracoes","procuradores","altContrato","setTable","table2","setTable2","tables","setTables","createFormPattern","obs","rowObj","selectedProcs","row","selectedFiles","pr","procuradorId","tableRow","procuracaoId","proc","procTable","fieldObj","t","o","mainTitle","setAltContrato","additionalInfo","altDocs","numeroRegistro","tableArray","defaultValue","cols","laudosTable","deleteFile","empresasLaudo","initState","empresaLaudo","empresaInput","setEmpresa","oldVehicles","setOldVehicles","setFilteredVehicles","details","setDetails","selectVehicle","setAnchorEl","setDropDisplay","setLaudoDoc","changeInputs","setToast","setToastMsg","setTableData","setDemandFiles","setFileToRemove","alertDialog","setAlertDialog","confirmDialogProps","setConfirmDialog","fullDemand","dFiles","vehiclesLaudo","laudosTemp","dateA","updatedVehicle","insertLaudos","useCallback","filtered","event","persist","currentTarget","vehicleLaudos","laudoDocs","laudosArray","tempArray","requestElement","laudoAlreadyExists","clearForm","errorLabel","toggleToast","empresa_id","veiculo_id","requestBody","closeConfirmDialog","allFields","querySelector","ReactContext","createContext","BaixaOptions","motivosBaixa","selectMotivo","selectedMotivo","placeholder","selectOption","delegaTransf","justificativa","pendencias","FormControl","RadioGroup","Radio","CustomButton","BaixaGerenciar","searchDischarged","downloadXls","reactivateVehicle","placaBaixada","dischargedFound","notFound","reactivate","selectedOption","df","onSubmit","InputProps","baixaForm","motivo","BaixaVeiculo","openDialog","delegaTransfId","disableSubmit","demandExists","dataRegistro","discharged","toLocaleDateString","preventDefault","query","found","year","reqBody","patch","onDownloadProgress","progressEvent","Math","round","loaded","content","headers","BaixaTemplate","contextType","ConfigTemplate","staticData","selectCollection","handleChange","enableEdit","confirmDelete","edit","autoCorrect","spellCheck","addCounter","count","ac","marcaChassi","marcaCarroceria","editIndex","inputTarget","divCell","divWrap","childNodes","selectedObj","originalObject","noChanges","leftOpen","oldIndex","call","marcaCollection","m","marcaId","changedElement","newData","elementName","removeItem","originalData","decamelize","editedElements","prevProps","vehicleTable","render","rowData","timeUnit","segurosTable","filtering","exportToXlsx","rawData","formatedData","formField","formatValue","formatData","wb","Sheets","XLSX","json_to_sheet","SheetNames","excelBuffer","bookType","FileSaver","showFiles","showCertificate","del","exportButton","exportFileName","exportCsv","actionsColumnIndex","searchFieldStyle","headerStyle","emptyRowsWhenPaging","pageSize","rowStyle","localization","actions","emptyDataSourceMessage","editRow","deleteText","deleteTooltip","filterRow","filterTooltip","toolbar","searchTooltip","searchPlaceholder","exportName","exportAriaLabel","exportTitle","pagination","labelRowsSelect","labelDisplayedRows","firstTooltip","previousTooltip","nextTooltip","lastTooltip","iconProps","tooltip","hidden","editable","onRowDelete","oldData","toolbarTitle","flex","toolbarSecondary","overflowX","toolbarLink","flexShrink","sections","StyledBadge","badge","Badge","withRouter","localStorage","getItem","setSelected","logCounter","setLogCounter","selected","bgColor","borderB","borderT","fontW","nomeSecretaria","siglaSecretaria","secretaria","logout","CssBaseline","Toolbar","Typography","align","noWrap","Link","RouterLink","borderBottom","borderTop","badgeContent","Footer","changeTab","Tabs","indicatorColor","textColor","centered","Tab","caracteristicas","pesagem","informacoesGerais","CertificateHeader","subsecretaria","superintendencia","paddingRight","CertificateTemplate","checkMulti","redirect","carac","delega","peso","ultimateForm","line","print","PdfCertificate","setVehicle","names","setNames","setData","origin","formatFileSize","bytes","divRow","grid","justifyItems","ShowFiles","typeId","fileLabels","download","emp","numeroAlteracao","getLabel","ConsultasContainer","tablePKs","dbTables","detailsTitle","detailsHeader","elementDetails","primaryKeys","pk","updatedElement","closeFiles","socio","socioId","sociosArray","filesToReturn","procId","selectedElement","deleteHandler","itemId","seguroVencido","contratoVencido","hasLaudo","setItem","closeCertificate","certified","TabMenu","ConsultasTemplate","contratoSocial","iconButton","addSocio","handleEdit","removeSocio","contratoSocialForm","standAlone","EmpresaCadReview","empresaDetails","tableLayout","valueParser","tecla","tam","vr","substr","formatCnpj","formatCpf","formatPhone","number","formatShare","fileNames","addedSocios","totalShare","parsedValue","sObject","invalid","share","pop","editSocio","fs","socioIds","submitFile","contratoFile","globalRemoveFile","resetEmpresa","resetSocios","EmpresasTemplate","SociosTemplate","StyledTableCell","head","TableCell","StyledCell","StyledTableRow","default","TableRow","Procurador","procuracao","procArray","pro","Table","TableHead","TableBody","justify","lineHeight","addButton","addProc","removeProc","plusOne","minusOne","checkExpires","procsToAdd","expires","bottom","zIndex","z","filteredProc","procuracoesArray","cpfProcurador","cpfExists","nProc","addedProcs","n","addedProc","gotId","approveProc","procIdArray","procurador_id","cadRequest","procs","novaProcuracao","procuracao_id","selectedFile","resetedFields","originalProcuradores","op","ProcuradoresTemplate","dialogTitle","originalSocios","originals","cpfSocio","allShares","originalStatus","rest","realChanges","altObj","deleted","shareUpdate","socioIdsArray","newSocio","socio_id","member","prevState","decamSocios","barChart","offsetX","offsetY","floating","legend","show","chart","xaxis","dataLabels","enabled","plotOptions","bar","donutChart","pie","donut","formatter","val","total","showAlways","responsive","breakpoint","RelatoriosTemplate","selectedVehicles","tableLabels","mediaIdades","moda","segurosVencidos","segurosVigentes","veiculosNovos","categories","series","colors","tableValues","sum","newArray","shift","countExpired","selectedId","setRazaoSocial","allExpired","setExpired","allValid","setValid","idades","ano","counter","unsortedLabels","arr","ultimateObj","parcial","poltronasPerYear","poltronasAcc","poltronasMedia","acc","average","expired","needsLaudo","veiculosAntigos","staticFields","tableStyle","showInfo","setShowFiles","tableSpan","rowArray","laudoDocId","createButton","solicitacaoTable","SolHistory","solicitacao","historyLog","setHistoryLog","docSelection","sytle","SolicitacoesTemplate","showCompleted","paddingBotom","solicitacoesTable","assessDemand","parsedData","csvData","exportToXLSX","keysToDelete","dataToExcel","setLogs","showHistory","setShowHistory","selectedLog","selectLog","alertProperties","setFilesId","originalLogs","__v","getLogs","SolicitacoesTable","altContratoForm","forms","objField","tablesSubtitles","subtitles","AltContratoTemplate","altContratoDoc","AltSociosTemplate","socioUpdates","altContratoFields","newSocios","us","nomeSocio","createRequestObj","altEmpresa","empresaUpdates","updateEmpresa","checkSocioUpdates","createLog","oldSocios","deletedSocios","requestInfo","prop","resetForms","socioToRemove","SimpleParams","removeOne","ParametrosTemplate","modified","commonProps","parametrosIdade","params","pressKeyFnc","tempState","checkForChanges","stateChanged","fieldChanged","changedArray","modifiedArray","parametro","UserAuthTemplate","buttonLabel","getElementById","optionLabel","optionValue","loginForm","signUpForm","userAuthForms","endPoint","login","userFound","signUp","Routes","exact","HomeTemplate","CadVeiculos","AltDados","Seguros","Laudos","Config","Consultas","EmpresasHome","AltContrato","Empresas","Socios","Procuradores","Relatorios","PdfTest","Solicitacoes","Parametros","UserAuth","Container","maxWidth","applyMiddleware","promise","multi","thunk","createStore","__REDUX_DEVTOOLS_EXTENSION__","App","hostname","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.15e4581b.chunk.js","sourcesContent":["const dataReducer = (state = {}, action) => {\r\n    const { type, payload } = action\r\n\r\n    switch (type) {\r\n\r\n        case 'GET_DATA':\r\n            return { ...state, ...payload }\r\n\r\n        case 'INSERT_DATA': {\r\n            const { collection, data } = payload\r\n\r\n            if (state[collection] && data) {\r\n                let update = [...state[collection]]\r\n\r\n                data.forEach(el => {\r\n                    if (collection.match('Logs')) update.push(el)\r\n                    else update.unshift(el)\r\n                })\r\n\r\n                return {\r\n                    ...state, [collection]: update\r\n                }\r\n            }\r\n            return state\r\n        }\r\n\r\n        case 'UPDATE_DATA': {\r\n            const { collection, data, id } = payload\r\n\r\n            if (state[collection] && data) {\r\n                const update = state[collection].map(v => {\r\n                    data.forEach(el => {\r\n                        if (v[id] === el[id] || v[id].toString() === el[id].toString()) {\r\n                            v = el\r\n                        }\r\n                    })\r\n                    return v\r\n                })\r\n\r\n                return {\r\n                    ...state, [collection]: update\r\n                }\r\n            }\r\n            return state\r\n        }\r\n\r\n        case 'UPDATE_COLLECTION': {\r\n            const { data, collection } = payload\r\n            // console.log(payload)\r\n            return {\r\n                ...state, [collection]: data\r\n            }\r\n        }\r\n\r\n        case 'REMOVE_FROM_INSURANCE':\r\n            const { apolice, placaIndex, vehicleIndex } = payload\r\n\r\n            if (state.seguros) {\r\n\r\n                let seguros = [...state.seguros],\r\n                    seguro = seguros.find(s => s.apolice === apolice),\r\n                    index = seguros.findIndex(s => s.apolice === apolice)\r\n\r\n                seguro.placas.splice(placaIndex, 1)\r\n                seguro.veiculos.splice(vehicleIndex, 1)\r\n                seguros[index] = seguro\r\n                // console.log(seguros)\r\n                return {\r\n                    ...state, seguros\r\n                }\r\n            }\r\n            return state\r\n\r\n        case 'DELETE_ONE':\r\n            const { tablePK, collection } = payload\r\n\r\n            if (state[collection]) {\r\n                let\r\n                    { id } = payload,\r\n                    updatedData = [...state[collection]]\r\n\r\n                if (!id) return\r\n\r\n                if (!collection.match('Docs')) id = Number(id)\r\n                if (collection === 'laudos')\r\n                    id = id.toString()\r\n\r\n                const\r\n                    element = updatedData.find(el => el[tablePK] === id),\r\n                    index = updatedData.findIndex(el => el[tablePK] === element[tablePK])\r\n                updatedData.splice(index, 1)\r\n\r\n                return {\r\n                    ...state, [collection]: updatedData\r\n                }\r\n            }\r\n            return state\r\n\r\n        case 'SET_COLOR':\r\n            return { ...state, setColor: action.payload }\r\n\r\n        case 'LOADING':\r\n            return { ...state, loading: action.payload }\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default dataReducer;","const userReducer = (state = {}, action) => {\r\n    const { type, payload } = action\r\n    switch (type) {\r\n        case ('LOG_USER'):\r\n            return {\r\n                ...state, ...payload\r\n            }\r\n        case ('LOG_USER_OUT'):\r\n            return {\r\n                ...state, user: payload\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default userReducer","import dataReducer from './Store/dataReducer'\r\nimport { combineReducers } from 'redux';\r\nimport userReducer from './Store/userReducer';\r\n\r\nconst appReducer = combineReducers({\r\n    data: dataReducer,\r\n    user: userReducer\r\n})\r\n\r\nconst rootReducer = (state, action) => {\r\n    if (action.type === 'LOG_USER_OUT') \r\n        state = { data: {}, user: {} }\r\n    \r\n    return appReducer(state, action)\r\n}\r\n\r\nexport default rootReducer","export const idsToString = (veiculos, equipamentos, acessibilidade) => {\r\n\r\n    let equipNames = [], accessNames = []\r\n\r\n    const equips = veiculos.map(v => {\r\n        if (!v?.equipamentosId) v.equipamentosId = []\r\n        if (!v?.acessibilidadeId) v.acessibilidadeId = []\r\n\r\n        v.equipamentosId.forEach(eqId => {\r\n            equipamentos.forEach(({ id, item }) => {\r\n                if (id === eqId) equipNames.push(item)\r\n            })\r\n        })\r\n\r\n        v.acessibilidadeId.forEach(eqId => {\r\n            acessibilidade.forEach(({ id, item }) => {\r\n                if (id === eqId) accessNames.push(item)\r\n            })\r\n        })\r\n        const result = { ...v, equipamentos: equipNames, acessibilidade: accessNames }\r\n        equipNames = []\r\n        accessNames = []\r\n        return result\r\n    })\r\n    return equips\r\n}\r\n\r\nexport const setNamesFromIds = (collection, ids) => {\r\n\r\n    let namesArray = []\r\n    ids.forEach(elementId => {\r\n        collection.forEach(({ id, item }) => {\r\n            if (elementId === id) namesArray.push(item)\r\n        })\r\n    })\r\n    return namesArray\r\n}","import axios from 'axios'\r\nimport humps from 'humps'\r\nimport { batch } from 'react-redux'\r\nimport { idsToString } from '../Utils/idsToString'\r\n\r\nexport const getData = (collectionsArray = []) => {\r\n    return async (dispatch, getState) => {\r\n\r\n        let\r\n            promiseArray = [],\r\n            globalState = {}\r\n\r\n        if (collectionsArray.length > 0) {\r\n            collectionsArray.forEach(collectionName => {\r\n                promiseArray.push(axios.get(`/api/${collectionName}`))\r\n            })\r\n\r\n            await Promise.all(promiseArray)\r\n                .then(res => res.map(r => humps.camelizeKeys(r.data)))\r\n                .then(responseArray => {\r\n                    responseArray.forEach((el, i) => {\r\n                        let key = collectionsArray[i]\r\n                            .replace('getFiles/', '')\r\n                            .replace('lookUpTable/', '')\r\n                            .replace('logs/', '')\r\n                        key = humps.camelize(key)\r\n                        Object.assign(globalState, { [key]: el })\r\n                    })\r\n                })\r\n        }\r\n        //Pega os nomes dos equipamentos e itens de acessibilidade a partir do ID\r\n        if (['acessibilidade', 'equipamentos'].every(p => globalState.hasOwnProperty(p))) {\r\n            const { acessibilidade, equipamentos } = globalState\r\n            let veiculos = globalState.veiculos || getState().data?.veiculos\r\n            const updatedData = idsToString(veiculos, equipamentos, acessibilidade)\r\n            globalState.veiculos = updatedData\r\n        }\r\n\r\n        dispatch({\r\n            type: 'GET_DATA',\r\n            payload: globalState\r\n        })\r\n    }\r\n}\r\n\r\nexport const insertData = (dataFromServer, collection) => (dispatch, getState) => {\r\n\r\n    let data = humps.camelizeKeys(dataFromServer)\r\n    const\r\n        payload = { collection, data },\r\n        seguradoras = getState().data.seguradoras\r\n\r\n    if (!seguradoras) {\r\n        dispatch({ type: 'INSERT_DATA', payload })\r\n        return\r\n    }\r\n    console.log(payload)\r\n    if (collection === 'veiculos' && data[0]) {\r\n\r\n        const { acessibilidade, equipamentos } = getState().data\r\n\r\n        let\r\n            eqNames = [],\r\n            acNames = []\r\n\r\n        if (data[0]?.equipamentosId) {\r\n            data[0].equipamentosId.forEach(eqId => {\r\n                equipamentos.forEach(({ id, item }) => {\r\n                    if (eqId.toString() === id.toString()) eqNames.push(item)\r\n                })\r\n            })\r\n        }\r\n\r\n        if (data[0]?.acessibilidadeId) {\r\n            data[0].acessibilidadeId.forEach(acId => {\r\n                acessibilidade.forEach(({ id, item }) => {\r\n                    if (acId.toString() === id.toString()) {\r\n                        acNames.push(item)\r\n                    }\r\n                })\r\n            })\r\n        }\r\n        data[0].equipamentos = eqNames\r\n        data[0].acessibilidade = acNames\r\n    }\r\n\r\n    if (collection === 'seguros' && data[0].placas && data[0].placas.length === 1) {\r\n\r\n        const seguradora = seguradoras.find(sg => sg.id === data[0].seguradoraId)\r\n        let\r\n            seguro = data[0],\r\n            plates = [], vehicles = [],\r\n            veiculos = getState().data.veiculos,\r\n\r\n            updatedCollection = veiculos.map(v => {\r\n                if (v.apolice === seguro.apolice) {\r\n                    v.seguradora = seguradora.seguradora\r\n                    v.dataEmissao = seguro.dataEmissao\r\n                    v.vencimento = seguro.vencimento\r\n                }\r\n                return v\r\n            })\r\n\r\n        veiculos.forEach(v => {\r\n            if (v.apolice === seguro.apolice) {\r\n                plates.push(v.placa)\r\n                vehicles.push(v.veiculoId)\r\n            }\r\n        })\r\n        seguro.placas = plates\r\n        seguro.veiculos = vehicles\r\n        seguro = [seguro]\r\n\r\n        const collectionPayload = { data: updatedCollection, collection: 'veiculos' }\r\n        batch(() => {\r\n            dispatch({ type: 'INSERT_DATA', payload: { data: seguro, collection: 'seguros' } })\r\n            dispatch({ type: 'UPDATE_COLLECTION', payload: collectionPayload })\r\n        })\r\n    }\r\n\r\n    else dispatch({ type: 'INSERT_DATA', payload })\r\n\r\n}\r\n\r\nexport const updateData = (dataFromServer, collection, id) => (dispatch, getState) => {\r\n\r\n    //Se a collection for vehicleDocs, o que vem do servidor são os ids\r\n    let i = 0\r\n    if (i > 0) return\r\n    let data = humps.camelizeKeys(dataFromServer)\r\n    id = humps.camelize(id)\r\n\r\n    const { equipamentos, acessibilidade } = getState().data\r\n    if (collection === 'veiculos' && equipamentos && acessibilidade)\r\n        data = idsToString(data, equipamentos, acessibilidade)\r\n\r\n    const payload = { collection, data, id }\r\n\r\n    dispatch({ type: 'UPDATE_DATA', payload })\r\n    return\r\n}\r\n\r\nexport const updateDocs = (ids, metadata, collection, primarykey) => (dispatch, getState) => {\r\n\r\n    const stateCollection = getState().data[collection]\r\n\r\n    if (ids && ids[0] && metadata) {\r\n        let selectedDocs = stateCollection.filter(doc => ids.some(id => id === doc[primarykey]))\r\n\r\n        selectedDocs.forEach(doc => {\r\n            const meta = Object.assign({}, doc.metadata, metadata)\r\n            doc.metadata = meta\r\n        })\r\n\r\n        const payload = { collection, data: selectedDocs, id: primarykey }\r\n        dispatch({ type: 'UPDATE_DATA', payload })\r\n    }\r\n\r\n}\r\n\r\nexport const updateCollection = (data, collection) => dispatch => {\r\n\r\n    data = humps.camelizeKeys(data)\r\n    const payload = { data, collection }\r\n\r\n    dispatch({\r\n        type: 'UPDATE_COLLECTION',\r\n        payload\r\n    })\r\n}\r\n\r\nexport const updateInsurance = ({ value, ids }) => (dispatch, getState) => {\r\n    const\r\n        apolice = value,\r\n        seguros = getState().data.seguros,\r\n        veiculos = getState().data.veiculos\r\n\r\n    if (!seguros || !veiculos) return\r\n\r\n    let seguro = seguros.find(s => s.apolice === apolice),\r\n        placas = seguro.placas || [], vehicleIDs = seguro.veiculos || []\r\n\r\n    veiculos.forEach(v => {\r\n        ids.forEach(id => {\r\n            if (v.veiculoId === id) {\r\n                placas.push(v.placa)\r\n                vehicleIDs.push(v.veiculoId)\r\n            }\r\n        })\r\n    })\r\n\r\n    seguro.placas = placas\r\n    seguro.veiculos = vehicleIDs\r\n    seguro = [seguro]\r\n\r\n    const payload = { collection: 'seguros', data: seguro, id: 'apolice' }\r\n\r\n    dispatch({ type: 'UPDATE_DATA', payload })\r\n}\r\n\r\nexport const removeInsurance = (apolice, placaIndex, vehicleIndex) => dispatch => {\r\n\r\n    dispatch({\r\n        type: 'REMOVE_FROM_INSURANCE',\r\n        payload: { apolice, placaIndex, vehicleIndex }\r\n    })\r\n}\r\n\r\nexport const deleteOne = (id, tablePK, collection) => dispatch => {\r\n    tablePK = humps.camelize(tablePK)\r\n    dispatch({\r\n        type: 'DELETE_ONE',\r\n        payload: { id, tablePK, collection }\r\n    })\r\n}","import React from 'react'\r\n\r\nconst Loading = () => {\r\n    return (\r\n        <div className='loading'>\r\n            <img src=\"/images/loading.gif\" alt=\"\" height=\"60px\" width=\"60px\" />\r\n            <p> Carregando... </p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loading","export const configVehicleForm = [\r\n\r\n    {\r\n        collection: 'equipamentos',\r\n        field: 'item',\r\n        label: 'Equipamentos',\r\n        name: 'equipamentosId',\r\n        table: 'equipamentosId'\r\n    },\r\n    {\r\n        collection: 'acessibilidade',\r\n        field: 'item',\r\n        label: 'Itens de acessibilidade',\r\n        name: 'acessibilidadeId',\r\n        table: 'acessibilidade'\r\n    },\r\n    {\r\n        collection: 'marcaCarroceria',\r\n        field: 'marca',\r\n        label: 'Marcas de Carroceria',\r\n        name: 'marcaCarroceria',\r\n        table: 'marca_carroceria'\r\n    },\r\n    {\r\n        collection: 'carrocerias',\r\n        field: 'modelo',\r\n        label: 'Modelos de Carroceria',\r\n        name: 'modeloCarroceria',\r\n        table: 'modelo_carroceria'\r\n    },\r\n    {\r\n        collection: 'marcaChassi',\r\n        field: 'marca',\r\n        label: 'Marcas de Chassi',\r\n        name: 'marcaChassi',\r\n        table: 'marca_chassi'\r\n    },\r\n    {\r\n        collection: 'modelosChassi',\r\n        field: 'modeloChassi',\r\n        label: 'Modelos de Chassi',\r\n        name: 'modeloChassi',\r\n        table: 'modelo_chassi'\r\n    },\r\n    {\r\n        collection: 'seguradoras',\r\n        field: 'seguradora',\r\n        label: 'Seguradoras',\r\n        name: 'seguradora',\r\n        table: 'seguradora'\r\n    },\r\n    {\r\n        collection: 'empresasLaudo',\r\n        field: 'empresa',\r\n        label: 'Empresas certificadas INMETRO',\r\n        name: 'empresa',\r\n        table: 'empresa_laudo'\r\n    },\r\n    {\r\n        collection: 'laudos',\r\n        table: 'laudos'\r\n    }\r\n]","import React from 'react';\r\nimport clsx from 'clsx';\r\n//import { ErrorIcon, InfoIcon, Close, WarningIcon } from '@material-ui/icons/';\r\nimport { amber, green } from '@material-ui/core/colors';\r\nimport { Snackbar, SnackbarContent, Icon } from '@material-ui/core';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles1 = makeStyles(theme => ({\r\n    success: {\r\n        backgroundColor: green[600],\r\n    },\r\n    error: {\r\n        backgroundColor: theme.palette.error.dark,\r\n    },\r\n    info: {\r\n        backgroundColor: theme.palette.primary.main,\r\n    },\r\n    warning: {\r\n        backgroundColor: amber[700],\r\n    },    \r\n    message: {\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n    },\r\n}));\r\n\r\nfunction MySnackbarContentWrapper(props) {\r\n    const classes = useStyles1();\r\n    const { className, message, onClose, variant, ...other } = props;\r\n    \r\n    return (\r\n        <SnackbarContent\r\n            className={clsx(classes[variant], className)}\r\n            aria-describedby=\"client-snackbar\"\r\n            message={\r\n                message &&\r\n                <span id=\"client-snackbar\" className={classes.message}>\r\n                    <Icon>{props.variant === 'error' ? 'close' : 'check'}</Icon>    {message}\r\n                </span>\r\n            }\r\n            {...other}\r\n        />\r\n    );\r\n}\r\n\r\nexport default function CustomizedSnackbars(props) {\r\n\r\n    return (\r\n        <div>\r\n            <Snackbar\r\n                anchorOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'right',\r\n                }}\r\n                open={props.open}\r\n                autoHideDuration={1500}\r\n                onClose={props.close}\r\n            >\r\n                <MySnackbarContentWrapper\r\n                    variant={props.status || \"success\"}\r\n                    message={props.msg}\r\n                />\r\n            </Snackbar>\r\n        </div>\r\n    );\r\n}","export function setCookie(cname, cvalue) {\r\n    let d = new Date(), time = 20 * 60 * 1000\r\n    d.setTime(d.getTime() + time)\r\n    d = d.toUTCString()\r\n\r\n    document.cookie = `${cname}=${cvalue}; expires=${d}; path=/`;\r\n}\r\n\r\nexport function deleteCookie(name) {\r\n    let d = new Date()\r\n    d.setTime(10)\r\n    document.cookie = `${name}=; expires=${d.toUTCString()}; path=/`\r\n}\r\n\r\nexport function getCookie(cname) {\r\n    var name = cname + \"=\";\r\n    var ca = document.cookie.split(';');\r\n    for (var i = 0; i < ca.length; i++) {\r\n        var c = ca[i];\r\n        while (c.charAt(0) === ' ') {\r\n            c = c.substring(1);\r\n        }\r\n        if (c.indexOf(name) === 0) {\r\n            return c.substring(name.length, c.length);\r\n        }\r\n    }\r\n    return \"\";\r\n}\r\n","import { deleteCookie } from \"../Utils/documentCookies\"\r\n\r\nexport const logUser = user => {\r\n    return dispatch => {\r\n        dispatch({\r\n            type: 'LOG_USER',\r\n            payload: user\r\n        })\r\n    }\r\n}\r\n\r\nexport const logUserOut = () => {\r\n    return async dispatch => {\r\n        await fetch('/auth/logout', { method: 'GET', credentials: 'same-origin' })\r\n            .then(r => {\r\n                deleteCookie('loggedIn')\r\n                return\r\n            })\r\n            .catch(err => console.log(err))\r\n\r\n        dispatch({\r\n            type: 'LOG_USER_OUT'\r\n        })\r\n    }\r\n}","import React from 'react'\r\nimport humps from 'humps'\r\nimport Axios from 'axios'\r\n\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux'\r\nimport { getData, insertData, updateData, updateCollection, deleteOne, updateDocs } from './dataActions'\r\n\r\nimport Loading from '../Layouts/Loading'\r\nimport { configVehicleForm } from '../Forms/configVehicleForm'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\nimport { getCookie } from '../Utils/documentCookies'\r\nimport { logUser, logUserOut } from './userActions'\r\n\r\nconst socketIO = require('socket.io-client')\r\nlet socket\r\n\r\nexport default function (requestArray, WrappedComponent) {\r\n\r\n    let collections = []\r\n\r\n    if (!requestArray.includes('logs')) requestArray.push('logs')\r\n    collections = requestArray.map(req => req.replace('getFiles/', '').replace('lookUpTable/', ''))\r\n\r\n    class With extends React.Component {\r\n\r\n        state = { confirmToast: false }\r\n\r\n        async componentDidMount() {\r\n\r\n            const { redux } = this.props\r\n            let request = []\r\n\r\n            requestArray.forEach(req => {\r\n                const colName = req.replace('getFiles/', '').replace('lookUpTable/', '').replace('logs/', '')\r\n                if (!redux[colName] || !redux[colName][0]) {\r\n                    request.push(req)\r\n                }\r\n            })\r\n\r\n            if (request[0])\r\n                await this.props.getData(request)\r\n\r\n            if (!socket) socket = socketIO('http://localhost:3001')\r\n            socket.on('insertVehicle', insertedObjects => this.props.insertData(insertedObjects, 'veiculos'))\r\n            socket.on('insertInsurance', insertedObjects => this.props.insertData(insertedObjects, 'seguros'))\r\n            socket.on('insertEmpresa', insertedObjects => this.props.insertData(insertedObjects, 'empresas'))\r\n            socket.on('insertSocios', insertedObjects => this.props.insertData(insertedObjects, 'socios'))\r\n            socket.on('insertProcuradores', insertedObjects => this.props.insertData(insertedObjects, 'procuradores'))\r\n            socket.on('insertElements', ({ insertedObjects, collection }) => this.props.insertData(insertedObjects, collection))\r\n\r\n            socket.on('addElements', ({ insertedObjects, table }) => {\r\n                const { collection } = configVehicleForm.find(el => el.table === table)\r\n                this.props.insertData(insertedObjects, collection)\r\n            })\r\n\r\n            socket.on('updateVehicle', updatedObjects => this.props.updateData(updatedObjects, 'veiculos', 'veiculoId'))\r\n            socket.on('updateInsurance', updatedObjects => this.props.updateCollection(updatedObjects, 'seguros'))\r\n            socket.on('updateSocios', updatedObjects => this.props.updateCollection(updatedObjects, 'socios'))\r\n            socket.on('updateProcuradores', ({ collection, data, primaryKey }) => this.props.updateData(data, collection, primaryKey))\r\n            socket.on('updateLogs', updatedObjects => this.props.updateData(updatedObjects, 'logs', 'id'))\r\n            socket.on('updateAny', ({ updatedObjects, collection, primaryKey }) => this.props.updateData(updatedObjects, collection, primaryKey))\r\n            socket.on('updateDocs', ({ ids, metadata, collection, primaryKey }) => this.props.updateDocs(ids, metadata, collection, primaryKey))\r\n            socket.on('updateElements', ({ collection, updatedCollection }) => this.props.updateCollection(updatedCollection, collection))\r\n\r\n            socket.on('deleteOne', object => {\r\n                const { id, tablePK, collection } = object\r\n                this.props.deleteOne(id, tablePK, collection)\r\n            })\r\n\r\n            socket.on('insertFiles', object => {\r\n                const { insertedObjects, collection } = object\r\n                this.props.insertData(insertedObjects, collection)\r\n            })\r\n        }\r\n\r\n        componentWillUnmount() {\r\n            if (!socket) socket = socketIO(':3001')\r\n            const clearAll = ['insertVehicle', 'insertInsurance', 'insertEmpresa', 'insertSocios', 'insertFiles', 'addElements',\r\n                'insertElements', 'insertProcuradores', 'updateVehicle', 'updateInsurance', 'updateSocios', 'updateLogs', 'deleteOne',\r\n                'updateDocs', 'updateAny']\r\n\r\n            clearAll.forEach(el => socket.off(el))\r\n        }\r\n\r\n        getUser = async () => {\r\n            const\r\n                request = await Axios.get('/getUser'),\r\n                user = request?.data\r\n            if (user)\r\n                this.props.logUser(user)\r\n        }\r\n\r\n        toast = () => this.setState({ confirmToast: !this.state.confirmToast })\r\n\r\n        render() {\r\n            //Todo novo render verifica o localCookie. Se tiver expirado, faz o logout do usuário.\r\n            const validSession = getCookie('loggedIn').length > 0;\r\n            if (!validSession) {\r\n                setTimeout(() => {\r\n                    this.props.logUserOut()\r\n                }, 1200)\r\n                return <ReactToast open={true} close={this.toast} msg='Sessão expirada.' status='error' />\r\n            }\r\n            else if (!this.props.user.name) {\r\n                this.getUser()\r\n            }\r\n\r\n            //Enquanto não tiver carregado todas as collections de um determinado componente, renderiza Loading...\r\n            collections = collections.map(c => humps.camelize(c))\r\n            if (collections.length === 0 || !collections.every(col => this.props.redux.hasOwnProperty(col))) {\r\n                return <Loading />\r\n            }\r\n            //Carregadas as collections com a devida autenticação, renderiza o componente\r\n            else\r\n                return <WrappedComponent {...this.props} />\r\n        }\r\n    }\r\n\r\n    function mapStateToProps(state) {\r\n        return {\r\n            redux: {\r\n                ...state.data,\r\n            },\r\n            user: state.user\r\n        }\r\n    }\r\n\r\n    function mapDispatchToProps(dispatch) {\r\n        return bindActionCreators({ getData, insertData, updateData, updateCollection, deleteOne, updateDocs, logUser, logUserOut }, dispatch)\r\n    }\r\n\r\n    return connect(mapStateToProps, mapDispatchToProps)(With)\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport StoreHOC from './Store/StoreHOC'\r\nimport './home.css'\r\n\r\nconst featuredPosts = [\r\n    {\r\n        title: 'Veículos',\r\n        date: '07/Nov',\r\n        description:\r\n            'Cadastre e altere os dados do veículo ou solicite sua baixa',\r\n        link: '/veiculos',\r\n        imageUrl: '/images/vehicles.jpg'\r\n    },\r\n    {\r\n        title: 'Empresas',\r\n        date: '07/Nov',\r\n        description:\r\n            'Cadastre e gerencie dados de empresas, sócios e procuradores',\r\n        link: '/empresas',\r\n        imageUrl: '/images/empresas12.jpg'\r\n    },\r\n    {\r\n        title: 'Consultas',\r\n        date: '03/Dez',\r\n        description:\r\n            'Consulte e gerencie dados de veículos, seguros e empresas',\r\n        link: '/consultas',\r\n        imageUrl: '/images/consultas2.jpg'\r\n    },\r\n    {\r\n        title: 'Relatórios',\r\n        date: '03/Dez',\r\n        description:\r\n            'Acompanhe a situação dos veículos por meio de gráficos e tabelas',\r\n        link: '/relatorios',\r\n        imageUrl: '/images/relatorios.jpg'\r\n    },\r\n]\r\n\r\nconst namesToRender = {\r\n    nomeSistema: 'Sistema de Cadastro do Transporte Intermunicipal de Minas Gerais',\r\n    siglaSistema: 'CadTI - MG',\r\n}\r\n\r\nfunction Home(props) {\r\n    const\r\n        { parametros } = props.redux,\r\n        { nomes } = parametros[0]\r\n\r\n    if (nomes) {\r\n        namesToRender.nomeSistema = nomes?.sistema\r\n        namesToRender.siglaSistema = nomes?.siglaSistema\r\n    }\r\n    const { nomeSistema, siglaSistema } = namesToRender\r\n    return (\r\n        <React.Fragment>\r\n            <div\r\n                style={{\r\n                    minHeight: '83vh',\r\n                    width: '100%',\r\n                    height: 'auto',\r\n                }}>\r\n                <main className=\"homeMainPost\">\r\n                    <h1>\r\n                        {siglaSistema}\r\n                    </h1>\r\n                    <h2>\r\n                        {nomeSistema}\r\n                    </h2>\r\n                </main>\r\n                <section className='homeCardsContainer'>\r\n                    {featuredPosts.map(({ link, title, description, imageUrl }, i) => (\r\n                        <div key={i} className='homeCard'>\r\n\r\n                            <Link to={link} style={{ textDecoration: 'none' }}>\r\n                                <div className='homeCard'>\r\n                                    <div className=\"homeCardText\">\r\n                                        <h6 className=\"homeCardText\" style={{ fontWeight: 500 }}>\r\n                                            {title}\r\n                                        </h6>\r\n                                        <p className=\"homeCardText\">\r\n                                            {description}\r\n                                        </p>\r\n\r\n                                    </div>\r\n                                    <div className='homeImage'>\r\n                                        <img src={imageUrl} alt={title} className='homeImage' />\r\n                                    </div>\r\n                                </div>\r\n                            </Link>\r\n\r\n                        </div>\r\n                    ))}\r\n                </section>\r\n            </div >\r\n        </React.Fragment >\r\n    )\r\n}\r\n\r\nexport default StoreHOC(['logs', 'parametros'], Home)","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport './veiculos.scss'\r\n\r\nconst menuCards = [\r\n    {\r\n        title: 'Cadastro de Veículos',\r\n        date: '07/Nov',\r\n        description:\r\n            'Cadastrar um novo veículo no sistema',\r\n        imageUrl: '/images/add_new.jpg',\r\n        link: '/cadastro'\r\n    },\r\n    {\r\n        title: 'Alteração de dados',\r\n        date: '07/Nov',\r\n        description:\r\n            'Alterar dados de um veículo',\r\n        link: '/altDados',\r\n        imageUrl: '/images/pen.png'\r\n    },\r\n    {\r\n        title: 'Seguros',\r\n        date: '07/Nov',\r\n        description:\r\n            'Atualizar seguros e apólices',\r\n        link: '/seguros',\r\n        imageUrl: \"/images/car_insurance2.png\"\r\n    },\r\n    {\r\n        title: 'Laudos',\r\n        date: '07/Nov',\r\n        description:\r\n            'Laudos de segurança veicular',\r\n        link: '/laudos',\r\n        imageUrl: \"/images/laudos.png\"\r\n    },\r\n    {\r\n        title: 'Baixa',\r\n        date: '07/Nov',\r\n        description:\r\n            'Baixa de veículos',\r\n        link: '/baixaVeiculo',\r\n        imageUrl: \"/images/remove_doc.png\"\r\n    },\r\n    {\r\n        title: 'Configurações',\r\n        date: '07/Nov',\r\n        description:\r\n            'Chassi, carrocerias, seguradoras, etc',\r\n        link: '/config',\r\n        imageUrl: \"/images/config2.jpg\"\r\n    }\r\n]\r\n\r\nexport default function VeiculosHome(props) {\r\n    const { match } = props\r\n    return (\r\n        <div>\r\n            <section className=\"jumbotron\">\r\n                <h1>\r\n                    Veículos\r\n                </h1>\r\n                <p>\r\n                    Selecione uma das opções abaixo.\r\n                </p>\r\n            </section>\r\n            <section className=\"card\">\r\n                {\r\n                    menuCards.map(({ title, link, imageUrl, description }, i) =>\r\n                        <Link to={match.url + link} key={i} className=\"card__container\">\r\n                            <span className=\"card__image\"> <img src={imageUrl} alt={title} /> </span>\r\n                            <div className=\"card__text\">\r\n                                <h3 >{title}</h3>\r\n                                <p > {description}</p>\r\n                            </div>\r\n                        </Link>\r\n                    )}\r\n            </section>\r\n        </div >\r\n    )\r\n}\r\n","import { setNamesFromIds } from './idsToString'\r\n\r\nexport const setDemand = (demand, redux) => {\r\n    const\r\n        { veiculos, empresas, vehicleDocs, equipamentos, acessibilidade } = redux,\r\n        history = demand?.history,\r\n\r\n        vehicle = veiculos.find(v => v.veiculoId === demand.veiculoId),\r\n        originalVehicle = JSON.parse(JSON.stringify(vehicle)),\r\n\r\n        selectedEmpresa = empresas.find(e => e.razaoSocial === demand?.empresa),\r\n        razaoSocial = selectedEmpresa?.razaoSocial,\r\n        delegatario = razaoSocial\r\n\r\n    let\r\n        selectedVehicle = { ...vehicle } || null,\r\n        alteracoes,\r\n        compartilhado\r\n\r\n    //******************Get the last log updates\r\n    if (Array.isArray(history))\r\n        alteracoes = history.reverse().find(el => el.hasOwnProperty('alteracoes'))?.alteracoes\r\n\r\n    //******************Set Alterações into State and set equipamentosId/acessibilidade array of names for each vehicle\r\n    if (alteracoes) {\r\n        Object.keys(alteracoes).forEach(key => selectedVehicle[key] = alteracoes[key])\r\n\r\n        //Pega o ID do delegatario compartilhado se houver\r\n        compartilhado = empresas.find(e => e.codigoEmpresa === selectedVehicle.compartilhadoId)?.razaoSocial\r\n        if (compartilhado)\r\n            selectedVehicle.compartilhado = compartilhado\r\n\r\n        //Pega os nomes dos equipamentos e acessórios para renderizar\r\n        const { equipamentosId, acessibilidadeId } = alteracoes\r\n        if (equipamentosId) selectedVehicle.equipamentos = setNamesFromIds(equipamentos, equipamentosId)\r\n        if (acessibilidadeId) selectedVehicle.acessibilidade = setNamesFromIds(acessibilidade, acessibilidadeId)\r\n    }\r\n\r\n    //******************Get latest uploaded files per field\r\n    let fileIds = [], allDemandFiles, latestDocs = [], filesPerFieldName = {}\r\n    history\r\n        .filter(el => el.files)\r\n        .map(el => el.files)\r\n        .forEach(array => {\r\n            array.forEach(id => fileIds.push(id))\r\n        })\r\n    allDemandFiles = vehicleDocs.filter(doc => fileIds.indexOf(doc.id) !== -1)\r\n\r\n    let fieldExists = []\r\n    allDemandFiles.forEach(file => {\r\n        const { fieldName } = file.metadata\r\n        if (!fieldExists.includes(fieldName)) {\r\n            fieldExists.push(fieldName)\r\n            filesPerFieldName[fieldName] = [file]\r\n        }\r\n        else filesPerFieldName[fieldName].push(file)\r\n    })\r\n\r\n    Object.keys(filesPerFieldName).forEach(field => {\r\n        const arrayOfFiles = filesPerFieldName[field]\r\n        let lastDoc\r\n        lastDoc = arrayOfFiles.reduce((a, b) => new Date(a.uploadDate) > new Date(b.uploadDate) ? a : b)\r\n        latestDocs.push(lastDoc)\r\n        lastDoc = []\r\n    })\r\n\r\n    //****************** Return the object    \r\n    return {\r\n        ...selectedVehicle, originalVehicle, delegatario, compartilhado, razaoSocial, selectedEmpresa,\r\n        demand, demandFiles: latestDocs, alteracoes, getUpdatedValues\r\n    }\r\n}\r\n\r\nfunction getUpdatedValues(originalObj, newObj) {\r\n    Object.keys(newObj).forEach(key => {\r\n        if (newObj[key] && originalObj[key]) {\r\n\r\n            if (key === 'equipamentosId' || key === 'acessibilidadeId')\r\n                newObj[key].sort((a, b) => a - b)\r\n\r\n            if (newObj[key].toString() === originalObj[key].toString())\r\n                delete newObj[key]\r\n        }\r\n        if (newObj[key] === '' || newObj[key] === 'null' || !newObj[key]) delete newObj[key]\r\n    })\r\n    const updatedFields = newObj\r\n    return updatedFields\r\n}","import axios from \"axios\"\r\n\r\nexport const sizeExceedsLimit = files => {\r\n    if (files[0].size > 3145728) {\r\n        alert('Arquivo excedeu o limite permitido (3MB)')\r\n        return true\r\n    }\r\n}\r\n\r\nexport const handleFiles = (files, state, filesFormTemplate) => {\r\n\r\n    const formData = new FormData()\r\n\r\n    if (files && files[0]) {\r\n\r\n        if (sizeExceedsLimit(files)) return            //limit file Size\r\n\r\n        filesFormTemplate.forEach(obj => {                   //set native file fieldname property for each file attached. Makes sense if multiple files\r\n            for (let keys in state) {\r\n                if (keys.match(obj.name) && state[obj.name]) {\r\n                    formData.set(obj.name, state[obj.name])\r\n                }\r\n                else void 0\r\n            }\r\n        })\r\n        //for (let p of formData) { console.log(p[0], p[1]) }\r\n        return { form: formData }\r\n    }\r\n}\r\n\r\nexport const postFilesReturnIds = async (formData, metadata = {}, completed, filesEndPoint) => {\r\n    let\r\n        files,\r\n        filesIds\r\n\r\n    if (formData instanceof FormData) {\r\n        let filesToSend = new FormData()\r\n\r\n        if (completed)                              //Se a demanda for aprovada é considerada completed, e então o arquivo deixa de ser temporário.\r\n            metadata.tempFile = false\r\n        else\r\n            metadata.tempFile = true\r\n\r\n        filesToSend.append('metadata', JSON.stringify(metadata))\r\n        for (let pair of formData) {\r\n            filesToSend.set(pair[0], pair[1])\r\n        }\r\n\r\n        files = await axios.post(`/api/${filesEndPoint}`, filesToSend)\r\n    }\r\n\r\n    if (files?.data?.file) {\r\n        const filesArray = files.data.file\r\n        filesIds = filesArray.map(f => f.id)\r\n        return filesIds\r\n    }\r\n    else return null\r\n}\r\n\r\nexport const updateFilesMetadata = async (obj, filesCollection) => {\r\n\r\n    const { files, demandFiles } = obj\r\n    let metadata = { tempFile: false }\r\n\r\n    if (obj?.metadata instanceof Object)\r\n        metadata = Object.assign(obj.metadata, metadata)\r\n    //console.log(obj, metadata)\r\n    let ids\r\n\r\n    if (demandFiles && demandFiles[0])\r\n        ids = demandFiles.map(f => f.id)\r\n\r\n    else {\r\n        if (files instanceof FormData) {             //If there's any upload from Seinfra, it will overwrite the latestDocs(demandFiles) before approval\r\n            for (let pair of files) {\r\n                demandFiles.forEach((f, i) => {\r\n                    if (pair[0] === f?.metadata?.fieldName)\r\n                        demandFiles.splice(i, 1)\r\n                })\r\n            }\r\n            ids = demandFiles.map(f => f.id)\r\n        }\r\n    }\r\n\r\n    await axios.put('/api/updateFilesMetadata', { ids, collection: filesCollection, metadata })\r\n        .then(r => console.log(r.data))\r\n}\r\n\r\nexport const removeFile = (name, form) => {\r\n\r\n    const existingFiles = new FormData()\r\n\r\n    if (form instanceof FormData && form.has(name)) {\r\n        for (let p of form) {\r\n            existingFiles.set(p[0], p[1])\r\n        }\r\n\r\n        existingFiles.delete(name)\r\n\r\n        const returnObj = { fileToRemove: name, form: existingFiles, [name]: undefined }\r\n\r\n        //********If form has only 1 key left, remove it from state. */\r\n        const keyCounter = Array.from(form.keys(), k => k).length\r\n\r\n        if (keyCounter <= 1 && (form.has('veiculoId') || form.has('empresaId')))\r\n            return { fileToRemove: undefined, form: undefined, [name]: undefined }\r\n        else\r\n            return returnObj\r\n    }\r\n}","import moment from 'moment'\r\n\r\nexport const checkInputErrors = (sendState, dontSetDate) => {\r\n\r\n    const\r\n        p = document.querySelectorAll('p'),\r\n        inputs = document.querySelectorAll('input')\r\n\r\n    let\r\n        label = [],\r\n        errors = [],\r\n        errString = 'Favor verificar o preenchimento dos seguintes campos: '\r\n\r\n    if (p) {\r\n        p.forEach(el => {\r\n            if (el.textContent === 'Valor inválido' || el.textContent === '✘') {\r\n                const parent = el.parentNode\r\n                const l = parent.querySelectorAll('label')\r\n                label.push(l[0])\r\n            }\r\n        })\r\n    }\r\n    if (inputs && !dontSetDate) {\r\n        inputs.forEach(el => {\r\n            if (el.type === 'date') {\r\n                if (!moment(el.value, 'YYYY-MM-DD', true).isValid()) {\r\n                    const parent = el.parentNode\r\n                    const l = parent.previousSibling\r\n                    label.push(l)\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    if (label[0]) {\r\n        label.forEach(l => errors.push(l.textContent))\r\n        errors.forEach(e => errString += e + ', ')\r\n        errString = errString\r\n            .replace('(kg)', '')\r\n            .replace('(cm)', '')\r\n            .slice(0, -2) + '.'\r\n\r\n        if (sendState) return { openAlertDialog: true, alertType: 'inputError', customMsg: errString, errors }\r\n        return errors\r\n    } else return null\r\n}\r\n\r\nexport const errorHandler = (value, el) => {\r\n    if (!value) return\r\n\r\n    if (el.errorHandler && el.errorHandler(value)) return false\r\n    else if (value && el.errorHandler && !el.errorHandler(value)) return true\r\n\r\n    if (value?.length < el?.minLength) return true\r\n\r\n    if (el.type === 'number') {\r\n        if (value > el.max || value < el.min) return true\r\n        else return false\r\n    }\r\n\r\n    if (typeof value !== 'string') value = value.toString()\r\n    if (el.pattern) return value.match(el.pattern) === null\r\n    else return false\r\n}\r\n\r\nexport const helper = (value, el) => {\r\n    if (!value) return\r\n\r\n    if (el.errorHandler && el.errorHandler(value)) return '✓'\r\n    else if (value && el.errorHandler && !el.errorHandler(value)) return '✘'\r\n\r\n    if (value?.length < el?.minLength) return '✘'\r\n    if (value?.length >= el?.minLength) return '✓'\r\n\r\n    if (typeof value !== 'string') value = value.toString()\r\n    if (value > el.max || value < el.min) return 'Valor inválido'\r\n    else if (value.match(el.pattern) === null) return '✘'\r\n    else if (el.pattern && value.match(el.pattern) !== null) return '✓'\r\n    else return ' '\r\n}\r\n","const vehicle = {\r\n\r\n    collection: 'logs',\r\n    docs: 'vehicleDocs',\r\n    primaryKey: 'veiculoId'\r\n}\r\n\r\nconst { collection, docs, primaryKey } = vehicle\r\n\r\nexport const logRoutesConfig = [\r\n    {\r\n        subject: 'Cadastro de veículo',\r\n        path: '/solicitacoes/cadastro',\r\n        requestAction: 'Cadastro de veículo solicitado',\r\n        responseAction: 'Pendências para o cadastro do veículo',\r\n        concludedAction: 'Veículo cadastrado',\r\n        collection, docs, primaryKey,\r\n    },\r\n    {\r\n        subject: 'Reativação de veículo',\r\n        path: '/solicitacoes/cadastro',\r\n        requestAction: 'Reativação de veículo solicitada',\r\n        responseAction: 'Pendências para a reativação do veículo',\r\n        concludedAction: 'Veículo reativado',\r\n        collection, docs, primaryKey,\r\n    },\r\n    {\r\n        subject: 'Alteração de dados do veículo',\r\n        path: '/solicitacoes/altDados',\r\n        requestAction: 'Alteração de dados de veículo solicitada',\r\n        responseAction: 'Pendências para a alteração de dados veicular',\r\n        concludedAction: 'Dados do veículo alterados',\r\n        collection, docs, primaryKey,\r\n    },\r\n    {\r\n        ...vehicle,\r\n        subject: 'Cadastro/alteração de seguro',\r\n        path: '/solicitacoes/seguros',\r\n        requestAction: 'Cadastro de seguro solicitado',\r\n        responseAction: 'Pendências para o cadastro do seguro',\r\n        concludedAction: 'Seguro cadastrado',\r\n        primaryKey: 'id',\r\n        collection, docs,\r\n\r\n    },\r\n    {\r\n        ...vehicle,\r\n        subject: 'Cadastro de laudo de segurança veicular',\r\n        collection: 'logs',\r\n        path: '/solicitacoes/laudos',\r\n        requestAction: 'Cadastro do laudo solicitado',\r\n        responseAction: 'Pendências para o cadastro do laudo',\r\n        concludedAction: 'Laudo veicular cadastrado',\r\n    },\r\n    {\r\n        subject: 'Baixa de veículo',\r\n        path: '/solicitacoes/baixaVeiculo',\r\n        requestAction: 'Baixa de veículo solicitada',\r\n        collection, docs, primaryKey,\r\n    },\r\n    {\r\n        subject: 'Configurações de Veículo',\r\n        collection: 'logs',\r\n        path: '/veiculos/config'\r\n    },\r\n    {\r\n        subject: 'Consultas',\r\n        path: '/consultas'\r\n    },\r\n    {\r\n        subject: 'Cadastro de empresa',\r\n        collection: 'empresaLogs',\r\n        path: '/empresas/cadastro'\r\n    },\r\n    {\r\n        subject: 'Alteração no quadro/dados de sócios',\r\n        requestAction: 'Alteração no quadro/dados de sócios solicitada',\r\n        concludedAction: 'Alteração de sócios cadastrada',\r\n        path: '/solicitacoes/socios',\r\n        docs: 'empresaDocs',\r\n        primaryKey: 'empresaId',\r\n        collection\r\n    },\r\n    {\r\n        subject: 'Alteração estatutária',\r\n        requestAction: 'Alteração estatutária solicitada',\r\n        responseAction: 'Pendências para a alteração estatutária',\r\n        concludedAction: 'Alteração estatutária cadastrada',\r\n        path: '/solicitacoes/altContrato',\r\n        docs: 'empresaDocs',\r\n        primaryKey: 'empresaId',\r\n        collection\r\n    },\r\n    {\r\n        subject: 'Cadastro de procurações/procuradores',\r\n        collection,\r\n        path: '/solicitacoes/procuradores',\r\n        docs: 'empresaDocs',\r\n        primaryKey: 'empresaId',\r\n        requestAction: 'Cadastro de procuração solicitado',\r\n        responseAction: 'Procuração indeferida',\r\n        concludedAction: 'Procuração cadastrada',\r\n    },\r\n]\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import axios from 'axios'\r\nimport { store } from '../App'\r\nimport { logRoutesConfig } from '../Solicitacoes/logRoutesConfig'\r\nimport { updateFilesMetadata, postFilesReturnIds } from './handleFiles'\r\n\r\nexport async function logGenerator(obj) {\r\n    const\r\n        path = window.location.pathname,\r\n        userName = store.getState()?.user?.name || 'Usuário não identificado'\r\n\r\n    let logRoutes = JSON.parse(JSON.stringify(logRoutesConfig))\r\n    logRoutes.forEach((el, i) => el.path = logRoutesConfig[i].path.replace('/veiculos', '').replace('/solicitacoes', '').replace('/empresas', ''))\r\n\r\n    //Cria props padrão para todos os logs\r\n    const\r\n        collection = 'logs',\r\n        historyLength = obj?.historyLength,\r\n        commonFields = {\r\n            user: userName,\r\n            createdAt: new Date(),\r\n        }\r\n\r\n    let\r\n        logConfig = logRoutes.find(e => path.match(e.path)),\r\n        log = JSON.parse(JSON.stringify(obj))\r\n\r\n    //Em caso de reativação de veículo, o path é o mesmo, aí o find tem q ser por subject\r\n    if (obj.subject && obj.subject.match('Reativação'))\r\n        logConfig = logRoutes.find(e => e.subject === obj.subject)\r\n\r\n    // if !veiculoId, update to empresaDocs\r\n    let\r\n        filesCollection = 'vehicleDocs',\r\n        filesEndPoint = 'vehicleUpload'\r\n    if (!obj.veiculoId) {\r\n        filesCollection = 'empresaDocs'\r\n        filesEndPoint = 'empresaUpload'\r\n    }\r\n\r\n    const history = Object.assign(obj.history, commonFields)\r\n    log.history = history || {}\r\n\r\n    //Se par, a próxima action é a demanda de cada rota caso contrário a resposta. Depois apaga-se o historyLength */\r\n    if (historyLength || historyLength === 0) {\r\n\r\n        if (historyLength % 2 === 0 || historyLength === 0) {\r\n\r\n            if (!obj?.history?.action)\r\n                log.history.action = logConfig?.requestAction\r\n            log.status = 'Aguardando análise'\r\n        }\r\n        else {\r\n            if (!obj?.history?.action)\r\n                log.history.action = logConfig?.responseAction\r\n            log.status = 'Pendências'\r\n        }\r\n    }\r\n\r\n    //**********************if log already exists, no need to inform veiculoId and empresaId**********************\r\n    if (obj?.id && log.empresaId) delete log.empresaId\r\n    if (obj?.id && log.veiculoId) delete log.veiculoId\r\n    delete log.historyLength\r\n\r\n    //**********************If given by the component which called this fuction, overwrite logRoutesConfig*/\r\n    if (!obj.id || obj.subject) log.subject = obj?.subject || logConfig?.subject\r\n\r\n    //*************************IF DECLINED, UPDATE LOG AND RETURN LOG*/    \r\n    if (obj.declined) {\r\n        log.history.action = 'Solicitação indeferida'\r\n        log.status = 'Solicitação indeferida'\r\n        log.completed = true\r\n\r\n        const post = axios.post('/api/logs', { log, collection })\r\n        return post\r\n    }\r\n\r\n    //*************************CASO APROVADO, CONCLUI A SOLICITAÇÃO E ALTERA METADADOS DOS ARQUIVOS PARA TEMP:FALSE*/    \r\n    if (obj.approved && !obj.declined) {\r\n        log.history.action = logConfig?.concludedAction || 'Solicitação concluída'\r\n        log.status = 'Solicitação concluída'\r\n        log.completed = true\r\n        updateFilesMetadata(obj, filesCollection)\r\n    }\r\n\r\n    //********************** Upload files and get their Ids***********************/    \r\n    const filesIds = await postFilesReturnIds(obj?.history?.files, obj?.metadata, log?.completed, filesEndPoint)\r\n\r\n    if (filesIds)\r\n        log.history.files = filesIds\r\n\r\n    const { metadata, approved, demandFiles, ...filteredLog } = log\r\n    //**********************reestablish path**********************\r\n    logRoutes = JSON.parse(JSON.stringify(logRoutesConfig))\r\n    logConfig = logRoutes.find(e => path.match(e.path))\r\n\r\n    //**********************request and return promisse**********************\r\n\r\n    //console.log(JSON.stringify(filteredLog))\r\n    const post = axios.post('/api/logs', { log: filteredLog, collection })\r\n    return post\r\n}","import React from 'react'\r\n\r\nexport default function autoComplete({ collection = [], datalist, value, empresas }) {    \r\n    \r\n    if (value?.length > 2 && typeof collection !== 'string') {\r\n        if(datalist === 'razaoSocial' && empresas && empresas[0]) collection = empresas\r\n        return (\r\n            <datalist id={datalist}>\r\n                {\r\n                    collection.map((item, index) => {\r\n\r\n                        return (\r\n                            <option key={index}>{item[datalist]}</option>\r\n                        )\r\n                    })}\r\n            </datalist>\r\n        )\r\n    } else {\r\n        return null\r\n    }\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport AutoComplete from '../Utils/autoComplete'\r\nimport './commonStyles.css'\r\n\r\nexport default function SelectEmpresa(props) {\r\n\r\n    const\r\n        [enableSelect, setEnabled] = useState(true),\r\n        { empresas, handleInput, handleBlur, shared, headerTitle } = props,\r\n        { razaoSocial, delegatarioCompartilhado, activeStep, demand } = props.data,\r\n        list = 'razaoSocial'\r\n\r\n    //Configure the form. If shared is present in state, another form will be pusshed into the array (CadVehicles)\r\n    let headerTitles = [{ title: 'Selecione a Viação', list, name: list, value: razaoSocial }]\r\n    if (shared)\r\n        headerTitles.push({ title: 'Empresa autorizada a compartilhar', list, name: 'delegatarioCompartilhado', value: delegatarioCompartilhado })\r\n\r\n    //Render field or title conditionally\r\n    useEffect(() => {\r\n        if (demand || activeStep > 0)\r\n            setEnabled(false)\r\n        else if (activeStep === 0)\r\n            setEnabled(true)\r\n\r\n        //focus no campo de preencher o nome da empresa\r\n        const selectInput = document.getElementsByName('razaoSocial')\r\n        if (enableSelect && selectInput[0])\r\n            selectInput[0].focus()\r\n\r\n    }, [demand, activeStep, enableSelect])\r\n\r\n    if (enableSelect) {\r\n\r\n\r\n        return (\r\n            <div className={props.hasOwnProperty('shared') ? 'flex center' : 'paper flex center'} style={{ width: '100%', marginBottom: 0 }}>\r\n                {\r\n                    headerTitles.map(({ title, list, name, value }, i) =>\r\n                        <div className='flexColumn' key={i}>\r\n                            <h4 style={{ margin: '5px 0', textAlign: 'center' }}>{title}</h4>\r\n                            <input\r\n                                list={list}\r\n                                name={name}\r\n                                className='selectEmpresa'\r\n                                value={value}\r\n                                onChange={handleInput}\r\n                                onBlur={handleBlur}\r\n                            />\r\n                            <AutoComplete\r\n                                collection={empresas}\r\n                                datalist={list}\r\n                                value={value}\r\n                            />\r\n                        </div>\r\n                    )\r\n                }\r\n            </div >\r\n        )\r\n    }\r\n    else return (\r\n        <>\r\n            <span className='selectedEmpresa'> {headerTitle || demand?.empresa || ''} </span>\r\n        </>\r\n    )\r\n}","import React, { Fragment } from 'react'\r\n\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport AutoComplete from '../Utils/autoComplete'\r\n//import { clearFormat } from '../Utils/formatValues'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n    textField: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        marginTop: '1px',\r\n        marginBottom: '1px',\r\n\r\n        fontSize: '0.8rem',\r\n        fontColor: '#bbb',\r\n        textAlign: 'center',\r\n    },\r\n    select: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        marginTop: '2px',\r\n        marginBottom: '2px',\r\n        background: '#fafafa',\r\n        fontSize: '0.8rem',\r\n        fontColor: '#bbb',\r\n        textAlign: 'center',\r\n    },\r\n    helperText: {\r\n        margin: '2px 0',\r\n        fontSize: '0.7rem'\r\n    },\r\n}))\r\n\r\nexport default function TextInput({ handleInput, handleBlur, form, data, empresas, selectOptions, disableAll, style = {}, disableSome = [] }) {\r\n\r\n    const classes = useStyles(),\r\n        { helperText } = classes\r\n\r\n    const errorHandler = (el) => {\r\n        let value = data[el.field]\r\n        if (!value) return\r\n\r\n        if (el.errorHandler && el.errorHandler(value)) return false\r\n        else if (value && el.errorHandler && !el.errorHandler(value)) return true\r\n\r\n        if (value?.length < el?.minLength) return true\r\n\r\n        if (el.type === 'number') {\r\n            if (value > el.max || value < el.min) return true\r\n            else return false\r\n        }\r\n\r\n        if (typeof value !== 'string') value = value.toString()\r\n        if (el.pattern) return value.match(el.pattern) === null\r\n        else return false\r\n    }\r\n\r\n    const helper = (el) => {\r\n        let value = data[el.field]\r\n        if (!value) return ' '\r\n        if (el.errorHandler && el.errorHandler(value)) return '✓'\r\n        else if (value && el.errorHandler && !el.errorHandler(value)) return '✘'\r\n\r\n        if (value?.length < el?.minLength) return '✘'\r\n        if (value?.length >= el?.minLength) return '✓'\r\n\r\n        if (typeof value !== 'string') value = value.toString()\r\n        if (value > el.max || value < el.min) return 'Valor inválido'\r\n        else if (value.match(el.pattern) === null) return '✘'\r\n        else if (el.pattern && value.match(el.pattern) !== null) return '✓'\r\n        else return ' '\r\n    }\r\n\r\n    return (\r\n        <div className='flex center' style={{ ...style }}>\r\n            {\r\n                form.map((el, i) => (\r\n                    <Fragment key={i}>\r\n                        <TextField\r\n                            name={el.field}\r\n                            label={el.label}\r\n                            margin={el.margin}\r\n                            className={classes.textField}\r\n                            onChange={handleInput}\r\n                            onBlur={handleBlur}\r\n                            type={el.type || ''}\r\n                            error={errorHandler(el)}\r\n                            helperText={helper(el)}\r\n                            FormHelperTextProps={{ className: helperText }}\r\n                            select={el.select || false}\r\n                            value={data[el.field] || ''}\r\n                            disabled={el.disabled || disableAll || disableSome.includes(el.field) || false}\r\n                            InputLabelProps={{\r\n                                className: classes.textField,\r\n                                shrink: el.type === 'date' || undefined,\r\n                                style: { fontSize: '0.7rem', fontWeight: 400, color: '#888', fontFamily: '\\'Segoe UI\\', Tahoma, Geneva, Verdana, sans-serif' }\r\n                            }}\r\n                            inputProps={{\r\n                                style: {\r\n                                    background: el.disabled && data.disable ? '#fff' : '#fafafa',\r\n                                    fontSize: '0.85rem', textAlign: 'center', color: '#000', width: el.width || 300, height: '7px',\r\n                                    fontFamily: '\\'Segoe UI\\', Tahoma, Geneva, Verdana, sans-serif'\r\n                                },\r\n                                value: `${data[el.field] || ''}`,\r\n                                list: el.datalist || '',\r\n                                maxLength: el.maxLength || '',\r\n                                minLength: el.minLength || '',\r\n                                max: el.max || '',\r\n                            }}\r\n\r\n                            multiline={el.multiline || false}\r\n                            rows={el.rows || null}\r\n                            variant={el.variant || 'filled'}\r\n                            fullWidth={el.fullWidth || false}\r\n                            SelectProps={{\r\n                                style: {\r\n                                    background: el.disabled && data.disable ? '#fff' : '#fafafa',\r\n                                    fontSize: '0.9rem', textAlign: 'center', color: '#555', fontWeight: 400,\r\n                                    width: 325, height: '44px'\r\n                                }\r\n                            }}\r\n                        >\r\n                            {el.select === true ?\r\n                                selectOptions ?\r\n                                    selectOptions.map((opt, i) =>\r\n                                        <MenuItem key={i} value={opt} >\r\n                                            {opt}\r\n                                        </MenuItem>\r\n                                    )\r\n                                    :\r\n                                    el.options.map((opt, i) =>\r\n                                        <MenuItem key={i} value={opt} >\r\n                                            {opt}\r\n                                        </MenuItem>\r\n                                    )\r\n                                : null\r\n                            }\r\n\r\n                        </TextField>\r\n                        {el.autoComplete === true && <AutoComplete\r\n                            collection={data[el.collection]}\r\n                            empresas={empresas}\r\n                            datalist={el.datalist}\r\n                            value={data[el.field] || ''}\r\n                        />\r\n                        }\r\n                    </Fragment>\r\n                ))\r\n            }\r\n        </div>\r\n\r\n    )\r\n}","import React from 'react'\r\n\r\nexport default function FormSubtiltle({ subtitle, style = {} }) {\r\n    return (\r\n        <div className='subtitle' style={style}>\r\n            <i className='material-icons subtitle__helper'>arrow_forward</i>\r\n            <span className='subtitle__text'>\r\n                {subtitle}\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n","export const vistoriaForm = [\r\n    {\r\n        field: 'cilindros',\r\n        label: 'Cilindros',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 12,\r\n        step: 1\r\n    },\r\n    {\r\n        field: 'potencia',\r\n        label: 'Potência (cv)',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 600\r\n    },\r\n    {\r\n        field: 'eixos',\r\n        label: 'Eixos',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 8\r\n    },\r\n    {\r\n        field: 'pneumaticos',\r\n        label: 'Pneumáticos',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 20\r\n    },\r\n    {\r\n        field: 'pesoDianteiro',\r\n        label: 'Peso Dianteiro (kg)',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 12000\r\n    },\r\n    {\r\n        field: 'pesoTraseiro',\r\n        label: 'Peso Traseiro (kg)',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 15000\r\n    },\r\n    {\r\n        field: 'poltronas',\r\n        label: 'Poltronas',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 120\r\n    },\r\n    {\r\n        field: 'piquesPoltrona',\r\n        label: 'Piques poltrona',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 12\r\n    },\r\n    {\r\n        field: 'distanciaMinima',\r\n        label: 'Distância Mínima (cm)',\r\n        margin: 'normal',\r\n        type: 'number',        \r\n        max: 150\r\n    },\r\n    {\r\n        field: 'distanciaMaxima',\r\n        label: 'Distância Máxima (cm)',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 150\r\n    }   \r\n]","import { vistoriaForm } from './vistoriaForm'\r\n\r\nexport const cadVehicleForm = [[{\r\n    field: 'placa',\r\n    label: 'Placa',\r\n    margin: 'normal',\r\n    maxLength: 8,\r\n    pattern: '[a-zA-Z]{3}[-]?[ ]?\\\\d{4}|[A-Z]{3}[-]?[ ]?[0-9]{1}[A-Z]{1}[0-9]{2}'\r\n},\r\n{\r\n    field: 'renavam',\r\n    label: 'Renavam',\r\n    margin: 'normal',\r\n    maxLength: 11,\r\n    pattern: /^(\\d{9}|\\d{11})$/\r\n},\r\n{\r\n    field: 'utilizacao',\r\n    label: 'Utilização',\r\n    margin: 'normal',\r\n    select: true,\r\n    options: ['Convencional', 'Executivo', 'Leito', 'Semi-Leito', 'Urbano']\r\n},\r\n{\r\n    field: 'nChassi',\r\n    label: 'Número do Chassi',\r\n    margin: 'normal',\r\n    maxLength: 17\r\n},\r\n{\r\n    field: 'modeloChassi',\r\n    label: 'Modelo do Chassi',\r\n    margin: 'normal',\r\n    datalist: 'modeloChassi',\r\n    autoComplete: true,\r\n    collection: 'modelosChassi'\r\n},\r\n{\r\n    field: 'anoChassi',\r\n    label: 'Ano do Chassi',\r\n    margin: 'normal',\r\n    type: 'number',\r\n    max: Number(new Date().getFullYear()),\r\n},\r\n{\r\n    field: 'valorChassi',\r\n    label: 'Valor do Chassi (R$)',\r\n    margin: 'normal',\r\n    zero: true,\r\n    pattern: '^.{9,12}$',\r\n    minLength: 8,\r\n    maxLength: 11\r\n},\r\n{\r\n    field: 'modeloCarroceria',\r\n    label: 'Modelo da Carroceria',\r\n    margin: 'normal',\r\n    datalist: 'modelo',\r\n    autoComplete: true,\r\n    collection: 'carrocerias'\r\n},\r\n{\r\n    type: 'number',\r\n    field: 'anoCarroceria',\r\n    label: 'Ano da Carroceria',\r\n    margin: 'normal',\r\n    max: Number(new Date().getFullYear() + 1)\r\n},\r\n{\r\n    field: 'valorCarroceria',\r\n    label: 'Valor da Carroceria (R$)',\r\n    margin: 'normal',\r\n    zero: true,\r\n    pattern: '^.{9,12}$',\r\n    minLength: 8,\r\n    maxLength: 11\r\n},\r\n{\r\n    field: 'dominio',\r\n    label: 'Situação da Propriedade',\r\n    margin: 'normal',\r\n    select: true,\r\n    options: ['Veículo próprio', 'Leasing', 'Possuidor']\r\n},\r\n{\r\n    field: 'cores',\r\n    label: 'Cores',\r\n    margin: 'normal',\r\n    maxLength: 50\r\n}\r\n]]\r\n    .concat([vistoriaForm])    ","import React from 'react'\r\n\r\nexport default function ClosePopUpButton({ close, title = 'Fechar' }) {\r\n    return (\r\n        <div style={{\r\n            position: 'absolute',\r\n            top: '0.4%',\r\n            right: '0.4%'\r\n        }}>\r\n            <div>\r\n                <i\r\n                    className=\"material-icons right\"\r\n                    title={title}\r\n                    style={{ cursor: 'pointer', color: 'red' }}\r\n                    onClick={close} >\r\n                    close\r\n                </i>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport ClosePopUpButton from '../Reusable Components/ClosePopUpButton'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\n\r\nimport '../Layouts/popUp.css'\r\n\r\nexport default function AddEquipa({ data, type, equipamentos, handleCheck, close }) {\r\n\r\n    if (Array.isArray(equipamentos) && equipamentos[0]?.item) equipamentos = equipamentos.sort((a, b) => a.item.localeCompare(b.item))\r\n\r\n    return <div className='popUpWindow' style={{ right: '25%', left: '25%' }}>\r\n        <h4 className='equipaHeader'>{type === 'equipamentos' ? 'Equipamentos' : 'Itens de Acessibilidade'}</h4> <hr />\r\n        <div className=\"checkListContainer\">\r\n            {\r\n                equipamentos.map((eq, i) =>\r\n                    <span className=\"checkListEquipa\" key={i}>\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                    checked={data[eq.item]}\r\n                                    value={eq.item}\r\n                                    onChange={() => handleCheck(eq.item, type)} />\r\n                            }\r\n                            label={<p className=\"checkListLabel\">{eq.item}</p>}\r\n                        />\r\n                    </span>\r\n                )\r\n            }\r\n        </div>\r\n        <ClosePopUpButton close={close} />\r\n    </div>\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\n\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport TextInput from '../Reusable Components/TextInput'\r\nimport FormSubtiltle from '../Reusable Components/FormSubtiltle'\r\n\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport Button from '@material-ui/core/Button'\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { cadVehicleForm } from '../Forms/cadVehicleForm'\r\n\r\nimport AddEquipa from './AddEquipa'\r\n\r\nimport './veiculos.scss'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    button: {\r\n        marginRight: '15px'\r\n    }\r\n}))\r\n\r\nexport default function ({ redux, data, handleInput, handleBlur, handleEquipa, handleCheck, closeEquipa, resetShared }) {\r\n\r\n    const\r\n        [shared, setShared] = useState(false),\r\n        { button } = useStyles(),\r\n        { empresas, equipamentos, acessibilidade, modelosChassi, carrocerias } = redux,\r\n        { activeStep, addEquipa, subtitle, selectedEmpresa, type, placa, reactivated } = data,\r\n        form = cadVehicleForm[activeStep]\r\n\r\n    let eqCollection = equipamentos\r\n    if (type === 'acessibilidade') eqCollection = acessibilidade\r\n\r\n    data.modelosChassi = modelosChassi\r\n    data.carrocerias = carrocerias\r\n\r\n    useEffect(() => {               //reset shared after submit\r\n        if (resetShared) setShared(false)\r\n    }, [resetShared])\r\n\r\n    let conditionalSubtitle = subtitle[activeStep]\r\n    if (reactivated)\r\n        conditionalSubtitle += ' (reativação de veículo)'\r\n\r\n    return (\r\n        <>\r\n            <header className={activeStep !== 0 ? 'flex center' : 'paper flex center'} style={{ width: '100%' }}>\r\n                <section className='flexColumn' style={{ marginBottom: '10px' }}>\r\n                    <SelectEmpresa\r\n                        data={data}\r\n                        shared={shared}\r\n                        empresas={empresas}\r\n                        headerTitle={placa && selectedEmpresa && `Cadastro de veículo ${placa} - ${selectedEmpresa?.razaoSocial}`}\r\n                        handleBlur={handleBlur}\r\n                        handleInput={handleInput}\r\n                    />\r\n                </section>\r\n                {\r\n                    activeStep === 0 &&\r\n                    <section className=\"flex center\" style={{ width: '100%', margin: '-7px 0 -4px 0' }}>\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                    checked={shared === true}\r\n                                    onChange={() => setShared(!shared)}\r\n                                    value={shared}\r\n                                />\r\n                            }\r\n                            label={\r\n                                <h4 style={{ color: '#2979ff', fontSize: '0.7rem' }}>\r\n                                    Veículo Compartilhado?\r\n                                </h4>\r\n                            }\r\n                        />\r\n                    </section>\r\n                }\r\n            </header>\r\n            {\r\n                selectedEmpresa &&\r\n                <main>\r\n                    {activeStep < 2 &&\r\n                        <section className='paper' style={{ paddingBottom: '25px' }}>\r\n                            <FormSubtiltle subtitle={conditionalSubtitle} />\r\n                            <TextInput\r\n                                form={form}\r\n                                data={data}\r\n                                handleBlur={handleBlur}\r\n                                handleInput={handleInput}\r\n                            />\r\n                        </section>}\r\n                    {activeStep === 0 &&\r\n                        <section className='flex center' style={{ marginTop: '15px' }}>\r\n                            <Button\r\n                                variant=\"outlined\"\r\n                                size=\"small\"\r\n                                color=\"primary\"\r\n                                className={button}\r\n                                onClick={() => handleEquipa('equipamentos')}\r\n                            >\r\n                                <AddIcon />\r\n                                                Equipamentos\r\n                            </Button>\r\n                            <Button\r\n                                variant=\"outlined\"\r\n                                size=\"small\"\r\n                                color=\"primary\"\r\n                                className={button}\r\n                                onClick={() => handleEquipa('acessibilidade')}\r\n                            >\r\n                                <AddIcon />\r\n                                        Acessibilidade\r\n                            </Button>\r\n                        </section>}\r\n                    {\r\n                        addEquipa && <AddEquipa\r\n                            equipamentos={eqCollection}\r\n                            close={closeEquipa}\r\n                            handleCheck={handleCheck}\r\n                            data={data} />\r\n                    }\r\n                </main>\r\n            }\r\n        </>\r\n    )\r\n}","import React from 'react'\r\n\r\nexport default function RemoveFileButton({ name, removeFile }) {\r\n    return (\r\n        <div style={{\r\n            position: 'absolute',\r\n            top: '0.4%',\r\n            right: '0.4%'\r\n        }}>\r\n            <div>\r\n                <i\r\n                    className=\"material-icons right\"\r\n                    title='Remover arquivo'\r\n                    style={{ cursor: 'pointer', color: 'red' }}\r\n                    onClick={() => removeFile(name)}>\r\n                    close\r\n                        </i>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { Fragment, useState, useEffect } from 'react'\r\nimport Dropzone from 'react-dropzone'\r\n\r\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\r\nimport DescriptionOutlinedIcon from '@material-ui/icons/DescriptionOutlined';\r\nimport RemoveFileButton from './RemoveFileButton';\r\n\r\n\r\nexport default function DragAndDrop({ title, name, formData, handleFiles, dropDisplay, single, style, demandFiles, fileToRemove, removeFile }) {\r\n\r\n    const [fileName, setFileName] = useState()\r\n    const [fileExists, setFileExistance] = useState()\r\n\r\n    //*************Set demandFiles names, if there are any\r\n    useEffect(() => {\r\n        if (demandFiles && demandFiles[0]) {\r\n            demandFiles.forEach(({ filename, metadata }) => {\r\n                if (name === metadata.fieldName) {\r\n                    setFileName(filename)\r\n                    setFileExistance(true)\r\n                }\r\n            })\r\n        }\r\n    }, [demandFiles, name])\r\n\r\n\r\n    //*************If there's formData from props there's a new file being attached.\r\n    useEffect(() => {\r\n        if (formData instanceof FormData) {\r\n            for (let pair of formData.entries()) {\r\n                if (name === pair[0]) {     //Attach the file if there'no command to remove\r\n                    setFileName(pair[1].name)\r\n                    setFileExistance(false)\r\n                    //console.log(pair[0], pair[1])\r\n                }\r\n            }\r\n        } else if (!formData && !demandFiles) setFileName(null)\r\n    }, [formData, name, demandFiles, fileToRemove])\r\n\r\n    //*****************Remove file name from rendered field *********/    \r\n    useEffect(() => {\r\n\r\n        if (fileToRemove === name) {\r\n            const demandFile = demandFiles?.find(f => f?.metadata?.fieldName === fileToRemove)\r\n\r\n            if (fileToRemove && demandFile) {\r\n                setFileName(demandFile.filename)\r\n                setFileExistance(true)\r\n            }\r\n            else if (fileToRemove && fileToRemove === name) {\r\n                setFileName(undefined)\r\n            }\r\n        }\r\n    }, [demandFiles, fileToRemove, handleFiles, name])\r\n\r\n    return (\r\n        <div style={style ? style : null}>\r\n            <div style={{ position: 'relative', marginRight: '8px' }}>\r\n                {title ? <p className='fileInput'>{title || ''}</p>\r\n                    : <br />}\r\n                {fileName && !fileExists &&\r\n                    <RemoveFileButton removeFile={removeFile} name={name} />\r\n                }\r\n            </div>\r\n            <Dropzone onDrop={e => handleFiles(e, name)}>\r\n                {({ getRootProps, getInputProps }) => (\r\n                    <div\r\n                        style={fileExists ? { backgroundColor: '#aaa' } : {}}\r\n                        className={fileName ? 'dropBox fileAttached' : single ? 'dropBox' : 'multipleDropBox'} {...getRootProps()}>\r\n                        <input {...getInputProps()} />\r\n                        {\r\n                            fileName ?\r\n                                <Fragment>\r\n                                    <div>\r\n                                        <DescriptionOutlinedIcon className='icon' />\r\n                                        {fileName}\r\n                                    </div>\r\n                                    {single &&\r\n                                        <span>(clique ou arraste outro arquivo para alterar)</span>\r\n                                    }\r\n                                </Fragment>\r\n                                :\r\n                                <div> <AttachFileIcon className='icon' />\r\n                                    <span>  {dropDisplay}</span>\r\n                                </div>\r\n                        }\r\n                    </div>\r\n                )}\r\n            </Dropzone>\r\n        </div>\r\n    )\r\n}\r\n","export const cadVehicleFiles = [\r\n    { title: 'CRLV do Veículo', name: 'crlv' },\r\n    { title: 'Declaração de Responsabilidade de Manutenção', name: 'declaracao' },\r\n    { title: 'Certificado de Vistoria', name: 'vistoria' },\r\n    { title: 'DAE Quitada', name: 'dae' },\r\n    { title: 'Laudo de Pesagem', name: 'pesagem' },\r\n    //{ title: 'Apólice do Seguro', name: 'apoliceDoc' },\r\n]","export const altDadosFiles = [\r\n    { title: 'Documento de Transferência', name: 'transferenciaDoc' },\r\n    { title: 'Declaração de Responsabilidade de Manutenção', name: 'declaracao' },\r\n    { title: 'Certificado de Vistoria', name: 'vistoria' },\r\n    { title: 'DAE Quitada', name: 'dae' },\r\n    { title: 'Laudo de Pesagem', name: 'pesagem' },\r\n    { title: 'CRLV com nova placa', name: 'newPlateDoc' },\r\n]","import React, { Fragment } from 'react'\r\n\r\nimport DragAndDrop from '../Reusable Components/DragAndDrop'\r\nimport FormSubtiltle from '../Reusable Components/FormSubtiltle'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { cadVehicleFiles } from '../Forms/cadVehicleFiles'\r\nimport { altDadosFiles } from '../Forms/altDadosFiles'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n    root: {\r\n        flexGrow: '1',\r\n        margin: '5px',\r\n        padding: '8px',\r\n    },\r\n\r\n    sendButton: {\r\n        margin: '3% 0 3% 0',\r\n        backgroundColor: 'teal',\r\n        float: 'right'\r\n    },\r\n    text: {\r\n        textAlign: 'left',\r\n        margin: theme.spacing(2),\r\n        fontSize: '0.9rem',\r\n        fontWeight: '500',\r\n        color: '#333'\r\n    },\r\n    item: {\r\n        margin: '0 0 18px 0',\r\n        padding: '0 5px'\r\n    }\r\n}))\r\n\r\nexport default function VehicleDocs({ handleFiles, parentComponent, dropDisplay, formData, insuranceExists, demandFiles, removeFile, fileToRemove }) {\r\n    const { root, item } = useStyles()\r\n\r\n    let filesForm\r\n    if (parentComponent === 'cadastro') filesForm = cadVehicleFiles\r\n    if (parentComponent === 'altDados') filesForm = altDadosFiles\r\n\r\n    return (\r\n        <div className='paper' style={{color: '#555'}} >\r\n            <FormSubtiltle subtitle='Anexe os documentos solicitados nos campos abaixo' />\r\n            <Grid container className={root}>\r\n                {filesForm.map(({ title, name }, k) =>\r\n                    name === 'apoliceDoc' && insuranceExists ? null :\r\n                        <Fragment key={k}>\r\n                            <Grid item xs={10} md={4} className={item}>\r\n                                <DragAndDrop\r\n                                    title={title}\r\n                                    name={name}\r\n                                    formData={formData}\r\n                                    dropDisplay={dropDisplay}\r\n                                    handleFiles={handleFiles}\r\n                                    demandFiles={demandFiles}\r\n                                    removeFile={removeFile}\r\n                                    fileToRemove={fileToRemove}\r\n                                />\r\n                            </Grid>\r\n                        </Fragment>\r\n                )}\r\n            </Grid>\r\n        </div>\r\n    )\r\n}","import axios from 'axios'\r\n\r\nconst downloadFile = (id, originalName, collection, fieldName) => {\r\n    if (fieldName && fieldName === 'apoliceDoc') collection = 'empresaDocs'\r\n        axios({\r\n            url: `/api/mongoDownload/?collection=${collection}&id=${id}`,\r\n            method: 'GET',\r\n            responseType: 'blob', // important\r\n        }).then((response) => {\r\n            const url = window.URL.createObjectURL(new Blob([response.data]));\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            link.setAttribute('download', originalName);\r\n            document.body.appendChild(link);\r\n            link.click();\r\n        })\r\n            .catch(err => {\r\n                console.log(err)\r\n                //          logout(err)\r\n            })\r\n}\r\n\r\nexport default downloadFile","import React from 'react'\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\nimport InsertDriveFileOutlinedIcon from '@material-ui/icons/InsertDriveFileOutlined';\r\nimport downloadFile from '../Utils/downloadFile';\r\n\r\nconst divContainer = {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    width: '100%',\r\n    alignContent: 'center',\r\n    flexWrap: 'wrap'\r\n}\r\n\r\nconst divFiles = {\r\n    textAlign: 'center',\r\n    alignItems: 'flex-start',\r\n    height: '40px',\r\n    border: '1px #ccc solid',\r\n    padding: '7px 8px 0 8px',\r\n    margin: '1% 1% 0.5% 1%',\r\n    fontSize: '0.8rem',\r\n    backgroundColor: '#f6f6f6',\r\n    borderRadius: '6px',\r\n\r\n}\r\n\r\nconst icon = {\r\n    verticalAlign: 'middle',\r\n    cursor: 'pointer',\r\n    paddingLeft: '2%'\r\n}\r\n\r\nconst fileIcon = {\r\n    verticalAlign: 'middle',\r\n    padding: '0 0% 0 2%',\r\n\r\n}\r\n\r\nexport default function ShowLocalFiles({ form, files, demand, demandFiles, collection, style = {} }) {\r\n\r\n    const createLink = (key, fileName) => {\r\n\r\n        const file = files.get(key)\r\n\r\n        const url = window.URL.createObjectURL(file);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n\r\n        //Se for imagem ou pdf, abrir em outra aba\r\n        if (file && (file.type === 'application/pdf' || file.type.match('image/'))) {\r\n            link.setAttribute('rel', \"noopener\")\r\n            link.setAttribute('target', \"_blank\")\r\n            link.setAttribute('title', fileName)\r\n        }\r\n        else link.setAttribute('download', fileName)\r\n        document.body.appendChild(link);\r\n        link.click();\r\n    }\r\n\r\n    let fileArray = []\r\n\r\n    //Se tiver demanda, pegar os dados do\r\n    if (demandFiles) {\r\n        demandFiles.forEach(file => {\r\n            form.forEach(({ name, title }) => {\r\n                if (file?.metadata?.fieldName === name)\r\n                    fileArray.push({ id: file.id, label: title, fieldName: name, fileName: file.filename, storage: 'server' })\r\n            })\r\n        })\r\n    }\r\n\r\n    //******LÓGICA PARA Q O PUSH() DO FILEARRAY SOBRESCREVA QQ OUTRO OBJETO COM MESMO FIELDNAME [criada]\r\n    if (files) for (let pair of files.entries()) {\r\n        form.forEach(({ name, title }) => {\r\n            if (name === pair[0]) {\r\n                if (pair[1] && pair[1].name) {\r\n                    const index = fileArray.findIndex(obj => obj?.fieldName === name)\r\n                    if (index !== -1)\r\n                        fileArray[index] = { label: title, fieldName: name, fileName: pair[1].name, storage: 'local' }\r\n                    else\r\n                        fileArray.push({ label: title, fieldName: name, fileName: pair[1].name, storage: 'local' })\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    return <React.Fragment>\r\n        <div style={divContainer}>\r\n            {fileArray.map((f, i) =>\r\n                <div style={{ ...divFiles, ...style }} key={i}>\r\n                    <InsertDriveFileOutlinedIcon style={fileIcon} />\r\n                    <span style={{ verticalAlign: 'middle', }}>\r\n                        {' '} {f.label}\r\n                    </span>\r\n                    <GetAppIcon style={icon}\r\n                        onClick={() => f.storage === 'local' ?\r\n                            createLink(f.fieldName, f.fileName)\r\n                            : downloadFile(f.id, f.fileName, collection, f.fieldName)} />\r\n                </div>\r\n            )}\r\n        </div>\r\n    </React.Fragment >\r\n}","import React from 'react'\r\nimport moment from 'moment'\r\nimport downloadFile from '../Utils/downloadFile'\r\n\r\nexport default function StandardTable({ length, title, labels, fields, values, style, docs, alteredElements = [] }) {\r\n\r\n    const dateFormat = value => {\r\n        if (moment(value, 'YYYY-MM-DDTHH:mm:ss.SSSZZ', true).isValid()) {\r\n            return moment(value, moment.ISO_8601, true).format('DD/MM/YYYY')\r\n        }\r\n        else {\r\n            return value\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th className='tHeader'\r\n                        style={style}\r\n                        colSpan={length}>{title}</th>\r\n                </tr>\r\n                <tr>\r\n                    {labels.map((l, i) => <th key={i} style={style}>{l}</th>)}\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    {values.map((v, j) =>\r\n                        <td className='review' key={j}\r\n                            style={{ ...style, color: alteredElements.includes(fields[j]) ? 'red' : '#000' }}\r\n                            onClick={() => docs && docs.id ? downloadFile(docs.id, docs.filename, 'vehicleDocs', docs.metadata.fieldName) : null}>\r\n                            {dateFormat(v)}\r\n                        </td>\r\n                    )}\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\n","import React, { Fragment } from 'react'\r\n\r\nimport ShowLocalFiles from '../Reusable Components/ShowLocalFiles'\r\nimport StandardTable from '../Reusable Components/StandardTable'\r\n\r\nimport Paper from '@material-ui/core/Paper'\r\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        color: theme.palette.text.secondary,\r\n        width: \"100%\",\r\n        padding: '8px 0 5px 0',\r\n        height: 'auto'\r\n    }\r\n}))\r\n\r\nexport default function Revisao({ data, parentComponent, form, filesForm, files }) {\r\n    const\r\n        classes = useStyles(),\r\n        { paper } = classes,\r\n        { acessibilidade, equipamentos, alteracoes, demand, demandFiles } = data,\r\n        originalVehicle = data?.originalVehicle\r\n\r\n    let vehicleDetails = [],\r\n        obj = {},\r\n        newForm = [],\r\n        filledForm = [],\r\n        ultimateData,\r\n        alteredElements = []\r\n\r\n    form.forEach(f => {\r\n        f.forEach(e => {\r\n            if (data.hasOwnProperty([e.field])) {\r\n                Object.assign(obj, { [e.field]: data[e.field] })\r\n                newForm.push(e)\r\n            }\r\n        })\r\n        vehicleDetails.push(obj)\r\n        filledForm.push(newForm)\r\n        obj = {}\r\n        newForm = []\r\n    })\r\n    if (parentComponent === 'cadastro') ultimateData = [\r\n        { subtitle: 'Detalhes do veículo', form: filledForm[0] || [], data: vehicleDetails[0] },\r\n        { subtitle: 'Detalhes do seguro', form: filledForm[1] || [], data: vehicleDetails[1] },\r\n        { subtitle: 'Informações sobre a vistoria', form: filledForm[2] || [], data: vehicleDetails[2] },\r\n    ]\r\n\r\n    if (parentComponent === 'altDados') ultimateData = [\r\n        { subtitle: 'Detalhes do veículo', form: filledForm[0], data: vehicleDetails[0] },\r\n        { subtitle: 'Informações sobre a vistoria', form: filledForm[1], data: vehicleDetails[1] }\r\n    ]\r\n\r\n    if (alteracoes && typeof alteracoes === 'object') alteredElements = Object.keys(alteracoes)\r\n\r\n    if (originalVehicle) {\r\n        Object.keys(originalVehicle).forEach(key => {\r\n            if (data[key] && originalVehicle[key]) {\r\n                if (data[key] !== originalVehicle[key] && !alteredElements.includes(key)) {\r\n                    alteredElements.push(key)\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Paper className={paper}>\r\n                <main className='divTable'>\r\n                    {\r\n                        ultimateData.map(({ subtitle, form, data }, y) =>\r\n                            form && data && <Fragment key={y}>\r\n                                <StandardTable\r\n                                    length={form?.length || 1}\r\n                                    title={subtitle}\r\n                                    labels={form.map(s => s.label)}\r\n                                    fields={form.map(el => el.field)}\r\n                                    values={Object.values(data)}\r\n                                    alteredElements={alteredElements}\r\n                                />\r\n                            </Fragment>\r\n                        )}\r\n                </main>\r\n                {\r\n                    equipamentos && equipamentos[0] &&\r\n                    <section style={{ margin: '0 0 13px 20px' }}>\r\n                        <p style={{ fontWeight: 500, color: '#555' }}> Equipamentos </p>\r\n                        <p>\r\n                            {\r\n                                equipamentos && equipamentos.map((e, i) =>\r\n                                    <span style={{ fontFamily: 'Segoe UI, Tahoma, Geneva, Verdana', fontSize: '12px' }} key={i}>\r\n                                        {i !== equipamentos.length - 1 ? e + ', ' : e}\r\n                                    </span>\r\n                                )\r\n                            }\r\n                        </p>\r\n                    </section>\r\n                }\r\n                {\r\n                    acessibilidade && acessibilidade[0] &&\r\n                    <section style={{ margin: '0 0 13px 20px' }}>\r\n                        <p style={{ fontWeight: 500, color: '#555' }}> Itens de acessibilidade </p>\r\n                        <p>\r\n                            {\r\n                                acessibilidade.map((e, i) =>\r\n                                    <span style={{ fontFamily: 'Segoe UI, Tahoma, Geneva, Verdana', fontSize: '12px' }} key={i}>\r\n                                        {i !== acessibilidade.length - 1 ? e + ', ' : e}\r\n                                    </span>\r\n                                )\r\n                            }\r\n                        </p>\r\n                    </section>\r\n                }\r\n                {(files || demandFiles) &&\r\n\r\n                    //<div style={{ borderTop: '1px solid #ccc', paddingTop:'5px' }}>\r\n                    <div>\r\n                        <p style={{ margin: '0 0 13px 11px', fontWeight: '500', color: '#555' }}>\r\n                            <FileCopyOutlinedIcon style={{ verticalAlign: 'middle', padding: '0 0 0 8px' }} />\r\n                            {' Documentos'}\r\n                        </p>\r\n\r\n                        <ShowLocalFiles\r\n                            demand={demand}\r\n                            collection='vehicleDocs'\r\n                            demandFiles={demandFiles}\r\n                            form={filesForm}\r\n                            files={files}\r\n                        />\r\n                    </div>\r\n\r\n                }\r\n            </Paper >\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\n\r\nexport default function Crumbs({ links, text, demand }) {\r\n    if (demand) {\r\n        links = ['Solicitações', '/solicitacoes']\r\n        text = `solicitação nº ${demand?.numero}`\r\n    }\r\n    \r\n    return (\r\n        <Grid style={{ marginTop: '1%' }}>\r\n            <Breadcrumbs separator=\"›\" aria-label=\"breadcrumb\" >\r\n                <Link\r\n                    to='/' style={{}}\r\n                >\r\n                    <HomeIcon style={{ verticalAlign: 'middle', marginRight: '5px', paddingBottom: '3px' }} />\r\n                    <span style={{ fontSize: '0.8rem', }}>\r\n                        Página inicial\r\n                    </span>\r\n\r\n                </Link>\r\n                <Link color=\"primary\" to={links[1]} style={{ fontSize: '0.8rem' }}>\r\n                    {links[0]}\r\n                </Link>\r\n                <span style={{ fontSize: '0.8rem' }} >{text}</span>\r\n            </Breadcrumbs>\r\n        </Grid>\r\n    )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Button from '@material-ui/core/Button'\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n    button: {\r\n        margin: theme.spacing(1),\r\n        float: 'right'\r\n    },\r\n    backButton: {\r\n        margin: theme.spacing(1),\r\n        float: 'left',\r\n        color: '#333',\r\n        backgroundColor: '#eee'\r\n    },\r\n    textField: {\r\n        marginTop: '20px',\r\n        width: '100%'\r\n    }\r\n}))\r\n\r\nexport default function StepperButtons({ activeStep, setActiveStep, lastStep, handleSubmit, disabled, demand, uniqueStep, declineButtonLabel,\r\n    setShowPendencias, showPendencias, handleInput, info }) {\r\n\r\n    const classes = useStyles(), { backButton, button, textField } = classes\r\n\r\n    let role\r\n    if (demand?.status.match('Pendências')) role = 'empresa'\r\n    if (demand?.status.match('Aguardando')) role = 'seinfra'\r\n\r\n    useEffect(() => {\r\n        function nextShortcut(e) {\r\n            if (e.keyCode === 37 && e.ctrlKey && activeStep !== 0)\r\n                setActiveStep('back')\r\n            if (e.keyCode === 39 && e.ctrlKey && activeStep !== lastStep)\r\n                setActiveStep('next')\r\n            if (e.keyCode === 13 && e.ctrlKey)\r\n                handleSubmit()\r\n        }\r\n        document.addEventListener('keydown', nextShortcut)\r\n        return () => document.removeEventListener('keydown', nextShortcut)\r\n    })\r\n\r\n    return (\r\n        <div style={{ width: '100%' }}>\r\n            {activeStep < lastStep ?\r\n                <>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        className={backButton}\r\n                        title={activeStep !== 0 ? 'Ctrl + ←' : null}\r\n                        onClick={() => setActiveStep('back')}\r\n                        disabled={activeStep === 0}\r\n                    >\r\n                        Voltar\r\n                </Button>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        title={!disabled ? 'Ctrl + →' : null}\r\n                        className={button}\r\n                        onClick={() => setActiveStep('next')}\r\n                        disabled={disabled}\r\n                    >\r\n                        Avançar\r\n                </Button>\r\n                </>\r\n                :\r\n                <div style={{ display: 'flex', flexDirection: 'column', width: '100%' }}>\r\n                    {role === 'seinfra' && !showPendencias ? null\r\n                        :\r\n                        <TextField\r\n                            name='info'\r\n                            className={textField}\r\n                            value={info}\r\n                            label={\r\n                                !demand || role === 'empresa' ? 'Observações/informações complementares'\r\n                                    :\r\n                                    demand && uniqueStep ? 'Motivos para o indeferimento'\r\n                                        :\r\n                                        'Pendências/irregularidades para a aprovação'}\r\n                            type='text'\r\n                            onChange={handleInput}\r\n                            InputLabelProps={{ shrink: true, style: { fontWeight: 600, marginBottom: '5%' } }}\r\n                            inputProps={{ style: { paddingBottom: '2%' }, maxLength: 600 }}\r\n                            multiline\r\n                            rows={3}\r\n                            variant='outlined'\r\n                        />\r\n                    }\r\n                    <div style={{ display: 'flex', width: '100%' }}>\r\n                        {activeStep === lastStep && !uniqueStep &&\r\n                            <Button\r\n                                variant=\"contained\"\r\n                                className={backButton}\r\n                                title={activeStep !== 0 ? 'Ctrl + ←' : null}\r\n                                onClick={() => setActiveStep('back')}\r\n                                disabled={activeStep === 0}\r\n                            >\r\n                                Voltar\r\n                        </Button>}\r\n                        <div style={{ display: 'flex', justifyContent: 'flex-end', width: '100%' }}>\r\n                            {\r\n                                !demand || role === 'empresa' ?\r\n                                    <Button\r\n                                        variant='contained'\r\n                                        color=\"primary\"\r\n                                        className={button}\r\n                                        onClick={() => handleSubmit()}\r\n                                    >\r\n                                        Enviar solicitação\r\n                                    </Button>\r\n                                    :\r\n                                    <>\r\n                                        <Button\r\n                                            variant='outlined'\r\n                                            color=\"secondary\"\r\n                                            className={button}\r\n                                            onClick={() => setShowPendencias()}\r\n                                        >\r\n                                            {showPendencias ? 'Cancelar' : declineButtonLabel || 'Registrar pendencias'}\r\n                                        </Button>\r\n                                        <Button\r\n                                            variant=\"contained\"\r\n                                            color={showPendencias ? \"secondary\" : \"primary\"}\r\n                                            className={button}\r\n                                            onClick={() => showPendencias ? handleSubmit(false) : handleSubmit(true)}\r\n                                        >\r\n                                            {showPendencias ? 'Indeferir' : 'Aprovar'}\r\n                                        </Button>\r\n                                    </>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\n\r\nexport default function CustomStepper({ activeStep, steps }) {\r\n    return (\r\n        <div className='paper' style={{ padding: '15px', margin: '10px 0' }} >\r\n            <Stepper activeStep={activeStep}>\r\n                {steps.map((label, index) => {\r\n                    const stepProps = {};\r\n                    const labelProps = {};\r\n                    return (\r\n                        <Step key={label}\r\n                            {...stepProps}\r\n                        >\r\n                            <StepLabel {...labelProps}>\r\n                                {label}\r\n                            </StepLabel>\r\n                        </Step>\r\n                    )\r\n                })}\r\n            </Stepper>\r\n        </div>\r\n    )\r\n}","export const formatDate = (date, min) => {\r\n\r\n    const minutes = () => {\r\n        if (new Date(date).getMinutes() < 10) {\r\n            return '0' + new Date(date).getMinutes()\r\n        } else {\r\n            return new Date(date).getMinutes()\r\n        }\r\n    }\r\n\r\n    if (/\\d/.test(date)) {\r\n        let data = new Date(date).getDate() + '/' + (new Date(date).getMonth() + 1) + '/' + new Date(date).getFullYear()// + ', ' + new Date(date).getHours() + ':' + minutes() + 'h'\r\n        if (min) data += ', ' + new Date(date).getHours() + ':' + minutes() + 'h'\r\n        return data.toString()\r\n    } else {\r\n        return date\r\n    }\r\n}\r\n\r\nexport const formatMoney = (value = '') => {\r\n    let v = value.replace(/\\D/g, '');\r\n    v = (v / 100).toFixed(2) + '';\r\n    v = v.replace(\".\", \",\");\r\n    v = v.replace(/(\\d)(\\d{3})(\\d{3}),/g, \"$1.$2.$3,\");\r\n    v = v.replace(/(\\d)(\\d{3}),/g, \"$1.$2,\");\r\n    return v\r\n}\r\n\r\n\r\nexport const formatCpf = (input) => {\r\n    if (!input) return\r\n    else {\r\n        input = input\r\n            .replace(/\\D/g, '') // substitui qualquer caracter que nao seja numero por nada\r\n            .replace(/(\\d{3})(\\d)/, '$1.$2') // captura 2 grupos de numero o primeiro de 3 e o segundo de 1, apos capturar o primeiro grupo ele adiciona um ponto antes do segundo grupo de numero\r\n            .replace(/(\\d{3})(\\d)/, '$1.$2')\r\n            .replace(/(\\d{3})(\\d{1,2})/, '$1-$2')\r\n            .replace(/(-\\d{2})\\d+?$/, '$1') // captura 2 numeros seguidos de um traço e não deixa ser digitado mais nada\r\n    }\r\n    return input\r\n}\r\n\r\n/* export const formatCnpj = (input) => {\r\n    if (!input) return\r\n    return input.replace(/(\\d{2})(\\d{3})(\\d{3})(\\d{4})(\\d{2})/g, \"$1.$2.$3/$4-$5\");\r\n} */\r\n\r\nexport function formatCnpj(input) {\r\n\r\n    const tecla = k => k.keyCode;\r\n    document.addEventListener('keypress', tecla)\r\n\r\n    let\r\n        tam,\r\n        vr = input.toString()\r\n\r\n    vr = vr.replace(\".\", \"\");\r\n    vr = vr.replace(\"/\", \"\");\r\n    vr = vr.replace(\"-\", \"\");\r\n    tam = vr.length + 1;\r\n    if (tecla !== 14) {\r\n        if (tam === 3)\r\n            input = vr.substr(0, 2) + '.';\r\n        if (tam === 6)\r\n            input = vr.substr(0, 2) + '.' + vr.substr(2, 5) + '.';\r\n        if (tam === 10)\r\n            input = vr.substr(0, 2) + '.' + vr.substr(2, 3) + '.' + vr.substr(6, 3) + '/';\r\n        if (tam === 15)\r\n            input = vr.substr(0, 2) + '.' + vr.substr(2, 3) + '.' + vr.substr(6, 3) + '/' + vr.substr(9, 4) + '-' + vr.substr(13, 2);\r\n    }\r\n    return input\r\n}\r\n\r\nexport function clearFormat(input) {\r\n    if (!input) return\r\n    else return input.replace(/(\\.|\\/|-)/g, \"\");\r\n}\r\n\r\nexport function formatPhone(phone) {\r\n    if (!phone) return\r\n\r\n    phone = phone\r\n        .replace(/(?!\\d)./g, '')\r\n        .replace(/(\\d{2})/, '($1) ')\r\n    if (phone.length === 13) phone = phone.replace(/(\\d{4})(\\d)/, '$1-$2')\r\n    if (phone.length === 14) phone = phone.replace(/(\\d{5})(\\d)/, '$1-$2')\r\n\r\n    return phone\r\n}\r\n\r\nexport function formatShare(number) {\r\n    if (!number) return\r\n\r\n    /* if ((number.length === 4 && number.charAt(3) === '0')) {\r\n        console.log(typeof number, number)\r\n        return number\r\n    } else if (number.length === 5 && number.charAt(4) === '0') {\r\n        console.log(typeof number, number, 'ha')\r\n        return number\r\n    }\r\n */\r\n\r\n    /*   if (number.length > 1 && number.search(',') !== -1)\r\n          return number\r\n      if (number.length >= 5) {\r\n          number = Number(number)\r\n          number = +(number.toPrecision(4))\r\n      } */\r\n    if (number.length >= 5)\r\n        number = number.slice(0, 5)\r\n    return number\r\n}","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function AlertDialog({ open, alertType, close, confirm, customTitle, customMessage, tab }) {\r\n\r\n  const createAlert = type => {\r\n    let title, message, subject = ''\r\n    const subjectOptions = ['a empresa', 'o sócio', 'a procuração', 'o veículo', 'o seguro']\r\n\r\n    if (tab || tab === 0) subject = subjectOptions[tab]\r\n\r\n    if (customTitle && customMessage) {\r\n      title = customTitle\r\n      message = customMessage\r\n      return { title, message }\r\n    }\r\n\r\n    switch (type) {\r\n      case 'plateNotFound':\r\n        title = 'Placa não encontrada'\r\n        message = 'A placa informada não corresponde a nenhum veículo da frota da viação selecionada. Para cadastrar um novo veículo, selecione a opção Veículos => \"Cadastro de Veículo\" no menu acima.'\r\n        return { title, message }\r\n      case 'invalidPlate':\r\n        title = 'Placa inválida'\r\n        message = 'Certifique-se de que a placa informada é uma placa válida, com três letras seguidas de 4 números (ex: AAA-0000)'\r\n        return { title, message }\r\n      case 'plateExists':\r\n        title = 'Placa já cadastrada!'\r\n        message = 'A placa informada já está cadastrada. Para atualizar seguro, alterar dados ou solicitar baixa, utilize as opções acima. '\r\n        return { title, message }\r\n      case 'invalidModel':\r\n        title = 'Modelo não cadastrado.'\r\n        message = customMessage\r\n        return { title, message }\r\n      case 'inputError':\r\n        title = 'Preenchimento inválido.'\r\n        message = customMessage\r\n        return { title, message }\r\n      case 'fieldsMissing':\r\n        title = 'Favor preencher todos os campos.'\r\n        message = 'Os campos acima são de preenchimento obrigatório. Certifique-se de ter preenchido todos eles.'\r\n        return { title, message }\r\n      case 'invalidInsurance':\r\n        title = 'Favor verificar os dados do seguro.'\r\n        message = 'As informações referentes ao seguro do veículo são obrigatórias. Certifique-se de ter informado todas elas.'\r\n        return { title, message }\r\n      case 'filesNotFound':\r\n        title = 'Arquivos não encontrados'\r\n        message = `Não há nenhum documento aprovado no sistema para ${subject} selecionad${subject.charAt(0)}.\r\n          Caso haja uma solicitação em aberto para ${subject}, acesse a opção \"Solicitações\" no menu superior para ter acesso aos arquivos.`\r\n        return { title, message }\r\n\r\n      case 'empresaNotFound':\r\n        title = 'Empresa não encontrada.'\r\n        message = `A empresa informada não está registrada no sistema. Para cadastrar uma nova empresa, utilize a opção Empresas -> Cadastrar.`\r\n        return { title, message }\r\n      case 'seguradoraNotFound':\r\n        title = 'Seguradora não encontrada.'\r\n        message = `A seguradora informada não está registrada no sistema. Favor verificar o nome da seguradora.`\r\n        return { title, message }\r\n\r\n      case 'alreadyExists':\r\n        title = 'CPF já cadastrado.'\r\n        message = `O CPF informado corresponde a um sócio já cadastrado. \r\n          Para remover ou editar as informações dos sócios, utilize a respectiva opção abaixo.`\r\n        return { title, message }\r\n      case 'numberNotValid':\r\n        title = 'Número inválido.'\r\n        message = 'O número digitado não é válido.'\r\n        return { title, message }\r\n      case 'overShared':\r\n        title = 'Participação societária inválida.'\r\n        message = 'A participação societária informada excede a 100%.'\r\n        return { title, message }\r\n      case 'subShared':\r\n        title = 'Participação societária inválida.'\r\n        message = 'A participação societária informada não soma 100%. Favor informar todos os sócios com suas respectivas participações.'\r\n        return { title, message }\r\n      case 'veiculoPendente':\r\n        title = 'Pendências encontradas para este veículo.'\r\n        message = 'Verifique se há alguma aprovação pendente quanto ao cadastro, seguro, transferência ou alteração de dados do veículo.'\r\n        return { title, message }\r\n      case 'seguroVencido':\r\n        title = 'Pendências encontradas para o seguro deste veículo.'\r\n        message = 'Para regularizar o seguro deste veículo, acesse a opção Veículos=>Seguros no menu acima.'\r\n        return { title, message }\r\n      case 'contratoVencido':\r\n        title = 'Contrato expirado.'\r\n        message = 'O contrato de concessão com o delegatário selecionado está expirado.'\r\n        return { title, message }\r\n      default:\r\n        return { title: null, message: null }\r\n    }\r\n  }\r\n  const { title, message } = createAlert(alertType)\r\n\r\n  if (title && message) return (\r\n    <div>\r\n      <Dialog\r\n        open={open}\r\n        onClose={close}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            {message}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={close} color=\"primary\">\r\n            {confirm ? 'Cancelar' : 'Fechar'}\r\n          </Button>\r\n          {confirm && <Button onClick={close} color=\"primary\" autoFocus>\r\n            Confirmar\r\n          </Button>}\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  )\r\n  else return null\r\n}","import humps from 'humps'\r\nconst validaDistanciaMinima = (utilizacao, dist, distancias) => {\r\n\r\n    utilizacao = humps.camelize(utilizacao)\r\n\r\n    let validDistance, d\r\n\r\n    if (distancias[utilizacao] && dist && dist !== '') {\r\n        dist = Number(dist)\r\n        d = distancias[utilizacao]\r\n\r\n        if (d <= dist)\r\n            validDistance = true\r\n        else\r\n            validDistance = false\r\n    }\r\n    if (validDistance)\r\n        return false\r\n    else if (d)\r\n        return `A distância mínima para a utilização \"${utilizacao}\" é de ${d} centímetros. Altere a distância ou clique em \"voltar\" para alterar a utilização.`\r\n}\r\n\r\nexport default validaDistanciaMinima","export const dischargedForm = [\r\n    { field: \"veiculoId\", label: \"Número\" },\r\n    { field: \"placa\", label: \"Placa\" },\r\n    { field: \"renavam\", label: \"RENAVAM\" },\r\n    { field: \"utilizacao\", label: \"Utilização\" },\r\n    { field: \"codigoEmpresa\", label: \"Código\" },\r\n    { field: \"empresa\", label: \"Delegatário\" },\r\n    { field: \"dataRegistro\", label: \"Data de Registro\" },\r\n    { field: \"situacao\", label: \"Situação\" },\r\n    { field: \"dataBaixa\", label: \"Data baixa\" },\r\n    { field: \"nChassi\", label: \"Número chassi\" },\r\n    { field: \"marcaChassi\", label: \"Marca chassi\" },\r\n    { field: \"modeloChassi\", label: \"Modelo chassi\" },\r\n    { field: \"anoChassi\", label: \"Ano chassi\" },\r\n    { field: \"valorChassi\", label: \"Valor Chassi\" },\r\n    { field: \"marcaCarroceria\", label: \"Marca carroceria\" },\r\n    { field: \"modeloCarroceria\", label: \"Modelo carroceria\" },\r\n    { field: \"anoCarroceria\", label: \"Ano carroceria\" },\r\n    { field: \"indicadorIdade\", label: \"Indicador de Idade\" },\r\n    { field: \"valorCarroceria\", label: \"Valor carroceria\" },\r\n    { field: \"dominio\", label: \"Leasing\" },\r\n    { field: \"delegatarioCompartilhado\", label: \"Empresas autorizadas a compartilhar\" },\r\n    { field: \"cores\", label: \"Cores\" },\r\n    { field: \"seguradora\", label: \"Seguradora\" },\r\n    { field: \"apolice\", label: \"Apólice\" },\r\n    { field: \"dataEmissao\", label: \"Data Inicio\" },\r\n    { field: \"vencimento\", label: \"Data Fim\", },\r\n    { field: \"empresaLaudo\", label: \"Empresa Laudo\", },\r\n    { field: \"numeroLaudo\", label: \"Número Laudo\", },\r\n    { field: \"validade\", label: \"Validade Laudo\", },\r\n    { field: \"cilindros\", label: \"Cilindros\" },\r\n    { field: \"potencia\", label: \"Potência\" },\r\n    { field: \"eixos\", label: \"Eixos\" },\r\n    { field: \"pneumaticos\", label: \"Pneumáticos\" },\r\n    { field: \"pesoDianteiro\", label: \"Peso Dianteiro\" },\r\n    { field: \"pesoTraseiro\", label: \"Peso Traseiro\" },\r\n    { field: \"pbt\", label: \"PBT\" },\r\n    { field: \"poltronas\", label: \"Poltronas\" },\r\n    { field: \"piquesPoltrona\", label: \"Piques Poltrona\" },\r\n    { field: \"distanciaMinima\", label: \"Distância Mínima\" },\r\n    { field: \"distanciaMaxima\", label: \"Distância Máxima\" },\r\n    { field: \"equipamentos\", label: \"Equipamentos\" },\r\n    { field: \"acessibilidade\", label: \"Acessibilidade\" },\r\n    { field: \"sipro\", label: \"SIPRO\" },\r\n    { field: \"obs\", label: \"Observação\" }\r\n]\r\n\r\nexport const allBaixadoFields = [\r\n    \"Número\", \"Placa\", \"RENAVAM\", \"Data de Registro\", \"Utilização\", \"Código\", \"Delegatário\", \"Leasing\", \"Seguradora\", \"Apólice\", \"Data Inicio\", \"Data Fim\",\r\n    \"Empresa Laudo\", \"Número Laudo\", \"Validade Laudo\", \"Empresas autorizadas a compartilhar\", \"Poltronas\", \"Eixos\", \"PBT\", \"Marca chassi\", \"Modelo chassi\",\r\n    \"Ano chassi\", \"Número chassi\", \"Valor Chassi\", \"Situação\", \"Data baixa\", \"SIPRO\", \"Cilindros\", \"Potência\", \"Marca carroceria\", \"Modelo carroceria\",\r\n    \"Ano carroceria\", \"Valor carroceria\", \"Piques Poltrona\", \"Peso Dianteiro\", \"Peso Traseiro\", \"Cores\", \"Equipamentos\", \"Observação\", \"Indicador de Idade\",\r\n    \"Distância Mínima\", \"Distância Máxima\", \"__v\", \"id\"\r\n]\r\n","import React, { PureComponent, Fragment } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport { setDemand } from '../Utils/setDemand'\r\nimport { handleFiles, removeFile } from '../Utils/handleFiles'\r\nimport { checkInputErrors } from '../Utils/checkInputErrors'\r\nimport { logGenerator } from '../Utils/logGenerator'\r\n\r\nimport CadVeiculoTemplate from './CadVeiculoTemplate'\r\nimport VehicleDocs from './VehicleDocs'\r\nimport Review from './VehicleReview'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport StepperButtons from '../Reusable Components/StepperButtons'\r\nimport CustomStepper from '../Reusable Components/Stepper'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\n\r\nimport { formatMoney } from '../Utils/formatValues'\r\nimport { cadVehicleFiles } from '../Forms/cadVehicleFiles'\r\nimport { cadVehicleForm } from '../Forms/cadVehicleForm'\r\n\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\nimport validateDist from '../Utils/validaDistanciaMinima'\r\nimport { dischargedForm } from '../Forms/dischargedForm'\r\n\r\nclass VeiculosContainer extends PureComponent {\r\n    constructor() {\r\n        super()\r\n        this.escFunction = (e) => {\r\n            if (e.keyCode === 27 && this.state.addEquipa)\r\n                this.closeEquipa()\r\n        }\r\n    }\r\n\r\n    state = {\r\n        activeStep: 0,\r\n        steps: ['Dados do Veículo', 'Vistoria e laudos', 'Documentos', 'Revisão'],\r\n        subtitle: ['Informe os dados do veículo.', 'Preencha os campos abaixo conforme a vistoria realizada'],\r\n        razaoSocial: '',\r\n        frota: [],\r\n        delegatarioCompartilhado: '',\r\n        toastMsg: 'Veículo cadastrado!',\r\n        confirmToast: false,\r\n        addEquipa: false,\r\n        openAlertDialog: false,\r\n        dropDisplay: 'Clique ou arraste para anexar'\r\n    }\r\n\r\n    async componentDidMount() {\r\n\r\n        const\r\n            { redux } = this.props,\r\n            { equipamentos, acessibilidade } = redux,\r\n            demand = this.props?.location?.state?.demand\r\n\r\n        if (demand) {\r\n            let reactivated = false\r\n            const demandState = setDemand(demand, redux)\r\n            if (demandState.situacao.match('Reativação'))\r\n                reactivated = true\r\n            this.setState({ ...demandState, activeStep: 3, reactivated })\r\n        }\r\n\r\n        //*********Create state[equipamento] for each equipamentos/acessibilidade and turn them to false before a vehicle is selected *********/\r\n        //Se tiver demanda, os equipamentos e acessibilidade são definidos no dataActions para incorporar no estado global\r\n        let\r\n            allEqs = {},\r\n            allAcs = {}\r\n\r\n        equipamentos.forEach(e => Object.assign(allEqs, { [e?.item]: false }))\r\n        acessibilidade.forEach(e => Object.assign(allAcs, { [e?.item]: false }))\r\n\r\n        await this.setState({ ...allEqs, ...allAcs })\r\n        //await this.setState({ ...allEqs, ...allAcs, selectedEmpresa: redux.empresas[0], razaoSocial: 'what' })\r\n\r\n        document.addEventListener('keydown', this.escFunction, false)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.setState({})\r\n        document.removeEventListener('keydown', this.escFunction, false)\r\n    }\r\n\r\n    setActiveStep = async action => {\r\n\r\n        if (this.state.activeStep === 0) {\r\n            const matchPlaca = this.state.frota.filter(v => v.placa === this.state.placa)[0]\r\n            if (matchPlaca) {\r\n                await this.setState({ placa: '' });\r\n                this.setState({ alertType: 'plateExists', openAlertDialog: true })\r\n                return null\r\n            }\r\n        }\r\n\r\n        const { errors } = this.state\r\n        if (errors && errors[0]) {\r\n            await this.setState({ ...this.state, ...checkInputErrors('setState') })\r\n            return\r\n        }\r\n\r\n        const prevActiveStep = this.state.activeStep\r\n        if (action === 'next') this.setState({ activeStep: prevActiveStep + 1 });\r\n        if (action === 'back') this.setState({ activeStep: prevActiveStep - 1 });\r\n        if (action === 'reset') this.setState({ activeStep: 0 })\r\n    }\r\n\r\n    handleInput = async e => {\r\n        const\r\n            { veiculos, empresas } = this.props.redux,\r\n            { name } = e.target\r\n        let\r\n            { value } = e.target\r\n\r\n        this.setState({ [name]: value })\r\n\r\n        switch (name) {\r\n            case 'razaoSocial':\r\n\r\n                let selectedEmpresa = empresas.find(e => e.razaoSocial === value)\r\n\r\n                if (selectedEmpresa) {\r\n                    const { razaoSocial, codigoEmpresa } = selectedEmpresa\r\n                    await this.setState({ selectedEmpresa, razaoSocial, codigoEmpresa })\r\n                    if (value !== selectedEmpresa.razaoSocial) this.setState({ selectedEmpresa: undefined })\r\n\r\n                    const frota = veiculos.filter(v => v.empresa === this.state.razaoSocial)\r\n\r\n                    this.setState({ frota })\r\n\r\n                } else this.setState({ selectedEmpresa: undefined, frota: [], placa: undefined })\r\n                break\r\n\r\n            case 'placa':\r\n                if (typeof value === 'string') {\r\n                    value = value.toLocaleUpperCase()\r\n                    await this.setState({ [name]: value })\r\n                }\r\n                break\r\n\r\n            case ('valorChassi'):\r\n                this.setState({ [name]: formatMoney(value) })\r\n                break\r\n            case ('valorCarroceria'):\r\n                this.setState({ [name]: formatMoney(value) })\r\n                break\r\n\r\n            default: void 0\r\n        }\r\n    }\r\n\r\n    checkValid = async (name, value, collection, stateId, dbName, dbId, alertLabel) => {\r\n\r\n        const item = collection.filter(el => el[dbName].toLowerCase().match(value.toLowerCase()))\r\n        if (value === '') this.setState({ [name]: '', [stateId]: '' })\r\n        if (item[0]) {\r\n            const nombre = item[0][dbName]\r\n            const id = item[0][dbId]\r\n            if (value !== '') {\r\n                await this.setState({ [name]: nombre, [stateId]: id })\r\n\r\n            }\r\n        } else {\r\n            await this.setState({ [name]: '', [stateId]: '' })\r\n            this.setState({\r\n                alertType: 'invalidModel', openAlertDialog: true,\r\n                customTitle: 'Modelo inválido.',\r\n                customMsg: `O modelo de ${alertLabel} não está cadastrado no sistema.`\r\n            })\r\n            document.getElementsByName(name)[0].focus()\r\n        }\r\n    }\r\n\r\n    handleBlur = async e => {\r\n        const\r\n            { empresas, modelosChassi, carrocerias, parametros } = this.props.redux,\r\n            { distanciaPoltronas, idadeBaixa } = parametros[0],\r\n            { idadeMaxCad, difIdade, idadeBaixaAut } = idadeBaixa,\r\n            { anoCarroceria, anoChassi, utilizacao, distanciaMinima, situacao } = this.state,\r\n            { name } = e.target,\r\n            carr = Number(anoCarroceria),\r\n            chas = Number(anoChassi),\r\n            currentYear = new Date().getFullYear()\r\n\r\n        let\r\n            { value } = e.target,\r\n            customTitle,\r\n            customMsg,\r\n            maxYear = currentYear - idadeMaxCad\r\n\r\n        //Se o veículo for reativado, o ano de fabricação de referência para cadastro é o da baixa automática, não a idadeMaxCad\r\n        if (situacao && situacao.match('Reativação'))\r\n            maxYear = currentYear - idadeBaixaAut\r\n\r\n        const errors = checkInputErrors()\r\n        if (errors) this.setState({ errors })\r\n        else this.setState({ errors: undefined })\r\n\r\n        switch (name) {\r\n            case 'modeloChassi':\r\n                this.checkValid(name, value, modelosChassi, 'modeloChassiId', 'modeloChassi', 'id', 'chassi')\r\n                break\r\n            case 'modeloCarroceria':\r\n                this.checkValid(name, value, carrocerias, 'modeloCarroceriaId', 'modelo', 'id', 'carroceria')\r\n                break\r\n            case 'delegatarioCompartilhado':\r\n                this.checkValid(name, value, empresas, 'compartilhadoId', 'razaoSocial', 'codigoEmpresa')\r\n                break\r\n            case 'anoChassi':\r\n                customTitle = 'Ano de chassi inválido.'\r\n                if (chas && chas < maxYear - 1)\r\n                    customMsg = `O ano de fabricação do chassi informado é anterior à idade máxima permitida para cadastro.`\r\n                if ((carr && chas && (carr < chas || carr > chas + difIdade)))\r\n                    customMsg = 'O ano de chassi é incompatível com o ano da carroceria informado.'\r\n\r\n                if (customMsg) {\r\n                    this.setState({ anoChassi: '', openAlertDialog: true, customTitle, customMsg })\r\n                }\r\n                break\r\n            case 'anoCarroceria':\r\n                customTitle = 'Ano de carroceria inválido.'\r\n                if (carr && carr < maxYear)\r\n                    customMsg = `O ano de fabricação do carroceria informado é anterior à idade máxima permitida.`\r\n                if ((carr && chas && (carr < chas || carr > chas + difIdade)))\r\n                    customMsg = 'O ano de fabricação carroceria é incompatível com o ano do chassi informado.'\r\n\r\n                if (customMsg) {\r\n                    this.setState({ anoCarroceria: '', openAlertDialog: true, customTitle, customMsg })\r\n                }\r\n                break\r\n            case 'distanciaMinima':\r\n                let errorMsg\r\n                if (utilizacao)\r\n                    errorMsg = validateDist(utilizacao, distanciaMinima, distanciaPoltronas)\r\n                if (errorMsg)\r\n                    this.setState({\r\n                        openAlertDialog: true,\r\n                        customTitle: 'Distância mínima inválida.',\r\n                        customMsg: errorMsg,\r\n                        distanciaMinima: ''\r\n                    })\r\n                break\r\n            default: void 0\r\n        }\r\n\r\n        if (name === 'placa' && typeof this.state.frota !== 'string') {\r\n\r\n            if (value.length === 7) {\r\n                const x = value.replace(/(\\w{3})/, '$1-')\r\n                await this.setState({ placa: x, reactivated: false })\r\n                value = x\r\n            }\r\n            if (value.length === 8) {\r\n                const x = value.replace(' ', '-')\r\n                await this.setState({ placa: x, reactivated: false })\r\n                value = x\r\n            }\r\n            this.checkPlateConflict(value)\r\n        }\r\n    }\r\n\r\n    checkPlateConflict = async value => {\r\n        const\r\n            checkExistance = await axios.get(`/api/alreadyExists?table=veiculos&column=placa&value=${value}`),\r\n            placaMatch = checkExistance?.data,\r\n            vehicle = placaMatch?.vehicleFound\r\n\r\n        let customTitle, customMsg\r\n\r\n        if (placaMatch) {\r\n            const { status } = placaMatch\r\n            if (status === 'existing') {\r\n                if (vehicle?.situacao.match(/Cadastro|Reativação/g)) {\r\n                    customTitle = 'Solicitação aberta.'\r\n                    customMsg = 'Já existe uma solicitação de cadastro ou reativação para a placa informada. Para acompanhar, acesse \\'Solicitações\\' e filtre pela placa do veículo. '\r\n                }\r\n                else {\r\n                    customTitle = 'Veículo já cadastrado.'\r\n                    customMsg = 'A placa informada corresponde a um veículo já cadastrado. Para alterar o cadastro, vá para Veículos -> \\'Alteração de dados\\'.'\r\n                }\r\n                this.setState({ customTitle, customMsg, openAlertDialog: true, placa: null, reactivated: false })\r\n                value = ''\r\n                return\r\n            }\r\n            else if (vehicle['Situação'] === 'Reativado') {\r\n                let reactivatedVehicle = {}\r\n                for (let k in vehicle) {\r\n                    dischargedForm.forEach(({ field, label }) => {\r\n                        if (k === label && ['renavam', 'nChassi', 'anoChassi', 'anoCarroceria'].includes(field))\r\n                            reactivatedVehicle[field] = vehicle[k]\r\n                    })\r\n                }\r\n                reactivatedVehicle.situacao = \"Reativação solicitada\"\r\n                await this.setState({ ...reactivatedVehicle, reactivated: true })\r\n                return\r\n            }\r\n\r\n            else if (status === 'discharged') {\r\n                customTitle = 'Veículo baixado.'\r\n                customMsg = 'A placa informada corresponde a um veículo baixado. Para reativar seu cadastro, vá para Veículos -> Baixa -> \\'Gerenciar Veículos Baixados\\'.'\r\n                this.setState({ customTitle, customMsg, openAlertDialog: true, placa: null, reactivated: false })\r\n                value = ''\r\n            }\r\n        }\r\n    }\r\n\r\n    handleEquipa = async type => {\r\n\r\n        const collection = this.props.redux[type]\r\n        let\r\n            vEquip = [],\r\n            currentEquipa = []\r\n\r\n        await this.setState({ type })\r\n\r\n        //Só precisa pegar a lista e marcar check na hora de abrir o dialog.\r\n        if (this.state.addEquipa === false) {\r\n            if (this.state[type])\r\n                currentEquipa = this.state[type]\r\n\r\n            collection.forEach(({ item }) => {\r\n                currentEquipa.forEach(eq => {\r\n                    if (eq.toLowerCase() === item.toLowerCase())\r\n                        vEquip.push(item)\r\n                })\r\n            })\r\n            vEquip.forEach(ve => this.setState({ [ve]: true }))\r\n        }\r\n        this.setState({ addEquipa: !this.state.addEquipa })\r\n    }\r\n\r\n    handleCheck = async item => {\r\n        const\r\n            { type } = this.state,\r\n            collection = this.props.redux[type]\r\n\r\n        if (!collection) return\r\n\r\n        let arrayOfEquips = [], ids = [], stateKey\r\n\r\n        if (type === 'equipamentos') stateKey = 'equipamentosId'\r\n        if (type === 'acessibilidade') stateKey = 'acessibilidadeId'\r\n\r\n        await this.setState({ ...this.state, [item]: !this.state[item] })\r\n\r\n        collection.forEach(({ id, item }) => {\r\n            if (this.state[item] === true) {\r\n                arrayOfEquips.push(item)\r\n                ids.push(id)\r\n            }\r\n        })\r\n\r\n        if (arrayOfEquips[0]) this.setState({ [type]: arrayOfEquips, [stateKey]: ids })\r\n        else if (type === 'equipamentos') this.setState({ equipamentos: [], [stateKey]: [] })\r\n        else if (type === 'acessibilidade') this.setState({ acessibilidade: [], [stateKey]: [] })\r\n    }\r\n\r\n    handleCadastro = async approved => {\r\n        const\r\n            { equipamentosId, acessibilidadeId, pesoDianteiro, pesoTraseiro, poltronas, codigoEmpresa, compartilhadoId, modeloChassiId, originalVehicle, getUpdatedValues,\r\n                modeloCarroceriaId, selectedEmpresa, showPendencias, info, form, demand, demandFiles, reactivated } = this.state,\r\n\r\n            existingVeiculoId = demand?.veiculoId,\r\n            oldHistoryLength = demand?.history?.length || 0\r\n\r\n        let\r\n            veiculoId,\r\n            situacao = 'Cadastro solicitado'\r\n\r\n        let pbt = Number(poltronas) * 93 + (Number(pesoDianteiro) + Number(pesoTraseiro))\r\n        if (isNaN(pbt)) pbt = undefined\r\n\r\n        //**********Prepare the request Object************* */\r\n        let review = {}\r\n\r\n        cadVehicleForm.forEach(form => {\r\n            form.forEach(obj => {\r\n                for (let k in this.state) {\r\n                    if (k === obj.field) Object.assign(review, { [k]: this.state[k] })\r\n                }\r\n            })\r\n        })\r\n\r\n        let { delegatarioCompartilhado, modeloChassi, modeloCarroceria, ...vReview } = review\r\n\r\n        Object.assign(vReview, {\r\n            codigoEmpresa, situacao, pbt, modeloChassiId, modeloCarroceriaId,\r\n            equipamentosId, acessibilidadeId, apolice: 'Seguro não cadastrado'\r\n        })\r\n        vReview.compartilhadoId = compartilhadoId\r\n\r\n        if (demand && originalVehicle)\r\n            vReview = getUpdatedValues(originalVehicle, vReview)     //Save only real changes to the request Object (method from setDemand())\r\n\r\n        const vehicle = humps.decamelizeKeys(vReview)\r\n        console.log(vehicle)\r\n\r\n        //***************If it doesnt exist, post the new vehicle Object **************** */\r\n        if (!existingVeiculoId)\r\n            await axios.post('/api/cadastroVeiculo', vehicle)\r\n                .then(res => {\r\n                    veiculoId = res.data\r\n                })\r\n                .catch(err => console.log(err))\r\n        //***************Else, if it exists, get existing Id and update status******************* */\r\n        else {\r\n            veiculoId = existingVeiculoId\r\n\r\n            if (demand && approved && !showPendencias)\r\n                situacao = 'Seguro não cadastrado'\r\n\r\n            const\r\n                table = 'veiculos',\r\n                tablePK = 'veiculo_id',\r\n                requestObject = {\r\n                    ...vehicle,\r\n                    situacao\r\n                }\r\n\r\n            await axios.put('/api/updateVehicle', { requestObject, table, tablePK, id: veiculoId })\r\n        }\r\n\r\n        //*****************Generate log ************** */\r\n        const log = {\r\n            empresaId: selectedEmpresa?.codigoEmpresa,\r\n            veiculoId,\r\n            history: {\r\n                info,\r\n                files: form,\r\n            },\r\n            metadata: { veiculoId },\r\n            demandFiles,\r\n            historyLength: oldHistoryLength,\r\n            approved\r\n        }\r\n\r\n        if (demand) log.id = demand?.id\r\n        if (reactivated) log.subject = 'Reativação de veículo'\r\n        logGenerator(log)\r\n            .then(r => console.log(r?.data))\r\n            .catch(err => console.log(err))\r\n\r\n        //*************Confirm send and clear State******************* */\r\n        if (!approved) {\r\n            let toastMsg = 'Solicitação de cadastro enviada.'\r\n            if (demand && demand.status.match('Aguardando'))\r\n                toastMsg = 'Pendências para o cadastro registradas.'\r\n            this.toast(toastMsg)\r\n        }\r\n        else\r\n            this.toast()\r\n\r\n        if (!demand)\r\n            this.resetState()\r\n        else\r\n            setTimeout(() => { this.props.history.push('/solicitacoes') }, 1500)\r\n    }\r\n\r\n    handleFiles = async (files, name) => {\r\n\r\n        if (files && files[0]) {\r\n            await this.setState({ [name]: files[0] })\r\n\r\n            const newState = handleFiles(files, this.state, cadVehicleFiles)\r\n            this.setState({ ...newState, fileToRemove: null })\r\n        }\r\n    }\r\n\r\n    removeFile = async (name) => {\r\n        const\r\n            { form } = this.state,\r\n            newState = removeFile(name, form)\r\n\r\n        this.setState({ ...this.state, ...newState })\r\n    }\r\n\r\n    resetState = () => {\r\n        const\r\n            resetState = {},\r\n            { equipamentos } = this.props.redux,\r\n            resetFiles = {},\r\n            resetEquip = {}\r\n\r\n        cadVehicleForm.forEach(form => {\r\n            form.forEach(obj => {\r\n                Object.keys(obj).forEach(key => {\r\n                    if (key === 'field' && this.state[obj[key]]) Object.assign(resetState, { [obj[key]]: undefined })\r\n                })\r\n            })\r\n        })\r\n        cadVehicleFiles.forEach(({ name }) => {\r\n            Object.assign(resetFiles, { [name]: null })\r\n        })\r\n\r\n        equipamentos.forEach(e => Object.assign(resetEquip, { [e.item]: false }))\r\n\r\n        this.setState({\r\n            ...resetState,\r\n            ...resetFiles,\r\n            ...resetEquip,\r\n            activeStep: 0,\r\n            razaoSocial: '',\r\n            selectedEmpresa: undefined,\r\n            frota: [],\r\n            delegatarioCompartilhado: '',\r\n            form: new FormData(),\r\n            resetShared: true\r\n        })\r\n    }\r\n\r\n    closeEquipa = () => this.setState({ addEquipa: false })\r\n    setShowPendencias = () => this.setState({ showPendencias: !this.state.showPendencias })\r\n    toggleDialog = () => this.setState({ openAlertDialog: !this.state.openAlertDialog })\r\n    toast = toastMsg => this.setState({ confirmToast: !this.state.confirmToast, toastMsg: toastMsg ? toastMsg : this.state.toastMsg })\r\n\r\n    render() {\r\n        const\r\n            { confirmToast, toastMsg, activeStep, openAlertDialog, alertType, steps, selectedEmpresa,\r\n                dropDisplay, form, demand, demandFiles, showPendencias, info, resetShared, customMsg, customTitle } = this.state,\r\n\r\n            { redux } = this.props\r\n\r\n        return <Fragment>\r\n            <Crumbs links={['Veículos', '/veiculos']} text='Cadastro de veículo' demand={demand} selectedEmpresa={selectedEmpresa} />\r\n\r\n            <CustomStepper\r\n                activeStep={activeStep}\r\n                steps={steps}\r\n                setActiveStep={this.setActiveStep}\r\n            />\r\n            <CadVeiculoTemplate\r\n                data={this.state}\r\n                redux={redux}\r\n                handleInput={this.handleInput}\r\n                handleBlur={this.handleBlur}\r\n                handleEquipa={this.handleEquipa}\r\n                handleCheck={this.handleCheck}\r\n                closeEquipa={this.closeEquipa}\r\n                match={this.props.match}\r\n                resetShared={resetShared}\r\n            />\r\n            {activeStep === 2 && <VehicleDocs\r\n                parentComponent='cadastro'\r\n                dropDisplay={dropDisplay}\r\n                formData={form}\r\n                handleFiles={this.handleFiles}\r\n                demandFiles={demandFiles}\r\n                fileToRemove={this.state.fileToRemove}\r\n                removeFile={this.removeFile}\r\n            />}\r\n\r\n            {activeStep === 3 && <Review\r\n                parentComponent='cadastro' files={this.state.form}\r\n                filesForm={cadVehicleFiles} data={this.state}\r\n                form={cadVehicleForm}\r\n            />}\r\n\r\n            {selectedEmpresa && <StepperButtons\r\n                activeStep={activeStep}\r\n                lastStep={steps.length - 1}\r\n                setActiveStep={this.setActiveStep}\r\n                demand={demand}\r\n                setShowPendencias={this.setShowPendencias}\r\n                showPendencias={showPendencias}\r\n                info={info}\r\n                handleSubmit={this.handleCadastro}\r\n                handleInput={this.handleInput}\r\n            //disabled={(typeof placa !== 'string' || placa === '')}\r\n            />}\r\n            <ReactToast open={confirmToast} close={this.toast} msg={toastMsg} />\r\n            {openAlertDialog && <AlertDialog open={openAlertDialog} close={this.toggleDialog} alertType={alertType} customMessage={customMsg} customTitle={customTitle} />}\r\n        </Fragment>\r\n    }\r\n}\r\nconst collections = ['veiculos', 'empresas', 'modelosChassi', 'carrocerias', 'equipamentos', 'acessibilidade', 'getFiles/vehicleDocs', 'parametros']\r\n\r\nexport default StoreHOC(collections, VeiculosContainer)","import { logRoutesConfig } from '../Solicitacoes/logRoutesConfig'\r\n\r\nexport const checkDemand = (id, logsCollection) => {\r\n\r\n    const path = window.location.pathname\r\n\r\n    logRoutesConfig.forEach((el, i) => el.path = logRoutesConfig[i].path.replace('/veiculos', '').replace('/solicitacoes', '').replace('/empresas', ''))\r\n\r\n    const\r\n        component = logRoutesConfig.find(c => path.match(c?.path)),\r\n        subject = component?.subject,\r\n        primaryKey = component?.primaryKey\r\n\r\n    const exists = logsCollection.find(log => log.subject === subject && log[primaryKey] === id.toString() && log.completed === false)\r\n\r\n    if (exists) return exists\r\n    else return false\r\n}\r\n\r\n\r\n\r\n/* export const checkDemand = id => {\r\n    let primaryKey, subject\r\n    const path = window.location.pathname\r\n\r\n    logRoutesConfig.forEach((el, i) => el.path = logRoutesConfig[i].path.replace('/veiculos', '').replace('/solicitacoes', '').replace('/empresas', ''))\r\n\r\n    const\r\n        component = logRoutesConfig.find(c => path.match(c?.path)),\r\n        collection = component?.collection\r\n\r\n    if (collection) {\r\n        if (collection === 'logs') {\r\n            subject = component.subject\r\n            primaryKey = 'veiculoId'\r\n        }\r\n        if (collection === 'empresaLogs') primaryKey = 'codigoEmpresa'\r\n\r\n   const findLog = axios.get(`/api/log?collection=${collection}&subject=${subject}&primaryKey=${primaryKey}&id=${id}`)\r\n        return findLog\r\n\r\n    }\r\n\r\n} */","import { altFormVistoria } from './altFormVistoria'\r\n\r\nexport const altForm = [[{\r\n    field: 'placa',\r\n    label: 'Placa',\r\n    margin: 'normal',\r\n    datalist: 'placa',\r\n    autoComplete: true,\r\n    collection: 'frota',\r\n},\r\n{\r\n    field: 'delegatario',\r\n    label: 'Delegatário',\r\n    margin: 'normal',\r\n    datalist: 'razaoSocial',\r\n    autoComplete: true,\r\n    collection: 'empresas'\r\n},\r\n{\r\n    field: 'compartilhado',\r\n    label: 'Delegatário Compartilhado',\r\n    margin: 'normal',\r\n    datalist: 'razaoSocial',\r\n    autoComplete: true,\r\n    collection: 'empresas'\r\n},\r\n{\r\n    field: 'utilizacao',\r\n    label: 'Utilização',\r\n    margin: 'normal',\r\n    select: true,\r\n    options: ['Convencional', 'Executivo', 'Leito', 'Semi-Leito', 'Urbano']\r\n},\r\n{\r\n    field: 'dominio',\r\n    label: 'Situação da Propriedade',\r\n    margin: 'normal',\r\n    select: true,\r\n    options: ['Veículo próprio', 'Leasing', 'Possuidor']\r\n},\r\n{\r\n    field: 'cores',\r\n    label: 'Cores',\r\n    margin: 'normal',\r\n    maxLength: 50\r\n},\r\n{\r\n    field: 'renavam',\r\n    label: 'Renavam',\r\n    margin: 'normal',\r\n    disabled: true\r\n},\r\n{\r\n    field: 'nChassi',\r\n    label: 'Número do Chassi',\r\n    margin: 'normal',\r\n    maxLength: 17,\r\n    disabled: true\r\n},\r\n{\r\n    field: 'modeloChassi',\r\n    label: 'Modelo do Chassi',\r\n    margin: 'normal',\r\n    disabled: true\r\n},\r\n{\r\n    field: 'anoChassi',\r\n    label: 'Ano do Chassi',\r\n    margin: 'normal',\r\n    type: 'number',\r\n    disabled: true\r\n},\r\n{\r\n    field: 'valorChassi',\r\n    label: 'Valor do Chassi (R$)',\r\n    margin: 'normal',\r\n    zero: true,\r\n    disabled: true\r\n},\r\n{\r\n    field: 'modeloCarroceria',\r\n    label: 'Modelo da Carroceria',\r\n    margin: 'normal',\r\n    disabled: true\r\n},\r\n{\r\n    type: 'number',\r\n    field: 'anoCarroceria',\r\n    label: 'Ano da Carroceria',\r\n    margin: 'normal',\r\n    disabled: true\r\n},\r\n{\r\n    field: 'valorCarroceria',\r\n    label: 'Valor da Carroceria (R$)',\r\n    margin: 'normal',\r\n    zero: true,\r\n    disabled: true\r\n},\r\n\r\n]]\r\n    .concat([altFormVistoria])\r\n    .concat([[]])\r\n    .concat([[]])","export const altFormVistoria = [\r\n  \r\n    {\r\n        field: 'pesoDianteiro',\r\n        label: 'Peso Dianteiro (kg)',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 12000\r\n    },\r\n    {\r\n        field: 'pesoTraseiro',\r\n        label: 'Peso Traseiro (kg)',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 15000\r\n    },\r\n    {\r\n        field: 'poltronas',\r\n        label: 'Poltronas',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 120\r\n    },\r\n    {\r\n        field: 'piquesPoltrona',\r\n        label: 'Piques poltrona',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 12\r\n    },\r\n    {\r\n        field: 'distanciaMinima',\r\n        label: 'Distância Mínima (cm)',\r\n        margin: 'normal',\r\n        type: 'number',        \r\n        max: 150\r\n    },\r\n    {\r\n        field: 'distanciaMaxima',\r\n        label: 'Distância Máxima (cm)',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 150\r\n    }         \r\n]","import React from 'react'\r\n\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport FormSubtiltle from '../Reusable Components/FormSubtiltle'\r\nimport TextInput from '../Reusable Components/TextInput'\r\nimport AddEquipa from './AddEquipa'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { altForm } from '../Forms/altForm'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    button: {\r\n        marginRight: '15px'\r\n    }\r\n}))\r\n\r\nexport default function ({ handleInput, handleBlur, data, handleCheck, handleEquipa, altPlacaOption, showAltPlaca, empresas, equipamentos, acessibilidade, close }) {\r\n\r\n    const\r\n        { activeStep, subtitle, placa, selectedEmpresa, addEquipa, demand, type } = data,\r\n        classes = useStyles(), { button } = classes,\r\n        form = altForm[activeStep]\r\n\r\n    let eqCollection = equipamentos\r\n    if (type === 'acessibilidade') eqCollection = acessibilidade\r\n\r\n    return (\r\n        <div className='flex center'>\r\n            <header className='flex center' style={{ marginBottom: '10px', width: '100%' }}>\r\n                <SelectEmpresa\r\n                    data={data}\r\n                    empresas={empresas}\r\n                    headerTitle={selectedEmpresa && `Alteração de dados ${placa || ''} - ${selectedEmpresa?.razaoSocial}`}\r\n                    handleInput={handleInput}\r\n                    handleBlur={handleBlur}\r\n                />\r\n            </header>\r\n            {\r\n                selectedEmpresa &&\r\n                <main>\r\n                    {activeStep < 2 &&\r\n                        <section className='paper'>\r\n                            <FormSubtiltle subtitle={subtitle[activeStep]} />\r\n                            <TextInput\r\n                                form={form}\r\n                                data={data}\r\n                                empresas={empresas}\r\n                                handleBlur={handleBlur}\r\n                                handleInput={handleInput}\r\n                                disableSome={demand ? ['placa', 'delegatario'] : ['delegatario']}\r\n                            />\r\n                        </section>}\r\n\r\n                    {activeStep === 0 &&\r\n                        <section className=\"flex center\">\r\n                            <Button\r\n                                variant=\"outlined\"\r\n                                size=\"small\"\r\n                                color=\"primary\"\r\n                                className={button}\r\n                                onClick={() => handleEquipa('equipamentos')}\r\n                            >\r\n                                <AddIcon />\r\n                                        Equipamentos\r\n                                    </Button>\r\n                            <Button\r\n                                variant=\"outlined\"\r\n                                size=\"small\"\r\n                                color=\"primary\"\r\n                                className={button}\r\n                                onClick={() => handleEquipa('acessibilidade')}\r\n                            >\r\n                                <AddIcon />\r\n                                        Acessibilidade\r\n                            </Button>\r\n                        </section>}\r\n\r\n                    {altPlacaOption && placa.match('[a-zA-Z]{3}[-]?\\\\d{4}') &&\r\n                        <div className='addNewDiv'>\r\n                            <span onClick={() => showAltPlaca()}> → Clique aqui para alterar a placa para o formato Mercosul.</span>\r\n                        </div>\r\n                    }\r\n                    {\r\n                        addEquipa && <AddEquipa\r\n                            type={type}\r\n                            equipamentos={eqCollection}\r\n                            close={close}\r\n                            handleCheck={handleCheck}\r\n                            data={data} />\r\n                    }\r\n                </main>\r\n            }\r\n        </div>\r\n    )\r\n}   ","import React from 'react';\r\nimport DragAndDrop from './DragAndDrop'\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function AlertDialog({ open, close, title, header, inputNames, inputLabels, fileInputName, confirm, handleInput, handleFiles,\r\n  values, formData, dropDisplay, type = 'text' }) {\r\n\r\n  let disabled = true\r\n  const errorHandler = (inputName, value) => {\r\n    if (inputName === 'newPlate') {\r\n      if (value.length < 9 && value.match('[a-zA-Z]{3}?[-]\\\\d{1}\\\\w{1}\\\\d{2}')) {\r\n        disabled = false\r\n        return false\r\n      }\r\n      else {\r\n        disabled = true\r\n        return true\r\n      }\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <Dialog open={open} onClose={close} aria-labelledby=\"form-dialog-title\">\r\n      <DialogTitle id=\"form-dialog-title\">{title}</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          {header}\r\n        </DialogContentText>\r\n        <br />\r\n        {\r\n          inputNames.map((inputName, i) => (\r\n            <TextField\r\n              key={i}\r\n              autoFocus={inputName === 'newPlate' && true}\r\n              name={inputName}\r\n              label={inputLabels[i]}\r\n              onChange={handleInput}\r\n              values={values[i]}\r\n              type={type}\r\n              error={errorHandler(inputName, values[i])}\r\n              fullWidth\r\n              InputLabelProps={{ shrink: true }}\r\n            />\r\n          ))}\r\n        <br /><br />\r\n        <DragAndDrop\r\n          title='Anexar arquivo'\r\n          name={fileInputName}\r\n          formData={formData}\r\n          dropDisplay={dropDisplay}\r\n          handleFiles={handleFiles}\r\n        />\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={close} color=\"primary\">\r\n          Cancelar\r\n              </Button>\r\n        <Button onClick={confirm} color=\"primary\" disabled={disabled}>\r\n          Confirmar\r\n              </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}","import React, { Component, Fragment } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport { checkDemand } from '../Utils/checkDemand'\r\nimport { checkInputErrors } from '../Utils/checkInputErrors'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\nimport { altDadosFiles } from '../Forms/altDadosFiles'\r\nimport { altForm } from '../Forms/altForm'\r\nimport { logGenerator } from '../Utils/logGenerator'\r\nimport { setDemand } from '../Utils/setDemand'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport CustomStepper from '../Reusable Components/Stepper'\r\n\r\nimport AltDadosTemplate from './AltDadosTemplate'\r\nimport VehicleDocs from './VehicleDocs'\r\nimport Review from './VehicleReview'\r\nimport StepperButtons from '../Reusable Components/StepperButtons'\r\n\r\nimport FormDialog from '../Reusable Components/FormDialog'\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\nimport { handleFiles, removeFile } from '../Utils/handleFiles'\r\nimport validateDist from '../Utils/validaDistanciaMinima'\r\n\r\n\r\nclass AltDados extends Component {\r\n\r\n    constructor() {\r\n        super()\r\n        this.escFunction = (e) => {\r\n            if (e.keyCode === 27) {\r\n                if (this.state.addEquipa) this.closeEquipa()\r\n            }\r\n        }\r\n    }\r\n\r\n    state = {\r\n        stepTitles: ['Informe a placa para alterar os dados abaixo ou mantenha as informações atuais e clique em avançar',\r\n            'Altere os dados desejados abaixo e clique em avançar', 'Anexe os documentos solicitados',\r\n            'Revisão das informações e deferimento'],\r\n        steps: ['Alterar dados do Veículo', 'Alterar dados adicionais', 'Documentos', 'Revisão'],\r\n\r\n        subtitle: ['Informe os dados do veículo.', 'Informações adicionais',\r\n            'Anexe os arquivos solicitados', 'Revisão'],\r\n        empresas: [],\r\n        razaoSocial: '',\r\n        compartilhadoId: '',\r\n        frota: [],\r\n        toastMsg: 'Dados atualizados!',\r\n        confirmToast: false,\r\n        activeStep: 0,\r\n        files: [],\r\n        openAlertDialog: false,\r\n        altPlaca: false,\r\n        newPlate: '',\r\n        placa: '',\r\n        addEquipa: false,\r\n        dropDisplay: 'Clique ou arraste para anexar',\r\n        showPendencias: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const\r\n            { redux } = this.props,\r\n            { equipamentos, acessibilidade } = redux,\r\n            demand = this.props?.location?.state?.demand\r\n\r\n        if (demand) {\r\n            const\r\n                demandState = setDemand(demand, redux),\r\n                { originalVehicle, getUpdatedValues, alteracoes } = demandState\r\n\r\n            //altera o objeto alteracoes por referência para destacar apenas os campos alterados ao abrir a demanda\r\n            getUpdatedValues(originalVehicle, alteracoes)\r\n\r\n            this.setState({ ...demandState, activeStep: 3 })\r\n        }\r\n\r\n        //*********Create state[key] for each equipamentos/acessibilidade and turn them to false before a vehicle is selected *********/\r\n        let\r\n            allEqs = {},\r\n            allAcs = {}\r\n\r\n        equipamentos.forEach(e => Object.assign(allEqs, { [e?.item]: false }))\r\n        acessibilidade.forEach(e => Object.assign(allAcs, { [e?.item]: false }))\r\n\r\n        await this.setState({ ...allEqs, ...allAcs })\r\n\r\n        document.addEventListener('keydown', this.escFunction, false)\r\n    }\r\n\r\n    componentWillUnmount() { this.setState({}) }\r\n\r\n    setActiveStep = async action => {\r\n        const { errors } = this.state\r\n        if (errors && errors[0]) {\r\n            this.setState({ ...this.state, ...checkInputErrors('setState') })\r\n            return\r\n        }\r\n\r\n        const prevActiveStep = this.state.activeStep\r\n        if (action === 'next') this.setState({ activeStep: prevActiveStep + 1 });\r\n        if (action === 'back') this.setState({ activeStep: prevActiveStep - 1 });\r\n        if (action === 'reset') this.setState({ activeStep: 0 })\r\n    }\r\n\r\n    handleInput = async e => {\r\n        const { veiculos, empresas, equipamentos } = this.props.redux,\r\n            { name, value } = e.target\r\n\r\n        if (name === 'razaoSocial') {\r\n            let selectedEmpresa = empresas.find(e => e.razaoSocial === value)\r\n\r\n            if (selectedEmpresa) {\r\n                await this.setState({ razaoSocial: selectedEmpresa.razaoSocial, selectedEmpresa })\r\n                if (value !== selectedEmpresa.razaoSocial) this.setState({ selectedEmpresa: undefined })\r\n\r\n                const frota = veiculos.filter(v => v.empresa === this.state.razaoSocial)\r\n\r\n                this.setState({ frota })\r\n\r\n            } else {\r\n                this.setState({ selectedEmpresa: undefined, frota: [] })\r\n                this.reset()\r\n            }\r\n        }\r\n\r\n        if (name === 'placa' && this.state.frota) {\r\n            const vehicle = this.state.frota.find(v => v.placa === value)\r\n            if (!vehicle) equipamentos.forEach(e => this.setState({ [e]: false }))\r\n        }\r\n\r\n        if (name === 'newPlate') {\r\n            let newPlate = value\r\n            if (typeof newPlate === 'string') {\r\n                newPlate = newPlate.replace(/[a-z]/g, l => l.toUpperCase())\r\n                if (newPlate.match('[A-Z]{3}[0-9]{1}[A-Z]{1}[0-9]{2}')) newPlate = newPlate.replace(/(\\w{3})/, '$1-')\r\n                this.setState({ ...this.state, newPlate })\r\n            }\r\n        } else this.setState({ [name]: value })\r\n    }\r\n\r\n    getId = async (name, value, collection, stateId, dbName, dbId) => {\r\n\r\n        const item = collection.filter(el => el[dbName].toLowerCase().match(value.toLowerCase()))\r\n        if (value === '') this.setState({ [name]: '', [stateId]: '' })\r\n        if (item[0]) {\r\n            const nombre = item[0][dbName]\r\n            const id = item[0][dbId]\r\n            if (value !== '') {\r\n                await this.setState({ [name]: nombre, [stateId]: id })\r\n\r\n            }\r\n        } else {\r\n            await this.setState({ [name]: '', [stateId]: '' })\r\n            this.setState({ openAlertDialog: true, alertType: 'empresaNotFound' })\r\n            document.getElementsByName(name)[0].focus()\r\n        }\r\n    }\r\n\r\n    capitalize = (field, value) => {\r\n        if (!value || typeof value !== 'string') return\r\n        if (field === 'utilizacao') {\r\n            if (value === 'RODOVIARIO') value = 'CONVENCIONAL'\r\n            if (value === 'SEMI LEITO - EXECUTIVO') value = 'Semi-Leito'\r\n            if (value !== 'Semi-Leito') value = value.charAt(0) + value.slice(1).toLowerCase()\r\n        }\r\n        if (field === 'dominio' && value === 'Sim') value = 'Veículo próprio'\r\n        if (field === 'dominio' && value === 'Não') value = 'Possuidor'\r\n\r\n        return value\r\n    }\r\n\r\n    handleBlur = async e => {\r\n        const\r\n            { empresas, logs, equipamentos, acessibilidade, parametros } = this.props.redux,\r\n            { distanciaPoltronas } = parametros[0],\r\n            { frota, demand, utilizacao, distanciaMinima } = this.state,\r\n            { name } = e.target\r\n\r\n        let\r\n            { value } = e.target\r\n\r\n        const errors = checkInputErrors()\r\n        if (errors) this.setState({ errors })\r\n        else this.setState({ errors: undefined })\r\n\r\n        switch (name) {\r\n\r\n            case 'compartilhado':\r\n                this.getId(name, value, empresas, 'compartilhadoId', 'razaoSocial', 'codigoEmpresa')\r\n                break;\r\n            case 'delegatario':\r\n                await this.getId(name, value, empresas, 'codigoEmpresa', 'razaoSocial', 'codigoEmpresa')\r\n                break;\r\n\r\n            case 'distanciaMinima':\r\n                let errorMsg\r\n                if (utilizacao)\r\n                    errorMsg = validateDist(utilizacao, distanciaMinima, distanciaPoltronas)\r\n                if (errorMsg) {\r\n                    this.setState({\r\n                        openAlertDialog: true,\r\n                        customTitle: 'Distância mínima inválida.',\r\n                        customMessage: errorMsg,\r\n                        distanciaMinima: ''\r\n                    })\r\n                }\r\n                break\r\n            default:\r\n                void 0\r\n        }\r\n        if (name === 'placa' && value.length > 2 && Array.isArray(this.state.frota)) {\r\n\r\n            let vehicle = this.state.frota.find(v => {\r\n                if (typeof value === 'string') return v.placa.toLowerCase().match(value.toLowerCase())\r\n                else return v.placa.match(value)\r\n            })\r\n\r\n            if (vehicle && typeof vehicle === 'object') {\r\n\r\n                let\r\n                    utilizacao = this.capitalize('utilizacao', vehicle?.utilizacao) || null,\r\n                    dominio = this.capitalize('dominio', vehicle?.dominio) || null,\r\n                    resetEquips = {}\r\n\r\n                //Every time a new vehicle is selected, clear the equips/acessibilidade. Method this.setEquipa() will set it back.\r\n                const allEquips = equipamentos.concat(acessibilidade)\r\n                allEquips.forEach(({ item }) => Object.assign(resetEquips, { [item]: false }))\r\n\r\n                //Add few mor properties to vehicle and preserve vehicle before changes.\r\n                vehicle = Object.assign({}, vehicle, { utilizacao, dominio })\r\n                const originalVehicle = Object.freeze(vehicle)\r\n\r\n                //setState()\r\n                await this.setState({ ...resetEquips, ...vehicle, originalVehicle, disable: true })\r\n\r\n                if (vehicle !== undefined && vehicle.hasOwnProperty('empresa')) this.setState({ delegatario: vehicle.empresa })\r\n\r\n                if (!demand) {\r\n                    const customTitle = 'Solicitação já cadastrada',\r\n                        customMessage = `Já existe uma demanda aberta para o veículo de placa ${vehicle.placa}. Para acessá-la, clique em \"Solicitações\" no menu superior.`\r\n\r\n                    const demandExists = checkDemand(vehicle?.veiculoId, logs)\r\n                    if (demandExists) {\r\n                        await this.setState({ customTitle, customMessage, openAlertDialog: true, delegatario: '' })\r\n                        this.reset()\r\n                        return\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (this.state.placa !== '' && !vehicle) {\r\n                let reset = {}\r\n                if (frota[0]) Object.keys(frota[0]).forEach(k => reset[k] = '')\r\n                this.setState({ alertType: 'plateNotFound', openAlertDialog: true })\r\n                this.setState({ ...reset, disable: false })\r\n            }\r\n        }\r\n    }\r\n\r\n    handleEquipa = type => {\r\n        const collection = this.props.redux[type]\r\n        let vEquip = [], currentEquipa = []\r\n\r\n        if (this.state.addEquipa === false) {\r\n\r\n            if (this.state[type]) currentEquipa = this.state[type]\r\n\r\n            collection.forEach(({ item }) => {\r\n                currentEquipa.forEach(ce => {\r\n                    if (ce.toLowerCase() === item.toLowerCase()) vEquip.push(item)\r\n                })\r\n            })\r\n\r\n            vEquip.forEach(ve => this.setState({ [ve]: true }))\r\n            console.log(this.state)\r\n        }\r\n        this.setState({ addEquipa: !this.state.addEquipa, type })\r\n    }\r\n\r\n    handleCheck = async (item, type) => {\r\n        const collection = this.props.redux[type]\r\n\r\n        if (!collection) return\r\n\r\n        let array = [], ids = [], stateKey\r\n\r\n        if (type === 'equipamentos') stateKey = 'equipamentosId'\r\n        if (type === 'acessibilidade') stateKey = 'acessibilidadeId'\r\n\r\n        await this.setState({ ...this.state, [item]: !this.state[item] })\r\n\r\n        collection.forEach(({ id, item }) => {\r\n            if (this.state[item] === true) {\r\n                array.push(item)\r\n                ids.push(id)\r\n            }\r\n        })\r\n\r\n        if (array[0]) this.setState({ [type]: array, [stateKey]: ids })\r\n        else if (type === 'equipamentos') this.setState({ equipamentos: [], [stateKey]: [] })\r\n        else if (type === 'acessibilidade') this.setState({ acessibilidade: [], [stateKey]: [] })\r\n    }\r\n\r\n    showAltPlaca = () => {\r\n        const title = 'Alteração de placa',\r\n            header = 'Para alterar a placa do veículo para o padrão Mercosul, digite a placa no campo abaixo e anexe o CRLV atualizado do veículo.'\r\n        this.setState({ altPlaca: true, title, header })\r\n    }\r\n\r\n    updatePlate = () => {\r\n        this.setState({ placa: this.state.newPlate })\r\n        this.toggleDialog()\r\n    }\r\n\r\n    handleSubmit = async (approved) => {\r\n        const\r\n            { veiculoId, poltronas, pesoDianteiro, pesoTraseiro, codigoEmpresa, originalVehicle, showPendencias, getUpdatedValues,\r\n                compartilhadoId, newPlate, selectedEmpresa, equipamentosId, acessibilidadeId, info, demand, form, demandFiles } = this.state,\r\n\r\n            oldHistoryLength = demand?.history?.length || 0\r\n\r\n        //****************************Prepare the request Object*******************************\r\n        let pbt = Number(poltronas) * 93 + (Number(pesoDianteiro) + Number(pesoTraseiro))\r\n        if (isNaN(pbt)) pbt = undefined\r\n\r\n        let tempObj = {}\r\n        altForm.forEach(form => {\r\n            form.forEach(obj => {\r\n                for (let k in this.state) {\r\n                    if (k === obj.field && !obj.disabled) {\r\n                        if (this.state[k]) Object.assign(tempObj, { [k]: this.state[k] })\r\n                    }\r\n                }\r\n            })\r\n        })\r\n        tempObj = Object.assign(tempObj, { codigoEmpresa, compartilhadoId, pbt, equipamentosId, acessibilidadeId })\r\n\r\n        if (demand && getUpdatedValues)\r\n            tempObj = getUpdatedValues(originalVehicle, tempObj)  //Save only real changes to the request Object (method from setDemand())\r\n\r\n        let { delegatario, compartilhado, ...camelizedRequest } = tempObj //remove invalid fields for update\r\n\r\n        if (newPlate && newPlate !== '')\r\n            camelizedRequest.placa = newPlate\r\n\r\n        //Se existia um delegatário compartilhado e a alteração é de apagar a relação de compartilhamento, deletar o delCompartilhado\r\n        if ((!this.state.compartilhado || this.state.compartilhado === '') && originalVehicle?.compartilhadoId)\r\n            camelizedRequest.compartilhadoId = 'NULL'\r\n\r\n        if (!approved && Object.keys(camelizedRequest).length === 0) {\r\n            this.setState({ openAlertDialog: true, customTitle: 'Nenhuma alteração', customMessage: 'Não foi realizada nenhuma alteração na solicitação aberta. Para prosseguir, altere algum dos campos ou adicione uma justificativa.' })\r\n            return\r\n        }\r\n        const requestObject = humps.decamelizeKeys(camelizedRequest)\r\n\r\n        //******************GenerateLog********************** */\r\n        let\r\n            history = {\r\n                alteracoes: camelizedRequest,\r\n                info,\r\n                files: form,\r\n            },\r\n            log = {\r\n                empresaId: selectedEmpresa?.codigoEmpresa,\r\n                veiculoId,\r\n                history,\r\n                demandFiles,\r\n                metadata: { veiculoId },\r\n                historyLength: oldHistoryLength,\r\n                approved\r\n            }\r\n        if (demand) log.id = demand?.id\r\n\r\n        logGenerator(log)\r\n            .then(r => console.log(r?.data))\r\n            .catch(err => console.log(err))\r\n\r\n        //*********************if approved, putRequest to update DB  ********************** */\r\n        if (demand && approved && !showPendencias) {\r\n            if (selectedEmpresa.codigoEmpresa !== codigoEmpresa) requestObject.apolice = 'Seguro não cadastrado'\r\n\r\n            const\r\n                table = 'veiculos',\r\n                tablePK = 'veiculo_id'\r\n\r\n            await axios.put('/api/updateVehicle', { requestObject, table, tablePK, id: veiculoId })\r\n        }\r\n\r\n        //******************Clear the state ********************** */\r\n        if (!approved) {\r\n            let toastMsg = 'Solicitação de alteração de dados enviada.'\r\n            if (demand && demand.status.match('Aguardando'))\r\n                toastMsg = 'Pendências para a alteração de dados registradas.'\r\n            this.toast(toastMsg)\r\n        }\r\n        else\r\n            this.toast()\r\n\r\n        if (!demand) {\r\n            await this.setState({ activeStep: 0, razaoSocial: undefined })\r\n            this.reset(true)\r\n        }\r\n        else\r\n            setTimeout(() => { this.props.history.push('/solicitacoes') }, 1500)\r\n    }\r\n\r\n    handleFiles = async (files, name) => {\r\n\r\n        if (files && files[0]) {\r\n            await this.setState({ [name]: files[0] })\r\n\r\n            const newState = handleFiles(files, this.state, altDadosFiles)\r\n            this.setState({ ...newState, fileToRemove: null })\r\n        }\r\n    }\r\n\r\n    removeFile = async (name) => {\r\n        const\r\n            { form } = this.state,\r\n            newState = removeFile(name, form)\r\n\r\n        this.setState({ ...this.state, ...newState })\r\n    }\r\n\r\n    setShowPendencias = () => this.setState({ showPendencias: !this.state.showPendencias })\r\n    toggleDialog = () => this.setState({ altPlaca: !this.state.altPlaca })\r\n    closeAlert = () => this.setState({ openAlertDialog: !this.state.openAlertDialog })\r\n    closeEquipa = () => this.setState({ addEquipa: false })\r\n    toast = toastMsg => this.setState({ confirmToast: !this.state.confirmToast, toastMsg: toastMsg ? toastMsg : this.state.toastMsg })\r\n    reset = resetAll => {\r\n\r\n        let resetFiles = {}\r\n\r\n        altForm.forEach(form => form.forEach(el => this.setState({ [el.field]: '' })))\r\n        altDadosFiles.forEach(({ name }) => {\r\n            Object.assign(resetFiles, { [name]: undefined })\r\n        })\r\n        if (resetAll) this.setState({ ...resetFiles, form: undefined, selectedEmpresa: undefined, razaoSocial: undefined })\r\n        else this.setState({ ...resetFiles, form: undefined })\r\n    }\r\n\r\n    render() {\r\n\r\n        const\r\n            { empresas, equipamentos, acessibilidade } = this.props.redux,\r\n\r\n            { confirmToast, toastMsg, stepTitles, activeStep, steps, altPlaca, selectedEmpresa, openAlertDialog, alertType, customTitle, customMessage,\r\n                dropDisplay, form, title, header, newPlate, demand, showPendencias, info, demandFiles } = this.state\r\n\r\n        return <Fragment>\r\n            <Crumbs links={['Veículos', '/veiculos']} text='Alteração de dados' demand={demand} />\r\n            <CustomStepper\r\n                activeStep={activeStep}\r\n                steps={steps}\r\n                stepTitles={stepTitles}\r\n                setActiveStep={this.setActiveStep}\r\n            />\r\n            <AltDadosTemplate\r\n                data={this.state}\r\n                empresas={empresas}\r\n                equipamentos={equipamentos}\r\n                acessibilidade={acessibilidade}\r\n                setActiveStep={this.setActiveStep}\r\n                altPlacaOption={activeStep === 0}\r\n                handleInput={this.handleInput}\r\n                handleBlur={this.handleBlur}\r\n                showAltPlaca={this.showAltPlaca}\r\n                handleEquipa={this.handleEquipa}\r\n                handleCheck={this.handleCheck}\r\n                close={this.closeEquipa}\r\n            />\r\n            {activeStep === 2 && <VehicleDocs\r\n                parentComponent='altDados'\r\n                dropDisplay={dropDisplay}\r\n                formData={form}\r\n                handleFiles={this.handleFiles}\r\n                demandFiles={demandFiles}\r\n                fileToRemove={this.state.fileToRemove}\r\n                removeFile={this.removeFile}\r\n            />}\r\n            {activeStep === 3 && <Review\r\n                parentComponent='altDados'\r\n                data={this.state}\r\n                form={altForm}\r\n                files={this.state.form}\r\n                filesForm={altDadosFiles}\r\n            />}\r\n            {selectedEmpresa && <StepperButtons\r\n                activeStep={activeStep}\r\n                lastStep={steps.length - 1}\r\n                handleSubmit={this.handleSubmit}\r\n                setActiveStep={this.setActiveStep}\r\n                showPendencias={showPendencias}\r\n                setShowPendencias={this.setShowPendencias}\r\n                info={info}\r\n                handleInput={this.handleInput}\r\n                demand={demand}\r\n            />}\r\n            <ReactToast open={confirmToast} close={this.toast} msg={toastMsg} />\r\n            <FormDialog\r\n                open={altPlaca}\r\n                close={this.toggleDialog}\r\n                title={title}\r\n                header={header}\r\n                inputNames={['newPlate']}\r\n                inputLabels={['Alterar Placa']}\r\n                fileInputName='newPlateDoc'\r\n                values={[newPlate]}\r\n                handleInput={this.handleInput}\r\n                handleFiles={this.handleFiles}\r\n                confirm={this.updatePlate}\r\n                dropDisplay={dropDisplay}\r\n                formData={form}\r\n            />\r\n            {openAlertDialog &&\r\n                <AlertDialog open={openAlertDialog} close={this.closeAlert} alertType={alertType} customMessage={customMessage} customTitle={customTitle} />}\r\n        </Fragment>\r\n    }\r\n}\r\n\r\nconst collections = ['veiculos', 'empresas', 'equipamentos', 'acessibilidade', 'getFiles/vehicleDocs', 'parametros'];\r\n\r\nexport default StoreHOC(collections, AltDados)","export const seguroForm = [\r\n    {\r\n        field: 'seguradora',\r\n        label: 'Seguradora',        \r\n        autoComplete: true,\r\n        datalist: 'seguradora',\r\n        collection: 'seguradoras',\r\n        width: 225\r\n    },\r\n    {       \r\n        field: 'apolice',\r\n        label: 'Apólice',        \r\n        autoComplete: true,\r\n        datalist: 'apolice',\r\n        collection: 'seguros',\r\n        maxLength: 25,\r\n        width: 225\r\n    },    \r\n    {\r\n        type: 'date',\r\n        field: 'dataEmissao',\r\n        label: 'Início da vigência',\r\n        width: 225\r\n    },\r\n    {\r\n        type: 'date',\r\n        field: 'vencimento',\r\n        label: 'Vencimento',\r\n        width: 225\r\n    }]","export const empresaFiles = [\r\n    { title: 'Contrato Social', name: 'contratoSocial' },\r\n    { title: 'Procuração', name: 'procuracao' },\r\n    { title: 'Apólice', name: 'apoliceDoc' },\r\n    { title: 'Alteração de contrato social', name: 'altContratoDoc' }\r\n]","import React, { Fragment } from 'react'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport TextInput from '../Reusable Components/TextInput'\r\nimport AutoComplete from '../Utils/autoComplete'\r\nimport DragAndDrop from '../Reusable Components/DragAndDrop'\r\nimport StepperButtons from '../Reusable Components/StepperButtons'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport Chip from '@material-ui/core/Chip'\r\n\r\nimport Add from '@material-ui/icons/Add'\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport Search from '@material-ui/icons/Search'\r\n\r\nimport { seguroForm } from '../Forms/seguroForm'\r\nimport './veiculos.scss'\r\nimport ShowLocalFiles from '../Reusable Components/ShowLocalFiles'\r\nimport { empresaFiles } from '../Forms/empresaFiles'\r\nimport FormSubtiltle from '../Reusable Components/FormSubtiltle'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    textField: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        width: '25%',\r\n        minWidth: 310,\r\n        fontSize: '0.8rem',\r\n        fontColor: '#bbb',\r\n        textAlign: 'center',\r\n    },\r\n}))\r\n\r\nexport default function SegurosTemplate({ empresas, data, seguros, seguradoras, enableAddPlaca, handleInput, handleBlur,\r\n    addPlate, removeFromInsurance, handleFiles, handleSubmit, enableChangeApolice, showAllPlates, removeFile, setShowPendencias }) {\r\n\r\n    const { selectedEmpresa, placa, apolice, addedPlaca, allVehicles, frota, demandFiles, fileToRemove, demand, insurance, dropDisplay, apoliceDoc,\r\n        showPendencias, info, renderedPlacas } = data\r\n\r\n    data.seguradoras = seguradoras\r\n\r\n    const classes = useStyles(), { textField } = classes\r\n\r\n    const getOwner = ({ compartilhado, outsider, irregular, delCompartilhado, owner }, e) => {\r\n\r\n        e.target.title = 'Veículo próprio'\r\n        if (compartilhado)\r\n            e.target.title = `Veículo próprio. Compartilhado por: ${delCompartilhado}`\r\n        if (outsider)\r\n            e.target.title = `Autorizado compartilhamento. Proprietário: ${owner}`\r\n        if (irregular)\r\n            e.target.title = `NÃO autorizado compartilhamento! Proprietário: ${owner}`\r\n    }\r\n\r\n    const insuranceExists = seguros.some(s => s.apolice === apolice)\r\n    return (\r\n        <Fragment>\r\n            <div style={{ width: '100%', display: 'flex', flexDirection: 'column' }}>\r\n                <Crumbs links={['Veículos', '/veiculos']} text='Seguros' demand={demand} />\r\n                <SelectEmpresa\r\n                    data={data}\r\n                    empresas={empresas}\r\n                    handleInput={handleInput}\r\n                    handleBlur={handleBlur}\r\n                />\r\n                {selectedEmpresa &&\r\n                    <section className=\"paper\">\r\n                        <FormSubtiltle subtitle='Informe os dados do seguro.' />\r\n                        <TextInput\r\n                            form={seguroForm}\r\n                            data={data}\r\n                            handleBlur={handleBlur}\r\n                            handleInput={handleInput}\r\n                        />\r\n                        {insuranceExists &&\r\n                            <div className='addNewDiv'>\r\n                                <span onClick={() => enableChangeApolice()}> → Clique aqui para adicionar nova apólice mantendo as placas abaixo selecionadas.</span>\r\n                            </div>\r\n                        }\r\n                    </section>\r\n                }\r\n                {\r\n                    selectedEmpresa && enableAddPlaca &&\r\n                    <main className='paper' style={{ textAlign: 'center', color: '#555' }}>\r\n                        <p>Utilize as opções abaixo para filtrar, adicionar ou excluir placas desta apólice</p>\r\n                        <section className='flex spaceBetween' style={{ paddingTop: '17px' }}>\r\n                            <div>\r\n                                <TextField\r\n                                    inputProps={{\r\n                                        name: 'addedPlaca',\r\n                                        list: 'placa'\r\n                                    }}\r\n                                    InputLabelProps={{\r\n                                        style: { fontSize: '0.8rem' }\r\n                                    }}\r\n                                    label='Insira a placa'\r\n                                    className={textField}\r\n                                    value={addedPlaca}\r\n                                    onChange={handleInput}\r\n                                    onBlur={handleBlur}\r\n                                />\r\n                                <AutoComplete\r\n                                    collection={allVehicles}\r\n                                    datalist='placa'\r\n                                    value={addedPlaca}\r\n                                />\r\n                                <Button\r\n                                    size=\"small\"\r\n                                    variant=\"contained\"\r\n                                    className={classes.button}\r\n                                    style={{ margin: '10px 0 10px 0' }}\r\n                                    onClick={() => addPlate(addedPlaca)}\r\n                                >\r\n                                    <Add /> Adicionar\r\n                            </Button>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <TextField\r\n                                    inputProps={{\r\n                                        name: 'placa',\r\n                                    }}\r\n                                    InputLabelProps={{\r\n                                        style: { fontSize: '0.8rem' }\r\n                                    }}\r\n                                    label='Filtrar'\r\n                                    className={textField}\r\n                                    value={placa || ''}\r\n                                    onChange={handleInput}\r\n                                    onBlur={handleBlur}\r\n                                />\r\n                                <Search style={{ marginTop: '18px' }} />\r\n                            </div>\r\n\r\n                            {!demand ?\r\n                                <DragAndDrop\r\n                                    name='apoliceDoc'\r\n                                    formData={apoliceDoc}\r\n                                    dropDisplay={dropDisplay}\r\n                                    handleFiles={handleFiles}\r\n                                    demandFiles={demandFiles}\r\n                                    removeFile={removeFile}\r\n                                    fileToRemove={fileToRemove}\r\n                                    style={{ padding: '0 10px', margin: '0 10px', width: '28%', minWidth: '320px' }}\r\n                                />\r\n                                : demandFiles[0] &&\r\n                                <div style={{ width: '225px', marginTop: '15px' }}>\r\n                                    <ShowLocalFiles\r\n                                        demand={demand}\r\n                                        collection='empresaDocs'\r\n                                        demandFiles={demandFiles}\r\n                                        form={empresaFiles}\r\n                                        style={{ width: '200px' }}\r\n                                    //files={files}\r\n                                    />\r\n                                </div>\r\n                            }\r\n\r\n                        </section>\r\n\r\n                        <div className='addNewDiv' style={{ justifyContent: 'flex-start', padding: '10px' }}>\r\n                            <span onClick={() => showAllPlates()}>→ Clique aqui para selecionar placas</span>\r\n                        </div>\r\n\r\n                        {/********************************* Lista de placas vinculadas (Chips) ********************************************/}\r\n\r\n                        {insurance?.placas && insurance?.placas[0]\r\n                            ?\r\n                            <div style={{ marginTop: '15px' }}>\r\n                                Placas vinculadas a apólice {insurance.apolice}\r\n                            </div>\r\n                            :\r\n                            <div style={{ marginTop: '30px' }}></div>\r\n                        }\r\n                        {insurance && insurance.placas && apolice && apolice.length > 2 && renderedPlacas && renderedPlacas[0] &&\r\n                            <>\r\n                                <p style={{ fontSize: '0.7rem', marginBottom: '10px', marginTop: '3px', color: '#787b6e' }} >\r\n                                    Selecionado{renderedPlacas.length > 1 ? 's' : ''} {renderedPlacas.length} veículo{renderedPlacas.length > 1 ? 's' : ''} de {frota?.length}\r\n                                </p>\r\n                                <div className=\"placasChipContainer\">\r\n                                    {\r\n                                        renderedPlacas.map(({ placa, compartilhado, outsider, irregular, delCompartilhado, owner }, i,) =>\r\n\r\n                                            <div onMouseOver={e => getOwner({ compartilhado, outsider, irregular, delCompartilhado, owner }, e)} key={i}>\r\n                                                <Chip\r\n                                                    key={i}\r\n                                                    label={placa}\r\n                                                    onDelete={() => removeFromInsurance(placa)}\r\n                                                    className={\r\n                                                        compartilhado ? 'chip-compartilhado'\r\n                                                            : outsider ? 'chip-outsider'\r\n                                                                : irregular ? 'chip-irregular'\r\n                                                                    : 'chip'}\r\n                                                    variant=\"outlined\"\r\n                                                />\r\n                                            </div>\r\n                                        )\r\n                                    }\r\n                                </div>\r\n                            </>\r\n                        }\r\n                    </main>}\r\n            </div >\r\n            {\r\n                apolice && (insurance || enableAddPlaca) && !demand ?\r\n                    <div style={{ minHeight: '60px', position: 'flex' }}>\r\n                        <Button\r\n                            size=\"small\"\r\n                            color='primary'\r\n                            className='saveButton'\r\n                            variant=\"contained\"\r\n                            onClick={() => handleSubmit()}\r\n                        //disabled={!renderedPlacas[0] || !apoliceDoc ? true : false}\r\n                        >\r\n                            Salvar <span>&nbsp;&nbsp; </span> <SaveIcon />\r\n                        </Button>\r\n                    </div>\r\n                    :\r\n                    selectedEmpresa && demand ?\r\n                        <StepperButtons\r\n                            uniqueStep={true}\r\n                            declineButtonLabel='Indeferir'\r\n                            demand={demand}\r\n                            setShowPendencias={setShowPendencias}\r\n                            showPendencias={showPendencias}\r\n                            info={info}\r\n                            handleSubmit={handleSubmit}\r\n                            handleInput={handleInput}\r\n                        />\r\n                        : null\r\n            }\r\n        </Fragment >\r\n    )\r\n}","import React from 'react'\r\nimport ClosePopUpButton from '../Reusable Components/ClosePopUpButton'\r\nimport '../Layouts/popUp.css'\r\n\r\nfunction ShowAllPlates({ items, title, data, close, selectAll, handleCheck, selectAllPlates }) {\r\n\r\n    return (\r\n        <div className=\"popUpWindow row\">\r\n            <h6>{title} Clique em \"X\" ou pressione 'esc' para voltar</h6>\r\n            <div style={{ margin: '10px 0', fontSize: '0.8rem' }}>\r\n                <input\r\n                    id='all'\r\n                    type='checkbox'\r\n                    checked={selectAll === true}\r\n                    onChange={() => selectAllPlates()} />\r\n                <label htmlFor='all'>{selectAll ? 'Desmarcar todas selecionadas' : 'Selecionar todas'}</label>\r\n            </div>\r\n\r\n            <main className=\"checkListContainer\">\r\n                {\r\n                    items.map((item, i) =>\r\n                        <div className=\"checkListItem\" key={i}>\r\n                            <input\r\n                                id={i}\r\n                                type='checkbox'\r\n                                checked={data[item] === true}\r\n                                onChange={() => handleCheck(item)} />\r\n                            <label htmlFor={i}>{item}</label>\r\n                        </div>\r\n                    )\r\n                }\r\n            </main>\r\n            <ClosePopUpButton close={close} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ShowAllPlates\r\n","import React from 'react';\r\n\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function ConfigAddDialog({ open, close, title, helperMessage, marca, marcas, selectMarca, newElement, handleInput, addNewElement }) {\r\n\r\n    return (\r\n        <div>\r\n            <Dialog open={open} onClose={close} aria-labelledby=\"form-dialog-title\">\r\n                <DialogTitle id=\"form-dialog-title\">{title}</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        {helperMessage}\r\n                    </DialogContentText>\r\n                    <div className=\"editFields\">\r\n                        {marcas && <div className=\"configMarca\">\r\n                            <TextField\r\n                                onChange={selectMarca}\r\n                                value={marca}\r\n                                label='Selecione uma marca'\r\n                                select={true}\r\n                                InputLabelProps={{ shrink: true }}\r\n                                SelectProps={{\r\n                                    style: {\r\n                                        fontSize: '0.9rem', color: '#555', fontWeight: 400,\r\n                                        width: 325, height: '44px'\r\n                                    }\r\n                                }}\r\n                            >\r\n                                {marcas.map(({ marca }, i) =>\r\n                                    <MenuItem key={i} value={marca} >\r\n                                        {marca}\r\n                                    </MenuItem>\r\n                                )}\r\n                            </TextField>\r\n                        </div>}\r\n                        <div className=\"configField\">\r\n                            <TextField\r\n                                autoFocus\r\n                                margin=\"dense\"\r\n                                name='newElement'\r\n                                label=\"Inserir\"\r\n                                type=\"text\"\r\n                                onChange={handleInput}\r\n                                value={newElement}\r\n                                fullWidth\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <br /><br /><br />\r\n\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={close} color=\"primary\">\r\n                        Cancelar\r\n              </Button>\r\n                    <Button onClick={() => addNewElement()} color=\"primary\">\r\n                        Confirmar\r\n              </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}","export const setEmpresaDemand = (demand, redux, socios) => {\r\n\r\n    const { pathname } = document.location\r\n    let associateKeys = { name: 'nomeSocio', id: 'socioId' }\r\n\r\n    if (pathname.match('procurador'))\r\n        associateKeys = { name: 'nomeProcurador', id: 'procuradorId' }\r\n\r\n    const\r\n        { empresas, empresaDocs } = redux,\r\n        { name, id } = associateKeys,\r\n        history = demand?.history || [],\r\n        length = history?.length,\r\n\r\n        selectedEmpresa = empresas.find(e => e.codigoEmpresa === demand?.empresaId),\r\n        razaoSocial = selectedEmpresa?.razaoSocial\r\n\r\n    let\r\n        lastUpdate,\r\n        newMembers = [],\r\n        oldMembers = [],\r\n        latestDoc\r\n\r\n    if (history[0]) lastUpdate = history[length - 1]\r\n\r\n    if (lastUpdate) {\r\n        newMembers = lastUpdate?.newMembers || []\r\n        oldMembers = lastUpdate?.oldMembers || []\r\n    }\r\n\r\n    //******************Get latest uploaded files per field\r\n\r\n    const\r\n        latestDocId = history\r\n            .reverse()\r\n            .find(el => el.files)?.files || []\r\n\r\n    if (latestDocId[0])\r\n        latestDoc = empresaDocs.find(doc => doc.id === latestDocId[0])\r\n\r\n    if (oldMembers[0])\r\n        socios.forEach(s => {\r\n            oldMembers.forEach(om => {\r\n                if (s[id] === om[id])\r\n                    Object.keys(om).forEach(key => {\r\n                        s[key] = om[key]\r\n                    })\r\n            })\r\n        })\r\n\r\n    const\r\n        filteredSocios = socios\r\n            .concat(newMembers)\r\n            .sort((a, b) => a[name].localeCompare(b[name]))\r\n\r\n    //****************** Return the object\r\n    return {\r\n        razaoSocial, selectedEmpresa, demand, latestDoc, newMembers, oldMembers, getUpdatedValues, filteredSocios\r\n    }\r\n}\r\n\r\nfunction getUpdatedValues(originalObj, newObj) {\r\n    Object.keys(newObj).forEach(key => {\r\n        if (newObj[key] && originalObj[key]) {\r\n\r\n            if (key === 'equipamentosId' || key === 'acessibilidadeId')\r\n                newObj[key].sort((a, b) => a - b)\r\n\r\n            if (newObj[key].toString() === originalObj[key].toString())\r\n                delete newObj[key]\r\n        }\r\n        if (newObj[key] === '' || newObj[key] === 'null' || !newObj[key]) delete newObj[key]\r\n    })\r\n    const updatedFields = newObj\r\n    return updatedFields\r\n}","import React, { Component, Fragment } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\nimport moment from 'moment'\r\nimport { sizeExceedsLimit } from '../Utils/handleFiles'\r\nimport SeguroTemplate from './SegurosTemplate'\r\nimport ShowAllPlates from './ShowAllPlates'\r\nimport ConfigAddDialog from './ConfigAddDialog'\r\nimport { checkInputErrors } from '../Utils/checkInputErrors'\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\nimport { seguroForm } from '../Forms/seguroForm'\r\nimport { logGenerator } from '../Utils/logGenerator'\r\nimport { setEmpresaDemand } from '../Utils/setEmpresaDemand'\r\nimport { removeFile } from '../Utils/handleFiles'\r\n\r\n\r\nclass Seguro extends Component {\r\n\r\n    constructor() {\r\n        super()\r\n        this.escFunction = (e) => {\r\n            if (e.keyCode === 27) {\r\n                if (this.state.openAddDialog) this.toggleDialog()\r\n                if (this.state.showAllPlates) this.setState({ showAllPlates: false })\r\n            }\r\n        }\r\n    }\r\n\r\n    state = {\r\n        addedPlaca: '',\r\n        razaoSocial: '',\r\n        seguradora: '',\r\n        deletedVehicles: [],\r\n        toastMsg: 'Seguro atualizado!',\r\n        confirmToast: false,\r\n        dropDisplay: 'Clique ou arraste para anexar a apólice',\r\n        showAllPlates: false,\r\n        showPendencias: false,\r\n        selectAll: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const\r\n            { redux } = this.props,\r\n            demand = this.props?.location?.state?.demand\r\n\r\n        if (demand) {\r\n            const\r\n                demandState = setEmpresaDemand(demand, redux, []),\r\n                { latestDoc, newMembers, oldMembers, filteredSocios, ...filteredState } = demandState,\r\n                history = demand?.history[0],\r\n                insurance = {}\r\n\r\n            seguroForm.forEach(({ field }) => {\r\n                if (history.hasOwnProperty(field))\r\n                    insurance[field] = history[field]\r\n            })\r\n\r\n            const insuranceVehicles = redux.veiculos\r\n                .filter(v => history.vehicleIds.some(id => id === v.veiculoId))\r\n\r\n            insurance.placas = insuranceVehicles.map(v => v.placa)\r\n            insurance.veiculos = insuranceVehicles.map(v => v.veiculoId)\r\n\r\n            const seguradoraId = history?.seguradoraId\r\n\r\n            await this.setState({ ...this.state, ...filteredState, ...insurance, insurance, demand, seguradoraId, demandFiles: [latestDoc] })\r\n\r\n            await this.filterInsurances()\r\n            this.renderPlacas()\r\n        }\r\n        document.addEventListener('keydown', this.escFunction, false)\r\n    }\r\n    //Se uma viação válida estiver selecionada, filtra sua frota e os veículos que apesar de não possuir os tem na apólice de seguro\r\n    filterInsurances = async () => {\r\n        const\r\n            { seguros } = this.props.redux,\r\n            { selectedEmpresa } = this.state,\r\n            { codigoEmpresa } = selectedEmpresa,\r\n            filteredInsurances = seguros.filter(seguro => seguro.codigoEmpresa === codigoEmpresa),\r\n            dataFromServer = await axios.get(`/api/allVehicles?codigoEmpresa=${codigoEmpresa}`),\r\n            allVehicles = humps.camelizeKeys(dataFromServer?.data) || [],\r\n            allPlates = allVehicles.map(vehicle => vehicle.placa).sort(),\r\n            frota = allVehicles.filter(v => v.codigoEmpresa === codigoEmpresa),\r\n            ownedPlacas = frota.map(v => v.placa)\r\n\r\n        //console.log(\"Seguro -> componentDidMount -> allVehicles\", allVehicles, allPlates, ownedPlacas)\r\n        this.setState({ seguros: filteredInsurances, allVehicles, frota, ownedPlacas, allPlates })\r\n    }\r\n\r\n    //Verifica se o seguro já existe\r\n    checkExistance = async inputValue => {\r\n\r\n        const\r\n            seguros = JSON.parse(JSON.stringify(this.props.redux.seguros)),\r\n            { selectedEmpresa, demand } = this.state,\r\n            { codigoEmpresa } = selectedEmpresa,\r\n            s = [...seguros.filter(se => se.codigoEmpresa === codigoEmpresa)]\r\n\r\n        let insurance = { ...s.find(s => s.apolice === inputValue) }\r\n\r\n        if (demand && this.state.insurance)\r\n            insurance = this.state.insurance\r\n\r\n        const insuranceExists = Object.keys(insurance).length > 0\r\n\r\n        if (insuranceExists) {\r\n            const\r\n                dataEmissao = moment(insurance.dataEmissao).format('YYYY-MM-DD'),\r\n                vencimento = moment(insurance.vencimento).format('YYYY-MM-DD'),\r\n                { seguradora, seguradoraId } = insurance\r\n\r\n            await this.setState({ seguradora, seguradoraId, dataEmissao, vencimento, insurance })\r\n            return\r\n        }\r\n        else this.setState({ dataEmissao: '', vencimento: '', deletedVehicles: [], insurance: {} })\r\n    }\r\n\r\n    //Marca as placas que possuem compartilhamento por outra empresa. Acionado ao se informar a apólice (caso já exista)   \r\n    renderPlacas = placas => {\r\n        const { allVehicles, insurance, ownedPlacas } = this.state\r\n        //console.log(\"allVehicles\", allVehicles)\r\n\r\n        if (insurance) {\r\n            //Se passar as placas como argumento se trata do filtro do searchBar. Senão é a renderização depois de preencher a apólice\r\n            if (!placas) placas = insurance.placas || []\r\n\r\n            let renderedPlacas = []\r\n            placas.forEach(p => {\r\n                const\r\n                    veiculo = allVehicles.find(v => v.placa === p),\r\n                    { placa, empresa, compartilhado } = veiculo,\r\n                    vehicleDetails = { placa, owner: empresa, delCompartilhado: compartilhado }\r\n\r\n                //Se o veículo não for próprio\r\n                if (!ownedPlacas.includes(placa)) {\r\n                    //Se constar com compartilhado de outra viação, está fora da frota da empresa, senão pode estar irregular\r\n                    if (compartilhado)\r\n                        Object.assign(vehicleDetails, { outsider: true })\r\n                    else\r\n                        Object.assign(vehicleDetails, { irregular: true })\r\n                }\r\n                //Se o veículo for próprio:\r\n                else {\r\n                    if (compartilhado)\r\n                        vehicleDetails.compartilhado = true\r\n                    else\r\n                        vehicleDetails.compartilhado = false\r\n                }\r\n                renderedPlacas.push(vehicleDetails)\r\n            })\r\n            this.setState({ renderedPlacas })\r\n        }\r\n    }\r\n\r\n    handleInput = async e => {\r\n\r\n        let { value } = e.target\r\n        const\r\n            { name } = e.target,\r\n            { empresas, seguradoras } = this.props.redux,\r\n            { selectedEmpresa, allVehicles, insurance, apolice, dataEmissao, vencimento, newInsurance, seguradora } = this.state\r\n\r\n        this.setState({ [name]: value })\r\n\r\n        switch (name) {\r\n            case 'razaoSocial':\r\n                let selectedEmpresa = empresas.find(e => e.razaoSocial === value)\r\n\r\n                if (selectedEmpresa) {\r\n                    await this.setState({ razaoSocial: selectedEmpresa.razaoSocial, selectedEmpresa })\r\n                    if (value !== selectedEmpresa.razaoSocial) this.setState({ selectedEmpresa: undefined })\r\n                    this.filterInsurances()\r\n\r\n                } else {\r\n                    this.setState({ selectedEmpresa: undefined, frota: [] })\r\n                    this.clearFields()\r\n                }\r\n                break\r\n\r\n            case 'apolice':\r\n                await this.checkExistance(value)\r\n                this.renderPlacas()\r\n                break\r\n\r\n            case 'seguradora':\r\n                const selectedSeguradora = seguradoras.find(sg => sg.seguradora === value)\r\n                if (selectedSeguradora) {\r\n                    this.setState({ seguradoraId: selectedSeguradora.id })\r\n                }\r\n                break\r\n            case 'placa':\r\n                let placas = []\r\n                if (insurance?.placas) {\r\n                    if (insurance.placas[0] && insurance.placas[0] !== null)\r\n                        placas = insurance.placas.sort()\r\n\r\n                    if (value !== undefined && value.length > 2 && placas[0]) {\r\n                        if (typeof value === 'string')\r\n                            placas = insurance.placas.filter(p => p.toLowerCase().match(value.toLowerCase())).sort()\r\n                        else\r\n                            placas = insurance.placas.filter(p => p.match(value)).sort()\r\n                    }\r\n                    this.renderPlacas(placas)\r\n                }\r\n                break\r\n            case 'addedPlaca':\r\n                const vehicleFound = allVehicles.find(v => v.placa === value)\r\n                if (vehicleFound) this.setState({ vehicleFound })\r\n                break;\r\n            default:\r\n                void 0\r\n        }\r\n\r\n        // *************NEW INSURANCE CHECK / UPDATE STATE****************\r\n        const fields = ['seguradora', 'apolice', 'dataEmissao', 'vencimento']\r\n        const checkFields = fields.every(f => this.state[f] && this.state[f] !== '')\r\n\r\n        if (name !== 'razaoSocial' && !newInsurance && checkFields && !insurance) {\r\n            let seguradoraId\r\n            const selectedSeguradora = seguradoras.find(sg => sg.seguradora === this.state.seguradora)\r\n            if (selectedSeguradora) seguradoraId = selectedSeguradora.id\r\n\r\n            const newInsurance = {\r\n                empresa: selectedEmpresa.razaoSocial,\r\n                codigoEmpresa: selectedEmpresa.codigoEmpresa,\r\n                apolice, seguradora, seguradoraId, dataEmissao, vencimento, placas: [], veiculos: []\r\n            }\r\n            await this.setState({ insurance: newInsurance, seguradoraId })\r\n        }\r\n    }\r\n\r\n    handleBlur = e => {\r\n\r\n        const\r\n            { seguradoras, seguros } = this.props.redux,\r\n            { seguradora, selectedEmpresa } = this.state,\r\n            { name } = e.target,\r\n            codigoEmpresa = selectedEmpresa?.codigoEmpresa\r\n\r\n        if (name === 'seguradora') {\r\n            let filteredInsurances = []\r\n\r\n            const valid = seguradoras.find(s => s.seguradora.toLowerCase().match(seguradora.toLowerCase()))\r\n            if (valid && seguradora.length > 2)\r\n                this.setState({ seguradora: valid.seguradora, seguradoraId: valid.id })\r\n            if (!valid && seguradora.length > 2)\r\n                this.setState({ openAlertDialog: true, alertType: 'seguradoraNotFound', seguradora: undefined })\r\n\r\n            if (selectedEmpresa && !seguradora) {\r\n                filteredInsurances = seguros.filter(s => s.codigoEmpresa === codigoEmpresa)\r\n                this.setState({ seguros: filteredInsurances })\r\n            }\r\n            else if (!selectedEmpresa && seguradora !== '') {\r\n                filteredInsurances = seguros.filter(s => s.seguradora === seguradora)\r\n                this.setState({ seguros: filteredInsurances })\r\n            }\r\n            else if (selectedEmpresa && seguradora !== '') {\r\n                filteredInsurances = seguros\r\n                    .filter(seg => seg.codigoEmpresa === codigoEmpresa)\r\n                    .filter(seg => seg.seguradora === seguradora)\r\n                this.setState({ seguros: filteredInsurances })\r\n            }\r\n        }\r\n        if (name === 'dataEmissao' || name === 'vencimento') {\r\n            const errors = checkInputErrors()\r\n            if (errors) this.setState({ errors })\r\n            else this.setState({ errors: undefined })\r\n        }\r\n    }\r\n\r\n    showAllPlates = () => {\r\n        const { insurance, allPlates } = this.state\r\n        let placas = [], allPlatesObj = {}\r\n\r\n        if (insurance?.placas)\r\n            placas = insurance.placas\r\n\r\n        allPlates.forEach(p => Object.assign(allPlatesObj, { [p]: false }))\r\n        placas.forEach(p => Object.assign(allPlatesObj, { [p]: true }))\r\n\r\n        this.setState({ allPlatesObj, insuredPlates: placas, showAllPlates: !this.state.showAllPlates })\r\n    }\r\n\r\n    handleCheck = async plate => {\r\n\r\n        let allPlatesObj = { ...this.state.allPlatesObj }\r\n        allPlatesObj[plate] = !allPlatesObj[plate]\r\n\r\n        if (allPlatesObj[plate] === true) this.addPlate(plate)\r\n        else this.removeFromInsurance(plate)\r\n\r\n        this.setState({ allPlatesObj })\r\n    }\r\n\r\n    selectAllPlates = () => {\r\n        const\r\n            { allPlates, selectAll } = this.state,\r\n            updatedState = {}\r\n\r\n        if (allPlates) {\r\n            allPlates.forEach(p => {\r\n\r\n                if (selectAll) {\r\n                    updatedState[p] = false\r\n                    this.removeFromInsurance(p)\r\n                } else {\r\n                    updatedState[p] = true\r\n                    this.addPlate(p, true)\r\n                }\r\n            })\r\n        }\r\n        this.setState({ selectAll: !selectAll, allPlatesObj: updatedState })\r\n    }\r\n\r\n    addPlate = async (placaInput, allSelected) => {\r\n\r\n        const\r\n            { apolice, allVehicles, deletedVehicles, insurance } = this.state,\r\n            vehicleFound = allVehicles.find(v => v.placa === placaInput)\r\n\r\n        if (!placaInput || placaInput === '') return\r\n\r\n        //Check if vehicle belongs to frota before add to insurance and  if plate already belongs to apolice\r\n        if (vehicleFound === undefined || vehicleFound.hasOwnProperty('veiculoId') === false) {\r\n            this.setState({ openAlertDialog: true, alertType: 'plateNotFound' })\r\n            return null\r\n        } else if (insurance && insurance.placas && vehicleFound.placa && !allSelected) {\r\n            const check = insurance.placas.find(p => p === vehicleFound.placa)\r\n            if (check) {\r\n                this.setState({ openAlertDialog: true, alertType: 'plateExists' })\r\n                return null\r\n            }\r\n        }\r\n        // Add plates to rendered list\r\n        if (apolice && insurance) {\r\n            const\r\n                update = { ...insurance },\r\n                { veiculoId } = vehicleFound\r\n\r\n            if (!update.placas) update.placas = []\r\n            if (!update.veiculos) update.veiculos = []\r\n\r\n            if (!update.placas.includes(placaInput))\r\n                update.placas.push(placaInput)\r\n            if (!update.veiculos.includes(veiculoId))\r\n                update.veiculos.push(veiculoId)\r\n\r\n            //Remove from state.deletedVehicles if its the case\r\n            if (deletedVehicles.includes(veiculoId)) {\r\n                const i = deletedVehicles.indexOf(veiculoId)\r\n                deletedVehicles.splice(i, 1)\r\n            }\r\n            this.renderPlacas(update?.placas)\r\n            this.setState({ insurance: update, addedPlaca: '', deletedVehicles })\r\n        }\r\n    }\r\n\r\n    removeFromInsurance = async placaInput => {\r\n\r\n        const\r\n            { apolice, allVehicles } = this.state,\r\n            vehicleFound = allVehicles.find(v => v.placa === placaInput),\r\n            { veiculoId, placa } = vehicleFound\r\n\r\n        let\r\n            insurance = { ...this.state.insurance },\r\n            deletedVehicles = [...this.state.deletedVehicles],\r\n            placas = [],\r\n            veiculos = [],\r\n            check\r\n\r\n        const seg = this.props.redux.seguros.find(s => s.apolice === apolice)\r\n        if (seg && seg.placas)\r\n            check = seg.placas.includes(placa)\r\n\r\n        if (check) {\r\n            let { veiculos } = insurance\r\n            const k = veiculos.indexOf(veiculoId)\r\n\r\n            if (!deletedVehicles.includes(veiculos[k])) {\r\n                deletedVehicles.push(veiculos[k])\r\n                this.setState({ deletedVehicles })\r\n            }\r\n        }\r\n\r\n        if (insurance.placas) placas = insurance.placas\r\n        if (insurance.veiculos) veiculos = insurance.veiculos\r\n\r\n        const\r\n            i = placas.indexOf(placa),\r\n            k = veiculos.indexOf(veiculoId)\r\n\r\n        insurance.placas.splice(i, 1)\r\n        insurance.veiculos.splice(k, 1)\r\n\r\n        await this.setState({ insurance })\r\n        this.renderPlacas()\r\n    }\r\n\r\n    updateInsurance = () => {\r\n        const\r\n            { insurance, dataEmissao, vencimento, seguradoraId } = this.state,\r\n            { id, veiculos } = insurance\r\n\r\n        let updates = {}\r\n        const\r\n            emissaoDidChange = !moment(dataEmissao).isSame(moment(insurance.dataEmissao)),\r\n            vencimentoDidChange = !moment(vencimento).isSame(moment(insurance.vencimento)),\r\n            seguradoraDidChange = seguradoraId !== insurance.seguradoraId\r\n\r\n        if (!emissaoDidChange && !vencimentoDidChange && seguradoraDidChange) return null\r\n\r\n        if (emissaoDidChange) updates.data_emissao = dataEmissao\r\n        if (vencimentoDidChange) updates.vencimento = vencimento\r\n        if (seguradoraDidChange) updates.seguradora_id = seguradoraId\r\n\r\n        const requestObj = {\r\n            id,\r\n            columns: Object.keys(updates),\r\n            updates,\r\n            vehicleIds: veiculos\r\n        }\r\n        axios.put('/api/updateInsurance', requestObj)\r\n            .then(r => console.log(r.data))\r\n    }\r\n\r\n    handleSubmit = async approved => {\r\n\r\n        const { seguradora, insurance, errors, deletedVehicles, seguradoraId, apolice,\r\n            dataEmissao, vencimento, selectedEmpresa, demand, demandFiles, apoliceDoc, info } = this.state\r\n\r\n        let vehicleIds = []\r\n\r\n        //Checar erros de preenchimento ou campos vazios\r\n        if (errors && errors[0]) {\r\n            this.setState({ ...this.state, ...checkInputErrors('setState') })\r\n            return\r\n        }\r\n        if (!seguradora || seguradora === '') {\r\n            this.setState({ openAlertDialog: true, alertType: 'seguradoraNotFound', seguradora: undefined })\r\n            return\r\n        }\r\n        if (!insurance?.veiculos || !insurance.veiculos[0]) {\r\n            this.setState({\r\n                openAlertDialog: true, customTitle: 'Nenhum veículo inserido',\r\n                customMsg: 'Não foi inserido nenhum veículo para o seguro informado. Para inserir, digite a placa no campo \"Insira a placa\" ou clique para selecionar a(s) placa(s) do(s) veículo(s) coberto(s) por esse seguro.'\r\n            })\r\n            return\r\n        }\r\n\r\n        //Create seguro object e checar datas\r\n        const\r\n            cadSeguro = {\r\n                apolice,\r\n                seguradora_id: seguradoraId,\r\n                codigo_empresa: selectedEmpresa.codigoEmpresa\r\n            },\r\n            emis = moment(dataEmissao, 'YYYY-MM-DD', true),\r\n            venc = moment(vencimento, 'YYYY-MM-DD', true),\r\n            validEmissao = emis.isValid(),\r\n            validVenc = venc.isValid(),\r\n            invalido = venc.isSameOrBefore(emis, 'day'),\r\n            vencido = venc.isBefore(moment(), 'day'),\r\n            pendente = emis.isAfter(moment(), 'day'),\r\n            vigente = emis.isSameOrBefore(moment(), 'day')\r\n\r\n        if (invalido) {\r\n            alert('A data de vencimento informada é anterior ao início da vigência.')\r\n            return\r\n        }\r\n        if (vencido) {\r\n            alert('O seguro informado está vencido.')\r\n            return\r\n        }\r\n        if (pendente)\r\n            cadSeguro.situacao = 'Aguardando início da vigência'\r\n        if (vigente)\r\n            cadSeguro.situacao = 'Vigente'\r\n        if (validEmissao)\r\n            cadSeguro.data_emissao = dataEmissao\r\n        if (validVenc)\r\n            cadSeguro.vencimento = vencimento\r\n\r\n        //*******************Create a new demand\r\n        if (!demand) {\r\n            // New or existing, insurance will be in state if the all fields are filled and update every plate added or removed.\r\n            if (insurance)\r\n                vehicleIds = insurance.veiculos\r\n\r\n            let { codigoEmpresa, ...seguro } = cadSeguro\r\n            seguro.seguradora = seguradora\r\n            seguro = humps.camelizeKeys(seguro)\r\n\r\n            const log = {\r\n                empresaId: selectedEmpresa?.codigoEmpresa,\r\n                history: {\r\n                    ...seguro,\r\n                    vehicleIds,\r\n                    files: apoliceDoc\r\n                },\r\n                demandFiles,\r\n                metadata: {\r\n                    fieldName: 'apoliceDoc',\r\n                    apolice,\r\n                    empresaId: selectedEmpresa?.codigoEmpresa,\r\n                },\r\n                historyLength: 0,\r\n                approved\r\n            }\r\n            //Registrar os veiculos apagados pela demanda\r\n            if (deletedVehicles[0])\r\n                log.history.deletedVehicles = deletedVehicles\r\n\r\n            logGenerator(log)\r\n            this.confirmAndResetState('Solicitação de cadastro de seguro enviada')\r\n            return\r\n        }\r\n\r\n        //Se a demanda já existe e for indeferida\r\n        if (approved === false) {\r\n            const log = {\r\n                id: demand.id,\r\n                history: {\r\n                    info\r\n                },\r\n                declined: true\r\n            }\r\n            logGenerator(log)\r\n                .then(r => console.log(r))\r\n            this.confirmAndResetState('Solicitação indeferida!')\r\n        }\r\n        //Aprovar demanda\r\n        if (approved === true)\r\n            this.approveInsurance(cadSeguro)\r\n    }\r\n\r\n    approveInsurance = async cadSeguro => {\r\n        const\r\n            { seguros } = this.props.redux,\r\n            { apolice, vencimento, dataEmissao, seguradoraId, insurance, demand, demandFiles } = this.state,\r\n            vehicleIds = insurance.veiculos\r\n\r\n        //****************************** Cria o body para os requests****************************** */\r\n        const body = {\r\n            table: 'veiculos',\r\n            column: 'apolice',\r\n            value: apolice,\r\n            tablePK: 'veiculo_id',\r\n            ids: vehicleIds\r\n        }\r\n        //********************************** CREATE/UPDATE INSURANCE **********************************\r\n        const insuranceExists = seguros.find(s => s.apolice === apolice)\r\n\r\n        if (insuranceExists) {\r\n            const\r\n                de = moment(insuranceExists.dataEmissao).isSame(moment(dataEmissao)),\r\n                v = moment(insuranceExists.vencimento).isSame(moment(vencimento)),\r\n                vExists = JSON.stringify(vehicleIds) === JSON.stringify(insuranceExists.veiculos)\r\n\r\n            //Evitar seguro repetido de ser cadastrado\r\n            if (de && v && vExists) {\r\n                this.setState({\r\n                    openAlertDialog: true,\r\n                    customTitle: 'Seguro existente',\r\n                    customMsg: 'O seguro informado já existe no sistema. Para cadastrar um novo seguro, altere o número da apólice, ou as datas de emissão e vencimento.'\r\n                })\r\n                return\r\n            }\r\n            //Se o seguro novo tiver o mesmo número de apólice e já estiver vigente, apenas atualiza o registro do Postgresql\r\n            if (cadSeguro.situacao === 'Vigente') {\r\n                let updates = { dataEmissao, vencimento, seguradoraId, situacao: cadSeguro.situacao }\r\n                updates = humps.decamelizeKeys(updates)\r\n                const\r\n                    columns = Object.keys(updates),\r\n                    requestObj = {\r\n                        id: insuranceExists?.id,\r\n                        vehicleIds,\r\n                        columns,\r\n                        updates,\r\n                    }\r\n                await axios.put('/api/updateInsurance', { ...requestObj })\r\n\r\n                //Se algum veículo não está no novo seguro de mesmo n de apolice, deve ser excluido o número de apólice dele\r\n                const deletedVehicles = demand?.history[0]?.deletedVehicles\r\n                if (deletedVehicles)\r\n                    body.deletedVehicles = deletedVehicles\r\n            }\r\n        }\r\n\r\n        //Se as datas forem diferentes, se trata de cadastrar um novo seguro no MongoDB, ainda que o número da apólice seja o mesmo (caso insuranceExists === true ou false)\r\n        if (cadSeguro.situacao === 'Aguardando início da vigência') {\r\n            cadSeguro.veiculos = vehicleIds\r\n            console.log({ ...cadSeguro })\r\n            await axios.post('/api/cadSeguroMongo', { ...cadSeguro })\r\n        }\r\n        //Se o seguro cadastrado já estiver vigente já cadastra direto no Postgrtesql (tabela seguros) e atualiza a tabela de veículos\r\n        if (cadSeguro.situacao === 'Vigente' && !insuranceExists)\r\n            await axios.post('/api/cadSeguro', cadSeguro)\r\n                .then(r => {\r\n                    if (r.status === 200)\r\n                        console.log(r.status, 'cadSeguroOk')\r\n                })\r\n\r\n        //A atualização da coluna \"apólice\" da tabela veículos vai sempre ocorrer. Independente de ser um novo número ou não de apolice, \r\n        //novos veículos podem ser adicionados ou excluídos\r\n\r\n        await axios.put('/api/updateInsurances', body)\r\n            .then(res => {\r\n                console.log(res.data)\r\n                this.setState({ dontUpdateProps: true })\r\n            })\r\n\r\n        //Cria o log de demanda concluída\r\n        const log = {\r\n            id: demand.id,\r\n            demandFiles,\r\n            history: {},\r\n            metadata: {},\r\n            approved: true\r\n        }\r\n        logGenerator(log)\r\n        this.confirmAndResetState()\r\n    }\r\n\r\n    confirmAndResetState = confirmMessage => {\r\n        const { demand } = this.state\r\n        this.toast(confirmMessage)\r\n        this.clearFields()\r\n\r\n        if (demand)\r\n            setTimeout(() => {\r\n                this.props.history.push('/solicitacoes')\r\n            }, 1500);\r\n    }\r\n\r\n    handleFiles = async files => {\r\n        //limit files Size\r\n        if (sizeExceedsLimit(files)) return\r\n\r\n        let formData = new FormData()\r\n        formData.append('apoliceDoc', files[0])\r\n        await this.setState({ apoliceDoc: formData, fileToRemove: null })\r\n    }\r\n\r\n    removeFile = async (name) => {\r\n        const\r\n            { apoliceDoc } = this.state,\r\n            newState = removeFile(name, apoliceDoc)\r\n\r\n        this.setState({ ...this.state, ...newState })\r\n    }\r\n    addNewElement = () => this.setState({ apolice: this.state.newElement, openAddDialog: false })\r\n    setShowPendencias = () => this.setState({ showPendencias: !this.state.showPendencias })\r\n    toggleDialog = () => this.setState({ openAddDialog: !this.state.openAddDialog })\r\n    toast = toastMsg => this.setState({ confirmToast: !this.state.confirmToast, toastMsg: toastMsg ? toastMsg : this.state.toastMsg })\r\n    closeAlert = () => this.setState({ openAlertDialog: !this.state.openAlertDialog })\r\n    clearFields = () => {\r\n        this.setState({\r\n            seguradora: '', insurance: undefined, apolice: '', dataEmissao: '', vencimento: '', apoliceDoc: null, deletedVehicles: [],\r\n            dropDisplay: 'Clique ou arraste para anexar a apólice'\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const\r\n            { openAlertDialog, alertType, openAddDialog, showAllPlates, allPlates, allPlatesObj, selectAll, customTitle, customMsg } = this.state,\r\n            { empresas, seguradoras, seguros } = this.props.redux\r\n\r\n        const enableAddPlaca = seguroForm\r\n            .every(k => this.state.hasOwnProperty(k.field) && this.state[k.field] !== '')\r\n\r\n        return (\r\n            <Fragment>\r\n                <SeguroTemplate\r\n                    data={this.state}\r\n                    empresas={empresas}\r\n                    seguros={seguros}\r\n                    seguradoras={seguradoras}\r\n                    enableAddPlaca={enableAddPlaca}\r\n                    handleInput={this.handleInput}\r\n                    handleBlur={this.handleBlur}\r\n                    addPlate={this.addPlate}\r\n                    removeFromInsurance={this.removeFromInsurance}\r\n                    enableChangeApolice={this.toggleDialog}\r\n                    handleFiles={this.handleFiles}\r\n                    handleSubmit={this.handleSubmit}\r\n                    showAllPlates={this.showAllPlates}\r\n                    setShowPendencias={this.setShowPendencias}\r\n                    removeFile={this.removeFile}\r\n                />\r\n                {openAddDialog && <ConfigAddDialog\r\n                    open={openAddDialog}\r\n                    close={this.toggleDialog}\r\n                    title='Alterar número da apólice'\r\n                    helperMessage='Informe o número atualizado da apólice.'\r\n                    handleInput={this.handleInput}\r\n                    addNewElement={this.addNewElement}\r\n                />}\r\n                {\r\n                    showAllPlates &&\r\n                    <ShowAllPlates\r\n                        items={allPlates}\r\n                        close={this.showAllPlates}\r\n                        title='Selecione as placas para adicionar à apólice.'\r\n                        handleCheck={this.handleCheck}\r\n                        data={allPlatesObj}\r\n                        selectAll={selectAll}\r\n                        selectAllPlates={this.selectAllPlates}\r\n                    />\r\n                }\r\n\r\n                {\r\n                    openAlertDialog &&\r\n                    <AlertDialog open={openAlertDialog} close={this.closeAlert} alertType={alertType} customTitle={customTitle} customMessage={customMsg} />\r\n                }\r\n                <ReactToast open={this.state.confirmToast} close={this.toast} msg={this.state.toastMsg} />\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst collections = ['veiculos', 'empresas', 'seguradoras', 'seguros', 'getFiles/empresaDocs']\r\n\r\nexport default StoreHOC(collections, Seguro)","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { Fragment } from 'react';\r\n\r\nexport default function ConfirmDialog({ open, type, close, confirm, element, id, index, customTitle = '', customMessage = '' }) {\r\n\r\n    let title, message\r\n    if (type === 'delete') {\r\n        title = 'Confirmar exclusão'\r\n        message = 'Tem certeza que deseja excluir esse registro?'\r\n        if (element) message = message.replace('?', ': ')\r\n    }\r\n\r\n    if (title && message) return (\r\n        <div>\r\n            <Dialog\r\n                open={open}\r\n                onClose={close}\r\n                aria-labelledby=\"alert-dialog-title\"\r\n                aria-describedby=\"alert-dialog-description\"\r\n            >\r\n                <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText id=\"alert-dialog-description\">\r\n                        {element ?\r\n                            <Fragment>\r\n                                {message}<strong>  {element}    </strong>?\r\n                            </Fragment>\r\n                            : message}\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={close} autoFocus> Cancelar </Button>\r\n                    <Button onClick={() => confirm(id || index)} color=\"primary\"> Confirmar </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n    else return null\r\n}","export const laudoForm = [\r\n    {\r\n        field: 'id',\r\n        label: 'Número do laudo',              \r\n        maxLength: 30\r\n    },\r\n    {\r\n        field: 'validade',\r\n        label: 'Data de validade',\r\n        type: 'date'\r\n    },\r\n    {\r\n        field: 'empresaLaudo',\r\n        label: 'Empresa emissora',        \r\n        select: true\r\n    },    \r\n]","import React from 'react'\r\n\r\nconst Placa = props => {\r\n    const { veiculoId, city, placa, onClick, style } = props\r\n\r\n    return (\r\n        <div id={veiculoId} onClick={onClick} style={style} className='placaContainer'>\r\n            <div className=\"placaCity\">{city}</div>\r\n            <div className=\"placaCode\">{placa}</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Placa","import React from 'react'\r\nimport moment from 'moment'\r\nimport downloadFile from '../Utils/downloadFile'\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nexport default function StandardTable({ table, docsCollection, length, title, style, idIndex = 0, filePK, deleteIconProperties = {}, deleteFunction }) {\r\n    const { tableHeaders, arrayOfRows, docs } = table\r\n\r\n    const dateFormat = value => {\r\n        if (moment(value, 'YYYY-MM-DDTHH:mm:ss.SSSZZ', true).isValid())\r\n            return moment(value, moment.ISO_8601, true).format('DD/MM/YYYY')\r\n        else\r\n            return value\r\n    }\r\n\r\n    const getFile = id => {\r\n        const file = docs.find(f => f.id === id)\r\n        if (id && file)\r\n            downloadFile(file.id, file.filename, docsCollection, file.metadata.fieldName);\r\n    }\r\n\r\n    return (\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th className='tHeader'\r\n                        style={style}\r\n                        colSpan={length}>{title}</th>\r\n                </tr>\r\n                <tr>\r\n                    {tableHeaders.map((l, i) => <th key={i} style={style}>{l}</th>)}\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {\r\n                    arrayOfRows.map((el, j) =>\r\n                        <tr key={j}>\r\n                            {\r\n                                el.map((obj, i) =>\r\n                                    <td key={i} style={style} className={obj.type === 'link' && obj.fileId ? 'link2' : 'review'}\r\n                                        onClick={\r\n                                            () => obj.field === filePK && obj.fileId ? getFile(obj.fileId)\r\n                                                : obj?.action === 'delete' ? deleteFunction(el[idIndex]?.value)\r\n                                                    : null}>\r\n                                        {\r\n                                            obj.type === 'date' ? dateFormat(obj.value)\r\n                                                : obj?.action === 'delete' && el[idIndex]?.value ? <DeleteIcon {...deleteIconProperties} />\r\n                                                    : obj.value\r\n                                        }\r\n                                    </td>\r\n                                )}\r\n                        </tr>\r\n                    )}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst StyledMenu = withStyles({\r\n    paper: {\r\n        border: '1px solid #d3d4d5',\r\n    },\r\n})((props) => (\r\n    <Menu\r\n        elevation={0}\r\n        getContentAnchorEl={null}\r\n        anchorOrigin={{\r\n            vertical: 'center',\r\n            horizontal: 'right',\r\n        }}\r\n        transformOrigin={{\r\n            vertical: 'top',\r\n            horizontal: 'left',\r\n        }}\r\n        {...props}\r\n    />\r\n));\r\n\r\nconst OnClickMenu = ({ anchorEl, handleClose, menuOptions }) => {\r\n\r\n\r\n    return (\r\n        <>\r\n            <StyledMenu\r\n                id=\"simple-menu\"\r\n                anchorEl={anchorEl}\r\n                keepMounted\r\n                open={Boolean(anchorEl)}\r\n                onClose={handleClose}\r\n            >\r\n                {menuOptions.map(({ title, onClick }, i) => (\r\n                    <MenuItem key = {i} onClick={onClick}>{title}</MenuItem>\r\n                ))}               \r\n            </StyledMenu>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default OnClickMenu","import React from 'react'\r\nimport moment from 'moment'\r\n\r\nimport { laudoForm } from '../Forms/laudoForm'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport Placa from '../Reusable Components/Placa'\r\nimport TextInput from '../Reusable Components/TextInput'\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport CustomTable from '../Reusable Components/CustomTable'\r\nimport DragAndDrop from '../Reusable Components/DragAndDrop'\r\nimport OnClickMenu from '../Reusable Components/OnClickMenu'\r\nimport FormSubtiltle from '../Reusable Components/FormSubtiltle'\r\nimport ShowLocalFiles from '../Reusable Components/ShowLocalFiles'\r\nimport StepperButtons from '../Reusable Components/StepperButtons'\r\n\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Search from '@material-ui/icons/Search'\r\nimport StopIcon from '@material-ui/icons/Stop';\r\nimport Button from '@material-ui/core/Button'\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\n\r\nconst LaudosTemplate = (\r\n    { empresas, razaoSocial, selectedEmpresa, filteredVehicles, selectedVehicle, stateInputs, selectOptions, table,\r\n        anchorEl, laudoDoc, dropDisplay, functions, demand, demandFiles, showPendencias, info, fileToRemove }) => {\r\n\r\n    const\r\n        placa = selectedVehicle?.placa,\r\n        { handleInput, clickOnPlate, showDetails, handleFiles, handleSubmit, closeMenu, clear,\r\n            removeFile, deleteLaudo, setShowPendencias } = functions\r\n\r\n    const renderColor = laudos => {\r\n        if (laudos && laudos[0] && laudos[0].validade) {\r\n            const { validade } = laudos[0]\r\n\r\n            if (moment(validade, moment.ISO_8601).isValid() && moment(validade).isAfter(moment().toDate())) return { backgroundColor: 'rgb(13, 136, 13)' }\r\n            if (moment(validade, moment.ISO_8601).isValid() && moment(validade).isBefore(moment().toDate())) return { backgroundColor: 'rgb(197, 128, 0)' }\r\n        }\r\n        else return { backgroundColor: 'rgb(136, 13, 13)' }\r\n    }\r\n\r\n    const deleteIconProperties = {\r\n        color: 'secondary',\r\n        title: 'Apagar Laudo',\r\n        style: { cursor: 'pointer' }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Crumbs links={['Veículos', '/veiculos']} text='Laudos' demand={demand} selectedEmpresa={selectedEmpresa} />\r\n            <div style={demand ? { marginTop: '15px' } : {}}>\r\n                <SelectEmpresa\r\n                    empresas={empresas}\r\n                    data={{ razaoSocial, demand }}\r\n                    headerTitle={placa && selectedEmpresa && `Cadastro de laudo veicular ${placa} - ${selectedEmpresa?.razaoSocial}`}\r\n                    handleInput={handleInput}\r\n                />\r\n            </div>\r\n            {\r\n                selectedEmpresa && !Array.isArray(selectedEmpresa) && <>\r\n                    {!demand &&\r\n                        <header className='flex' style={{ marginBottom: '15px', justifyContent: 'space-between' }}>\r\n                            {\r\n                                !selectedVehicle ?\r\n                                    <FormSubtiltle\r\n                                        subtitle='Selecione o veículo para atualizar consultar ou inserir o laudo de segurança veicular.'\r\n                                        style={{ marginTop: '25px' }}\r\n                                    />\r\n                                    :\r\n                                    <Placa\r\n                                        veiculoId={selectedVehicle.veiculoId}\r\n                                        onClick={clickOnPlate}\r\n                                        style={{ ...renderColor(selectedVehicle.laudos), marginLeft: 0 }}\r\n                                        city={selectedEmpresa.cidade}\r\n                                        placa={selectedVehicle.placa}\r\n                                    />\r\n                            }\r\n                            <div>\r\n                                <TextField\r\n                                    inputProps={{ name: 'placa' }}\r\n                                    InputLabelProps={{ style: { fontSize: '0.8rem' } }}\r\n                                    label='Filtrar'\r\n                                    onChange={handleInput}\r\n                                />\r\n                                <Search style={{ marginTop: '10px' }} />\r\n                            </div>\r\n                        </header>\r\n                    }\r\n                    {selectedVehicle && <>\r\n                        <main className='paper' style={demand ? { marginTop: '15px' } : {}}>\r\n                            <FormSubtiltle\r\n                                subtitle={\r\n                                    !demand ?\r\n                                        'Para inserir novo laudo, informe o número, a data de vencimento, a empresa que emitiu e anexe o documento referente ao laudo.'\r\n                                        :\r\n                                        'Verifique as informações abaixo, confira com o laudo anexo e escolha uma das opções abaixo.'\r\n                                }\r\n                            />\r\n\r\n                            <br />\r\n                            <br />\r\n                            <TextInput\r\n                                form={laudoForm}\r\n                                data={stateInputs}\r\n                                handleInput={handleInput}\r\n                                selectOptions={selectOptions}\r\n                            />\r\n                            {!demand ? <DragAndDrop\r\n                                name='laudoDoc'\r\n                                formData={laudoDoc}\r\n                                dropDisplay={dropDisplay}\r\n                                handleFiles={handleFiles}\r\n                                removeFile={removeFile}\r\n                                fileToRemove={fileToRemove}\r\n                                single={true}\r\n                                style={{ width: '400px', margin: '15px auto 0 auto' }}\r\n                            />\r\n                                : demandFiles &&\r\n                                <ShowLocalFiles\r\n                                    demand={demand}\r\n                                    collection='vehicleDocs'\r\n                                    demandFiles={demandFiles}\r\n                                    form={[{ title: 'Laudo veicular', name: 'laudoDoc' }]}\r\n                                //files={files}\r\n                                />\r\n                            }\r\n                        </main>\r\n                        <section>\r\n                            {\r\n                                selectedEmpresa && !demand ?\r\n                                    <Button\r\n                                        size=\"small\"\r\n                                        color='primary'\r\n                                        className='saveButton'\r\n                                        variant=\"contained\"\r\n                                        onClick={() => handleSubmit()}\r\n                                    //   disabled={!laudoDoc ? true : false}\r\n                                    >\r\n                                        Cadastrar Laudo\r\n                                    </Button>\r\n                                    : selectedEmpresa && demand ?\r\n                                        <StepperButtons\r\n                                            uniqueStep={true}\r\n                                            declineButtonLabel='Indeferir'\r\n                                            demand={demand}\r\n                                            setShowPendencias={() => setShowPendencias(!showPendencias)}\r\n                                            showPendencias={showPendencias}\r\n                                            info={info}\r\n                                            handleSubmit={handleSubmit}\r\n                                            handleInput={handleInput}\r\n                                        />\r\n                                        : null\r\n                            }\r\n                        </section>\r\n                    </>\r\n                    }\r\n\r\n                    <section>\r\n                        <h4>\r\n                            {!selectedVehicle ?\r\n                                <div className='flex' style={{ justifyContent: 'space-between' }}>\r\n                                    <div>\r\n                                        {`Exibindo ${filteredVehicles.length} veículos com mais de 15 anos.`}\r\n                                    </div>\r\n                                    <div className='flex placasCaption' style={{ fontSize: '0.8rem' }}>\r\n                                        <span>\r\n                                            <span style={{ paddingTop: '5px', color: 'rgb(13, 136, 13)' }}><StopIcon /></span> Laudo vigente\r\n                                        </span>\r\n                                        <span>\r\n                                            <span style={{ paddingTop: '5px', color: 'rgb(197, 128, 0)' }}><StopIcon /></span> Laudo vencido                                            </span>\r\n                                        <span>\r\n                                            <span style={{ paddingTop: '5px', color: 'rgb(136, 13, 13)' }}><StopIcon /></span> Nenhum Laudo cadastrado\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                                :\r\n                                null\r\n                            }\r\n                        </h4>\r\n                    </section>\r\n\r\n                    {/* *********************** RENDERIZAÇÃO DAS PLACAS ********************************* */}\r\n                    {!selectedVehicle &&\r\n                        <section className='center flex paper'>\r\n                            {filteredVehicles.map((v, i) => (\r\n                                <Placa\r\n                                    key={i}\r\n                                    veiculoId={v.veiculoId}\r\n                                    onClick={clickOnPlate}\r\n                                    style={renderColor(v.laudos)}\r\n                                    city={selectedEmpresa.cidade}\r\n                                    placa={v.placa}\r\n                                />\r\n\r\n                            ))}\r\n                        </section>\r\n                    }\r\n\r\n                    <OnClickMenu\r\n                        anchorEl={anchorEl}\r\n                        handleClose={closeMenu}\r\n                        menuOptions={[{\r\n                            title: 'Detalhes',\r\n                            onClick: showDetails\r\n                        }\r\n                        ]}\r\n                    />\r\n                </>\r\n            }\r\n            {\r\n                selectedVehicle && selectedVehicle.laudos && !demand &&\r\n                <>\r\n                    {typeof table === 'object' ?\r\n                        <div className=\"paper\" style={{ marginTop: '52px', width: '100%', padding: '0', borderRadius: '5px', overflow: 'hidden' }}>\r\n                            <CustomTable\r\n                                length={table.tableHeaders.length}\r\n                                title={`Laudos vinculados ao veículo placa ${selectedVehicle.placa}`}\r\n                                table={table}\r\n                                style={{ textAlign: 'center', padding: '8px 0' }}\r\n                                deleteIconProperties={deleteIconProperties}\r\n                                deleteFunction={deleteLaudo}\r\n                                idIndex={1}\r\n                                filePK='laudoDoc'\r\n                                docsCollection='vehicleDocs'\r\n                            />\r\n                        </div>\r\n                        :\r\n                        <>\r\n                            <br />\r\n                            <br />\r\n                            <p>{table}</p>\r\n                        </>\r\n                    }\r\n                    <div className='voltarDiv' onClick={clear}>\r\n                        <ArrowBackIcon size='small' />\r\n                        <span style={{ padding: '2px 0 0 2px', marginLeft: '2px', fontSize: '1rem' }}>Voltar</span>\r\n                    </div>\r\n                </>\r\n            }\r\n        </React.Fragment >\r\n    )\r\n}\r\n\r\nexport default React.memo(LaudosTemplate)","import cpfValidator from '../Utils/cpfValidator'\r\nimport { cnpjValidator } from '../Utils/cnpjValidator'\r\n\r\nimport { clearFormat } from '../Utils/formatValues'\r\n\r\nexport const\r\n    razaoSocial = {\r\n        field: 'razaoSocial',\r\n        label: 'Empresa',\r\n        width: '340px'\r\n    },\r\n    placas = {\r\n        field: 'placas',\r\n        label: 'Veículos cadastrados',\r\n        width: '340px'\r\n    },\r\n    createdAt = {\r\n        field: 'createdAt',\r\n        label: 'Data do registro no sistema',\r\n        type: 'date',\r\n        width: '190px'\r\n    },\r\n    cnpj = {\r\n        field: 'cnpj',\r\n        label: 'CNPJ',\r\n        maxLength: 18,\r\n        pattern: /^\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}$/,\r\n        errorHandler: (cnpjString) => cnpjValidator(cnpjString)\r\n    },\r\n    cpf = {\r\n        field: 'cpfSocio',\r\n        label: 'CPF',\r\n        maxLength: 14,\r\n        width: 190,\r\n        errorHandler: (cpfString) => cpfValidator(clearFormat(cpfString))\r\n    },\r\n    phone = {\r\n        label: 'Telefone',\r\n    //    minLength: 14,\r\n        maxLength: 15,\r\n        pattern: '((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))'\r\n\r\n    },\r\n    email = {\r\n        label: 'E-mail',\r\n        type: 'email',\r\n        maxLength: 60,\r\n        pattern: '[a-zA-Z0-9]@[a-zA-Z0-9]{1,20}?[.]([a-zA-Z0-9])',\r\n    }","export function cnpjValidator(cnpj) {\r\n\r\n    cnpj = cnpj.replace(/[^\\d]+/g, '');\r\n\r\n    if (cnpj === '') return false;\r\n\r\n    if (cnpj.length !== 14)\r\n        return false;\r\n\r\n    // LINHA 10 - Elimina CNPJs invalidos conhecidos\r\n    if (cnpj === \"00000000000000\" ||\r\n        cnpj === \"11111111111111\" ||\r\n        cnpj === \"22222222222222\" ||\r\n        cnpj === \"33333333333333\" ||\r\n        cnpj === \"44444444444444\" ||\r\n        cnpj === \"55555555555555\" ||\r\n        cnpj === \"66666666666666\" ||\r\n        cnpj === \"77777777777777\" ||\r\n        cnpj === \"88888888888888\" ||\r\n        cnpj === \"99999999999999\")\r\n        return false; // LINHA 21\r\n\r\n    // Valida DVs LINHA 23 -\r\n    let tamanho = cnpj.length - 2,\r\n        numeros = cnpj.substring(0, tamanho),\r\n        digitos = cnpj.substring(tamanho),\r\n        soma = 0,\r\n        pos = tamanho - 7,\r\n        resultado\r\n    for (let i = tamanho; i >= 1; i--) {\r\n        soma += numeros.charAt(tamanho - i) * pos--;\r\n        if (pos < 2)\r\n            pos = 9;\r\n    }\r\n    resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;    \r\n    if (resultado.toString() !== digitos.charAt(0))\r\n        return false;\r\n\r\n    tamanho = tamanho + 1;\r\n    numeros = cnpj.substring(0, tamanho);\r\n    soma = 0;\r\n    pos = tamanho - 7;\r\n    for (let i = tamanho; i >= 1; i--) {\r\n        soma += numeros.charAt(tamanho - i) * pos--;\r\n        if (pos < 2)\r\n            pos = 9;\r\n    }\r\n    resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\r\n    if (resultado.toString() !== digitos.charAt(1))\r\n        return false; // LINHA 49\r\n\r\n    return true; // LINHA 51\r\n\r\n}\r\n\r\n/* export function cnpjValidator(c) {\r\n\r\n    var b = [6, 5, 4, 3, 2, 9, 8, 7, 6, 5, 4, 3, 2];\r\n\r\n    if ((c = c.replace(/[^\\d]/g, \"\")).length != 14)\r\n        return false;\r\n\r\n    if (/0{14}/.test(c))\r\n        return false;\r\n\r\n    for (var j = 0; j < 2; ++j) {\r\n        for (var i = 0, n = 0; i < 12 + j; n += c[i] * b[++i - j]);\r\n        if (c[12 + j] != ((n %= 11) < 2) ? 0 : 11 - n)\r\n            return false;\r\n    }\r\n\r\n    return true;\r\n\r\n}\r\n\r\n\r\n\r\n */\r\n/* export function cnpjValidator(cnpj) {\r\n\r\n    cnpj = cnpj.replace(/[^\\d]+/g, '');\r\n\r\n    if (cnpj === '') return false;\r\n\r\n    if (cnpj.length !== 14)\r\n        return false;\r\n\r\n    // Elimina CNPJs invalidos conhecidos\r\n    if (cnpj === \"00000000000000\" ||\r\n        cnpj === \"11111111111111\" ||\r\n        cnpj === \"22222222222222\" ||\r\n        cnpj === \"33333333333333\" ||\r\n        cnpj === \"44444444444444\" ||\r\n        cnpj === \"55555555555555\" ||\r\n        cnpj === \"66666666666666\" ||\r\n        cnpj === \"77777777777777\" ||\r\n        cnpj === \"88888888888888\" ||\r\n        cnpj === \"99999999999999\")\r\n        return false;\r\n\r\n    // Valida DVs\r\n    let\r\n        tamanho = cnpj.length - 2,\r\n        numeros = cnpj.substring(0, tamanho),\r\n        digitos = cnpj.substring(tamanho),\r\n        soma = 0,\r\n        pos = tamanho - 7,\r\n        resultado\r\n\r\n    for (let i = tamanho; i >= 1; i--) {\r\n        soma += numeros.charAt(tamanho - i) * pos--;\r\n        if (pos < 2)\r\n            pos = 9;\r\n    }\r\n    resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\r\n    if (resultado !== digitos.charAt(0))\r\n        return false;\r\n\r\n    tamanho = tamanho + 1;\r\n    numeros = cnpj.substring(0, tamanho);\r\n    soma = 0;\r\n    pos = tamanho - 7;\r\n    for (let i = tamanho; i >= 1; i--) {\r\n        soma += numeros.charAt(tamanho - i) * pos--;\r\n        if (pos < 2)\r\n            pos = 9;\r\n    }\r\n    resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\r\n    if (resultado !== digitos.charAt(1))\r\n        return false;\r\n\r\n    return true;\r\n} */","export default function cpfValidator(strCPF) {\r\n    if (!strCPF) return\r\n    let Soma;\r\n    let Resto;\r\n    Soma = 0;\r\n    if (strCPF === \"00000000000\") return false;\r\n\r\n    for (let i = 1; i <= 9; i++) Soma = Soma + parseInt(strCPF.substring(i - 1, i)) * (11 - i);\r\n    Resto = (Soma * 10) % 11;\r\n\r\n    if ((Resto === 10) || (Resto === 11)) Resto = 0;\r\n    if (Resto !== parseInt(strCPF.substring(9, 10))) return false;\r\n\r\n    Soma = 0;\r\n    for (let i = 1; i <= 10; i++) Soma = Soma + parseInt(strCPF.substring(i - 1, i)) * (12 - i);\r\n    Resto = (Soma * 10) % 11;\r\n\r\n    if ((Resto === 10) || (Resto === 11)) Resto = 0;\r\n    if (Resto !== parseInt(strCPF.substring(10, 11))) return false;    \r\n    return true;\r\n}\r\n","import { razaoSocial, placas, createdAt } from '../Forms/commonFields'\r\n\r\nexport const eForm = [\r\n    {\r\n        field: 'razaoSocial',\r\n        width: '540px'\r\n    },\r\n    {\r\n        field: 'rua',\r\n        width: '540px'\r\n    },\r\n    {\r\n        field: 'situacao',\r\n        label: 'Situação'\r\n    },   \r\n    {\r\n        ...createdAt,\r\n        width: '150px',\r\n    },\r\n    {\r\n        field: 'frota',\r\n        label: 'Tamanho da Frota'\r\n    },\r\n    {\r\n        field: 'oldId',\r\n        label: 'Código no sistema antigo'\r\n    },\r\n    /*     {\r\n            ...placas\r\n        }, */\r\n\r\n]\r\n\r\nexport const sForm = [\r\n    {\r\n        ...razaoSocial\r\n    },\r\n    {\r\n        ...createdAt\r\n    },\r\n]\r\n\r\nexport const segForm = [\r\n    {\r\n        ...razaoSocial\r\n    },\r\n    {\r\n        ...createdAt\r\n    },\r\n    {\r\n        ...placas\r\n    },\r\n    {\r\n        field: 'segurados',\r\n        label: 'Número de veículos segurados',\r\n    },\r\n]\r\n\r\nexport const vForm = [\r\n    {\r\n        field: 'dataRegistro',\r\n        label: 'Data do registro no sistema',\r\n        type: 'date',\r\n    },\r\n    {\r\n        field: 'pbt',\r\n        label: 'Peso Bruto Total'\r\n    },\r\n    {\r\n        field: 'situacao',\r\n        label: 'Situação'\r\n    },\r\n    {\r\n        field: 'indicadorIdade',\r\n        label: 'Indicador de idade'\r\n    },\r\n    {\r\n        field: 'equipamentosId',\r\n        label: 'Equipamentos'\r\n    },\r\n    {\r\n        field: 'compartilhado',\r\n        label: 'Compartilhado por'\r\n    },\r\n    {\r\n        field: 'marcaChassi',\r\n        label: 'Marca do Chassi',\r\n    },\r\n    {\r\n        field: 'marcaCarroceria',\r\n        label: 'Marca da Carroceria',\r\n    },\r\n]","import { vistoriaForm } from './vistoriaForm'\r\nimport { seguroForm } from './seguroForm'\r\n\r\nexport const cadForm = [[{\r\n    field: 'placa',\r\n    label: 'Placa',\r\n    margin: 'normal',\r\n    maxLength: 8,\r\n    pattern: '[a-zA-Z]{3}[-]?[ ]?\\\\d{4}|[A-Z]{3}[-]?[ ]?[0-9]{1}[A-Z]{1}[0-9]{2}'\r\n},\r\n{\r\n    field: 'renavam',\r\n    label: 'Renavam',\r\n    margin: 'normal',\r\n    maxLength: 11,\r\n    pattern: /^(\\d{9}|\\d{11})$/\r\n},\r\n{\r\n    field: 'utilizacao',\r\n    label: 'Utilização',\r\n    margin: 'normal',\r\n    select: true,\r\n    options: ['Convencional', 'Executivo', 'Leito', 'Semi-Leito', 'Urbano']\r\n},\r\n{\r\n    field: 'nChassi',\r\n    label: 'Número do Chassi',\r\n    margin: 'normal',\r\n    maxLength: 17\r\n},\r\n{\r\n    field: 'modeloChassi',\r\n    label: 'Modelo do Chassi',\r\n    margin: 'normal',\r\n    datalist: 'modeloChassi',\r\n    autoComplete: true,\r\n    collection: 'modelosChassi'\r\n},\r\n{\r\n    field: 'anoChassi',\r\n    label: 'Ano do Chassi',\r\n    margin: 'normal',\r\n    type: 'number',\r\n    max: Number(new Date().getFullYear()),\r\n    min: Number(new Date().getFullYear()) - 10\r\n},\r\n{\r\n    field: 'valorChassi',\r\n    label: 'Valor do Chassi (R$)',\r\n    margin: 'normal',\r\n    zero: true,\r\n    pattern: '^.{9,12}$',\r\n    minLength: 8,\r\n    maxLength: 11\r\n},\r\n{\r\n    field: 'modeloCarroceria',\r\n    label: 'Modelo da Carroceria',\r\n    margin: 'normal',\r\n    datalist: 'modelo',\r\n    autoComplete: true,\r\n    collection: 'carrocerias'\r\n},\r\n{\r\n    type: 'number',\r\n    field: 'anoCarroceria',\r\n    label: 'Ano da Carroceria',\r\n    margin: 'normal',\r\n    max: Number(new Date().getFullYear() + 1),\r\n    min: Number(new Date().getFullYear()) - 10\r\n},\r\n{\r\n    field: 'valorCarroceria',\r\n    label: 'Valor da Carroceria (R$)',\r\n    margin: 'normal',\r\n    zero: true,\r\n    pattern: '^.{9,12}$',\r\n    minLength: 8,\r\n    maxLength: 11\r\n},\r\n{\r\n    field: 'dominio',\r\n    label: 'Situação da Propriedade',\r\n    margin: 'normal',\r\n    select: true,\r\n    options: ['Veículo próprio', 'Leasing', 'Possuidor']\r\n},\r\n{\r\n    field: 'cores',\r\n    label: 'Cores',\r\n    margin: 'normal',\r\n    maxLength: 50\r\n}\r\n]]\r\n    .concat([seguroForm])\r\n    .concat([vistoriaForm])    ","import { cnpj, phone, email } from './commonFields'\r\n\r\nexport const empresasForm = [\r\n    {\r\n        field: 'razaoSocial',\r\n        label: 'Razão Social'        \r\n    },\r\n    {\r\n        ...cnpj,\r\n        maxLength: 18,\r\n        pattern: /^\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}$/\r\n    },\r\n    {\r\n        field: 'inscricaoEstadual',\r\n        label: 'Inscrição Estadual',\r\n        maxLength: 13,\r\n        pattern: '\\\\d{13}'\r\n    },\r\n    {\r\n        ...phone,\r\n        field: 'telefone',\r\n        label: 'Telefone',        \r\n    },\r\n    {\r\n        ...email,\r\n        field: 'email',\r\n        label: 'E-mail'        \r\n    },\r\n    {\r\n        field: 'cep',\r\n        label: 'CEP',\r\n        maxLength: 10\r\n    },\r\n    {\r\n        field: 'numero',\r\n        label: 'Número',\r\n        type: 'number',\r\n        max: 32000\r\n    },\r\n    {\r\n        field: 'complemento',\r\n        label: 'Complemento',\r\n        maxLength: 20,\r\n    },\r\n    {\r\n        field: 'rua',\r\n        label: 'Rua',\r\n        maxLength: 100,\r\n    },\r\n    {\r\n        field: 'bairro',\r\n        label: 'Bairro',\r\n        maxLength: 40,\r\n    },\r\n    {\r\n        field: 'cidade',\r\n        label: 'Cidade',\r\n        maxLength: 60,\r\n    },\r\n    {\r\n        field: 'uf',\r\n        label: 'Estado',\r\n        maxLength: 2,\r\n        pattern: '[A-Z]{2}'\r\n    },\r\n    {\r\n        field: 'vencimentoContrato',\r\n        label: 'Vencimento do Contrato',\r\n        type: 'date',\r\n    }\r\n]","import { cpf, email, phone } from './commonFields'\r\n\r\nconst width = 195\r\n\r\nexport const sociosForm = [{\r\n    field: 'nomeSocio',\r\n    label: 'Nome do Sócio',\r\n    maxLength: 90,\r\n    width\r\n},\r\n{\r\n    ...cpf,\r\n    width\r\n},\r\n{\r\n    ...phone,\r\n    field: 'telSocio',\r\n    width\r\n},\r\n{\r\n    ...email,\r\n    field: 'emailSocio',\r\n    width\r\n},\r\n{\r\n    field: 'share',\r\n    label: 'Participação Societária (%)',\r\n    /* pattern: /(^100(,0{1,2})?$)|(^([1-9]([0-9])?|0)(,[0-9]{1,2})?$)/,\r\n    maxLength: 5, */\r\n    type: 'number',\r\n    max: 100,\r\n    width\r\n}]\r\n\r\n","import { cpf, email, phone } from './commonFields'\r\n\r\nexport const procuradorForm = [{\r\n    field: 'nomeProcurador',\r\n    label: 'Nome do Procurador',\r\n    maxLength: 90,\r\n    width: 240\r\n},\r\n{\r\n    ...cpf,\r\n    field: 'cpfProcurador',\r\n    width: 240\r\n},\r\n{\r\n    ...phone,\r\n    field: 'telProcurador',    \r\n    width: 240\r\n},\r\n{\r\n    ...email,\r\n    field: 'emailProcurador',\r\n    width: 240\r\n}]","import { eForm, sForm, segForm, vForm } from '../Forms/joinForms'\r\n\r\nimport { cadForm } from '../Forms/cadForm'\r\nimport { empresasForm } from '../Forms/empresasForm'\r\nimport { sociosForm } from '../Forms/sociosForm'\r\nimport { procuradorForm } from '../Forms/procuradorForm'\r\nimport { seguroForm } from '../Forms/seguroForm'\r\n\r\n//Essa função seleciona e formata todos os campos que aparecem no componente ShowDetails e na exportação do arquivo de excel no ConsultasContainer\r\nconst dataToReturn = (tab, data) => {\r\n    if (data) {\r\n        delete data.tableData\r\n        const\r\n            element = [],\r\n            formPattern = setForm(tab)\r\n\r\n        Object.keys(data).forEach(key => {\r\n            if (tab === 3) {\r\n                const { veiculoId, laudoId, tableData, modeloChassiId, modeloCarroceriaId, codigoEmpresa, vencimentoContrato, delegatarioCompartilhado,\r\n                    acessibilidadeId, equipamentosId, ...vData } = data\r\n                data = vData\r\n            }\r\n\r\n            formPattern.forEach(({ field, label, type, width, fullWidth }) => {\r\n                if (key === field) {\r\n                    let obj = {}\r\n                    Object.assign(obj, { field, label, value: data[key] })\r\n                    if (type) Object.assign(obj, { type })\r\n                    if (width) Object.assign(obj, { width })\r\n                    element.push(obj)\r\n                    obj = {}\r\n                }\r\n            })\r\n        })\r\n\r\n        Object.keys(data).forEach(key => {\r\n\r\n            const equal = element.find(el => el.field === key)\r\n\r\n            if (!equal && tab === 3)\r\n                element.push({ field: key, label: key, value: data[key] })\r\n        })\r\n        return element\r\n    }\r\n}\r\n\r\nexport default dataToReturn\r\n\r\n//Essa função adiciona novos campos e sobrescreve configurações de design dos formulários utilizados em outras partes do sistema.\r\nfunction mergeForms(form, jForm) {\r\n    let\r\n        updatedForm = [],\r\n        updatedObj,\r\n        joinForm = [...jForm]\r\n\r\n    form.forEach(f => {\r\n        joinForm.forEach((jf, i) => {\r\n            if (f.field === jf.field) {\r\n                updatedObj = Object.assign({}, f, jf)\r\n                joinForm.splice(i, 1)\r\n                updatedForm.push(updatedObj)\r\n            }\r\n            else if (!updatedForm.find(el => el.field === f.field)) {\r\n                updatedForm.push(f)\r\n            }\r\n        })\r\n    })\r\n\r\n    updatedForm = updatedForm.concat(joinForm)\r\n\r\n    return updatedForm\r\n}\r\n//Junta os forms que aparecem apenas na tabela do ConsultaTemplate com outros campos do DB (próprios da tabela ou joins)\r\nexport function setForm(tab) {\r\n    let formPattern\r\n    switch (tab) {\r\n        case 0:\r\n            formPattern = mergeForms(empresasForm, eForm)\r\n            return formPattern\r\n        case 1:\r\n            formPattern = sociosForm.concat(sForm)\r\n            return formPattern\r\n        case 2:\r\n            formPattern = procuradorForm\r\n            return formPattern\r\n        case 3:\r\n            let consolidateForm = []\r\n            formPattern = cadForm.concat([vForm])\r\n            formPattern.forEach(form => {\r\n                consolidateForm = ([...consolidateForm, ...form])\r\n            })\r\n            return consolidateForm\r\n        case 4:\r\n            formPattern = seguroForm.concat(segForm)\r\n            return formPattern\r\n        default:\r\n            return formPattern\r\n    }\r\n}\r\n","export const procuradorEmpresaTable = [\r\n    {\r\n        field: 'nomeProcurador',\r\n        title: 'Nome',\r\n    },\r\n    {\r\n        field: 'cpfProcurador',\r\n        title: 'CPF',\r\n    },\r\n    {\r\n        field: 'emailProcurador',\r\n        title: 'E-mail'\r\n    },\r\n    {\r\n        field: 'telProcurador',\r\n        title: 'Telefone'\r\n    },\r\n    {\r\n        field: 'vencimento',\r\n        title: 'Validade da procuração',\r\n        type: 'date',\r\n        format: value => value ? value : 'Prazo indeterminado'\r\n    },\r\n    {\r\n        field: 'fileId',\r\n        title: 'Baixar Procuração',\r\n        type: 'link'\r\n    },\r\n]\r\n\r\n","const altContratoTable = [\r\n    {\r\n        field: 'numeroAlteracao',\r\n        label: 'Número da alteração',\r\n    },\r\n    {\r\n        field: 'numeroRegistro',\r\n        label: 'Registro na junta comercial',\r\n    },\r\n    {\r\n        field: 'numeroSei',\r\n        label: 'Número do registro SEI',\r\n    },\r\n    {\r\n        field: 'dataJunta',\r\n        label: 'Registro na Junta Comercial',\r\n        type: 'date',\r\n        format: value => value ? value : 'Nenhuma data informada'\r\n    },\r\n    {\r\n        field: 'fileId',\r\n        label: 'Baixar alteração contratual',\r\n        value: 'Clique para baixar o arquivo',\r\n        type: 'link'\r\n    },\r\n]\r\n\r\nexport default altContratoTable","import React, { useState, useEffect } from 'react'\r\nimport moment from 'moment'\r\nimport CustomTable from './CustomTable'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport ClosePopUpButton from '../Reusable Components/ClosePopUpButton'\r\nimport createFormPattern from '../Utils/createFormPattern'\r\nimport { procuradorEmpresaTable as procTable } from '../Forms/procuradorEmpresaTable'\r\nimport altContratoTable from '../Forms/altContratoTable'\r\n\r\nexport default function ShowDetails({ data, tab, title, header, close, empresas, procuracoes, procuradores, empresaDocs, altContrato }) {\r\n    //data é o objeto (row) do campo de dados de uma determinada tabela\r\n    const\r\n        //    [procs, setProcs] = useState(),\r\n        [table, setTable] = useState(),\r\n        [table2, setTable2] = useState(),\r\n        [tables, setTables] = useState([]),\r\n        element = createFormPattern(tab, data) || [], //Element é o form com a adição do campo value, inserindo data para cada objeto(field)\r\n        obs = element.find(el => el.field === 'obs')\r\n    //Informações adicionais no showDetails fora dos campos padrão\r\n\r\n    useEffect(() => {\r\n        const additionalInfo = (tab) => {\r\n            if (tab === 0) {\r\n                let selectedProcs = [], tableHeaders = [], arrayOfRows = [], row = [], rowObj\r\n\r\n                const\r\n                    razaoSocial = element.find(el => el.field === 'razaoSocial')?.value,\r\n                    codigoEmpresa = empresas.find(e => e.razaoSocial === razaoSocial)?.codigoEmpresa,\r\n                    selectedDocs = procuracoes.filter(p => p.codigoEmpresa === codigoEmpresa),\r\n                    selectedFiles = empresaDocs.filter(d => d.metadata?.fieldName === 'procuracao' && d.metadata?.empresaId === codigoEmpresa)\r\n\r\n                //Cria uma array de procuradores com base na array de procuradorId disponível na tabela Procuracao do Postgresql\r\n                procuradores.forEach(pr => {\r\n                    selectedDocs.forEach(doc => {\r\n                        if (doc.procuradores.some(p => p === pr.procuradorId)) {\r\n                            const\r\n                                tableRow = { ...pr, vencimento: doc.vencimento },\r\n                                file = empresaDocs.find(f => f.metadata.procuracaoId === doc.procuracaoId) // achar arquivo da procuração, se houver\r\n\r\n                            if (file)\r\n                                tableRow.fileId = file?.id\r\n                            selectedProcs.push(tableRow)\r\n                        }\r\n                    })\r\n                })\r\n\r\n                selectedProcs.forEach(proc => {\r\n                    procTable.forEach(fieldObj => {\r\n                        const { field } = fieldObj\r\n                        //insere o cabeçalho da tabela (apenas uma vez)\r\n                        if (!tableHeaders.some(t => t === fieldObj.title))\r\n                            tableHeaders.push(fieldObj.title)\r\n                        //insere as linhas (também apenas uma vez)\r\n                        if (proc.hasOwnProperty(field) && !row.some(o => o.hasOwnProperty(field))) {\r\n\r\n                            //se a coluna/field for um arquivo o valor que aparecerá na tabela é \"Clique para baixar...\"\r\n                            if (field === 'fileId' && proc.fileId)\r\n                                rowObj = { ...fieldObj, value: 'Clique para baixar a procuração', fileId: proc.fileId }\r\n                            //Senão, o valor é o valor da célula\r\n                            else\r\n                                rowObj = { ...fieldObj, value: proc[field] }\r\n\r\n                            //se a célula possuir um método de autoFormatação, aplicar\r\n                            if (fieldObj.format) {\r\n                                const value = fieldObj.format(proc[field])\r\n                                rowObj = { ...fieldObj, value }\r\n                            }\r\n                            row.push(rowObj)\r\n                        }\r\n                    })\r\n                    arrayOfRows.push(row)\r\n                    row = []\r\n                })\r\n\r\n                //Cria uma array de arquivos com base no id de cada procuração              \r\n                if (selectedProcs[0]) {\r\n                    //setProcs(selectedProcs)\r\n                    setTable({\r\n                        mainTitle: `Procuradores cadastrados para ${data?.razaoSocial}`,\r\n                        tableHeaders,\r\n                        arrayOfRows,\r\n                        docs: selectedFiles\r\n                    })\r\n                }\r\n                setAltContrato()\r\n            }\r\n        }\r\n        additionalInfo(tab)\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [tab])\r\n\r\n    const setAltContrato = async () => {\r\n        if (altContrato) {\r\n            const\r\n                alteracoes = altContrato.filter(a => a.codigoEmpresa === data.codigoEmpresa),\r\n                altDocs = empresaDocs.filter(doc => doc?.metadata?.fieldName === 'altContratoDoc' && doc?.metadata.empresaId === data.codigoEmpresa)\r\n\r\n            let tableHeaders = [], arrayOfRows = [], row = [], rowObj = {}\r\n\r\n            alteracoes.forEach(alt => {\r\n                altContratoTable.forEach(fieldObj => {\r\n                    const { field } = fieldObj\r\n                    if (!tableHeaders.includes(fieldObj.label))\r\n                        tableHeaders.push(fieldObj.label)\r\n                    if (field === 'fileId' || (alt.hasOwnProperty(field) && !row.some(o => o.hasOwnProperty(field)))) {\r\n                        //se a coluna/field for um arquivo o valor que aparecerá na tabela é \"Clique para baixar...\"\r\n                        if (field === 'fileId') {\r\n                            let fileId = altDocs.find(d => d.metadata.numeroRegistro === alt.numeroRegistro)\r\n                            fileId = fileId?.id\r\n                            if (fileId)\r\n                                rowObj = { ...fieldObj, value: fieldObj?.value, fileId }\r\n                        }\r\n                        //Senão, o valor é o valor da célula\r\n                        else\r\n                            rowObj = { ...fieldObj, value: alt[field] }\r\n                        //se a célula possuir um método de autoFormatação, aplicar\r\n                        if (fieldObj.format) {\r\n                            const value = fieldObj.format(alt[field])\r\n                            rowObj = { ...fieldObj, value }\r\n                        }\r\n                        row.push(rowObj)\r\n                    }\r\n                })\r\n                arrayOfRows.push(row)\r\n                row = []\r\n            })\r\n            if (alteracoes[0]) {\r\n                //setProcs(true)\r\n                setTable2({\r\n                    mainTitle: `Alterações do contrato social - ${data?.razaoSocial}`,\r\n                    tableHeaders,\r\n                    arrayOfRows,\r\n                    docs: altDocs\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const tableArray = []\r\n        if (table)\r\n            tableArray.push(table)\r\n        if (table2)\r\n            tableArray.unshift(table2)\r\n        if (tableArray[0])\r\n            setTables(tableArray)\r\n    }, [table, table2])\r\n\r\n    return (\r\n        <div className=\"popUpWindow\" style={{ left: '20%', right: '20%' }}>\r\n            <h4 className='equipaHeader'>{title} {data[header]}</h4> <hr />\r\n            <main className=\"checkListContainer\" style={{ justifyContent: 'flex-start' }}>\r\n                {\r\n                    element.map(({ field, label, value, type, width }, i) => field !== 'obs' &&\r\n                        <div className=\"showDetailsItem\" style={{ width: width ? width : 150, }} key={i}>\r\n                            <TextField\r\n                                name={field}\r\n                                label={label}\r\n                                value={type === 'date' ? moment(value).format('DD/MM/YYYY') : value || ''}\r\n                                InputLabelProps={{ shrink: true, style: { fontSize: '0.9rem', fontWeight: 500 } }}\r\n                                inputProps={{\r\n                                    style: {\r\n                                        fontSize: '0.7rem',\r\n                                        width: width ? width : 150,\r\n                                        fontColor: '#bbb',\r\n                                        textAlign: 'center'\r\n                                    }\r\n                                }}\r\n                                variant='outlined'\r\n                            />\r\n                        </div>\r\n                    )}\r\n            </main>\r\n            {tables[0] &&\r\n                tables.map((table, i) =>\r\n                    <section key={i}>\r\n                        <hr style={{ margin: '12px 0' }} />\r\n                        <CustomTable\r\n                            length={table.tableHeaders.length}\r\n                            title={table.mainTitle}\r\n                            table={table}\r\n                            style={{ textAlign: 'center', padding: '8px 0' }}\r\n                            idIndex={1}\r\n                            filePK='fileId'\r\n                            docsCollection='empresaDocs'\r\n                        />\r\n                    </section>\r\n                )\r\n            }\r\n            {\r\n                tab === 3 && obs?.value &&\r\n                <footer className='flexColumn'>\r\n                    <label htmlFor=\"obs\" className='obs__label'>Observações:</label>\r\n                    <textarea\r\n                        name=\"obs\"\r\n                        id=\"obs\"\r\n                        className='obs__textArea'\r\n                        defaultValue={obs?.value}\r\n                        cols=\"30\"\r\n                        rows=\"6\"\r\n                        disabled />\r\n                </footer>\r\n            }\r\n            <ClosePopUpButton close={close} />\r\n        </div>\r\n    )\r\n}","export const laudosTable = [\r\n    {\r\n        field: 'empresaLaudo',\r\n        title: 'Empresa Emissora',\r\n    },\r\n    {\r\n        field: 'id',\r\n        title: 'Número do Laudo',\r\n    },\r\n    {\r\n        field: 'createdAt',\r\n        title: 'Registro no sistema',\r\n        type: 'date'\r\n    },\r\n    {\r\n        field: 'validade',\r\n        title: 'Data de validade',\r\n        type: 'date'\r\n    },\r\n    \r\n    {\r\n        field: 'laudoDoc',\r\n        title: 'Laudo',\r\n        type: 'link'\r\n    },\r\n    {\r\n        field: 'delete',\r\n        title: 'Remover',        \r\n        action: 'delete',\r\n        deleteFile: true\r\n    }\r\n]\r\n\r\n\r\n","import React, { useState, useEffect, useCallback, Fragment } from 'react'\r\nimport axios from 'axios'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\nimport ConfirmDialog from '../Reusable Components/ConfirmDialog'\r\n\r\nimport { checkInputErrors } from '../Utils/checkInputErrors'\r\nimport LaudosTemplate from './LaudosTemplate'\r\nimport ShowDetails from '../Reusable Components/ShowDetails'\r\nimport { laudoForm } from '../Forms/laudoForm'\r\nimport { laudosTable } from '../Forms/laudosTable'\r\nimport { logGenerator } from '../Utils/logGenerator'\r\nimport { setDemand } from '../Utils/setDemand'\r\nimport { sizeExceedsLimit } from '../Utils/handleFiles'\r\nlet i = 1\r\nconst Laudos = props => {\r\n    const\r\n        { veiculos, empresas, empresasLaudo, laudos, vehicleDocs } = props.redux,\r\n        demand = props?.location?.state?.demand\r\n\r\n    const initState = Object.freeze({\r\n        dropDisplay: 'Clique ou arraste o arquivo para anexar o laudo',\r\n        stateInputs: {\r\n            id: undefined,\r\n            validade: '',\r\n            empresaLaudo: ''\r\n        }\r\n    })\r\n\r\n    const\r\n        [razaoSocial, empresaInput] = useState(''),\r\n        [selectedEmpresa, setEmpresa] = useState(),\r\n        [oldVehicles, setOldVehicles] = useState(),\r\n        [filteredVehicles, setFilteredVehicles] = useState([]),\r\n        [details, setDetails] = useState(false),\r\n        [selectedVehicle, selectVehicle] = useState(),\r\n        [anchorEl, setAnchorEl] = useState(null),\r\n        [dropDisplay, setDropDisplay] = useState(initState.dropDisplay),\r\n        [laudoDoc, setLaudoDoc] = useState(),\r\n        [stateInputs, changeInputs] = useState({ ...initState.stateInputs }),\r\n        [toast, setToast] = useState(false),\r\n        [toastMsg, setToastMsg] = useState('Laudo enviado com sucesso.'),\r\n        [table, setTableData] = useState(),\r\n        [demandFiles, setDemandFiles] = useState(),\r\n        [fileToRemove, setFileToRemove] = useState(),\r\n        [showPendencias, setShowPendencias] = useState(false),\r\n        [alertDialog, setAlertDialog] = useState({\r\n            open: false,\r\n            type: 'inputError',\r\n            msg: '',\r\n        }),\r\n        [confirmDialogProps, setConfirmDialog] = useState({\r\n            open: false,\r\n            type: 'delete',\r\n            element: undefined,\r\n        })\r\n\r\n    useEffect(() => {                               //Set esc key to close details window\r\n        const escFunction = e => { if (e.keyCode === 27) setDetails(false); setAnchorEl(null) }\r\n        document.addEventListener('keydown', escFunction)\r\n    }, [])\r\n\r\n\r\n    if (demand && i === 1) {\r\n        i++\r\n        const\r\n            { history } = demand,\r\n            state = {},\r\n            fullDemand = setDemand(demand, props.redux),\r\n            empresa = fullDemand.selectedEmpresa,\r\n            dFiles = fullDemand.demandFiles,\r\n            { originalVehicle } = fullDemand\r\n\r\n        Object.entries(history[0]).forEach(([k, v]) => {            // Set state with demandState\r\n            if (stateInputs.hasOwnProperty(k))\r\n                state[k] = v\r\n        })\r\n\r\n        setEmpresa(empresa)\r\n        empresaInput(empresa.razaoSocial)\r\n        changeInputs(state)\r\n        setDemandFiles(dFiles)\r\n        selectVehicle(originalVehicle)\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        async function insertLaudos() {\r\n            if (selectedEmpresa && selectedEmpresa !== '') {\r\n                // Estabelece quais são os veículos 15+anos (oldVehicles)\r\n                const\r\n                    currentYear = new Date().getFullYear(),\r\n                    frota = veiculos.filter(v => v.empresa === selectedEmpresa.razaoSocial),\r\n                    oldVehicles = frota.filter(v => currentYear - v.anoCarroceria > 14 && v.anoCarroceria !== null).sort((a, b) => a.placa.localeCompare(b.placa))\r\n\r\n                let vehiclesLaudo = [], laudosTemp = []\r\n                oldVehicles.forEach(v => {                  //Acrescenta os laudos atualizados para cada veículo 15+anos (oldVehicles)\r\n                    laudos.forEach(l => {\r\n                        if (v.veiculoId === l.veiculoId) {\r\n                            laudosTemp.push(l)\r\n                        }\r\n                    })\r\n                    laudosTemp.sort((a, b) => {\r\n                        const dateA = new Date(a.validade)\r\n                        const dateB = new Date(b.validade)\r\n                        return dateB - dateA\r\n                    })\r\n                    vehiclesLaudo.push({ ...v, laudos: laudosTemp })\r\n                    laudosTemp = []\r\n                })\r\n\r\n                await setOldVehicles(vehiclesLaudo)\r\n                await setFilteredVehicles(vehiclesLaudo)\r\n\r\n                if (selectedVehicle && vehiclesLaudo?.length > 0) {\r\n                    const updatedVehicle = vehiclesLaudo.find(v => v.veiculoId === selectedVehicle.veiculoId)\r\n                    if (updatedVehicle?.laudos?.length !== selectedVehicle?.laudos?.length) {\r\n                        await selectVehicle(updatedVehicle)\r\n                    } else return\r\n                }\r\n            } else {\r\n                setOldVehicles()\r\n                setFilteredVehicles([])\r\n                setEmpresa()\r\n            }\r\n        }\r\n\r\n        insertLaudos()\r\n    }, [selectedEmpresa, veiculos, laudos, selectedVehicle])\r\n\r\n    const handleInput = useCallback(e => {\r\n        const { name } = e.target\r\n        let { value } = e.target\r\n\r\n        if (name === 'razaoSocial') {\r\n            empresaInput(value)\r\n            const selectedEmpresa = empresas.find(e => e.razaoSocial === value)\r\n            setEmpresa(selectedEmpresa)\r\n            return\r\n        }\r\n        if (name === 'placa' && oldVehicles[0]) {\r\n            if (typeof value === 'string') value = value.toLocaleUpperCase()\r\n            if (!value || value === '') setFilteredVehicles(oldVehicles)\r\n            else {\r\n                let vehicle\r\n                const filtered = oldVehicles.filter(v => v.placa.match(value))\r\n                if (filtered.length === 1) vehicle = filtered[0]\r\n\r\n                setFilteredVehicles(filtered)\r\n                selectVehicle(vehicle)\r\n                return\r\n            }\r\n        }\r\n        changeInputs({\r\n            ...stateInputs, [name]: value\r\n        })\r\n\r\n    }, [empresaInput, empresas, oldVehicles, stateInputs])\r\n\r\n    const clickOnPlate = async event => {\r\n\r\n        if (selectedVehicle) {\r\n            event.persist()\r\n            setAnchorEl(event.target);\r\n        } else {\r\n            const { id } = event.currentTarget\r\n            let v\r\n            if (id) v = oldVehicles.find(v => v.veiculoId.toString() === id)\r\n            selectVehicle(v)\r\n            setFilteredVehicles([v])\r\n        }\r\n    }\r\n\r\n    //Cria os cabeçalhos, linhas e células da tabela que exibe os laudos\r\n    useEffect(() => {\r\n        if (selectedVehicle && !demand) {\r\n            if (selectedVehicle.laudos && selectedVehicle.laudos[0]) {\r\n\r\n                const\r\n                    vehicleLaudos = selectedVehicle?.laudos,\r\n                    laudoDocs = vehicleDocs.filter(d => d.metadata.fieldName === 'laudoDoc')\r\n\r\n                let laudosArray = [], tableHeaders = [], tempArray = [], table2 = [...laudosTable]\r\n\r\n                vehicleLaudos.forEach(l => {\r\n                    table2.forEach(t => {\r\n                        let fileId\r\n\r\n                        const laudoDoc = laudoDocs.find(d => d.metadata.laudoId === l.id || d.metadata.laudoId.toString() === l.id.toString())\r\n                        if (laudoDoc)\r\n                            fileId = laudoDoc.id\r\n\r\n                        if (!tableHeaders.includes(t.title))\r\n                            tableHeaders.push(t.title)\r\n\r\n                        const { title, ...tableData } = t\r\n\r\n                        if (t.field === 'laudoDoc')\r\n                            tempArray.push({ ...tableData, value: l[t.field], fileId })\r\n                        else\r\n                            tempArray.push({ ...tableData, value: l[t.field] })\r\n                    })\r\n\r\n                    if (tempArray[4].fileId) tempArray[4].value = 'Clique para visualizar o laudo'\r\n                    else tempArray[4].value = 'Nenhum arquivo encontrado'\r\n                    laudosArray.push(tempArray)\r\n                    tempArray = []\r\n                })\r\n\r\n                table2 = [...laudosTable]\r\n                setTableData({ tableHeaders, arrayOfRows: laudosArray, docs: laudoDocs })\r\n\r\n            } else setTableData(`Nenhum laudo cadastrado para o veículo placa ${selectedVehicle.placa}.`)\r\n        }\r\n    }, [selectedVehicle, laudos, vehicleDocs, demand])\r\n\r\n    useEffect(() => {\r\n        i = 1\r\n        void 0\r\n    }, [])\r\n    const clear = () => {\r\n        document.querySelector('[name = \"placa\"]').value = ''\r\n        setFilteredVehicles(oldVehicles)\r\n        selectVehicle()\r\n    }\r\n\r\n    const showDetails = () => {\r\n\r\n        if (selectedVehicle) {\r\n            setDetails(!details)\r\n            setAnchorEl(null)\r\n        } else {\r\n            setDetails(false)\r\n            selectVehicle(undefined)\r\n            setAnchorEl(null)\r\n        }\r\n    }\r\n\r\n    const handleSubmit = async approved => {\r\n\r\n        const\r\n            empresaId = selectedEmpresa?.codigoEmpresa,\r\n            veiculoId = selectedVehicle?.veiculoId\r\n        let\r\n            { empresaLaudo, ...requestElement } = stateInputs,\r\n            errors = checkInputErrors() || []\r\n\r\n        //***************************Check for errors*********************/\r\n\r\n        const laudoAlreadyExists = laudos.find(l => l.id === stateInputs.id)\r\n        if (laudoAlreadyExists) {\r\n            setAlertDialog({\r\n                ...alertDialog,\r\n                open: true,\r\n                msg: 'O laudo informado já existe no sistema. Laudo nº ' + laudoAlreadyExists.id.toString()\r\n            })\r\n            clearForm()\r\n            return\r\n        }\r\n        Object.keys(stateInputs).forEach(k => {\r\n            if (k !== 'validade' && (!stateInputs[k] || stateInputs[k] === '')) {\r\n                let errorLabel = laudoForm.find(obj => obj.field === k)?.label\r\n                errors.push(errorLabel)\r\n            }\r\n        })\r\n        if (errors[0]) {\r\n            setAlertDialog({\r\n                ...alertDialog,\r\n                open: true,\r\n                msg: 'Favor verificar o preenchimento dos seguintes campos: ' + errors.toString()\r\n            })\r\n            clearForm()\r\n            return\r\n        }\r\n\r\n        //***************************Prepare the Log *********************/\r\n        if (approved === undefined) {\r\n\r\n            const history = {\r\n                ...stateInputs\r\n            },\r\n                log = {\r\n                    empresaId,\r\n                    veiculoId,\r\n                    history,\r\n                    historyLength: 0,\r\n                    metadata: {\r\n                        fieldName: 'laudoDoc',\r\n                        veiculoId\r\n                    },\r\n                }\r\n\r\n            if (laudoDoc)\r\n                log.history.files = laudoDoc\r\n\r\n            logGenerator(log)\r\n                .then(r => console.log(r?.data))\r\n            clearForm('all fields, reset state please!')\r\n            removeFile('laudoDoc')\r\n            toggleToast()\r\n            //console.log(initState.dropDisplay, laudoDoc)\r\n            return\r\n        }\r\n\r\n        if (approved === false) {\r\n            const log = {\r\n                id: demand.id,\r\n                empresaId,\r\n                history: {\r\n                    info: stateInputs?.info\r\n                },\r\n                declined: true\r\n            }\r\n            logGenerator(log)\r\n                .then(r => console.log(r))\r\n            setToastMsg('Solicitação indeferida!')\r\n            toggleToast()\r\n\r\n            setTimeout(() => {\r\n                props.history.push('/solicitacoes')\r\n            }, 1500);\r\n        }\r\n\r\n        if (approved === true) {\r\n            //Prepare the request Object\r\n            const empresa = empresasLaudo.find(e => e.empresa === empresaLaudo)\r\n            let laudoId\r\n            if (empresa) requestElement.empresa_id = empresa.id\r\n            requestElement.veiculo_id = selectedVehicle.veiculoId\r\n\r\n            const requestBody = { table: 'laudos', requestElement }\r\n\r\n            //Submit\r\n            await axios.post('/api/addElement', requestBody)\r\n                .then(r => {\r\n                    laudoId = r?.data[0]?.id\r\n                    console.log(r.data)\r\n                })\r\n                .catch(err => console.log(err))\r\n\r\n            //Record the log\r\n            const log = {\r\n                id: demand.id,\r\n                veiculoId,\r\n                demandFiles,\r\n                history: {},\r\n                metadata: {\r\n                    laudoId,\r\n                    tempFile: 'false'\r\n                },\r\n                approved\r\n            }\r\n\r\n            logGenerator(log)\r\n                .then(r => console.log(r.data))\r\n\r\n            //Toast cofirmation, clear State and redirect to Solicitacoes\r\n            setTimeout(() => { props.history.push('/solicitacoes') }, 1500);\r\n            setToastMsg('Laudo aprovado!')\r\n            toggleToast()\r\n            clearForm('Clear all Of It!!!')\r\n        }\r\n    }\r\n\r\n    function confirmDelete(laudoId) {\r\n        setConfirmDialog({\r\n            ...confirmDialogProps, open: true,\r\n            element: `laudo nº ${laudoId}`,\r\n            laudoId\r\n        })\r\n    }\r\n\r\n    function deleteLaudo(laudoId) {\r\n\r\n        const { veiculoId } = selectedVehicle\r\n\r\n        if (laudoId) {\r\n            closeConfirmDialog()\r\n\r\n            axios.delete(`/api/delete?table=laudos&tablePK=id&id=${laudoId}&veiculoId=${veiculoId}`)\r\n                .then(({ data }) => console.log(data))\r\n\r\n            const laudoDoc = vehicleDocs.find(d => d.metadata.fieldName === 'laudoDoc' && d.metadata.laudoId === laudoId.toString())\r\n            if (laudoDoc) axios.delete(`/api/deleteFile?collection=vehicleDocs&id=${laudoDoc?.id}`)\r\n                .then(({ data }) => console.log(data))\r\n        }\r\n    }\r\n\r\n    const handleFiles = (files, name) => {\r\n        //limit file Size\r\n        if (sizeExceedsLimit(files)) return\r\n\r\n        if (files && files[0]) {\r\n            let formData = new FormData()\r\n            formData.append('fieldName', 'laudoDoc')\r\n            formData.append('laudoId', stateInputs.id)\r\n            formData.append('veiculoId', selectedVehicle.veiculoId)\r\n            formData.append(name, files[0])\r\n            setLaudoDoc(formData)\r\n            setFileToRemove(undefined)\r\n            //  setDropDisplay(files[0].name)\r\n        }\r\n    }\r\n\r\n    const removeFile = async name => {\r\n        setFileToRemove(name)\r\n        setLaudoDoc(undefined)\r\n    }\r\n\r\n    const\r\n        closeMenu = () => setAnchorEl(null),\r\n        toggleAlert = () => setAlertDialog({ ...alertDialog, open: !alertDialog.open }),\r\n        toggleToast = () => setToast(!toast),\r\n        closeConfirmDialog = () => setConfirmDialog({ ...confirmDialogProps, open: false }),\r\n\r\n        clearForm = allFields => {\r\n            if (allFields) changeInputs({ ...initState.stateInputs })\r\n            setLaudoDoc()\r\n            setDropDisplay(initState.dropDisplay)\r\n            setOldVehicles()\r\n            setFilteredVehicles()\r\n        }\r\n\r\n    const selectOptions = props.redux.empresasLaudo.map(e => e.empresa)\r\n\r\n    return (\r\n        <Fragment>\r\n            <LaudosTemplate\r\n                empresas={empresas} razaoSocial={razaoSocial} selectedEmpresa={selectedEmpresa} filteredVehicles={filteredVehicles} selectedVehicle={selectedVehicle}\r\n                anchorEl={anchorEl} stateInputs={stateInputs} selectOptions={selectOptions} dropDisplay={dropDisplay} laudoDoc={laudoDoc} table={table}\r\n                demand={demand} demandFiles={demandFiles} showPendencias={showPendencias} fileToRemove={fileToRemove}\r\n                functions={{\r\n                    handleInput, clickOnPlate, showDetails, handleFiles, handleSubmit, closeMenu, clear, removeFile,\r\n                    setShowPendencias, deleteLaudo: confirmDelete\r\n                }}\r\n            />\r\n            {details && <ShowDetails\r\n                close={showDetails}\r\n                data={{ ...selectedVehicle, tableData: '' }}\r\n                tab={3}\r\n                title={'Veículo'}\r\n                header={'- informações'}\r\n            />}\r\n\r\n            {confirmDialogProps.open && <ConfirmDialog {...confirmDialogProps} close={closeConfirmDialog} confirm={deleteLaudo} id={confirmDialogProps.laudoId} />}\r\n\r\n            {alertDialog.open && <AlertDialog open={alertDialog.open} close={toggleAlert} alertType={alertDialog.type} customMessage={alertDialog.msg} />}\r\n            <ReactToast open={toast} close={toggleToast} msg={toastMsg} />\r\n        </Fragment >\r\n    )\r\n}\r\n\r\nconst collections = ['veiculos', 'empresas', 'empresasLaudo', 'laudos', 'getFiles/vehicleDocs']\r\nexport default StoreHOC(collections, Laudos)\r\n\r\n/*\r\n        [razaoSocial, empresaInput] = useState(empresas[0].razaoSocial),\r\n        [selectedEmpresa, setEmpresa] = useState(empresas[0]),\r\n        [oldVehicles, setOldVehicles] = useState(veiculos[0]),\r\n        [filteredVehicles, setFilteredVehicles] = useState([veiculos[0]]),\r\n        [details, setDetails] = useState(false),\r\n        [selectedVehicle, selectVehicle] = useState(veiculos[0]),\r\n\r\n\r\n\r\n[razaoSocial, empresaInput] = useState(''),\r\n[selectedEmpresa, setEmpresa] = useState(),\r\n[oldVehicles, setOldVehicles] = useState(),\r\n[filteredVehicles, setFilteredVehicles] = useState([]),\r\n[details, setDetails] = useState(false),\r\n[selectedVehicle, selectVehicle] = useState(), */","import { createContext } from 'react'\r\n\r\nexport const ReactContext = createContext(null)\r\n\r\nexport const  initContext = {\r\n    user: 'MockUser',\r\n    demandId: null\r\n}\r\n\r\n\r\n\r\n","import React from 'react'\r\n\r\nimport TextField from '@material-ui/core/TextField'\r\nimport { MenuItem } from '@material-ui/core'\r\n\r\nexport default function BaixaOptions({ motivosBaixa, selectMotivo, selectedMotivo, demand }) {\r\n\r\n    return (\r\n        <>\r\n            <div className=\"flexColumn\">\r\n                {\r\n                    !demand && <>\r\n                        <h3>Selecione o motivo da baixa</h3>\r\n                        <TextField\r\n                            className='config__selector'\r\n                            onChange={selectMotivo}\r\n                            name='selectedOption'\r\n                            value={selectedMotivo || ''}\r\n                            select={true}\r\n                            placeholder='Clique para selecionar...'\r\n                            SelectProps={{\r\n                                style: {\r\n                                    fontSize: '0.9rem', color: '#555', fontWeight: 400,\r\n                                    width: 325, height: '44px'\r\n                                }\r\n                            }}\r\n                        >\r\n                            {motivosBaixa.map((opt, i) =>\r\n                                <MenuItem key={i} value={opt} >\r\n                                    {opt}\r\n                                </MenuItem>\r\n                            )}\r\n                        </TextField>\r\n                    </>\r\n                }\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport './baixa.scss'\r\n\r\nconst options = [\r\n    {\r\n        value: 'baixar',\r\n        label: 'Baixar veículo'\r\n    },\r\n    {\r\n        value: 'gerenciar',\r\n        label: 'Gerenciar veículos baixados'\r\n    }\r\n]\r\n\r\nexport default function BaixaOptions({ empresas, selectOption, parametros, demand, checked, delegaTransf, justificativa, pendencias, handleInput, handleBlur, handleCheck, handleSubmit }) {\r\n    return (\r\n        <div className=\"flex center\">\r\n            <div className=\"flexColumn \">\r\n                <h3 className='radio__title' >Selecione uma das opções abaixo</h3>\r\n                <FormControl component=\"fieldset\">\r\n                    <RadioGroup aria-label=\"position\" name=\"position\"\r\n                        onChange={selectOption} row\r\n                        style={{ width: 'auto' }}\r\n                        className='radio'\r\n                    >\r\n                        {\r\n                            options.map(({ value, label }, i) =>\r\n                                <FormControlLabel\r\n                                    key={i}\r\n                                    className='radio'\r\n                                    value={value}\r\n                                    label={<span className='radio__legend'> {label} </span>}\r\n                                    control={<Radio color=\"primary\" size='small' />}\r\n                                />\r\n                            )\r\n                        }\r\n                    </RadioGroup>\r\n                </FormControl>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Button from '@material-ui/core/Button'\r\nimport SaveIcon from '@material-ui/icons/Save';\r\n\r\nconst CustomButton = props => {\r\n    const { action, onClick, disabled } = props\r\n    let\r\n        icon = () => null,\r\n        label = ''\r\n\r\n    if (action === 'save') {\r\n        icon = () => <SaveIcon />\r\n        label = 'Salvar'\r\n    }\r\n    return (\r\n        <Button\r\n            size=\"small\"\r\n            color='primary'\r\n            className='saveButton'\r\n            variant=\"contained\"\r\n            onClick={() => onClick()}\r\n            disabled={disabled}\r\n        >\r\n            {props.label || label} <span>&nbsp;&nbsp; </span> {icon()}\r\n        </Button>\r\n    )\r\n}\r\n\r\nexport default CustomButton","import React from 'react'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport CustomButton from '../Reusable Components/CustomButton';\r\nimport { dischargedForm as df } from '../Forms/dischargedForm';\r\n\r\nconst BaixaGerenciar = ({ data, handleInput, searchDischarged, downloadXls, reactivateVehicle }) => {\r\n    const { placaBaixada, dischargedFound, notFound, reactivate, selectedOption } = data\r\n\r\n    //Retira o campo observações, que será renderizado como blockElement fora do dischargedForm.map()\r\n    const\r\n        dischargedForm = JSON.parse(JSON.stringify(df)),\r\n        obs = dischargedForm.find(f => f.label === 'Observação'),\r\n        index = dischargedForm.indexOf(obs)\r\n\r\n    dischargedForm.splice(index, 1)\r\n\r\n    return (\r\n        <>\r\n            <div className='flex center paper'>\r\n                <header className='searchDischarged__header'>\r\n\r\n                    <div className='searchDischarged'>\r\n                        <div>\r\n                            <form onSubmit={searchDischarged}>\r\n                                <TextField\r\n                                    type=\"text\"\r\n                                    name='placaBaixada'\r\n                                    label='Pesquisar pela placa do veículo'\r\n                                    value={placaBaixada || ''}\r\n                                    onChange={handleInput}\r\n                                    placeholder='Digite a placa'\r\n                                    InputLabelProps={{ style: { fontSize: '0.7rem' } }}\r\n                                    InputProps={{ style: { width: '250px', marginRight: '10px', fontSize: '0.9rem', textAlign: 'center' } }}\r\n                                />\r\n                            </form>\r\n                            <span\r\n                                action='search'\r\n                                onClick={searchDischarged}\r\n                                style={{ marginTop: '18px' }}\r\n                            >\r\n                                <SearchIcon className='pointer' />\r\n                            </span>\r\n                        </div>\r\n                        <div className='downloadXls' onClick={downloadXls}>\r\n                            <img\r\n                                className='downloadXls__icon'\r\n                                src={selectedOption === 'baixar' ? '' : \"/images/excel.png\"}\r\n                                alt=\"Fazer o download do arquivo xlsx\"\r\n                                title='Arquivo xlsx com todos os veículos baixados'\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </header>\r\n                {\r\n                    dischargedFound &&\r\n                    <>\r\n                        <section className='dischargedContainer'>\r\n                            {\r\n                                dischargedForm.map(({ label }, i) =>\r\n                                    <TextField\r\n                                        label={label}\r\n                                        key={i}\r\n                                        value={dischargedFound[label]}\r\n                                        disabled={true}\r\n                                        InputLabelProps={{ style: { fontSize: '0.7rem' }, shrink: true }}\r\n                                        InputProps={{\r\n                                            style: {\r\n                                                width: '250px', margin: '8px 10px 0 0', fontSize: '0.7rem',\r\n                                                color: label === 'Situação' && dischargedFound[label] === 'Reativado' ? 'red' : '#444'\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                                )\r\n                            }\r\n                        </section>\r\n                        <section className='obs'>\r\n                            <label htmlFor=\"obs\" className='obs__label'>Observações:</label>\r\n                            <textarea\r\n                                name=\"obs\"\r\n                                id=\"obs\"\r\n                                className='obs__textArea'\r\n                                defaultValue={dischargedFound['Observação']}\r\n                                cols=\"30\"\r\n                                rows=\"6\" />\r\n                        </section>\r\n                        {\r\n                            reactivate &&\r\n                            <footer className='reactivate'>\r\n                                <CustomButton\r\n                                    action='save'\r\n                                    label='Reativar'\r\n                                    onClick={() => reactivateVehicle()}\r\n                                />\r\n                            </footer>\r\n                        }\r\n                    </>\r\n                }\r\n            </div>\r\n            {\r\n                notFound &&\r\n                <h3>Veículo não encontrado.</h3>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default BaixaGerenciar\r\n","export const baixaForm = [\r\n    {\r\n        field: 'placa',\r\n        label: 'Placa',      \r\n        datalist: 'placa',\r\n        autoComplete: true,\r\n        collection: 'frota',\r\n        maxLength: 8\r\n    },\r\n    {\r\n        field: 'renavam',\r\n        label: 'Renavam',        \r\n    },\r\n    {\r\n        field: 'nChassi',\r\n        label: 'Número do Chassi',        \r\n        maxLength: 17,\r\n    },   \r\n    {\r\n        field: 'utilizacao',\r\n        label: 'Utilização',        \r\n        disabled: true\r\n    },\r\n    {\r\n        field: 'dominio',\r\n        label: 'Situação da Propriedade',        \r\n        disabled: true\r\n    },\r\n\r\n    {\r\n        field: 'marcaChassi',\r\n        label: 'Marca do Chassi',        \r\n        disabled: true\r\n    },\r\n    {\r\n        field: 'modeloChassi',\r\n        label: 'Modelo do Chassi',        \r\n        disabled: true\r\n    },\r\n    {\r\n        field: 'marcaCarroceria',\r\n        label: 'Marca da Carroceria',        \r\n        disabled: true\r\n    },\r\n    {\r\n        field: 'modeloCarroceria',\r\n        label: 'Modelo da Carroceria',        \r\n        disabled: true\r\n    },\r\n    {\r\n        type: 'number',\r\n        field: 'indicadorIdade',\r\n        label: 'Ano',        \r\n        disabled: true\r\n    }\r\n]","import React, { Fragment } from 'react'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport TextInput from '../Reusable Components/TextInput'\r\n\r\nimport BaixaMotivo from './BaixaMotivo'\r\nimport BaixaOptions from './BaixaOptions'\r\nimport BaixaGerenciar from './BaixaGerenciar'\r\n\r\nimport StepperButtons from '../Reusable Components/StepperButtons'\r\nimport Button from '@material-ui/core/Button'\r\nimport Send from '@material-ui/icons/Send'\r\n\r\nimport { baixaForm } from '../Forms/baixaForm'\r\nimport './veiculos.scss'\r\n\r\nexport default function ({ selectOption, handleInput, handleBlur, handleCheck, handleSubmit, selectMotivo,\r\n    data, empresas, motivosBaixa, searchDischarged, downloadXls, reactivateVehicle, setShowPendencias }) {\r\n    const { selectedEmpresa, selectedOption, checked, delegaTransf, justificativa, selectedMotivo, demand, info, motivo, showPendencias } = data\r\n\r\n    return (\r\n        <Fragment>\r\n            <Crumbs links={['Veículos', '/veiculos']} text='Baixa de veículo' demand={demand} />\r\n            <SelectEmpresa\r\n                data={data}\r\n                empresas={empresas}\r\n                handleInput={handleInput}\r\n                handleBlur={handleBlur}\r\n            />\r\n            <div className=\"flexColumn\">\r\n                {//razaoSocial && frota[0] &&\r\n                    selectedEmpresa &&\r\n                    <>\r\n                        {\r\n                            !demand &&\r\n                            <BaixaOptions\r\n                                demand={demand}\r\n                                checked={checked}\r\n                                delegaTransf={delegaTransf}\r\n                                justificativa={justificativa}\r\n                                empresas={empresas}\r\n                                selectOption={selectOption}\r\n                                handleInput={handleInput}\r\n                                handleBlur={handleBlur}\r\n                                handleCheck={handleCheck}\r\n                                handleSubmit={handleSubmit}\r\n                            />\r\n                        }\r\n                        {\r\n                            selectedOption === 'baixar' ?\r\n                                <div className=\"flex\">\r\n                                    <section className=\"paper\">\r\n                                        <h3 style={{ marginBottom: '7px' }}>\r\n                                            {!demand ? 'Informe os dados para a baixa' : `Solicitação nº${demand?.numero} - ${demand?.subject}`}\r\n                                        </h3>\r\n                                        {demand &&\r\n                                            <h4>\r\n                                                {motivo}\r\n                                            </h4>\r\n                                        }\r\n                                        {demand &&\r\n                                            <h4>Situação: {demand?.status}</h4>\r\n                                        }\r\n                                        <TextInput\r\n                                            form={baixaForm}\r\n                                            data={data}\r\n                                            handleBlur={handleBlur}\r\n                                            handleInput={handleInput}\r\n                                            disableAll={demand ? true : false}\r\n                                        />\r\n                                    </section>\r\n                                    <BaixaMotivo\r\n                                        demand={demand}\r\n                                        selectedOption={selectedOption}\r\n                                        //delegaTransf={delegaTransf}\r\n                                        motivosBaixa={motivosBaixa}\r\n                                        selectMotivo={selectMotivo}\r\n                                        selectedMotivo={selectedMotivo}\r\n                                        info={info}\r\n                                        empresas={empresas}\r\n                                        handleInput={handleInput}\r\n                                        handleBlur={handleBlur}\r\n                                        handleSubmit={handleSubmit}\r\n                                        setShowPendencias={setShowPendencias}\r\n                                        showPendencias={showPendencias}\r\n                                    />\r\n                                </div>\r\n                                :\r\n                                selectedOption === 'gerenciar' ?\r\n                                    <BaixaGerenciar\r\n                                        data={data}\r\n                                        handleInput={handleInput}\r\n                                        searchDischarged={searchDischarged}\r\n                                        downloadXls={downloadXls}\r\n                                        reactivateVehicle={reactivateVehicle}\r\n                                    />\r\n                                    : null\r\n                        }\r\n                        {\r\n                            !demand && selectedOption === 'baixar' ?\r\n                                <div className=\"flexEnd\">\r\n                                    <Button\r\n                                        size=\"small\"\r\n                                        color=\"primary\"\r\n                                        variant=\"outlined\"\r\n                                        style={{ margin: '10px 0 10px 0' }}\r\n                                        onClick={() => handleSubmit()}\r\n                                    >\r\n                                        Confirmar <span>&nbsp;&nbsp; </span> <Send />\r\n                                    </Button>\r\n                                </div>\r\n                                : demand ?\r\n                                    <StepperButtons\r\n                                        uniqueStep={true}\r\n                                        declineButtonLabel='Indeferir'\r\n                                        demand={demand}\r\n                                        setShowPendencias={setShowPendencias}\r\n                                        showPendencias={showPendencias}\r\n                                        info={info}\r\n                                        handleSubmit={handleSubmit}\r\n                                        handleInput={handleInput}\r\n                                    />\r\n                                    : null\r\n                        }\r\n                    </>\r\n                }\r\n            </div>\r\n        </Fragment>\r\n    )\r\n}","import React, { Component, Fragment } from 'react'\r\nimport { ReactContext } from '../Store/ReactContext'\r\nimport axios from 'axios'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport BaixaTemplate from './BaixaTemplate'\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\n\r\nimport { logGenerator } from '../Utils/logGenerator'\r\nimport { baixaForm } from '../Forms/baixaForm'\r\nimport { checkDemand } from '../Utils/checkDemand'\r\n\r\nimport './veiculos.scss'\r\nimport Loading from '../Layouts/Loading'\r\nimport { dischargedForm } from '../Forms/dischargedForm'\r\n\r\nclass BaixaVeiculo extends Component {\r\n\r\n    static contextType = ReactContext\r\n\r\n    state = {\r\n        empresas: [],\r\n        razaoSocial: '',\r\n        frota: [],\r\n        placa: '',\r\n        form: {},\r\n        check: '',\r\n        delegaTransf: '',\r\n        toastMsg: 'Solicitação de Baixa Enviada',\r\n        confirmToast: false,\r\n        openDialog: false,\r\n        showPendencias: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n\r\n        const demand = this.props?.location?.state?.demand\r\n        if (demand) {\r\n            const\r\n                { empresas, veiculos } = this.props.redux,\r\n                { empresa, veiculo } = demand,\r\n                selectedEmpresa = empresas.find(e => e.razaoSocial === empresa),\r\n                frota = veiculos.filter(v => v.placa === veiculo),\r\n                selectedVehicle = frota.find(v => v.placa === veiculo),\r\n                motivo = demand?.history[0]?.info\r\n\r\n            await this.setState({ razaoSocial: empresa, selectedEmpresa, placa: veiculo, frota, ...selectedVehicle, selectedVehicle, demand, selectedOption: 'baixar', motivo })\r\n        }\r\n    }\r\n    selectOption = e => this.setState({ selectedOption: e.target.value })\r\n    selectMotivo = e => this.setState({ selectedMotivo: e.target.value })\r\n\r\n    handleInput = async e => {\r\n        const\r\n            { name, value } = e.target,\r\n            { veiculos, empresas } = this.props.redux\r\n\r\n        this.setState({ [name]: value })\r\n\r\n        if (name === 'razaoSocial' && value.length > 2) {\r\n            let selectedEmpresa = empresas.find(e => e.razaoSocial === value)\r\n\r\n            if (selectedEmpresa) {\r\n                await this.setState({ razaoSocial: selectedEmpresa.razaoSocial, selectedEmpresa })\r\n                if (value !== selectedEmpresa.razaoSocial) this.setState({ selectedEmpresa: undefined })\r\n\r\n                const frota = veiculos.filter(v => v.empresa === this.state.razaoSocial)\r\n                this.setState({ frota })\r\n\r\n            } else {\r\n                await this.setState({ selectedEmpresa: undefined, frota: [] })\r\n                this.reset()\r\n            }\r\n        }\r\n    }\r\n\r\n    handleBlur = async e => {\r\n        const\r\n            { empresas, logs } = this.props.redux,\r\n            { frota, demand } = this.state,\r\n            { name } = e.target\r\n        let { value } = e.target\r\n\r\n        if (name === 'delegaTransf') {\r\n            if (value.length > 0) {\r\n                const delegaTransf = empresas.find(e => e.razaoSocial === value)\r\n                if (delegaTransf) {\r\n                    const { razaoSocial, codigoEmpresa } = delegaTransf\r\n                    await this.setState(\r\n                        {\r\n                            delegaTransf: razaoSocial,\r\n                            delegaTransfId: codigoEmpresa,\r\n                            disableSubmit: true\r\n                        }\r\n                    )\r\n                    console.log(this.state)\r\n                    void 0\r\n                } else this.setState({ openAlertDialog: true, alertType: 'empresaNotFound', delegaTransf: '' })\r\n            }\r\n        }\r\n\r\n        if (name === 'placa' && typeof frota !== 'string') {\r\n            if (!value || value === '') this.setState({ disableSubmit: true })\r\n\r\n            let vehicle\r\n            if (value.length > 2)\r\n                vehicle = frota.find(v => {\r\n                    if (typeof value === 'string') return v.placa.toLowerCase().match(value.toLowerCase())\r\n                    else return v.placa.match(value)\r\n                })\r\n\r\n            if (vehicle) {\r\n                if (!demand) {\r\n                    const\r\n                        customTitle = 'Solicitação já cadastrada',\r\n                        customMessage = `Já existe uma demanda aberta para o veículo de placa ${vehicle.placa}. Para acessá-la, clique em \"Solicitações\" no menu superior.`\r\n\r\n                    const demandExists = checkDemand(vehicle?.veiculoId, logs)\r\n                    console.log(vehicle)\r\n                    if (demandExists) {\r\n                        this.setState({ customTitle, customMessage, openAlertDialog: true, delegatario: '', placa: undefined })\r\n                        return\r\n                    }\r\n                }\r\n\r\n                await this.setState({ ...vehicle, selectedVehicle: vehicle })\r\n\r\n            } else if (this.state.placa !== '') {\r\n                let reset = {}\r\n                if (frota[0]) Object.keys(frota[0]).forEach(k => reset[k] = '')\r\n                this.setState({ alertType: 'plateNotFound', openAlertDialog: true, disableSubmit: true })\r\n                this.setState({ ...reset })\r\n            }\r\n        }\r\n    }\r\n\r\n    handleSubmit = async (approved) => {\r\n        const\r\n            { selectedEmpresa, veiculoId, selectedMotivo, demand, selectedVehicle, info, motivo } = this.state,\r\n            { dataEmissao, vencimento, dataRegistro } = selectedVehicle\r\n\r\n        //**************Create Log****************** */\r\n        const log = {\r\n            empresaId: selectedEmpresa?.codigoEmpresa,\r\n            veiculoId,\r\n            history: { info: selectedMotivo ? `Motivo da baixa: ${selectedMotivo}` : motivo },\r\n            historyLength: 0,\r\n            approved\r\n        }\r\n        if (demand)\r\n            log.id = demand?.id\r\n        //Caso indeferida, registrar o motivo (info) e alterar a mensagem do toast\r\n        if (approved === false) {\r\n            log.declined = true\r\n            log.history.info = info\r\n            await this.setState({ toastMsg: 'Baixa de veículo indeferida.' })\r\n        }\r\n        logGenerator(log).then(r => console.log(r.data))\r\n\r\n        //*************If approved, submit request to update Postgres DB **************** */\r\n        if (approved) {\r\n            const\r\n                table = 'veiculos',\r\n                tablePK = 'veiculo_id',\r\n                discharged = {}\r\n\r\n            dischargedForm.forEach(({ field, label }) => {\r\n                if (selectedVehicle[field])\r\n                    discharged[label] = selectedVehicle[field].toString()\r\n            })\r\n            Object.assign(discharged, {\r\n                'Situação': 'Baixado',\r\n                'Data de Registro': new Date(dataRegistro).toLocaleDateString(),\r\n                'Data baixa': new Date().toLocaleDateString(),\r\n                'Data Inicio': new Date(dataEmissao).toLocaleDateString(),\r\n                'Data Fim': new Date(vencimento).toLocaleDateString(),\r\n                'Observação': `Motivo da baixa: ${selectedMotivo}`\r\n            })\r\n            console.log(discharged)\r\n            //Salva o veículo baixado no MongoDB\r\n            axios.post('/api/baixaVeiculo', discharged)\r\n            //Apaga o veículo baixado do Postgresql\r\n            await axios.delete(`/api/delete?table=${table}&tablePK=${tablePK}&id=${veiculoId}`)\r\n                .then(r => console.log(r))\r\n                .catch(err => console.log(err))\r\n\r\n            await this.setState({ toastMsg: 'Baixa realizada com sucesso.' })\r\n        }\r\n\r\n        //***********Clear state****************** */        \r\n        this.toast()\r\n        await this.setState({ selectedEmpresa: undefined, frota: [], razaoSocial: '' })\r\n        this.reset()\r\n\r\n        //***********if demand, Redirect to /solicitacoes */        \r\n        if (demand)\r\n            setTimeout(() => {\r\n                this.props.history.push('/solicitacoes')\r\n            }, 1500)\r\n    }\r\n\r\n    searchDischarged = async e => {\r\n        e.preventDefault()\r\n        const\r\n            { placaBaixada } = this.state,\r\n            { parametros } = this.props.redux,\r\n            { idadeBaixaAut } = parametros[0]?.idadeBaixa,\r\n            query = await axios.get(`/api/getOldVehicles?placa=${placaBaixada}`),\r\n            result = query?.data\r\n\r\n        if (result[0]) {\r\n            const\r\n                found = result[0],\r\n                currentYear = new Date().getFullYear(),\r\n                year = +found['Ano carroceria'],\r\n                age = currentYear - year\r\n\r\n            let reactivate = true\r\n\r\n            if (age > idadeBaixaAut || found['Situação'] === 'Reativado')\r\n                reactivate = false\r\n\r\n            this.setState({ dischargedFound: result[0], notFound: false, reactivate })\r\n        }\r\n        else\r\n            this.setState({ notFound: true, dischargedFound: undefined })\r\n    }\r\n\r\n    reactivateVehicle = () => {\r\n        const\r\n            { dischargedFound } = this.state,\r\n            reqBody = {\r\n                placa: dischargedFound?.Placa,\r\n                'Situação': 'Reativado'\r\n            },\r\n            customTitle = 'Veículo reativado.',\r\n            customMessage = `O veículo de placa ${dischargedFound?.Placa} poderá ser recadastrado no sistema acessando as opções Veículos -> Cadastro de Veículos.`\r\n\r\n        axios.patch('/api/reactivateVehicle', reqBody)\r\n            .then(r => {\r\n                if (r.status === 200)\r\n                    this.setState({ customMessage, customTitle, openAlertDialog: true, placaBaixada: '', dischargedFound: undefined })\r\n                console.log(r.data)\r\n            })\r\n    }\r\n\r\n    reset = () => {\r\n        baixaForm.forEach(el => this.setState({ [el.field]: '' }))\r\n        this.setState({ delegaTransf: '', check: '', justificativa: '', checked: false, demand: undefined })\r\n    }\r\n\r\n    downloadXls = () => {\r\n        this.setState({ loading: true })\r\n        axios({\r\n            url: `/api/oldVehiclesXls`,\r\n            method: 'GET',\r\n            responseType: 'blob', // important\r\n            onDownloadProgress: (progressEvent) => {\r\n                Math.round((progressEvent.loaded))\r\n            }\r\n\r\n        }).then((response) => {\r\n            const\r\n                content = response.headers['content-disposition'],\r\n                i = content.indexOf('=') + 1,\r\n                fileName = content.slice(i)\r\n\r\n            const url = window.URL.createObjectURL(new Blob([response.data]));\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            link.setAttribute('download', fileName);\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            this.setState({ loading: false })\r\n        })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    setShowPendencias = () => this.setState({ showPendencias: !this.state.showPendencias })\r\n    handleCheck = e => this.setState({ checked: e.target.value })\r\n    closeAlert = () => this.setState({ openAlertDialog: !this.state.openAlertDialog })\r\n    toast = toastMsg => this.setState({ confirmToast: !this.state.confirmToast, toastMsg: toastMsg ? toastMsg : this.state.toastMsg })\r\n\r\n    render() {\r\n        const\r\n            { empresas, parametros } = this.props.redux,\r\n            { motivosBaixa } = parametros[0],\r\n            { delegaTransf, confirmToast, toastMsg, checked, openAlertDialog, customTitle, customMessage, alertType, loading } = this.state\r\n\r\n        return <Fragment>\r\n            <BaixaTemplate\r\n                data={this.state}\r\n                empresas={empresas}\r\n                motivosBaixa={motivosBaixa}\r\n                checked={checked}\r\n                selectOption={this.selectOption}\r\n                selectMotivo={this.selectMotivo}\r\n                delegaTransf={delegaTransf}\r\n                handleInput={this.handleInput}\r\n                handleBlur={this.handleBlur}\r\n                handleCheck={this.handleCheck}\r\n                handleSubmit={this.handleSubmit}\r\n                searchDischarged={this.searchDischarged}\r\n                downloadXls={this.downloadXls}\r\n                reactivateVehicle={this.reactivateVehicle}\r\n                setShowPendencias={this.setShowPendencias}\r\n            />\r\n            {openAlertDialog && <AlertDialog open={openAlertDialog} close={this.closeAlert} alertType={alertType} customTitle={customTitle} customMessage={customMessage} />}\r\n            <ReactToast open={confirmToast} close={this.toast} msg={toastMsg} />\r\n            {loading && <Loading />}\r\n        </Fragment >\r\n    }\r\n}\r\n\r\nconst collections = ['veiculos', 'empresas', 'parametros', 'equipamentos', 'acessibilidade']\r\n\r\nexport default StoreHOC(collections, BaixaVeiculo)","import React, { Fragment } from 'react'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\n\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport Add from '@material-ui/icons/Add'\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport './config.css'\r\n\r\nexport default function ConfigTemplate({ collections, collection, data, staticData,\r\n    selectCollection, handleChange, enableEdit, confirmDelete, handleSubmit, openAddDialog }) {\r\n\r\n    return (\r\n        <Fragment>\r\n            <Crumbs links={['Veículos', '/veiculos']} text='Alterar configurações de veículos' />\r\n            <center>\r\n                <h4>Selecione uma das opções abaixo.</h4>\r\n            </center>\r\n            <header className=\"selectHeader\">\r\n                <TextField\r\n                    className='config__selector'\r\n                    onChange={selectCollection}\r\n                    value={collection}\r\n                    select={true}\r\n                    SelectProps={{\r\n                        style: {\r\n                            fontSize: '0.9rem', color: '#555', fontWeight: 400,\r\n                            width: 325, height: '44px'\r\n                        }\r\n                    }}\r\n                >\r\n                    {collections.map((opt, i) =>\r\n                        <MenuItem key={i} value={opt} >\r\n                            {opt}\r\n                        </MenuItem>\r\n                    )}\r\n                </TextField>\r\n            </header>\r\n            {staticData && collection && <div className='divHeader'>\r\n                <Button\r\n                    size=\"small\"\r\n                    color='primary'\r\n                    variant='outlined'\r\n                    style={{ margin: '10px 0 10px 0' }}\r\n                    onClick={() => openAddDialog()}\r\n                >\r\n                    <Add /> Adicionar\r\n                </Button>\r\n            </div>}\r\n            <div className='container'>\r\n                {\r\n                    data && staticData && data.map((el, i) =>\r\n                        <div className='divCell' key={i}>\r\n                            <TextField\r\n                                value={el.edit ? el[staticData.field] : el[staticData.field] + ' (' + el['count'] + ')'}\r\n                                onChange={handleChange}\r\n                                name={el.field}\r\n                                type='text'\r\n                                inputProps={{\r\n                                    autoCorrect: 'off',\r\n                                    spellCheck: false,\r\n                                    style: {\r\n                                        fontSize: '0.8rem',\r\n                                        color: el.edit === true ? '#000' : '#999'\r\n                                    },\r\n                                }}\r\n                                className='config__textField'\r\n                                disabled={el.edit === false}\r\n                            />\r\n                            <button component='span'\r\n                                className='configVehicleIcon'\r\n                                title='Editar'\r\n                                onClick={() => enableEdit(i)}\r\n                                display='none'>\r\n                                <EditIcon className='confIcon' color='primary' />\r\n                            </button>\r\n                            <button\r\n                                className='configVehicleIcon'\r\n                                title='Remover'\r\n                                onClick={() => confirmDelete(i)}>\r\n                                <DeleteIcon className='confIcon' color='secondary' />\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n            </div>\r\n        </Fragment >\r\n    )\r\n}","import React, { PureComponent, Fragment } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport ConfigAddDialog from './ConfigAddDialog'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\nimport ConfigTemplate from './ConfigTemplate'\r\nimport ConfirmDialog from '../Reusable Components/ConfirmDialog'\r\n\r\nimport { configVehicleForm } from '../Forms/configVehicleForm'\r\n\r\nclass VehicleConfig extends PureComponent {\r\n\r\n    state = {\r\n        collection: '',\r\n        marca: '',\r\n        options: [],\r\n        openAddDialog: false,\r\n        confirmToast: false,\r\n        toastMsg: 'Dados atualizados!',\r\n        confirmDialogProps: { open: false }\r\n    }\r\n    componentDidMount() {\r\n        let options = []\r\n        configVehicleForm.forEach(col => { options.push(col.label) })\r\n        this.setState({ options })\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const\r\n            redux = JSON.parse(JSON.stringify(this.props.redux)),\r\n            { veiculos } = redux,\r\n            { staticData, data, editIndex } = this.state\r\n\r\n        if (!staticData || !data) return null\r\n\r\n        const { collection } = staticData\r\n        if (JSON.stringify(prevProps.redux[collection]) !== JSON.stringify(redux[collection])) {\r\n            const data = this.addCounter(veiculos, staticData, redux[collection])\r\n            if (editIndex || editIndex === 0)\r\n                data[editIndex].edit = true\r\n            this.setState({ data })\r\n        }\r\n    }\r\n\r\n    addCounter = (veiculos, staticData, data) => {\r\n        const { name, field, label } = staticData\r\n\r\n        data.forEach(el => {\r\n            const\r\n                vehicles = veiculos.filter(v => {\r\n                    if (v.hasOwnProperty(name) && (label === 'Itens de acessibilidade' || label === 'Equipamentos')) {\r\n                        const vehicleItems = v[name]\r\n                        const hasItem = vehicleItems.find(ac => ac === el.id)\r\n                        return hasItem\r\n                    }\r\n                    return v[name] === el[field]\r\n                }),\r\n                count = vehicles.length\r\n            Object.assign(el, { count })\r\n        })\r\n        data = data.sort((a, b) => a[field].localeCompare(b[field]))\r\n        return data\r\n    }\r\n\r\n    selectCollection = async e => {\r\n        const\r\n            { value } = e.target,\r\n            { veiculos, marcaChassi, marcaCarroceria } = this.props.redux\r\n        let\r\n            staticData = configVehicleForm.find(el => el.label === value),\r\n            data = JSON.parse(JSON.stringify(this.props.redux[staticData.collection]))\r\n\r\n        data = this.addCounter(veiculos, staticData, data)\r\n        data.forEach(el => el.edit = false)\r\n\r\n        this.setState({ marcas: undefined, marca: '' })\r\n        if (staticData.collection === 'modelosChassi') this.setState({ marcas: marcaChassi })\r\n        if (staticData.collection === 'carrocerias') this.setState({ marcas: marcaCarroceria })\r\n\r\n        await this.setState({ collection: value, data, staticData })\r\n        void 0\r\n    }\r\n\r\n    enableEdit = async index => {\r\n        let oldIndex\r\n        const\r\n            redux = JSON.parse(JSON.stringify(this.props.redux)),\r\n            divCell = document.querySelectorAll('.divCell'),\r\n            divWrap = divCell[index].childNodes[0],\r\n            inputTarget = divWrap.querySelectorAll('input')[0],\r\n            { updatedObj, staticData } = this.state,\r\n            data = JSON.parse(JSON.stringify(this.state.data)),\r\n            selectedObj = data[index],\r\n            name = this.state?.staticData?.field\r\n\r\n        //O index de referência vai variar: se houver um campo em edição e se clicar no enableEdit de outro, o index de refrência é do campo anterior\r\n        //Inicialmente os objetos originais se baseiam no index que é dado como argumento da função\r\n        if (selectedObj?.edit === undefined) selectedObj.edit = false\r\n\r\n        let\r\n            originalObject = redux[staticData.collection].find(el => {\r\n                if (el.id === selectedObj.id)\r\n                    return Object.freeze(el)\r\n                else return {}\r\n            }),\r\n            noChanges = data[index][name] === originalObject[name]\r\n\r\n        //Verificar se já havia algum edit === true e se está se checando outro como true ao mesmo tempo q torna o ativo false        \r\n        const leftOpen = data.some((el, i) => {\r\n            if (i !== index && el.edit === true) {\r\n                oldIndex = data.indexOf(el)\r\n                return el\r\n            } else return false\r\n        })\r\n\r\n        //desativa a edição de todos os outros campos exceto o escolhido (index)\r\n        async function select() {\r\n            data.forEach(el => el.edit = false)\r\n            data[index].edit = true\r\n            await this.setState({ data, editIndex: index })\r\n            inputTarget.focus()\r\n        }\r\n        //Se todos objs estiverem com edição desabilitada:\r\n        if (!leftOpen) {\r\n            //So o clicado estiver desabilitad, apenas habilite sua edição\r\n            if (selectedObj.edit === false) {\r\n                data[index].edit = true\r\n                await this.setState({ data })\r\n                inputTarget.focus()\r\n            }\r\n            // Senão, verificar se houve mudança. Caso positivo, request p salvar e depois desabilita edição\r\n            else {\r\n                data[index].edit = false\r\n                if (updatedObj && !noChanges)\r\n                    this.handleSubmit(updatedObj)\r\n                this.setState({ data, editIndex: undefined })\r\n            }\r\n            return\r\n        }\r\n        //Nesse caso, um campo está em ediçao e outro campo foi clicado. Salva-se o em edição caso tenha sido alterado e se habilita a edição do próximo\r\n        if (leftOpen && !selectedObj.edit) {\r\n            select.call(this)\r\n            //Atualização do index para achar o objeto original referente ao último objeto com edit=true\r\n            originalObject = redux[staticData.collection].find(el => el.id === data[oldIndex]?.id)\r\n            noChanges = data[oldIndex][name] === originalObject[name]\r\n\r\n            if (updatedObj && !noChanges)\r\n                this.handleSubmit(updatedObj)\r\n        }\r\n    }\r\n\r\n    selectMarca = e => {\r\n        const\r\n            { value } = e.target,\r\n            { collection } = this.state.staticData,\r\n            { marcaChassi, marcaCarroceria } = this.props.redux\r\n\r\n        let marcaCollection\r\n        if (collection === 'modelosChassi') marcaCollection = marcaChassi\r\n        if (collection === 'carrocerias') marcaCollection = marcaCarroceria\r\n\r\n        const { id } = marcaCollection.find(m => m.marca === value)\r\n\r\n        this.setState({ marca: value, marcaId: id })\r\n    }\r\n\r\n    handleChange = async e => {\r\n        const\r\n            { value } = e.target,\r\n            { staticData, data } = this.state,\r\n            { field } = staticData,\r\n\r\n            changedElement = data.find(el => el.edit === true),\r\n            index = data.indexOf(changedElement)\r\n\r\n        changedElement[field] = value\r\n\r\n        let newData = [...this.state.data]\r\n        newData[index] = changedElement\r\n        const updatedObj = {\r\n            id: changedElement?.id,\r\n            [field]: value\r\n        }\r\n        this.setState({ data: newData, updatedObj })\r\n    }\r\n\r\n    handleInput = e => {\r\n        const { value } = e.target\r\n        this.setState({ newElement: value })\r\n    }\r\n\r\n    addNewElement = async () => {\r\n\r\n        const\r\n            { staticData, newElement, marcaId } = this.state,\r\n            { table, field, collection } = staticData,\r\n            { veiculos } = this.props.redux\r\n\r\n        let requestElement = { [field]: newElement }\r\n        if (marcaId) requestElement.marcaId = marcaId\r\n        requestElement = humps.decamelizeKeys(requestElement)\r\n\r\n        await axios.post('/api/addElement', { table, requestElement })\r\n\r\n        let data = this.props.redux[collection]\r\n        data = this.addCounter(veiculos, staticData, data)\r\n\r\n        this.setState({ openAddDialog: false, data, marcaId: undefined })\r\n    }\r\n\r\n    confirmDelete = index => {\r\n\r\n        const\r\n            { data, staticData } = this.state,\r\n            { field } = staticData,\r\n\r\n            elementName = data[index][field],\r\n            confirmDialogProps = {\r\n                open: true,\r\n                type: 'delete',\r\n                element: `${elementName}`,\r\n                index\r\n            }\r\n\r\n        this.setState({ confirmDialogProps })\r\n    }\r\n\r\n    removeItem = async index => {\r\n        this.closeConfirmDialog()\r\n\r\n        let data = [...this.state.data]\r\n\r\n        const\r\n            { staticData } = this.state,\r\n            { collection, table } = staticData,\r\n            id = data[index].id,\r\n            originalData = this.props.redux[collection],\r\n            registered = originalData.find(el => el.id === id)\r\n\r\n        if (registered) {\r\n            await axios.delete(`/api/delete?table=${table}&tablePK=id&id=${id}`)\r\n                .catch(err => console.log(err))\r\n        }\r\n        data.splice(index, 1)\r\n        this.setState({ data })\r\n\r\n    }\r\n\r\n    handleSubmit = async updatedObj => {\r\n        const\r\n            { staticData } = this.state,\r\n            { field, table } = staticData,\r\n            tablePK = 'id',\r\n            column = humps.decamelize(field),\r\n            editedElements = [humps.decamelizeKeys(updatedObj)]\r\n\r\n        await axios.put('/api/editElements', { requestArray: editedElements, table, tablePK, column })\r\n            .catch(err => console.log(err))\r\n\r\n        this.setState({ updatedObj: undefined })\r\n    }\r\n\r\n    closeConfirmDialog = () => {\r\n        let confirmDialogProps = { ...this.state.confirmDialogProps }\r\n        confirmDialogProps.open = false\r\n\r\n        this.setState({ confirmDialogProps })\r\n    }\r\n\r\n    toggleDialog = () => this.setState({ openAddDialog: !this.state.openAddDialog })\r\n    toast = () => this.setState({ confirmToast: !this.state.confirmToast })\r\n\r\n    render() {\r\n\r\n        const { options, collection, data, staticData, openAddDialog, marca, marcas, confirmToast, toastMsg, confirmDialogProps } = this.state\r\n        return (\r\n            <Fragment>\r\n                <ConfigTemplate\r\n                    collections={options}\r\n                    collection={collection}\r\n                    data={data}\r\n                    staticData={staticData}\r\n                    selectCollection={this.selectCollection}\r\n                    enableEdit={this.enableEdit}\r\n                    handleChange={this.handleChange}\r\n                    handleSubmit={this.handleSubmit}\r\n                    openAddDialog={this.toggleDialog}\r\n                    confirmDelete={this.confirmDelete}\r\n                />\r\n                {openAddDialog && <ConfigAddDialog\r\n                    open={openAddDialog}\r\n                    close={this.toggleDialog}\r\n                    title={staticData.label}\r\n                    helperMessage='Para adicionar, insira o nome no campo abaixo e clique em \"Confirmar\".'\r\n                    marca={marca}\r\n                    marcas={marcas}\r\n                    selectMarca={this.selectMarca}\r\n                    handleInput={this.handleInput}\r\n                    addNewElement={this.addNewElement}\r\n                />}\r\n                {confirmDialogProps.open && <ConfirmDialog {...confirmDialogProps} close={this.closeConfirmDialog} confirm={this.removeItem} />}\r\n\r\n                <ReactToast open={confirmToast} close={this.toast} msg={toastMsg} />\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst collections = ['seguradoras', 'lookUpTable/marca_chassi', 'modelosChassi', 'lookUpTable/marca_carroceria',\r\n    'carrocerias', 'equipamentos', 'veiculos', 'acessibilidade', 'empresasLaudo']\r\n\r\nexport default StoreHOC(collections, VehicleConfig)","import { formatDate } from '../Utils/formatValues'\r\n\r\nexport const delegatarioTable = [\r\n    {\r\n        field: 'razaoSocial',\r\n        title: 'Razão Social',\r\n    },\r\n    {\r\n        field: 'cnpj',\r\n        title: 'CNPJ',\r\n    },\r\n    {\r\n        field: 'vencimentoContrato',\r\n        title: 'Vencimento do Cadastro',\r\n        filtering: false,\r\n        render: rowData => formatDate(rowData.vencimentoContrato)\r\n    },\r\n    {\r\n        field: 'cidade',\r\n        title: 'Município',\r\n    },\r\n    {\r\n        field: 'telefone',\r\n        title: 'Telefone',\r\n    },\r\n    {\r\n        field: 'frota',\r\n        title: 'Tamanho da frota'\r\n    }\r\n]\r\n\r\nexport const sociosTable = [\r\n    {\r\n        field: 'nomeSocio',\r\n        title: 'Nome',\r\n    },\r\n    {\r\n        field: 'cpfSocio',\r\n        title: 'CPF',\r\n    },\r\n    {\r\n        field: 'razaoSocial',\r\n        title: 'Delegatário(s)',\r\n    },\r\n    {\r\n        field: 'emailSocio',\r\n        title: 'E-mail',\r\n\r\n    },\r\n    {\r\n        field: 'telSocio',\r\n        title: 'Telefone',\r\n\r\n    },\r\n    {\r\n        field: 'share',\r\n        title: 'Participação Societária (%)',\r\n        filtering: false,\r\n    }\r\n]\r\n\r\n\r\nexport const procuradorTable = [\r\n    {\r\n        field: 'nomeProcurador',\r\n        title: 'Nome',\r\n    },\r\n    {\r\n        field: 'cpfProcurador',\r\n        title: 'CPF',\r\n    },\r\n    {\r\n        field: 'emailProcurador',\r\n        title: 'E-mail',\r\n    },\r\n    {\r\n        field: 'telProcurador',\r\n        title: 'Telefone'\r\n    }\r\n]\r\n\r\nexport const vehicleTable = [\r\n    {\r\n        field: 'placa',\r\n        title: 'Placa',\r\n    },\r\n    {\r\n        field: 'empresa',\r\n        title: 'Delegatário',\r\n    },\r\n    {\r\n        field: 'seguradora',\r\n        title: 'Seguradora',\r\n    },\r\n    {\r\n        field: 'apolice',\r\n        title: 'Número da Apólice',\r\n    },\r\n    {\r\n        field: 'vencimento',\r\n        title: 'Vencimento Seguro',\r\n        render: rowData => formatDate(rowData.vencimento)\r\n    },\r\n    {\r\n        field: 'situacao',\r\n        title: 'Situação',\r\n    },\r\n    {\r\n        field: 'compartilhado',\r\n        title: 'Compartilhado por'\r\n    },\r\n    /*  {\r\n         field: 'anoCarroceria',\r\n         title: 'Ano de Fabricação',\r\n         filtering: false\r\n     } */\r\n    {\r\n        field: 'indicadorIdade',\r\n        title: 'Indicador de idade',\r\n        render: rowData => {\r\n            let\r\n                i = rowData['indicadorIdade'],\r\n                timeUnit = ' anos',\r\n                output\r\n\r\n            if (i || i === 0) {\r\n                if (i === -1)\r\n                    i = 0\r\n                if (i === 1 || i === 0)\r\n                    timeUnit = ' ano'\r\n                output = i.toString() + timeUnit\r\n                return output\r\n            }\r\n        }\r\n    }\r\n]\r\n\r\nexport const segurosTable = [\r\n    {\r\n        field: 'apolice',\r\n        title: 'Número da Apólice',\r\n    },\r\n    {\r\n        field: 'seguradora',\r\n        title: 'Seguradora',\r\n    },\r\n    {\r\n        field: 'empresa',\r\n        title: 'Segurado',\r\n    },\r\n    {\r\n        field: 'situacao',\r\n        title: 'Situação',\r\n    },\r\n    {\r\n        field: 'segurados',\r\n        title: 'Número de veículos',\r\n    },\r\n    {\r\n        field: 'dataEmissao',\r\n        title: 'Início da vigência',\r\n        filtering: false,\r\n        render: rowData => formatDate(rowData.dataEmissao)\r\n    },\r\n    {\r\n        field: 'vencimento',\r\n        title: 'Vencimento',\r\n        filtering: false,\r\n        render: rowData => formatDate(rowData.vencimento)\r\n    }\r\n]\r\n\r\nexport const tables = [delegatarioTable].concat([sociosTable]).concat([procuradorTable]).concat([vehicleTable]).concat([segurosTable])\r\n","import * as FileSaver from 'file-saver';\r\nimport * as XLSX from 'xlsx';\r\nimport moment from 'moment'\r\n\r\nconst exportToXlsx = (subject, tab, form, rawData) => {\r\n    const\r\n        fileType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8',\r\n        fileExtension = '.xlsx',\r\n        fileName = subject[tab]\r\n\r\n    const formatedData = formatData(form, rawData)\r\n\r\n    const ws = XLSX.utils.json_to_sheet(formatedData);\r\n    const wb = { Sheets: { 'data': ws }, SheetNames: ['data'] };\r\n    const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\r\n    const data = new Blob([excelBuffer], { type: fileType });\r\n    FileSaver.saveAs(data, fileName + fileExtension);\r\n}\r\n\r\nfunction formatData(form, data) {\r\n\r\n    const rawData = JSON.parse(JSON.stringify(data))\r\n\r\n    const formatValue = value => {\r\n        if (moment(value, 'YYYY-MM-DDTHH:mm:ss.SSSZZ', true).isValid())\r\n            value = moment(value).format('DD/MM/YYYY')\r\n        return value\r\n    }\r\n\r\n    if (Array.isArray(rawData)) {\r\n        rawData.forEach((obj, i) => {\r\n            Object.entries(obj).forEach(([key, value]) => {\r\n\r\n                const formField = form.find(f => f.field === key)\r\n\r\n                if (!formField) {\r\n                    delete obj[key]\r\n                    return\r\n\r\n                } else {\r\n                    const header = formField?.label\r\n                    value = formatValue(value)\r\n                    obj[header] = value\r\n                    delete obj[key]\r\n                }\r\n            })\r\n        })\r\n    }\r\n    return rawData\r\n}\r\n\r\nexport default exportToXlsx","import React from 'react'\r\nimport MaterialTable from 'material-table';\r\nimport { tables } from './tables'\r\nimport exportToXlsx from './exportToXlsx';\r\nimport { setForm } from '../Utils/createFormPattern';\r\n\r\nexport default function ({ tab, collection, showDetails, showFiles, showCertificate, del }) {\r\n\r\n    const\r\n        id = ['codigoEmpresa', 'socioId', 'procuradorId', 'veiculoId', 'apolice'][tab],\r\n        subject = ['empresas', 'sócios', 'procuradores', 'veículos', 'seguros'],\r\n        form = setForm(tab)\r\n\r\n    if (!Array.isArray(collection)) collection = []\r\n    collection = collection.map(obj => ({ ...obj }))\r\n\r\n    return (\r\n        <div style={{ margin: '10px 0' }} className='noPrint'>\r\n            <MaterialTable\r\n                title={`Pesquisar dados de ${subject[tab]}`}\r\n                columns={tables[tab]}\r\n                data={collection}\r\n                style={{ fontFamily: 'Segoe UI', fontSize: '14px' }}\r\n                options={{\r\n                    filtering: true,\r\n                    exportButton: true,\r\n                    exportFileName: subject[tab],\r\n                    exportCsv: (columns, data) => {\r\n                        exportToXlsx(subject, tab, form, data)\r\n                    },\r\n                    actionsColumnIndex: -1,\r\n                    searchFieldStyle: { color: '#024', fontSize: '14px' },\r\n                    headerStyle: { backgroundColor: '#FAFAFC' },\r\n                    emptyRowsWhenPaging: false,\r\n                    pageSize: 20,\r\n                    rowStyle: {\r\n                        fontSize: '0.5rem',\r\n                    }\r\n                }}\r\n\r\n                localization={{\r\n                    header: { actions: 'Opções' },\r\n                    body: {\r\n                        emptyDataSourceMessage: 'Registro não encontrado.',\r\n                        editRow: { deleteText: 'Tem certeza que deseja apagar esse registro ?' },\r\n                        deleteTooltip: 'Apagar',\r\n                        filterRow: { filterTooltip: 'Filtrar' }\r\n                    },\r\n                    toolbar: {\r\n                        searchTooltip: 'Procurar',\r\n                        searchPlaceholder: 'Procurar',\r\n                        exportName: 'Salvar como arquivo do excel',\r\n                        exportAriaLabel: 'Exportar',\r\n                        exportTitle: 'Exportar'\r\n                    },\r\n                    pagination: {\r\n\r\n                        labelRowsSelect: 'Resultados por página',\r\n                        labelDisplayedRows: ' {from}-{to} a {count}',\r\n                        firstTooltip: 'Primeira página',\r\n                        previousTooltip: 'Página anterior',\r\n                        nextTooltip: 'Próxima Página',\r\n                        lastTooltip: 'Última Página',\r\n\r\n                    }\r\n                }}\r\n                actions={[\r\n                    {\r\n                        icon: 'info',\r\n                        iconProps: { color: 'primary' },\r\n                        tooltip: 'Mais informações',\r\n                        onClick: (event, rowData) => showDetails(event, rowData)\r\n                    },\r\n                    {\r\n                        icon: 'file_copy_outline',\r\n                        iconProps: { color: 'secondary' },\r\n                        tooltip: 'Ver arquivos',\r\n                        onClick: (event, rowData) => showFiles(rowData[id])\r\n                    },\r\n                    {\r\n                        icon: 'class_outlined',\r\n                        iconProps: { color: 'action' },\r\n                        tooltip: 'Emitir certificado',\r\n                        hidden: tab !== 3,\r\n                        onClick: (event, rowData) => showCertificate(rowData)\r\n                    }\r\n                ]}\r\n                editable={{\r\n                    onRowDelete: async oldData => await del(oldData)\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Link as RouterLink } from 'react-router-dom'\r\n\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { logUserOut } from '../Store/userActions';\r\n\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport { Toolbar, Typography, Button, Link } from '@material-ui/core'\r\nimport Badge from '@material-ui/core/Badge';\r\nimport { withRouter } from 'react-router'\r\nimport './stylez.scss'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    toolbarTitle: {\r\n        flex: 1,\r\n    },\r\n    toolbarSecondary: {\r\n        justifyContent: 'space-between',\r\n        overflowX: 'auto',\r\n        backgroundColor: '#0398c1',\r\n        color: 'white'\r\n    },\r\n\r\n    toolbarLink: {\r\n        padding: '12px 55px 13px 55px',\r\n        flexShrink: 0,\r\n    }\r\n}));\r\n\r\nconst sections = [\r\n    { title: 'Página Inicial', link: '/' },\r\n    { title: 'Consultas', link: '/consultas' },\r\n    { title: 'Veículos', link: '/veiculos' },\r\n    { title: 'Empresas', link: '/empresas' },\r\n    { title: 'Relatórios', link: '/relatorios' },\r\n    { title: 'Solicitações ', link: '/solicitacoes' },\r\n    //{ title: 'Fale Conosco', link: '/faleConosco' },\r\n];\r\n\r\nconst StyledBadge = withStyles((theme) => ({\r\n    badge: {\r\n        right: -8,\r\n        top: -1,\r\n        padding: '0 4px',\r\n    },\r\n}))(Badge);\r\n\r\nconst Header = props => {\r\n\r\n    const\r\n        logs = props?.logs,\r\n        { parametros } = props,\r\n        { pathname } = props.location,\r\n        demand = localStorage.getItem('demand'),\r\n        classes = useStyles(),\r\n        { toolbarTitle, toolbarSecondary, toolbarLink } = classes\r\n\r\n    const\r\n        [path, setSelected] = useState(document.location.pathname),\r\n        [logCounter, setLogCounter] = useState()\r\n\r\n    useEffect(() => {\r\n        if (logs && Array.isArray(logs)) {\r\n            const count = logs\r\n                .filter(l => l?.completed === false)\r\n                .length\r\n\r\n            setLogCounter(count)\r\n        }\r\n        setSelected(pathname)\r\n    }, [pathname, logCounter, logs])\r\n\r\n    const selected = link => {\r\n        let\r\n            style = document.querySelector(\"a[href='/solicitacoes']\")?.style,\r\n            bgColor = '',\r\n            borderB = '',\r\n            borderT = '',\r\n            fontW = '400'\r\n\r\n        if (path === '/solicitacoes' || demand) {\r\n            if (style) {\r\n                style['background-color'] = '#11a7d2'\r\n                style['border-bottom'] = '1.5px solid #ccc'\r\n            }\r\n        }\r\n\r\n        else if (path.match(link) && link !== '/') {\r\n            bgColor = '#11a7d2'\r\n            borderB = '1.5px solid #ccc'\r\n            if (style) {\r\n                style['background-color'] = ''\r\n                style['border-bottom'] = ''\r\n            }\r\n        }\r\n        return { bgColor, borderB, borderT, fontW }\r\n    }\r\n    //Pega o nome e a sigla da Secretaria do DB, editáveis na opção \"Parâmetros\" do sistema.\r\n    let\r\n        nomeSecretaria = '',\r\n        siglaSecretaria = ''\r\n\r\n    if (parametros && parametros[0]) {\r\n        const { nomes } = parametros[0]\r\n        nomeSecretaria = nomes.secretaria\r\n        siglaSecretaria = nomes.siglaSecretaria\r\n    }\r\n    \r\n    const logout = async () => props.logUserOut()\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <CssBaseline />\r\n\r\n            <Toolbar>\r\n                <Button size=\"small\">Criar usuário</Button>\r\n                <Typography\r\n                    component=\"h2\"\r\n                    variant=\"h6\"\r\n                    color=\"inherit\"\r\n                    align=\"center\"\r\n                    noWrap\r\n                    className={toolbarTitle}\r\n                >\r\n                    {siglaSecretaria} - {nomeSecretaria}\r\n                </Typography>\r\n                <Button variant=\"outlined\" size=\"small\" onClick={() => logout()}>\r\n                    Sair\r\n                </Button>\r\n            </Toolbar>\r\n            <Toolbar component=\"nav\" variant=\"dense\" className={toolbarSecondary}>\r\n                {sections.map(({ link, title }, i) => (\r\n                    <Link\r\n                        component={RouterLink}\r\n                        to={link}\r\n                        key={i}\r\n                        color=\"inherit\"\r\n                        noWrap\r\n                        variant=\"body2\"\r\n                        href=\"\"\r\n                        style={{\r\n                            fontFamily: 'Segoe UI, Tahoma, Geneva, Verdana, sans-serif',\r\n                            fontSize: '15px',\r\n                            backgroundColor: selected(link).bgColor,\r\n                            borderBottom: selected(link).borderB,\r\n                            fontWeight: selected(link).fontW,\r\n                            borderTop: selected(link).borderT\r\n                        }}\r\n                        className={toolbarLink}\r\n                        onClick={() => setSelected(link)}\r\n                    >\r\n                        {\r\n                            title === 'Solicitações ' ?\r\n\r\n                                <StyledBadge badgeContent={logCounter} color='secondary'>\r\n                                    <span>\r\n                                        {title}\r\n                                    </span>\r\n                                </StyledBadge>\r\n                                :\r\n                                title\r\n                        }\r\n                    </Link>\r\n                ))}\r\n                <Link\r\n                    component={RouterLink}\r\n                    to='/parametros'\r\n                >\r\n                    <span\r\n                        className=\"material-icons\"\r\n                        style={{ color: 'white', cursor: 'pointer' }}\r\n                        title='Alterar parâmetros do sistema'\r\n                    >\r\n                        settings\r\n                    </span>\r\n                </Link>\r\n            </Toolbar>\r\n        </React.Fragment >\r\n    )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        logs: state.data?.logs,\r\n        parametros: state.data?.parametros\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return bindActionCreators({ logUserOut }, dispatch)\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Header))","//import React from 'react'\r\n\r\nconst Footer = () => {\r\n   return null\r\n    /*  return (\r\n        <footer className=\"footer\">\r\n            <span style={{ fontSize: '0.6rem' }}>\r\n                Seinfra, Governo de Minas Gerais. Desenvolvido por Sandro Veríssimo, © 2019.\r\n            </span>\r\n        </footer>\r\n    ) */\r\n}\r\n\r\nexport default Footer;","import React from 'react'\r\nimport { Tabs, Tab } from '@material-ui/core'\r\n\r\nexport default ({items, tab, changeTab}) =>\r\n\r\n    <div className='tabMenu'> \r\n        <Tabs value={tab}\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n            centered \r\n            onChange={changeTab}>\r\n            {items.map((item, i)=> <Tab key={i} label={item} />)}\r\n        </Tabs>\r\n    </div>\r\n\r\n\r\n","export const delegatario = [[\r\n    {\r\n        field: 'empresa',\r\n        label: 'Delegatário',\r\n        width: '120mm',\r\n        left: '50mm'\r\n    },\r\n    {\r\n        type: 'date',\r\n        field: 'vencimentoContrato',\r\n        label: 'Validade do Contrato',\r\n        width: '36mm',\r\n        left: '5mm'\r\n    },\r\n]]\r\n\r\nexport const caracteristicas = [\r\n    [\r\n        {\r\n            field: 'placa',\r\n            label: 'Placa',\r\n            width: '25mm',\r\n            left: '8mm'\r\n        },\r\n        {\r\n            field: 'renavam',\r\n            label: 'Renavam',\r\n            width: '42mm',\r\n            left: '14mm'\r\n        },\r\n        {\r\n            field: 'poltronas',\r\n            label: 'Poltronas',\r\n            width: '16mm',\r\n            left: '2mm'\r\n        },\r\n        {\r\n            field: 'piquesPoltrona',\r\n            label: 'Piques poltrona',\r\n            width: '19mm'\r\n        },\r\n        {\r\n            field: 'nChassi',\r\n            label: 'Número do Chassi',\r\n            width: '50mm',\r\n            left: '15mm'\r\n        },\r\n\r\n    ],\r\n    [\r\n        {\r\n            field: 'marcaChassi',\r\n            label: 'Marca do Chassi',\r\n            width: '49mm',\r\n            left: '15mm'\r\n        },\r\n        {\r\n            field: 'modeloChassi',\r\n            label: 'Modelo do Chassi',\r\n            width: '49mm',\r\n            left: '15mm'\r\n        },\r\n        {\r\n            field: 'anoChassi',\r\n            label: 'Ano do chassi',\r\n        },\r\n        {\r\n            field: 'distanciaMinima',\r\n            label: 'Distância Mínima (cm)',\r\n        },\r\n        {\r\n            field: 'distanciaMaxima',\r\n            label: 'Distância Máxima (cm)'\r\n        }\r\n    ],\r\n    [\r\n        {\r\n            field: 'marcaCarroceria',\r\n            label: 'Marca da Carroceria',\r\n            width: '49mm',\r\n            left: '15mm'\r\n        },\r\n        {\r\n            field: 'modeloCarroceria',\r\n            label: 'Modelo da Carroceria',\r\n            width: '49mm',\r\n            left: '15mm'\r\n        },\r\n        {\r\n            field: 'anoCarroceria',\r\n            label: 'Ano da carroceria',\r\n        },\r\n        {\r\n            field: 'cores',\r\n            label: 'Cores',\r\n            width: '45mm',\r\n            left: '15mm'\r\n        }]\r\n]\r\n\r\nexport const seguro = [[\r\n    {\r\n        field: 'seguradora',\r\n        label: 'Seguradora',\r\n        width: '75mm',\r\n        left: '27.5mm'\r\n    },\r\n    {\r\n        field: 'apolice',\r\n        label: 'Apólice',\r\n        width: '35mm',\r\n        left: '13mm'\r\n    },\r\n    {\r\n        type: 'date',\r\n        field: 'dataEmissao',\r\n        label: 'Data de Emissão',\r\n        width: '25mm',\r\n        left: '5mm'\r\n    },\r\n    {\r\n        type: 'date',\r\n        field: 'vencimento',\r\n        label: 'Vencimento',\r\n        width: '25mm',\r\n        left: '5mm'\r\n    }]]\r\n\r\nexport const pesagem = [[\r\n    {\r\n        field: 'eixos',\r\n        label: 'Nº Eixos',\r\n        width: '15mm',\r\n        left: '2mm'\r\n    },\r\n    {\r\n        field: 'pbt',\r\n        label: 'Peso Bruto Total',\r\n        width: '25mm',\r\n        left: '5mm'\r\n    },\r\n    {\r\n        field: 'pesoDianteiro',\r\n        label: 'Peso Dianteiro (kg)',\r\n        width: '28mm',\r\n        left: '4mm'\r\n    },\r\n    {\r\n        field: 'pesoTraseiro',\r\n        label: 'Peso Traseiro (kg)',\r\n        width: '28mm',\r\n        left: '4mm'\r\n    },\r\n    {\r\n        field: 'pbt',\r\n        label: 'Peso Bruto Total',\r\n        width: '25mm',\r\n        left: '5mm'\r\n    },\r\n    {\r\n        field: 'pesoPassageiros',\r\n        label: 'Passag/Bagagem',\r\n        width: '25mm',\r\n        left: '3mm'\r\n    },\r\n]]\r\n\r\n\r\nexport const informacoesGerais = [[\r\n    {\r\n        type: 'date',\r\n        field: 'dataRegistro',\r\n        label: 'Data de Registro',\r\n        width: '35mm',\r\n        left: '9mm'\r\n    },\r\n    {\r\n        field: 'dataExpedicao',\r\n        label: 'Data de expedição',\r\n        width: '35mm',\r\n        left: '9mm'\r\n    },\r\n    {\r\n        field: 'utilizacao',\r\n        label: 'Utilização',\r\n        width: '35mm',\r\n        left: '9mm'\r\n    },\r\n    {\r\n        field: 'equipamentosId',\r\n        label: 'Acessórios',\r\n        width: '65mm',\r\n    }\r\n]]\r\n\r\nexport const other = [[\r\n    {\r\n        field: 'compartilhado',\r\n        label: 'Empresas autorizadas a compartilhar',\r\n        width: '120mm',\r\n        left: '20mm'\r\n    },\r\n    {\r\n        field: 'observacoes',\r\n        label: 'Observações',\r\n        width: '80mm',\r\n    }\r\n]]","import React from 'react'\r\n\r\nconst CertificateHeader = ({ nomes }) => {\r\n\r\n    const { secretaria, subsecretaria, superintendencia } = nomes\r\n    return (\r\n        <>\r\n            <div className=\"certHeader__container\">\r\n                <div className=\"certHeader__brasao\">\r\n                    <img src=\"/images/brasao.png\" alt=\"Brasão de Minas Gerais\" className='certHeader__img' />\r\n                </div>\r\n                <div className=\"certHeader__text\">\r\n                    <p>{secretaria}</p>\r\n                    <p>{subsecretaria}</p>\r\n                    <p>{superintendencia}</p>\r\n                    <h2>Certificado de Registro e Seguro</h2>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CertificateHeader ","import React, { Fragment } from 'react'\r\nimport moment from 'moment'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport PrintTwoToneIcon from '@material-ui/icons/PrintTwoTone';\r\n\r\nimport './certificate.scss'\r\nimport CertificateHeader from './CertificateHeader';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n    textField: {\r\n        paddingRight: '25px',\r\n        fontSize: '0.8rem',\r\n        fontColor: '#bbb',\r\n        textAlign: 'center',\r\n    }\r\n}))\r\n\r\nconst CertificateTemplate = ({ nomes, checkMulti, redirect, carac, delega, seg, peso, info, obs }) => {\r\n\r\n    const\r\n        classes = useStyles(),\r\n        { textField } = classes\r\n\r\n    const ultimateForm = [\r\n        { title: 'Delegatário', form: delega },\r\n        { title: 'Características do Veículo', form: carac },\r\n        { title: 'Seguro', form: seg },\r\n        { title: 'Pesagem', form: peso },\r\n        { title: 'Informações gerais', form: info },\r\n        { title: 'Outras informações', form: obs }\r\n    ]\r\n    return (\r\n        <Fragment>\r\n            <div id='pdfPage' className='A4'>\r\n                <header className='header'>\r\n                    <CertificateHeader nomes={nomes} />\r\n                </header>\r\n\r\n                {ultimateForm.map(({ title, form }, y) =>\r\n                    <section className={title !== 'Delegatário' ? 'box' : 'firstBox'} key={y}>\r\n                        {title !== 'Delegatário' && <span className='boxTitle'>{title}</span>}\r\n                        {form.map((line, i) =>\r\n                            <div key={i} className={title !== 'Delegatário' ? 'divLine' : 'firstDivLine'}>\r\n                                {line.map((el, k) =>\r\n                                    <TextField\r\n                                        disabled\r\n                                        key={k}\r\n                                        name={el.field}\r\n                                        label={el.label}\r\n                                        className={textField}\r\n                                        multiline={el.field === 'equipamentosId' || (el.field === 'observacoes' && el.value && el.value.length > 50) ? true : false}\r\n                                        rows={\r\n                                            el.value && el.value.length < 86 ? '2' :\r\n                                                el.value && el.value.length < 140 ? '3' : '4'\r\n                                        }\r\n                                        variant={el.field === 'equipamentosId' || (el.field === 'observacoes' && el.value && el.value.length > 50) ? 'outlined' : 'standard'}\r\n                                        value={\r\n                                            el.type === 'date' ? moment(el.value).format('DD-MM-YYYY') :\r\n                                                el.field === 'dataExpedicao' ? moment().format('DD-MM-YYYY') :\r\n                                                    el.value || ''\r\n                                        }\r\n                                        inputProps={{\r\n                                            className: checkMulti(el.field),\r\n                                            style: {\r\n                                                width: el.width || '18mm',\r\n                                                fontSize: '2.7mm',\r\n                                                padding: '1px 0',\r\n                                                margin: '0',\r\n                                                flex: '1',\r\n                                                color: '#000'\r\n                                            }\r\n                                        }}\r\n                                        InputProps={{ style: { padding: el.field === 'equipamentosId' || (el.field === 'observacoes' && el.value && el.value.length > 50) ? '1mm' : '' } }}\r\n                                        InputLabelProps={{\r\n                                            shrink: true,\r\n                                            style: {\r\n                                                fontSize: '13px',\r\n                                                textAlign: 'center !important',\r\n                                                left: el.left || '0',\r\n                                                color: '#000'\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </section>\r\n                )}\r\n                <footer className='certFooter'>\r\n                    <h1 className=\"certFooter__title\">\r\n                        PORTE OBRIGATÓRIO\r\n                    </h1>\r\n                    <p className=\"certFooter__text\">\r\n                        Este certificado pode ser verificado em <span className='link' onClick={() => redirect()}> http://www.cadti.mg.gov.br </span>\r\n                    </p>\r\n                </footer>\r\n            </div>\r\n            <button title='Imprimir / salvar PDF' className='noprint printButton' onClick={() => window.print()}>\r\n                <PrintTwoToneIcon style={{\r\n                    cursor: 'pointer',\r\n                    color: 'rgb(161, 161, 180)',\r\n                    fontSize: '40pt',\r\n                }} /></button>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default CertificateTemplate\r\n","import React, { useState, useEffect } from 'react'\r\nimport { delegatario, caracteristicas, seguro, pesagem, informacoesGerais, other } from '../Forms/certificate'\r\nimport CertificateTemplate from './CertificateTemplate'\r\n\r\nexport default function PdfCertificate() {\r\n\r\n    const\r\n        [vehicle, setVehicle] = useState({}),\r\n        [names, setNames] = useState({})\r\n\r\n    useEffect(() => {\r\n        async function setData() {\r\n            const\r\n                data = JSON.parse(localStorage.getItem('vehicle')),\r\n                nomes = JSON.parse(localStorage.getItem('nomes'))\r\n\r\n            let menus = document.querySelectorAll('.MuiToolbar-root')\r\n            menus.forEach(m => m.style.display = 'none')\r\n\r\n            await setVehicle(data)\r\n            if (nomes)\r\n                await setNames(nomes)\r\n\r\n            setTimeout(() => {\r\n                if (data) window.print()\r\n            }, 500);\r\n        }\r\n        setData()\r\n        localStorage.removeItem('vehicle')\r\n    }, [])\r\n\r\n    let carac = caracteristicas,\r\n        delega = delegatario,\r\n        seg = seguro,\r\n        peso = pesagem,\r\n        info = informacoesGerais,\r\n        obs = other,\r\n        object = {}\r\n\r\n    const formArray = [carac, delega, seg, peso, info, obs]\r\n\r\n    if (vehicle)\r\n        formArray.forEach(form => {\r\n            Object.entries(vehicle).forEach(([key, value]) => {\r\n                form.forEach((line, i) => {\r\n                    line.forEach((obj, k) => {\r\n                        if (obj.field === key) {\r\n                            object = Object.assign(obj, { value })\r\n                            form[i][k] = object\r\n                            object = {}\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        })\r\n    const checkMulti = field => {\r\n        if (field === 'equipamentosId' || field === 'equipamentosId') return\r\n        else return 'certificate'\r\n    }\r\n    const redirect = () => {\r\n        let menus = document.querySelectorAll('.MuiToolbar-root')\r\n        menus.forEach(m => m.style.display = 'none')\r\n        const url = window.location.origin\r\n        window.location.href = url;\r\n    }\r\n\r\n    if (!vehicle) {\r\n        const url = window.location.origin\r\n        window.location.replace(url)\r\n        return null\r\n    }\r\n    return (\r\n        <CertificateTemplate\r\n            nomes={names}\r\n            checkMulti={checkMulti}\r\n            redirect={redirect}\r\n            carac={carac}\r\n            delega={delega}\r\n            seg={seg}\r\n            peso={peso}\r\n            info={info}\r\n            obs={obs}\r\n        />\r\n    )\r\n}","const formatFileSize = (bytes) => {\r\n\r\n    if (bytes > 1024 && bytes < 1048576) {\r\n        return Math.round(bytes / 1024) + ' KB'\r\n\r\n    } else if (bytes >= 1048576 && bytes < (1048576 * 1024)) {\r\n        return ((bytes / 1024) / 1024).toFixed(2) + ' MB'\r\n    } else {\r\n        return bytes + ' bytes'\r\n    }\r\n}\r\n\r\nexport default formatFileSize","import React from 'react';\r\n\r\nimport { formatDate } from '../Utils/formatValues'\r\nimport formatFileSize from '../Utils/formatFileSize'\r\nimport download from '../Utils/downloadFile'\r\n\r\nimport ClosePopUpButton from './ClosePopUpButton'\r\nimport { cadVehicleFiles } from '../Forms/cadVehicleFiles'\r\nimport { empresaFiles } from '../Forms/empresaFiles'\r\n\r\nconst divRow = {\r\n    marginBottom: 0,\r\n    display: 'grid',\r\n    grid: '50px / 4% 40% 25% 25%',\r\n    width: '99%',\r\n    margin: 'auto',\r\n    padding: '10px 0 0 0',\r\n    justifyItems: 'auto'\r\n}\r\n\r\nconst ShowFiles = ({ filesCollection, close, typeId, empresas, filesIds, razaoSocial }) => {\r\n\r\n    let files = [],\r\n        collection = 'empresaDocs', fileLabels = [...empresaFiles]\r\n\r\n    switch (typeId) {\r\n        case 'veiculoId':\r\n            collection = 'vehicleDocs'\r\n            fileLabels = [...cadVehicleFiles]\r\n            if (!fileLabels.find(f => f.name === 'transferenciaDoc')) fileLabels.push({ title: 'Documento de Transferência', name: 'transferenciaDoc' })\r\n            if (!fileLabels.find(f => f.name === 'newPlateDoc')) fileLabels.push({ title: 'CRLV com nova placa', name: 'newPlateDoc' })\r\n            if (!fileLabels.find(f => f.name === 'apoliceDoc')) fileLabels.push({ title: 'Apólice de seguro', name: 'apoliceDoc' })\r\n            if (!fileLabels.find(f => f.name === 'laudoDoc')) fileLabels.push({ title: 'Laudo de segurança veicular', name: 'laudoDoc' })\r\n            break;\r\n        default: void 0\r\n    }\r\n\r\n    //Achar e filtrar na coleção de arquivos do MongoDB qual(is) cujo(s) id está na array filesIds\r\n    if (filesIds)\r\n        filesCollection = filesCollection.filter(f => filesIds.indexOf(f.id) !== -1)\r\n\r\n    if (filesCollection && filesCollection[0]) {\r\n        filesCollection.forEach(obj => {\r\n            fileLabels.forEach(o => {\r\n                if (obj.metadata && o.name === obj.metadata.fieldName)\r\n                    files.push({ ...obj, label: o.title })\r\n            })\r\n        })\r\n    }\r\n\r\n    const getLabel = file => {\r\n        const { metadata, label } = file\r\n\r\n        switch (metadata.fieldName) {\r\n            case 'procuracao':\r\n                if (razaoSocial)\r\n                    return label + ' - ' + razaoSocial\r\n                const emp = empresas.find(e => e.codigoEmpresa === Number(metadata.empresaId))\r\n                return label + ' - ' + emp?.razaoSocial || ''\r\n\r\n            case 'apoliceDoc':\r\n                if (metadata.apolice)\r\n                    return label + ' número ' + metadata.apolice\r\n                else\r\n                    return label\r\n\r\n            case 'altContratoDoc':\r\n                if (metadata.numeroAlteracao)\r\n                    return `${metadata.numeroAlteracao}ª ` + label\r\n                else\r\n                    return label\r\n\r\n            default:\r\n                return label\r\n        }\r\n    }\r\n    const header = ['Arquivo', 'Data de Upload', 'Tamanho']\r\n\r\n    if (files[0]) {\r\n        return (\r\n            <div className={filesIds ? '' : 'popUpWindow'}>\r\n                <h5>\r\n                    <img alt=\"\" src=\"/images/folderIcon2.jpg\" style={{ paddingLeft: '20px', marginRight: '20px' }} /> Arquivos\r\n                </h5>\r\n\r\n                <hr style={{ marginBottom: '5px' }} />\r\n                <div style={divRow}>\r\n                    <div>\r\n                        <img alt=\"\" src=\"/images/multipleFiles2.png\" height='50%' />\r\n                    </div>\r\n                    {header.map((title, i) =>\r\n                        <div key={i}>\r\n                            <span style={{ fontSize: '1.2em', fontWeight: 500 }}>{title}</span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <hr style={{ margin: '0 0 20px 0' }} />\r\n                {\r\n                    files.map((file, index) =>\r\n                        <div key={index}>\r\n                            <div style={divRow}>\r\n                                <div className=\"col s1\">\r\n                                    <img alt=\"\" src=\"/images/genericFile.png\" />\r\n                                </div>\r\n                                <div className=\"col s11\">\r\n                                    <span\r\n                                        style={{ textDecoration: 'underline', cursor: 'pointer', color: 'blue' }}\r\n                                        onClick={() => download(file.id, file.filename, collection, file.metadata.fieldName)}>\r\n                                        {getLabel(file)}\r\n                                    </span>\r\n                                </div>\r\n\r\n                                <div className=\"col s3\">\r\n                                    {formatDate(file.uploadDate, true)}\r\n                                </div>\r\n                                <div className=\"col s3\">\r\n                                    {formatFileSize(file.length)}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                <ClosePopUpButton close={close} />\r\n            </div>\r\n        )\r\n    }\r\n    else return null\r\n}\r\n\r\nexport default ShowFiles;","import React, { Component, Fragment } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\nimport moment from 'moment'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\nimport { connect } from 'react-redux'\r\nimport { updateCollection } from '../Store/dataActions'\r\n\r\nimport ConsultasTemplate from './ConsultasTemplate'\r\nimport { TabMenu } from '../Layouts'\r\n\r\nimport Certificate from '../Veiculos/Certificate'\r\nimport ShowDetails from '../Reusable Components/ShowDetails'\r\nimport ShowFiles from '../Reusable Components/ShowFiles'\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\n\r\nconst format = {\r\n    top: '5%',\r\n    left: '10%',\r\n    right: '10%'\r\n}\r\n\r\nclass ConsultasContainer extends Component {\r\n\r\n    constructor() {\r\n        super()\r\n        this.escFunction = (e) => {\r\n            if (e.keyCode === 27) {\r\n                if (this.state.showDetails) this.showDetails()\r\n                if (this.state.showFiles) this.closeFiles()\r\n                if (this.state.showCertificate) this.closeCertificate()\r\n            }\r\n        }\r\n    }\r\n\r\n    state = {\r\n        tab: 0,\r\n        items: ['Empresas', 'Sócios', 'Procuradores', 'Veículos', 'Seguros'],\r\n        tablePKs: ['codigo_empresa', 'socio_id', 'procurador_id', 'veiculo_id', 'id'],\r\n        dbTables: ['empresas', 'socios', 'procuradores', 'veiculos', 'seguros'],\r\n        options: ['empresas', 'socios', 'procuradores', 'veiculos', 'seguros'],\r\n        detailsTitle: ['Empresa', 'Sócio', 'Procurador', 'Placa', 'Apólice'],\r\n        detailsHeader: ['razaoSocial', 'nomeSocio', 'nomeProcurador', 'placa', 'apolice'],\r\n        empresas: [],\r\n        seguros: [],\r\n        razaoSocial: '',\r\n        showDetails: false,\r\n        showFiles: false,\r\n        openDialog: false,\r\n        filesCollection: [],\r\n        elementDetails: '',\r\n        vehicleDocs: [],\r\n        showCertificate: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.addEventListener('keydown', this.escFunction, false)\r\n    }\r\n\r\n    componentWillUnmount() { this.setState({}) }\r\n\r\n    changeTab = async (e, value) => {\r\n        await this.setState({ tab: value })\r\n        return\r\n    }\r\n\r\n    showDetails = async (e, elementDetails) => {\r\n        const\r\n            { redux } = this.props,\r\n            { options, tab, tablePKs } = this.state,\r\n            primaryKeys = tablePKs.map(pk => humps.camelize(pk))\r\n\r\n        let updatedElement\r\n\r\n        if (elementDetails) updatedElement = redux[options[tab]].find(e => e[primaryKeys[tab]] === elementDetails[primaryKeys[tab]])\r\n\r\n        if (elementDetails !== undefined && updatedElement) {\r\n            await this.setState({ showDetails: !this.state.showDetails, elementDetails: updatedElement })\r\n            void 0\r\n        }\r\n        else this.setState({ showDetails: !this.state.showDetails, elementDetails: undefined })\r\n    }\r\n\r\n    closeFiles = () => {\r\n        this.setState({ showFiles: !this.state.showFiles })\r\n    }\r\n\r\n    showFiles = id => {\r\n        const\r\n            { tab } = this.state,\r\n            { veiculos, socios, empresaDocs, vehicleDocs } = this.props.redux\r\n        let\r\n            selectedFiles,\r\n            typeId\r\n\r\n        switch (tab) {\r\n            case 0:\r\n                selectedFiles = empresaDocs.filter(f => f.metadata.empresaId === id && f.metadata?.tempFile === false)\r\n                typeId = 'empresaId'\r\n                break\r\n\r\n            case 1:\r\n                selectedFiles = empresaDocs.filter(f => f.metadata.empresaId === id)\r\n                const socio = socios.find(v => v.socioId === id)\r\n\r\n                if (socio) {\r\n                    let sociosArray = []\r\n                    selectedFiles = empresaDocs\r\n                        .filter(f => f.metadata.empresaId === socio.codigoEmpresa)\r\n                        .forEach(f => {\r\n                            if (f.metadata.socios && f.metadata.socios.includes(id))\r\n                                sociosArray.push(f)\r\n                        })\r\n                    selectedFiles = sociosArray\r\n                }\r\n                break\r\n\r\n            case 2:\r\n                typeId = 'procuracaoId'\r\n                let filesToReturn = []\r\n\r\n                empresaDocs.forEach(f => {\r\n                    if (f?.metadata?.fieldName === 'procuracao') {\r\n                        if (f?.metadata?.procuradores)\r\n                            f.metadata.procuradores.forEach(procId => {\r\n                                if (procId === id) filesToReturn.push(f)\r\n                            })\r\n                    }\r\n                })\r\n                selectedFiles = filesToReturn\r\n                break\r\n\r\n            case 3:\r\n                typeId = 'veiculoId'\r\n                selectedFiles = vehicleDocs.filter(f => f.metadata.veiculoId === id)\r\n                const vehicle = veiculos.find(v => v.veiculoId === id)\r\n                if (vehicle) {\r\n                    const seguro = empresaDocs.find(f => f?.metadata?.apolice === vehicle?.apolice?.toString())\r\n                    if (seguro) selectedFiles.push(seguro)\r\n                }\r\n                break\r\n\r\n            case 4:\r\n                selectedFiles = empresaDocs.filter(f => f.metadata.apolice === id)\r\n                break\r\n            default: void 0\r\n        }\r\n\r\n        selectedFiles = selectedFiles.filter(file => file?.metadata?.tempFile === false)\r\n\r\n        if (selectedFiles[0]) {\r\n            selectedFiles = selectedFiles\r\n                .sort((a, b) => new Date(a['uploadDate']) - new Date(b['uploadDate']))\r\n                .reverse()\r\n            this.setState({ filesCollection: selectedFiles, showFiles: true, typeId, selectedElement: id })\r\n\r\n        } else {\r\n            this.setState({ alertType: 'filesNotFound', openAlertDialog: true, subject: typeId })\r\n            this.setState({ filesCollection: [] })\r\n        }\r\n    }\r\n\r\n    deleteHandler = data => {\r\n        const { dbTables, tablePKs, tab } = this.state,\r\n            table = dbTables[tab],\r\n            tablePK = tablePKs[tab],\r\n            itemId = humps.camelize(tablePK)\r\n\r\n        axios.delete(`/api/delete?table=${table}&tablePK=${tablePK}&id=${data[itemId]}`)\r\n            .then(r => console.log(r.data))\r\n    }\r\n\r\n    showCertificate = async vehicle => {\r\n\r\n        const\r\n            { laudos, parametros } = this.props.redux,\r\n            { veiculoId, anoCarroceria, situacao, vencimento, vencimentoContrato } = vehicle,\r\n            seguroVencido = moment(vencimento).isBefore(),\r\n            contratoVencido = moment(vencimentoContrato).isBefore(),\r\n            currentYear = new Date().getFullYear(),\r\n            isOld = currentYear - anoCarroceria >= 15\r\n\r\n        if (isOld) {\r\n            const hasLaudo = laudos.find(l => l.veiculoId === veiculoId),\r\n                validLaudo = moment(hasLaudo?.validade).isAfter(moment())\r\n\r\n            if (!validLaudo) {\r\n                await this.setState({\r\n                    openAlertDialog: true,\r\n                    customTitle: 'Certificado de segurança veicular pendente.',\r\n                    customMessage: 'O laudo de segurança veicular não está registrado no sistema ou se encontra vencido. Para regularizar, acesse Veículos -> Laudos.'\r\n                })\r\n                return\r\n            }\r\n        }\r\n\r\n        if (situacao !== 'Ativo') {\r\n            await this.setState({ alertType: 'veiculoPendente', openAlertDialog: true })\r\n            return\r\n        }\r\n        if (seguroVencido) {\r\n            await this.setState({ alertType: 'seguroVencido', openAlertDialog: true })\r\n            return\r\n        }\r\n        if (contratoVencido) {\r\n            await this.setState({ alertType: 'contratoVencido', openAlertDialog: true })\r\n            return\r\n        }\r\n\r\n        const url = window.location.origin + '/crv'\r\n        localStorage.setItem('vehicle', JSON.stringify(vehicle))\r\n\r\n        //Envia os nomes da Secretaria, sub, etc para o certificado com base no DB>GlobalState\r\n        if (parametros && parametros[0]) {\r\n            const\r\n                { nomes } = parametros[0]\r\n            localStorage.setItem('nomes', JSON.stringify(nomes))\r\n\r\n        }\r\n        window.open(url, 'noopener')\r\n    }\r\n\r\n    toggleDialog = () => this.setState({ openDialog: !this.state.openDialog })\r\n    closeAlert = () => this.setState({ openAlertDialog: !this.state.openAlertDialog })\r\n    closeCertificate = () => this.setState({ showCertificate: !this.state.showCertificate })\r\n\r\n    render() {\r\n        const\r\n            { tab, options, items, showDetails, elementDetails, showFiles, selectedElement, filesCollection, typeId, tablePKs, showCertificate, certified,\r\n                detailsTitle, detailsHeader, openAlertDialog, alertType, customTitle, customMessage } = this.state,\r\n            { redux } = this.props,\r\n            { empresas, procuracoes, procuradores, empresaDocs, altContrato } = redux,\r\n            primaryKeys = tablePKs.map(pk => humps.camelize(pk))\r\n\r\n        let updatedElement\r\n        if (elementDetails && showDetails) updatedElement = redux[options[tab]].find(e => e[primaryKeys[tab]] === elementDetails[primaryKeys[tab]])\r\n\r\n        return <Fragment>\r\n            <TabMenu items={items}\r\n                tab={tab}\r\n                changeTab={this.changeTab} />\r\n            <ConsultasTemplate\r\n                tab={tab}\r\n                items={items}\r\n                collection={this.props.redux[options[tab]]}\r\n                showDetails={this.showDetails}\r\n                showFiles={this.showFiles}\r\n                del={this.deleteHandler}\r\n                showCertificate={this.showCertificate}\r\n            />\r\n            {showDetails &&\r\n                <ShowDetails\r\n                    close={this.showDetails}\r\n                    data={updatedElement || elementDetails}\r\n                    tab={tab}\r\n                    title={detailsTitle[tab]}\r\n                    header={detailsHeader[tab]}\r\n                    empresas={empresas}\r\n                    procuracoes={procuracoes}\r\n                    procuradores={procuradores}\r\n                    empresaDocs={empresaDocs}\r\n                    altContrato={altContrato}\r\n                />\r\n            }\r\n            {\r\n                showCertificate &&\r\n                <Certificate vehicle={certified} />\r\n            }\r\n            {showFiles &&\r\n                <ShowFiles\r\n                    tab={tab}\r\n                    elementId={selectedElement}\r\n                    filesCollection={filesCollection}\r\n                    close={this.closeFiles}\r\n                    format={format}\r\n                    typeId={typeId}\r\n                    empresas={empresas}\r\n                    empresaDocs={empresaDocs}\r\n                />\r\n            }\r\n            {openAlertDialog &&\r\n                <AlertDialog\r\n                    open={openAlertDialog} close={this.closeAlert} alertType={alertType} tab={tab} customMessage={customMessage} customTitle={customTitle}\r\n                />}\r\n        </Fragment>\r\n    }\r\n}\r\n\r\nconst collections = ['veiculos', 'empresas', 'socios', 'procuradores', 'seguros', 'seguradoras', 'procuracoes',\r\n    'getFiles/vehicleDocs', 'getFiles/empresaDocs', 'equipamentos', 'acessibilidade', 'laudos', 'altContrato', 'parametros']\r\n\r\nexport default connect(null, { updateCollection })(StoreHOC(collections, ConsultasContainer))","import React from 'react'\r\n\r\nimport TextInput from '../Reusable Components/TextInput'\r\n\r\nimport { empresasForm } from '../Forms/empresasForm'\r\nimport FormSubtitle from '../Reusable Components/FormSubtiltle'\r\nimport DragAndDrop from '../Reusable Components/DragAndDrop'\r\n\r\nexport default function ({ handleInput, handleBlur, data, handleFiles, removeFile }) {\r\n    const { activeStep, stepTitles, dropDisplay, contratoSocial, fileToRemove } = data\r\n\r\n    return (\r\n        <div className=\"flex paper\">\r\n            <FormSubtitle subtitle={stepTitles[activeStep]} />\r\n            <main>\r\n                <TextInput\r\n                    form={empresasForm}\r\n                    data={data}\r\n                    handleBlur={handleBlur}\r\n                    handleInput={handleInput}\r\n                />\r\n                <div className='flex center'>\r\n                    <DragAndDrop\r\n                        name='contratoSocial'\r\n                        formData={contratoSocial}\r\n                        dropDisplay={dropDisplay}\r\n                        handleFiles={handleFiles}\r\n                        removeFile={removeFile}\r\n                        fileToRemove={fileToRemove}\r\n                        style={{ width: '40%' }}\r\n                    />\r\n                </div>\r\n            </main>\r\n        </div>\r\n    )\r\n}","import { cpf, email, phone } from './commonFields'\r\n\r\nconst width = 195\r\n\r\nexport const sociosForm = [{\r\n    field: 'nomeSocio',\r\n    label: 'Nome do Sócio',\r\n    maxLength: 90,\r\n    width\r\n},\r\n{\r\n    ...cpf,\r\n    width\r\n},\r\n{\r\n    ...phone,\r\n    field: 'telSocio',\r\n    width\r\n},\r\n{\r\n    ...email,\r\n    field: 'emailSocio',\r\n    width\r\n},\r\n{\r\n    field: 'share',\r\n    label: 'Participação Societária (%)',\r\n    /* pattern: /(^100(,0{1,2})?$)|(^([1-9]([0-9])?|0)(,[0-9]{1,2})?$)/,\r\n    maxLength: 5, */\r\n    type: 'number',\r\n    max: 100,\r\n    width\r\n}\r\n]\r\n\r\n","import React, { Fragment } from 'react'\r\n\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport FormSubtiltle from '../Reusable Components/FormSubtiltle'\r\nimport ShowLocalFiles from '../Reusable Components/ShowLocalFiles';\r\nimport StepperButtons from '../Reusable Components/StepperButtons';\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nimport { sociosForm } from '../Forms/dadosSociosForm'\r\nimport { empresaFiles } from '../Forms/empresaFiles';\r\nimport TextInput from '../Reusable Components/TextInput'\r\n//import DragAndDrop from '../Reusable Components/DragAndDrop'\r\nimport SaveIcon from '@material-ui/icons/Save'\r\nimport { errorHandler, helper } from '../Utils/checkInputErrors';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    list: {\r\n        margin: theme.spacing(1),\r\n        width: 180,\r\n        fontSize: '0.7rem',\r\n        fontColor: '#999',\r\n        textAlign: 'center',\r\n    },\r\n    iconButton: {\r\n        marginTop: '17px',\r\n        padding: '6px 0px'\r\n    }\r\n}))\r\n\r\nexport default function ({ socios, empresas, handleInput, handleBlur, data, addSocio, enableEdit, handleEdit, removeSocio, handleSubmit, setShowPendencias }) {\r\n\r\n    const\r\n        { activeStep, stepTitles, filteredSocios, contratoSocial, selectedEmpresa, demand, showPendencias, info } = data,\r\n        classes = useStyles(), { iconButton, list } = classes,\r\n        contratoSocialForm = [empresaFiles[0]]\r\n\r\n    let standAlone = true\r\n    if (stepTitles) standAlone = false\r\n\r\n    return (\r\n        <>\r\n            <main className=\"flex center\">\r\n                {\r\n                    standAlone &&\r\n                    <header style={{ marginBottom: '10px', width: '100%' }}>\r\n                        <SelectEmpresa\r\n                            data={data}\r\n                            empresas={empresas}\r\n                            handleInput={handleInput}\r\n                            handleBlur={handleBlur}\r\n                        />\r\n                    </header>\r\n                }\r\n                {\r\n                    (selectedEmpresa || !standAlone) &&\r\n                        standAlone ?\r\n                        /*  <div className=\"flexColumn\" style={{ alignItems: 'center' }}>\r\n                             <h6 style={{ fontSize: '14px' }}>Alteração do quadro Societário</h6>\r\n                             <p style={{ fontSize: '12px', color: '#555' }}> Para adicionar um novo sócio, preencha os campos abaixo e clique em \"Adicionar sócio\".</p>\r\n                         </div> */\r\n                        <>\r\n                            <h3>Utilize as opções abaixo para editar dados dos sócios</h3>\r\n                            <br /><br /><br />\r\n                        </>\r\n                        : stepTitles &&\r\n                        <section className=\"flex center paper\">\r\n                            <FormSubtiltle subtitle={stepTitles[activeStep]} />\r\n                            <div className='flex center' style={{ padding: '10px 0', width: '100%' }}>\r\n                                <TextInput\r\n                                    form={sociosForm}\r\n                                    data={data}\r\n                                    handleBlur={handleBlur}\r\n                                    handleInput={handleInput}\r\n                                />\r\n                            </div>\r\n                            <div style={{ margin: '5px 0 7px 84.58%', width: '100%' }}>\r\n                                <Button color='primary' variant='outlined' size='small' onClick={addSocio}>\r\n                                    <AddIcon /> Adicionar sócio\r\n                                        </Button>\r\n                            </div>\r\n                        </section>\r\n                }\r\n            </main>\r\n            {\r\n                selectedEmpresa && filteredSocios.length === 0 &&\r\n                <section>\r\n                    <p>\r\n                        Nenhum sócio cadastrado para {selectedEmpresa.razaoSocial}\r\n                    </p>\r\n                </section>\r\n            }\r\n            {\r\n                socios?.length > 0 &&\r\n                <>\r\n                    <section className=\"flexColumn center paper\">\r\n                        <p> Sócios cadastrados</p>\r\n                        {socios.map((s, i) =>\r\n                            <div key={i}>\r\n                                {sociosForm.map((e, k) =>\r\n                                    <Fragment key={k + 1000}>\r\n                                        <TextField\r\n                                            value={s[e.field] || ''}\r\n                                            name={e.field}\r\n                                            label={e.label}\r\n                                            className={list}\r\n                                            onChange={handleEdit}\r\n                                            error={s.edit ? errorHandler(s[e.field], e) : null}\r\n                                            helperText={s.edit ? helper(s[e.field], e) : null}\r\n                                            type={e?.type}\r\n                                            disabled={e.field === 'share' && standAlone ? true : s.edit ? false : true}\r\n                                            InputLabelProps={\r\n                                                {\r\n                                                    shrink: true,\r\n                                                    style: {\r\n                                                        fontWeight: 600,\r\n                                                        fontFamily: '\\'Segoe UI\\', Tahoma, Geneva, Verdana, sans-serif',\r\n                                                        color: '#888'\r\n                                                    }\r\n                                                }}\r\n                                            inputProps={{\r\n                                                style: {\r\n                                                    fontSize: '13px',\r\n                                                    color: s.edit === true ? '#000'\r\n                                                        : s.status === 'new' ? 'green'\r\n                                                            : s.status === 'modified' ? '#FF2500'\r\n                                                                : s.status === 'deleted' ? 'red'\r\n                                                                    : '#888',\r\n                                                    textDecoration: s.status === 'deleted' && !s.edit ? 'line-through' : ''\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                    </Fragment>\r\n                                )}\r\n                                <Button component='span' className={iconButton} title='editar' onClick={() => enableEdit(i)}>\r\n                                    <EditIcon />\r\n                                </Button>\r\n\r\n                                {!standAlone && <Button className={iconButton}\r\n                                    color={s.status === 'deleted' ? 'primary' : 'secondary'}\r\n                                    title={s.status === 'deleted' ? 'Desfazer exclusão' : 'Remover'}\r\n                                    onClick={() => removeSocio(i)}>\r\n                                    {s.status === 'deleted' ? <i className='material-icons'>undo</i> : <DeleteIcon />}\r\n                                </Button>}\r\n                            </div>\r\n                        )}\r\n                    </section>\r\n                    {\r\n                        standAlone && demand ?\r\n                            <section>\r\n                                {contratoSocial &&\r\n                                    <ShowLocalFiles\r\n                                        demand={demand}\r\n                                        collection='empresaDocs'\r\n                                        demandFiles={[contratoSocial]}\r\n                                        form={contratoSocialForm}\r\n                                    />\r\n                                }\r\n                                <StepperButtons\r\n                                    uniqueStep={true}\r\n                                    declineButtonLabel='Indeferir'\r\n                                    demand={demand}\r\n                                    setShowPendencias={setShowPendencias}\r\n                                    showPendencias={showPendencias}\r\n                                    info={info}\r\n                                    handleSubmit={handleSubmit}\r\n                                    handleInput={handleInput}\r\n                                />\r\n                            </section>\r\n                            :\r\n                            standAlone\r\n                                ?\r\n                                <section>\r\n                                    <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n                                        <Button\r\n                                            size=\"small\"\r\n                                            color=\"primary\"\r\n                                            variant=\"contained\"\r\n                                            style={{ margin: '0px 0 10px 0' }}\r\n                                            onClick={() => handleSubmit()}\r\n                                        >\r\n                                            Enviar <span>&nbsp;&nbsp; </span> <SaveIcon />\r\n                                        </Button>\r\n                                    </div>\r\n                                </section>\r\n                                :\r\n                                null\r\n                    }\r\n                </>\r\n            }\r\n        </>\r\n    )\r\n}","import React, { Fragment } from 'react'\r\n\r\nimport ShowLocalFiles from '../Reusable Components/ShowLocalFiles'\r\n\r\nimport Paper from '@material-ui/core/Paper'\r\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        color: theme.palette.text.secondary,\r\n        width: \"100%\",\r\n        padding: '8px 0 5px 0',\r\n        height: 'auto'\r\n    }\r\n}))\r\n\r\nexport default function EmpresaCadReview({ data, empresasForm, sociosForm, filesForm, files }) {\r\n\r\n    const { socios } = data,\r\n        classes = useStyles(),\r\n        { paper } = classes\r\n\r\n    let empresaDetails = [], obj = {}, filledForm = [], ultimateData\r\n\r\n    empresasForm.forEach(e => {\r\n        if (data.hasOwnProperty([e.field])) {\r\n            Object.assign(obj, { [e.field]: data[e.field] })\r\n            filledForm.push(e)\r\n        }\r\n    })\r\n    empresaDetails.push(obj)\r\n\r\n    ultimateData = [\r\n        { subtitle: 'Detalhes da empresa', form: filledForm, data: empresaDetails },\r\n        { subtitle: 'Informações sobre os sócios', form: sociosForm, data: socios }\r\n    ]\r\n\r\n    return (\r\n        <>\r\n            <Paper className={paper}>\r\n                <div className='divTable'>\r\n                    {\r\n                        ultimateData.map(({ subtitle, form, data }, y) =>\r\n                            <Fragment key={y}>\r\n                                <table style={y === 1 ? { tableLayout: 'fixed' } : {}}>\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th className='tHeader'\r\n                                                colSpan={form.length}>{subtitle}</th>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            {form.map((s, i) => <th key={i}>{s.label}</th>)}\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        {y === 0 && <tr>\r\n                                            {data.map((obj, j) =>\r\n                                                Object.values(obj).map((el, k) =>\r\n                                                    <td className='review' key={k}>\r\n                                                        {el}\r\n                                                    </td>\r\n                                                )\r\n                                            )}\r\n                                        </tr>}\r\n                                        {y !== 0 && data.map((obj, j) =>\r\n                                            <tr key={j}>\r\n                                                {Object.values(obj).map((el, k) =>\r\n                                                    <td className='review' key={k}>\r\n                                                        {el}\r\n                                                    </td>\r\n                                                )}\r\n                                            </tr>\r\n                                        )}\r\n                                    </tbody>\r\n                                </table>\r\n                            </Fragment>\r\n                        )}\r\n                </div>\r\n\r\n                <h3 style={{ margin: '30px 0 0 25px' }}> <FileCopyOutlinedIcon style={{ verticalAlign: 'middle', padding: '0 0 0 8px' }} /> Documentos </h3>\r\n                {files && <ShowLocalFiles form={filesForm} files={files} />}\r\n            </Paper >\r\n        </>\r\n    )\r\n}","import { formatCpf, formatCnpj, formatPhone, formatShare } from './formatValues'\r\n\r\nexport default function valueParser(name, value) {\r\n    let parsed\r\n\r\n    if (name.match('cnpj')) {\r\n        parsed = formatCnpj(value)\r\n        return parsed\r\n    }\r\n    if (name.match('cpf')) {\r\n        parsed = formatCpf(value)\r\n        return parsed\r\n    }\r\n    if (name.match('tel')) {\r\n        parsed = formatPhone(value)\r\n        return parsed\r\n    }\r\n    if (name.match('share')) {\r\n        parsed = formatShare(value)\r\n        return parsed\r\n    }\r\n\r\n    else return value\r\n}\r\n","import React, { Component, Fragment } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport { checkInputErrors } from '../Utils/checkInputErrors'\r\nimport EmpresasTemplate from './EmpresasTemplate'\r\nimport SociosTemplate from './SociosTemplate'\r\nimport EmpresaCadReview from './EmpresaCadReview'\r\n\r\nimport valueParser from '../Utils/valueParser'\r\nimport { empresaFiles } from '../Forms/empresaFiles'\r\nimport { empresasForm } from '../Forms/empresasForm'\r\nimport { sociosForm } from '../Forms/sociosForm'\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\n\r\nimport StepperButtons from '../Reusable Components/StepperButtons'\r\nimport CustomStepper from '../Reusable Components/Stepper'\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\nimport { removeFile as globalRemoveFile, sizeExceedsLimit } from '../Utils/handleFiles'\r\n\r\nclass EmpresasContainer extends Component {\r\n\r\n    constructor() {\r\n        super()\r\n        this.escFunction = (e) => {\r\n            if (e.keyCode === 27) {\r\n                if (this.state.addEquipa) this.handleEquipa()\r\n            }\r\n        }\r\n    }\r\n\r\n    state = {\r\n        activeStep: 0,\r\n        stepTitles: ['Preencha os dados da empresa', 'Informações sobre os sócios',\r\n            'Revisão'],\r\n        steps: ['Dados da Empresa', 'Sócios', 'Revisão'],\r\n        razaoSocial: '',\r\n        toastMsg: 'Empresa cadastrada!',\r\n        confirmToast: false,\r\n        files: [],\r\n        fileNames: [],\r\n        openDialog: false,\r\n        addedSocios: [0],\r\n        totalShare: 0,\r\n        socios: [],\r\n        dropDisplay: 'Clique ou arraste para anexar o contrato social atualizado da empresa',\r\n        showFiles: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.addEventListener('keydown', this.escFunction, false)\r\n        document.querySelector(\"input[name='razaoSocial']\").style.width = '300px'\r\n    }\r\n\r\n    componentWillUnmount() { this.setState({}) }\r\n\r\n    setActiveStep = async action => {\r\n\r\n        const prevActiveStep = this.state.activeStep\r\n        if (action === 'next') this.setState({ activeStep: prevActiveStep + 1 });\r\n        if (action === 'back') this.setState({ activeStep: prevActiveStep - 1 });\r\n        if (action === 'reset') this.setState({ activeStep: 0 })\r\n\r\n        const { errors } = this.state\r\n        if (errors && errors[0]) {\r\n            await this.setState({ ...this.state, ...checkInputErrors('setState') })\r\n            return\r\n        }\r\n    }\r\n\r\n    handleInput = e => {\r\n        const\r\n            { name, value } = e.target,\r\n            parsedValue = valueParser(name, value)\r\n\r\n        this.setState({ [name]: parsedValue })\r\n    }\r\n\r\n    addSocio = async () => {\r\n        let socios = this.state.socios,\r\n            sObject = {},\r\n            invalid = 0,\r\n            totalShare = 0\r\n\r\n        sociosForm.forEach(obj => {\r\n            if (this.state[obj.field] === '' || this.state[obj.field] === undefined) {\r\n                invalid += 1\r\n            }\r\n        })\r\n\r\n        if (invalid === 100) {\r\n            this.setState({ alertType: 'fieldsMissing', openAlertDialog: true })\r\n            return null\r\n        }\r\n        else {\r\n            sociosForm.forEach(obj => {\r\n                Object.assign(sObject, { [obj.field]: this.state[obj.field] })\r\n            })\r\n            socios.push(sObject)\r\n\r\n            socios.forEach(s => {\r\n                totalShare += Number(s.share)\r\n            })\r\n            if (totalShare > 100) {\r\n                socios.pop()\r\n                this.setState({ alertType: 'overShared', openAlertDialog: true })\r\n            }\r\n            else {\r\n                await this.setState({ socios, totalShare })\r\n                sociosForm.forEach(obj => {\r\n                    this.setState({ [obj.field]: '' })\r\n                })\r\n                document.getElementsByName('nomeSocio')[0].focus()\r\n            }\r\n        }\r\n    }\r\n\r\n    enableEdit = index => {\r\n\r\n        let editSocio = this.state.socios\r\n        if (editSocio[index].edit === true) editSocio[index].edit = false\r\n        else {\r\n            editSocio.forEach(s => s.edit = false)\r\n            editSocio[index].edit = true\r\n        }\r\n        this.setState({ socios: editSocio })\r\n    }\r\n\r\n    handleEdit = e => {\r\n        const { name } = e.target, { socios } = this.state\r\n\r\n        let { value } = e.target\r\n        if (name === 'share') value = value.replace(',', '.')\r\n\r\n        let editSocio = socios.filter(s => s.edit === true)[0]\r\n        const index = socios.indexOf(editSocio)\r\n\r\n        editSocio[name] = value\r\n\r\n        let fs = socios\r\n        fs[index] = editSocio\r\n\r\n        this.setState({ filteredSocios: fs })\r\n    }\r\n\r\n    removeSocio = index => {\r\n        let socios = this.state.socios\r\n        socios.splice(index, 1)\r\n        this.setState({ socios })\r\n    }\r\n\r\n    getId = async (name, value, collection, stateId, dbName, dbId, alertLabel) => {\r\n\r\n        const item = collection.filter(el => el[dbName].toLowerCase().match(value.toLowerCase()))\r\n        if (value === '') this.setState({ [name]: '', [stateId]: '' })\r\n        if (item[0]) {\r\n            const nombre = item[0][dbName]\r\n            const id = item[0][dbId]\r\n            if (value !== '') {\r\n                await this.setState({ [name]: nombre, [stateId]: id })\r\n            }\r\n        } else {\r\n            await this.setState({ [name]: '', [stateId]: '' })\r\n            alert(alertLabel + ' não cadastrado')\r\n            document.getElementsByName(name)[0].focus()\r\n        }\r\n    }\r\n\r\n    handleBlur = async e => {\r\n        const { name } = e.target\r\n        let { value } = e.target\r\n\r\n        const errors = checkInputErrors()\r\n        if (errors) this.setState({ errors })\r\n        else this.setState({ errors: undefined })\r\n\r\n        switch (name) {\r\n            case 'cnpj':\r\n                const\r\n                    query = await axios.get(`/api/alreadyExists?table=empresas&column=cnpj&value=${value}`),\r\n                    alreadyExists = query?.data  //Retorna true ou false\r\n\r\n                if (alreadyExists) {\r\n                    const\r\n                        customTitle = 'Empresa já cadastrada.',\r\n                        customMsg = `O CNPJ informado corresponde a uma empresa já está cadastrada no sistema. Para alterar os dados da empresa, vá para Empresas -> Alteração de dados.`\r\n                    this.setState({ cnpj: '', customTitle, customMsg, openAlertDialog: true })\r\n                }\r\n                break;\r\n            case 'share':\r\n                value = value.replace(',', '.')\r\n                if (value > 100) {\r\n                    this.setState({ alertType: 'overShared', openAlertDialog: true })\r\n                }\r\n                else {\r\n                    const totalShare = Number(this.state.totalShare) + Number(value)\r\n                    this.setState({ [name]: value, totalShare })\r\n                }\r\n                break;\r\n            case 'numero':\r\n                if (value && !value.match(/^\\d+$/)) {\r\n                    await this.setState({ numero: '' })\r\n                    this.setState({ alertType: 'numberNotValid', openAlertDialog: true })\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    handleFiles = files => {\r\n        //limit file Size\r\n        if (sizeExceedsLimit(files)) return\r\n\r\n        let formData = new FormData()\r\n        formData.append('contratoSocial', files[0])\r\n        this.setState({ contratoSocial: formData })\r\n    }\r\n\r\n    handleSubmit = async () => {\r\n\r\n        let { socios, contratoSocial } = this.state,\r\n            empresa = {},\r\n            empresaId,\r\n            socioIds\r\n\r\n        empresasForm.forEach(e => {\r\n            if (this.state.hasOwnProperty([e.field])) {\r\n                Object.assign(empresa, { [e.field]: this.state[e.field] })\r\n            }\r\n        })\r\n\r\n        empresa.situacao = 'Ativo'\r\n\r\n        Object.entries(empresa).forEach(([k, v]) => {\r\n            if (!v || v === '') delete empresa[k]\r\n        })\r\n\r\n        socios.forEach(s => {\r\n            delete s.edit\r\n            Object.entries(s).forEach(([k, v]) => {\r\n                if (!v || v === '') delete socios[k]\r\n            })\r\n        })\r\n\r\n        empresa = humps.decamelizeKeys(empresa)\r\n        socios = humps.decamelizeKeys(socios)\r\n\r\n        await axios.post('/api/empresaFullCad', { empresa, socios })\r\n            .then(res => {\r\n                empresaId = res.data.codigo_empresa\r\n                socioIds = res.data.socioIds\r\n            })\r\n\r\n        this.submitFile(empresaId, socioIds, contratoSocial)\r\n        this.toast()\r\n        this.resetState()\r\n    }\r\n\r\n    submitFile = async (empresaId, socioIds, contratoSocial) => {\r\n        if (contratoSocial instanceof FormData) {\r\n            const contratoFile = new FormData()\r\n            let metadata = {\r\n                fieldName: 'contratoSocial',\r\n                empresaId,\r\n                socios: socioIds,\r\n                tempFile: false\r\n            }\r\n\r\n            metadata = JSON.stringify(metadata)\r\n            contratoFile.append('metadata', metadata)\r\n\r\n            for (let pair of contratoSocial.entries()) {\r\n                contratoFile.append(pair[0], pair[1])\r\n            }\r\n\r\n            await axios.post('/api/empresaUpload', contratoFile)\r\n                .then(r => console.log('file ok.'))\r\n        }\r\n    }\r\n\r\n    removeFile = async (name) => {\r\n        const\r\n            { contratoSocial } = this.state,\r\n            newState = globalRemoveFile(name, contratoSocial)\r\n        this.setState({ ...this.state, ...newState })\r\n    }\r\n\r\n    resetState = () => {\r\n        let\r\n            resetEmpresa = {},\r\n            resetSocios = {},\r\n            resetFiles = {}\r\n\r\n        empresasForm.forEach(obj => {\r\n            Object.keys(obj).forEach(key => {\r\n                if (key === 'field' && this.state[obj[key]]) Object.assign(resetEmpresa, { [obj[key]]: undefined })\r\n            })\r\n        })\r\n\r\n        sociosForm.forEach(obj => {\r\n            Object.keys(obj).forEach(key => {\r\n                if (key === 'field' && this.state[obj[key]]) Object.assign(resetSocios, { [obj[key]]: undefined })\r\n            })\r\n        })\r\n\r\n        empresaFiles.forEach(({ name }) => {\r\n            Object.assign(resetFiles, { [name]: undefined })\r\n        })\r\n\r\n        this.setState({\r\n            ...resetEmpresa,\r\n            ...resetSocios,\r\n            ...resetFiles,\r\n            activeStep: 0,\r\n            razaoSocial: '',\r\n            files: [],\r\n            fileNames: [],\r\n            addedSocios: [0],\r\n            totalShare: 0,\r\n            socios: [],\r\n            dropDisplay: 'Clique ou arraste para anexar o contrato social atualizado da empresa',\r\n            showFiles: false\r\n        })\r\n    }\r\n    toast = () => this.setState({ confirmToast: !this.state.confirmToast })\r\n    toggleDialog = () => this.setState({ openDialog: !this.state.openDialog })\r\n    closeAlert = () => this.setState({ openAlertDialog: !this.state.openAlertDialog })\r\n    showFiles = () => this.setState({ showFiles: true })\r\n    closeFiles = () => this.setState({ showFiles: !this.state.showFiles })\r\n\r\n    render() {\r\n\r\n        const { socios, activeStep, confirmToast, toastMsg, steps, openAlertDialog,\r\n            alertType, contratoSocial, customMsg, customTitle } = this.state\r\n\r\n        return <Fragment>\r\n\r\n            <Crumbs links={['Empresas', '/empresas']} text='Cadastro de empresas' />\r\n\r\n            <CustomStepper\r\n                activeStep={activeStep}\r\n                steps={steps}\r\n                setActiveStep={this.setActiveStep}\r\n            />\r\n            {\r\n                activeStep === 0 ?\r\n                    <EmpresasTemplate\r\n                        data={this.state}\r\n                        handleInput={this.handleInput}\r\n                        handleBlur={this.handleBlur}\r\n                        handleFiles={this.handleFiles}\r\n                        removeFile={this.removeFile}\r\n                    />\r\n                    : activeStep === 1 ?\r\n                        <SociosTemplate\r\n                            data={this.state}\r\n                            socios={socios}\r\n                            handleInput={this.handleInput}\r\n                            handleBlur={this.handleBlur}\r\n                            addSocio={this.addSocio}\r\n                            removeSocio={this.removeSocio}\r\n                            handleFiles={this.handleFiles}\r\n                            enableEdit={this.enableEdit}\r\n                            handleEdit={this.handleEdit}\r\n                        />\r\n                        :\r\n                        activeStep === 2 &&\r\n                        <EmpresaCadReview\r\n                            data={this.state}\r\n                            files={contratoSocial}\r\n                            filesForm={empresaFiles}\r\n                            empresasForm={empresasForm}\r\n                            sociosForm={sociosForm}\r\n                        />\r\n            }\r\n            <StepperButtons\r\n                activeStep={activeStep}\r\n                lastStep={steps.length - 1}\r\n                handleSubmit={this.handleSubmit}\r\n                setActiveStep={this.setActiveStep}\r\n            />\r\n            <ReactToast open={confirmToast} close={this.toast} msg={toastMsg} />\r\n            {\r\n                openAlertDialog &&\r\n                <AlertDialog open={openAlertDialog} close={this.closeAlert} alertType={alertType} customMessage={customMsg} customTitle={customTitle} />\r\n            }\r\n        </Fragment>\r\n    }\r\n}\r\n\r\nconst collections = ['empresas']\r\n\r\nexport default (StoreHOC(collections, EmpresasContainer))","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport './empresas.scss'\r\n\r\nconst featuredPosts = [\r\n    {\r\n        title: 'Cadastrar',\r\n        date: '07/Nov',\r\n        description:\r\n            'Cadastrar uma nova empresa no sistema.',\r\n        imageUrl: '/images/addCompany21.png',\r\n        link: '/empresas/cadastro'\r\n    },\r\n    {\r\n        title: 'Alteração do Contrato Social',\r\n        date: '07/Nov',\r\n        description:\r\n            'Alteração de dados da empresa ou contrato social',\r\n        link: '/altContrato',\r\n        imageUrl: '/images/pen2.png'\r\n    },\r\n    {\r\n        title: 'Sócios',\r\n        date: '07/Nov',\r\n        description:\r\n            'Visualizar ou editar dados dos sócios',\r\n        link: '/empresas/socios',\r\n        imageUrl: '/images/socios3.png'\r\n    },\r\n    {\r\n        title: 'Procurações',\r\n        date: '07/Nov',\r\n        description:\r\n            'Cadastrar procurações e procuradores',\r\n        link: '/empresas/procuradores',\r\n        imageUrl: '/images/procuradores31.png'\r\n    },\r\n]\r\n\r\nexport default function () {\r\n\r\n    return (\r\n        <>\r\n            <section className='jumbo'>\r\n                <div>\r\n                    <h1 className='jumbo__title'>\r\n                        Empresas\r\n                    </h1>\r\n                    <p className='jumbo__description'>\r\n                        Selecione uma das opções abaixo.\r\n                    </p>\r\n                </div>\r\n            </section>\r\n\r\n            <main className='cardContainer'>\r\n                {featuredPosts.map(({ link, title, description, imageUrl }, i) => (\r\n                    <Link to={link} style={{ textDecoration: 'none' }} key={i}>\r\n\r\n                        <div className='cardE'>\r\n                            <div className='cardE__text'>\r\n                                <h3>\r\n                                    {title}\r\n                                </h3>\r\n                                <p>\r\n                                    {description}\r\n                                </p>\r\n                            </div>\r\n                            <figure className='cardE__image'>\r\n                                <img src={imageUrl} alt=\"\" />\r\n                            </figure>\r\n                        </div>\r\n                    </Link>\r\n                ))}\r\n            </main>\r\n        </>\r\n    )\r\n}","import React from 'react'\r\n\r\nimport { procuradorForm } from '../Forms/procuradorForm'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\n\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nconst StyledTableCell = withStyles(theme => ({\r\n    head: {\r\n        backgroundColor: '#e1f5fe',\r\n        color: '#00000',\r\n        fontWeight: 600,\r\n        fontSize: 14,\r\n    },\r\n    body: {\r\n        fontSize: 14,\r\n\r\n    },\r\n}))(TableCell);\r\n\r\nconst StyledCell = withStyles(theme => ({\r\n    head: {\r\n        backgroundColor: '#e1f5fe',\r\n        color: '#00000',\r\n    },\r\n    body: {\r\n        fontSize: 13,\r\n\r\n    },\r\n}))(TableCell);\r\n\r\nconst StyledTableRow = withStyles(theme => ({\r\n    root: {\r\n        '&:nth-of-type(odd)': {\r\n            backgroundColor: theme.palette.background.default,\r\n        },\r\n    },\r\n}))(TableRow);\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        flexGrow: '1',\r\n        padding: '1%',\r\n        textAlign: 'center'\r\n    },\r\n    title: {\r\n        marginTop: '2%',\r\n        fontColor: '#000',\r\n        fontSize: '0.9rem',\r\n        backgroundColor: '#B2DCEA',\r\n        textAlign: 'center'\r\n    },\r\n    input: {\r\n        textAlign: 'center'\r\n    },\r\n    paper: {\r\n        color: theme.palette.text.secondary,\r\n        margin: theme.spacing(2),\r\n        width: \"100%\",\r\n        padding: '2% 0 1% 0',\r\n        height: 'auto'\r\n    },\r\n    table: {\r\n        marginBottom: theme.spacing(2),\r\n        overflowX: 'auto'\r\n    }\r\n}))\r\n\r\n\r\nexport default function Procurador({ procuracao, procuradores }) {\r\n\r\n    const classes = useStyles(),\r\n        { title, table } = classes\r\n\r\n    let procArray = []\r\n\r\n    procuracao.procuradores.forEach(id => {\r\n        const pro = procuradores.find(p => p.procuradorId === id)\r\n        procArray.push(pro)\r\n    })\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div style={{ width: '100%', align: 'left' }}>\r\n                <Typography className={title}> Procuradores cadastrados </Typography>\r\n            </div>\r\n            <Table className={table}>\r\n                <TableHead>\r\n                    <StyledTableRow>\r\n                        {procuradorForm.map((s, i) => <StyledTableCell key={i}>{s.label}</StyledTableCell>)}\r\n                    </StyledTableRow>\r\n                </TableHead>\r\n                { procArray.map((d, j) =>\r\n                    d ?\r\n                        <TableBody key={j}>\r\n                            <TableRow>\r\n                                {\r\n                                    procuradorForm.map((obj, l) =>\r\n                                        <StyledCell key={l}>\r\n                                            {d[obj.field]}\r\n                                        </StyledCell>\r\n                                    )\r\n                                }\r\n                            </TableRow>\r\n                        </TableBody>\r\n                        :\r\n                        null\r\n                )}\r\n            </Table>\r\n        </ React.Fragment>\r\n    )\r\n}","import React, { Fragment } from 'react'\r\nimport moment from 'moment'\r\n\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport Button from '@material-ui/core/Button'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\n\r\nimport AddCircleOutlineSharpIcon from '@material-ui/icons/AddCircleOutlineSharp';\r\nimport RemoveCircleOutlineIcon from '@material-ui/icons/RemoveCircleOutline';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\r\n\r\nimport Procurador from './Procurador'\r\nimport DragAndDrop from '../Reusable Components/DragAndDrop'\r\nimport { procuradorForm } from '../Forms/procuradorForm'\r\nimport StepperButtons from '../Reusable Components/StepperButtons'\r\n\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\nimport InsertDriveFileOutlinedIcon from '@material-ui/icons/InsertDriveFileOutlined';\r\nimport ShowLocalFiles from '../Reusable Components/ShowLocalFiles'\r\nimport { empresaFiles } from '../Forms/empresaFiles'\r\n\r\nconst divFiles = {\r\n    textAlign: 'center',\r\n    alignItems: 'flex-start',\r\n    justify: 'space-between',\r\n    lineHeight: '40px',\r\n    border: '1px #ccc solid',\r\n    padding: '0 1%',\r\n    margin: '1% 1% 0.5% 1%',\r\n    fontSize: '0.8rem',\r\n    backgroundColor: '#f6f6f6',\r\n    borderRadius: '6px',\r\n    width: 180\r\n}\r\n\r\nconst icon = {\r\n    verticalAlign: 'middle',\r\n    cursor: 'pointer',\r\n    paddingLeft: '2%'\r\n}\r\n\r\nconst fileIcon = {\r\n    verticalAlign: 'middle',\r\n    padding: '0 0% 0 2%',\r\n}\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    textField: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        fontSize: '0.8rem',\r\n        fontColor: '#bbb',\r\n        textAlign: 'center'\r\n    },\r\n    addButton: {\r\n        padding: '5px 10px 5px 8px',\r\n        height: '40px',\r\n        margin: '5px',\r\n        float: 'right',\r\n        fontSize: '0.8rem'\r\n    }\r\n}))\r\n\r\nexport default function ({ redux, data, handleInput, addProc, removeProc, handleFiles, getFile, plusOne, minusOne, checkExpires, setShowPendencias, removeFile }) {\r\n\r\n    const\r\n        { dropDisplay, selectedEmpresa, procsToAdd, selectedDocs, procuracao, expires, demand, showPendencias, info, demandFiles, fileToRemove } = data,\r\n        { empresas, procuradores } = redux,\r\n\r\n        classes = useStyles(), { addButton, textField } = classes\r\n\r\n    const errorHandler = (el, index) => {\r\n\r\n        const value = data[el.field + index]\r\n\r\n        if (el.errorHandler && el.errorHandler(value)) return false\r\n        else if (value && el.errorHandler && !el.errorHandler(value)) return true\r\n\r\n        if (el.pattern && value) return value.match(el.pattern) === null\r\n\r\n        if (value > el.max || value < el.min) return true\r\n        if (value?.length < el?.minLength) return true\r\n\r\n        else return false\r\n    }\r\n\r\n    const helper = (el, index) => {\r\n        const value = data[el.field + index]\r\n\r\n        if (el.errorHandler && el.errorHandler(value)) return '✓'\r\n        else if (value && el.errorHandler && !el.errorHandler(value)) return '✘'\r\n\r\n        if (value > el.max || value < el.min) return 'Valor inválido'\r\n        else if (value && value.match(el.pattern) === null) return '✘'\r\n        else if (el.pattern && value && value.match(el.pattern) !== null) return '✓'\r\n\r\n        if (value?.length < el?.minLength) return '✘'\r\n        if (value?.length >= el?.minLength) return '✓'\r\n\r\n        else return undefined\r\n    }\r\n\r\n    const handleDates = (date) => {\r\n\r\n        if (date) return moment(date).format('DD-MM-YYYY')\r\n        else return ''\r\n    }\r\n\r\n    //************CRIAR FUNÇÃO PARA IMPEDIR QUE O PROCURADOR QUE TENHA ALGUMA PROCURAÇÃO SEJA APAGADO NA TELA 'CONSULTAS' */\r\n    return (\r\n        <div className='flex'>\r\n            <header className='flex center' style={{ marginBottom: '10px', width: '100%' }}>\r\n                <SelectEmpresa\r\n                    data={data}\r\n                    empresas={empresas}\r\n                    handleInput={handleInput}\r\n                />\r\n            </header>\r\n            {selectedEmpresa &&\r\n                <section className=\"paper flexColumn\" style={{ position: 'relative', width: '100%' }}>\r\n                    <div className='flexColumn' style={{ alignItems: 'center' }}>\r\n                        <h6> Cadastrar nova procuração </h6>\r\n                        <h4 style={{ fontWeight: 400, fontSize: '0.9em' }}> Se a procuração abranger mais de um procurador, clique em \"+\" para adicionar e anexe apenas 1 vez.</h4>\r\n                    </div>\r\n                    {procsToAdd.map((p, j) =>\r\n                        <div className=\"flex\" key={j} >\r\n                            {procuradorForm.map((el, i) =>\r\n                                <Fragment key={i}>\r\n                                    <TextField\r\n                                        name={el.field + j}\r\n                                        label={el.label}\r\n                                        margin='normal'\r\n                                        className={textField}\r\n                                        onChange={e => handleInput(e)}\r\n                                        type={el.type || ''}\r\n                                        error={errorHandler(el, j)}\r\n                                        helperText={helper(el, j)}\r\n                                        select={el.select || false}\r\n                                        value={data[el.field + j] || ''}\r\n                                        disabled={el.disabled || false}\r\n                                        InputLabelProps={{\r\n                                            className: textField,\r\n                                            shrink: el.type === 'date' || undefined,\r\n                                            style: { fontSize: '0.7rem', fontWeight: 400, color: '#888' }\r\n                                        }}\r\n                                        inputProps={{\r\n                                            style: {\r\n                                                background: el.disabled && data.disable ? '#fff' : '#fafafa',\r\n                                                fontSize: '0.9rem', textAlign: 'center', color: '#000', width: el.width || 150, height: '7px'\r\n                                            },\r\n                                            value: `${data[el.field + j] || ''}`,\r\n                                            list: el.datalist || '',\r\n                                            maxLength: el.maxLength || '',\r\n                                            minLength: el.minLength || '',\r\n                                            max: el.max || '',\r\n                                        }}\r\n                                        multiline={el.multiline || false}\r\n                                        rows={el.rows || null}\r\n                                        variant={el.variant || 'filled'}\r\n                                        fullWidth={el.fullWidth || false}\r\n                                    >\r\n                                    </TextField>\r\n                                    {j === procsToAdd.length - 1 && i === 3 &&\r\n                                        <>\r\n                                            <AddCircleOutlineSharpIcon\r\n                                                onClick={() => plusOne()}\r\n                                                style={{\r\n                                                    verticalAlign: 'middle',\r\n                                                    position: 'absolute',\r\n                                                    bottom: '112px',\r\n                                                    right: j > 0 ? '40px' : '68px',\r\n                                                    color: '#009688',\r\n                                                    fontSize: 30,\r\n                                                    cursor: 'pointer',\r\n                                                    zIndex: 1\r\n                                                }}\r\n                                            />\r\n                                            {j > 0 && <RemoveCircleOutlineIcon\r\n                                                onClick={() => minusOne()}\r\n                                                style={{\r\n                                                    verticalAlign: 'middle',\r\n                                                    position: 'absolute',\r\n                                                    bottom: '112px',\r\n                                                    right: '70px',\r\n                                                    color: 'red',\r\n                                                    fontSize: 30,\r\n                                                    cursor: 'pointer',\r\n                                                    zIndex: 1\r\n                                                }}\r\n                                            />}\r\n                                        </>\r\n                                    }\r\n                                </Fragment>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"flex\" style={{ alignItems: 'center', padding: '0 20px', width: '100%', margin: '12px 0 6px 0' }}>\r\n                        <div style={{ width: '50%' }}>\r\n                            {!demand ?\r\n                                <DragAndDrop\r\n                                    name='procuracao'\r\n                                    formData={procuracao}\r\n                                    dropDisplay={dropDisplay}\r\n                                    handleFiles={handleFiles}\r\n                                    demandFiles={demandFiles}\r\n                                    removeFile={removeFile}\r\n                                    fileToRemove={fileToRemove}\r\n                                />\r\n                                :\r\n                                <div className=\"flex\">\r\n                                    <ShowLocalFiles\r\n                                        demand={demand}\r\n                                        collection='empresaDocs'\r\n                                        demandFiles={demandFiles}\r\n                                        form={empresaFiles}\r\n                                        style={{ minWidth: '220px' }}\r\n                                    />\r\n                                </div>\r\n                            }\r\n                        </div>\r\n\r\n                        <div style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center', width: '50%', paddingTop: '8px' }}>\r\n                            <div style={{ marginTop: '12px' }}>\r\n                                <FormControlLabel\r\n                                    control={\r\n                                        <Checkbox\r\n                                            checked={expires === true}\r\n                                            onChange={() => checkExpires()}\r\n                                            value={expires}\r\n                                        />\r\n                                    }\r\n                                    label={\r\n\r\n                                        <span style={{ color: '#2979ff', fontSize: '0.8em', float: 'right' }}>\r\n                                            Procuração por prazo determinado?\r\n                                    </span>\r\n                                    }\r\n                                />\r\n                            </div>\r\n                            <TextField\r\n                                name='vencimento'\r\n                                label='Vencimento'\r\n                                margin='normal'\r\n                                className={textField}\r\n                                onChange={e => handleInput(e)}\r\n                                type='date'\r\n                                helper='se indeterminado, deixar em branco'\r\n                                value={data.vencimento || ''}\r\n                                disabled={expires === false}\r\n                                InputLabelProps={{\r\n                                    className: textField,\r\n                                    shrink: true,\r\n                                    style: { fontSize: '0.8rem', color: '#455a64', marginBottom: '5%' }\r\n                                }}\r\n                                inputProps={{\r\n                                    style: { background: '#fafafa', fontSize: '0.8rem', textAlign: 'center', color: '#000', height: '9px' },\r\n                                }}\r\n                                variant={'filled'}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </section>}\r\n            <div style={{ display: 'flex', justifyContent: 'flex-end', width: '100%' }}>\r\n                {selectedEmpresa && !demand ?\r\n                    <Button\r\n                        className={addButton}\r\n                        size='small'\r\n                        color=\"secondary\"\r\n                        variant=\"contained\"\r\n                        onClick={() => addProc()}\r\n                    >\r\n                        <AddIcon />Cadastrar procuração\r\n                        </Button>\r\n                    : selectedEmpresa && demand ?\r\n                        <StepperButtons\r\n                            uniqueStep={true}\r\n                            declineButtonLabel='Indeferir'\r\n                            demand={demand}\r\n                            setShowPendencias={setShowPendencias}\r\n                            showPendencias={showPendencias}\r\n                            info={info}\r\n                            handleSubmit={addProc}\r\n                            handleInput={handleInput}\r\n                        />\r\n                        : null\r\n                }\r\n            </div>\r\n\r\n            <section className=\"flexColumn\" style={{ width: '100%', paddingRight: '0' }}>\r\n                {\r\n                    selectedEmpresa && !selectedDocs[0] && !demand ?\r\n                        <div className=\"flex paper\">\r\n                            Nenhum procurador cadastrado para {selectedEmpresa.razaoSocial}\r\n                        </div>\r\n                        :\r\n                        selectedEmpresa && selectedDocs[0] &&\r\n                        <h2 style={{ margin: '25px 0 0 15px' }}>\r\n                            Procurações cadastradas\r\n                    </h2>\r\n                }\r\n                {\r\n                    selectedDocs.length > 0 && selectedDocs.map((procuracao, z) =>\r\n                        <div key={z * 0.01} className='flexColumn paper' style={{ padding: '10px 15px 20px 15px' }}>\r\n                            <h5>\r\n                                Procuração {\r\n                                    !procuracao.vencimento ?\r\n                                        'por prazo indeterminado'\r\n                                        :\r\n                                        'com vencimento em ' + handleDates(procuracao.vencimento)\r\n                                }\r\n                            </h5>\r\n\r\n                            <Procurador procuradores={procuradores} procuracao={procuracao} />\r\n\r\n                            <div className='flex center' style={{ position: 'relative' }}>\r\n                                <span style={divFiles}>\r\n                                    <InsertDriveFileOutlinedIcon style={fileIcon} />\r\n                                    <span style={{ verticalAlign: 'middle', }}>\r\n                                        {' '} Baixar arquivo\r\n                                    </span>\r\n                                    <GetAppIcon style={icon} onClick={() => getFile(procuracao.procuracaoId)} />\r\n                                </span>\r\n                                <span style={{ ...divFiles, width: 90, backgroundColor: 'white', border: 0, position: 'absolute', right: 0 }}>\r\n                                    <DeleteOutlinedIcon color='secondary' style={icon} onClick={() => removeProc(procuracao)} />\r\n                                    Apagar\r\n                                    </span>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                }\r\n            </section>\r\n        </div >\r\n    )\r\n}","import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport valueParser from '../Utils/valueParser'\r\n//import { checkInputErrors } from '../Utils/checkInputErrors'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\n\r\nimport ProcuradoresTemplate from './ProcuradoresTemplate'\r\nimport download from '../Utils/downloadFile'\r\nimport { procuradorForm } from '../Forms/procuradorForm'\r\n\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\nimport { logGenerator } from '../Utils/logGenerator'\r\nimport { setEmpresaDemand } from '../Utils/setEmpresaDemand'\r\nimport { removeFile, sizeExceedsLimit } from '../Utils/handleFiles'\r\n\r\nclass Procuradores extends Component {\r\n\r\n    constructor() {\r\n        super()\r\n        this.escFunction = (e) => {\r\n            if (e.keyCode === 27) {\r\n                if (this.state.openDialog) this.toggleDialog()\r\n            }\r\n        }\r\n    }\r\n\r\n    state = {\r\n        empresas: [],\r\n        razaoSocial: '',\r\n        toastMsg: 'Procuração cadastrada!',\r\n        confirmToast: false,\r\n        fileNames: [],\r\n        openDialog: false,\r\n        expires: false,\r\n        filteredProc: [],\r\n        dropDisplay: 'Clique ou arraste para anexar a procuração referente a este(s) procurador(es).',\r\n        procuradores: [],\r\n        procsToAdd: [1],\r\n        procuracoesArray: [],\r\n        selectedDocs: [],\r\n        showPendencias: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const\r\n            { redux } = this.props,\r\n            demand = this.props?.location?.state?.demand\r\n\r\n        //*************Set demand if any\r\n        if (demand) {\r\n            const\r\n                originalProcuradores = JSON.parse(JSON.stringify(redux.procuradores)),\r\n                demandState = setEmpresaDemand(demand, redux, originalProcuradores),\r\n                { latestDoc, ...updatedState } = demandState,\r\n                { history } = demand,\r\n                { vencimento, expires } = history[0],\r\n                newMembers = history[0].newMembers || [],\r\n                oldMembers = history[0].oldMembers || []\r\n            console.log(demandState)\r\n            let allDemandProcs, procsToAdd = []\r\n\r\n            if (oldMembers[0]) {\r\n                oldMembers.forEach(m => {\r\n                    originalProcuradores.forEach(op => {\r\n                        Object.keys(op).forEach(key => {\r\n                            if (m?.procuradorId === op?.procuradorId && !m[key]) {\r\n                                m[key] = op[key]\r\n                            }\r\n                        })\r\n                    })\r\n                })\r\n            }\r\n            if (newMembers[0] || oldMembers[0]) {\r\n                allDemandProcs = newMembers.concat(oldMembers)\r\n                allDemandProcs.forEach((p, i) => {\r\n                    procsToAdd.push(i)\r\n                    procuradorForm.forEach(({ field }) => {\r\n                        this.setState({ [field + i]: p[field] })\r\n                    })\r\n                })\r\n            }\r\n            this.setState({ vencimento, expires, procsToAdd })\r\n            this.setState({ ...updatedState, demandFiles: [latestDoc] })\r\n        }\r\n\r\n        document.addEventListener('keydown', this.escFunction, false)\r\n    }\r\n\r\n    componentWillUnmount() { this.setState({}) }\r\n\r\n    handleInput = async e => {\r\n        const\r\n            { name } = e.target,\r\n            { empresas } = this.props.redux,\r\n            procuradores = [...this.props.redux.procuradores],\r\n            procuracoes = JSON.parse(JSON.stringify(this.props.redux.procuracoes))\r\n\r\n        let { value } = e.target\r\n\r\n        //***********************Parse values ********************** */\r\n        const parsedValue = valueParser(name, value)\r\n        this.setState({ [name]: parsedValue })\r\n\r\n        //**************************SetState *********************** */\r\n        if (name === 'razaoSocial' && Array.isArray(procuradores)) {\r\n\r\n            const selectedEmpresa = empresas.find(e => e.razaoSocial === value)\r\n\r\n            if (selectedEmpresa) {\r\n                const selectedDocs = procuracoes.filter(pr => pr.codigoEmpresa === selectedEmpresa.codigoEmpresa)\r\n\r\n                await this.setState({ selectedEmpresa, selectedDocs, razaoSocial: selectedEmpresa.razaoSocial })\r\n                if (value !== selectedEmpresa.razaoSocial) this.setState({ selectedEmpresa: undefined, selectedDocs: [] })\r\n\r\n            } else this.setState({ selectedEmpresa: undefined, selectedDocs: [] })\r\n        }\r\n\r\n        if (name.match('cpfProcurador')) {\r\n            const proc = procuradores.find(p => p.cpfProcurador === value)\r\n            if (proc) {\r\n                const index = name.charAt(name.length - 1)\r\n                let cpfExists\r\n                Object.keys(this.state).forEach(stateKey => {\r\n                    if (stateKey !== name && this.state[stateKey] === value) {\r\n                        alert('Este CPF já foi informado.')\r\n                        this.setState({ [name]: '' })\r\n                        cpfExists = true\r\n                    }\r\n                })\r\n\r\n                if (!cpfExists)\r\n                    procuradorForm.forEach(({ field }) => {\r\n                        const key = field + index\r\n                        this.setState({ [key]: proc[field] })\r\n                    })\r\n            }\r\n        }\r\n    }\r\n\r\n    addProc = async (approved) => {\r\n\r\n        const\r\n            { redux } = this.props,\r\n            { selectedEmpresa, demand, procuracao, vencimento, expires, info } = this.state,\r\n            empresaId = selectedEmpresa.codigoEmpresa,\r\n            procuradores = JSON.parse(JSON.stringify(redux.procuradores)),\r\n            nProc = [...this.state.procsToAdd]\r\n        let\r\n            addedProcs = [],\r\n            sObject = {}\r\n\r\n        //***********************Check for errors *********************** */\r\n        /*       let { errors } = checkInputErrors('returnObj', 'Dont check the date, please!') || []\r\n      \r\n              if (errors && errors[0]) {\r\n                  if (!expires)\r\n                      await this.setState({ ...this.state, ...checkInputErrors('setState', 'dontCheckDate') })\r\n                  else\r\n                      await this.setState({ ...this.state, ...checkInputErrors('setState') })\r\n                  return\r\n              }\r\n   */\r\n        //***********Create array of Procs from state***********\r\n        nProc.forEach((n, i) => {\r\n            procuradorForm.forEach(obj => {\r\n                Object.assign(sObject, { [obj.field]: this.state[obj.field + i] })\r\n            })\r\n            let j = 0\r\n            Object.values(sObject).forEach(v => {\r\n                if (v) j += 1\r\n            })\r\n            if (j > 0) addedProcs.push(sObject)\r\n            j = 0\r\n            sObject = {}\r\n\r\n            procuradorForm.forEach(obj => {\r\n                this.setState({ [obj.field + i]: '' })\r\n            })\r\n        })\r\n\r\n        let\r\n            gotId,\r\n            newMembers = [],\r\n            oldMembers = []\r\n\r\n        addedProcs.forEach(addedProc => {\r\n            gotId = procuradores.find(p => p.cpfProcurador === addedProc.cpfProcurador)\r\n            if (gotId?.procuradorId) {\r\n\r\n                Object.keys(addedProc).forEach(k => {\r\n                    if (addedProc[k] === gotId[k])\r\n                        delete addedProc[k]\r\n                })\r\n                addedProc.procuradorId = gotId.procuradorId\r\n                oldMembers.push(addedProc)\r\n            }\r\n            else\r\n                newMembers.push(addedProc)\r\n        })\r\n\r\n        if (approved === undefined) {\r\n\r\n            const log = {\r\n                status: 'Aguardando aprovação',\r\n                empresaId,\r\n                history: {\r\n                    files: procuracao,\r\n                    newMembers,\r\n                    oldMembers,\r\n                    vencimento,\r\n                    expires\r\n                },\r\n                metadata: {\r\n                    fieldName: 'procuracao',\r\n                    empresaId\r\n                },\r\n            }\r\n            Object.entries(log).forEach(([k, v]) => { if (!v) delete log[k] })\r\n            log.approved = approved\r\n            log.historyLength = 0\r\n\r\n            logGenerator(log)\r\n                .then(r => console.log(r))\r\n\r\n            this.setState({ toastMsg: 'Solicitação de cadastro enviada', confirmToast: true })\r\n            setTimeout(() => { this.resetState() }, 1500);\r\n        }\r\n        if (approved === false) {\r\n            const log = {\r\n                id: demand.id,\r\n                empresaId,\r\n                history: {\r\n                    info\r\n                },\r\n                declined: true\r\n            }\r\n            logGenerator(log)\r\n                .then(r => console.log(r))\r\n            this.setState({ toastMsg: 'Solicitação indeferida!', confirmToast: true })\r\n            setTimeout(() => {\r\n                this.props.history.push('/solicitacoes')\r\n            }, 1500);\r\n        }\r\n        if (approved === true) {\r\n            newMembers = humps.decamelizeKeys(newMembers)\r\n            oldMembers = humps.decamelizeKeys(oldMembers)\r\n            this.approveProc(newMembers, oldMembers)\r\n        }\r\n    }\r\n\r\n    approveProc = async (newMembers, oldMembers) => {\r\n\r\n        const\r\n            { selectedEmpresa, demandFiles, vencimento, demand } = this.state,\r\n            { codigoEmpresa } = selectedEmpresa,\r\n            procIdArray = oldMembers.map(m => m.procurador_id)\r\n\r\n        //******************Post newMembers  *****************/\r\n        if (newMembers.length > 0) {\r\n            newMembers = humps.decamelizeKeys(newMembers)\r\n            const cadRequest = {\r\n                table: 'procuradores', tablePK: 'procurador_id',\r\n                procuradores: newMembers,\r\n                empresas: [codigoEmpresa]\r\n            }\r\n            await axios.post('/api/cadProcuradores', cadRequest)\r\n                .then(procs => {\r\n                    procs.data.forEach(p => procIdArray.push(p.procurador_id))\r\n                })\r\n        }\r\n\r\n        //***************Update existing members ****************/\r\n        const request = {\r\n            table: 'procuradores',\r\n            tablePK: 'procurador_id',\r\n            requestArray: oldMembers,\r\n            keys: procuradorForm.map(p => humps.decamelize(p.field))\r\n        }\r\n\r\n        if (oldMembers && oldMembers[0])\r\n            axios.put('/api/editProc', { ...request })\r\n                .then(r => console.log(r))\r\n\r\n        //***************Create new Procuracao****************/\r\n        let novaProcuracao = {\r\n            codigo_empresa: codigoEmpresa,\r\n            vencimento,\r\n            status: 'vigente',\r\n            procuradores: procIdArray\r\n        }\r\n\r\n        Object.entries(novaProcuracao).forEach(([k, v]) => {\r\n            if (!v || v === '') delete novaProcuracao[k]\r\n        })\r\n\r\n        let procuracaoId\r\n\r\n        await axios.post('/api/cadProcuracao', novaProcuracao)\r\n            .then(r => procuracaoId = r.data[0].procuracao_id)\r\n\r\n        novaProcuracao.procuracaoId = procuracaoId\r\n        const log = {\r\n            id: demand.id,\r\n            demandFiles,\r\n            history: {},\r\n            approved: true\r\n        }\r\n\r\n        if (demandFiles)\r\n            log.metadata = {\r\n                fieldName: 'procuracao',\r\n                empresaId: selectedEmpresa.codigoEmpresa,\r\n                procuracaoId: procuracaoId,\r\n                procuradores: procIdArray,\r\n            }\r\n        //generate log\r\n        logGenerator(log)\r\n            .then(r => console.log(r))\r\n\r\n        this.toast()\r\n        if (demand)\r\n            setTimeout(() => {\r\n                this.props.history.push('/solicitacoes')\r\n            }, 1500);\r\n        this.resetState()\r\n    }\r\n\r\n    removeProc = async proc => {\r\n\r\n        const\r\n            id = proc.procuracaoId,\r\n            selectedFile = this.props.redux.empresaDocs.find(f => Number(f.metadata.procuracaoId) === id)\r\n\r\n        let procs = [...this.state.selectedDocs]\r\n\r\n        await axios.delete(`/api/delete?table=procuracoes&tablePK=procuracao_id&id=${id}`)\r\n            .then(r => console.log(r.data))\r\n\r\n        if (selectedFile && selectedFile.hasOwnProperty('id'))\r\n            axios.delete(`/api/deleteFile?collection=empresaDocs&id=${selectedFile.id}`)\r\n                .then(({ data }) => console.log(data))\r\n\r\n        const i = procs.indexOf(proc)\r\n        procs.splice(i, 1)\r\n\r\n        this.setState({ selectedDocs: procs })\r\n    }\r\n\r\n    handleFiles = files => {\r\n        //limit file Size\r\n        if (sizeExceedsLimit(files)) return\r\n\r\n        let procuracao = new FormData()\r\n        procuracao.append('procuracao', files[0])\r\n        this.setState({ procuracao, fileToRemove: null })\r\n    }\r\n\r\n    removeFile = async (name) => {\r\n        const\r\n            { procuracao } = this.state,\r\n            newState = removeFile(name, procuracao)\r\n\r\n        this.setState({ ...this.state, ...newState })\r\n    }\r\n\r\n    getFile = id => {\r\n        const\r\n            { empresaDocs } = this.props.redux,\r\n            selectedFile = empresaDocs.find(f => Number(f.metadata.procuracaoId) === id)\r\n\r\n        if (selectedFile) {\r\n            const { id, filename } = selectedFile\r\n            download(id, filename, 'empresaDocs')\r\n        } else {\r\n            this.setState({ alertType: 'filesNotFound', openAlertDialog: true })\r\n        }\r\n    }\r\n\r\n    plusOne = () => {\r\n        let i = [...this.state.procsToAdd]\r\n        i.push(1)\r\n        this.setState({ procsToAdd: i })\r\n    }\r\n\r\n    minusOne = () => {\r\n        let i = [...this.state.procsToAdd]\r\n        i.pop()\r\n        this.setState({ procsToAdd: i })\r\n    }\r\n\r\n    checkExpires = () => {\r\n        if (this.state.expires === true) this.setState({ vencimento: '' })\r\n        this.setState({ expires: !this.state.expires })\r\n    }\r\n\r\n    resetState = () => {\r\n        const\r\n            { procsToAdd } = this.state,\r\n            keys = procuradorForm.map(({ field }) => field),\r\n            resetedFields = {}\r\n\r\n        procsToAdd.forEach((p, i) => {\r\n            keys.forEach(key => {\r\n                if (this.state.hasOwnProperty(key + i))\r\n                    resetedFields[key + i] = undefined\r\n            })\r\n        })\r\n        this.removeFile('procuracao')\r\n        this.setState({\r\n            ...resetedFields,\r\n            dropDisplay: 'Clique ou arraste para anexar a procuração referente a este(s) procurador(es).',\r\n            procsToAdd: [1],\r\n            vencimento: undefined,\r\n            procuracao: undefined,\r\n            expires: false\r\n        })\r\n    }\r\n\r\n    setShowPendencias = () => this.setState({ showPendencias: !this.state.showPendencias })\r\n    toggleDialog = () => this.setState({ openDialog: !this.state.openDialog })\r\n    closeAlert = () => this.setState({ openAlertDialog: !this.state.openAlertDialog })\r\n    toast = () => this.setState({ confirmToast: !this.state.confirmToast })\r\n\r\n    render() {\r\n        const { openAlertDialog, alertType, demand } = this.state\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <Crumbs links={['Empresas', '/empresas']} text='Cadastro de procurações' demand={demand} />\r\n                <ProcuradoresTemplate\r\n                    data={this.state}\r\n                    redux={this.props.redux}\r\n                    handleInput={this.handleInput}\r\n                    removeProc={this.removeProc}\r\n                    handleFiles={this.handleFiles}\r\n                    removeFile={this.removeFile}\r\n                    addProc={this.addProc}\r\n                    handleSubmit={this.handleSubmit}\r\n                    plusOne={this.plusOne}\r\n                    minusOne={this.minusOne}\r\n                    getFile={this.getFile}\r\n                    checkExpires={this.checkExpires}\r\n                    setShowPendencias={this.setShowPendencias}\r\n                />\r\n                <ReactToast open={this.state.confirmToast} close={this.toast} msg={this.state.toastMsg} />\r\n                {\r\n                    openAlertDialog &&\r\n                    <AlertDialog open={openAlertDialog} close={this.closeAlert} alertType={alertType} customMessage={this.state.customMsg} />\r\n                }\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst collections = ['empresas', 'procuradores', 'procuracoes', 'getFiles/empresaDocs']\r\n\r\nexport default (StoreHOC(collections, Procuradores))","import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport SociosTemplate from './SociosTemplate'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\nimport valueParser from '../Utils/valueParser'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport { sociosForm } from '../Forms/dadosSociosForm'\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\nimport { removeFile, sizeExceedsLimit } from '../Utils/handleFiles'\r\nimport { setEmpresaDemand } from '../Utils/setEmpresaDemand'\r\nimport { logGenerator } from '../Utils/logGenerator'\r\n\r\nclass AltSocios extends Component {\r\n\r\n    state = {\r\n        razaoSocial: '',\r\n        toastMsg: 'Dados atualizados!',\r\n        confirmToast: false,\r\n        files: [],\r\n        fileNames: [],\r\n        openDialog: false,\r\n        dialogTitle: '',\r\n        addedSocios: [0],\r\n        totalShare: 0,\r\n        filteredSocios: [],\r\n        dropDisplay: 'Clique ou arraste para anexar o contrato social atualizado da empresa',\r\n        showFiles: false,\r\n        showPendencias: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        const\r\n            { redux } = this.props,\r\n            demand = this.props?.location?.state?.demand,\r\n            originals = humps.decamelizeKeys(redux.socios),\r\n            socios = JSON.parse(JSON.stringify(redux.socios)),\r\n            filteredSocios = socios.filter(s => s.razaoSocial === this.state.razaoSocial)\r\n\r\n        if (demand) {\r\n\r\n            const filteredSocios = socios.filter(s => s.codigoEmpresa === demand.empresaId)\r\n            console.log(filteredSocios)\r\n\r\n            const\r\n                demandState = setEmpresaDemand(demand, redux, filteredSocios),\r\n                { latestDoc, ...updatedState } = demandState\r\n            console.log(demandState)\r\n            this.setState({ ...updatedState, contratoSocial: latestDoc, originals })\r\n        }\r\n        else this.setState({ originals, filteredSocios })\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const\r\n            { socios } = prevProps.redux,\r\n            { originals } = prevState,\r\n            decamSocios = humps.decamelizeKeys(socios)\r\n\r\n        if (JSON.stringify(decamSocios) !== JSON.stringify(originals))\r\n            this.setState({ originals: decamSocios })\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.setState({})\r\n        document.removeEventListener('keydown', this.escFunction, false)\r\n    }\r\n\r\n    handleInput = async e => {\r\n        const\r\n            { empresas } = this.props.redux,\r\n            { name } = e.target\r\n        let\r\n            { value } = e.target\r\n\r\n        const parsedValue = valueParser(name, value)\r\n\r\n        this.setState({ [name]: parsedValue })\r\n\r\n        if (name === 'razaoSocial') {\r\n            const\r\n                originalSocios = humps.camelizeKeys(this.state.originals),\r\n                filteredSocios = originalSocios.filter(s => s.razaoSocial === value).map(s => s),\r\n                selectedEmpresa = empresas.find(e => e.razaoSocial === value)\r\n\r\n            if (filteredSocios.length > 0) {\r\n                this.setState({ filteredSocios, selectedEmpresa })\r\n            } else this.setState({ filteredSocios: [] })\r\n            if (selectedEmpresa) {\r\n                await this.setState({ razaoSocial: selectedEmpresa.razaoSocial, selectedEmpresa })\r\n                if (value !== selectedEmpresa.razaoSocial) this.setState({ selectedEmpresa: undefined })\r\n            } else this.setState({ selectedEmpresa: undefined })\r\n        }\r\n    }\r\n\r\n    handleBlur = async e => {\r\n        const { filteredSocios, share } = this.state\r\n        const { name } = e.target\r\n        let { value } = e.target\r\n        switch (name) {\r\n            case 'cpfSocio':\r\n                const alreadyExists = filteredSocios.find(e => e.cpfSocio === value)\r\n                if (alreadyExists) {\r\n                    this.setState({ alertType: 'alreadyExists', openAlertDialog: true })\r\n                    this.setState({ cpfSocio: '' })\r\n                }\r\n                break;\r\n            case 'share':\r\n\r\n                if (share && typeof share !== 'number')\r\n                    await this.setState({ share: Number(this.state.share) })                         //Garante que o state é um número\r\n\r\n                if (value) {\r\n                    value = this.state.share\r\n                    if (value > 100) {\r\n                        await this.setState({ share: '' })\r\n                        value = ''\r\n                        this.setState({ alertType: 'numberNotValid', openAlertDialog: true })\r\n                    }\r\n                    if (value < 0) {\r\n                        value = value * -1\r\n                        this.setState({ share: value })\r\n                    }\r\n                    if (value > 0) {\r\n                        let totalShare = 0\r\n                        const allShares = filteredSocios.map(s => s.share ? Number(s.share) : 0)            //Procura valor share entre os sócios\r\n\r\n                        if (allShares[0])                                                   // se encontrar, retorna a soma dos valores\r\n                            totalShare = allShares.reduce((a, b) => a + b)\r\n\r\n                        totalShare += value\r\n                        //console.log(totalShare, typeof totalShare)\r\n                        this.setState({ totalShare })\r\n                    }\r\n                }\r\n                break;\r\n            default: break;\r\n        }\r\n    }\r\n\r\n    addSocio = async () => {\r\n        let socios = this.state.filteredSocios,\r\n            sObject = {}\r\n\r\n        //check if totalShare is more than 100\r\n\r\n        if (this.state.totalShare > 100) {\r\n            this.setState({ openAlertDialog: true, alertType: 'overShared' })\r\n            return null\r\n        }\r\n\r\n        sociosForm.forEach(obj => {\r\n            Object.assign(sObject, { [obj.field]: this.state[obj.field] })\r\n        })\r\n        socios.unshift(sObject)\r\n\r\n        await this.setState({ filteredSocios: socios })\r\n\r\n        sociosForm.forEach(async obj => {\r\n            await this.setState({ [obj.field]: undefined })\r\n        })\r\n        document.getElementsByName('nomeSocio')[0].focus()\r\n    }\r\n\r\n    removeSocio = async index => {\r\n        let socios = [...this.state.filteredSocios]\r\n        const socio = socios[index]\r\n\r\n        if (socio.status && socio.status !== 'deleted') {\r\n            socio.originalStatus = socio.status\r\n            socio.status = 'deleted'\r\n        }\r\n        else if (socio?.status === 'deleted')\r\n            socio.status = socio?.originalStatus\r\n        else\r\n            socio.status = 'deleted'\r\n\r\n        this.setState({ filteredSocios: socios })\r\n    }\r\n\r\n    enableEdit = index => {\r\n\r\n        let editSocio = this.state.filteredSocios\r\n        if (editSocio[index].edit === true) editSocio[index].edit = false\r\n        else {\r\n            editSocio.forEach(s => s.edit = false)\r\n            editSocio[index].edit = true\r\n        }\r\n        this.setState({ filteredSocios: editSocio })\r\n    }\r\n\r\n    handleEdit = e => {\r\n        const { name } = e.target\r\n        let { value } = e.target\r\n\r\n        value = valueParser(name, value)\r\n\r\n        let editSocio = this.state.filteredSocios.filter(s => s.edit === true)[0]\r\n        const index = this.state.filteredSocios.indexOf(editSocio)\r\n\r\n        editSocio[name] = value\r\n\r\n        let fs = this.state.filteredSocios\r\n        fs[index] = editSocio\r\n\r\n        this.setState({ filteredSocios: fs })\r\n    }\r\n\r\n    handleSubmit = async approved => {\r\n        const\r\n            { socios } = this.props.redux,\r\n            { selectedEmpresa, filteredSocios, demand, contratoSocial, info } = this.state,\r\n            { codigoEmpresa } = selectedEmpresa,\r\n            oldHistoryLength = demand?.history?.length || 0\r\n\r\n        let log = {}\r\n        log.metadata = {}\r\n\r\n        //check if totalShare is more than 100\r\n        let updatedShare = filteredSocios\r\n            .map(({ share }) => {\r\n                if (typeof share === 'string')\r\n                    share = Number(share)\r\n                if (share)\r\n                    return share\r\n                else return 0\r\n            })\r\n            .reduce((a, b) => a + b)\r\n\r\n        updatedShare = +(updatedShare.toFixed(2))\r\n\r\n        if (updatedShare > 100) {\r\n            this.setState({ openAlertDialog: true, alertType: 'overShared' })\r\n            return null\r\n        }\r\n\r\n        let\r\n            oldMembers = [],\r\n            newMembers = [],\r\n            keys = sociosForm.map(el => humps.decamelize(el.field))\r\n        keys.splice(1, 1)\r\n\r\n        //*************Organize socios into oldMembers and newMembers arrays*/\r\n        filteredSocios.forEach(fs => {\r\n            let { razaoSocial, createdAt, edit, ...rest } = fs\r\n            fs = rest\r\n            fs.codigoEmpresa = codigoEmpresa\r\n            if (!fs.hasOwnProperty('socioId')) {\r\n                const gotId = socios.find(s => s.cpfSocio === fs.cpfSocio)\r\n                if (gotId) {\r\n                    fs.socioId = gotId.socioId\r\n                    oldMembers.push(fs)\r\n                } else {\r\n                    if (fs?.status !== 'deleted') {\r\n                        fs.status = 'new'\r\n                        newMembers.push(fs)\r\n                    }\r\n                }\r\n            } else {\r\n                oldMembers.push(fs)\r\n                delete oldMembers.socioId\r\n            }\r\n        })\r\n\r\n        const table = 'socios', tablePK = 'socio_id'\r\n        let\r\n            realChanges = [],\r\n            altObj = {},\r\n            shareUpdate,\r\n            deleted\r\n\r\n        //*****************Send only real updates of oldMembers and add status = 'modified'\r\n        const originals = humps.camelizeKeys(this.state.originals)\r\n\r\n        oldMembers.forEach(m => {\r\n            originals.forEach(async s => {\r\n                if (m.socioId === s.socioId) {\r\n                    Object.keys(m).forEach(key => {\r\n                        if (m[key] && m[key] !== '' && (m[key] !== s[key] || key === 'socioId')) {\r\n                            Object.assign(altObj, { [key]: m[key] })\r\n                        }\r\n                    })\r\n                    //if marked as deleted, preserve status to create delete request, else mark as modified. if deleted, demand needs approval\r\n                    if (Object.keys(altObj).length > 1) {\r\n                        if (altObj?.status !== 'deleted') {\r\n                            m.status = 'modified'\r\n                            altObj.status = 'modified'\r\n                        }\r\n                        else deleted = true\r\n                        realChanges.push(altObj)\r\n                    }\r\n                    if (altObj.share || deleted) shareUpdate = true\r\n                    altObj = {}\r\n                }\r\n            })\r\n        })\r\n\r\n        //delete newMembers empty / undefined fields / canceled newMembers\r\n\r\n        newMembers = newMembers.filter(({ status }) => status !== 'deleted')\r\n        newMembers.forEach(m => {\r\n            Object.keys(m).forEach(key => {\r\n                if (!m[key] || m[key] === '') delete m[key]\r\n            })\r\n        })\r\n\r\n        const modifiedMembers = oldMembers.filter(m => m?.status === 'modified')\r\n\r\n        //alert if oldMembers and new members dont exist\r\n        if (!modifiedMembers[0] && !newMembers[0] && !contratoSocial && approved !== false && !deleted) {\r\n            alert('Nenhuma alteração foi realizada.')\r\n            return\r\n        }\r\n\r\n        //Variables to be inserted in files metadata\r\n        let\r\n            updateFilesMetadata = false,\r\n            socioIdsArray = filteredSocios\r\n                .filter(s => s.socioId !== undefined)\r\n                .map(s => s.socioId)\r\n\r\n        //**********If not approved but share was updated, create demand ***************** */\r\n        if (!approved && (newMembers.length > 0 || shareUpdate))\r\n            this.setState({ toastMsg: 'Alteração estatuária enviada!' })\r\n\r\n        //**********Else if approved and/or no share update, prepare request Object to PG DB */\r\n        else if ((!shareUpdate && newMembers.length === 0) || approved) {\r\n\r\n            log.completed = true\r\n            log.metadata.tempFile = 'false'\r\n\r\n            oldMembers = humps.decamelizeKeys(realChanges)\r\n            newMembers = humps.decamelizeKeys(newMembers)\r\n\r\n            try {\r\n                //insert new members, if any\r\n                if (newMembers.length > 0) {\r\n                    newMembers.forEach(m => delete m.status)\r\n                    await axios.post('/api/cadSocios', { socios: newMembers, table, tablePK })\r\n                        .then(r => r.data.forEach(newSocio => socioIdsArray.push(newSocio.socio_id)))\r\n                    updateFilesMetadata = true // if new members are inserted, we need to update socioIds array in file metadata.\r\n                }\r\n\r\n                //remove members marked as 'deleted' from the database and update any modified\r\n                if (oldMembers.length > 0) {\r\n                    oldMembers.forEach(async (member, i) => {                                           //remove deleted from DB\r\n                        if (member?.status === 'deleted') {\r\n                            await axios.delete(`/api/delete?table=socios&tablePK=socio_id&id=${member.socio_id}`)\r\n                                .catch(err => console.log(err))\r\n\r\n                            const index = socioIdsArray.indexOf(member.socio_id)\r\n                            if (index !== -1) {\r\n                                socioIdsArray.splice(i, 1)\r\n                                updateFilesMetadata = true\r\n                            }\r\n                        }\r\n                    })\r\n                    oldMembers = oldMembers.filter(({ status }) => status === 'modified')               //update existing member data\r\n                    oldMembers.forEach(m => delete m.status)\r\n                    await axios.put('/api/editSocios', { requestArray: oldMembers, table, tablePK, keys })\r\n                        .then(r => console.log(r.data))\r\n                }\r\n            } catch (err) {\r\n                console.log(err)\r\n            }\r\n        }\r\n\r\n        //**********Prepare the log object, approved, or not.******************\r\n        log = {\r\n            ...log,\r\n            id: demand?.id,\r\n            empresaId: codigoEmpresa,\r\n            info,\r\n            history: {},\r\n            historyLength: oldHistoryLength,\r\n            approved\r\n        }\r\n\r\n        if (realChanges.length > 0) log.history.oldMembers = realChanges\r\n        if (newMembers.length > 0) log.history.newMembers = newMembers\r\n        if (contratoSocial && demand) log.demandFiles = [contratoSocial]\r\n        //if (demand) log.id = demand?.id\r\n        if (approved === false) log.declined = true\r\n        if (log.completed) log.approved = true\r\n\r\n        //If first attempt to send files completed (no share update) or not, handle files\r\n        if (contratoSocial && !updateFilesMetadata && !demand) {\r\n            log.history.files = contratoSocial\r\n            log.metadata = {\r\n                fieldName: 'contratoSocial',\r\n                empresaId: codigoEmpresa\r\n            }\r\n        }\r\n        log.metadata.socios = socioIdsArray\r\n\r\n        logGenerator(log)                               //Generate the demand\r\n            .then(r => {\r\n                console.log(r?.data)\r\n                this.toast()\r\n            })\r\n            .catch(err => console.log(err))\r\n\r\n        //*******************Reset state and variables ************** */\r\n        oldMembers = []\r\n        realChanges = []\r\n        altObj = {}\r\n        newMembers = []\r\n\r\n        this.resetState()\r\n        if (demand)\r\n            setTimeout(() => { this.props.history.push('/solicitacoes') }, 1500)\r\n    }\r\n\r\n    handleFiles = files => {\r\n        //limit file Size\r\n        if (sizeExceedsLimit(files)) return\r\n\r\n        if (files && files[0]) {\r\n            const contratoSocial = new FormData()\r\n            contratoSocial.append('contratoSocial', files[0])\r\n            this.setState({ contratoSocial, fileToRemove: null })\r\n        }\r\n    }\r\n\r\n    removeFile = async (name) => {\r\n        const\r\n            { contratoSocial } = this.state,\r\n            newState = removeFile(name, contratoSocial)\r\n\r\n        this.setState({ ...this.state, ...newState })\r\n    }\r\n\r\n    resetState = () => {\r\n        const { filteredSocios } = this.state\r\n\r\n        if (filteredSocios)\r\n            filteredSocios.forEach(s => s.edit = false)\r\n\r\n        this.setState({\r\n            razaoSocial: '', selectedEmpresa: undefined, filteredSocios: [],\r\n            dropDisplay: 'Clique ou arraste para anexar o contrato social atualizado da empresa',\r\n            contratoSocial: undefined\r\n        })\r\n    }\r\n\r\n    setShowPendencias = () => this.setState({ showPendencias: !this.state.showPendencias })\r\n    toggleDialog = () => this.setState({ openDialog: !this.state.openDialog })\r\n    closeAlert = () => this.setState({ openAlertDialog: !this.state.openAlertDialog })\r\n    toast = () => this.setState({ confirmToast: !this.state.confirmToast })\r\n\r\n    render() {\r\n        const { filteredSocios, openAlertDialog, alertType } = this.state,\r\n            { empresas } = this.props.redux\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <Crumbs links={['Empresas', '/empresas']} text='Alteração do quadro societário' />\r\n                <SociosTemplate\r\n                    data={this.state}\r\n                    socios={filteredSocios}\r\n                    empresas={empresas}\r\n                    handleInput={this.handleInput}\r\n                    handleBlur={this.handleBlur}\r\n                    addSocio={this.addSocio}\r\n                    removeSocio={this.removeSocio}\r\n                    enableEdit={this.enableEdit}\r\n                    handleEdit={this.handleEdit}\r\n                    handleFiles={this.handleFiles}\r\n                    handleSubmit={this.handleSubmit}\r\n                    removeFile={this.removeFile}\r\n                    setShowPendencias={this.setShowPendencias}\r\n                />\r\n                <ReactToast open={this.state.confirmToast} close={this.toast} msg={this.state.toastMsg} />\r\n                {openAlertDialog && <AlertDialog open={openAlertDialog} close={this.closeAlert} alertType={alertType} />}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst collections = ['empresas', 'socios', 'getFiles/empresaDocs']\r\n\r\nexport default StoreHOC(collections, AltSocios)","export const barChart = {\r\n    options: {\r\n        title: {\r\n            text: 'Veículos por ano de fabricação',\r\n            align: 'center',\r\n            marginTop: 10,\r\n            offsetX: 0,\r\n            offsetY: 0,\r\n            floating: false,\r\n            style: {\r\n                fontSize: '14px',\r\n                fontWeight: 500,\r\n                fontFamily: '\\'Segoe UI\\', Tahoma, Geneva, Verdana, sans-serif ',\r\n            },\r\n        },\r\n        legend: { show: false },\r\n        chart: {\r\n            id: \"veiculos_ano_fabricacao\",\r\n        },\r\n        xaxis: {            \r\n            labels: {\r\n                style: {\r\n                    fontSize: '9px',\r\n                    fontWeight: 400,\r\n                    fontFamily: '\\'Segoe UI\\', Tahoma, Geneva, Verdana, sans-serif ',\r\n                },\r\n            }\r\n        },\r\n        dataLabels: {\r\n            enabled: false,\r\n        },\r\n      //  fill: { colors: ['rgb(47, 75, 124)'] },\r\n        plotOptions: { bar: { horizontal: false }, },\r\n    }\r\n}\r\n\r\nexport const donutChart = {\r\n    options: {\r\n        title: {\r\n            text: 'Percentual de veículos por ano de fabricação',\r\n            align: 'center',\r\n            marginTop: 10,\r\n            marginBottom: 20,\r\n            offsetX: 0,\r\n            offsetY: 0,\r\n            floating: false,\r\n            style: {\r\n                fontSize: '13px',\r\n                fontWeight: 500,\r\n                fontFamily: '\\'Segoe UI\\', Tahoma, Geneva, Verdana, sans-serif ',\r\n            },\r\n        },\r\n        plotOptions: {\r\n            pie: {\r\n                donut: {\r\n                    labels: {\r\n                        show: true,\r\n                        name: {\r\n                            show: true,\r\n                            fontSize: '20px',\r\n                            fontFamily: '\\'Segoe UI\\', Tahoma, Geneva, Verdana, sans-serif ',\r\n                            fontWeight: 600,\r\n                            color: '#373d3f',\r\n                            offsetY: -10\r\n                        },\r\n                        value: {\r\n                            show: true,\r\n                            fontSize: '15px',\r\n                            fontFamily: 'Helvetica, Arial, sans-serif',\r\n                            fontWeight: 400,\r\n                            color: '#373d3f',\r\n                            offsetY: 16,\r\n                            formatter: function (val) {\r\n                                return val\r\n                            }\r\n                        },\r\n                        total: {\r\n                            show: true,\r\n                            showAlways: true,\r\n                            label: 'Total:',\r\n                            fontSize: '20px',\r\n                            fontFamily: 'Helvetica, Arial, sans-serif',\r\n                            fontWeight: 600,\r\n                            color: '#373d3f',\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        responsive: [{\r\n            breakpoint: 480,\r\n            options: {\r\n                chart: {\r\n                    width: 200\r\n                },\r\n                legend: {\r\n                    position: 'bottom'\r\n                }\r\n            }\r\n        }]\r\n    },\r\n}","import React from 'react'\r\nimport Chart from \"react-apexcharts\";\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport { barChart, donutChart } from './chartsConfig'\r\n\r\nimport Paper from '@material-ui/core/Paper'\r\nimport './relatorios.css'\r\n\r\nconst RelatoriosTemplate = (\r\n    { empresas, razaoSocial, selectedEmpresa, selectedVehicles, labels, values, tableLabels, tableData, mediaIdades, moda, \r\n        handleInput, segurosVencidos, segurosVigentes, oldVehicles, veiculosNovos }) => {\r\n\r\n    const colors = ['#ff7c43', '#ffa600', '#FF9800', '#f95d6a', '#f44336', '#2E93fA', '#3333ff', '#66DA26', '#669999', '#E91E63', '#d45087', '#a05195', '#665191', '#2f4b7c', '#003f5c',]\r\n\r\n    return (\r\n        <main className='relatorios'>\r\n            <SelectEmpresa\r\n                empresas={empresas}\r\n                data={{ razaoSocial }}\r\n                handleInput={handleInput}\r\n            />\r\n            {(!selectedVehicles || selectedVehicles.length === 0) ? <p>Nenhum veículo cadastrado para {selectedEmpresa.razaoSocial}</p>\r\n                :\r\n                <>\r\n                    <h3 style={{ width: '100%', textAlign: 'center' }}>\r\n                        {!selectedEmpresa ? 'Exibindo todos os veículos' : selectedEmpresa.razaoSocial} - Média de idade da frota: {mediaIdades} anos. Moda do ano de fabricação: {moda}.\r\n                    </h3>\r\n                    <Paper>\r\n                        <section className='rowContainer'>\r\n                            <Chart\r\n                                options={{ ...barChart.options, xaxis: { ...barChart.options.xaxis, categories: labels } }}\r\n                                series={[{ name: \"Veículos\", data: values }]}\r\n                                type=\"bar\"\r\n                                width=\"600\"\r\n                            />\r\n                            <Chart\r\n                                options={{ ...donutChart.options, labels, colors }}\r\n                                series={values}\r\n                                type=\"donut\"\r\n                                width=\"480\"\r\n                            />\r\n                        </section>\r\n                    </Paper>\r\n                    <Paper>\r\n                        <section>\r\n                            <table>\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th className='tHeader'\r\n                                            style={{ color: '#fff', backgroundColor: 'rgb(84, 110, 122, 0.7)' }}\r\n                                            colSpan={tableLabels.length}>Veículos por ano - {!selectedEmpresa ? 'Exibindo todos os veículos' : selectedEmpresa.razaoSocial}  </th>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        {tableLabels.map((l, i) => <th key={l}>{l}</th>)}\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {\r\n                                        tableData.map((tableValues, i) =>\r\n                                            <tr key={i}>\r\n                                                {tableValues.map((d, j) =>\r\n                                                    <td className='review relatorioTD' key={j}>\r\n                                                        {d}\r\n                                                    </td>\r\n                                                )}\r\n                                            </tr>\r\n                                        )\r\n                                    }\r\n                                </tbody>\r\n                            </table>\r\n                        </section>\r\n                    </Paper>\r\n                    {/* <div className=\"addSpace\"> </div> */}\r\n                    <section className='rowContainer'>\r\n                        <Chart\r\n                            options={{\r\n                                title: {\r\n                                    ...donutChart.options.title,\r\n                                    text: `Seguros vencidos: ${segurosVencidos} / vigentes: ${segurosVigentes}`,\r\n                                },\r\n                                labels: ['Seguros vencidos', 'Seguros vigentes'],\r\n                                colors: ['#FF9800', '#3333ff']\r\n                            }}\r\n                            series={[Number(segurosVencidos), Number(segurosVigentes)]}\r\n                            type=\"pie\"\r\n                            width=\"400\"\r\n                        />\r\n                        <Chart\r\n                            options={{\r\n                                title: {\r\n                                    ...donutChart.options.title,\r\n                                    text: `Idade superior a 15 anos: ${oldVehicles} / inferior 15 anos: ${veiculosNovos}`,\r\n                                },\r\n                                labels: ['Veículos com mais de 15 anos', 'Veículos com menos de 15 anos'],\r\n                                colors: ['#f44336', '#2E93fA']\r\n                            }}\r\n                            series={[Number(oldVehicles), Number(veiculosNovos)]}\r\n                            type=\"pie\"\r\n                            width=\"420\"\r\n                            height='220'\r\n                        />\r\n                    </section>\r\n\r\n                </>\r\n            }\r\n        </main >\r\n    )\r\n}\r\n\r\nexport default RelatoriosTemplate","import React, { useState, useEffect } from 'react'\r\nimport StoreHOC from '../Store/StoreHOC'\r\nimport RelatoriosTemplate from './RelatoriosTemplate'\r\nimport moment from 'moment'\r\n\r\nconst sum = array => {\r\n    let newArray = [...array]\r\n    newArray.shift()\r\n    if (newArray[0]) {\r\n        const total = newArray.reduce((a, b) => a + b)\r\n        return total\r\n    }\r\n}\r\n\r\nconst average = array => {\r\n    let newArray = array.map(n => Number(n))\r\n    newArray.shift()\r\n\r\n    if (newArray[0]) {\r\n        const\r\n            sum = newArray.reduce((a, b) => a + b),\r\n            average = sum / newArray.length\r\n\r\n        return average.toFixed(2)\r\n    }\r\n}\r\n\r\nconst countExpired = vehicles => {\r\n\r\n    return vehicles\r\n        .filter(r => !r.vencimento || (moment(r.vencimento).isValid() && moment(r.vencimento).isBefore(moment()) && r.veiculoId && r))\r\n        .length\r\n}\r\n\r\nconst Relatorios = props => {\r\n\r\n    const\r\n        { veiculos, empresas } = props.redux,\r\n        [razaoSocial, setRazaoSocial] = useState(''),\r\n        [selectedEmpresa, setEmpresa] = useState(undefined),\r\n        [allExpired, setExpired] = useState(''),\r\n        [allValid, setValid] = useState(''),\r\n        [oldVehicles, setOldVehicles] = useState('')\r\n\r\n    const handleInput = e => {\r\n        const { value } = e.target\r\n        setRazaoSocial(value)\r\n        let empresa\r\n\r\n        if (value.length > 2) {\r\n            empresa = empresas.find(e => e.razaoSocial === value)\r\n            if (empresa) setEmpresa(empresa)\r\n        }\r\n        else setEmpresa('')\r\n    }\r\n\r\n    let selectedId, selectedVehicles\r\n    if (selectedEmpresa && selectedEmpresa !== '') {\r\n        selectedId = selectedEmpresa.codigoEmpresa\r\n        selectedVehicles = veiculos\r\n            .filter(v => v.codigoEmpresa === selectedId)\r\n    } else selectedVehicles = veiculos\r\n\r\n\r\n    // **************************MÉDIA****************************\r\n\r\n    const\r\n        idades =\r\n            selectedVehicles\r\n                .map(({ anoCarroceria }) => anoCarroceria)\r\n                .filter(ano => ano !== null)\r\n                .sort()\r\n\r\n    let mediaIdades = idades.reduce((a, b) => a + b / idades.length, 0)\r\n    mediaIdades = (new Date().getFullYear() - mediaIdades).toFixed(2)\r\n\r\n    // **************************CONTAGEM****************************\r\n\r\n    let counter = {}\r\n    idades.forEach(function (e) {\r\n        if (counter[e] === undefined) {\r\n            counter[e] = 0\r\n        }\r\n        counter[e] += 1\r\n    })\r\n\r\n    // *******************CONSOLIDAÇÃO DE VALORES**********************\r\n    const\r\n        unsortedLabels = Object.keys(counter),\r\n        labels = [...unsortedLabels.sort((a, b) => a - b)],\r\n        values = Object.values(counter)\r\n\r\n    let obj = {}, arr = [], ultimateObj = {}\r\n    labels.forEach(ano => {\r\n        selectedVehicles.forEach(v => {\r\n            if (v.anoCarroceria && v.anoCarroceria.toString() === ano) {\r\n                arr.push({ veiculoId: v.veiculoId, poltronas: v.poltronas })\r\n                if (!obj[ano]) obj[ano] = arr\r\n                else obj[ano].push(...arr)\r\n                arr = []\r\n            }\r\n        })\r\n        ultimateObj[ano] = obj[ano]\r\n        obj = {}\r\n    })\r\n\r\n    let parcial = 0, poltronasPerYear = ['Capacidade Total'], poltronasAcc = [], poltronasMedia = ['Capacidade Média']\r\n\r\n    Object.keys(ultimateObj).forEach(year => {\r\n        ultimateObj[year].forEach(v => {\r\n            parcial += v.poltronas\r\n        })\r\n        //poltronasTotal += parcial\r\n        poltronasPerYear.push(parcial)\r\n        poltronasMedia.push((parcial / ultimateObj[year].length).toFixed(2))\r\n\r\n        const acc = poltronasPerYear.reduce((a, b) => a + b, 0)\r\n        poltronasAcc.push(acc)\r\n        parcial = 0\r\n    })\r\n\r\n    poltronasPerYear.push(sum(poltronasPerYear))\r\n\r\n    let\r\n        tableLabels = ['Ano'],\r\n        tableValues = ['Nº de Veículos']\r\n\r\n    tableLabels.push(...labels, 'Total')\r\n    tableValues.push(...values)\r\n    tableValues.push(sum(tableValues))\r\n    poltronasMedia.push(average(poltronasMedia))\r\n\r\n    const tableData = [tableValues, poltronasMedia, poltronasPerYear]\r\n\r\n    // **************************MODA****************************\r\n    let moda = unsortedLabels.sort((a, b) => counter[a] - counter[b])\r\n    moda = moda[moda.length - 1]\r\n\r\n    //**********************SEGUROS VENCIDOS E VEÍCULOS COM LAUDO***********************\r\n    const currentYear = new Date().getFullYear()\r\n\r\n    useEffect(() => {\r\n\r\n        const\r\n            currentYear = new Date().getFullYear(),\r\n            expired = countExpired(selectedVehicles),\r\n            needsLaudo = selectedVehicles\r\n                .filter(v => currentYear - v.anoCarroceria > 14 && v.anoCarroceria !== null)\r\n                .length\r\n\r\n        setExpired(expired)\r\n        setValid(selectedVehicles.length - expired)\r\n        setOldVehicles(needsLaudo)\r\n\r\n    }, [selectedVehicles])\r\n\r\n    let segurosVencidos = [], segurosVigentes, veiculosAntigos, veiculosNovos\r\n\r\n    if (razaoSocial.length > 2 && selectedEmpresa) {\r\n        segurosVencidos = countExpired(selectedVehicles)\r\n\r\n        veiculosAntigos = selectedVehicles\r\n            .filter(v => currentYear - v.anoCarroceria > 14 && v.anoCarroceria !== null)\r\n            .length\r\n\r\n        segurosVigentes = selectedVehicles.length - segurosVencidos\r\n        veiculosNovos = selectedVehicles.length - veiculosAntigos\r\n    }\r\n    else {\r\n        segurosVencidos = allExpired\r\n        segurosVigentes = allValid\r\n        veiculosAntigos = oldVehicles\r\n        veiculosNovos = selectedVehicles.length - oldVehicles\r\n    }\r\n\r\n    return (\r\n        <RelatoriosTemplate\r\n            empresas={empresas}\r\n            razaoSocial={razaoSocial}\r\n            labels={labels}\r\n            values={values}\r\n            tableLabels={tableLabels}\r\n            tableData={tableData}\r\n            selectedEmpresa={selectedEmpresa}\r\n            selectedVehicles={selectedVehicles}\r\n            mediaIdades={mediaIdades}\r\n            moda={moda}\r\n            handleInput={handleInput}\r\n            segurosVencidos={segurosVencidos}\r\n            segurosVigentes={segurosVigentes}\r\n            oldVehicles={veiculosAntigos}\r\n            veiculosNovos={veiculosNovos}\r\n        />\r\n    )\r\n}\r\n\r\nconst collections = ['veiculos', 'empresas']\r\n\r\nexport default StoreHOC(collections, Relatorios)","import React from 'react'\r\nimport moment from 'moment'\r\n\r\nimport ShowFiles from './ShowFiles'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\r\n\r\nexport default function StandardTable({ tableData, staticFields, title, tableStyle, style, completed, showInfo, \r\n    showFiles, setShowFiles, filesCollection, primaryKey, close, filesIds, razaoSocial }) {\r\n\r\n    const dateFormat = value => {\r\n        if (moment(value, 'YYYY-MM-DDTHH:mm:ss.SSSZZ', true).isValid()) {\r\n            return moment(value, moment.ISO_8601, true).format('DD/MM/YYYY, HH:mm[h]')\r\n        }\r\n        else return value\r\n    }\r\n\r\n    const createButton = (action, index, files) => {\r\n        const disable = !tableData[index]?.info ? true : false\r\n        const dStyle = { cursor: 'default' }\r\n\r\n        switch (action) {\r\n            case ('info'):\r\n                return (\r\n                    <div style={{ display: 'flex', justifyContent: 'flex-start' }}>\r\n                        <span\r\n                            className='button'\r\n                            style={disable ? dStyle : {}}\r\n                            component='span'\r\n                            title={!disable ? 'Ver informações adicionais' : 'Nenhuma informação adicional'}\r\n                            onClick={() => showInfo(index)} >\r\n                            <InfoIcon color={!disable ? 'primary' : 'disabled'} />\r\n                        </span>\r\n\r\n                        {files ?\r\n                            <span className='button' component='span' title='Ver arquivos' onClick={() => { setShowFiles(files) }\r\n                            } >\r\n                                <FileCopyOutlinedIcon />\r\n                            </span>\r\n                            :\r\n                            <span style={{ padding: '2px 10px 0 17px' }}> - </span>\r\n                        }\r\n                    </div >\r\n                )\r\n            case ('completed'):\r\n                return <DoneIcon style={{ color: 'green' }} />\r\n            default: return\r\n        }\r\n    }\r\n\r\n    //A tabela é uma array de arrays. Cada row é uma array de objects, que tem field, label, action, style, etc. Cada Object é um td\r\n    let\r\n        tableHeaders = [],\r\n        arrayOfRows = [],\r\n        tableRow = []\r\n\r\n    tableData.forEach((log, i) => {\r\n        staticFields.forEach(obj => {\r\n\r\n            if (!tableHeaders.includes(obj.title)) tableHeaders.push(obj.title)\r\n            if (obj.field === 'info') {\r\n                tableRow.push({ ...obj, index: i, files: log?.files })\r\n            }\r\n            else if (obj.field === 'files') tableRow.push({ ...obj, files: log?.files })\r\n            else if (obj.action) tableRow.push({ ...obj, id: log?.id })\r\n            else tableRow.push({ ...obj, value: log[obj.field] })\r\n        })\r\n\r\n        arrayOfRows.push(tableRow)\r\n        tableRow = []\r\n    })\r\n    if (completed) {\r\n        const i = tableHeaders.indexOf('Analisar solicitação')\r\n        tableHeaders[i] = 'Concluída'\r\n    }\r\n    const tableSpan = arrayOfRows[0]?.length || ''\r\n\r\n    return (\r\n        showFiles ? <>\r\n            <ShowFiles\r\n                filesCollection={filesCollection}\r\n                close={close}\r\n                typeId={primaryKey}\r\n                filesIds={filesIds}\r\n                razaoSocial={razaoSocial}\r\n            />\r\n            <footer>\r\n                <div className='voltarDiv' style={{\r\n                    padding: '0px',\r\n                    margin: '30px 0 0 0',\r\n                    position: 'absolute',\r\n                    bottom: '1%',\r\n                    zIndex: '10'\r\n                }}>\r\n                    <Button variant='outlined' color='primary' onClick={() => setShowFiles(false)}>\r\n                        <ArrowBackIcon size='tiny' />\r\n                        <span style={{ padding: '2px 0 0 2px', marginLeft: '2px', fontSize: '.85rem' }}>Voltar</span>\r\n                    </Button>\r\n                </div>\r\n            </footer>\r\n        </>\r\n            :\r\n            <table style={tableStyle || undefined}>\r\n                <thead>\r\n                    <tr>\r\n                        <th className='tHeader'\r\n                            style={style}\r\n                            colSpan={tableSpan}>{title}</th>\r\n                    </tr>\r\n                    <tr>\r\n                        {tableHeaders.map((l, i) => <th key={i} style={style}>{l}</th>)}\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {\r\n                        arrayOfRows.map((rowArray, j) =>\r\n                            <tr key={j}>\r\n                                {\r\n                                    rowArray.map((obj, i) =>\r\n                                        <td\r\n                                            key={i}\r\n                                            style={obj?.style ? obj.style : style}\r\n                                            className={obj.type === 'link' && obj.laudoDocId ? 'link2' : 'review'}\r\n                                        >\r\n                                            {obj.type === 'date' ? dateFormat(obj.value)\r\n                                                : obj?.action ? createButton(obj.action, obj?.index, obj?.files)\r\n                                                    : obj.value\r\n                                            }\r\n                                        </td>\r\n                                    )}\r\n                            </tr>\r\n                        )}\r\n                </tbody>\r\n            </table>\r\n    )\r\n}\r\n","const solicitacaoTable = [\r\n    {\r\n        field: 'action',\r\n        title: 'Movimentação',\r\n    },\r\n    {\r\n        field: 'user',\r\n        title: 'Usuário'\r\n    },\r\n    {\r\n        field: 'createdAt',\r\n        title: 'Registro no sistema',\r\n        type: 'date'\r\n    },\r\n    {\r\n        field: 'info',\r\n        title: 'Informações adicionais',\r\n        action: 'info',\r\n        style: {textAlign: 'center'}\r\n    }   \r\n]\r\n\r\nexport default solicitacaoTable","import React from 'react'\r\nimport moment from 'moment'\r\n\r\nimport Table from '../Reusable Components/Table'\r\nimport solicitacaoTable from '../Forms/solicitacaoTable'\r\nimport ClosePopUpButton from '../Reusable Components/ClosePopUpButton'\r\n\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport Button from '@material-ui/core/Button'\r\n\r\nexport default function SolHistory({ solicitacao, showInfo, historyLog, setHistoryLog, close, vehicleDocs, empresaDocs, showFiles, setShowFiles, filesIds }) {\r\n\r\n    const\r\n        { history } = solicitacao,\r\n        date = moment(historyLog?.createdAt).format('DD/MM/YYYY, HH:mm[h]')\r\n    let docSelection = {}\r\n    if (solicitacao.hasOwnProperty('veiculoId'))\r\n        docSelection = {\r\n            primaryKey: 'veiculoId',\r\n            filesCollection: vehicleDocs\r\n        }\r\n    else\r\n        docSelection = {\r\n            primaryKey: 'empresaId',\r\n            filesCollection: empresaDocs\r\n        }\r\n\r\n    return (\r\n        <main className=\"popUpWindow\" sytle={{ width: '90%' }}>\r\n            {!historyLog ?\r\n                <Table\r\n                    {...docSelection}\r\n                    tableData={history}\r\n                    staticFields={solicitacaoTable}\r\n                    length={solicitacaoTable.length}\r\n                    title={`Solicitação nº ${solicitacao?.numero}`}\r\n                    id={solicitacao.id}\r\n                    razaoSocial={solicitacao?.empresa}\r\n                    showInfo={showInfo}\r\n                    style={{ padding: '9px 4px' }}\r\n                    tableStyle={{ marginTop: '23px' }}\r\n                    showFiles={showFiles}\r\n                    setShowFiles={setShowFiles}\r\n                    close={close}\r\n                    filesIds={filesIds}\r\n                />\r\n                :\r\n                <>\r\n                    <header className='infoLogHeader'>\r\n                        <h3>Informações adicionais</h3>\r\n                        <hr />\r\n                        <div className='floatRight'>Inserido por {historyLog?.user} {date ? 'às ' + date : ''}</div>\r\n                    </header>\r\n                    <section>\r\n\r\n                        <br /><br /><br />\r\n                        <div>{historyLog.info}</div>\r\n                    </section>\r\n                    <footer>\r\n                        <div className='voltarDiv' style={{\r\n                            padding: '0px',\r\n                            margin: '30px 0 0 0',\r\n                            position: 'absolute',\r\n                            bottom: '1%'\r\n                        }}>\r\n                            <Button variant='outlined' color='primary' onClick={() => setHistoryLog(false)}>\r\n                                <ArrowBackIcon size='tiny' />\r\n                                <span style={{ padding: '2px 0 0 2px', marginLeft: '2px', fontSize: '.85rem' }}>Voltar</span>\r\n                            </Button>\r\n                        </div>\r\n                    </footer>\r\n                </>\r\n            }\r\n            <ClosePopUpButton close={close} />\r\n        </main >\r\n    )\r\n}","import React from 'react'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n\r\nexport default function SolicitacoesTemplate({ completed, showCompleted }) {\r\n    return (\r\n        <header style={{ display:'flex', justifyContent: 'flex-end', height: '50px', paddingBotom: '10px' }}>\r\n            <FormControlLabel\r\n                style={{ marginTop: '20px' }}\r\n                control={\r\n                    <Checkbox\r\n                        checked={completed === true}\r\n                        onChange={() => showCompleted(!completed)}\r\n                        value={completed}\r\n                    />\r\n                }\r\n                label={<p style={{ color: '#2979ff', fontSize: '0.7rem', float: 'right' }}> Mostrar solicitações concluídas</p>}\r\n            />\r\n        </header>\r\n    )\r\n}\r\n","export const solicitacoesTable = [\r\n    {\r\n        field: 'numero',\r\n        title: 'Número',\r\n    },\r\n    {\r\n        field: 'subject',\r\n        title: 'Solicitação',\r\n    },\r\n    {\r\n        field: 'empresa',\r\n        title: 'Empresa',\r\n    },\r\n    {\r\n        field: 'veiculo',\r\n        title: 'Veículo',\r\n    },\r\n    {\r\n        field: 'status',\r\n        title: 'Situação',\r\n    },\r\n    {\r\n        field: 'updatedAt',\r\n        title: 'Última Atualização',\r\n        type: 'date'\r\n    },    \r\n   /*  {\r\n        field: 'history',\r\n        title: 'Ver histórico',        \r\n        action: 'showHistory'\r\n    },\r\n    {\r\n        field: 'assess',\r\n        title: '    ',\r\n        action: 'assess'\r\n    }   */\r\n]\r\n","import React from 'react'\r\nimport * as FileSaver from 'file-saver';\r\nimport * as XLSX from 'xlsx';\r\n\r\nimport MaterialTable from 'material-table';\r\n\r\nimport { solicitacoesTable } from '../Forms/solicitacoesTable'\r\n\r\nexport default function ({ tableData, title, showDetails, assessDemand, completed, showInfo }) {\r\n\r\n    let parsedData = JSON.parse(JSON.stringify(tableData))\r\n    parsedData.forEach(obj => delete obj.history)\r\n\r\n    const dataToExcel = rawData => {\r\n        const keysToDelete = ['id', 'v', 'veiculoId', 'empresaId', 'tableData', 'createdAt', 'completed']\r\n        rawData.forEach((obj, i) => {\r\n            Object.keys(obj).forEach(key => {\r\n                solicitacoesTable.forEach(({ field, title }) => {\r\n                    if (key === field) {\r\n                        obj[title] = obj[key]\r\n                        delete obj[key]\r\n                    } else if (keysToDelete.includes(key)) delete obj[key]\r\n                })\r\n            })\r\n        })\r\n        return rawData\r\n    }\r\n\r\n    return (\r\n        <div style={{ margin: '10px 0' }} className='noPrint'>\r\n            <MaterialTable\r\n                title={title}\r\n                columns={solicitacoesTable}\r\n                data={parsedData}\r\n                style={{ fontFamily: 'Segoe UI', fontSize: '14px' }}\r\n                options={{\r\n                    filtering: true,\r\n                    exportButton: true,\r\n                    exportFileName: 'Solicitações',\r\n                    exportCsv: (columns, data) => {\r\n                        const\r\n                            fileType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8',\r\n                            fileExtension = '.xlsx',\r\n                            fileName = 'Solicitações'\r\n\r\n                        const exportToXLSX = (csvData, fileName) => {\r\n                            const ws = XLSX.utils.json_to_sheet(csvData);\r\n                            const wb = { Sheets: { 'data': ws }, SheetNames: ['data'] };\r\n                            const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\r\n                            const data = new Blob([excelBuffer], { type: fileType });\r\n                            FileSaver.saveAs(data, fileName + fileExtension);\r\n                        }\r\n\r\n                        const tst = dataToExcel(data)\r\n                        exportToXLSX(tst, fileName)\r\n                    },\r\n                    actionsColumnIndex: -1,\r\n                    searchFieldStyle: { color: '#024', fontSize: '14px' },\r\n                    headerStyle: { backgroundColor: '#FAFAFC' },\r\n                    emptyRowsWhenPaging: false,\r\n                    pageSize: 10,\r\n                }}\r\n\r\n                localization={{\r\n                    header: { actions: 'Opções' },\r\n                    body: {\r\n                        emptyDataSourceMessage: 'Nenhuma solicitação aberta no momento.',\r\n                        editRow: { deleteText: 'Tem certeza que deseja apagar esse registro ?' },\r\n                        deleteTooltip: 'Apagar',\r\n                        filterRow: { filterTooltip: 'Filtrar' }\r\n                    },\r\n                    toolbar: {\r\n                        searchTooltip: 'Procurar',\r\n                        searchPlaceholder: 'Procurar',\r\n                        exportName: 'Salvar como arquivo do excel',\r\n                        exportAriaLabel: 'Exportar',\r\n                        exportTitle: 'Exportar'\r\n                    },\r\n                    pagination: {\r\n\r\n                        labelRowsSelect: 'Resultados por página',\r\n                        labelDisplayedRows: ' {from}-{to} a {count}',\r\n                        firstTooltip: 'Primeira página',\r\n                        previousTooltip: 'Página anterior',\r\n                        nextTooltip: 'Próxima Página',\r\n                        lastTooltip: 'Última Página',\r\n\r\n                    }\r\n                }}\r\n                actions={[\r\n                    {\r\n                        icon: 'history_icon',\r\n                        iconProps: { color: 'primary' },\r\n                        tooltip: 'Ver histórico',\r\n                        onClick: (event, rowData) => showDetails(rowData['id'])\r\n                    },\r\n                    rowData => ({\r\n                        icon: !completed ? 'assignment_turned_in_outlined' : rowData?.status === 'Solicitação indeferida' ? 'clear' : 'done_icon',\r\n                        iconProps: {\r\n                            className: !completed ? 'assessDemandButton' : '',\r\n                            color: rowData?.status === 'Solicitação indeferida' ? 'secondary' : completed ? 'action' : 'disabled'\r\n                        },\r\n                        tooltip: rowData?.status.match('Aguardando')\r\n                            ? 'Analisar solicitação'\r\n                            : rowData?.status.match('Pendências')\r\n                                ? 'Abrir solicitação'\r\n                                : rowData?.status === 'Solicitação indeferida' ?\r\n                                    'Indeferida'\r\n                                    : 'Concluída',\r\n                        onClick: (event, rowData) => !completed ? assessDemand(rowData['id']) : null\r\n                    })\r\n                ]}\r\n            />\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport SolHistory from './SolHistory'\r\nimport SolicitacoesTemplate from './SolicitacoesTemplate'\r\nimport SolicitacoesTable from './SolicitacoesTable'\r\nimport { logRoutesConfig } from './logRoutesConfig'\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\n\r\n\r\nfunction Solicitacoes(props) {\r\n\r\n    const\r\n        { veiculos, empresas, vehicleDocs, empresaDocs } = props.redux,\r\n        [logs, setLogs] = useState([]),\r\n        [showHistory, setShowHistory] = useState(false),\r\n        [selectedLog, selectLog] = useState(),\r\n        [completed, showCompleted] = useState(false),\r\n        [historyLog, setHistoryLog] = useState(),\r\n        [alertProperties, setAlertDialog] = useState({ openAlertDialog: false, customMessage: '', customTitle: '' }),\r\n        [showFiles, setShowFiles] = useState(false),\r\n        [filesIds, setFilesId] = useState(),\r\n        { openAlertDialog, customTitle, customMessage } = alertProperties\r\n\r\n    //*********Effect adds eventListner to Esc key--> back/closes windows ************/\r\n    useEffect(() => {\r\n        function escFunction(e) {\r\n            if (e.keyCode === 27) {\r\n                if (!showFiles && !historyLog) setShowHistory()\r\n                if (showFiles) setShowFiles(false)\r\n                else if (historyLog) setHistoryLog()\r\n            }\r\n        }\r\n        document.addEventListener('keydown', escFunction)\r\n        return () => document.removeEventListener('keydown', escFunction)\r\n    }, [historyLog, showFiles])\r\n\r\n    //********Prepares the Logs ArrayofObjects from the DB to be displayed with additional and filtered fields************/\r\n    useEffect(() => {\r\n\r\n        async function getLogs() {\r\n\r\n            const originalLogs = [...props.redux.logs]\r\n\r\n            let logs = originalLogs.map(log => {\r\n                log.empresa = empresas.find(e => e.codigoEmpresa === log.empresaId)?.razaoSocial\r\n                log.veiculo = veiculos.find(v => v.veiculoId === log.veiculoId)?.placa\r\n                const { __v, ...filtered } = log\r\n                return filtered\r\n            })\r\n\r\n            if (completed) logs = logs.filter(l => l.completed === true)\r\n            else logs = logs.filter(l => l.completed === false)\r\n            setLogs(logs)\r\n        }\r\n        getLogs()\r\n\r\n    }, [veiculos, empresas, completed, props.redux.logs])\r\n\r\n    const assessDemand = async id => {\r\n\r\n        let log = logs.find(l => l.id === id)\r\n        selectLog(log)\r\n\r\n        let pathname = logRoutesConfig.find(r => log?.subject.match(r.subject))?.path\r\n        if (!pathname.match('/solicitacoes')) pathname = '/solicitacoes' + pathname\r\n        props.history.push({ pathname, state: { demand: log } })\r\n    }\r\n\r\n    const showDetails = async id => {\r\n        setHistoryLog(false)\r\n        setShowFiles(false)\r\n\r\n        const log = logs.find(l => l.id === id)\r\n        await selectLog(log)\r\n        setShowHistory(true)\r\n    }\r\n\r\n    const showInfo = index => {\r\n        if (selectedLog && selectedLog?.history) {\r\n\r\n            const historyLog = selectedLog?.history[index]\r\n\r\n            if (!historyLog?.info) return\r\n            setHistoryLog(historyLog)\r\n        }\r\n    }\r\n    const renderFiles = (ids) => {\r\n        if (ids) {\r\n            setShowFiles(true)\r\n            setFilesId(ids)\r\n        }\r\n        else setShowFiles(false)\r\n    }\r\n\r\n    const toggleAlertDialog = () => setAlertDialog({ ...alertProperties, openAlertDialog: !openAlertDialog })\r\n    const close = () => {\r\n        setShowHistory(false)\r\n        setShowFiles(false)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <SolicitacoesTemplate\r\n                completed={completed}\r\n                showCompleted={showCompleted}\r\n            />\r\n            <SolicitacoesTable\r\n                tableData={logs}\r\n                title={!completed ? 'Solicitações em andamento' : 'Solicitações concluídas'}\r\n                showDetails={showDetails}\r\n                assessDemand={assessDemand}\r\n                completed={completed}\r\n                style={{ textAlign: 'center' }}\r\n            />\r\n            {showHistory && <SolHistory\r\n                solicitacao={selectedLog}\r\n                close={close}\r\n                showInfo={showInfo}\r\n                historyLog={historyLog}\r\n                setHistoryLog={setHistoryLog}\r\n                vehicleDocs={vehicleDocs}\r\n                empresaDocs={empresaDocs}\r\n                setShowFiles={renderFiles}\r\n                showFiles={showFiles}\r\n                filesIds={filesIds}\r\n            />\r\n            }\r\n            {openAlertDialog &&\r\n                <AlertDialog open={openAlertDialog} close={toggleAlertDialog} customMessage={customMessage} customTitle={customTitle} />}\r\n        </>\r\n    )\r\n}\r\n\r\nconst collections = ['veiculos', 'empresas', 'logs', 'getFiles/vehicleDocs', 'getFiles/empresaDocs']\r\n\r\nexport default StoreHOC(collections, Solicitacoes)","const width = '240px'\r\nexport const altContratoForm = [\r\n    {\r\n        field: 'numeroAlteracao',\r\n        label: 'Número da alteração',\r\n        maxLength: 3,\r\n        pattern: '^\\\\d{1,3}$',\r\n        width\r\n    },\r\n    {\r\n        field: 'numeroRegistro',\r\n        label: 'Registro na junta comercial',\r\n        maxLength: 40,\r\n        width\r\n    },\r\n    {\r\n        field: 'numeroSei',\r\n        label: 'Número do registro SEI (se houver)',\r\n        maxLength: 30,\r\n        width\r\n    },\r\n    {\r\n        field: 'dataJunta',\r\n        label: 'Data de registro na Junta Comercial',\r\n        type: 'date',\r\n        width\r\n    }\r\n]","import React, { Fragment } from 'react'\r\nimport ShowLocalFiles from '../Reusable Components/ShowLocalFiles'\r\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\r\nimport moment from 'moment'\r\n\r\nexport default function Revisao({ data, forms, filesForm, files, demandFiles }) {\r\n\r\n    //Para cada formulário, roda o State do componente(container) e atribui a propriedade value em cada campo \r\n    forms.forEach(form => {\r\n        form.forEach(objField => {\r\n            Object.entries(data).forEach(([k, v]) => {\r\n                if (objField.field === k)\r\n                    objField.value = v\r\n            })\r\n        })\r\n    })\r\n\r\n    //Consertando a data - (campo 'Vencimento do contrato')\r\n    const i = forms[0].findIndex(el => el.field === 'vencimentoContrato')\r\n    if (i !== -1) {\r\n        let venc = forms[0][i].value\r\n        if (venc && moment(venc).isValid()) {\r\n            venc = moment(venc).format('DD/MM/YYYY')\r\n            forms[0][i].value = venc\r\n        }\r\n    }\r\n\r\n    const tablesSubtitles = ['Dados da empresa', 'Informações sobre a alteração do contrato social']\r\n\r\n    return (\r\n        <>\r\n            <section className='flex'>\r\n                <div className='divTable'>\r\n                    {\r\n                        forms.map((form, y) =>\r\n                            <Fragment key={y}>\r\n                                <table style={y === 1 ? { tableLayout: 'fixed' } : {}}>\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th className='tHeader'\r\n                                                colSpan={form.length}>{tablesSubtitles[y]}\r\n                                            </th>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            {form.map(({ label }, i) => <th key={i}>{label}</th>)}\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <tr>\r\n                                            {form.map(({ value }, k) =>\r\n                                                <td className='review' key={k}>\r\n                                                    {value}\r\n                                                </td>\r\n                                            )}\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                            </Fragment>\r\n                        )}\r\n                </div>\r\n\r\n                <h3 style={{ margin: '30px 0 0 25px' }}> <FileCopyOutlinedIcon style={{ verticalAlign: 'middle', padding: '0 0 0 8px' }} /> Documentos </h3>\r\n                {(files || demandFiles) &&\r\n                    <ShowLocalFiles\r\n                        demandFiles={demandFiles}\r\n                        form={filesForm}\r\n                        files={files}\r\n                        collection='empresaDocs'\r\n                    />\r\n                }\r\n            </section >\r\n        </>\r\n    )\r\n}","import React, { Fragment } from 'react'\r\n\r\nimport FormSubtiltle from '../Reusable Components/FormSubtiltle'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nimport { sociosForm } from '../Forms/sociosForm'\r\nimport TextInput from '../Reusable Components/TextInput'\r\nimport { errorHandler, helper } from '../Utils/checkInputErrors';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    list: {\r\n        margin: theme.spacing(1),\r\n        width: 180,\r\n        fontSize: '0.7rem',\r\n        fontColor: '#999',\r\n        textAlign: 'center',\r\n    },\r\n    iconButton: {\r\n        marginTop: '17px',\r\n        padding: '6px 0px'\r\n    }\r\n}))\r\n\r\nexport default function ({ handleInput, handleBlur, data, addSocio, enableEdit, handleEdit, removeSocio }) {\r\n\r\n    const\r\n        { selectedEmpresa, subtitles, activeStep, filteredSocios } = data,\r\n        classes = useStyles(), { iconButton, list } = classes\r\n\r\n    return (\r\n        <>\r\n            {\r\n                selectedEmpresa &&\r\n                <section className=\"flex paper\">\r\n                    <FormSubtiltle subtitle={subtitles[activeStep]} />\r\n                    <div className=\"flex center\">\r\n                        <div style={{ padding: '10px 0', width: '100%' }}>\r\n                            <TextInput\r\n                                form={sociosForm}\r\n                                data={data}\r\n                                handleBlur={handleBlur}\r\n                                handleInput={handleInput}\r\n                            />\r\n                        </div>\r\n                        <div style={{ margin: '5px 0 7px 84.58%', width: '100%' }}>\r\n                            <Button color='primary' variant='outlined' size='small' onClick={addSocio}>\r\n                                <AddIcon /> Adicionar sócio\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n            }\r\n\r\n            {\r\n                selectedEmpresa && filteredSocios.length === 0 &&\r\n                <section>\r\n                    <p>\r\n                        Nenhum sócio cadastrado para {selectedEmpresa.razaoSocial}\r\n                    </p>\r\n                </section>\r\n            }\r\n            {\r\n                filteredSocios?.length > 0 &&\r\n                <>\r\n                    <section className=\"flex center paper\">\r\n                        <p > Sócios cadastrados</p>\r\n                        {filteredSocios.map((s, i) =>\r\n                            <div key={i}>\r\n                                {sociosForm.map((e, k) =>\r\n                                    <Fragment key={k + 1000}>\r\n                                        <TextField\r\n                                            value={s[e.field] || ''}\r\n                                            name={e.field}\r\n                                            label={e.label}\r\n                                            className={list}\r\n                                            disabled={s.edit && e.field !== 'cpfSocio' ? false : true}\r\n                                            onChange={handleEdit}\r\n                                            error={s.edit ? errorHandler(s[e.field], e) : null}\r\n                                            helperText={s.edit ? helper(s[e.field], e) : null}\r\n                                            type={e?.type}\r\n                                            InputLabelProps={\r\n                                                {\r\n                                                    shrink: true,\r\n                                                    style: {\r\n                                                        fontWeight: 600,\r\n                                                        fontFamily: '\\'Segoe UI\\', Tahoma, Geneva, Verdana, sans-serif',\r\n                                                        color: '#888'\r\n                                                    }\r\n                                                }}\r\n                                            inputProps={{\r\n                                                style: {\r\n                                                    fontSize: '13px',\r\n                                                    color: s.edit === true ? '#000'\r\n                                                        : s.status === 'new' ? 'green'\r\n                                                            : s.status === 'modified' ? '#FF2500'\r\n                                                                : s.status === 'deleted' ? 'red'\r\n                                                                    : '#888',\r\n                                                    textDecoration: s.status === 'deleted' && !s.edit ? 'line-through' : ''\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                    </Fragment>\r\n                                )}\r\n                                <Button component='span' className={iconButton} title='editar' onClick={() => enableEdit(i)}>\r\n                                    <EditIcon />\r\n                                </Button>\r\n\r\n                                <Button className={iconButton}\r\n                                    color={s.status === 'deleted' ? 'primary' : 'secondary'}\r\n                                    title={s.status === 'deleted' ? 'Desfazer exclusão' : 'Remover'}\r\n                                    onClick={() => removeSocio(i)}>\r\n                                    {s.status === 'deleted' ? <i className='material-icons'>undo</i> : <DeleteIcon />}\r\n                                </Button>\r\n                            </div>\r\n                        )}\r\n                    </section>\r\n                </>\r\n            }\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport { altContratoForm } from '../Forms/altContratoForm'\r\nimport { empresasForm } from '../Forms/empresasForm'\r\nimport EmpresaReview from './EmpresaReview'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport FormSubtiltle from '../Reusable Components/FormSubtiltle'\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport CustomStepper from '../Reusable Components/Stepper'\r\nimport TextInput from '../Reusable Components/TextInput'\r\nimport StepperButtons from '../Reusable Components/StepperButtons'\r\nimport DragAndDrop from '../Reusable Components/DragAndDrop'\r\nimport AltSociosTemplate from './AltSociosTemplate'\r\nimport { empresaFiles } from '../Forms/empresaFiles'\r\n\r\n\r\nconst AltContratoTemplate = (\r\n    { empresas, data, setActiveStep, enableEdit, handleEdit, addSocio, removeSocio, handleInput, handleSubmit, handleFiles, removeFile,\r\n        setShowPendencias }) => {\r\n\r\n    const\r\n        { selectedEmpresa, demand, demandFiles, activeStep, stepTitles, subtitles, dropDisplay, altContratoDoc, fileToRemove, info, showPendencias } = data,\r\n        headerTitle = `Alteração de contrato social - ${selectedEmpresa?.razaoSocial}`,\r\n        forms = [empresasForm, altContratoForm]\r\n\r\n    return (\r\n        <main>\r\n            <header>\r\n                <Crumbs links={['Empresas', '/empresas']} text='Alteração de dados e contrato social' />\r\n                {/*--------------------- Steppers ------------------------------*/}\r\n                <section>\r\n                    <CustomStepper\r\n                        activeStep={activeStep}\r\n                        steps={stepTitles}\r\n                        setActiveStep={setActiveStep}\r\n                    />\r\n                </section>\r\n                <div className=\"flex center\">\r\n                    <SelectEmpresa\r\n                        empresas={empresas}\r\n                        data={data}\r\n                        headerTitle={headerTitle}\r\n                        handleInput={handleInput}\r\n                    />\r\n                </div>\r\n            </header>\r\n            {\r\n                //   selectedEmpresa?.cnpj &&\r\n                selectedEmpresa &&\r\n                <>\r\n                    {/*--------------------- Form / inputs -------------------------*/}\r\n                    {\r\n                        activeStep !== 2 ?\r\n                            <section className=\"flex paper\">\r\n                                <FormSubtiltle subtitle={subtitles[activeStep]} />\r\n                                {\r\n                                    activeStep < 2\r\n                                        ?\r\n                                        <>\r\n                                            <TextInput\r\n                                                form={forms[activeStep]}\r\n                                                data={data}\r\n                                                handleInput={handleInput}\r\n                                                style={{ width: '100%' }}\r\n                                            />\r\n                                            {\r\n                                                activeStep === 1 &&\r\n                                                <div className='flex center' style={{ width: '100%' }}>\r\n                                                    <DragAndDrop\r\n                                                        name='altContratoDoc'\r\n                                                        style={{ width: '440px' }}\r\n                                                        dropDisplay={dropDisplay}\r\n                                                        formData={altContratoDoc}\r\n                                                        handleFiles={handleFiles}\r\n                                                        demandFiles={demandFiles}\r\n                                                        removeFile={removeFile}\r\n                                                        fileToRemove={fileToRemove}\r\n                                                    />\r\n                                                </div>\r\n                                            }\r\n                                        </>\r\n                                        :\r\n                                        <EmpresaReview\r\n                                            data={data}\r\n                                            forms={forms}\r\n                                            files={altContratoDoc}\r\n                                            demandFiles={demandFiles}\r\n                                            filesForm={empresaFiles}\r\n                                        />\r\n                                }\r\n                            </section>\r\n                            :\r\n                            <section>\r\n                                <AltSociosTemplate\r\n                                    data={data}\r\n                                    handleInput={handleInput}\r\n                                    addSocio={addSocio}\r\n                                    removeSocio={removeSocio}\r\n                                    handleFiles={handleFiles}\r\n                                    enableEdit={enableEdit}\r\n                                    handleEdit={handleEdit}\r\n                                />\r\n                            </section>\r\n                    }\r\n                    <footer>\r\n                        <StepperButtons\r\n                            demand={demand}\r\n                            declineButtonLabel='Indeferir'\r\n                            setShowPendencias={setShowPendencias}\r\n                            showPendencias={showPendencias}\r\n                            info={info}\r\n                            activeStep={activeStep}\r\n                            lastStep={stepTitles.length - 1}\r\n                            setActiveStep={setActiveStep}\r\n                            handleInput={handleInput}\r\n                            handleSubmit={handleSubmit}\r\n                        />\r\n                    </footer>\r\n                </>\r\n            }\r\n        </main>\r\n    )\r\n}\r\n\r\nexport default AltContratoTemplate","import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\nimport AltContratoTemplate from './AltContratoTemplate'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\nimport { logGenerator } from '../Utils/logGenerator'\r\nimport { removeFile as globalRemoveFile, sizeExceedsLimit } from '../Utils/handleFiles'\r\nimport valueParser from '../Utils/valueParser'\r\n\r\nimport { altContratoForm } from '../Forms/altContratoForm'\r\nimport { empresasForm } from '../Forms/empresasForm'\r\nimport { sociosForm } from '../Forms/sociosForm'\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\n\r\nconst AltContrato = props => {\r\n\r\n    const\r\n        { empresas, socios } = props.redux,\r\n        [state, setState] = useState({\r\n            razaoSocial: '',\r\n            activeStep: 0,\r\n            stepTitles: ['Alterar dados da empresa', 'Informações sobre alteração do contrato social', 'Informações sobre sócios', 'Revisão'],\r\n            subtitles: ['Utilize os campos abaixo caso deseje editar os dados da empresa',\r\n                'Informe as alterações no contrato social e anexe uma cópia do documento',\r\n                'Adicione ou altere sócios e suas respectivas participações.',\r\n                'Revise os dados informados.'\r\n            ],\r\n            dropDisplay: 'Clique ou arraste para anexar a cópia da alteração do contrato social ',\r\n            demand: undefined,\r\n            confirmToast: false,\r\n            filteredSocios: [],\r\n            showPendencias: false,\r\n            openAlertDialog: false\r\n            //selectedEmpresa: empresas[0],\r\n            //filteredSocios: [socios[0], socios[1]],\r\n        })\r\n\r\n    //ComponentDidMount para carregar demand, se houver\r\n    useEffect(() => {\r\n        const demand = props?.location?.state?.demand\r\n\r\n        if (demand && demand.history[0]) {\r\n            const\r\n                { empresaDocs } = props.redux,\r\n                { altContrato, socioUpdates, files } = demand?.history[0],\r\n                selectedEmpresa = empresas.find(e => e.empresaId === demand.codigoEmpresa),\r\n                altContratoFields = {}\r\n\r\n            let\r\n                filteredSocios = JSON.parse(JSON.stringify(socios.filter(s => s.codigoEmpresa === selectedEmpresa.codigoEmpresa))),\r\n                demandFiles\r\n\r\n            if (altContrato)\r\n                altContratoForm.forEach(({ field }) => altContratoFields[field] = altContrato[field])\r\n\r\n            if (socioUpdates[0]) {\r\n                const newSocios = []\r\n                filteredSocios.forEach(fs => {\r\n                    socioUpdates.forEach(us => {\r\n                        if (fs.socioId === us?.socioId) {\r\n                            Object.keys(us).forEach(k => {\r\n                                fs[k] = us[k]\r\n                            })\r\n                        }\r\n                        if (us.status === 'new' && !newSocios.includes(us))\r\n                            newSocios.push(us)\r\n                    })\r\n                })\r\n                filteredSocios = filteredSocios.concat(newSocios)\r\n            }\r\n            if (files)\r\n                demandFiles = empresaDocs.filter(d => files.includes(d.id))\r\n\r\n            setState({ ...state, ...altContrato, ...selectedEmpresa, selectedEmpresa, demand, demandFiles, filteredSocios, activeStep: 3 })\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n        if (state.selectedEmpresa) {\r\n\r\n            const codigoEmpresa = state.selectedEmpresa.codigoEmpresa,\r\n                originalSocios = JSON.parse(JSON.stringify(socios.filter(s => s.codigoEmpresa === codigoEmpresa))) || []\r\n\r\n            setState({ ...state, originalSocios })\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [state.selectedEmpresa])\r\n\r\n    const setActiveStep = action => {\r\n\r\n        let activeStep = state.activeStep\r\n        if (action === 'next') activeStep++\r\n        if (action === 'back') activeStep--\r\n        if (action === 'reset') activeStep = 0\r\n        setState({ ...state, activeStep })\r\n\r\n        if (activeStep === 3)\r\n            checkSocioUpdates()\r\n    }\r\n\r\n    const handleInput = e => {\r\n        const { name, value } = e.target\r\n        let\r\n            selectedEmpresa = {},\r\n            filteredSocios\r\n\r\n        if (name === 'razaoSocial') {\r\n            selectedEmpresa = empresas.find(e => e.razaoSocial === value) || {}\r\n            let venc = selectedEmpresa?.vencimentoContrato\r\n\r\n            if (venc && venc.length > 0)\r\n                selectedEmpresa.vencimentoContrato = venc.substr(0, 10)\r\n\r\n            if (selectedEmpresa?.codigoEmpresa)\r\n                filteredSocios = JSON.parse(JSON.stringify(socios.filter(s => s.codigoEmpresa === selectedEmpresa.codigoEmpresa)))\r\n\r\n            setState({ ...state, ...selectedEmpresa, selectedEmpresa, filteredSocios, [name]: value })\r\n        }\r\n        else {\r\n            const parsedValue = valueParser(name, value)\r\n            setState({ ...state, [name]: parsedValue })\r\n        }\r\n    }\r\n\r\n    const enableEdit = index => {\r\n\r\n        let editSocio = state.filteredSocios\r\n        if (editSocio[index].edit === true) {\r\n            editSocio[index].edit = false\r\n            checkSocioUpdates()\r\n        }\r\n        else {\r\n            editSocio.forEach(s => s.edit = false)\r\n            editSocio[index].edit = true\r\n        }\r\n        setState({ ...state, filteredSocios: editSocio })\r\n    }\r\n\r\n    const handleEdit = e => {\r\n        const\r\n            { name } = e.target,\r\n            { filteredSocios } = state\r\n\r\n        let { value } = e.target\r\n\r\n        if (name === 'share')\r\n            value = value.replace(',', '.')\r\n\r\n        let editSocio = filteredSocios.find(s => s.edit === true)\r\n        const index = filteredSocios.indexOf(editSocio)\r\n\r\n        editSocio[name] = value\r\n\r\n        const fs = filteredSocios\r\n        fs[index] = editSocio\r\n\r\n        setState({ ...state, filteredSocios: fs })\r\n    }\r\n\r\n    const addSocio = async () => {\r\n        let socios = state.filteredSocios,\r\n            sObject = {},\r\n            invalid = 0,\r\n            totalShare = 0\r\n\r\n        sociosForm.forEach(obj => {\r\n            if (state[obj.field] === '' || state[obj.field] === undefined) {\r\n                invalid += 1\r\n            }\r\n        })\r\n\r\n        if (invalid === 100) {\r\n            setState({ ...state, alertType: 'fieldsMissing', openAlertDialog: true })\r\n            return null\r\n        }\r\n        else {\r\n            sociosForm.forEach(obj => {\r\n                Object.assign(sObject, { [obj.field]: state[obj.field] })\r\n            })\r\n            sObject.status = 'new'\r\n            socios.push(sObject)\r\n            socios.sort((a, b) => a.nomeSocio.localeCompare(b.nomeSocio))\r\n\r\n            //Verifica se a soma das participações passou 100%\r\n            socios.forEach(s => {\r\n                totalShare += Number(s.share)\r\n            })\r\n            if (totalShare > 100) {\r\n                socios.pop()\r\n                await setState({ ...state, alertType: 'overShared', openAlertDialog: true })\r\n                return\r\n            }\r\n\r\n            const clearForm = {}\r\n            sociosForm.forEach(obj => clearForm[obj.field] = '')\r\n\r\n            await setState({ ...state, ...clearForm, filteredSocios: socios, totalShare })\r\n            setTimeout(() => {\r\n                console.log(state)\r\n                document.getElementsByName('nomeSocio')[0].focus()\r\n            }, 200);\r\n        }\r\n    }\r\n\r\n    const removeSocio = index => {\r\n        const\r\n            { filteredSocios } = state,\r\n            socioToRemove = filteredSocios[index]\r\n\r\n        if (socioToRemove?.status === 'new') {\r\n            filteredSocios.splice(index, 1)\r\n            setState({ ...state, filteredSocios })\r\n        }\r\n        else {\r\n            if (socioToRemove.status && socioToRemove.status !== 'deleted') {\r\n                socioToRemove.originalStatus = socioToRemove.status\r\n                socioToRemove.status = 'deleted'\r\n            }\r\n            else if (socioToRemove?.status === 'deleted')\r\n                socioToRemove.status = socioToRemove?.originalStatus\r\n            else\r\n                socioToRemove.status = 'deleted'\r\n\r\n            setState({ ...state, filteredSocios })\r\n        }\r\n\r\n\r\n    }\r\n\r\n    const handleSubmit = async approved => {\r\n        const\r\n            { demand, altContratoDoc } = state,\r\n            altContrato = createRequestObj(altContratoForm),\r\n            altEmpresa = createRequestObj(empresasForm),\r\n            empresaUpdates = updateEmpresa(altEmpresa),\r\n            socioUpdates = checkSocioUpdates(),\r\n            log = createLog({ demand, altContrato, socioUpdates, approved })\r\n\r\n        let\r\n            socioIds = [],\r\n            toastMsg = 'Solicitação de alteração contratual enviada.'\r\n        //Se não houver nenhuma altreração, alerta e retorna\r\n        if (!demand && !altContrato && !empresaUpdates && !altContratoDoc && !socioUpdates && !socioUpdates[0]) {\r\n            alert('Nenhuma modificação registrada!')\r\n            return\r\n        }\r\n        //A alteração de dados da empresa não precisa de aprovação. Se for só isso, não gera demanda\r\n        if (empresaUpdates) {\r\n            axios.put('/api/editTableRow', empresaUpdates)\r\n            toastMsg = 'Dados da empresa alterados com sucesso.'\r\n            if (!socioUpdates[0] && !altContrato && !altContratoDoc) {\r\n                toast('Dados da empresa atualizados!')\r\n                setTimeout(() => { resetState() }, 750);\r\n                return\r\n            }\r\n        }\r\n        //Ao aprovar a solicitação(demanda)\r\n        if (demand && approved) {\r\n            //Registrar as alterações contratuais\r\n            if (altContrato)\r\n                axios.post('/api/altContrato', altContrato)\r\n            //Atualizar os sócios: existentes, novos e a excluir\r\n            if (socioUpdates) {\r\n                const\r\n                    { newSocios, oldSocios, deletedSocios } = socioUpdates,\r\n                    requestInfo = {\r\n                        table: 'socios',\r\n                        tablePK: 'socio_id'\r\n                    }\r\n                if (newSocios[0])\r\n                    await axios.post('/api/cadSocios', { socios: newSocios })\r\n                        .then(async r => {\r\n                            const ids = r?.data.map(s => s.socio_id)\r\n                            if (ids[0])\r\n                                socioIds = socioIds.concat(ids)\r\n                        })\r\n                if (oldSocios[0]) {\r\n                    await axios.put('/api/editSocios', { requestArray: oldSocios, ...requestInfo })\r\n                    const ids = oldSocios.map(s => s.socio_id)\r\n                    socioIds = socioIds.concat(ids)\r\n                    console.log(socioIds, oldSocios, ids)\r\n                }\r\n                if (deletedSocios[0])\r\n                    deletedSocios.forEach(s => {\r\n                        axios.delete(`/api/delete?table=socios&tablePK=socio_id&id=${s.socio_id}`)\r\n                    })\r\n                toastMsg = 'Alteração de contrato social aprovada.'\r\n                console.log(socioIds)\r\n            }\r\n        }\r\n        if (approved === false)\r\n            toastMsg = 'Solicitação indeferida.'\r\n\r\n        if (socioIds[0])\r\n            log.metadata.socios = socioIds\r\n        console.log(socioIds)\r\n        logGenerator(log)                               //Generate the demand\r\n            .then(r => {\r\n                console.log(r?.data)\r\n            })\r\n            .catch(err => console.log(err))\r\n\r\n        if (demand)\r\n            setTimeout(() => {\r\n                props.history.push('/solicitacoes')\r\n            }, 1500);\r\n        else\r\n            setTimeout(() => { resetState() }, 900);\r\n        toast(toastMsg)\r\n    }\r\n\r\n    const checkSocioUpdates = () => {\r\n        const\r\n            { originalSocios, filteredSocios, selectedEmpresa, demand } = state,\r\n            { codigoEmpresa } = selectedEmpresa\r\n        let\r\n            socioUpdates = [],\r\n            altObj = {}\r\n\r\n        //verifica se houve alteração em sócios existentes e as insere em oldSocios ou se há novos sócios, inseridos em newSocios\r\n        filteredSocios.forEach(m => {\r\n            delete m.edit\r\n            if (m.socioId) {\r\n                originalSocios.forEach(async s => {\r\n                    if (m.socioId === s.socioId) {\r\n                        Object.keys(m).forEach(key => {\r\n                            if (m[key] && m[key] !== '' && (m[key] !== s[key] || key === 'socioId')) {\r\n                                Object.assign(altObj, { [key]: m[key] })\r\n                            }\r\n                        })\r\n                        //if marked as deleted, preserve status to create delete request, else mark as modified.                        \r\n                        if (Object.keys(altObj).length > 1) {\r\n                            if (altObj?.status !== 'deleted') {\r\n                                m.status = 'modified'\r\n                                altObj.status = 'modified'\r\n                            }\r\n                            //Se os únicos campos forem socioId e status, não inserir em oldSocios. A não ser que seja deleted, aí registra p apagar depois\r\n                            if (altObj.socioId && altObj.status && (altObj?.status === 'deleted' || Object.keys(altObj).length > 2))\r\n                                socioUpdates.push(altObj)\r\n                            else {\r\n                                m.status = undefined\r\n                                altObj.status = undefined\r\n                            }\r\n                        }\r\n                        altObj = {}\r\n                    }\r\n                })\r\n            }\r\n            //Se o(s) sócio(s) não possuem ID, se trata de um novo sócio, assim, todo o objeto é inserido no socioUpdates\r\n            else {\r\n                m.codigoEmpresa = codigoEmpresa\r\n                socioUpdates.push(m)\r\n            }\r\n        })\r\n        if (!demand)\r\n            return socioUpdates\r\n\r\n        //Separa os sócios modificados em novos, alterados e excluídos para que cada o respectivo request seja feito\r\n        if (socioUpdates[0]) {\r\n            socioUpdates = humps.decamelizeKeys(socioUpdates)\r\n            const\r\n                newSocios = socioUpdates.filter(s => s.status === 'new'),\r\n                oldSocios = socioUpdates.filter(s => s.status === 'modified'),\r\n                deletedSocios = socioUpdates.filter(s => s.status === 'deleted')\r\n\r\n            //Apaga a prop 'status' de cada sócio antes do request\r\n            newSocios.forEach(s => delete s.status)\r\n            oldSocios.forEach(s => delete s.status)\r\n            deletedSocios.forEach(s => delete s.status)\r\n\r\n            return { newSocios, oldSocios, deletedSocios }\r\n        }\r\n        else return null\r\n    }\r\n\r\n    const updateEmpresa = altEmpresa => {\r\n        const\r\n            { selectedEmpresa } = state,\r\n            { codigoEmpresa } = selectedEmpresa\r\n\r\n        //Apaga propriedades === null ou inexistentes\r\n        for (let prop in selectedEmpresa) {\r\n            if (altEmpresa[prop] && altEmpresa[prop] === selectedEmpresa[prop])\r\n                delete altEmpresa[prop]\r\n        }\r\n        //Prepara o objeto e envia o request\r\n        const shouldUpdate = Object.keys(altEmpresa).length > 0\r\n        if (shouldUpdate) {\r\n            const requestObj = {\r\n                id: codigoEmpresa,\r\n                table: 'empresas',\r\n                tablePK: 'codigo_empresa',\r\n                updates: humps.decamelizeKeys(altEmpresa)\r\n            }\r\n            return requestObj\r\n        }\r\n    }\r\n\r\n    const createLog = ({ demand, altContrato, approved, socioUpdates }) => {\r\n        const\r\n            { selectedEmpresa, info, altContratoDoc, numeroAlteracao } = state,\r\n            { codigoEmpresa } = selectedEmpresa\r\n        let log\r\n\r\n        //Se não houver demanda, criar demanda/log\r\n        if (!demand) {\r\n            log = {\r\n                history: {\r\n                    altContrato,\r\n                    info,\r\n                    socioUpdates\r\n                },\r\n                empresaId: codigoEmpresa,\r\n                historyLength: 0,\r\n                approved\r\n            }\r\n            if (approved === false)\r\n                log.declined = true\r\n\r\n            if (altContratoDoc) {\r\n                log.history.files = altContratoDoc\r\n                log.metadata = {\r\n                    fieldName: 'altContratoDoc',\r\n                    empresaId: codigoEmpresa,\r\n                    numeroAlteracao\r\n                }\r\n            }\r\n        }\r\n        //Se houver demand, mas for rejeitada, indeferir demanda\r\n        if (demand && approved === false) {\r\n            const { id, empresaId } = demand\r\n            log = {\r\n                id,\r\n                empresaId,\r\n                history: {\r\n                    info\r\n                },\r\n                declined: true\r\n            }\r\n        }\r\n        //Se aprovado\r\n        if (demand && approved === true) {\r\n            const\r\n                { id } = demand,\r\n                { demandFiles, numeroAlteracao, numeroRegistro } = state\r\n            log = {\r\n                id,\r\n                demandFiles,\r\n                history: {},\r\n                metadata: {\r\n                    numeroAlteracao,\r\n                    numeroRegistro,\r\n                },\r\n                approved\r\n            }\r\n        }\r\n        return log\r\n    }\r\n\r\n    //Prepara os objetos para o request\r\n    const createRequestObj = form => {\r\n\r\n        const { selectedEmpresa } = state\r\n        let returnObj = { codigoEmpresa: selectedEmpresa?.codigoEmpresa }\r\n\r\n        form.forEach(({ field }) => {\r\n            for (let prop in state) {\r\n                if (prop === field && state[prop])\r\n                    Object.assign(returnObj, { [prop]: state[prop] })\r\n            }\r\n        })\r\n\r\n        if (Object.keys(returnObj).length > 1)\r\n            return returnObj\r\n        else\r\n            return null\r\n    }\r\n\r\n    const handleFiles = files => {\r\n        //limit file Size\r\n        if (sizeExceedsLimit(files)) return\r\n\r\n        if (files && files[0]) {\r\n            const altContratoDoc = new FormData()\r\n            altContratoDoc.append('altContratoDoc', files[0])\r\n            setState({ ...state, altContratoDoc, fileToRemove: null })\r\n        }\r\n    }\r\n\r\n    const removeFile = async (name) => {\r\n        const\r\n            { altContratoDoc } = state,\r\n            newState = globalRemoveFile(name, altContratoDoc)\r\n\r\n        setState({ ...state, ...newState })\r\n    }\r\n\r\n    const resetState = () => {\r\n        const\r\n            resetForms = {},\r\n            forms = [altContratoForm, sociosForm]\r\n\r\n        forms.forEach(form => {\r\n            form.forEach(({ field }) => {\r\n                Object.assign(resetForms, { [field]: '' })\r\n            })\r\n        })\r\n\r\n        setState({\r\n\r\n            ...state, ...resetForms, activeStep: 0, razaoSocial: '', selectedEmpresa: undefined, filteredSocios: [],\r\n            altContratoDoc: undefined, fileToRemove: undefined\r\n        })\r\n    }\r\n    const\r\n        toast = toastMsg => setState({ ...state, confirmToast: !state.confirmToast, toastMsg }),\r\n        setShowPendencias = () => setState({ ...state, showPendencias: !state.showPendencias }),\r\n        closeAlert = () => setState({ ...state, openAlertDialog: !state.openAlertDialog }),\r\n        { filteredSocios, confirmToast, toastMsg, openAlertDialog, alertType, customMessage, customTitle } = state\r\n\r\n    return (\r\n        <>\r\n            <AltContratoTemplate\r\n                empresas={empresas}\r\n                data={state}\r\n                setActiveStep={setActiveStep}\r\n                handleInput={handleInput}\r\n                handleSubmit={handleSubmit}\r\n                handleFiles={handleFiles}\r\n                removeFile={removeFile}\r\n                socios={filteredSocios}\r\n                addSocio={addSocio}\r\n                removeSocio={removeSocio}\r\n                enableEdit={enableEdit}\r\n                handleEdit={handleEdit}\r\n                setShowPendencias={setShowPendencias}\r\n            />\r\n            <ReactToast open={confirmToast} close={toast} msg={toastMsg} />\r\n            {\r\n                openAlertDialog &&\r\n                <AlertDialog open={openAlertDialog} alertType={alertType} close={closeAlert} customMessage={customMessage} customTitle={customTitle} />\r\n            }\r\n        </>\r\n    )\r\n}\r\nconst collections = ['empresas', 'socios', 'getFiles/empresaDocs']\r\nexport default (StoreHOC(collections, AltContrato))","import React from 'react'\r\nimport { TextField } from '@material-ui/core'\r\nimport AddCircleOutlineSharpIcon from '@material-ui/icons/AddCircleOutlineSharp';\r\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\r\n\r\n//Esse componente renderiza inputs de uma array no estado da aplicação\r\nconst SimpleParams = ({ data, handleInput, plusOne, removeOne }) => {\r\n\r\n    const state = [...data?.newState] || []\r\n\r\n    return (\r\n        <>\r\n            <header>\r\n                <h4 className='singleParams__title'>Clique nos campos abaixo para editar e/ou adicione novos.</h4>\r\n            </header>\r\n            {state.map((m, i) =>\r\n                <section className=\"singleParams__container\" key={i}>\r\n                    <div className=\"singleParams__rowContainer\">\r\n                        <TextField\r\n                            name={i.toString()}\r\n                            value={state[i]}\r\n                            onChange={handleInput}\r\n                            variant='filled'\r\n                            InputProps={{ style: { margin: '8px 0' } }}\r\n                            inputProps={{ style: { width: '300px', textAlign: 'center', fontSize: '10pt', height: '30px', padding: '5px 0' } }}\r\n                        />\r\n                        <div className='singleParams__deleteIcon' title='Remover' onClick={() => removeOne(i)}>\r\n                            <DeleteOutlinedIcon />\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n            )}\r\n            <div className='addIcon'>\r\n                <div\r\n                    className=\"addIcon__container\"\r\n                    onClick={() => plusOne()}\r\n                >\r\n                    <span className=\"addIcon__text\">\r\n                        Adicionar\r\n                    </span>\r\n                    <AddCircleOutlineSharpIcon className='addIcon__icon' />\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default SimpleParams\r\n","import React from 'react'\r\nimport TextInput from '../Reusable Components/TextInput'\r\nimport SimpleParams from './SimpleParams'\r\nimport CustomButton from '../Reusable Components/CustomButton'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport './parametros.scss'\r\n\r\nconst ParametrosTemplate = ({ data, selectOption, handleInput, handleSubmit, plusOne, removeOne }) => {\r\n    const { tab, options, selectedOption, form, modified } = data\r\n\r\n    return (\r\n        <>\r\n            <Crumbs links={['Parâmetros', '/parametros']} text='Alterar parâmetros do sistema' />\r\n            <header className=\"selectHeader\">\r\n                <h4 className='parametrosTitle'>Alterar parâmetros do sistema - Selecione uma das opções abaixo.</h4>\r\n                {/* ******************Select box ******************** */}\r\n                <TextField\r\n                    className='config__selector'\r\n                    onChange={selectOption}\r\n                    name='selectedOption'\r\n                    value={selectedOption || ''}\r\n                    select={true}\r\n                    placeholder='Clique para selecionar...'\r\n                    SelectProps={{\r\n                        style: {\r\n                            fontSize: '0.9rem', color: '#555', fontWeight: 400,\r\n                            width: 325, height: '44px'\r\n                        }\r\n                    }}\r\n                >\r\n                    {options.map((opt, i) =>\r\n                        <MenuItem key={i} value={opt} >\r\n                            {opt}\r\n                        </MenuItem>\r\n                    )}\r\n                </TextField>\r\n            </header>\r\n            {\r\n                form && tab < 3 &&\r\n                <main className='configForm'>\r\n                    <TextInput\r\n                        form={form}\r\n                        data={data}\r\n                        handleInput={handleInput}\r\n                        style={{ width: '100%', flexDirection: 'column' }}\r\n                    />\r\n                </main>\r\n            }\r\n            {/* Formulário simples que representa uma array de strings no DB / estado local  */}\r\n            {\r\n                tab === 3 &&\r\n                <SimpleParams\r\n                    form={form}\r\n                    data={data}\r\n                    plusOne={plusOne}\r\n                    removeOne={removeOne}\r\n                    handleInput={handleInput}\r\n                    style={{ width: '100%', flexDirection: 'column' }}\r\n                />\r\n            }\r\n            {/* Botão de salvar independe do formulário renderizado, desde que alguma opção tenha sido selecionada */}\r\n            {\r\n                selectedOption &&\r\n                <div style={{ minHeight: '60px', position: 'flex' }}>\r\n                    <CustomButton\r\n                        action='save'\r\n                        onClick={handleSubmit}\r\n                        disabled={!modified}\r\n                    />\r\n                </div>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ParametrosTemplate","const\r\n    commonProps = {\r\n        variant: 'outlined',\r\n        pattern: /^[0-9]*$/,\r\n        maxLength: 2\r\n    },\r\n    { variant } = commonProps\r\n\r\nexport const parametrosIdade = [\r\n    {\r\n        field: 'idadeMaxCad',\r\n        label: 'Idade máxima para cadastro (anos)',\r\n        ...commonProps\r\n    },\r\n    {\r\n        field: 'difIdade',\r\n        label: 'Diferença tolerável de idade da carroceria e chassi (anos)',\r\n        ...commonProps,\r\n        maxLength: 1\r\n    },\r\n    {\r\n        field: 'idadeBaixaAut',\r\n        label: 'Idade para baixa automática (anos)',\r\n        ...commonProps,\r\n    },\r\n    {\r\n        field: 'diaBaixaAut',\r\n        label: 'Dia para baixa automática (dd/mm)',\r\n        maxLength: 5,\r\n        pattern: /^(0[1-9]|[12][0-9]|30(?!\\/02)|31(?!\\/(0[2469]|11)))\\/(0[1-9]|1[0-2])$/,\r\n        variant,\r\n    },\r\n    {\r\n        field: 'prazoAvisoBaixa',\r\n        label: 'Prazo para aviso de baixa (dias)',\r\n        ...commonProps,\r\n        maxLength: 3\r\n    }\r\n]\r\nexport const distancias = [\r\n    {\r\n        field: 'convencional',\r\n        label: 'Convencional',\r\n    },\r\n    {\r\n        field: 'executivo',\r\n        label: 'Executivo',\r\n    },\r\n    {\r\n        field: 'semiLeito',\r\n        label: 'Semi-Leito',\r\n    },\r\n    {\r\n        field: 'leito',\r\n        label: 'Leito',\r\n    },\r\n    {\r\n        field: 'urbano',\r\n        label: 'Urbano',\r\n    }\r\n]\r\n\r\nexport const nomes = [\r\n    {\r\n        field: 'secretaria',\r\n        label: 'Nome da Secretaria',\r\n    },\r\n    {\r\n        field: 'subsecretaria',\r\n        label: 'Nome da Subsecretaria',\r\n    },\r\n    {\r\n        field: 'superintendencia',\r\n        label: 'Nome da Superintendencia',\r\n    },\r\n    {\r\n        field: 'diretoria',\r\n        label: 'Nome da diretoria',\r\n    },\r\n    {\r\n        field: 'sistema',\r\n        label: 'Nome do sistema',\r\n    },\r\n    {\r\n        field: 'siglaSecretaria',\r\n        label: 'Sigla da Secretaria',\r\n    },\r\n    {\r\n        field: 'siglaSistema',\r\n        label: 'Sigla do Sistema',\r\n    }\r\n]\r\n\r\nexport const motivosBaixa = [\r\n    {\r\n        field: 'motivoBaixa',\r\n        label: 'Inserir novo motivo',\r\n    }\r\n]","import React, { useState, useEffect, useCallback } from 'react'\r\nimport axios from 'axios'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport ParametrosTemplate from './ParametrosTemplate'\r\nimport { distancias, nomes, parametrosIdade, motivosBaixa } from '../Forms/parametrosForm'\r\n\r\nconst Parametros = props => {\r\n    //A prop 'params' são os nomes das propriedades do objeto do estado inicial, seja o nome de uma prop do DB seja do arquivo ./defaultParams.js\r\n    const\r\n        [state, setState] = useState({\r\n            options: ['Idade e prazos para baixa', 'Distância mínima entre poltronas', 'Nomenclaturas', 'Motivos para baixa do veículo'],\r\n            params: ['idadeBaixa', 'distanciaPoltronas', 'nomes', 'motivosBaixa'],\r\n            forms: [parametrosIdade, distancias, nomes, motivosBaixa]\r\n        })\r\n\r\n    //Seleciona o conjunto de parâmetros p editar\r\n    const selectOption = useCallback(e => {\r\n        const\r\n            { name, value } = e.target,\r\n            { parametros } = props.redux,\r\n            { options, forms, params } = state,\r\n            tab = options.indexOf(value),\r\n            form = forms[tab],\r\n            data = parametros[0][params[tab]]\r\n\r\n        if (data && parametros[0]?.id)\r\n            data.id = parametros[0].id\r\n\r\n        //Se for singleParams, criar uma cópia da data como newState e não usar spreadOperator\r\n        if (tab === 3)\r\n            setState({ ...state, initState: data, newState: data, [name]: value, tab, form, modified: false })\r\n        else\r\n            setState({ ...state, ...data, initState: data, [name]: value, tab, form, newState: undefined, modified: false })\r\n    }, [props.redux, state])\r\n\r\n    useEffect(() => {\r\n        const pressKeyFnc = e => {\r\n            let event\r\n            if (e.key === 'p') {\r\n                event = { target: { name: 'selectedOption', value: 'Motivos para baixa do veículo' } }\r\n                selectOption(event)\r\n            }\r\n            if (e.key === 'o') {\r\n                /* event = { target: { name: 'selectedOption', value: 'Nomenclaturas' } }\r\n                selectOption(event) */\r\n                plusOne()\r\n            }\r\n            if (e.key === 'q') {\r\n                event = { target: { name: 'selectedOption', value: 'Idade e prazos para baixa' } }\r\n                selectOption(event)\r\n            }\r\n        }\r\n        document.addEventListener('keypress', pressKeyFnc)\r\n        return () => document.removeEventListener('keypress', pressKeyFnc)\r\n    }, [selectOption])\r\n\r\n    //Nos formulários simples (que representam array de strings), adiciona mais um campo vazio\r\n    const plusOne = () => {\r\n        let newState = [...state.initState]\r\n        if (state.newState)\r\n            newState = [...state.newState]\r\n\r\n        newState[newState.length] = ''\r\n        setState({ ...state, newState })\r\n    }\r\n\r\n    const removeOne = index => {\r\n        const { initState, newState } = state\r\n\r\n        let modifiedArray = [...initState]\r\n        if (newState)\r\n            modifiedArray = [...newState]\r\n        modifiedArray.splice(index, 1)\r\n\r\n        const modified = checkForChanges(null, null, modifiedArray)\r\n        setState({ ...state, newState: modifiedArray, modified })\r\n    }\r\n\r\n    //Set state com input do usuário\r\n    const handleInput = async e => {\r\n        const\r\n            { tab } = state,\r\n            { name, value } = e.target\r\n\r\n        let modified\r\n\r\n        //Para tabs que a data é uma array de strings, o função checkForChanges recebe outros parâmetros e o estado atualizado é uma array, não props\r\n        if (tab === 3) {\r\n            const tempState = [...state.newState]\r\n            tempState[name] = value\r\n\r\n            modified = checkForChanges(null, null, tempState)\r\n            setState({ ...state, newState: tempState, modified })\r\n        }\r\n        else {\r\n            modified = checkForChanges(name, value)\r\n            setState({ ...state, [name]: value, modified })\r\n        }\r\n    }\r\n\r\n    //Detecta se houve mudança e salva o input do usuário no state\r\n    const checkForChanges = (name, value, newArray) => {\r\n        const { initState } = state\r\n        let\r\n            modified = false,\r\n            stateChanged,\r\n            fieldChanged,\r\n            changedArray\r\n        //Se for passada uma array, compara a array com a array inicial do estado\r\n        if (newArray)\r\n            changedArray = initState.toString() !== newArray.toString()\r\n\r\n        //Senão, compara cada campo input (...com props spreaded no state) com o estado inicial\r\n        else {\r\n            Object.keys(initState).forEach(k => {\r\n                if (k !== name && state[k].toString() !== initState[k].toString())\r\n                    stateChanged = true\r\n            })\r\n            fieldChanged = initState[name] && initState[name].toString() !== value\r\n        }\r\n        if (fieldChanged || stateChanged || changedArray)\r\n            modified = true\r\n        return modified\r\n    }\r\n\r\n    //Salva as alterações feitas\r\n    const handleSubmit = () => {\r\n        const\r\n            { tab, forms, params, initState, newState } = state,\r\n            { id } = initState,\r\n            form = forms[tab],\r\n            keys = form.map(f => f.field),\r\n            parametro = params[tab]\r\n\r\n        let requestObj = {}\r\n        //Se o estado modificável for uma array de strings (ex: tab===3), o requestObj é uma array\r\n        if (tab === 3) {\r\n            newState.forEach((prop, i) => {         //Tira campos vazios do request\r\n                if (prop === '')\r\n                    newState.splice(i, 1)\r\n            })\r\n            setState({ ...state, newState })\r\n            requestObj = newState\r\n        }\r\n        else\r\n            keys.forEach(k => Object.assign(requestObj, { [k]: state[k] }))\r\n\r\n        console.log({ [parametro]: requestObj, id })\r\n\r\n        axios.put('/api/parametros', { [parametro]: requestObj, id })\r\n            .then(r => console.log(r.data))\r\n            .catch(err => console.log(err))\r\n        setState({ ...state, modified: false })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <ParametrosTemplate\r\n                data={state}\r\n                selectOption={selectOption}\r\n                plusOne={plusOne}\r\n                removeOne={removeOne}\r\n                handleInput={handleInput}\r\n                handleSubmit={handleSubmit}\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nconst collections = ['parametros']\r\n\r\nexport default (StoreHOC(collections, Parametros))","import React, { useEffect } from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport './userAuth.scss'\r\nimport CustomButton from '../Reusable Components/CustomButton';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nconst UserAuthTemplate = ({ data, handleInput, handleSubmit }) => {\r\n    const { title, form, buttonLabel } = data\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            const x = document.getElementById('email')\r\n            if (x)\r\n                x.focus()\r\n        }, 600);\r\n    }, [])\r\n\r\n    const errorHandler = (el) => {\r\n        let value = data[el?.field]\r\n        if (!value) return\r\n\r\n        if (el.errorHandler && el.errorHandler(value)) return false\r\n        else if (value && el.errorHandler && !el.errorHandler(value)) return true\r\n\r\n        if (value?.length < el?.minLength) return true\r\n\r\n        if (typeof value !== 'string') value = value.toString()\r\n        if (el.pattern) return value.match(el.pattern) === null\r\n        else return false\r\n\r\n    }\r\n\r\n    const helper = (el) => {\r\n        let value = data[el.field]\r\n        if (!value) return ' '\r\n        if (el.errorHandler && el.errorHandler(value)) return '✓'\r\n        else if (value && el.errorHandler && !el.errorHandler(value)) return '✘'\r\n\r\n        if (value?.length < el?.minLength) return '✘'\r\n        if (value?.length >= el?.minLength) return '✓'\r\n\r\n        if (typeof value !== 'string') value = value.toString()\r\n        if (value > el.max || value < el.min) return 'Valor inválido'\r\n        else if (value.match(el.pattern) === null) return '✘'\r\n        else if (el.pattern && value.match(el.pattern) !== null) return '✓'\r\n        else return ' '\r\n    }\r\n\r\n    return (\r\n        <div className='flexColumn login'>\r\n            <h2 className='login__title'>CadTI - Cadastro do Transporte Intermunicipal - Seinfra MG</h2>\r\n            <div className='login__form paper'>\r\n                <header>\r\n                    <h4 className=\"header2 login__subtitle\">{title}</h4>\r\n                </header>\r\n                <section className='flexColumn center'>\r\n                    {form.map(({ name, label, options, type = 'text', ...el }, i) => (\r\n                        <div className=\"input\" key={i}>\r\n                            <TextField\r\n                                id={name}\r\n                                name={name}\r\n                                label={label}\r\n                                value={data[name] || ''}\r\n                                onChange={handleInput}\r\n                                type={type}\r\n                                error={errorHandler(el)}\r\n                                helperText={helper(el)}\r\n                                InputProps={{ style: { width: '260px' } }}\r\n                                InputLabelProps={{ style: { fontSize: '10pt', color: '#223' } }}\r\n                                select={options ? true : false}\r\n                            >\r\n                                {options &&\r\n                                    options.map(({ optionLabel, optionValue }, i) =>\r\n                                        <MenuItem key={i} value={optionValue}>\r\n                                            {optionLabel}\r\n                                        </MenuItem>\r\n                                    )\r\n                                }\r\n                            </TextField>\r\n                        </div>\r\n                    ))}\r\n                    <CustomButton label={buttonLabel} onClick={handleSubmit} />\r\n                </section>\r\n                <footer className=\"login__footer\">\r\n                    <p>\r\n                        Ainda não é cadastrado?\r\n                       </p>\r\n                    <p>Esqueceu sua senha?</p>\r\n                </footer>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserAuthTemplate;","import { cpf } from \"../Forms/commonFields\"\r\n\r\nconst loginForm = [\r\n    {\r\n        name: 'email',\r\n        label: 'E-mail'\r\n    },\r\n    {\r\n        name: 'password',\r\n        label: 'Senha',\r\n        type: 'password'\r\n    },\r\n]\r\n\r\nconst signUpForm = [\r\n    {\r\n        name: 'name',\r\n        label: 'Nome Completo'\r\n    },\r\n    { ...cpf, name: 'cpf', field: 'cpf' },\r\n    ...loginForm,\r\n    {\r\n        name: 'confirmPassword',\r\n        label: 'Confirme sua senha'\r\n    },\r\n    {\r\n        name: 'role',\r\n        label: 'Perfil de usuário',\r\n        options: [\r\n            {\r\n                optionLabel: 'Administrador',\r\n                optionValue: 'admin'\r\n            },\r\n            {\r\n                optionLabel: 'Delegatário',\r\n                optionValue: 'empresa'\r\n            },\r\n            {\r\n                optionLabel: 'Técnico Seinfra',\r\n                optionValue: 'seinfra'\r\n            },\r\n        ]\r\n    }\r\n]\r\n\r\nconst userAuthForms = [\r\n    { title: 'Fazer login', form: loginForm, buttonLabel: 'entrar', endPoint: '/auth/login' },\r\n    { title: 'Cadastro de Usuário', form: signUpForm, buttonLabel: 'Cadastrar', endPoint: '/auth/signUp', toastMsg: 'Usuário cadastrado.' },\r\n    { title: 'Recuperação de senha', form: signUpForm, buttonLabel: 'Recuperar senha', endPoint: '/auth/forgotPassword', toastMsg: 'Senha enviada para o e-mail registrado.' }\r\n]\r\n\r\nexport default userAuthForms","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport UserAuthTemplate from \"./UserAuthTemplate\";\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\nimport userAuthForms from \"./userAuthForms\";\r\nimport { logUser } from \"../Store/userActions\";\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport { setCookie } from \"../Utils/documentCookies\";\r\nimport valueParser from \"../Utils/valueParser\";\r\n\r\nconst UserAuth = (props) => {\r\n\r\n  const\r\n    [state, setState] = useState({ tab: 0, ...userAuthForms[0] }),\r\n    { endPoint, toastMsg, tab } = state\r\n\r\n  const handleInput = e => {\r\n    const { name, value } = e.target\r\n    const parsedValue = valueParser(name, value)\r\n\r\n    setState({ ...state, [name]: parsedValue })\r\n  }\r\n\r\n  const login = async () => {\r\n    //Efetua o login com as informações preencidas pelo usuário\r\n    try {\r\n      await axios.post(endPoint, state)\r\n      //caso as credenciais (usuário/senha) estejam certas, um token foi armazenado. Faz-se então uma requisição GET dos dados do usuário\r\n      const\r\n        getUser = await axios.get('/getUser'),\r\n        userFound = getUser?.data\r\n      //Ao se descodificar o token, se as credenciais estiverem certas e o token válido, retorna o usuárui, armazena na globalStore e cria cookie local.      \r\n      setCookie('loggedIn', true)\r\n      props.logUser(userFound)\r\n    }\r\n    catch (err) {\r\n      toast(err?.response?.data)\r\n    }\r\n  }\r\n\r\n  const signUp = async () => {\r\n    await axios.post(endPoint, state)\r\n      .then(r => console.log(r))\r\n      .catch(err => console.log(err))\r\n    setState({ tab: 0, ...userAuthForms[0] })\r\n  }\r\n\r\n  const handleSubmit = () => {\r\n    if (tab === 0)\r\n      login()\r\n\r\n    if (tab === 1)\r\n      signUp()\r\n\r\n    if (toastMsg)\r\n      toast(toastMsg)\r\n  }\r\n\r\n  const\r\n    toast = toastMsg => setState({ ...state, confirmToast: !state.confirmToast, toastMsg }),\r\n    { confirmToast } = state\r\n\r\n  return (\r\n    <>\r\n      <UserAuthTemplate\r\n        data={state}\r\n        handleInput={handleInput}\r\n        handleSubmit={handleSubmit}\r\n      />\r\n      <ReactToast open={confirmToast} close={toast} msg={toastMsg} status={tab === 0 ? 'error' : 'success'} />\r\n    </>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    redux: {\r\n      ...state.user\r\n    }\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return bindActionCreators({ logUser }, dispatch)\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserAuth)","import React from 'react'\r\nimport { Switch, Route } from 'react-router-dom'\r\nimport HomeTemplate from './HomeTemplate'\r\n\r\nimport VeiculosHome from './Veiculos/VeiculosHome'\r\nimport CadVeiculos from './Veiculos/CadVeiculo'\r\nimport AltDados from './Veiculos/AltDados'\r\nimport Seguros from './Veiculos/Seguros'\r\nimport Laudos from './Veiculos/Laudos'\r\nimport BaixaVeiculo from './Veiculos/BaixaVeiculo'\r\nimport Config from './Veiculos/Config'\r\n\r\nimport Consultas from './Consultas/ConsultasContainer'\r\nimport Empresas from './Empresas/EmpresasContainer'\r\nimport EmpresasHome from './Empresas/EmpresasHome'\r\nimport Procuradores from './Empresas/Procuradores'\r\nimport Socios from './Empresas/Socios'\r\nimport Relatorios from './Relatorios/Relatorios'\r\nimport Solicitacoes from './Solicitacoes/Solicitacoes'\r\nimport PdfTest from './Veiculos/Certificate'\r\nimport AltContrato from './Empresas/AltContrato'\r\nimport Parametros from './Parametros/Parametros'\r\nimport UserAuth from './Auth/UserAuth'\r\n\r\n\r\n//import UnderConstruction from './UnderConstruction'\r\n\r\nconst Routes = () => {\r\n    return (\r\n        <Switch>\r\n            <Route exact path='/' component={HomeTemplate} />\r\n            <Route path='/veiculos' exact component={VeiculosHome} />\r\n            <Route path='/veiculos/cadastro' exact component={CadVeiculos} />\r\n            <Route path='/veiculos/altDados' exact component={AltDados} />\r\n            <Route path='/veiculos/seguros' exact component={Seguros} />\r\n            <Route path='/veiculos/laudos' exact component={Laudos} />\r\n            <Route path='/veiculos/baixaVeiculo' exact component={BaixaVeiculo} />\r\n            <Route path='/veiculos/config' exact component={Config} />\r\n            <Route path='/consultas' component={Consultas} />\r\n            <Route path='/empresas' exact component={EmpresasHome} />\r\n            <Route path='/altContrato' exact component={AltContrato} />\r\n            <Route path='/empresas/cadastro' component={Empresas} />\r\n            <Route path='/empresas/socios' component={Socios} />\r\n            <Route path='/empresas/procuradores' component={Procuradores} />\r\n            <Route path='/relatorios' component={Relatorios} />\r\n            <Route path='/crv' component={PdfTest} />\r\n            <Route path='/solicitacoes' exact component={Solicitacoes} />\r\n            <Route path='/solicitacoes/cadastro' exact component={CadVeiculos} />\r\n            <Route path='/solicitacoes/altDados' exact component={AltDados} />\r\n            <Route path='/solicitacoes/seguros' exact component={Seguros} />\r\n            <Route path='/solicitacoes/baixaVeiculo' exact component={BaixaVeiculo} />\r\n            <Route path='/solicitacoes/laudos' exact component={Laudos} />\r\n            <Route path='/solicitacoes/altContrato' exact component={AltContrato} />\r\n            <Route path='/solicitacoes/socios' exact component={Socios} />\r\n            <Route path='/solicitacoes/procuradores' exact component={Procuradores} />\r\n            <Route path='/parametros' exact component={Parametros} />\r\n            <Route path='/userAuth' exact component={UserAuth} />\r\n\r\n            {/* <Route path='/faleConosco' component={UnderConstruction} /> */}\r\n        </Switch>\r\n    )\r\n}\r\n\r\nexport default Routes","import React from 'react'\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport Routes from './Routes'\r\nimport { connect } from 'react-redux'\r\nimport UserAuth from './Auth/UserAuth'\r\n\r\nimport { Header, Footer } from './Layouts'\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport { getCookie } from './Utils/documentCookies'\r\n\r\nconst Authentication = () => {\r\n\r\n    const loggedIn = getCookie('loggedIn').length > 0 // Se deixar como estado inicial do store.user desse jeito, será q n atualiza o componente qdo apagar??\r\n\r\n    if (!loggedIn)\r\n        return <UserAuth />\r\n    else\r\n        return (\r\n            <div className='app'>\r\n                <Container maxWidth=\"lg\" style={{ minHeight: '100vh' }}>\r\n                    <BrowserRouter>\r\n                        <Header />\r\n                        <Routes />\r\n                    </BrowserRouter>\r\n                    <Footer />\r\n                </Container>\r\n            </div>\r\n        )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        redux: {\r\n            ...state.user\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Authentication)","import React from 'react';\r\n\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport promise from 'redux-promise';\r\nimport multi from 'redux-multi';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './rootReducer'\r\nimport Authentication from './Authentication';\r\n\r\nimport './Layouts/stylez.scss'\r\n\r\nexport const store = applyMiddleware(promise, multi, thunk)(createStore)(rootReducer, /* preloadedState, */\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\r\n\r\nfunction App() {\r\n  return (\r\n    <Provider store={store}>\r\n      <Authentication />\r\n    </Provider>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App.jsx';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}