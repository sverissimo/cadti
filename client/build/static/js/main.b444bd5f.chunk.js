(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{128:function(e,a,t){},241:function(e,a,t){},245:function(e,a){},318:function(e,a,t){e.exports=t(479)},331:function(e,a,t){},334:function(e,a,t){},381:function(e,a){},384:function(e,a,t){},385:function(e,a,t){},387:function(e,a){},388:function(e,a){},476:function(e,a,t){},478:function(e,a,t){},479:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(24),i=t.n(o),l=t(55),c=t(52),s=t(63),d=t(282),u=t.n(d),m=t(283),p=t.n(m),f=t(284),g=t(9),h=t(19),b=t(11),v={},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"GET_DATA":return Object(b.a)({},e,{},n);case"INSERT_DATA":var r=n.collection,o=n.data;if(e[r]&&o){var i=Object(h.a)(e[r]);return o.forEach((function(e){i.unshift(e)})),Object(b.a)({},e,Object(g.a)({},r,i))}return e;case"UPDATE_DATA":var l=n.collection,c=n.data,s=n.id;if(e[l]&&c){var d=e[l].map((function(e){return c.forEach((function(a){e[s]===a[s]&&(e=a)})),e}));return Object(b.a)({},e,Object(g.a)({},l,d))}return e;case"UPDATE_COLLECTION":var u=n.data,m=n.collection;return Object(b.a)({},e,Object(g.a)({},m,u));case"REMOVE_FROM_INSURANCE":var p=n.apolice,f=n.placaIndex,E=n.vehicleIndex;if(e.seguros){var x=Object(h.a)(e.seguros),S=x.find((function(e){return e.apolice===p})),y=x.findIndex((function(e){return e.apolice===p}));return S.placas.splice(f,1),S.veiculos.splice(E,1),x[y]=S,Object(b.a)({},e,{seguros:x})}return e;case"DELETE_ONE":var w=n.tablePK,C=n.collection;if(e[C]){var k=n.id,O=Object(h.a)(e[C]);C.match("Docs")||(k=Number(k));var j=O.find((function(e){return e[w]===k})),D=O.findIndex((function(e){return e===j}));return O.splice(D,1),Object(b.a)({},e,Object(g.a)({},C,O))}return e;case"SET_COLOR":return Object(b.a)({},e,{setColor:a.payload});case"LOADING":return Object(b.a)({},e,{loading:a.payload});default:return e}},x=Object(c.c)({data:E}),S=t(285),y=t(22),w=t(521),C=t(215),k=t(216),O=t(108),j=t(196),D=t(522),I=t(119),N=t.n(I),A=t(78),z=(t(331),Object(S.a)((function(e){return{toolbarTitle:{flex:1},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto",backgroundColor:"#0398c1",color:"white"},toolbarLink:{padding:"12px 55px 13px 55px",flexShrink:0},mainFeaturedPost:{position:"relative",backgroundColor:e.palette.grey[800],color:e.palette.common.white,marginBottom:e.spacing(4),backgroundImage:"/images/bus_wallpaper.jpg",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},overlay:{position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"rgba(0,0,0,.3)"},mainFeaturedPostContent:Object(g.a)({position:"relative",padding:e.spacing(3)},e.breakpoints.up("md"),{padding:e.spacing(6),paddingRight:0}),mainGrid:{marginTop:e.spacing(3)},card:{display:"flex"},cardDetails:{flex:1},cardMedia:{width:160},markdown:Object(b.a)({},e.typography.body2,{padding:e.spacing(3,0)}),sidebarAboutBox:{padding:e.spacing(2),backgroundColor:e.palette.grey[200]},sidebarSection:{marginTop:e.spacing(3)},footer:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(6,0)}}}))),P=[{title:"P\xe1gina Inicial",link:"/"},{title:"Consultas",link:"/consultas"},{title:"Ve\xedculos",link:"/veiculos"},{title:"Empresas",link:"/empresas"},{title:"Relat\xf3rios",link:"/relatorios"},{title:"Fale Conosco",link:"/faleConosco"}],F=Object(A.f)((function(e){var a=z(),t=Object(n.useState)(document.location.pathname),o=Object(y.a)(t,2),i=o[0],c=o[1],s=e.location.pathname;return Object(n.useEffect)((function(){c(s)}),[s]),r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,null),r.a.createElement(C.a,null,r.a.createElement(k.a,{size:"small"},"Criar usu\xe1rio"),r.a.createElement(O.a,{component:"h2",variant:"h6",color:"inherit",align:"center",noWrap:!0,className:a.toolbarTitle},"Seinfra - Subsecretaria de Transportes e Mobilidade - MG"),r.a.createElement(j.a,null,r.a.createElement(N.a,null)),r.a.createElement(k.a,{variant:"outlined",size:"small"},"Fazer login")),r.a.createElement(C.a,{component:"nav",variant:"dense",className:a.toolbarSecondary},P.map((function(e,t){var n=e.link,o=e.title;return r.a.createElement(D.a,{component:l.b,to:n,key:t,color:"inherit",noWrap:!0,variant:"body2",href:"",style:{fontFamily:"Segoe UI, Tahoma, Geneva, Verdana, sans-serif",fontSize:"15px",backgroundColor:i.match(n)&&"/"!==n&&"/faleConosco"!==n?"#11a7d2":"",borderBottom:i.match(n)&&"/"!==n&&"/faleConosco"!==n?"1.5px solid #ccc":"",fontWeight:!i.match(n)||"/"!==n&&"/faleConosco"!==n?"400":"500"},className:a.toolbarLink,onClick:function(){return c(n)}},o)}))))})),T=function(){return null},L=t(540),q=t(523),M=function(e){var a=e.items,t=e.tab,n=e.changeTab;return r.a.createElement("div",{className:"tabMenu"},r.a.createElement(L.a,{value:t,indicatorColor:"primary",textColor:"primary",centered:!0,onChange:n},a.map((function(e,a){return r.a.createElement(q.a,{key:a,label:e})}))))},B=t(539),V=(t(334),[{title:"Ve\xedculos",date:"07/Nov",description:"Cadastre e altere os dados do ve\xedculo ou solicite sua baixa",link:"/veiculos",imageUrl:"/images/vehicles.jpg"},{title:"Empresas",date:"07/Nov",description:"Cadastre e gerencie dados de empresas, s\xf3cios e procuradores",link:"/empresas",imageUrl:"/images/empresas12.jpg"},{title:"Consultas",date:"03/Dez",description:"Consulte e gerencie dados de ve\xedculos, seguros e empresas",link:"/consultas",imageUrl:"/images/consultas2.jpg"},{title:"Relat\xf3rios",date:"03/Dez",description:"Acompanhe a situa\xe7\xe3o dos ve\xedculos por meio de gr\xe1ficos e tabelas",link:"/relatorios",imageUrl:"/images/relatorios.jpg"}]),R=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{minHeight:"83vh",width:"100%",height:"auto"}},r.a.createElement("main",{className:"homeMainPost"},r.a.createElement("h1",null,"SisMob - MG"),r.a.createElement("h2",null,"Sistema de Gest\xe3o da Mobilidade do Estado de Minas Gerais")),r.a.createElement("section",{className:"homeCardsContainer"},V.map((function(e,a){var t=e.link,n=e.title,o=e.description,i=e.imageUrl;return r.a.createElement("div",{key:a,className:"homeCard"},r.a.createElement(l.b,{to:t,style:{textDecoration:"none"}},r.a.createElement("div",{className:"homeCard"},r.a.createElement("div",{className:"homeCardText"},r.a.createElement("h6",{className:"homeCardText",style:{fontWeight:500}},n),r.a.createElement("p",{className:"homeCardText"},o)),r.a.createElement("div",{className:"homeImage"},r.a.createElement("img",{src:i,alt:n,className:"homeImage"})))))})))))},U=(t(128),[{title:"Cadastro de Ve\xedculos",date:"07/Nov",description:"Cadastrar um novo ve\xedculo no sistema",imageUrl:"/images/add_new.jpg",link:"/cadastro"},{title:"Altera\xe7\xe3o de dados",date:"07/Nov",description:"Alterar dados de um ve\xedculo",link:"/altDados",imageUrl:"/images/pen.png"},{title:"Seguros",date:"07/Nov",description:"Atualizar seguros e ap\xf3lices",link:"/altSeguro",imageUrl:"/images/car_insurance2.png"},{title:"Laudos",date:"07/Nov",description:"Laudos de seguran\xe7a veicular",link:"/laudos",imageUrl:"/images/laudos.png"},{title:"Baixa",date:"07/Nov",description:"Baixa de ve\xedculos",link:"/baixaVeiculo",imageUrl:"/images/remove_doc.png"},{title:"Configura\xe7\xf5es",date:"07/Nov",description:"Chassi, carrocerias, seguradoras, etc",link:"/config",imageUrl:"/images/config2.jpg"}]);function Y(e){var a=e.match;return r.a.createElement("div",null,r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",null,"Ve\xedculos"),r.a.createElement("p",null,"Selecione uma das op\xe7\xf5es abaixo.")),r.a.createElement("section",{className:"cardSection"},U.map((function(e,t){var n=e.title,o=e.link,i=e.imageUrl,c=e.description;return r.a.createElement(l.b,{to:a.url+o,key:t,className:"card"},r.a.createElement("span",{className:"cardImage"}," ",r.a.createElement("img",{src:i,alt:n})," "),r.a.createElement("div",{className:"cardText"},r.a.createElement("h3",null,n),r.a.createElement("p",null," ",c)))}))))}var W,_=t(46),H=t(5),K=t.n(H),G=t(32),J=t(33),$=t(35),Z=t(34),X=t(36),Q=t(15),ee=t.n(Q),ae=t(21),te=t.n(ae),ne=t(16),re=t.n(ne),oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(a,t){var n,r;return K.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],r={},!(e.length>0)){t.next=5;break}return e.forEach((function(e){n.push(ee.a.get("/api/".concat(e)))})),t.next=5,K.a.awrap(Promise.all(n).then((function(e){return e.map((function(e){return te.a.camelizeKeys(e.data)}))})).then((function(a){a.forEach((function(a,t){var n=e[t].replace("getFiles/","").replace("lookUpTable/","");n=te.a.camelize(n),Object.assign(r,Object(g.a)({},n,a))}))})));case 5:a({type:"GET_DATA",payload:r});case 6:case"end":return t.stop()}}))}},ie=function(e,a){return function(t,n){var r=te.a.camelizeKeys(e),o={collection:a,data:r},i=n().data.seguradoras;if(!i)return console.log(o),void t({type:"INSERT_DATA",payload:o});if("seguros"===a&&r[0].placas&&1===r[0].placas.length){var l=i.find((function(e){return e.id===r[0].seguradoraId})),c=r[0],d=[],u=[],m=n().data.veiculos,p=m.map((function(e){return e.apolice===c.apolice&&(e.seguradora=l.seguradora,e.dataEmissao=c.dataEmissao,e.vencimento=c.vencimento),e}));m.forEach((function(e){e.apolice===c.apolice&&(d.push(e.placa),u.push(e.veiculoId))})),c.placas=d,c.veiculos=u,c=[c];var f={data:p,collection:"veiculos"};Object(s.b)((function(){t({type:"INSERT_DATA",payload:{data:c,collection:"seguros"}}),t({type:"UPDATE_COLLECTION",payload:f})}))}else t({type:"INSERT_DATA",payload:o})}},le=function(e,a,t){return function(n){var r=te.a.camelizeKeys(e);n({type:"UPDATE_DATA",payload:{collection:a,data:r,id:t}})}},ce=function(e,a){return function(t){var n={data:e=te.a.camelizeKeys(e),collection:a};console.log(n),t({type:"UPDATE_COLLECTION",payload:n})}},se=function(e,a,t){return function(n){a=te.a.camelize(a),n({type:"DELETE_ONE",payload:{id:e,tablePK:a,collection:t}})}},de=function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("img",{src:"/images/loading.gif",alt:"",height:"60px",width:"60px"}),r.a.createElement("p",null," Carregando... "))},ue=[{collection:"equipamentos",field:"item",label:"Equipamentos",name:"equipamentosId",table:"equipamentos"},{collection:"marcaCarroceria",field:"marca",label:"Marcas de Carroceria",name:"marcaCarroceria",table:"marca_carroceria"},{collection:"carrocerias",field:"modelo",label:"Modelos de Carroceria",name:"modeloCarroceria",table:"modelo_carroceria"},{collection:"marcaChassi",field:"marca",label:"Marcas de Chassi",name:"marcaChassi",table:"marca_chassi"},{collection:"modelosChassi",field:"modeloChassi",label:"Modelos de Chassi",name:"modeloChassi",table:"modelo_chassi"},{collection:"seguradoras",field:"seguradora",label:"Seguradoras",name:"seguradora",table:"seguradora"},{collection:"laudos",table:"laudos"}],me=t(352),pe=function(e,a){var t=[];t=e.map((function(e){return e.replace("getFiles/","").replace("lookUpTable/","")}));var n=function(n){function o(){return Object(G.a)(this,o),Object($.a)(this,Object(Z.a)(o).apply(this,arguments))}return Object(X.a)(o,n),Object(J.a)(o,[{key:"componentDidMount",value:function(){var a,t,n=this;return K.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=this.props.redux,t=[],e.forEach((function(e){var n=e.replace("getFiles/","").replace("lookUpTable/","");a[n]&&a[n][0]||t.push(e)})),!t[0]){r.next=6;break}return r.next=6,K.a.awrap(this.props.getData(t));case 6:W||(W=me()),W.on("insertVehicle",(function(e){n.props.insertData(e,"veiculos")})),W.on("insertInsurance",(function(e){n.props.insertData(e,"seguros")})),W.on("insertEmpresa",(function(e){n.props.insertData(e,"empresas")})),W.on("insertSocios",(function(e){n.props.insertData(e,"socios")})),W.on("insertProcuradores",(function(e){n.props.insertData(e,"procuradores")})),W.on("addElements",(function(e){var a=e.insertedObjects,t=e.table,r=ue.find((function(e){return e.table===t})).collection;n.props.insertData(a,r)})),W.on("updateElements",(function(e){var a=e.collection,t=e.updatedCollection;n.props.updateCollection(t,a)})),W.on("updateVehicle",(function(e){n.props.updateData(e,"veiculos","veiculoId")})),W.on("updateInsurance",(function(e){n.props.updateCollection(e,"seguros")})),W.on("updateSocios",(function(e){n.props.updateCollection(e,"socios")})),W.on("deleteOne",(function(e){var a=e.id,t=e.tablePK,r=e.collection;n.props.deleteOne(a,t,r)})),W.on("insertFiles",(function(e){var a=e.insertedObjects,t=e.collection;console.log(e),n.props.insertData(a,t)}));case 19:case"end":return r.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){W||(W=me(":3001"));["insertVehicle","insertInsurance","insertEmpresa","insertSocios","insertFiles","insertProcuradores","updateVehicle","updateInsurance","updateSocios","deleteOne"].forEach((function(e){return W.off(e)}))}},{key:"render",value:function(){var e=this;return 0!==(t=t.map((function(e){return te.a.camelize(e)}))).length&&t.every((function(a){return e.props.redux.hasOwnProperty(a)}))?r.a.createElement(a,this.props):r.a.createElement(de,null)}}]),o}(r.a.Component);return Object(s.c)((function(e){return{redux:Object(b.a)({},e.data)}}),(function(e){return Object(c.b)({getData:oe,insertData:ie,updateData:le,updateCollection:ce,deleteOne:se},e)}))(n)},fe=function(e){var a=document.querySelectorAll("p"),t=document.querySelectorAll("input"),n=[],r=[],o="Favor verificar o preenchimento dos seguintes campos: ";return a&&a.forEach((function(e){if("Valor inv\xe1lido"===e.textContent||"\u2718"===e.textContent){var a=e.parentNode.querySelectorAll("label");n.push(a[0])}})),t&&t.forEach((function(e){if("date"===e.type&&!re()(e.value,"YYYY-MM-DD",!0).isValid()){var a=e.parentNode.previousSibling;n.push(a)}})),n[0]?(n.forEach((function(e){return r.push(e.textContent)})),r.forEach((function(e){return o+=e+", "})),o=o.replace("(kg)","").replace("(cm)","").slice(0,-2)+".",e?{openAlertDialog:!0,alertType:"inputError",customMsg:o}:r):null},ge=t(278);function he(e){var a=e.collection,t=e.datalist;return e.value.length>2&&"string"!==typeof a?r.a.createElement("datalist",{id:t},a.map((function(e,a){return r.a.createElement("option",{key:a},e[t])}))):null}var be=t(277),ve=Object(S.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"2px",marginBottom:"2px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},select:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"2px",marginBottom:"2px",background:"#fafafa",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},helperText:{margin:"2px 0",fontSize:"0.7rem"}}}));function Ee(e){var a=e.handleInput,t=e.handleBlur,o=e.form,i=e.data,l=e.selectOptions,c=ve(),s=c.helperText,d=function(e){var a=i[e.field];return"number"===e.type?a>e.max||a<e.min:(a&&"string"!==typeof a&&(a=a.toString()),!(!e.pattern||!a)&&null===i[e.field].match(e.pattern))},u=function(e){var a=i[e.field];return a&&"string"!==typeof a&&(a=a.toString()),a>e.max||a<e.min?"Valor inv\xe1lido":a&&null===a.match(e.pattern)?"\u2718":e.pattern&&a&&null!==a.match(e.pattern)?"\u2713":" "};return r.a.createElement("div",{className:"flex center"},o.map((function(e,o){return r.a.createElement(n.Fragment,{key:o},r.a.createElement(be.a,{name:e.field,label:e.label,margin:e.margin,className:c.textField,onChange:a,onBlur:t,type:e.type||"",error:d(e),helperText:u(e),FormHelperTextProps:{className:s},select:e.select||!1,value:i[e.field]||"",disabled:e.disabled||!1,InputLabelProps:{className:c.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888"}},inputProps:{style:{background:e.disabled&&i.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#000",width:e.width||300,height:"7px"},value:"".concat(i[e.field]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1,SelectProps:{style:{background:e.disabled&&i.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#555",fontWeight:400,width:325,height:"44px"}}},!0===e.select?l?l.map((function(e,a){return r.a.createElement(ge.a,{key:a,value:e},e)})):e.options.map((function(e,a){return r.a.createElement(ge.a,{key:a,value:e},e)})):null),!0===e.autoComplete&&r.a.createElement(he,{collection:i[e.collection],datalist:e.datalist,value:i[e.field]||""}))})))}var xe=t(527),Se=t(136),ye=t(276),we=t(242),Ce=t(56),ke=t.n(Ce),Oe=[{field:"seguradora",label:"Seguradora",autoComplete:!0,datalist:"seguradora",collection:"seguradoras"},{field:"apolice",label:"Ap\xf3lice",autoComplete:!0,datalist:"apolice",collection:"seguros",maxLength:25},{type:"date",field:"dataEmissao",label:"Data de Emiss\xe3o"},{type:"date",field:"vencimento",label:"Vencimento"}],je=[[{field:"placa",label:"Placa",margin:"normal",maxLength:8,pattern:"[a-zA-Z]{3}[-]?[ ]?\\d{4}|[A-Z]{3}[-]?[ ]?[0-9]{1}[A-Z]{1}[0-9]{2}"},{field:"renavam",label:"Renavam",margin:"normal",maxLength:11,pattern:"\\d{11}"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Convencional","Executivo","Leito","Semi-Leito","Urbano"]},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",datalist:"modeloChassi",autoComplete:!0,collection:"modelosChassi"},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",max:Number((new Date).getFullYear()),min:Number((new Date).getFullYear())-10},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",datalist:"modelo",autoComplete:!0,collection:"carrocerias"},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",max:Number((new Date).getFullYear()+1),min:Number((new Date).getFullYear())-10},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50}]].concat([Oe]).concat([[{field:"cilindros",label:"Cilindros",margin:"normal",type:"number",max:12,step:1},{field:"potencia",label:"Pot\xeancia (cv)",margin:"normal",type:"number",max:600},{field:"eixos",label:"Eixos",margin:"normal",type:"number",max:8},{field:"pneumaticos",label:"Pneum\xe1ticos",margin:"normal",type:"number",max:20},{field:"pesoDianteiro",label:"Peso Dianteiro (kg)",margin:"normal",type:"number",max:12e3},{field:"pesoTraseiro",label:"Peso Traseiro (kg)",margin:"normal",type:"number",max:15e3},{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piquesPoltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150}]]);function De(e){var a=e.close;return r.a.createElement("div",{style:{position:"absolute",top:"0.4%",right:"0.4%"}},r.a.createElement("div",null,r.a.createElement("i",{className:"material-icons right",title:"Fechar",style:{cursor:"pointer",color:"red"},onClick:a},"close")))}t(241);function Ie(e){var a=e.data,t=e.equipamentos,n=e.handleCheck,o=e.close;return r.a.createElement("div",{className:"popUpWindow",style:{right:"33%",left:"33%"}},r.a.createElement("h4",{className:"equipaHeader"},"Equipamentos")," ",r.a.createElement("hr",null),r.a.createElement("div",{className:"checkListContainer"},t.map((function(e,t){return r.a.createElement("span",{className:"checkListEquipa",key:t},r.a.createElement(we.a,{control:r.a.createElement(ye.a,{checked:a[e.item],value:e.item,onChange:function(){return n(e.item)}}),label:r.a.createElement("p",{className:"checkListLabel"},e.item)}))}))),r.a.createElement(De,{close:o}))}var Ne=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:"6px"},title:{color:"#000",fontWeight:400,fontSize:"0.9rem",textAlign:"center"},selectEmpresa:{marginLeft:e.spacing(1),marginRight:e.spacing(1),minWidth:350,fontColor:"#bbb"},formHolder:{width:900},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)}}})),Ae=function(e){var a=e.empresas,t=e.equipamentos,o=e.data,i=e.handleInput,l=e.handleBlur,c=e.handleEquipa,s=e.handleCheck,d=o.razaoSocial,u=o.activeStep,m=o.addEquipa,p=o.delegatarioCompartilhado,f=o.subtitle,g=o.selectedEmpresa,h=Ne(),b=h.paper,v=h.container,E=h.title,x=h.selectEmpresa,S=h.button,w=h.formHolder,C=Object(n.useState)(!1),j=Object(y.a)(C,2),D=j[0],I=j[1],N=je[u];return r.a.createElement(xe.a,{container:!0,direction:"row",className:v,justify:"center"},r.a.createElement(xe.a,null,r.a.createElement(Se.a,{className:b,style:{padding:"0 2% 0 2%"}},r.a.createElement(xe.a,{container:!0,justify:"center"},0===u?r.a.createElement(xe.a,{item:!0,xs:D?4:12,style:{marginBottom:"15px"}},r.a.createElement(O.a,{className:E}," Selecione a Via\xe7\xe3o"),r.a.createElement(be.a,{inputProps:{list:"razaoSocial",name:"razaoSocial",style:{textAlign:"center",fontSize:"0.8rem"}},className:x,value:d,onChange:i,onBlur:l}),r.a.createElement(he,{collection:a,datalist:"razaoSocial",value:d})):r.a.createElement("div",{className:"formTitle"},"Cadastro de Ve\xedculo - ",d),0===u&&D&&r.a.createElement(xe.a,{item:!0,xs:4,style:{marginLeft:"30px"}},r.a.createElement(O.a,{className:E}," Empresa autorizada a compartilhar"),r.a.createElement(be.a,{inputProps:{list:"razaoSocial",name:"delegatarioCompartilhado",style:{textAlign:"center",fontSize:"0.8rem"}},className:x,value:p,onChange:i,onBlur:l}),r.a.createElement(he,{collection:a,datalist:"razaoSocial",value:p}))),0===u&&r.a.createElement(xe.a,{item:!0,xs:12},r.a.createElement(we.a,{control:r.a.createElement(ye.a,{checked:!0===D,onChange:function(){return I(!D)},value:D}),label:r.a.createElement(O.a,{style:{color:"#2979ff",fontSize:"0.7rem",float:"right"}},"Ve\xedculo Compartilhado?")}))),g?r.a.createElement(xe.a,{item:!0,xs:12},u<3&&r.a.createElement(Se.a,{className:b},r.a.createElement("div",{className:"formSubtitle"}," ",f[u]),r.a.createElement(Ee,{form:N,data:o,handleBlur:l,handleInput:i}),0===u&&r.a.createElement(xe.a,{container:!0,justify:"center"},r.a.createElement(k.a,{variant:"outlined",size:"small",color:"primary",className:S,onClick:c},r.a.createElement(ke.a,null),"Equipamentos"))),m&&r.a.createElement(Ie,{equipamentos:t,close:c,handleCheck:s,data:o})):r.a.createElement(xe.a,{container:!0,justify:"center"},r.a.createElement("div",{className:w}))))},ze=t(95),Pe=t(290),Fe=t.n(Pe),Te=t(94),Le=t.n(Te);function qe(e){var a=e.title,t=e.name,o=e.formData,i=e.handleFiles,l=e.dropDisplay,c=e.single,s=e.style,d=Object(n.useState)(),u=Object(y.a)(d,2),m=u[0],p=u[1];return Object(n.useEffect)((function(){if(o&&"object"===typeof o){var e=!0,a=!1,n=void 0;try{for(var r,i=o.entries()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var l=r.value;t===l[0]&&p(l[1].name)}}catch(c){a=!0,n=c}finally{try{e||null==i.return||i.return()}finally{if(a)throw n}}}else p(null)}),[o,t]),r.a.createElement("div",{style:s||null},a&&r.a.createElement("p",{className:"fileInput"},a),r.a.createElement(ze.a,{onDrop:function(e){return i(e,t)}},(function(e){var a=e.getRootProps,t=e.getInputProps;return r.a.createElement("div",Object.assign({className:m?"dropBox fileAttached":c?"dropBox":"multipleDropBox"},a()),r.a.createElement("input",t()),m?r.a.createElement(n.Fragment,null,r.a.createElement("div",null," ",r.a.createElement(Le.a,{className:"icon"}),"  ",m," "),c&&r.a.createElement("span",null,"(clique ou arraste outro arquivo para alterar)")):r.a.createElement("div",null," ",r.a.createElement(Fe.a,{className:"icon"}),r.a.createElement("span",null,"  ",l)))})))}var Me=[{title:"CRLV do Ve\xedculo",name:"crlv"},{title:"Ap\xf3lice do Seguro",name:"apoliceDoc"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"DAE Quitada",name:"dae"},{title:"Laudo de Pesagem",name:"pesagem"}],Be=[{title:"Documento de Transfer\xeancia",name:"transferenciaDoc"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"DAE Quitada",name:"dae"},{title:"Laudo de Pesagem",name:"pesagem"},{title:"CRLV com nova placa",name:"newPlateDoc"}],Ve=Object(S.a)((function(e){return{root:{flexGrow:"1",margin:"5px",padding:"8px"},paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 14px 0",height:"auto",minHeight:"350px"},sendButton:{margin:"3% 0 3% 0",backgroundColor:"teal",float:"right"},text:{textAlign:"left",margin:e.spacing(2),fontSize:"0.9rem",fontWeight:"500",color:"#333"},item:{marginTop:"10px",padding:"0 5px"}}}));function Re(e){var a,t=e.handleFiles,o=e.parentComponent,i=e.dropDisplay,l=e.formData,c=e.insuranceExists,s=Ve(),d=s.root,u=s.paper,m=s.item;return"cadastro"===o&&(a=Me),"altDados"===o&&(a=Be),r.a.createElement("div",null,r.a.createElement(Se.a,{className:u},r.a.createElement("div",{className:"formSubtitle"}," Anexe os documentos solicitados nos campos abaixo "),r.a.createElement(xe.a,{container:!0,className:d},a.map((function(e,a){var o=e.title,s=e.name;return"apoliceDoc"===s&&c?null:r.a.createElement(n.Fragment,{key:a},r.a.createElement(xe.a,{item:!0,xs:10,md:4,className:m},r.a.createElement(qe,{title:o,name:s,formData:l,dropDisplay:i,handleFiles:t})))})))))}var Ue=t(165),Ye=t.n(Ue),We=t(164),_e=t.n(We),He={display:"flex",justifyContent:"center",width:"100%",alignContent:"center",flexWrap:"wrap"},Ke={textAlign:"center",alignItems:"flex-start",height:"40px",border:"1px #ccc solid",padding:"7px 8px 0 8px",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px"},Ge={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},Je={verticalAlign:"middle",padding:"0 0% 0 2%"};function $e(e){var a=e.form,t=e.files,n=[];if(t){var o=!0,i=!1,l=void 0;try{for(var c,s=function(){var e=c.value;a.forEach((function(a){var t=a.name,r=a.title;t===e[0]&&e[1]&&e[1].name&&n.push({label:r,fieldName:t,fileName:e[1].name})}))},d=t.entries()[Symbol.iterator]();!(o=(c=d.next()).done);o=!0)s()}catch(u){i=!0,l=u}finally{try{o||null==d.return||d.return()}finally{if(i)throw l}}}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:He},n.map((function(e,a){return r.a.createElement("div",{style:Ke,key:a},r.a.createElement(_e.a,{style:Je}),r.a.createElement("span",{style:{verticalAlign:"middle"}}," "," ",e.label),r.a.createElement(Ye.a,{style:Ge,onClick:function(){return function(e,a){var n=t.get(e),r=window.URL.createObjectURL(n),o=document.createElement("a");o.href=r,n&&("application/pdf"===n.type||n.type.match("image/"))?(o.setAttribute("rel","noopener"),o.setAttribute("target","_blank"),o.setAttribute("title",a)):o.setAttribute("download",a),document.body.appendChild(o),o.click()}(e.fieldName,e.fileName)}}))}))))}var Ze=function(e,a,t,n){n&&"apoliceDoc"===n&&(t="empresaDocs"),ee()({url:"/api/mongoDownload/?collection=".concat(t,"&id=").concat(e),method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download",a),document.body.appendChild(n),n.click()})).catch((function(e){console.log(e)}))};function Xe(e){var a=e.length,t=e.title,n=e.labels,o=e.values,i=e.style,l=e.docs;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",style:i,colSpan:a},t)),r.a.createElement("tr",null,n.map((function(e,a){return r.a.createElement("th",{key:a,style:i},e)})))),r.a.createElement("tbody",null,r.a.createElement("tr",null,o.map((function(e,a){return r.a.createElement("td",{className:"review",key:a,style:i,onClick:function(){return l&&l.id?Ze(l.id,l.filename,"vehicleDocs",l.metadata.fieldName):null}},(t=e,re()(t,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?re()(t,re.a.ISO_8601,!0).format("DD/MM/YYYY"):t));var t})))))}var Qe=t(166),ea=t.n(Qe),aa=Object(S.a)((function(e){return{paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 5px 0",height:"auto"}}}));function ta(e){var a,t=e.data,o=e.parentComponent,i=e.form,l=e.filesForm,c=e.files,s=aa().paper,d=[],u={},m=[],p=[];return i.forEach((function(e){e.forEach((function(e){t.hasOwnProperty([e.field])&&(Object.assign(u,Object(g.a)({},e.field,t[e.field])),m.push(e))})),d.push(u),p.push(m),u={},m=[]})),"cadastro"===o&&(a=[{subtitle:"Detalhes do ve\xedculo",form:p[0],data:d[0]},{subtitle:"Detalhes do seguro",form:p[1],data:d[1]},{subtitle:"Informa\xe7\xf5es sobre a vistoria",form:p[2],data:d[2]}]),"altDados"===o&&(a=[{subtitle:"Detalhes do ve\xedculo",form:p[0],data:d[0]},{subtitle:"Informa\xe7\xf5es sobre a vistoria",form:p[1],data:d[1]}]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Se.a,{className:s},r.a.createElement("main",{className:"divTable"},a.map((function(e,a){var t=e.subtitle,o=e.form,i=e.data;return r.a.createElement(n.Fragment,{key:a},r.a.createElement(Xe,{length:o.length,title:t,labels:o.map((function(e){return e.label})),values:Object.values(i)}))}))),r.a.createElement("section",{style:{margin:"30px 0 0 25px"}},r.a.createElement("h3",null," Equipamentos "),r.a.createElement("p",null,Array.isArray(t.equipamentosId)&&t.equipamentosId&&t.equipamentosId.map((function(e,a){return r.a.createElement("span",{style:{fontFamily:"Segoe UI, Tahoma, Geneva, Verdana",fontSize:"12px"},key:a},a!==t.equipamentosId.length?e+", ":e)})))),r.a.createElement("h3",{style:{margin:"30px 0 0 25px"}}," ",r.a.createElement(ea.a,{style:{verticalAlign:"middle",padding:"0 0 0 8px"}})," Documentos "),c&&r.a.createElement($e,{form:l,files:c})))}var na=t(542),ra=t(291),oa=t.n(ra);function ia(e){var a=e.links,t=e.text;return r.a.createElement(xe.a,{style:{marginTop:"1%",paddingLeft:"1%"}},r.a.createElement(na.a,{separator:"\u203a","aria-label":"breadcrumb"},r.a.createElement(l.b,{to:"/",style:{}},r.a.createElement(oa.a,{style:{verticalAlign:"middle",marginRight:"5px",paddingBottom:"3px"}}),r.a.createElement("span",{style:{fontSize:"0.8rem"}},"P\xe1gina inicial")),r.a.createElement(l.b,{color:"primary",to:a[1],style:{fontSize:"0.8rem"}},a[0]),r.a.createElement("span",{style:{fontSize:"0.8rem"}},t)))}var la=Object(S.a)((function(e){return{button:{margin:e.spacing(1),float:"right"},backButton:{margin:e.spacing(1),float:"left",color:"#333",backgroundColor:"#eee"}}}));function ca(e){var a=e.activeStep,t=e.setActiveStep,n=e.lastStep,o=e.handleSubmit,i=e.disabled,l=la(),c=l.backButton,s=l.button;return r.a.createElement("div",null,r.a.createElement(k.a,{variant:"contained",className:c,onClick:function(){return t("back")},disabled:0===a},"Voltar"),a<n?r.a.createElement(k.a,{variant:"contained",color:"primary",className:s,onClick:function(){return t("next")},disabled:i},"Avan\xe7ar"):r.a.createElement(k.a,{variant:"contained",color:"primary",className:s,onClick:function(){return o()}},"Aprovar"))}var sa=t(548),da=t(528),ua=t(543),ma=Object(S.a)((function(e){return{root:{width:"100%",marginTop:"1%"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),padding:"1% 0 0 3%",fontWeight:500}}}));function pa(e){var a=e.activeStep,t=e.steps,n=ma();return r.a.createElement("div",{className:n.root},r.a.createElement(sa.a,{activeStep:a},t.map((function(e,a){return r.a.createElement(da.a,Object.assign({key:e},{}),r.a.createElement(ua.a,{},e))}))))}var fa=t(2),ga=t(179),ha=t(178),ba=t(529),va=t(243),Ea=t(549),xa=Object(S.a)((function(e){return{success:{backgroundColor:ga.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:ha.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function Sa(e){var a=xa(),t=e.className,o=e.message,i=(e.onClose,e.variant),l=Object(_.a)(e,["className","message","onClose","variant"]);return r.a.createElement(ba.a,Object.assign({className:Object(fa.a)(a[i],t),"aria-describedby":"client-snackbar",message:r.a.createElement(n.Fragment,null,r.a.createElement("span",{id:"client-snackbar",className:a.message},r.a.createElement(va.a,null,"check"),"    ",o))},l))}function ya(e){return r.a.createElement("div",null,r.a.createElement(Ea.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.open,autoHideDuration:2e3,onClose:e.close},r.a.createElement(Sa,{variant:"success",message:e.msg})))}var wa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.replace(/\D/g,"");return a=(a=(a=(a=(a/100).toFixed(2)+"").replace(".",",")).replace(/(\d)(\d{3})(\d{3}),/g,"$1.$2.$3,")).replace(/(\d)(\d{3}),/g,"$1.$2,")},Ca=t(544),ka=t(533),Oa=t(531),ja=t(532),Da=t(530);function Ia(e){var a=e.open,t=e.alertType,n=e.close,o=e.confirm,i=(e.customTitle,e.customMessage),l=void 0===i?"":i,c=function(e){if("object"===typeof e)return{title:"Empresa j\xe1 cadastrada",message:"A empresa ".concat(e.razaoSocial," j\xe1 est\xe1 cadastrada no sistema com o CNPJ ").concat(e.cnpj,".")};switch(e){case"plateNotFound":return{title:"Placa n\xe3o encontrada",message:'A placa informada n\xe3o corresponde a nenhum ve\xedculo da frota da via\xe7\xe3o selecionada. Para cadastrar um novo ve\xedculo, selecione a op\xe7\xe3o Ve\xedculos => "Cadastro de Ve\xedculo" no menu acima.'};case"invalidPlate":return{title:"Placa inv\xe1lida",message:"Certifique-se de que a placa informada \xe9 uma placa v\xe1lida, com tr\xeas letras seguidas de 4 n\xfameros (ex: AAA-0000)"};case"plateExists":return{title:"Placa j\xe1 cadastrada!",message:"A placa informada j\xe1 est\xe1 cadastrada. Para atualizar seguro, alterar dados ou solicitar baixa, utilize as op\xe7\xf5es acima. "};case"invalidModel":return{title:"Modelo n\xe3o cadastrado.",message:l};case"inputError":return{title:"Preenchimento inv\xe1lido.",message:l};case"fieldsMissing":return{title:"Favor preencher todos os campos.",message:"Os campos acima s\xe3o de preenchimento obrigat\xf3rio. Certifique-se de ter preenchido todos eles."};case"invalidInsurance":return{title:"Favor verificar os dados do seguro.",message:"As informa\xe7\xf5es referentes ao seguro do ve\xedculo s\xe3o obrigat\xf3rias. Certifique-se de ter informado todas elas."};case"filesNotFound":return{title:"Arquivos n\xe3o encontrados",message:"N\xe3o h\xe1 nenhum arquivo anexado no sistema para a ".concat("Procura\xe7\xe3o"," selecionada. \n          Ao cadastrar ou atualizar a ").concat("Procura\xe7\xe3o",", certifique-se de anexar o arquivo correspondente.")};case"empresaNotFound":return{title:"Empresa n\xe3o encontrada.",message:"A empresa informada n\xe3o est\xe1 registrada no sistema. Para cadastrar uma nova empresa, utilize a op\xe7\xe3o Empresas -> Cadastrar."};case"seguradoraNotFound":return{title:"Seguradora n\xe3o encontrada.",message:"A seguradora informada n\xe3o est\xe1 registrada no sistema. Favor verificar o nome da seguradora."};case"alreadyExists":return{title:"CPF j\xe1 cadastrado.",message:"O CPF informado corresponde a um s\xf3cio j\xe1 cadastrado. \n          Para remover ou editar as informa\xe7\xf5es dos s\xf3cios, utilize a respectiva op\xe7\xe3o abaixo."};case"numberNotValid":return{title:"N\xfamero inv\xe1lido.",message:"O n\xfamero digitado n\xe3o \xe9 v\xe1lido."};case"overShared":return{title:"Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",message:"A participa\xe7\xe3o societ\xe1ria informada excede a 100%."};case"subShared":return{title:"Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",message:"A participa\xe7\xe3o societ\xe1ria informada n\xe3o soma 100%. Favor informar todos os s\xf3cios com suas respectivas participa\xe7\xf5es."};case"veiculoPendente":return{title:"Pend\xeancias encontradas para este ve\xedculo.",message:"Verifique se h\xe1 alguma aprova\xe7\xe3o pendente quanto ao cadastro, seguro, transfer\xeancia ou altera\xe7\xe3o de dados do ve\xedculo."};case"seguroVencido":return{title:"Pend\xeancias encontradas para o seguro deste ve\xedculo.",message:"Para regularizar o seguro deste ve\xedculo, acesse a op\xe7\xe3o Ve\xedculos=>Seguros no menu acima."};case"contratoVencido":return{title:"Contrato expirado.",message:"O contrato de concess\xe3o com o delegat\xe1rio selecionado est\xe1 expirado."};default:return{title:null,message:null}}}(t),s=c.title,d=c.message;return s&&d?r.a.createElement("div",null,r.a.createElement(Ca.a,{open:a,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Da.a,{id:"alert-dialog-title"},s),r.a.createElement(Oa.a,null,r.a.createElement(ja.a,{id:"alert-dialog-description"},d)),r.a.createElement(ka.a,null,r.a.createElement(k.a,{onClick:n,color:"primary"},o?"Cancelar":"Fechar"),o&&r.a.createElement(k.a,{onClick:n,color:"primary",autoFocus:!0},"Confirmar")))):null}var Na=pe(["veiculos","empresas","modelosChassi","carrocerias","seguradoras","seguros","equipamentos"],function(e){function a(){var e;return Object(G.a)(this,a),(e=Object($.a)(this,Object(Z.a)(a).call(this))).state={activeStep:0,steps:["Dados do Ve\xedculo","Dados do seguro","Vistoria e laudos","Documentos","Revis\xe3o"],subtitle:["Informe os dados do Ve\xedculo","Informe os dados do Seguro","Preencha os campos abaixo conforme a vistoria realizada"],razaoSocial:"",frota:[],delegatarioCompartilhado:"",toastMsg:"Ve\xedculo cadastrado!",confirmToast:!1,files:[],fileNames:[],insuranceExists:!1,addEquipa:!1,openAlertDialog:!1,dropDisplay:"Clique ou arraste para anexar"},e.setActiveStep=function(a){var t,n,r,o;return K.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(0!==e.state.activeStep){i.next=7;break}if(!e.state.frota.filter((function(a){return a.placa===e.state.placa}))[0]){i.next=7;break}return i.next=5,K.a.awrap(e.setState({placa:""}));case 5:return e.setState({alertType:"plateExists",openAlertDialog:!0}),i.abrupt("return",null);case 7:if(!(t=e.state.errors)||!t[0]){i.next=12;break}return i.next=11,K.a.awrap(e.setState(Object(b.a)({},e.state,{},fe("setState"))));case 11:return i.abrupt("return");case 12:n=[],r=e.state.equipamentos,o=e.state.activeStep,"next"===a&&e.setState({activeStep:o+1}),"back"===a&&e.setState({activeStep:o-1}),"reset"===a&&e.setState({activeStep:0}),1===o&&(r.forEach((function(a){!0===e.state[a]&&n.push(a)})),n[0]?e.setState({equipamentosId:n}):e.setState({equipamentosId:[]}));case 19:case"end":return i.stop()}}))},e.handleInput=function(a){var t,n,r,o,i,l,c,s,d,u,m,p,f,v,E,x,S,y,w,C,k,O,j,D,I,N;return K.a.async((function(A){for(;;)switch(A.prev=A.next){case 0:t=e.props.redux,n=t.veiculos,r=t.empresas,o=e.state,i=o.allInsurances,l=o.apolice,c=o.seguradora,s=o.dataEmissao,d=o.vencimento,u=a.target.name,m=a.target.value,e.setState(Object(g.a)({},u,m)),A.t0=u,A.next="razaoSocial"===A.t0?6:"placa"===A.t0?19:"apolice"===A.t0?24:"valorChassi"===A.t0?39:"valorCarroceria"===A.t0?41:43;break;case 6:if(!(p=r.find((function(e){return e.razaoSocial===m})))){A.next=17;break}return f=p.razaoSocial,v=p.delegatarioId,A.next=11,K.a.awrap(e.setState({selectedEmpresa:p,razaoSocial:f,delegatarioId:v}));case 11:m!==p.razaoSocial&&e.setState({selectedEmpresa:void 0}),E=n.filter((function(a){return a.empresa===e.state.razaoSocial})),x=i.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:E,seguros:x}),A.next=18;break;case 17:e.setState({selectedEmpresa:void 0,frota:[],placa:void 0,apolice:void 0});case 18:return A.abrupt("break",44);case 19:if("string"!==typeof m){A.next=23;break}return m=m.toLocaleUpperCase(),A.next=23,K.a.awrap(e.setState(Object(g.a)({},u,m)));case 23:return A.abrupt("break",44);case 24:if(S=e.props.redux.seguros,y=e.state.selectedEmpresa,w=Object(h.a)(S.filter((function(e){return e.delegatarioId===y.delegatarioId}))),k=Object(b.a)({},w.find((function(e){return e[u]===m}))),O=Object(b.a)({},w.find((function(a){return a[u]===m&&a.apolice===e.state.apolice}))),"apolice"===u&&(C=k),"seguradora"===u&&(C=O),!(C&&C.dataEmissao&&C.vencimento)){A.next=33;break}return j=re()(C.dataEmissao).format("YYYY-MM-DD"),D=C.vencimento.toString().slice(0,10),I=C.seguradora,A.next=32,K.a.awrap(e.setState({seguradora:I,dataEmissao:j,vencimento:D,insuranceExists:C}));case 32:return A.abrupt("return");case 33:if(0!==Object.keys(C).length){A.next=38;break}return N={},Object.assign(N,{empresa:y.razaoSocial,delegatarioId:y.delegatarioId,apolice:l,seguradora:c,dataEmissao:s,vencimento:d,placas:[],veiculos:[]}),A.next=38,K.a.awrap(e.setState({newInsurance:N,insuranceExists:!1,dataEmissao:"",vencimento:""}));case 38:return A.abrupt("break",44);case 39:case 41:return e.setState(Object(g.a)({},u,wa(m))),A.abrupt("break",44);case 43:case 44:case"end":return A.stop()}}))},e.getId=function(a,t,n,r,o,i,l){var c,s,d,u,m,p;return K.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:if(s=n.filter((function(e){return e[o].toLowerCase().match(t.toLowerCase())})),""===t&&e.setState((c={},Object(g.a)(c,a,""),Object(g.a)(c,r,""),c)),!s[0]){f.next=10;break}if(d=s[0][o],u=s[0][i],""===t){f.next=8;break}return f.next=8,K.a.awrap(e.setState((m={},Object(g.a)(m,a,d),Object(g.a)(m,r,u),m)));case 8:f.next=14;break;case 10:return f.next=12,K.a.awrap(e.setState((p={},Object(g.a)(p,a,""),Object(g.a)(p,r,""),p)));case 12:e.setState({alertType:"invalidModel",openAlertDialog:!0,customMsg:"O modelo de ".concat(l," n\xe3o est\xe1 cadastrado no sistema.")}),document.getElementsByName(a)[0].focus();case 14:case"end":return f.stop()}}))},e.handleBlur=function(a){var t,n,r,o,i,l,c,s,d,u,m,p,f,g,h,b;return K.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:t=e.props.redux,n=t.empresas,r=t.seguros,o=e.state,i=o.frota,l=o.modelosChassi,c=o.carrocerias,s=o.seguradoras,d=o.allInsurances,u=a.target.name,m=a.target.value,(p=fe())?e.setState({errors:p}):e.setState({errors:void 0}),v.t0=u,v.next="modeloChassi"===v.t0?7:"modeloCarroceria"===v.t0?9:"delegatarioCompartilhado"===v.t0?11:"seguradora"===v.t0?13:"apolice"===v.t0?20:23;break;case 7:return e.getId(u,m,l,"modeloChassiId","modeloChassi","id","chassi"),v.abrupt("break",24);case 9:return e.getId(u,m,c,"modeloCarroceriaId","modelo","id","carroceria"),v.abrupt("break",24);case 11:return e.getId(u,m,n,"compartilhadoId","razaoSocial","delegatarioId"),v.abrupt("break",24);case 13:return v.next=15,K.a.awrap(e.getId(u,m,s,"seguradoraId","seguradora","id","Seguradora"));case 15:return f=[],e.state.delegatarioId&&""===e.state.seguradora&&(f=d.filter((function(a){return a.delegatarioId===e.state.delegatarioId})),e.setState({seguros:f})),e.state.delegatarioId||""===e.state.seguradora||(f=d.filter((function(a){return a.seguradora===e.state.seguradora})),e.setState({seguros:f})),e.state.delegatarioId&&""!==e.state.seguradora&&(f=d.filter((function(a){return a.delegatarioId===e.state.delegatarioId})).filter((function(a){return a.seguradora===e.state.seguradora})),e.setState({seguros:f})),v.abrupt("break",24);case 20:return(g=r.find((function(e){return e.apolice===m})))&&e.setState({insuranceExists:g}),v.abrupt("break",24);case 23:case 24:if("placa"!==u||"string"===typeof e.state.frota){v.next=42;break}if(7!==m.length){v.next=30;break}return h=m.replace(/(\w{3})/,"$1-"),v.next=29,K.a.awrap(e.setState({placa:h}));case 29:m=h;case 30:if(8!==m.length){v.next=35;break}return b=m.replace(" ","-"),v.next=34,K.a.awrap(e.setState({placa:b}));case 34:m=b;case 35:if(!i.find((function(e){return e.placa===m}))){v.next=42;break}return v.next=39,K.a.awrap(e.setState({placa:null}));case 39:m="",e.setState({alertType:"plateExists",openAlertDialog:!0}),document.getElementsByName("placa")[0].focus();case 42:case"end":return v.stop()}}))},e.handleCadastro=function(){var a,t,n,r,o,i,l,c,s,d,u,m,p,f,h,b,v,E,x,S,y,w,C,k,O,j;return K.a.async((function(D){for(;;)switch(D.prev=D.next){case 0:if(a=e.state,t=a.anoCarroceria,n=a.equipamentosId,r=a.pesoDianteiro,o=a.pesoTraseiro,i=a.poltronas,l=a.delegatarioId,c=a.compartilhadoId,s=a.seguros,d=a.modeloChassiId,u=a.modeloCarroceriaId,m=a.seguradoraId,"Ativo",p=t,f=93*Number(i)+(Number(r)+Number(o)),isNaN(f)&&(f=void 0),h={},je.forEach((function(a){a.forEach((function(a){for(var t in e.state)t===a.field&&Object.assign(h,Object(g.a)({},t,e.state[t]))}))})),b=h.dataEmissao,v=h.vencimento,h.delegatarioCompartilhado,h.modeloChassi,h.modeloCarroceria,h.seguradora,E=Object(_.a)(h,["dataEmissao","vencimento","delegatarioCompartilhado","modeloChassi","modeloCarroceria","seguradora"]),x={apolice:h.apolice,seguradoraId:m,delegatarioId:l},S=re()(b,"YYYY-MM-DD",!0).isValid(),y=re()(v,"YYYY-MM-DD",!0).isValid(),S&&(x.dataEmissao=b),y&&(x.vencimento=v),Object.assign(E,{delegatarioId:l,situacao:"Ativo",indicadorIdade:p,pbt:f,equipamentosId:n,modeloChassiId:d,modeloCarroceriaId:u}),E.delegatarioCompartilhado=c,Object.keys(E).forEach((function(e){""===E[e]&&delete E[e]})),Object.keys(x).forEach((function(e){""===x[e]&&delete x[e]})),w=te.a.decamelizeKeys(E),C=te.a.decamelizeKeys(x),!(k=s.filter((function(e){return e.apolice===C.apolice})))[0]){D.next=23;break}return D.next=19,K.a.awrap(ee.a.post("/api/cadastroVeiculo",w).then((function(a){var t=a.data;e.submitFiles(t)})).catch((function(e){return console.log(e)})));case 19:e.resetState(),e.toast(),D.next=36;break;case 23:if(k[0]||void 0===C.apolice||!(C.apolice.length>2)||void 0===C.seguradora_id){D.next=35;break}return D.next=26,K.a.awrap(ee.a.post("/api/cadastroVeiculo",w).then((function(a){console.log(a.data),O=a.data,e.submitFiles(O)})).catch((function(e){return console.log(e)})));case 26:return D.next=28,K.a.awrap(ee.a.post("/api/cadSeguro",C).then((function(e){return console.log(e.data)})));case 28:return j={table:"veiculo",column:"apolice",value:C.apolice,tablePK:"veiculo_id",ids:[O]},D.next=31,K.a.awrap(ee.a.put("/api/updateInsurances",j).then((function(e){return console.log(e.data)})));case 31:e.resetState(),e.toast(),D.next=36;break;case 35:e.setState({alertType:"invalidInsurance",openAlertDialog:!0});case 36:case"end":return D.stop()}}))},e.handleFiles=function(a,t){var n,r;return K.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(a&&a.length>0)){o.next=7;break}return n=new FormData,(r=e.state.fileNames).push(Object(g.a)({},t,a[0].name)),o.next=5,K.a.awrap(e.setState(Object(g.a)({filesNames:r},t,a[0])));case 5:Me.forEach((function(a){var t=a.name;for(var r in e.state)r.match(t)&&(n.append(t,e.state[t]),n.get(r)||n.delete(r))})),e.setState({form:n});case 7:case"end":return o.stop()}}))},e.submitFiles=function(a){var t,n,r,o,i,l,c,s,d,u,m,p,f,g,h,b,v,E;return K.a.async((function(x){for(;;)switch(x.prev=x.next){case 0:if(t=e.state,n=t.selectedEmpresa,r=t.apolice,o=n.delegatarioId,i=new FormData,l=new FormData,!a||!e.state.form){x.next=23;break}for(i.append("veiculoId",a),c=!0,s=!1,d=void 0,x.prev=7,u=e.state.form.entries()[Symbol.iterator]();!(c=(m=u.next()).done);c=!0)(p=m.value)[0]&&p[1]?"apoliceDoc"===p[0]?(l.append("fieldName","apoliceDoc"),l.append("apolice",r),l.append("empresaId",o),l.append(p[0],p[1])):p[1]&&i.append(p[0],p[1]):(i=null,l=null);x.next=15;break;case 11:x.prev=11,x.t0=x.catch(7),s=!0,d=x.t0;case 15:x.prev=15,x.prev=16,c||null==u.return||u.return();case 18:if(x.prev=18,!s){x.next=21;break}throw d;case 21:return x.finish(18);case 22:return x.finish(15);case 23:for(f=!0,g=!1,h=void 0,x.prev=26,b=i.entries()[Symbol.iterator]();!(f=(v=b.next()).done);f=!0)E=v.value,console.log(E[0],E[1]);x.next=34;break;case 30:x.prev=30,x.t1=x.catch(26),g=!0,h=x.t1;case 34:x.prev=34,x.prev=35,f||null==b.return||b.return();case 37:if(x.prev=37,!g){x.next=40;break}throw h;case 40:return x.finish(37);case 41:return x.finish(34);case 42:if(!i){x.next=45;break}return x.next=45,K.a.awrap(ee.a.post("/api/vehicleUpload",i).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})));case 45:if(!l){x.next=48;break}return x.next=48,K.a.awrap(ee.a.post("/api/empresaUpload",l).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})));case 48:case"end":return x.stop()}}),null,null,[[7,11,15,23],[16,,18,22],[26,30,34,42],[35,,37,41]])},e.showFiles=function(a){var t=e.state.files.filter((function(e){return e.metadata.veiculoId===a.toString()}));t[0]?e.setState({filesCollection:t,showFiles:!0,selectedVehicle:a}):(e.setState({alertType:"filesNotFound",openAlertDialog:!0}),e.setState({filesCollection:[]}))},e.resetState=function(){var a={},t=e.props.redux.equipamentos,n={},r={};je.forEach((function(t){t.forEach((function(t){Object.keys(t).forEach((function(n){"field"===n&&e.state[t[n]]&&Object.assign(a,Object(g.a)({},t[n],void 0))}))}))})),Me.forEach((function(e){var a=e.name;Object.assign(n,Object(g.a)({},a,null))})),t.forEach((function(e){return Object.assign(r,Object(g.a)({},e.item,!1))})),e.setState(Object(b.a)({},a,{},n,{},r,{activeStep:0,razaoSocial:"",selectedEmpresa:void 0,frota:[],delegatarioCompartilhado:"",files:[],fileNames:[],insuranceExists:!1,form:new FormData}))},e.handleCheck=function(a){return e.setState(Object(b.a)({},e.state,Object(g.a)({},a,!e.state[a])))},e.handleEquipa=function(){return e.setState({addEquipa:!e.state.addEquipa})},e.toggleDialog=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.handleEquipa()},e}return Object(X.a)(a,e),Object(J.a)(a,[{key:"componentDidMount",value:function(){var e,a,t,n,r,o;return K.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e=this.props.redux,a=e.modelosChassi,t=e.carrocerias,n=e.seguradoras,r={},!e||!e.equipamentos){i.next=7;break}return e.equipamentos.forEach((function(e){return Object.assign(r,Object(g.a)({},e.item,!1))})),o=Object.keys(r),i.next=7,K.a.awrap(this.setState(Object(b.a)({modelosChassi:a,carrocerias:t,seguradoras:n,equipamentos:o},r,{allInsurances:this.props.redux.seguros})));case 7:document.addEventListener("keydown",this.escFunction,!1);case 8:case"end":return i.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.confirmToast,t=e.toastMsg,o=e.activeStep,i=e.openAlertDialog,l=e.alertType,c=e.steps,s=e.selectedEmpresa,d=e.placa,u=e.dropDisplay,m=e.form,p=e.insuranceExists,f=this.props.redux,g=f.empresas,h=f.equipamentos;return r.a.createElement(n.Fragment,null,r.a.createElement(ia,{links:["Ve\xedculos","/veiculos"],text:"Cadastro de ve\xedculo"}),r.a.createElement(pa,{activeStep:o,steps:c,setActiveStep:this.setActiveStep}),r.a.createElement(Ae,{data:this.state,empresas:g,equipamentos:h,handleInput:this.handleInput,handleBlur:this.handleBlur,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck,match:this.props.match}),3===o&&r.a.createElement(Re,{parentComponent:"cadastro",handleFiles:this.handleFiles,dropDisplay:u,formData:m,insuranceExists:p}),4===o&&r.a.createElement(ta,{parentComponent:"cadastro",files:this.state.form,filesForm:Me,data:this.state,form:je}),s&&r.a.createElement(ca,{activeStep:o,lastStep:c.length-1,handleSubmit:this.handleCadastro,setActiveStep:this.setActiveStep,disabled:"string"!==typeof d||""===d}),r.a.createElement(ya,{open:a,close:this.toast,msg:t}),i&&r.a.createElement(Ia,{open:i,close:this.toggleDialog,alertType:l,customMessage:this.state.customMsg}))}}]),a}(n.PureComponent)),Aa=[[{field:"placa",label:"Placa",margin:"normal",datalist:"placa",autoComplete:!0,collection:"frota"},{field:"delegatario",label:"Delegat\xe1rio",margin:"normal",datalist:"razaoSocial",autoComplete:!0,collection:"empresas"},{field:"compartilhado",label:"Delegat\xe1rio Compartilhado",margin:"normal",datalist:"razaoSocial",autoComplete:!0,collection:"empresas"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Convencional","Executivo","Leito","Semi-Leito","Urbano"]},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50},{field:"renavam",label:"Renavam",margin:"normal",disabled:!0},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17,disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",disabled:!0},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",disabled:!0},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",disabled:!0},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",disabled:!0},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,disabled:!0}]].concat([[{field:"pesoDianteiro",label:"Peso Dianteiro (kg)",margin:"normal",type:"number",max:12e3},{field:"pesoTraseiro",label:"Peso Traseiro (kg)",margin:"normal",type:"number",max:15e3},{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piquesPoltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150}]]).concat([[]]).concat([[]]),za=(t(384),Object(S.a)((function(e){return{paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1),minWidth:"700px"}}})));function Pa(e){var a=e.empresas,t=e.handleInput,n=e.handleBlur,o=e.data.razaoSocial,i=za().paper;return r.a.createElement("div",{className:"selectEmpresa"},r.a.createElement(Se.a,{className:i,style:{padding:"0 2% 0 2%"}},r.a.createElement("div",{className:"item"},r.a.createElement("h3",null,"  Selecione a Via\xe7\xe3o "),r.a.createElement("input",{list:"razaoSocial",name:"razaoSocial",className:"selectEmpresa",value:o,onChange:t,onBlur:n}),r.a.createElement(he,{style:{textAlign:"center",width:"500px"},collection:a,datalist:"razaoSocial",value:o}))))}var Fa=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1)},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)}}})),Ta=function(e){var a=e.handleInput,t=e.handleBlur,o=e.data,i=e.handleCheck,l=e.handleEquipa,c=e.altPlacaOption,s=e.showAltPlaca,d=e.empresas,u=e.equipamentos,m=o.activeStep,p=o.subtitle,f=o.placa,g=o.justificativa,h=o.selectedEmpresa,b=o.addEquipa,v=Fa(),E=v.paper,x=v.container,S=Aa[m];return r.a.createElement(n.Fragment,null,r.a.createElement(xe.a,{container:!0,direction:"row",className:x,justify:"center"},0===m&&r.a.createElement(Pa,{data:o,empresas:d,handleInput:a,handleBlur:t}),h?r.a.createElement(xe.a,{item:!0,xs:12},m<3&&r.a.createElement(Se.a,{className:E},r.a.createElement("h3",{className:"formSubtitle"}," ",p[m]+(f&&0!==m?" - placa "+f:"")),r.a.createElement(Ee,{form:S,data:o,handleBlur:t,handleInput:a})),0===m&&r.a.createElement(xe.a,{container:!0,justify:"center"},r.a.createElement(k.a,{variant:"outlined",size:"small",color:"primary",className:v.button,onClick:l},r.a.createElement(ke.a,null),"Equipamentos")),c&&f.match("[a-zA-Z]{3}[-]?\\d{4}")&&r.a.createElement("div",{className:"addNewDiv"},r.a.createElement("span",{onClick:function(){return s()}}," \u2192 Clique aqui para alterar a placa para o formato Mercosul.")),b&&r.a.createElement(Ie,{equipamentos:u,close:l,handleCheck:i,data:o})):r.a.createElement(xe.a,{container:!0,justify:"center"},r.a.createElement("div",{className:v.formHolder}))),1===m&&r.a.createElement(xe.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(xe.a,null,r.a.createElement(be.a,{name:"justificativa",value:g,label:"Justificativa",type:"text",onChange:a,InputLabelProps:{shrink:!0,style:{fontWeight:600,marginBottom:"5%"}},inputProps:{style:{paddingBottom:"2%",width:"900px"}},multiline:!0,rows:4,variant:"outlined"}))))};function La(e){var a=e.open,t=e.close,n=e.title,o=e.header,i=e.inputNames,l=e.inputLabels,c=e.fileInputName,s=e.confirm,d=e.handleInput,u=e.handleFiles,m=e.values,p=e.formData,f=e.dropDisplay,g=e.type,h=void 0===g?"text":g,b=!0,v=function(e,a){if("newPlate"===e)return a.length<9&&a.match("[a-zA-Z]{3}?[-]\\d{1}\\w{1}\\d{2}")?(b=!1,!1):(b=!0,!0)};return r.a.createElement(Ca.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(Da.a,{id:"form-dialog-title"},n),r.a.createElement(Oa.a,null,r.a.createElement(ja.a,null,o),r.a.createElement("br",null),i.map((function(e,a){return r.a.createElement(be.a,{key:a,autoFocus:"newPlate"===e&&!0,name:e,label:l[a],onChange:d,values:m[a],type:h,error:v(e,m[a]),fullWidth:!0,InputLabelProps:{shrink:!0}})})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(qe,{title:"Anexar arquivo",name:c,formData:p,dropDisplay:f,handleFiles:u})),r.a.createElement(ka.a,null,r.a.createElement(k.a,{onClick:t,color:"primary"},"Cancelar"),r.a.createElement(k.a,{onClick:s,color:"primary",disabled:b},"Confirmar")))}var qa=pe(["veiculos","empresas","equipamentos"],function(e){function a(){var e;return Object(G.a)(this,a),(e=Object($.a)(this,Object(Z.a)(a).call(this))).state={stepTitles:["Informe a placa para alterar os dados abaixo ou mantenha as informa\xe7\xf5es atuais e clique em avan\xe7ar","Altere os dados desejados abaixo e clique em avan\xe7ar","Anexe os documentos solicitados","Revis\xe3o das informa\xe7\xf5es e deferimento"],steps:["Alterar dados do Ve\xedculo","Alterar dados adicionais","Documentos","Revis\xe3o"],subtitle:["Dados do Ve\xedculo","Informa\xe7\xf5es adicionais","Anexe os arquivos solicitados","Revis\xe3o"],empresas:[],razaoSocial:"",delegatarioCompartilhado:"",frota:[],toastMsg:"Dados atualizados!",confirmToast:!1,activeStep:0,files:[],fileNames:[],openAlertDialog:!1,altPlaca:!1,newPlate:"",placa:"",addEquipa:!1,dropDisplay:"Clique ou arraste para anexar"},e.setActiveStep=function(a){var t,n;return K.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t=e.state.errors)||!t[0]){r.next=4;break}return e.setState(Object(b.a)({},e.state,{},fe("setState"))),r.abrupt("return");case 4:n=e.state.activeStep,"next"===a&&e.setState({activeStep:n+1}),"back"===a&&e.setState({activeStep:n-1}),"reset"===a&&e.setState({activeStep:0});case 8:case"end":return r.stop()}}))},e.handleInput=function(a){var t,n,r,o,i,l,c,s,d;return K.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e.props.redux,n=t.veiculos,r=t.empresas,o=a.target,i=o.name,l=o.value,"razaoSocial"!==i){u.next=13;break}if(!(c=r.find((function(e){return e.razaoSocial===l})))){u.next=11;break}return u.next=6,K.a.awrap(e.setState({razaoSocial:c.razaoSocial,selectedEmpresa:c}));case 6:l!==c.razaoSocial&&e.setState({selectedEmpresa:void 0}),s=n.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:s}),u.next=13;break;case 11:e.setState({selectedEmpresa:void 0,frota:[]}),e.reset();case 13:"placa"===i&&e.state.frota&&(e.state.frota.find((function(e){return e.placa===l}))||e.state.equipamentos.forEach((function(a){return e.setState(Object(g.a)({},a,!1))}))),"newPlate"===i?"string"===typeof(d=l)&&((d=d.replace(/[a-z]/g,(function(e){return e.toUpperCase()}))).match("[A-Z]{3}[0-9]{1}[A-Z]{1}[0-9]{2}")&&(d=d.replace(/(\w{3})/,"$1-")),e.setState(Object(b.a)({},e.state,{newPlate:d}))):e.setState(Object(g.a)({},i,l));case 15:case"end":return u.stop()}}))},e.getId=function(a,t,n,r,o,i){var l,c,s,d,u,m;return K.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(c=n.filter((function(e){return e[o].toLowerCase().match(t.toLowerCase())})),""===t&&e.setState((l={},Object(g.a)(l,a,""),Object(g.a)(l,r,""),l)),!c[0]){p.next=10;break}if(s=c[0][o],d=c[0][i],""===t){p.next=8;break}return p.next=8,K.a.awrap(e.setState((u={},Object(g.a)(u,a,s),Object(g.a)(u,r,d),u)));case 8:p.next=14;break;case 10:return p.next=12,K.a.awrap(e.setState((m={},Object(g.a)(m,a,""),Object(g.a)(m,r,""),m)));case 12:e.setState({openAlertDialog:!0,alertType:"empresaNotFound"}),document.getElementsByName(a)[0].focus();case 14:case"end":return p.stop()}}))},e.capitalize=function(e,a){if(a&&"string"===typeof a)return"utilizacao"===e&&("RODOVIARIO"===a&&(a="CONVENCIONAL"),"SEMI LEITO - EXECUTIVO"===a&&(a="Semi-Leito"),"Semi-Leito"!==a&&(a=a.charAt(0)+a.slice(1).toLowerCase())),"dominio"===e&&"Sim"===a&&(a="Ve\xedculo pr\xf3prio"),"dominio"===e&&"N\xe3o"===a&&(a="Possuidor"),a},e.handleBlur=function(a){var t,n,r,o,i,l,c,s,d,u,m;return K.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:t=e.props.redux.empresas,n=e.state,r=n.frota,o=n.equipamentos,i=a.target.name,l=a.target.value,c=[],(s=fe())?e.setState({errors:s}):e.setState({errors:void 0}),p.t0=i,p.next="compartilhado"===p.t0?7:"delegatario"===p.t0?9:12;break;case 7:return e.getId(i,l,t,"delegatarioCompartilhado","razaoSocial","delegatarioId"),p.abrupt("break",13);case 9:return p.next=11,K.a.awrap(e.getId(i,l,t,"delegatarioId","razaoSocial","delegatarioId"));case 11:return p.abrupt("break",13);case 12:case 13:if(!("placa"===i&&l.length>2&&Array.isArray(e.state.frota))){p.next=24;break}return(d=e.state.frota.find((function(e){return"string"===typeof l?e.placa.toLowerCase().match(l.toLowerCase()):e.placa.match(l)})))&&d.equipamentosId&&(u=d.equipamentosId,o.forEach((function(e){u.toLowerCase().match(e.toLowerCase())&&c.push(e)})),c.forEach((function(a){return e.setState(Object(g.a)({},a,!0))}))),d&&d.utilizacao&&(d.utilizacao=e.capitalize("utilizacao",d.utilizacao)),d&&d.dominio&&(d.dominio=e.capitalize("dominio",d.dominio)),p.next=20,K.a.awrap(e.setState(Object(b.a)({},d,{equipamentosId:c,disable:!0})));case 20:void 0!==d&&d.hasOwnProperty("empresa")&&e.setState({delegatario:d.empresa}),m={},r[0]&&Object.keys(r[0]).forEach((function(e){return m[e]=""})),""===e.state.placa||d||(e.setState({alertType:"plateNotFound",openAlertDialog:!0}),e.setState(Object(b.a)({},m,{disable:!1})));case 24:case"end":return p.stop()}}))},e.showAltPlaca=function(){e.setState({altPlaca:!0,title:"Altera\xe7\xe3o de placa",header:"Para alterar a placa do ve\xedculo para o padr\xe3o Mercosul, digite a placa no campo abaixo e anexe o CRLV atualizado do ve\xedculo."})},e.updatePlate=function(){e.setState({placa:e.state.newPlate}),e.toggleDialog()},e.handleSubmit=function(){var a,t,n,r,o,i,l,c,s,d,u,m,p;return K.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:return a=e.state,t=a.poltronas,n=a.pesoDianteiro,r=a.pesoTraseiro,o=a.delegatarioId,i=a.delegatarioCompartilhado,l=a.equipamentosId,c=a.newPlate,s=a.selectedEmpresa,d={},Aa.forEach((function(a){a.forEach((function(a){for(var t in e.state)t!==a.field||a.disabled||e.state[t]&&Object.assign(d,Object(g.a)({},t,e.state[t]))}))})),u=93*Number(t)+(Number(n)+Number(r)),isNaN(u)&&(u=void 0),d=Object.assign(d,{delegatarioId:o,delegatarioCompartilhado:i,pbt:u,equipamentosId:l}),d=te.a.decamelizeKeys(d),Object.keys(d).forEach((function(e){""!==d[e]&&"null"!==d[e]&&d[e]||delete d[e]})),(m=d).placa,m.delegatario,m.compartilhado,p=Object(_.a)(m,["placa","delegatario","compartilhado"]),c&&""!==c&&(p.placa=c),s.delegatarioId!==o&&(p.apolice="Seguro n\xe3o cadastrado"),"veiculo","veiculo_id",f.next=14,K.a.awrap(ee.a.put("/api/updateVehicle",{requestObject:p,table:"veiculo",tablePK:"veiculo_id",id:e.state.veiculoId}));case 14:return f.next=16,K.a.awrap(e.submitFiles());case 16:e.setState({activeStep:0,razaoSocial:"",selectedEmpresa:void 0}),e.reset(),e.setState({}),e.toast();case 20:case"end":return f.stop()}}))},e.handleFiles=function(a,t){var n,r;return K.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!a||!a[0]){o.next=11;break}if(console.log(a,t),(n=new FormData).append("veiculoId",e.state.veiculoId),r=e.state.fileNames,!(a&&a.length>0)){o.next=11;break}return r.push(Object(g.a)({},t,a[0].name)),o.next=9,K.a.awrap(e.setState(Object(g.a)({filesNames:r},t,a[0])));case 9:Be.forEach((function(a){var t=a.name;for(var r in e.state)r.match(t)&&e.state[t]&&n.append(t,e.state[t])})),e.setState({form:n});case 11:case"end":return o.stop()}}))},e.submitFiles=function(){var a=e.state.form;ee.a.post("/api/vehicleUpload",a).then((function(e){return console.log("uploaded")})).catch((function(e){return console.log(e)}))},e.handleCheck=function(a){var t,n;return K.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.state.equipamentos,n=[],r.next=4,K.a.awrap(e.setState(Object(b.a)({},e.state,Object(g.a)({},a,!e.state[a]))));case 4:t.forEach((function(a){!0===e.state[a]&&n.push(a)})),n[0]?e.setState({equipamentosId:n}):e.setState({equipamentosId:[]});case 6:case"end":return r.stop()}}))},e.handleEquipa=function(){return e.setState({addEquipa:!e.state.addEquipa})},e.toggleDialog=function(){return e.setState({altPlaca:!e.state.altPlaca})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.reset=function(){var a={};Aa.forEach((function(a){return a.forEach((function(a){return e.setState(Object(g.a)({},a.field,""))}))})),Be.forEach((function(e){var t=e.name;Object.assign(a,Object(g.a)({},t,void 0))})),e.setState(Object(b.a)({},a,{form:void 0}))},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.handleEquipa()},e}return Object(X.a)(a,e),Object(J.a)(a,[{key:"componentDidMount",value:function(){var e,a,t;return K.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=this.props.redux,a={},!e||!e.equipamentos){n.next=7;break}return e.equipamentos.forEach((function(e){return Object.assign(a,Object(g.a)({},e.item,!1))})),t=Object.keys(a),n.next=7,K.a.awrap(this.setState(Object(b.a)({equipamentos:t},a)));case 7:document.addEventListener("keydown",this.escFunction,!1);case 8:case"end":return n.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.props.redux,a=e.empresas,t=e.equipamentos,o=this.state,i=o.confirmToast,l=o.toastMsg,c=o.stepTitles,s=o.activeStep,d=o.steps,u=o.altPlaca,m=o.selectedEmpresa,p=o.openAlertDialog,f=o.alertType,g=o.dropDisplay,h=o.form,b=o.title,v=o.header,E=o.newPlate;return r.a.createElement(n.Fragment,null,r.a.createElement(ia,{links:["Ve\xedculos","/veiculos"],text:"Altera\xe7\xe3o de dados"}),r.a.createElement(pa,{activeStep:s,steps:d,stepTitles:c,setActiveStep:this.setActiveStep}),s<2&&r.a.createElement(Ta,{data:this.state,empresas:a,equipamentos:t,setActiveStep:this.setActiveStep,altPlacaOption:0===s,handleInput:this.handleInput,handleBlur:this.handleBlur,showAltPlaca:this.showAltPlaca,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck}),2===s&&r.a.createElement(Re,{parentComponent:"altDados",handleFiles:this.handleFiles,dropDisplay:g,formData:h}),3===s&&r.a.createElement(ta,{parentComponent:"altDados",files:this.state.form,filesForm:Be,data:this.state,form:Aa}),m&&r.a.createElement(ca,{activeStep:s,lastStep:d.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep}),r.a.createElement(ya,{open:i,close:this.toast,msg:l}),r.a.createElement(La,{open:u,close:this.toggleDialog,title:b,header:v,inputNames:["newPlate"],inputLabels:["Alterar Placa"],fileInputName:"newPlateDoc",values:[E],handleInput:this.handleInput,handleFiles:this.handleFiles,confirm:this.updatePlate,dropDisplay:g,formData:h}),p&&r.a.createElement(Ia,{open:p,close:this.closeAlert,alertType:f,customMessage:this.state.customMsg}))}}]),a}(n.Component)),Ma=t(279),Ba=t(120),Va=t.n(Ba),Ra=[{field:"seguradora",label:"Seguradora",autoComplete:!0,datalist:"seguradora",collection:"seguradoras",maxLength:80},{field:"apolice",label:"Ap\xf3lice",autoComplete:!0,datalist:"apolice",collection:"seguros",maxLength:25},{type:"date",field:"dataEmissao",label:"Data de Emiss\xe3o"},{type:"date",field:"vencimento",label:"Vencimento"}],Ua=Object(S.a)((function(e){return{paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},title:{color:"#000",fontWeight:400,fontSize:"0.9rem",textAlign:"center",marginBottom:"20px"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},chip:{margin:e.spacing(.5)}}}));function Ya(e){var a=e.empresas,t=e.data,o=e.enableAddPlaca,i=e.handleInput,l=e.handleBlur,c=e.addPlate,s=e.removeFromInsurance,d=e.handleFiles,u=e.handleSubmit,m=e.enableChangeApolice,p=e.showAllPlates,f=t.selectedEmpresa,g=t.placa,h=t.apolice,b=t.addedPlaca,v=t.frota,E=t.insuranceExists,x=t.insurance,S=t.dropDisplay,y=t.seguroFile,w=Ua(),C=w.paper,O=w.textField,j=w.chip,D=[];return x&&x.placas&&(x.placas[0]&&null!==x.placas[0]&&(D=x.placas.sort()),void 0!==g&&g.length>2&&D[0]&&(D="string"===typeof g?x.placas.filter((function(e){return e.toLowerCase().match(g.toLowerCase())})).sort():x.placas.filter((function(e){return e.match(g)})).sort())),r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},r.a.createElement(ia,{links:["Ve\xedculos","/veiculos"],text:"Seguros"}),r.a.createElement(Pa,{data:t,empresas:a,handleInput:i,handleBlur:l}),f&&r.a.createElement(Se.a,{className:C},r.a.createElement("h3",{className:"formSubtitle"},"Informe os dados do seguro."),r.a.createElement(Ee,{form:Ra,data:t,handleBlur:l,handleInput:i}),E&&r.a.createElement("div",{className:"addNewDiv"},r.a.createElement("span",{onClick:function(){return m()}}," \u2192 Clique aqui para alterar o n\xfamero da ap\xf3lice mantendo as placas."))),f&&x&&(x.placas||o)&&r.a.createElement(Se.a,{className:C},r.a.createElement("p",null,"Utilize as op\xe7\xf5es abaixo para filtrar, adicionar ou excluir placas desta ap\xf3lice"),r.a.createElement("section",{className:"addSeguro"},r.a.createElement("div",null,r.a.createElement(be.a,{inputProps:{name:"addedPlaca",list:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Insira a placa",className:O,value:b,onChange:i,onBlur:l}),r.a.createElement(he,{collection:v,datalist:"placa",value:b}),r.a.createElement(k.a,{size:"small",variant:"contained",className:w.button,style:{margin:"10px 0 10px 0"},onClick:function(){return c(b)}},r.a.createElement(ke.a,null)," Adicionar")),r.a.createElement("div",null,r.a.createElement(be.a,{inputProps:{name:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Filtrar",className:O,value:g||"",onChange:i,onBlur:l}),r.a.createElement(N.a,{style:{marginTop:"18px"}})),r.a.createElement(qe,{name:"apoliceDoc",formData:y,dropDisplay:S,handleFiles:d,single:!0})),r.a.createElement("div",{className:"addNewDiv",style:{justifyContent:"flex-start",padding:"10px"}},r.a.createElement("span",{onClick:function(){return p()}},"\u2192 Clique aqui para selecionar placas")),x&&x.placas&&x.placas[0]?r.a.createElement("div",{style:{margin:"15px"}},"Placas vinculadas a ap\xf3lice ",x.apolice):r.a.createElement("div",{style:{marginTop:"30px"}}),x&&x.placas&&h&&h.length>2&&D[0]&&D.map((function(e,a){return r.a.createElement(Ma.a,{key:a,label:e,onDelete:function(){return s(e)},className:j,color:"primary",variant:"outlined"})})))),h&&(x||o)&&r.a.createElement("div",{style:{minHeight:"60px",position:"flex"}},r.a.createElement(k.a,{size:"small",color:"primary",className:"saveButton",variant:"contained",onClick:function(){return u()}},"Salvar ",r.a.createElement("span",null,"\xa0\xa0 ")," ",r.a.createElement(Va.a,null))))}var Wa=function(e){var a=e.items,t=e.title,n=e.data,o=e.close,i=e.handleCheck;return r.a.createElement("div",{className:"popUpWindow row"},r.a.createElement("h3",null,t," Clique em \"X\" ou pressione 'esc' para voltar"),r.a.createElement("div",{className:"checkListContainer"},a.map((function(e,a){return r.a.createElement("div",{className:"checkListItem",key:a},r.a.createElement("input",{id:a,type:"checkbox",checked:!0===n[e],onChange:function(){return i(e)}}),r.a.createElement("label",{htmlFor:a},e))}))),r.a.createElement(De,{close:o}))};function _a(e){var a=e.open,t=e.close,n=e.title,o=e.helperMessage,i=e.marca,l=e.marcas,c=e.selectMarca,s=e.newElement,d=e.handleInput,u=e.addNewElement;return r.a.createElement("div",null,r.a.createElement(Ca.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(Da.a,{id:"form-dialog-title"},n),r.a.createElement(Oa.a,null,r.a.createElement(ja.a,null,o),r.a.createElement("div",{className:"editFields"},l&&r.a.createElement("div",{className:"configMarca"},r.a.createElement(be.a,{onChange:c,value:i,label:"Selecione uma marca",select:!0,InputLabelProps:{shrink:!0},SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},l.map((function(e,a){var t=e.marca;return r.a.createElement(ge.a,{key:a,value:t},t)})))),r.a.createElement("div",{className:"configField"},r.a.createElement(be.a,{autoFocus:!0,margin:"dense",name:"newElement",label:"Inserir",type:"text",onChange:d,value:s,fullWidth:!0}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(ka.a,null,r.a.createElement(k.a,{onClick:t,color:"primary"},"Cancelar"),r.a.createElement(k.a,{onClick:function(){return u()},color:"primary"},"Confirmar"))))}var Ha=pe(["veiculos","empresas","seguradoras","seguros"],function(e){function a(){var e;return Object(G.a)(this,a),(e=Object($.a)(this,Object(Z.a)(a).call(this))).state={addedPlaca:"",insurance:{},insuranceExists:!1,razaoSocial:"",seguradora:"",deletedVehicles:[],toastMsg:"Seguro atualizado!",confirmToast:!1,dropDisplay:"Clique ou arraste para anexar a ap\xf3lice",showAllPlates:!1},e.checkExistance=function(a,t){var n,r,o,i,l,c,s,d,u;return K.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(n=JSON.parse(JSON.stringify(e.props.redux.seguros)),r=e.state.selectedEmpresa,o=Object(h.a)(n.filter((function(e){return e.delegatarioId===r.delegatarioId}))),i=Object(b.a)({},o.find((function(e){return e[a]===t}))),!(l=Object.keys(i).length>0)){m.next=10;break}return c=re()(i.dataEmissao).format("YYYY-MM-DD"),s=i.vencimento.toString().slice(0,10),d=i.seguradora,u=i.seguradoraId,m.next=7,K.a.awrap(e.setState({seguradora:d,seguradoraId:u,dataEmissao:c,vencimento:s,insurance:i,insuranceExists:l}));case 7:return m.abrupt("return");case 10:e.setState({insuranceExists:l,insurance:{},dataEmissao:"",vencimento:"",deletedVehicles:[]});case 11:case"end":return m.stop()}}))},e.handleInput=function(a){var t,n,r,o,i,l,c,s,d,u,m,p,f,h,b,v,E,x,S,y,w,C,k,O,j,D;return K.a.async((function(I){for(;;)switch(I.prev=I.next){case 0:t=a.target.value,n=a.target.name,r=e.props.redux,o=r.veiculos,i=r.empresas,l=r.seguradoras,c=e.state,s=c.allInsurances,d=c.selectedEmpresa,u=c.frota,m=c.insurance,p=c.apolice,f=c.dataEmissao,h=c.vencimento,b=c.newInsurance,v=c.seguradora,e.setState(Object(g.a)({},n,t)),I.t0=n,I.next="razaoSocial"===I.t0?6:"apolice"===I.t0?18:"seguradora"===I.t0?20:"addedPlaca"===I.t0?23:26;break;case 6:if(!(E=i.find((function(e){return e.razaoSocial===t})))){I.next=15;break}return I.next=10,K.a.awrap(e.setState({razaoSocial:E.razaoSocial,selectedEmpresa:E}));case 10:t!==E.razaoSocial&&e.setState({selectedEmpresa:void 0}),x=o.filter((function(a){return a.empresa===e.state.razaoSocial})),S=s.filter((function(a){return a.empresa===e.state.razaoSocial})),y=x.map((function(e){return e.placa})).sort(),e.setState({frota:x,seguros:S,allPlates:y}),I.next=17;break;case 15:e.setState({selectedEmpresa:void 0,frota:[]}),e.clearFields();case 17:return I.abrupt("break",27);case 18:return e.checkExistance("apolice",t),I.abrupt("break",27);case 20:return(w=l.find((function(e){return e.seguradora===t})))&&e.setState({seguradoraId:w.id}),I.abrupt("break",27);case 23:return(C=u.find((function(e){return e.placa===t})))&&e.setState({vehicleFound:C}),I.abrupt("break",27);case 26:case 27:if(k=["seguradora","apolice","dataEmissao","vencimento"].every((function(a){return e.state[a]&&""!==e.state[a]})),"razaoSocial"===n||b||!k||0!==Object.keys(m).length){I.next=36;break}return O={},(D=l.find((function(a){return a.seguradora===e.state.seguradora})))&&(j=D.id),Object.assign(O,{empresa:d.razaoSocial,delegatarioId:d.delegatarioId,apolice:p,seguradora:v,seguradoraId:j,dataEmissao:f,vencimento:h,placas:[],veiculos:[]}),I.next=36,K.a.awrap(e.setState({insuranceExists:!1,insurance:O,seguradoraId:j}));case 36:case"end":return I.stop()}}))},e.handleBlur=function(a){var t=e.props.redux.seguradoras,n=e.state,r=n.seguradora,o=n.allInsurances,i=n.selectedEmpresa,l=a.target.name;if("seguradora"===l){var c=[],s=t.find((function(e){return e.seguradora.toLowerCase().match(r.toLowerCase())}));s&&r.length>2&&e.setState({seguradora:s.seguradora}),!s&&r.length>2&&e.setState({openAlertDialog:!0,alertType:"seguradoraNotFound",seguradora:void 0}),i&&!r?(c=o.filter((function(e){return e.empresa===i.razaoSocial})),e.setState({seguros:c})):i||""===r?i&&""!==r&&(c=o.filter((function(e){return e.empresa===i.razaoSocial})).filter((function(e){return e.seguradora===r})),e.setState({seguros:c})):(c=o.filter((function(e){return e.seguradora===r})),e.setState({seguros:c}))}if("dataEmissao"===l||"vencimento"===l){var d=fe();d?e.setState({errors:d}):e.setState({errors:void 0})}},e.showAllPlates=function(){var a=e.state,t=a.insurance,n=a.allPlates,r=[],o={};t&&t.placas&&(r=t.placas),n.forEach((function(e){return Object.assign(o,Object(g.a)({},e,!1))})),r.forEach((function(e){return Object.assign(o,Object(g.a)({},e,!0))})),e.setState({allPlatesObj:o,insuredPlates:r,showAllPlates:!e.state.showAllPlates})},e.handleCheck=function(a){var t;return K.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:(t=Object(b.a)({},e.state.allPlatesObj))[a]=!t[a],!0===t[a]?e.addPlate(a):e.removeFromInsurance(a),e.setState({allPlatesObj:t});case 4:case"end":return n.stop()}}))},e.addPlate=function(a){var t,n,r,o,i,l,c,s;return K.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(t=e.state,n=t.apolice,r=t.frota,o=r.find((function(e){return e.placa===a})),i=e.state,l=i.insuranceExists,c=i.insurance,a&&""!==a){d.next=4;break}return d.abrupt("return");case 4:if(void 0!==o&&!1!==o.hasOwnProperty("veiculoId")){d.next=9;break}return e.setState({openAlertDialog:!0,alertType:"plateNotFound"}),d.abrupt("return",null);case 9:if(!0!==l||!c.placas||!o.placa){d.next=14;break}if(!c.placas.find((function(e){return e===o.placa}))){d.next=14;break}return e.setState({openAlertDialog:!0,alertType:"plateExists"}),d.abrupt("return",null);case 14:n&&((s=Object(b.a)({},c)).placas||(s.placas=[]),s.veiculos||(s.veiculos=[]),s.placas.push(a),s.veiculos.push(o.veiculoId),e.setState({insurance:s,addedPlaca:""}));case 15:case"end":return d.stop()}}))},e.removeFromInsurance=function(a){var t,n,r,o,i,l,c,s,d,u,m,p,f,g,v,E;return K.a.async((function(x){for(;;)switch(x.prev=x.next){case 0:t=e.state,n=t.apolice,r=t.frota,o=r.find((function(e){return e.placa===a})),i=o.veiculoId,l=o.placa,c=Object(b.a)({},e.state.insurance),s=Object(h.a)(e.state.deletedVehicles),d=[],u=[],(p=e.props.redux.seguros.find((function(e){return e.apolice===n})))&&p.placas&&(m=p.placas.includes(l)),m&&(f=c.veiculos,g=f.indexOf(i),s.push(f[g]),e.setState({deletedVehicles:s})),c.placas&&(d=c.placas),c.veiculos&&(u=c.veiculos),v=d.indexOf(l),E=u.indexOf(i),c.placas.splice(v,1),c.veiculos.splice(E,1),e.setState({insurance:c});case 11:case"end":return x.stop()}}))},e.updateInsurance=function(){var a=e.state,t=a.insurance,n=a.dataEmissao,r=a.vencimento,o=a.seguradoraId,i=t.id,l=t.veiculos,c={},s=!re()(n).isSame(re()(t.dataEmissao)),d=!re()(r).isSame(re()(t.vencimento)),u=o!==t.seguradoraId;if(s||d||!u){s&&(c.data_emissao=n),d&&(c.vencimento=r),u&&(c.seguradora_id=o);var m={id:i,columns:Object.keys(c),updates:c,vehicleIds:l};ee.a.put("/api/updateInsurance",m).then((function(e){return console.log(e.data)}))}},e.handleSubmit=function(){var a,t,n,r,o,i,l,c,s,d,u,m,p,f,g,v,E,x,S;return K.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:if(a=e.state,t=a.seguradora,n=a.insuranceExists,r=a.insurance,o=a.errors,i=a.newElement,l=a.deletedVehicles,c=Object(h.a)(e.state.frota),s=[],!o||!o[0]){y.next=5;break}return e.setState(Object(b.a)({},e.state,{},fe("setState"))),y.abrupt("return");case 5:if(t&&""!==t){y.next=8;break}return e.setState({openAlertDialog:!0,alertType:"seguradoraNotFound",seguradora:void 0}),y.abrupt("return");case 8:if(d=e.state,u=d.seguradoraId,m=d.apolice,p=d.dataEmissao,f=d.vencimento,g=d.selectedEmpresa,v={apolice:m,seguradora_id:u,delegatario_id:g.delegatarioId},E=re()(p,"YYYY-MM-DD",!0).isValid(),x=re()(f,"YYYY-MM-DD",!0).isValid(),E&&(v.data_emissao=p),x&&(v.vencimento=f),n){y.next=17;break}return r&&(s=r.veiculos),y.next=17,K.a.awrap(ee.a.post("/api/cadSeguro",v));case 17:if(!n){y.next=21;break}return s=r.veiculos,y.next=21,K.a.awrap(e.updateInsurance());case 21:return S={table:"veiculo",column:"apolice",value:m,tablePK:"veiculo_id",ids:s},i&&n&&r.id&&ee.a.put("/api/changeApoliceNumber",{id:r.id,newApoliceNumber:i}),y.next=25,K.a.awrap(ee.a.put("/api/updateInsurances",S).then((function(a){console.log(a.data),e.setState({dontUpdateProps:!0})})));case 25:if(!l){y.next=30;break}return S.value="Seguro n\xe3o cadastrado",S.ids=l,y.next=30,K.a.awrap(ee.a.put("/api/updateInsurances",S));case 30:c=c.map((function(e){return s.forEach((function(a){return e.veiculoId===a?(e.apolice=m,e):e})),e})),e.toast(),e.submitFiles(),e.clearFields(),e.setState({frota:c});case 35:case"end":return y.stop()}}))},e.handleFiles=function(a){var t;return K.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return(t=new FormData).append("apoliceDoc",a[0]),n.next=4,K.a.awrap(e.setState({dropDisplay:a[0].name,seguroFile:t}));case 4:case"end":return n.stop()}}))},e.submitFiles=function(){var a,t,n,r,o,i,l,c,s,d;return K.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(a=e.state,t=a.apolice,n=a.selectedEmpresa,r=new FormData,!e.state.seguroFile){u.next=28;break}for(r.append("fieldName","apoliceDoc"),r.append("apolice",t),r.append("empresaId",n.delegatarioId),o=!0,i=!1,l=void 0,u.prev=9,c=e.state.seguroFile.entries()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)d=s.value,r.append(d[0],d[1]);u.next=17;break;case 13:u.prev=13,u.t0=u.catch(9),i=!0,l=u.t0;case 17:u.prev=17,u.prev=18,o||null==c.return||c.return();case 20:if(u.prev=20,!i){u.next=23;break}throw l;case 23:return u.finish(20);case 24:return u.finish(17);case 25:return u.next=27,K.a.awrap(ee.a.post("/api/empresaUpload",r).then((function(e){return console.log(e.data)})));case 27:e.toast();case 28:case"end":return u.stop()}}),null,null,[[9,13,17,25],[18,,20,24]])},e.addNewElement=function(){return e.setState({apolice:e.state.newElement,openAddDialog:!1})},e.toggleDialog=function(){return e.setState({openAddDialog:!e.state.openAddDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.clearFields=function(){e.setState({insuranceExists:!1,seguradora:"",insurance:{},apolice:"",dataEmissao:"",vencimento:"",seguroFile:null,deletedVehicles:[],dropDisplay:"Clique ou arraste para anexar a ap\xf3lice"})},e.escFunction=function(a){27===a.keyCode&&(e.state.openAddDialog&&e.toggleDialog(),e.state.showAllPlates&&e.setState({showAllPlates:!1}))},e}return Object(X.a)(a,e),Object(J.a)(a,[{key:"componentDidMount",value:function(){this.setState({seguradoras:this.props.redux.seguradoras,allInsurances:this.props.redux.seguros}),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentDidUpdate",value:function(e,a){var t=this.props.redux.seguros,n=this.state,r=n.apolice,o=n.insuranceExists,i=n.dontUpdateProps;if(e.redux.seguros!==t&&!i&&(console.log("Props updated. DUProps state is:",i),o)){var l=t.find((function(e){return e.apolice===r}));this.setState({insuranceExists:l})}}},{key:"render",value:function(){var e=this,a=this.state,t=a.openAlertDialog,o=a.alertType,i=a.openAddDialog,l=a.showAllPlates,c=a.allPlates,s=a.allPlatesObj,d=this.props.redux.empresas,u=Oe.every((function(a){return e.state.hasOwnProperty(a.field)&&""!==e.state[a.field]}));return r.a.createElement(n.Fragment,null,r.a.createElement(Ya,{data:this.state,empresas:d,enableAddPlaca:u,handleInput:this.handleInput,handleBlur:this.handleBlur,addPlate:this.addPlate,removeFromInsurance:this.removeFromInsurance,enableChangeApolice:this.toggleDialog,handleFiles:this.handleFiles,handleSubmit:this.handleSubmit,showAllPlates:this.showAllPlates}),i&&r.a.createElement(_a,{open:i,close:this.toggleDialog,title:"Alterar n\xfamero da ap\xf3lice",helperMessage:"Informe o n\xfamero atualizado da ap\xf3lice.",handleInput:this.handleInput,addNewElement:this.addNewElement}),l&&r.a.createElement(Wa,{items:c,close:this.showAllPlates,title:"Selecione as placas para adicionar \xe0 ap\xf3lice.",handleCheck:this.handleCheck,data:s}),t&&r.a.createElement(Ia,{open:t,close:this.closeAlert,alertType:o,customMessage:this.state.customMsg}),r.a.createElement(ya,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}))}}]),a}(n.Component)),Ka=[{field:"placa",label:"Placa",datalist:"placa",autoComplete:!0,collection:"frota",maxLength:8},{field:"renavam",label:"Renavam"},{field:"nChassi",label:"N\xfamero do Chassi",maxLength:17},{field:"delegatario",label:"Delegat\xe1rio",disabled:!0},{field:"utilizacao",label:"Utiliza\xe7\xe3o",disabled:!0},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",disabled:!0},{field:"marcaChassi",label:"Marca do Chassi",disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",disabled:!0},{field:"marcaCarroceria",label:"Marca da Carroceria",disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",disabled:!0},{type:"number",field:"indicadorIdade",label:"Ano",disabled:!0}],Ga=t(546),Ja=t(541),$a=t(550),Za=t(239),Xa=t(488),Qa=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1)},formHolder:{width:900},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)}}})),et=function(e){var a=e.handleInput,t=e.handleBlur,o=e.handleCheck,i=e.handleSubmit,l=e.data,c=e.empresas,s=l.razaoSocial,d=l.frota,u=l.checked,m=l.delegaTransf,p=l.justificativa,f=Qa(),g=f.paper,h=f.container,b=f.formHolder;return r.a.createElement(n.Fragment,null,r.a.createElement(ia,{links:["Ve\xedculos","/veiculos"],text:"Baixa de ve\xedculo"}),r.a.createElement(Pa,{data:l,empresas:c,handleInput:a,handleBlur:t}),r.a.createElement(xe.a,{container:!0,direction:"row",className:h,justify:"center"},s&&d[0]&&r.a.createElement(xe.a,{item:!0,xs:12},r.a.createElement(Se.a,{className:g},r.a.createElement(O.a,{className:"formSubtitle"},"Informe os dados para a baixa"),r.a.createElement(Ee,{form:Ka,data:l,handleBlur:t,handleInput:a})),r.a.createElement(xe.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{width:"venda"===u||"outro"===u?"1200px":"600px",marginTop:"25px"}},r.a.createElement(xe.a,{item:!0,xs:u?6:12},r.a.createElement(Za.a,{component:"fieldset"},r.a.createElement(Xa.a,{component:"legend"},"Motivo da baixa"),r.a.createElement($a.a,{"aria-label":"position",name:"position",onChange:o,row:!0,style:{width:"auto"},className:"radio"},r.a.createElement(we.a,{className:"radio",value:"venda",control:r.a.createElement(Ja.a,{color:"primary"}),label:r.a.createElement("span",{style:{fontSize:"0.8rem"}},"Venda para outra empresa do sistema"),labelPlacement:"start"}),r.a.createElement(we.a,{value:"outro",control:r.a.createElement(Ja.a,{color:"primary"}),label:r.a.createElement("span",{style:{fontSize:"0.8rem"}},"Outro"),labelPlacement:"start"})))),"venda"===u?r.a.createElement(xe.a,{item:!0,xs:6},r.a.createElement(be.a,{inputProps:{list:"razaoSocial",name:"delegaTransf"},value:m,onChange:a,onBlur:t,label:"Informe o delegat\xe1rio para o qual foi transferido o ve\xedculo.",fullWidth:!0}),r.a.createElement(he,{collection:c,datalist:"razaoSocial",value:m})):"outro"===u&&r.a.createElement(xe.a,{item:!0,xs:6},r.a.createElement(be.a,{name:"justificativa",value:p,label:"Justificativa",type:"text",onChange:a,InputLabelProps:{shrink:!0},multiline:!0,rows:3,variant:"outlined",fullWidth:!0}))),r.a.createElement(xe.a,{container:!0,direction:"row",justify:"flex-end",style:{width:"1200px"}},r.a.createElement(xe.a,{item:!0,xs:11,style:{width:"1000px"}}),r.a.createElement(xe.a,{item:!0,xs:1,style:{align:"right"}},r.a.createElement(k.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"10px 0 10px 0"},onClick:function(){return i()}},"Confirmar ",r.a.createElement("span",null,"\xa0\xa0 ")," ",r.a.createElement(Ga.a,null))))),!s&&!d[0]&&r.a.createElement(xe.a,{container:!0,justify:"center"},r.a.createElement("div",{className:b}))))},at=pe(["veiculos","empresas"],function(e){function a(){var e,t;Object(G.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object($.a)(this,(e=Object(Z.a)(a)).call.apply(e,[this].concat(r)))).state={empresas:[],razaoSocial:"",frota:[],placa:"",form:{},check:"",delegaTransf:"",toastMsg:"Baixa realizada com sucesso!",confirmToast:!1,openDialog:!1},t.handleInput=function(e){var a,n,r,o,i,l,c,s;return K.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(a=e.target,n=a.name,r=a.value,o=t.props.redux,i=o.veiculos,l=o.empresas,t.setState(Object(g.a)({},n,r)),"razaoSocial"!==n){d.next=15;break}if(!(c=l.find((function(e){return e.razaoSocial===r})))){d.next=12;break}return d.next=7,K.a.awrap(t.setState({razaoSocial:c.razaoSocial,selectedEmpresa:c}));case 7:r!==c.razaoSocial&&t.setState({selectedEmpresa:void 0}),s=i.filter((function(e){return e.empresa===t.state.razaoSocial})),t.setState({frota:s}),d.next=15;break;case 12:return d.next=14,K.a.awrap(t.setState({selectedEmpresa:void 0,frota:[]}));case 14:t.reset();case 15:case"end":return d.stop()}}))},t.handleBlur=function(e){var a,n,r,o,i,l,c;return K.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=t.props.redux.empresas,n=t.state.frota,r=e.target.name,o=e.target.value,"delegaTransf"!==r){s.next=12;break}if(!(o.length>0)){s.next=12;break}if(!(i=a.find((function(e){return e.razaoSocial===o})))){s.next=11;break}return s.next=8,K.a.awrap(t.setState({delegatarioId:i.delegatarioId,delegaTransf:i.razaoSocial,disableSubmit:!0}));case 8:s.next=12;break;case 11:t.setState({openAlertDialog:!0,alertType:"empresaNotFound",delegaTransf:""});case 12:if("placa"!==r||"string"===typeof n){s.next=19;break}if(""===o&&t.setState({disableSubmit:!0}),!(o.length>0)){s.next=19;break}return o.length>2&&(l=n.find((function(e){return"string"===typeof o?e.placa.toLowerCase().match(o.toLowerCase()):e.placa.match(o)}))),s.next=18,K.a.awrap(t.setState(Object(b.a)({},l)));case 18:l||(c={},n[0]&&Object.keys(n[0]).forEach((function(e){return c[e]=""})),t.setState({alertType:"plateNotFound",openAlertDialog:!0,disableSubmit:!0}),t.setState(Object(b.a)({},c)));case 19:case"end":return s.stop()}}))},t.handleSubmit=function(){var e,a,n,r,o,i,l;return K.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=t.state,a=e.checked,n=e.delegatarioId,r=["selectedEmpresa","placa","delegatarioId"],"venda"===a&&(r.push("delegaTransf"),i=r.every((function(e){return t.state.hasOwnProperty(e)&&""!==t.state[e]})),o={delegatarioId:n,situacao:"pendente"}),"outro"===a&&(r.push("justificativa"),i=r.every((function(e){return t.state.hasOwnProperty(e)&&""!==t.state[e]})),o={situacao:"exclu\xeddo"}),i){c.next=8;break}return c.next=7,K.a.awrap(t.setState({openAlertDialog:!0,alertType:"fieldsMissing"}));case 7:return c.abrupt("return",null);case 8:return o.apolice="Seguro n\xe3o cadastrado",l=te.a.decamelizeKeys(o),"veiculo","veiculo_id",c.next=13,K.a.awrap(ee.a.put("/api/updateVehicle",{requestObject:l,table:"veiculo",tablePK:"veiculo_id",id:t.state.veiculoId}).then((function(){return t.toast()})).catch((function(e){return console.log(e)})));case 13:return c.next=15,K.a.awrap(t.setState({selectedEmpresa:void 0,frota:[],razaoSocial:""}));case 15:t.reset();case 16:case"end":return c.stop()}}))},t.handleCheck=function(e){return t.setState({checked:e.target.value})},t.reset=function(){Ka.forEach((function(e){return t.setState(Object(g.a)({},e.field,""))})),t.setState({delegaTransf:"",check:"",justificativa:"",checked:!1})},t.closeAlert=function(){return t.setState({openAlertDialog:!t.state.openAlertDialog})},t.toast=function(){return t.setState({confirmToast:!t.state.confirmToast})},t}return Object(X.a)(a,e),Object(J.a)(a,[{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.delegaTransf,t=e.confirmToast,o=e.toastMsg,i=e.checked,l=e.openAlertDialog,c=e.alertType;return r.a.createElement(n.Fragment,null,r.a.createElement(et,{data:this.state,empresas:this.props.redux.empresas,checked:i,delegaTransf:a,handleInput:this.handleInput,handleBlur:this.handleBlur,handleCheck:this.handleCheck,handleSubmit:this.handleSubmit}),l&&r.a.createElement(Ia,{open:l,close:this.closeAlert,alertType:c}),r.a.createElement(ya,{open:t,close:this.toast,msg:o}))}}]),a}(n.Component)),tt=t(121),nt=t.n(tt),rt=t(122),ot=t.n(rt),it=(t(385),Object(S.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"2px",width:"275px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},select:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginBottom:"2px",background:"#fafafa",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"}}})));function lt(e){var a=e.collections,t=e.collection,o=e.data,i=e.staticData,l=e.selectCollection,c=e.handleChange,s=e.enableEdit,d=e.removeItem,u=e.handleSubmit,m=e.openAddDialog,p=it().textField;return r.a.createElement(n.Fragment,null,r.a.createElement(ia,{links:["Ve\xedculos","/veiculos"],text:"Alterar configura\xe7\xf5es de ve\xedculos"}),r.a.createElement("center",null,r.a.createElement("h4",null,"Selecione uma das op\xe7\xf5es abaixo.")),r.a.createElement("div",{className:"selectHeader"},r.a.createElement(be.a,{className:p,onChange:l,value:t,select:!0,SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},a.map((function(e,a){return r.a.createElement(ge.a,{key:a,value:e},e)})))),i&&t&&r.a.createElement("div",{className:"divHeader"},r.a.createElement(k.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"10px 0 10px 0"},onClick:function(){return m()}},r.a.createElement(ke.a,null)," Adicionar")),r.a.createElement("div",{className:"container"},o&&i&&o.map((function(e,a){return r.a.createElement("div",{className:"divCell",key:a},r.a.createElement(be.a,{value:e.edit?e[i.field]:e[i.field]+" ("+e.count+")",onChange:c,name:e.field,type:"text",inputProps:{autoCorrect:"off",spellCheck:!1,style:{fontSize:"0.8rem",color:!0===e.edit?"#000":"#999"}},className:p,disabled:!1===e.edit}),r.a.createElement("button",{component:"span",className:"configVehicleIcon",title:"Editar",onClick:function(){return s(a)},display:"none"},r.a.createElement(nt.a,{className:"confIcon",color:"primary"})),r.a.createElement("button",{className:"configVehicleIcon",title:"Remover",onClick:function(){return d(a)}},r.a.createElement(ot.a,{className:"confIcon",color:"secondary"})))}))),o&&r.a.createElement(xe.a,{container:!0,direction:"row",justify:"flex-end"},r.a.createElement(xe.a,{item:!0,xs:1,style:{align:"right",margin:"20px 95px 10px 0"}},r.a.createElement(k.a,{size:"small",color:"primary",variant:"contained",title:"Salvar",onClick:function(){return u()}},"Salvar ",r.a.createElement("span",null,"\xa0\xa0 ")," ",r.a.createElement(Va.a,null)))))}var ct=pe(["seguradoras","lookUpTable/marca_chassi","modelosChassi","lookUpTable/marca_carroceria","carrocerias","equipamentos","veiculos"],function(e){function a(){var e,t;Object(G.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object($.a)(this,(e=Object(Z.a)(a)).call.apply(e,[this].concat(r)))).state={collection:"",marca:"",options:[],openAddDialog:!1,confirmToast:!1,toastMsg:"Dados atualizados!"},t.addCounter=function(e,a,t){var n=a.name,r=a.field,o=a.label;return t.forEach((function(a){var t=e.filter((function(e){return"Equipamentos"===o&&e[n]?e[n].toLowerCase().match(a[r].toLowerCase()):e[n]===a[r]})).length;Object.assign(a,{count:t})})),t=t.sort((function(e,a){return e[r].localeCompare(a[r])}))},t.selectCollection=function(e){var a,n,r,o,i,l,c;return K.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=e.target.value,n=t.props.redux,r=n.veiculos,o=n.marcaChassi,i=n.marcaCarroceria,l=ue.find((function(e){return e.label===a})),c=JSON.parse(JSON.stringify(t.props.redux[l.collection])),(c=t.addCounter(r,l,c)).forEach((function(e){return e.edit=!1})),t.setState({marcas:void 0,marca:""}),"modelosChassi"===l.collection&&t.setState({marcas:o}),"carrocerias"===l.collection&&t.setState({marcas:i}),s.next=9,K.a.awrap(t.setState({collection:a,data:c,staticData:l}));case 9:case 10:case"end":return s.stop()}}))},t.enableEdit=function(e){var a,n,r,o;return K.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return a=document.querySelectorAll(".divCell"),n=a[e].childNodes[0],r=n.querySelectorAll("input")[0],!0===(o=Object(h.a)(t.state.data))[e].edit?o[e].edit=!1:(o.forEach((function(e){return e.edit=!1})),o[e].edit=!0),i.next=5,K.a.awrap(t.setState({data:o}));case 5:r.focus();case 6:case"end":return i.stop()}}))},t.selectMarca=function(e){var a,n=e.target.value,r=t.state.staticData.collection,o=t.props.redux,i=o.marcaChassi,l=o.marcaCarroceria;"modelosChassi"===r&&(a=i),"carrocerias"===r&&(a=l);var c=a.find((function(e){return e.marca===n})).id;t.setState({marca:n,marcaId:c})},t.handleChange=function(e){var a,n,r,o,i;return K.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return a=e.target.value,n=t.state.staticData.field,r=t.state.data.find((function(e){return!0===e.edit})),o=t.state.data.indexOf(r),r[n]=a,(i=Object(h.a)(t.state.data))[o]=r,l.next=8,K.a.awrap(t.setState({data:i}));case 8:case"end":return l.stop()}}))},t.handleInput=function(e){var a=e.target.value;t.setState({newElement:a})},t.addNewElement=function(){var e,a,n,r,o,i,l,c,s,d;return K.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return e=t.state,a=e.staticData,n=e.newElement,r=e.marcaId,o=a.table,i=a.field,l=a.collection,c=t.props.redux.veiculos,s=Object(g.a)({},i,n),r&&(s.marcaId=r),s=te.a.decamelizeKeys(s),u.next=6,K.a.awrap(ee.a.post("/api/addElement",{table:o,requestElement:s}));case 6:d=t.props.redux[l],d=t.addCounter(c,a,d),t.setState({openAddDialog:!1,data:d});case 9:case"end":return u.stop()}}))},t.removeItem=function(e){var a,n,r,o,i,l;return K.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(a=Object(h.a)(t.state.data),n=t.state.staticData,r=n.collection,o=n.table,i=a[e].id,l=t.props.redux[r],!l.find((function(e){return e.id===i}))){c.next=5;break}return c.next=5,K.a.awrap(ee.a.delete("/api/delete?table=".concat(o,"&tablePK=id&id=").concat(i)).catch((function(e){return console.log(e)})));case 5:a.splice(e,1),t.setState({data:a});case 7:case"end":return c.stop()}}))},t.handleSubmit=function(){var e,a,n,r,o,i,l,c,s,d,u,m;return K.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return e=t.props.redux,a=t.state,n=a.data,r=a.staticData,o=r.collection,i=r.field,l=r.table,c=JSON.parse(JSON.stringify(e[o])),s=[],n.forEach((function(e){if(e.hasOwnProperty("id")){e.count,e.edit;var a=Object(_.a)(e,["count","edit"]);s.push(a)}})),d=[],u={},s.forEach((function(e){c.forEach((function(a){e.id===a.id&&(Object.keys(e).forEach((function(t){e[t]!==a[t]&&(u.id||(u=Object(b.a)({},u,{id:e.id})),Object.assign(u,Object(g.a)({},t,e[t])))})),Object.keys(u).length>0&&d.push(u),u={})}))})),"id",m=te.a.decamelize(i),s=te.a.decamelizeKeys(d),p.next=9,K.a.awrap(ee.a.put("/api/editElements",{requestArray:s,table:l,tablePK:"id",column:m}).then((function(e){return console.log("updated.")})).catch((function(e){return console.log(e)})));case 9:s=[],d=[],u={},t.toast(),t.setState({collection:"",staticData:void 0});case 14:case"end":return p.stop()}}))},t.toggleDialog=function(){return t.setState({openAddDialog:!t.state.openAddDialog})},t.toast=function(){return t.setState({confirmToast:!t.state.confirmToast})},t}return Object(X.a)(a,e),Object(J.a)(a,[{key:"componentDidMount",value:function(){var e=[];ue.forEach((function(a){e.push(a.label)})),this.setState({options:e})}},{key:"componentDidUpdate",value:function(e){var a=this.props.redux,t=a.veiculos,n=this.state,r=n.staticData,o=n.data;if(!r||!o)return null;var i=r.collection;if(JSON.stringify(e.redux[i])!==JSON.stringify(a[i])){var l=this.addCounter(t,r,a[i]);this.setState({data:l})}}},{key:"render",value:function(){var e=this.state,a=e.options,t=e.collection,o=e.data,i=e.staticData,l=e.openAddDialog,c=e.marca,s=e.marcas,d=e.confirmToast,u=e.toastMsg;return r.a.createElement(n.Fragment,null,r.a.createElement(lt,{collections:a,collection:t,data:o,staticData:i,selectCollection:this.selectCollection,enableEdit:this.enableEdit,handleChange:this.handleChange,handleSubmit:this.handleSubmit,openAddDialog:this.toggleDialog,removeItem:this.removeItem}),l&&r.a.createElement(_a,{open:l,close:this.toggleDialog,title:i.label,helperMessage:'Para adicionar, insira o nome no campo abaixo e clique em "Confirmar".',marca:c,marcas:s,selectMarca:this.selectMarca,handleInput:this.handleInput,addNewElement:this.addNewElement}),r.a.createElement(ya,{open:d,close:this.toast,msg:u}))}}]),a}(n.PureComponent)),st=t(292),dt=t(201),ut=t(293),mt=t.n(ut),pt=function(e,a){if(/\d/.test(e)){var t=new Date(e).getDate()+"/"+(new Date(e).getMonth()+1)+"/"+new Date(e).getFullYear();return a&&(t+=", "+new Date(e).getHours()+":"+(new Date(e).getMinutes()<10?"0"+new Date(e).getMinutes():new Date(e).getMinutes())+"h"),t.toString()}return e},ft=[{field:"placa",title:"Placa"},{field:"modeloCarroceria",title:"Modelo da Carroceria"},{field:"empresa",title:"Delegat\xe1rio"},{field:"seguradora",title:"Seguradora"},{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"vencimento",title:"Vencimento Seguro",render:function(e){return pt(e.vencimento)}},{field:"indicadorIdade",title:"Ano de Fabrica\xe7\xe3o",filtering:!1}],gt=[{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"seguradora",title:"Seguradora"},{field:"empresa",title:"Segurado"},{field:"segurados",title:"N\xfamero de ve\xedculos"},{field:"vencimento",title:"Vencimento",filtering:!1,render:function(e){return pt(e.vencimento)}}],ht=[[{field:"razaoSocial",title:"Raz\xe3o Social"},{field:"delegatarioStatus",title:"Situa\xe7\xe3o"},{field:"vencimentoContrato",title:"Data de Vencimento",filtering:!1,render:function(e){return pt(e.vencimentoContrato)}},{field:"cidade",title:"Munic\xedpio"},{field:"telefone",title:"Telefone"},{field:"frota",title:"Tamanho da frota"}]].concat([[{field:"nomeSocio",title:"Nome"},{field:"cpfSocio",title:"CPF"},{field:"razaoSocial",title:"Delegat\xe1rio(s)"},{field:"emailSocio",title:"E-mail"},{field:"share",title:"Participa\xe7\xe3o Societ\xe1ria (%)",filtering:!1}]]).concat([[{field:"nomeProcurador",title:"Nome"},{field:"cpfProcurador",title:"CPF"},{field:"emailProcurador",title:"E-mail"},{field:"telProcurador",title:"Telefone"}]]).concat([ft]).concat([gt]),bt=function(e){var a=e.tab,t=e.collection,n=e.showDetails,o=e.showFiles,i=e.showCertificate,l=e.del,c=["delegatarioId","socioId","procuradorId","veiculoId","apolice"][a],s=["empresas","s\xf3cios","procuradores","ve\xedculos","seguros"];return Array.isArray(t)||(t=[]),r.a.createElement("div",{style:{margin:"10px 0"},className:"noPrint"},r.a.createElement(mt.a,{title:"Pesquisar dados de ".concat(s[a]),columns:ht[a],data:t,style:{fontFamily:"Segoe UI",fontSize:"14px"},options:{filtering:!0,exportButton:!0,exportFileName:s[a],exportCsv:function(e,t){!function(e,a){var t={Sheets:{data:dt.utils.json_to_sheet(e)},SheetNames:["data"]},n=dt.write(t,{bookType:"xlsx",type:"array"}),r=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});st.saveAs(r,a+".xlsx")}(t,s[a])},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:10},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Registro n\xe3o encontrado.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},actions:[{icon:"info",iconProps:{color:"primary"},tooltip:"Mais informa\xe7\xf5es",onClick:function(e,a){return n(e,a)}},{icon:"file_copy_outline",iconProps:{color:"secondary"},tooltip:"Ver arquivos",onClick:function(e,a){return o(a[c])}},{icon:"class_outlined",iconProps:{color:"action"},tooltip:"Emitir certificado",hidden:3!==a,onClick:function(e,a){return i(a)}}],editable:{onRowDelete:function(e){return K.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,K.a.awrap(l(e));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))}}}))},vt=[[{field:"empresa",label:"Delegat\xe1rio",width:"120mm",left:"50mm"},{type:"date",field:"vencimentoContrato",label:"Validade do Contrato",width:"36mm",left:"5mm"}]],Et=[[{field:"placa",label:"Placa",width:"25mm",left:"8mm"},{field:"renavam",label:"Renavam",width:"42mm",left:"14mm"},{field:"poltronas",label:"Poltronas",width:"16mm",left:"2mm"},{field:"piquesPoltrona",label:"Piques poltrona",width:"19mm"},{field:"nChassi",label:"N\xfamero do Chassi",width:"50mm",left:"15mm"}],[{field:"marcaChassi",label:"Marca do Chassi",width:"49mm",left:"15mm"},{field:"modeloChassi",label:"Modelo do Chassi",width:"49mm",left:"15mm"},{field:"anoChassi",label:"Ano do chassi"},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)"},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)"}],[{field:"marcaCarroceria",label:"Marca da Carroceria",width:"49mm",left:"15mm"},{field:"modeloCarroceria",label:"Modelo da Carroceria",width:"49mm",left:"15mm"},{field:"anoCarroceria",label:"Ano da carroceria"},{field:"cores",label:"Cores",width:"45mm",left:"15mm"}]],xt=[[{field:"seguradora",label:"Seguradora",width:"75mm",left:"27.5mm"},{field:"apolice",label:"Ap\xf3lice",width:"35mm",left:"13mm"},{type:"date",field:"dataEmissao",label:"Data de Emiss\xe3o",width:"25mm",left:"5mm"},{type:"date",field:"vencimento",label:"Vencimento",width:"25mm",left:"5mm"}]],St=[[{field:"eixos",label:"N\xba Eixos",width:"15mm",left:"2mm"},{field:"pbt",label:"Peso Bruto Total",width:"25mm",left:"5mm"},{field:"pesoDianteiro",label:"Peso Dianteiro (kg)",width:"28mm",left:"4mm"},{field:"pesoTraseiro",label:"Peso Traseiro (kg)",width:"28mm",left:"4mm"},{field:"pbt",label:"Peso Bruto Total",width:"25mm",left:"5mm"},{field:"pesoPassageiros",label:"Passag/Bagagem",width:"25mm",left:"3mm"}]],yt=[[{type:"date",field:"dataRegistro",label:"Data de Registro",width:"35mm",left:"9mm"},{field:"dataExpedicao",label:"Data de expedi\xe7\xe3o",width:"35mm",left:"9mm"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",width:"35mm",left:"9mm"},{field:"equipamentosId",label:"Acess\xf3rios",width:"65mm"}]],wt=[[{field:"compartilhado",label:"Empresas autorizadas a compartilhar",width:"120mm",left:"20mm"},{field:"observacoes",label:"Observa\xe7\xf5es",width:"80mm"}]],Ct=(t(476),t(298)),kt=t.n(Ct),Ot=Object(S.a)((function(e){return{textField:{paddingRight:"25px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"}}}));function jt(){var e=Object(n.useState)({}),a=Object(y.a)(e,2),t=a[0],o=a[1],i=JSON.parse(localStorage.getItem("vehicle"));console.log("1",i),Object(n.useEffect)((function(){K.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("2",localStorage),document.querySelectorAll(".MuiToolbar-root").forEach((function(e){return e.style.display="none"})),e.next=5,K.a.awrap(o(i));case 5:setTimeout((function(){i&&window.print()}),500);case 6:case"end":return e.stop()}})),localStorage.removeItem("vehicle"),console.log("3",localStorage)}),[]);var l=Ot().textField,c=Et,s=vt,d=xt,u=St,m=yt,p=wt,f={};t&&[c,s,d,u,m,p].forEach((function(e){Object.entries(t).forEach((function(a){var t=Object(y.a)(a,2),n=t[0],r=t[1];e.forEach((function(a,t){a.forEach((function(a,o){a.field===n&&(f=Object.assign(a,{value:r}),e[t][o]=f,f={})}))}))}))}));var g=[{title:"Delegat\xe1rio",form:s},{title:"Caracter\xedsticas do Ve\xedculo",form:c},{title:"Seguro",form:d},{title:"Pesagem",form:u},{title:"Informa\xe7\xf5es gerais",form:m},{title:"Outras informa\xe7\xf5es",form:p}];if(!t){var h=window.location.origin;return window.location.replace(h),null}return r.a.createElement(n.Fragment,null,r.a.createElement("div",{id:"pdfPage",className:"A4"},r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:"/images/certficateHeader.png",height:"100%",width:"100%",alt:"header"})),g.map((function(e,a){var t=e.title,n=e.form;return r.a.createElement("div",{className:"Delegat\xe1rio"!==t?"box":"firstBox",key:a},"Delegat\xe1rio"!==t&&r.a.createElement("span",{className:"boxTitle"},t),n.map((function(e,a){return r.a.createElement("div",{key:a,className:"Delegat\xe1rio"!==t?"divLine":"firstDivLine",style:{marginTop:0===a&&"11mm"}},e.map((function(e,a){return r.a.createElement(be.a,{disabled:!0,key:a,name:e.field,label:e.label,className:l,multiline:!!("equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50),rows:e.value&&e.value.length<86?"2":e.value&&e.value.length<140?"3":"4",variant:"equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50?"outlined":"standard",value:"date"===e.type?re()(e.value).format("DD-MM-YYYY"):"dataExpedicao"===e.field?re()().format("DD-MM-YYYY"):e.value||"",inputProps:{className:(t=e.field,"equipamentosId"===t||"equipamentosId"===t?void 0:"certificate"),style:{width:e.width||"18mm",fontSize:"2.7mm",padding:"1px 0",margin:"0",flex:"1",color:"#000"}},InputProps:{style:{padding:"equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50?"1mm":""}},InputLabelProps:{shrink:!0,style:{fontSize:"13px",textAlign:"center !important",left:e.left||"0",color:"#000"}}});var t})))})))})),r.a.createElement("div",{className:"porteObrigatorio"},r.a.createElement("img",{src:"/images/porteObrigatorio.png",height:"100%",width:"100%",alt:"porte obrigat\xf3rio"}),r.a.createElement("br",null),"Este certificado pode ser verificado em ",r.a.createElement("span",{className:"link",onClick:function(){return function(){document.querySelectorAll(".MuiToolbar-root").forEach((function(e){return e.style.display="none"}));var e=window.location.origin;window.location.href=e}()}}," http://www.sismob.mg.gov.br "))),r.a.createElement("br",null),r.a.createElement("button",{title:"Imprimir / salvar PDF",className:"noprint printButton",onClick:function(){return window.print()}},r.a.createElement(kt.a,{style:{cursor:"pointer",color:"rgb(161, 161, 180)",fontSize:"40pt"}})))}var Dt={field:"razaoSocial",label:"Empresa",width:"340px"},It={field:"placas",label:"Ve\xedculos cadastrados",width:"340px"},Nt={field:"createdAt",label:"Data do registro no sistema",type:"date",width:"190px"},At=[{field:"delegatarioStatus",label:"Status"},{field:"vencimentoContrato",label:"Vencimento do Contrato",type:"date"},Object(b.a)({},Nt),{field:"frota",label:"Tamanho da Frota"},{field:"oldId",label:"C\xf3digo no sistema antigo"},Object(b.a)({},It)],zt=[Object(b.a)({},Dt),Object(b.a)({},Nt)],Pt=[Object(b.a)({},Dt),Object(b.a)({},Nt),Object(b.a)({},It),{field:"segurados",label:"N\xfamero de ve\xedculos segurados"}],Ft=[{field:"dataRegistro",label:"Data do registro no sistema",type:"date"},{field:"pbt",label:"Peso Bruto Total"},{field:"situacao",label:"Situa\xe7\xe3o"},{field:"indicadorIdade",label:"Indicador de idade"},{field:"equipamentosId",label:"Equipamentos"},{field:"compartilhado",label:"Compartilhado por"},{field:"marcaChassi",label:"Marca do Chassi"},{field:"marcaCarroceria",label:"Marca da Carroceria"}],Tt=[{field:"razaoSocial",label:"Raz\xe3o Social",width:"340px"},{field:"cnpj",label:"CNPJ",maxLength:18,pattern:/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/},{field:"inscricaoEstadual",label:"Inscri\xe7\xe3o Estadual",maxLength:13,pattern:"\\d{13}"},{field:"telefone",label:"Telefone",maxLength:20,pattern:"((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))"},{field:"email",label:"E-mail",type:"email",maxLength:60},{field:"cep",label:"CEP",maxLength:10},{field:"numero",label:"N\xfamero",type:"number",max:32e3},{field:"complemento",label:"Complemento",maxLength:20},{field:"rua",label:"Rua",maxLength:100},{field:"bairro",label:"Bairro",maxLength:40},{field:"cidade",label:"Cidade",maxLength:60},{field:"uf",label:"Estado",maxLength:2,pattern:"[A-Z]{2}"}],Lt=[{field:"nomeSocio",label:"Nome do S\xf3cio",maxLength:90,width:190},{field:"cpfSocio",label:"CPF",maxLength:11,pattern:"\\d{11}",width:190},{field:"telSocio",label:"Telefone",maxLength:16,pattern:"((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))",width:190},{field:"emailSocio",label:"E-mail",maxLength:60,width:190},{field:"share",label:"Participa\xe7\xe3o Societ\xe1ria (%)",maxLength:5,type:"number",max:100,width:190}],qt=[{field:"nomeProcurador",label:"Nome do Procurador",maxLength:90,width:320},{field:"cpfProcurador",label:"CPF",maxLength:11,pattern:"\\d{11}"},{field:"telProcurador",label:"Telefone",type:"tel",maxLength:20,pattern:"((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))"},{field:"emailProcurador",label:"E-mail",type:"email",maxLength:60,pattern:"[a-zA-Z0-9]@([a-zA-Z0-9])?[.]([a-zA-Z0-9])",width:320}];function Mt(e){var a,t=e.data,n=e.tab,o=e.title,i=e.header,l=e.close,c=(t.tableData,Object(_.a)(t,["tableData"]));switch(n){case 0:a=Tt.concat(At);break;case 1:a=Lt.concat(zt);break;case 2:a=qt;break;case 3:t.veiculoId,t.laudoId,t.tableData,t.modeloChassiId,t.modeloCarroceriaId,t.delegatarioId,t.vencimentoContrato,t.delegatarioCompartilhado;var s=Object(_.a)(t,["veiculoId","laudoId","tableData","modeloChassiId","modeloCarroceriaId","delegatarioId","vencimentoContrato","delegatarioCompartilhado"]);c=s,a=je.concat([Ft]);break;case 4:a=Oe.concat(Pt)}var d=[];return Object.keys(c).forEach((function(e){3===n?a.forEach((function(a){a.forEach((function(a){var t=a.field,n=a.label,r=a.type;if(e===t){var o={};Object.assign(o,{field:t,label:n,value:c[e]}),r&&Object.assign(o,{type:r}),d.push(o),o={}}}))})):a.forEach((function(a){var t=a.field,n=a.label,r=a.type,o=a.width;a.fullWidth;if(e===t){var i={};Object.assign(i,{field:t,label:n,value:c[e]}),r&&Object.assign(i,{type:r}),o&&Object.assign(i,{width:o}),d.push(i),i={}}}))})),Object.keys(c).forEach((function(e){d.find((function(a){return a.field===e}))||3!==n||d.push({field:e,label:e,value:c[e]})})),r.a.createElement("div",{className:"popUpWindow",style:{left:"20%",right:"20%"}},r.a.createElement("h4",{className:"equipaHeader"},o," ",t[i])," ",r.a.createElement("hr",null),r.a.createElement("div",{className:"checkListContainer",style:{justifyContent:"flex-start"}},d.map((function(e,a){var t=e.field,n=e.label,o=e.value,i=e.type,l=e.width;return r.a.createElement("div",{className:"showDetailsItem",style:{width:l||150},key:a},r.a.createElement(be.a,{name:t,label:n,value:"date"===i?re()(o).format("DD/MM/YYYY"):o||"",InputLabelProps:{shrink:!0,style:{fontSize:"0.9rem",fontWeight:500}},inputProps:{style:{fontSize:"0.7rem",width:l||150,fontColor:"#bbb",textAlign:"center"}},variant:"outlined"}))}))),r.a.createElement(De,{close:l}))}var Bt=function(e){return e>1024&&e<1048576?Math.round(e/1024)+" KB":e>=1048576&&e<1073741824?(e/1024/1024).toFixed(2)+" MB":e+" bytes"},Vt=[{title:"Contrato Social",name:"contratoSocial"},{title:"Procura\xe7\xe3o",name:"procuracao"},{title:"Ap\xf3lice",name:"apoliceDoc"}],Rt={marginBottom:0,display:"grid",grid:"50px / 4% 40% 25% 25%",width:"99%",margin:"auto",padding:"10px 0 0 0",justifyItems:"auto"},Ut=function(e){var a=e.filesCollection,t=e.close,n=(e.format,e.typeId),o=e.empresas,i=[],l="empresaDocs",c=Object(h.a)(Vt);switch(n){case"veiculoId":l="vehicleDocs",(c=Object(h.a)(Me)).find((function(e){return"transferenciaDoc"===e.name}))||c.push({title:"Documento de Transfer\xeancia",name:"transferenciaDoc"}),c.find((function(e){return"newPlateDoc"===e.name}))||c.push({title:"CRLV com nova placa",name:"newPlateDoc"}),c.find((function(e){return"apoliceDoc"===e.name}))||c.push({title:"Ap\xf3lice de seguro",name:"apoliceDoc"}),c.find((function(e){return"laudoDoc"===e.name}))||c.push({title:"Laudo de seguran\xe7a veicular",name:"laudoDoc"})}a&&a[0]&&a.forEach((function(e){c.forEach((function(a){e.metadata&&a.name===e.metadata.fieldName&&i.push(Object(b.a)({},e,{label:a.title}))}))}));return i[0]?r.a.createElement("div",{className:"popUpWindow"},r.a.createElement("h5",null,r.a.createElement("img",{alt:"",src:"/images/folderIcon2.jpg",style:{paddingLeft:"20px",marginRight:"20px"}})," Arquivos"),r.a.createElement("hr",{style:{marginBottom:"5px"}}),r.a.createElement("div",{style:Rt},r.a.createElement("div",null,r.a.createElement("img",{alt:"",src:"/images/multipleFiles2.png",height:"50%"})),["Arquivo","Data de Upload","Tamanho"].map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement("span",{style:{fontSize:"1.2em",fontWeight:500}},e))}))),r.a.createElement("hr",{style:{margin:"0 0 20px 0"}}),i.map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement("div",{style:Rt},r.a.createElement("div",{className:"col s1"},r.a.createElement("img",{alt:"",src:"/images/genericFile.png"})),r.a.createElement("div",{className:"col s11"},r.a.createElement("span",{style:{textDecoration:"underline",cursor:"pointer",color:"blue"},onClick:function(){return Ze(e.id,e.filename,l,e.metadata.fieldName)}},e.label+function(e){var a=e.metadata;switch(a.fieldName){case"procuracao":return" - "+o.find((function(e){return e.delegatarioId===Number(a.empresaId)})).razaoSocial;case"apoliceDoc":return a.apolice?" n\xfamero "+a.apolice:" ";default:return""}}(e))),r.a.createElement("div",{className:"col s3"},pt(e.uploadDate,!0)),r.a.createElement("div",{className:"col s3"},Bt(e.length))))})),r.a.createElement(De,{close:t})):null},Yt={top:"5%",left:"10%",right:"10%"},Wt=function(e){function a(){var e;return Object(G.a)(this,a),(e=Object($.a)(this,Object(Z.a)(a).call(this))).state={tab:0,items:["Empresas","S\xf3cios","Procuradores","Ve\xedculos","Seguros"],tablePKs:["delegatario_id","socio_id","procurador_id","veiculo_id","id"],dbTables:["delegatario","socios","procurador","veiculo","seguro"],options:["empresas","socios","procuradores","veiculos","seguros"],detailsTitle:["Empresa","S\xf3cio","Procurador","Placa","Ap\xf3lice"],detailsHeader:["razaoSocial","nomeSocio","nomeProcurador","placa","apolice"],empresas:[],seguros:[],razaoSocial:"",showDetails:!1,showFiles:!1,openDialog:!1,filesCollection:[],elementDetails:"",vehicleDocs:[],showCertificate:!1},e.changeTab=function(a,t){return K.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,K.a.awrap(e.setState({tab:t}));case 2:return a.abrupt("return");case 3:case"end":return a.stop()}}))},e.showDetails=function(a,t){var n,r,o,i,l,c,s;return K.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.props.redux,r=e.state,o=r.options,i=r.tab,l=r.tablePKs,c=l.map((function(e){return te.a.camelize(e)})),t&&(s=n[o[i]].find((function(e){return e[c[i]]===t[c[i]]}))),void 0===t||!s){a.next=8;break}return a.next=5,K.a.awrap(e.setState({showDetails:!e.state.showDetails,elementDetails:s}));case 5:a.next=9;break;case 8:e.setState({showDetails:!e.state.showDetails,elementDetails:void 0});case 9:case"end":return a.stop()}}))},e.closeFiles=function(){e.setState({showFiles:!e.state.showFiles})},e.showFiles=function(a){var t=e.state.tab,n=e.props.redux,r=n.veiculos,o=n.socios,i=n.empresaDocs,l=n.vehicleDocs,c=i.filter((function(e){return e.metadata.empresaId===a.toString()})),s="empresaId";switch(t){case 1:c=i.filter((function(e){return e.metadata.empresaId===a.toString()}));var d=o.find((function(e){return e.socioId===a}));if(d){var u=[];c=i.filter((function(e){return e.metadata.empresaId===d.delegatarioId.toString()})).forEach((function(e){e.metadata.socios&&e.metadata.socios.includes(a)&&u.push(e)})),c=u}break;case 2:s="procuracaoId";var m=[];i.forEach((function(e){"procuracao"===e.metadata.fieldName&&e.metadata.procuradores.forEach((function(t){t===a&&m.push(e)}))})),c=m;break;case 3:s="veiculoId",c=l.filter((function(e){return e.metadata.veiculoId===a.toString()}));var p=r.find((function(e){return e.veiculoId===a}));if(p){var f=i.find((function(e){return e.metadata.apolice===p.apolice.toString()}));f&&c.push(f)}break;case 4:c=i.filter((function(e){return e.metadata.apolice===a.toString()}))}c[0]?(c=c.sort((function(e,a){return new Date(e.uploadDate)-new Date(a.uploadDate)})).reverse(),e.setState({filesCollection:c,showFiles:!0,typeId:s,selectedElement:a})):(e.setState({alertType:"filesNotFound",openAlertDialog:!0}),e.setState({filesCollection:[]}))},e.deleteHandler=function(a){var t=e.state,n=t.dbTables,r=t.tablePKs,o=t.tab,i=n[o],l=r[o],c=te.a.camelize(l);ee.a.delete("/api/delete?table=".concat(i,"&tablePK=").concat(l,"&id=").concat(a[c])).then((function(e){return console.log(e.data)}))},e.showCertificate=function(a){var t,n,r,o,i,l;return K.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=a.situacao,n=a.vencimento,r=a.vencimentoContrato,o=re()(n).isBefore(),i=re()(r).isBefore(),"Ativo"===t){c.next=5;break}return c.next=4,K.a.awrap(e.setState({alertType:"veiculoPendente",openAlertDialog:!0}));case 4:return c.abrupt("return");case 5:if(!o){c.next=9;break}return c.next=8,K.a.awrap(e.setState({alertType:"seguroVencido",openAlertDialog:!0}));case 8:return c.abrupt("return");case 9:if(!i){c.next=13;break}return c.next=12,K.a.awrap(e.setState({alertType:"contratoVencido",openAlertDialog:!0}));case 12:return c.abrupt("return");case 13:l=window.location.origin+"/crv",localStorage.setItem("vehicle",JSON.stringify(a)),window.open(l,"noopener");case 16:case"end":return c.stop()}}))},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.closeCertificate=function(){return e.setState({showCertificate:!e.state.showCertificate})},e.escFunction=function(a){27===a.keyCode&&(e.state.showDetails&&e.showDetails(),e.state.showFiles&&e.closeFiles(),e.state.showCertificate&&e.closeCertificate())},e}return Object(X.a)(a,e),Object(J.a)(a,[{key:"componentDidMount",value:function(){return K.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:document.addEventListener("keydown",this.escFunction,!1);case 1:case"end":return e.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e,a=this.state,t=a.tab,o=a.options,i=a.items,l=a.showDetails,c=a.elementDetails,s=a.showFiles,d=a.selectedElement,u=a.filesCollection,m=a.openAlertDialog,p=a.alertType,f=a.typeId,g=a.tablePKs,h=a.showCertificate,b=a.certified,v=a.detailsTitle,E=a.detailsHeader,x=this.props.redux,S=x.empresas,y=g.map((function(e){return te.a.camelize(e)}));return c&&l&&(e=x[o[t]].find((function(e){return e[y[t]]===c[y[t]]}))),r.a.createElement(n.Fragment,null,r.a.createElement(M,{items:i,tab:t,changeTab:this.changeTab}),r.a.createElement(bt,{tab:t,items:i,collection:this.props.redux[o[t]],showDetails:this.showDetails,showFiles:this.showFiles,del:this.deleteHandler,showCertificate:this.showCertificate}),l&&r.a.createElement(Mt,{close:this.showDetails,data:e||c,tab:t,title:v[t],header:E[t]}),h&&r.a.createElement(jt,{vehicle:b}),s&&r.a.createElement(Ut,{tab:t,elementId:d,filesCollection:u,close:this.closeFiles,format:Yt,typeId:f,empresas:S}),m&&r.a.createElement(Ia,{open:m,close:this.closeAlert,alertType:p}))}}]),a}(n.Component),_t=Object(s.c)(null,{updateCollection:ce})(pe(["veiculos","empresas","socios","procuradores","seguros","seguradoras","getFiles/vehicleDocs","getFiles/empresaDocs"],Wt)),Ht=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1),height:"auto"},title:{color:"#000",fontWeight:500,textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300,fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},dropBox:{margin:"2% 0"},dropBoxItem:{margin:"12px 0",border:"1px solid #ccc",borderRadius:"3%",height:"50px",padding:"17px",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#4169E1",backgroundColor:"#fafafa"},dropBoxItem2:{margin:"12px 0",border:"1px solid #ccc",borderRadius:"3%",height:"50px",padding:"0 1% 0 1%",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#00000",backgroundColor:"#fafafa"}}})),Kt=function(e){var a=e.handleInput,t=e.handleBlur,n=e.data,o=e.handleFiles,i=n.activeStep,l=n.stepTitles,c=n.dropDisplay,s=Ht(),d=s.paper,u=s.container,m=s.title,p=s.dropBox,f=s.dropBoxItem,g=s.dropBoxItem2,h=Tt;return r.a.createElement(xe.a,{container:!0,direction:"row",className:u,justify:"center"},r.a.createElement(xe.a,null,r.a.createElement(xe.a,{item:!0,xs:12},r.a.createElement(Se.a,{className:d},r.a.createElement(O.a,{className:m}," ",l[i]),r.a.createElement(Ee,{form:h,data:n,handleBlur:t,handleInput:a}),r.a.createElement(ze.a,{onDrop:o},(function(e){var a=e.getRootProps,t=e.getInputProps;return r.a.createElement(xe.a,Object.assign({container:!0,justify:"center",alignItems:"center",className:p,direction:"row"},a()),r.a.createElement("input",t()),c.match("Clique ou")?r.a.createElement(xe.a,{item:!0,xs:6,className:f}," ",c," "):r.a.createElement(xe.a,{item:!0,xs:6,className:g}," ",r.a.createElement(Le.a,null),"  ",c," ",r.a.createElement("br",null)," (clique ou arraste outro arquivo para alterar)"))}))))))},Gt=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1)},title:{color:"#000",fontWeight:500,textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#bbb",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"},addButton:{marginBottom:"1%",padding:"1% 0"}}})),Jt=function(e){var a=e.handleInput,t=e.handleBlur,o=e.data,i=e.addSocio,l=e.removeSocio,c=(e.handleFiles,e.enableEdit),s=e.handleEdit,d=o.activeStep,u=o.stepTitles,m=o.socios,p=Gt(),f=p.paper,g=p.container,h=p.title,b=p.iconButton,v=p.list,E=p.addButton,x=function(e){var a=o[e.field];return e.pattern&&a?null===a.match(e.pattern):a>e.max||a<e.min},S=function(e){var a=o[e.field];return a>e.max||a<e.min?"Valor inv\xe1lido":a&&null===a.match(e.pattern)?"\u2718":e.pattern&&a&&null!==a.match(e.pattern)?"\u2713":void 0};return r.a.createElement(xe.a,{container:!0,direction:"row",className:g,justify:"center"},r.a.createElement(xe.a,null,r.a.createElement(xe.a,{item:!0,xs:12},r.a.createElement(Se.a,{className:f},r.a.createElement(O.a,{className:h}," ",u[d]),Lt.map((function(e,i){return r.a.createElement(n.Fragment,{key:i},r.a.createElement(be.a,{name:e.field,label:e.label,margin:"normal",className:p.textField,onChange:a,onBlur:t,type:e.type||"",error:x(e),helperText:S(e),select:e.select||!1,value:o[e.field]||"",disabled:e.disabled||!1,InputLabelProps:{className:p.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.75rem",fontWeight:400,color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:e.disabled&&o.disable?"#fff":"#fafafa",height:"7px"},value:"".concat(o[e.field]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1},!0===e.select&&e.options.map((function(e,a){return r.a.createElement(ge.a,{key:a,value:e},e)}))))})),r.a.createElement(k.a,{color:"primary",className:E,onClick:i},r.a.createElement(ke.a,null)," Adicionar s\xf3cio"))),m.length>0&&r.a.createElement(xe.a,{container:!0,direction:"row",className:g,justify:"center",alignItems:"center"},r.a.createElement(xe.a,{item:!0,xs:12},r.a.createElement(Se.a,{className:f},r.a.createElement("p",{className:h},1===d?"S\xf3cios":"Procuradores"," cadastrados"),m.map((function(e,a){return r.a.createElement(xe.a,{key:a},Lt.map((function(a,t){return r.a.createElement(n.Fragment,{key:t+1e3},r.a.createElement(be.a,{value:e[a.field]||"",name:a.field,label:a.label,className:v,disabled:"cpfSocio"===a.field||!e.edit,onChange:s,InputLabelProps:{shrink:!0,style:{fontWeight:600}}}))})),r.a.createElement(k.a,{component:"span",className:b,title:"editar",onClick:function(){return c(a)}},r.a.createElement(nt.a,null)),r.a.createElement(k.a,{className:b,color:"secondary",title:"Remover",onClick:function(){return l(a)}},r.a.createElement(ot.a,null)))})))))))},$t=Object(S.a)((function(e){return{paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 5px 0",height:"auto"}}}));function Zt(e){var a,t=e.data,o=e.empresasForm,i=e.sociosForm,l=e.filesForm,c=e.files,s=t.socios,d=$t().paper,u=[],m={},p=[];return o.forEach((function(e){t.hasOwnProperty([e.field])&&(Object.assign(m,Object(g.a)({},e.field,t[e.field])),p.push(e))})),u.push(m),a=[{subtitle:"Detalhes da empresa",form:p,data:u},{subtitle:"Informa\xe7\xf5es sobre os s\xf3cios",form:i,data:s}],r.a.createElement(r.a.Fragment,null,r.a.createElement(Se.a,{className:d},r.a.createElement("div",{className:"divTable"},a.map((function(e,a){var t=e.subtitle,o=e.form,i=e.data;return r.a.createElement(n.Fragment,{key:a},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",colSpan:o.length},t)),r.a.createElement("tr",null,o.map((function(e,a){return r.a.createElement("th",{key:a},e.label)})))),r.a.createElement("tbody",null,0===a&&r.a.createElement("tr",null,i.map((function(e,a){return Object.values(e).map((function(e,a){return r.a.createElement("td",{className:"review",key:a},e)}))}))),0!==a&&i.map((function(e,a){return r.a.createElement("tr",null,Object.values(e).map((function(e,a){return r.a.createElement("td",{className:"review",key:a},e)})))})))))}))),r.a.createElement("h3",{style:{margin:"30px 0 0 25px"}}," ",r.a.createElement(ea.a,{style:{verticalAlign:"middle",padding:"0 0 0 8px"}})," Documentos "),c&&r.a.createElement($e,{form:l,files:c})))}var Xt=pe(["empresas"],function(e){function a(){var e;return Object(G.a)(this,a),(e=Object($.a)(this,Object(Z.a)(a).call(this))).state={activeStep:0,stepTitles:["Preencha os dados da empresa","Informa\xe7\xf5es sobre os s\xf3cios","Revis\xe3o"],steps:["Dados da Empresa","S\xf3cios","Revis\xe3o"],razaoSocial:"",toastMsg:"Empresa cadastrada!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,addedSocios:[0],totalShare:0,socios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",showFiles:!1},e.setActiveStep=function(a){var t,n;return K.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.state.activeStep,"next"===a&&e.setState({activeStep:t+1}),"back"===a&&e.setState({activeStep:t-1}),"reset"===a&&e.setState({activeStep:0}),!(n=e.state.errors)||!n[0]){r.next=9;break}return r.next=8,K.a.awrap(e.setState(Object(b.a)({},e.state,{},fe("setState"))));case 8:return r.abrupt("return");case 9:case"end":return r.stop()}}))},e.handleInput=function(a){var t,n,r;return K.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:t=a.target,n=t.name,r=t.value,e.setState(Object(g.a)({},n,r));case 2:case"end":return o.stop()}}))},e.addSocio=function(){var a,t,n,r;return K.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=e.state.socios,t={},n=0,r=0,Lt.forEach((function(a){""!==e.state[a.field]&&void 0!==e.state[a.field]||(n+=1)})),100!==n){o.next=7;break}return e.setState({alertType:"fieldsMissing",openAlertDialog:!0}),o.abrupt("return",null);case 7:if(Lt.forEach((function(a){Object.assign(t,Object(g.a)({},a.field,e.state[a.field]))})),a.push(t),a.forEach((function(e){r+=Number(e.share)})),!(r>100)){o.next=15;break}a.pop(),e.setState({alertType:"overShared",openAlertDialog:!0}),o.next=19;break;case 15:return o.next=17,K.a.awrap(e.setState({socios:a,totalShare:r}));case 17:Lt.forEach((function(a){e.setState(Object(g.a)({},a.field,""))})),document.getElementsByName("nomeSocio")[0].focus();case 19:case"end":return o.stop()}}))},e.enableEdit=function(a){var t=e.state.socios;!0===t[a].edit?t[a].edit=!1:(t.forEach((function(e){return e.edit=!1})),t[a].edit=!0),e.setState({socios:t})},e.handleEdit=function(a){var t=a.target.name,n=e.state.socios,r=a.target.value;"share"===t&&(r=r.replace(",","."));var o=n.filter((function(e){return!0===e.edit}))[0],i=n.indexOf(o);o[t]=r;var l=n;l[i]=o,e.setState({filteredSocios:l})},e.removeSocio=function(a){var t=e.state.socios;t.splice(a,1),e.setState({socios:t})},e.getId=function(a,t,n,r,o,i,l){var c,s,d,u,m,p;return K.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:if(s=n.filter((function(e){return e[o].toLowerCase().match(t.toLowerCase())})),""===t&&e.setState((c={},Object(g.a)(c,a,""),Object(g.a)(c,r,""),c)),!s[0]){f.next=10;break}if(d=s[0][o],u=s[0][i],""===t){f.next=8;break}return f.next=8,K.a.awrap(e.setState((m={},Object(g.a)(m,a,d),Object(g.a)(m,r,u),m)));case 8:f.next=14;break;case 10:return f.next=12,K.a.awrap(e.setState((p={},Object(g.a)(p,a,""),Object(g.a)(p,r,""),p)));case 12:alert(l+" n\xe3o cadastrado"),document.getElementsByName(a)[0].focus();case 14:case"end":return f.stop()}}))},e.handleBlur=function(a){var t,n,r,o,i,l,c;return K.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:t=e.props.redux.empresas,n=a.target.name,r=a.target.value,(o=fe())?e.setState({errors:o}):e.setState({errors:void 0}),s.t0=n,s.next="cnpj"===s.t0?8:"share"===s.t0?11:"numero"===s.t0?14:19;break;case 8:return(i=t.filter((function(e){return e.cnpj===r})))[0]&&(e.setState({cnpj:""}),e.setState({alertType:i[0],openAlertDialog:!0})),s.abrupt("break",20);case 11:return(r=r.replace(",","."))>100?e.setState({alertType:"overShared",openAlertDialog:!0}):(c=Number(e.state.totalShare)+Number(r),e.setState((l={},Object(g.a)(l,n,r),Object(g.a)(l,"totalShare",c),l))),s.abrupt("break",20);case 14:if(!r||r.match(/^\d+$/)){s.next=18;break}return s.next=17,K.a.awrap(e.setState({numero:""}));case 17:e.setState({alertType:"numberNotValid",openAlertDialog:!0});case 18:case 19:return s.abrupt("break",20);case 20:case"end":return s.stop()}}))},e.handleFiles=function(a){var t=new FormData;t.append("contratoSocial",a[0]),e.setState({dropDisplay:a[0].name,contratoSocial:t})},e.handleSubmit=function(){var a,t,n,r,o,i,l,c,s,d,u,m;return K.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return a=e.state,t=a.socios,n=a.contratoSocial,r={},o=new FormData,Tt.forEach((function(a){e.state.hasOwnProperty([a.field])&&Object.assign(r,Object(g.a)({},a.field,e.state[a.field]))})),r.delegatarioStatus="Ativo",Object.entries(r).forEach((function(e){var a=Object(y.a)(e,2),t=a[0],n=a[1];n&&""!==n||delete r[t]})),t.forEach((function(e){delete e.edit,Object.entries(e).forEach((function(e){var a=Object(y.a)(e,2),n=a[0],r=a[1];r&&""!==r||delete t[n]}))})),r=te.a.decamelizeKeys(r),t=te.a.decamelizeKeys(t),p.next=9,K.a.awrap(ee.a.post("/api/empresaFullCad",{empresa:r,socios:t}).then((function(e){i=e.data})));case 9:if(!n){p.next=33;break}for(o.append("fieldName","contratoSocial"),o.append("empresaId",i),l=!0,c=!1,s=void 0,p.prev=15,d=n.entries()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0)m=u.value,o.append(m[0],m[1]);p.next=23;break;case 19:p.prev=19,p.t0=p.catch(15),c=!0,s=p.t0;case 23:p.prev=23,p.prev=24,l||null==d.return||d.return();case 26:if(p.prev=26,!c){p.next=29;break}throw s;case 29:return p.finish(26);case 30:return p.finish(23);case 31:return p.next=33,K.a.awrap(ee.a.post("/api/empresaUpload",o).then((function(e){return console.log("file ok.")})));case 33:e.toast(),e.resetState();case 35:case"end":return p.stop()}}),null,null,[[15,19,23,31],[24,,26,30]])},e.resetState=function(){var a={},t={},n={};Tt.forEach((function(t){Object.keys(t).forEach((function(n){"field"===n&&e.state[t[n]]&&Object.assign(a,Object(g.a)({},t[n],void 0))}))})),Lt.forEach((function(a){Object.keys(a).forEach((function(n){"field"===n&&e.state[a[n]]&&Object.assign(t,Object(g.a)({},a[n],void 0))}))})),Vt.forEach((function(e){var a=e.name;Object.assign(n,Object(g.a)({},a,void 0))})),e.setState(Object(b.a)({},a,{},t,{},n,{activeStep:0,razaoSocial:"",files:[],fileNames:[],addedSocios:[0],totalShare:0,socios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",showFiles:!1}))},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.showFiles=function(){return e.setState({showFiles:!0})},e.closeFiles=function(){return e.setState({showFiles:!e.state.showFiles})},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.handleEquipa()},e}return Object(X.a)(a,e),Object(J.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.activeStep,t=e.confirmToast,o=e.toastMsg,i=e.steps,l=e.openAlertDialog,c=e.alertType,s=e.contratoSocial;return r.a.createElement(n.Fragment,null,r.a.createElement(ia,{links:["Empresas","/empresas"],text:"Cadastro de empresas"}),r.a.createElement(pa,{activeStep:a,steps:i,setActiveStep:this.setActiveStep}),0===a?r.a.createElement(Kt,{data:this.state,handleInput:this.handleInput,handleBlur:this.handleBlur,handleFiles:this.handleFiles}):1===a?r.a.createElement(Jt,{data:this.state,handleInput:this.handleInput,handleBlur:this.handleBlur,addSocio:this.addSocio,removeSocio:this.removeSocio,handleFiles:this.handleFiles,enableEdit:this.enableEdit,handleEdit:this.handleEdit}):2===a&&r.a.createElement(Zt,{files:s,filesForm:Vt,data:this.state,sociosForm:Lt,empresasForm:Tt}),r.a.createElement(ca,{activeStep:a,lastStep:i.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep}),r.a.createElement(ya,{open:t,close:this.toast,msg:o}),l&&r.a.createElement(Ia,{open:l,close:this.closeAlert,alertType:c,customMessage:this.state.customMsg}))}}]),a}(n.Component)),Qt=t(536),en=t(537),an=t(535),tn=t(538),nn=t(275),rn=Object(S.a)((function(e){return{toolbar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbarTitle:{flex:1},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto"},toolbarLink:{padding:e.spacing(1),flexShrink:0},mainFeaturedPost:{position:"relative",backgroundColor:e.palette.grey[100],color:e.palette.common.white,marginBottom:e.spacing(4),backgroundImage:"/images/empresaBg2.jpg",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},overlay:{position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"rgba(0,0,0,.1)"},mainFeaturedPostContent:Object(g.a)({position:"relative",padding:e.spacing(3)},e.breakpoints.up("md"),{padding:e.spacing(6),paddingRight:0}),mainGrid:{marginTop:e.spacing(3)},card:{display:"flex"},cardDetails:{flex:1},cardMedia:{width:"120px",height:"180px"},markdown:Object(b.a)({},e.typography.body2,{padding:e.spacing(3,0)}),sidebarAboutBox:{padding:e.spacing(2),backgroundColor:e.palette.grey[200]},sidebarSection:{marginTop:e.spacing(3)},footer:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(6,0)}}})),on=[{title:"Cadastrar",date:"07/Nov",description:"Cadastrar uma nova empresa no sistema.",imageUrl:"/images/addCompany21.png",link:"/empresas/cadastro"},{title:"S\xf3cios",date:"07/Nov",description:"Gerenciar s\xf3cios e altera\xe7\xf5es de contrato social",link:"/empresas/socios",imageUrl:"/images/socios3.png"},{title:"Procuradores",date:"07/Nov",description:"Alterar rela\xe7\xe3o de procuradores e procura\xe7\xf5es",link:"/empresas/procuradores",imageUrl:"/images/procuradores31.png"}],ln=function(){var e=rn();return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,null),r.a.createElement("div",{style:{minHeight:"83vh",height:"auto"}},r.a.createElement("main",null,r.a.createElement(Se.a,{className:e.mainFeaturedPost},r.a.createElement("div",{style:{height:"90px",width:"100%"}},r.a.createElement("img",{src:"/images/empresasBg2.jpg",alt:"Empresas",width:"100%",height:"280px"})),r.a.createElement("div",{className:e.overlay}),r.a.createElement(xe.a,{container:!0},r.a.createElement(xe.a,{item:!0,md:4},r.a.createElement("div",{className:e.mainFeaturedPostContent},r.a.createElement(O.a,{component:"h1",variant:"h4",gutterBottom:!0},"Empresas"),r.a.createElement(O.a,{variant:"body1",paragraph:!0},"Selecione uma das op\xe7\xf5es abaixo."))))),r.a.createElement(xe.a,{container:!0,spacing:4,className:e.cardGrid},on.map((function(a){return r.a.createElement(xe.a,{item:!0,key:a.title,xs:12,md:4},r.a.createElement(l.b,{to:a.link,style:{textDecoration:"none"}},r.a.createElement(an.a,{component:"span"},r.a.createElement(Qt.a,{className:e.card},r.a.createElement("div",{className:e.cardDetails},r.a.createElement(en.a,null,r.a.createElement(O.a,{component:"h2",variant:"h6"},a.title),r.a.createElement("br",null),r.a.createElement(O.a,{variant:"body2",paragraph:!0},a.description),r.a.createElement(O.a,{variant:"body2",color:"primary"},a.title))),r.a.createElement(nn.a,{xsDown:!0},r.a.createElement(tn.a,{className:e.cardMedia,component:"img",src:a.imageUrl,title:a.title}))))))}))))))},cn=t(299),sn=t.n(cn),dn=t(300),un=t.n(dn),mn=t(301),pn=t.n(mn),fn=t(6),gn=t(271),hn=t(249),bn=t(247),vn=t(266),En=t(250),xn=Object(fn.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000",fontWeight:600,fontSize:14},body:{fontSize:14}}}))(bn.a),Sn=Object(fn.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000"},body:{fontSize:13}}}))(bn.a),yn=Object(fn.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}}))(En.a),wn=Object(S.a)((function(e){return{root:{flexGrow:"1",padding:"1%",textAlign:"center"},title:{marginTop:"2%",fontColor:"#000",fontSize:"0.9rem",backgroundColor:"#B2DCEA",textAlign:"center"},input:{textAlign:"center"},paper:{color:e.palette.text.secondary,margin:e.spacing(2),width:"100%",padding:"2% 0 1% 0",height:"auto"},table:{marginBottom:e.spacing(2),overflowX:"auto"}}}));function Cn(e){var a=e.procuracao,t=e.procuradores,n=wn(),o=n.title,i=n.table,l=[];return a.procuradores.forEach((function(e){var a=t.find((function(a){return a.procuradorId===e}));l.push(a)})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:"100%",align:"left"}},r.a.createElement(O.a,{className:o}," Procuradores cadastrados ")),r.a.createElement(gn.a,{className:i},r.a.createElement(vn.a,null,r.a.createElement(yn,null,qt.map((function(e,a){return r.a.createElement(xn,{key:a},e.label)})))),l.map((function(e,a){return e?r.a.createElement(hn.a,{key:a},r.a.createElement(En.a,null,qt.map((function(a,t){return r.a.createElement(Sn,{key:t},e[a.field])})))):null}))))}var kn={display:"flex",justifyContent:"center",width:"100%",alignContent:"center",flexWrap:"wrap",position:"relative"},On={textAlign:"center",alignItems:"flex-start",justify:"space-between",lineHeight:"40px",border:"1px #ccc solid",padding:"0 1%",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px",width:180},jn={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},Dn={verticalAlign:"middle",padding:"0 0% 0 2%"},In=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1),height:"auto",backgroundColor:"#fafafa"},containerList:{display:"flex",flexWrap:"wrap",padding:e.spacing(2),height:"auto"},title:{color:"#000",textAlign:"center",fontSize:"1.1rem"},selector:{width:"380px",fontSize:"0.8rem",margin:"10px 0",textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},paper2:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1),position:"relative"},list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#bbb",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"},addButton:{padding:"5px 10px 5px 8px",height:"40px",margin:"5px",float:"right",fontSize:"0.8rem"},dropBox:{margin:"30px 0 15px 0"},dropBoxItem:{border:"1px solid #ccc",borderRadius:"3%",height:"60px",padding:"10px 15px 0 15px",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#4169E1",backgroundColor:"#fafafa"},dropBoxItem2:{margin:"1% 0",border:"1px solid #ccc",borderRadius:"3%",height:"60px",padding:"0 1% 0 1%",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",color:"black"}}})),Nn=function(e){var a=e.handleInput,t=e.redux,o=e.data,i=e.addProc,l=e.removeProc,c=e.handleFiles,s=e.getFile,d=e.plusOne,u=e.minusOne,m=o.procDisplay,p=o.selectedEmpresa,f=o.procsToAdd,g=o.selectedDocs,h=t.empresas,v=t.procuradores,E=In(),x=E.paper,S=E.container,y=E.title,w=E.dropBox,C=E.dropBoxItem,j=E.dropBoxItem2,D=E.addButton,I=E.paper2,N=E.containerList,A=function(e){var a=o[e.field];return e.pattern&&a?null===a.match(e.pattern):a>e.max||a<e.min},z=function(e){var a=o[e.field];return a>e.max||a<e.min?"Valor inv\xe1lido":a&&null===a.match(e.pattern)?"\u2718":e.pattern&&a&&null!==a.match(e.pattern)?"\u2713":void 0};return r.a.createElement(xe.a,{container:!0,direction:"row",className:S,justify:"flex-start"},r.a.createElement(Pa,{data:o,empresas:h,handleInput:a}),p&&r.a.createElement(Se.a,{className:I},r.a.createElement(O.a,{className:y}," Cadastrar nova procura\xe7\xe3o "),r.a.createElement("h4",{style:{fontWeight:400,fontSize:"0.9em"}},' Se a procura\xe7\xe3o abranger mais de um procurador, clique em "+" para adicionar e anexe apenas 1 vez.'),f.map((function(e,t){return r.a.createElement(xe.a,{item:!0,xs:12,key:t,style:{float:"left"}},qt.map((function(e,i){return r.a.createElement(n.Fragment,{key:i},r.a.createElement(be.a,{name:e.field+t,label:e.label,margin:"normal",className:E.textField,onChange:function(e){return a(e)},type:e.type||"",error:A(e),helperText:z(e),select:e.select||!1,value:o[e.field+t]||"",disabled:e.disabled||!1,InputLabelProps:{className:E.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888"}},inputProps:{style:{background:e.disabled&&o.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#000",width:e.width||150,height:"7px"},value:"".concat(o[e.field+t]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1}),t===f.length-1&&3===i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(sn.a,{onClick:function(){return d()},style:{verticalAlign:"middle",position:"absolute",bottom:"136px",right:t>0?"15px":"35px",color:"#009688",fontSize:30,cursor:"pointer",zIndex:1}}),t>0&&r.a.createElement(un.a,{onClick:function(){return u()},style:{verticalAlign:"middle",position:"absolute",bottom:"136px",right:"45px",color:"red",fontSize:30,cursor:"pointer",zIndex:1}})))})))})),r.a.createElement(xe.a,{container:!0,style:{position:"relative"}},r.a.createElement(xe.a,{item:!0,xs:6},r.a.createElement(ze.a,{onDrop:c},(function(e){var a=e.getRootProps,t=e.getInputProps;return r.a.createElement(xe.a,Object.assign({container:!0,justify:"center",alignItems:"center",className:w,direction:"row"},a()),r.a.createElement("input",t()),m.match("Clique ou")?r.a.createElement(xe.a,{item:!0,xs:6,className:C}," ",m," "):r.a.createElement(xe.a,{item:!0,xs:6,className:j}," ",r.a.createElement(Le.a,null),"  ",m," ",r.a.createElement("br",null)," (clique ou arraste outro arquivo para alterar)"))}))),r.a.createElement(xe.a,{item:!0,xs:6,className:w},r.a.createElement(be.a,{name:"vencimento",label:"Vencimento",margin:"normal",className:E.textField,onChange:function(e){return a(e)},type:"date",helper:"se indeterminado, deixar em branco",value:o.vencimento||"",InputLabelProps:{className:E.textField,shrink:!0,style:{fontSize:"0.8rem",color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:"#fafafa",fontSize:"0.8rem",textAlign:"center",color:"#000",height:"9px"}},variant:"filled"})))),r.a.createElement(xe.a,{container:!0,direction:"row",justify:"flex-start",style:{width:"1200px"}},r.a.createElement(xe.a,{item:!0,xs:9,style:{width:"1000px"}}),r.a.createElement(xe.a,{item:!0,xs:3,style:{align:"right"}},p&&r.a.createElement(k.a,{className:D,size:"small",color:"secondary",variant:"contained",onClick:i},r.a.createElement(ke.a,null),"Cadastrar procura\xe7\xe3o"))),p&&g[0]&&r.a.createElement("h2",{style:{margin:"25px 0 0 15px"}},"Procura\xe7\xf5es cadastradas"),p&&!g[0]&&r.a.createElement(xe.a,{item:!0,xs:12},r.a.createElement(Se.a,{className:x},"Nenhum procurador cadastrado para ",p.razaoSocial)),g.length>0&&g.map((function(e,a){return r.a.createElement(xe.a,{container:!0,key:.01*a,direction:"row",className:N,justify:"center",alignItems:"flex-start"},r.a.createElement(xe.a,{item:!0,xs:12},r.a.createElement(Se.a,{style:{padding:"10px 15px 20px 15px"}},r.a.createElement("p",{className:y},"Procura\xe7\xe3o ",e.vencimento?"com vencimento em "+((t=e.vencimento)?re()(t).format("DD-MM-YYYY"):""):"por prazo indeterminado"),r.a.createElement(Cn,{procuradores:v,procuracao:e}),r.a.createElement("div",{style:kn},r.a.createElement("span",{style:On},r.a.createElement(_e.a,{style:Dn}),r.a.createElement("span",{style:{verticalAlign:"middle"}}," "," Baixar arquivo"),r.a.createElement(Ye.a,{style:jn,onClick:function(){return s(e.procuracaoId)}})),r.a.createElement("span",{style:Object(b.a)({},On,{width:90,backgroundColor:"white",border:0,position:"absolute",right:0})},r.a.createElement(pn.a,{color:"secondary",style:jn,onClick:function(){return l(e)}}),"Apagar")))));var t})))},An=pe(["empresas","procuradores","procuracoes"],function(e){function a(){var e;return Object(G.a)(this,a),(e=Object($.a)(this,Object(Z.a)(a).call(this))).state={empresas:[],razaoSocial:"",toastMsg:"Dados atualizados!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,addedSocios:[0],totalShare:0,filteredProc:[],procDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",procuradores:[],procsToAdd:[1],procuracoesArray:[],selectedDocs:[]},e.handleInput=function(a){var t,n,r,o,i,l,c;return K.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=a.target.name,n=a.target.value,r=Object(h.a)(e.props.redux.procuracoes),o=[],i=[],l=Object(h.a)(e.props.redux.procuradores),e.setState(Object(b.a)({},e.state,Object(g.a)({},t,n))),"razaoSocial"!==t||!Array.isArray(l)){s.next=16;break}if((r=r.filter((function(e){return e.razaoSocial===n})))[0]&&r.forEach((function(e){e.procuradores.forEach((function(e){var a=l.find((function(a){return a.procuradorId===e}));a&&o.push(a)})),i.push(o),o=[]})),e.setState({procuracoesArray:i,selectedDocs:r}),!(c=e.props.redux.empresas.find((function(e){return e.razaoSocial===n})))){s.next=15;break}return s.next=12,K.a.awrap(e.setState({razaoSocial:c.razaoSocial,selectedEmpresa:c}));case 12:n!==c.razaoSocial&&e.setState({selectedEmpresa:void 0}),s.next=16;break;case 15:e.setState({selectedEmpresa:void 0});case 16:case"end":return s.stop()}}))},e.addProc=function(){var a,t,n,r,o,i,l,c,s,d,u,m,p,f,b,v,E,x,S,w,C,k;return K.a.async((function(O){for(;;)switch(O.prev=O.next){case 0:if(a=e.state,t=a.selectedEmpresa,n=a.procFiles,r=a.vencimento,o=Object(h.a)(e.props.redux.procuradores),i=Object(h.a)(e.state.procsToAdd),l=Object(h.a)(e.state.selectedDocs),c=Object(h.a)(e.state.files),s=[],d={},i.forEach((function(a,t){qt.forEach((function(a){Object.assign(d,Object(g.a)({},a.field,e.state[a.field+t]))}));var n=0;Object.values(d).forEach((function(e){e&&(n+=1)})),n>0&&s.push(d),n=0,d={},qt.forEach((function(a){e.setState(Object(g.a)({},a.field+t,""))}))})),m=[],p=[],f=new FormData,s.forEach((function(e){(u=o.filter((function(a){return a.cpfProcurador===e.cpfProcurador}))).length>0&&u[0].hasOwnProperty("procuradorId")?p.push(u[0].procuradorId):m.push(e)})),!(m.length>0)){O.next=11;break}return m=te.a.decamelizeKeys(m),O.next=9,K.a.awrap(ee.a.post("/api/cadProcuradores",{procuradores:m,table:"procurador",tablePK:"procurador_id"}).then((function(e){e.data.forEach((function(e){return p.push(e.procurador_id)}))})));case 9:return O.next=11,K.a.awrap(ee.a.get("/api/procuradores").then((function(a){var t=te.a.camelizeKeys(a.data);e.setState({procuradores:t})})));case 11:return b={delegatario_id:t.delegatarioId,vencimento:r,status:"vigente",procuradores:p},Object.entries(b).forEach((function(e){var a=Object(y.a)(e,2),t=a[0],n=a[1];n&&""!==n||delete b[t]})),O.next=15,K.a.awrap(ee.a.post("/api/cadProcuracao",b).then((function(e){v=e.data[0].procuracao_id})));case 15:if(b.procuracaoId=v,!n){O.next=44;break}for(f.append("fieldName","procuracao"),f.append("empresaId",t.delegatarioId),f.append("procuracaoId",v),f.append("procuradores",p),E=!0,x=!1,S=void 0,O.prev=24,w=n.entries()[Symbol.iterator]();!(E=(C=w.next()).done);E=!0)k=C.value,f.append(k[0],k[1]);O.next=32;break;case 28:O.prev=28,O.t0=O.catch(24),x=!0,S=O.t0;case 32:O.prev=32,O.prev=33,E||null==w.return||w.return();case 35:if(O.prev=35,!x){O.next=38;break}throw S;case 38:return O.finish(35);case 39:return O.finish(32);case 40:return O.next=42,K.a.awrap(ee.a.post("/api/empresaUpload",f).then((function(e){return console.log(e.data)})));case 42:return O.next=44,K.a.awrap(ee.a.get("/api/getOneFile?collection=empresaDocs&id=".concat(v)).then((function(e){e.data[0]&&c.push(e.data[0])})));case 44:l.reverse(),l.push(b),l.reverse(),e.setState({selectedDocs:l,files:c,procDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",procsToAdd:[1],vencimento:"",procFiles:void 0}),e.toast();case 49:case"end":return O.stop()}}),null,null,[[24,28,32,40],[33,,35,39]])},e.removeProc=function(a){var t,n,r,o,i;return K.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.state.files,n=a.procuracaoId,r=t.find((function(e){return Number(e.metadata.procuracaoId)===n})),o=Object(h.a)(e.state.selectedDocs),l.next=4,K.a.awrap(ee.a.delete("/api/delete?table=procuracao&tablePK=procuracao_id&id=".concat(n)).then((function(e){console.log(e.data)})));case 4:r&&r.hasOwnProperty("_id")&&ee.a.get("/api/deleteFile/".concat(r._id)),i=o.indexOf(a),o.splice(i,1),e.setState({selectedDocs:o});case 8:case"end":return l.stop()}}))},e.handleFiles=function(a){var t=new FormData;t.append("procFile",a[0]),e.setState({procFiles:t,procDisplay:a[0].name})},e.getFile=function(a){var t=e.state.files.find((function(e){return Number(e.metadata.procuracaoId)===a}));if(t){var n=t._id,r=t.filename;Ze(n,r,"empresaDocs")}else e.setState({alertType:"filesNotFound",openAlertDialog:!0})},e.plusOne=function(){var a=Object(h.a)(e.state.procsToAdd);a.push(1),e.setState({procsToAdd:a})},e.minusOne=function(){var a=Object(h.a)(e.state.procsToAdd);a.pop(),e.setState({procsToAdd:a})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.escFunction=function(a){27===a.keyCode&&e.state.openDialog&&e.toggleDialog()},e}return Object(X.a)(a,e),Object(J.a)(a,[{key:"componentDidMount",value:function(){var e=this;ee.a.get("/api/getFiles/empresaDocs?fieldName=procuracao").then((function(a){return e.setState({files:a.data})})),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.openAlertDialog,t=e.alertType;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ia,{links:["Empresas","/empresas"],text:"Altera\xe7\xe3o de procuradores"}),r.a.createElement(Nn,{data:this.state,redux:this.props.redux,handleInput:this.handleInput,removeProc:this.removeProc,handleFiles:this.handleFiles,addProc:this.addProc,handleSubmit:this.handleSubmit,plusOne:this.plusOne,minusOne:this.minusOne,getFile:this.getFile}),r.a.createElement(ya,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}),a&&r.a.createElement(Ia,{open:a,close:this.closeAlert,alertType:t,customMessage:this.state.customMsg}))}}]),a}(n.Component)),zn=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1)},title:{color:"#000",fontWeight:500,textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},helperText:{marginTop:"4px"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#bbb",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"},addButton:{marginBottom:"1%",padding:"1% 0"},dropBox:{margin:"1% 0"},dropBoxItem:{margin:"12px 0",border:"1px solid #ccc",borderRadius:"3%",height:"50px",padding:"17px",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#4169E1",backgroundColor:"#fafafa"},dropBoxItem2:{margin:"12px 0",border:"1px solid #ccc",borderRadius:"3%",height:"50px",padding:"0 1% 0 1%",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#00000",backgroundColor:"#fafafa"}}}));function Pn(e){var a=e.empresas,t=e.data,o=e.removeSocio,i=e.handleBlur,l=e.handleInput,c=e.addSocio,s=e.handleFiles,d=e.enableEdit,u=e.handleEdit,m=e.handleSubmit,p=t.dropDisplay,f=t.filteredSocios,g=t.selectedEmpresa,h=zn(),b=h.paper,v=h.container,E=h.title,x=h.iconButton,S=h.dropBox,y=h.dropBoxItem,w=h.dropBoxItem2,C=h.list,O=h.addButton,j=function(e){var a=t[e.field];return e.pattern&&a?null===a.match(e.pattern):a>e.max||a<e.min},D=function(e){var a=t[e.field];return a>e.max||a<e.min?"Valor inv\xe1lido":a&&null===a.match(e.pattern)?"\u2718":e.pattern&&a&&null!==a.match(e.pattern)?"\u2713":" "};return r.a.createElement(xe.a,{container:!0,direction:"row",className:v,justify:"center"},r.a.createElement(Pa,{data:t,empresas:a,handleInput:l,handleBlur:i}),r.a.createElement(xe.a,{item:!0,xs:12},r.a.createElement(Se.a,{className:b},Lt.map((function(e,a){return r.a.createElement(n.Fragment,{key:a},r.a.createElement(be.a,{name:e.field,label:e.label,margin:"normal",className:h.textField,onChange:l,onBlur:i,type:e.type||"",error:j(e),helperText:D(e),FormHelperTextProps:{className:h.helperText},select:e.select||!1,value:t[e.field]||"",disabled:e.disabled,InputLabelProps:{className:h.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:e.disabled&&t.disable?"#fff":"#fafafa",height:"7px"},value:"".concat(t[e.field]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},variant:e.variant||"filled"}))})),r.a.createElement(k.a,{color:"primary",className:O,onClick:c},r.a.createElement(ke.a,null)," Adicionar s\xf3cio"))),g&&0===f.length&&r.a.createElement(xe.a,{item:!0,xs:12},r.a.createElement(Se.a,{className:b},"Nenhum s\xf3cio cadastrado para ",g.razaoSocial)),f.length>0&&g&&r.a.createElement(xe.a,{container:!0,direction:"row",className:v,justify:"center",alignItems:"center"},r.a.createElement(xe.a,{item:!0,xs:12},r.a.createElement(Se.a,{className:b},r.a.createElement("p",{className:E},"S\xf3cios cadastrados"),f.map((function(e,a){return r.a.createElement(xe.a,{key:a},Lt.map((function(a,t){return r.a.createElement(n.Fragment,{key:t+1e3},r.a.createElement(be.a,{value:e[a.field]||"",name:a.field,label:a.label,className:C,disabled:"cpfSocio"===a.field||!e.edit,onChange:u,InputLabelProps:{shrink:!0,style:{fontWeight:600}},inputProps:{style:{fontSize:"0.8rem"}}}))})),r.a.createElement(k.a,{component:"span",className:x,title:"editar",onClick:function(){return d(a)}},r.a.createElement(nt.a,null)),r.a.createElement(k.a,{className:x,color:"secondary",title:"Remover",onClick:function(){return o(a)}},r.a.createElement(ot.a,null)))}))),r.a.createElement(ze.a,{onDrop:s},(function(e){var a=e.getRootProps,t=e.getInputProps;return r.a.createElement(xe.a,Object.assign({container:!0,justify:"center",alignItems:"center",className:S,direction:"row"},a()),r.a.createElement("input",t()),p.match("Clique ou")?r.a.createElement(xe.a,{item:!0,xs:6,className:y}," ",p," "):r.a.createElement(xe.a,{item:!0,xs:6,className:w}," ",r.a.createElement(Le.a,null),"  ",p," ",r.a.createElement("br",null)," (clique ou arraste outro arquivo para alterar)"))})),r.a.createElement(xe.a,{container:!0,direction:"row",justify:"flex-end",style:{width:"1200px"}},r.a.createElement(xe.a,{item:!0,xs:10,style:{width:"1000px"}}),r.a.createElement(xe.a,{item:!0,xs:1,style:{align:"right"}},r.a.createElement(k.a,{size:"small",color:"primary",variant:"contained",style:{margin:"0px 0 10px 0"},onClick:function(){return m()}},"Salvar ",r.a.createElement("span",null,"\xa0\xa0 ")," ",r.a.createElement(Va.a,null)))))))}var Fn=pe(["empresas","socios"],function(e){function a(){var e,t;Object(G.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object($.a)(this,(e=Object(Z.a)(a)).call.apply(e,[this].concat(r)))).state={razaoSocial:"",toastMsg:"Dados atualizados!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,dialogTitle:"",addedSocios:[0],totalShare:0,filteredSocios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",showFiles:!1},t.handleInput=function(e){var a,n,r,o,i,l,c;return K.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=t.props.redux,n=a.empresas,r=a.socios,o=e.target.name,i=e.target.value,t.setState(Object(b.a)({},t.state,Object(g.a)({},o,i))),"razaoSocial"!==o){s.next=13;break}if(l=Object(h.a)(r.filter((function(e){return e.razaoSocial===i}))),c=n.find((function(e){return e.razaoSocial===i})),l.length>0?t.setState({filteredSocios:l,selectedEmpresa:c}):t.setState({filteredSocios:[]}),!c){s.next=12;break}return s.next=9,K.a.awrap(t.setState({razaoSocial:c.razaoSocial,selectedEmpresa:c}));case 9:i!==c.razaoSocial&&t.setState({selectedEmpresa:void 0}),s.next=13;break;case 12:t.setState({selectedEmpresa:void 0});case 13:case"end":return s.stop()}}))},t.handleBlur=function(e){var a,n,r,o;return K.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:a=t.state.filteredSocios,n=e.target.name,r=e.target.value,i.t0=n,i.next="cpfSocio"===i.t0?6:"share"===i.t0?9:26;break;case 6:return a.find((function(e){return e.cpfSocio===r}))&&(t.setState({alertType:"alreadyExists",openAlertDialog:!0}),t.setState({cpfSocio:""})),i.abrupt("break",27);case 9:if(!r){i.next=25;break}if(!((r=r.replace(",","."))>100)){i.next=16;break}return i.next=14,K.a.awrap(t.setState({share:""}));case 14:r="",t.setState({alertType:"numberNotValid",openAlertDialog:!0});case 16:if("0"===r||"00"===r||Number(r)){i.next=22;break}return i.next=19,K.a.awrap(t.setState({share:""}));case 19:t.setState({alertType:"numberNotValid",openAlertDialog:!0}),i.next=25;break;case 22:o=a.map((function(e){return Number(e.share)})).reduce((function(e,a){return e+a})),o+=Number(r),t.setState({totalShare:o,share:r});case 25:case 26:return i.abrupt("break",27);case 27:case"end":return i.stop()}}))},t.addSocio=function(){var e,a;return K.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=t.state.filteredSocios,a={},!(t.state.totalShare>100)){n.next=4;break}return t.setState({openAlertDialog:!0,alertType:"overShared"}),n.abrupt("return",null);case 4:return Lt.forEach((function(e){Object.assign(a,Object(g.a)({},e.field,t.state[e.field]))})),e.unshift(a),n.next=8,K.a.awrap(t.setState({filteredSocios:e}));case 8:Lt.forEach((function(e){t.setState(Object(g.a)({},e.field,""))})),document.getElementsByName("nomeSocio")[0].focus();case 10:case"end":return n.stop()}}))},t.removeSocio=function(e){var a,n,r;return K.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=Object(h.a)(t.state.filteredSocios),n=a[e].socioId,r=t.props.redux.socios,!r.find((function(e){return e.socioId===n}))){o.next=5;break}return o.next=5,K.a.awrap(ee.a.delete("/api/delete?table=socios&tablePK=socio_id&id=".concat(n)).catch((function(e){return console.log(e)})));case 5:a.splice(e,1),t.setState({filteredSocios:a});case 7:case"end":return o.stop()}}))},t.enableEdit=function(e){var a=t.state.filteredSocios;!0===a[e].edit?a[e].edit=!1:(a.forEach((function(e){return e.edit=!1})),a[e].edit=!0),t.setState({filteredSocios:a})},t.handleEdit=function(e){var a=e.target.name,n=e.target.value;"share"===a&&(n=n.replace(",","."));var r=t.state.filteredSocios.filter((function(e){return!0===e.edit}))[0],o=t.state.filteredSocios.indexOf(r);r[a]=n;var i=t.state.filteredSocios;i[o]=r,t.setState({filteredSocios:i})},t.handleSubmit=function(){var e,a,n,r,o,i,l,c,s,d,u,m,p,f,h,b,v,E,x,S,y,w;return K.a.async((function(C){for(;;)switch(C.prev=C.next){case 0:if(e=t.state,a=e.selectedEmpresa,n=e.contratoSocial,r=e.filteredSocios,o=t.props.redux.socios,!(r.map((function(e){return Number(e.share)})).reduce((function(e,a){return e+a}))>100)){C.next=5;break}return t.setState({openAlertDialog:!0,alertType:"overShared"}),C.abrupt("return",null);case 5:if(i=[],l=[],c=new FormData,(s=Lt.map((function(e){return te.a.decamelize(e.field)}))).splice(1,1),r.forEach((function(e){var t=e,n=(t.razaoSocial,t.createdAt,t.edit,Object(_.a)(t,["razaoSocial","createdAt","edit"]));if((e=n).delegatarioId=a.delegatarioId,e.hasOwnProperty("socioId"))i.push(e),delete i.socioId;else{var r=o.find((function(a){return a.cpfSocio===e.cpfSocio}));r?(e.socioId=r.socioId,i.push(e)):l.push(e)}})),d="socios",u="socio_id",m=[],p={},f=te.a.camelizeKeys(t.state.originals),i.forEach((function(e){f.forEach((function(a){e.socioId===a.socioId&&(Object.keys(e).forEach((function(t){e[t]===a[t]&&"socioId"!==t||Object.assign(p,Object(g.a)({},t,e[t]))})),Object.keys(p).length>1&&m.push(p),p={})}))})),i=te.a.decamelizeKeys(m),l=te.a.decamelizeKeys(l),h=r.filter((function(e){return void 0!==e.socioId})).map((function(e){return e.socioId})),C.prev=15,!(i.length>0)){C.next=19;break}return C.next=19,K.a.awrap(ee.a.put("/api/editSocios",{requestArray:i,table:d,tablePK:u,keys:s}).then((function(e){return console.log(e.data)})));case 19:if(!(l.length>0)){C.next=22;break}return C.next=22,K.a.awrap(ee.a.post("/api/cadSocios",{socios:l,table:d,tablePK:u}).then((function(e){return e.data.forEach((function(e){return h.push(e.socio_id)}))})));case 22:if(!n){C.next=46;break}for(c.append("empresaId",a.delegatarioId),c.append("socios",h),b=!0,v=!1,E=void 0,C.prev=28,x=n.entries()[Symbol.iterator]();!(b=(S=x.next()).done);b=!0)y=S.value,c.append(y[0],y[1]);C.next=36;break;case 32:C.prev=32,C.t0=C.catch(28),v=!0,E=C.t0;case 36:C.prev=36,C.prev=37,b||null==x.return||x.return();case 39:if(C.prev=39,!v){C.next=42;break}throw E;case 42:return C.finish(39);case 43:return C.finish(36);case 44:return C.next=46,K.a.awrap(ee.a.post("/api/empresaUpload",c).then((function(e){return console.log(e.data)})));case 46:C.next=51;break;case 48:C.prev=48,C.t1=C.catch(15),console.log(C.t1);case 51:i=[],m=[],p={},l=[],t.toast(),w=te.a.decamelizeKeys(t.props.redux.socios),t.setState({razaoSocial:"",selectedEmpresa:void 0,filteredSocios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",contratoSocial:void 0,originals:w});case 58:case"end":return C.stop()}}),null,null,[[15,48],[28,32,36,44],[37,,39,43]])},t.handleFiles=function(e){var a=new FormData;a.append("contratoSocial",e[0]),t.setState({dropDisplay:e[0].name,contratoSocial:a})},t.toggleDialog=function(){return t.setState({openDialog:!t.state.openDialog})},t.closeAlert=function(){return t.setState({openAlertDialog:!t.state.openAlertDialog})},t.toast=function(){return t.setState({confirmToast:!t.state.confirmToast})},t}return Object(X.a)(a,e),Object(J.a)(a,[{key:"componentDidMount",value:function(){var e=te.a.decamelizeKeys(this.props.redux.socios);this.setState({originals:e})}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.openAlertDialog,t=e.alertType,n=this.props.redux.empresas;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ia,{links:["Empresas","/empresas"],text:"Altera\xe7\xe3o do quadro societ\xe1rio"}),r.a.createElement(Pn,{data:this.state,empresas:n,handleInput:this.handleInput,handleBlur:this.handleBlur,addSocio:this.addSocio,removeSocio:this.removeSocio,enableEdit:this.enableEdit,handleEdit:this.handleEdit,handleFiles:this.handleFiles,handleSubmit:this.handleSubmit}),r.a.createElement(ya,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}),a&&r.a.createElement(Ia,{open:a,close:this.closeAlert,alertType:t}))}}]),a}(n.Component)),Tn=t(137),Ln=t.n(Tn),qn={title:{text:"Ve\xedculos por ano de fabrica\xe7\xe3o",align:"center",marginTop:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:500,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}},legend:{show:!1},chart:{id:"veiculos_ano_fabricacao"},xaxis:{labels:{style:{fontSize:"9px",fontWeight:400,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}}},dataLabels:{enabled:!1},plotOptions:{bar:{horizontal:!1}}},Mn={title:{text:"Percentual de ve\xedculos por ano de fabrica\xe7\xe3o",align:"center",marginTop:10,marginBottom:20,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"13px",fontWeight:500,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}},plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0,fontSize:"20px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif ",fontWeight:600,color:"#373d3f",offsetY:-10},value:{show:!0,fontSize:"15px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,color:"#373d3f",offsetY:16,formatter:function(e){return e}},total:{show:!0,showAlways:!0,label:"Total:",fontSize:"20px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:600,color:"#373d3f"}}}}},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},Bn=(t(478),function(e){var a=e.empresas,t=e.razaoSocial,n=e.selectedEmpresa,o=e.selectedVehicles,i=e.labels,l=e.values,c=e.tableLabels,s=e.tableData,d=e.mediaIdades,u=e.moda,m=e.handleInput,p=e.segurosVencidos,f=e.segurosVigentes,g=e.oldVehicles,h=e.veiculosNovos;return r.a.createElement("main",{className:"relatorios"},r.a.createElement(Pa,{empresas:a,data:{razaoSocial:t},handleInput:m}),o&&0!==o.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{width:"100%",textAlign:"center"}},n?n.razaoSocial:"Exibindo todos os ve\xedculos"," - M\xe9dia de idade da frota: ",d," anos. Moda do ano de fabrica\xe7\xe3o: ",u,"."),r.a.createElement(Se.a,null,r.a.createElement("section",{className:"rowContainer"},r.a.createElement(Ln.a,{options:Object(b.a)({},qn,{xaxis:Object(b.a)({},qn.xaxis,{categories:i})}),series:[{name:"Ve\xedculos",data:l}],type:"bar",width:"600"}),r.a.createElement(Ln.a,{options:Object(b.a)({},Mn,{labels:i,colors:["#ff7c43","#ffa600","#FF9800","#f95d6a","#f44336","#2E93fA","#3333ff","#66DA26","#669999","#E91E63","#d45087","#a05195","#665191","#2f4b7c","#003f5c"]}),series:l,type:"donut",width:"480"}))),r.a.createElement(Se.a,null,r.a.createElement("section",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",style:{color:"#fff",backgroundColor:"rgb(84, 110, 122, 0.7)"},colSpan:c.length},"Ve\xedculos por ano - ",n?n.razaoSocial:"Exibindo todos os ve\xedculos","  ")),r.a.createElement("tr",null,c.map((function(e,a){return r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,s.map((function(e,a){return r.a.createElement("tr",{key:a},e.map((function(e,a){return r.a.createElement("td",{className:"review relatorioTD",key:a},e)})))})))))),r.a.createElement("section",{className:"rowContainer"},r.a.createElement(Ln.a,{options:{title:Object(b.a)({},Mn.title,{text:"Seguros vencidos: ".concat(p," / vigentes: ").concat(f)}),labels:["Seguros vencidos","Seguros vigentes"],colors:["#FF9800","#3333ff"]},series:[Number(p),Number(f)],type:"pie",width:"400"}),r.a.createElement(Ln.a,{options:{title:Object(b.a)({},Mn.title,{text:"Idade superior a 15 anos: ".concat(g," / inferior 15 anos: ").concat(h)}),labels:["Ve\xedculos com mais de 15 anos","Ve\xedculos com menos de 15 anos"],colors:["#f44336","#2E93fA"]},series:[Number(g),Number(h)],type:"pie",width:"420",height:"220"}))):r.a.createElement("p",null,"Nenhum ve\xedculo cadastrado para ",n.razaoSocial))}),Vn=function(e){var a=Object(h.a)(e);if(a.shift(),a[0])return a.reduce((function(e,a){return e+a}))},Rn=function(e){return e.filter((function(e){return!e.vencimento||re()(e.vencimento).isValid()&&re()(e.vencimento).isBefore(re()())&&e.veiculoId&&e})).length},Un=pe(["veiculos","empresas"],(function(e){var a,t,o=e.redux,i=o.veiculos,l=o.empresas,c=Object(n.useState)(""),s=Object(y.a)(c,2),d=s[0],u=s[1],m=Object(n.useState)(void 0),p=Object(y.a)(m,2),f=p[0],g=p[1],b=Object(n.useState)(""),v=Object(y.a)(b,2),E=v[0],x=v[1],S=Object(n.useState)(""),w=Object(y.a)(S,2),C=w[0],k=w[1],O=Object(n.useState)(""),j=Object(y.a)(O,2),D=j[0],I=j[1];f&&""!==f?(a=f.delegatarioId,t=i.filter((function(e){return e.delegatarioId===a}))):t=i;var N=t.map((function(e){return e.anoCarroceria})).filter((function(e){return null!==e})).sort(),A=N.reduce((function(e,a){return e+a/N.length}),0);A=((new Date).getFullYear()-A).toFixed(2);var z={};N.forEach((function(e){void 0===z[e]&&(z[e]=0),z[e]+=1}));var P=Object.keys(z),F=Object(h.a)(P.sort((function(e,a){return e-a}))),T=Object.values(z),L={},q=[],M={};F.forEach((function(e){t.forEach((function(a){var t;a.anoCarroceria&&a.anoCarroceria.toString()===e&&(q.push({veiculoId:a.veiculoId,poltronas:a.poltronas}),L[e]?(t=L[e]).push.apply(t,Object(h.a)(q)):L[e]=q,q=[])})),M[e]=L[e],L={}}));var B=0,V=["Capacidade Total"],R=[],U=["Capacidade M\xe9dia"];Object.keys(M).forEach((function(e){M[e].forEach((function(e){B+=e.poltronas})),V.push(B),U.push((B/M[e].length).toFixed(2));var a=V.reduce((function(e,a){return e+a}),0);R.push(a),B=0})),V.push(Vn(V));var Y=["Ano"],W=["N\xba de Ve\xedculos"];Y.push.apply(Y,Object(h.a)(F).concat(["Total"])),W.push.apply(W,Object(h.a)(T)),W.push(Vn(W)),U.push(function(e){var a=e.map((function(e){return Number(e)}));if(a.shift(),a[0])return(a.reduce((function(e,a){return e+a}))/a.length).toFixed(2)}(U));var _=[W,U,V],H=P.sort((function(e,a){return z[e]-z[a]}));H=H[H.length-1];var K=(new Date).getFullYear();Object(n.useEffect)((function(){var e=(new Date).getFullYear(),a=Rn(t),n=t.filter((function(a){return e-a.anoCarroceria>14&&null!==a.anoCarroceria})).length;x(a),k(t.length-a),I(n)}),[t]);var G,J,$,Z=[];return d.length>2&&f?(Z=Rn(t),J=t.filter((function(e){return K-e.anoCarroceria>14&&null!==e.anoCarroceria})).length,G=t.length-Z,$=t.length-J):(Z=E,G=C,J=D,$=t.length-D),r.a.createElement(Bn,{empresas:l,razaoSocial:d,labels:F,values:T,tableLabels:Y,tableData:_,selectedEmpresa:f,selectedVehicles:t,mediaIdades:A,moda:H,handleInput:function(e){var a,t=e.target.value;u(t),t.length>2?(a=l.find((function(e){return e.razaoSocial===t})))&&g(a):g("")},segurosVencidos:Z,segurosVigentes:G,oldVehicles:J,veiculosNovos:$})})),Yn=[{field:"id",label:"N\xfamero do laudo",maxLength:30},{field:"validade",label:"Data de validade",type:"date"},{field:"empresaLaudo",label:"Empresa emissora",select:!0}],Wn=function(e){var a=e.veiculoId,t=e.city,n=e.placa,o=e.onClick,i=e.style;return r.a.createElement("div",{id:a,onClick:o,style:i,className:"placaContainer"},r.a.createElement("div",{className:"placaCity"},t),r.a.createElement("div",{className:"placaCode"},n))};function _n(e){var a=e.table,t=e.length,n=e.title,o=e.style,i=a.tableHeaders,l=a.laudosArray,c=a.laudoDocs;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",style:o,colSpan:t},n)),r.a.createElement("tr",null,i.map((function(e,a){return r.a.createElement("th",{key:a,style:o},e)})))),r.a.createElement("tbody",null,l.map((function(e,a){return r.a.createElement("tr",{key:a},e.map((function(e,a){return r.a.createElement("td",{key:a,style:o,className:"link"===e.type&&e.laudoDocId?"link2":"review",onClick:function(){return"laudoDoc"===e.field&&e.laudoDocId?function(e){var a=c.find((function(a){return a.id===e}));e&&a&&Ze(a.id,a.filename,"vehicleDocs",a.metadata.fieldName)}(e.laudoDocId):null}},"date"===e.type?(t=e.value,re()(t,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?re()(t,re.a.ISO_8601,!0).format("DD/MM/YYYY"):t):e.value);var t})))}))))}var Hn=t(154),Kn=Object(fn.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return r.a.createElement(Hn.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"}},e))})),Gn=function(e){var a=e.anchorEl,t=e.handleClose,n=e.menuOptions;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Kn,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:t},n.map((function(e,a){var t=e.title,n=e.onClick;return r.a.createElement(ge.a,{key:a,onClick:n},t)}))))},Jn=t(181),$n=t.n(Jn),Zn=t(302),Xn=t.n(Zn),Qn=r.a.memo((function(e){var a=e.empresas,t=e.razaoSocial,n=e.selectedEmpresa,o=e.filteredVehicles,i=e.selectedVehicle,l=e.stateInputs,c=e.selectOptions,s=e.table,d=e.anchorEl,u=e.laudoDoc,m=e.dropDisplay,p=e.functions,f=p.handleInput,g=p.clickOnPlate,h=p.showDetails,v=p.handleFiles,E=p.handleSubmit,x=p.closeMenu,S=p.clear,y=function(e){if(!(e&&e[0]&&e[0].validade))return{backgroundColor:"rgb(136, 13, 13)"};var a=e[0].validade;return re()(a,re.a.ISO_8601).isValid()&&re()(a).isAfter(re()().toDate())?{backgroundColor:"rgb(13, 136, 13)"}:re()(a,re.a.ISO_8601).isValid()&&re()(a).isBefore(re()().toDate())?{backgroundColor:"rgb(197, 128, 0)"}:void 0};return r.a.createElement("div",null,r.a.createElement(ia,{links:["Ve\xedculos","/veiculos"],text:"Laudos"}),r.a.createElement(Pa,{empresas:a,data:{razaoSocial:t},handleInput:f}),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"flex",style:{marginBottom:"15px"}},i?r.a.createElement(Wn,{veiculoId:i.veiculoId,onClick:g,style:Object(b.a)({},y(i.laudos),{marginLeft:0}),city:n.cidade,placa:i.placa}):r.a.createElement("h5",null," Selecione o ve\xedculo para atualizar consultar ou inserir o laudo de seguran\xe7a veicular. "),r.a.createElement("div",null,r.a.createElement(be.a,{inputProps:{name:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Filtrar",onChange:f}),r.a.createElement(N.a,{style:{marginTop:"18px"}}))),i&&r.a.createElement("main",{className:"paper"},r.a.createElement("br",null),r.a.createElement("h3",{style:{paddingLeft:"15px",marginTop:"-10px"}},"Para inserir novo laudo, informe o n\xfamero, a data de vencimento, a empresa que emitiu e anexe o documento referente ao laudo."),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Ee,{form:Yn,data:l,handleInput:f,selectOptions:c}),r.a.createElement(qe,{name:"laudoDoc",formData:u,dropDisplay:m,handleFiles:v,single:!0,style:{width:"400px",margin:"15px auto 0 auto"}}),r.a.createElement(k.a,{size:"small",color:"primary",className:"saveButton",variant:"contained",onClick:function(){return E()},disabled:!u},"Salvar")),r.a.createElement("section",null,r.a.createElement("h4",null,i?null:r.a.createElement("div",{className:"flex"},r.a.createElement("div",null,"Exibindo ".concat(o.length," ve\xedculos com mais de 15 anos.")),r.a.createElement("div",{className:"flex placasCaption",style:{fontSize:"0.8rem"}},r.a.createElement("span",null,r.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(13, 136, 13)"}},r.a.createElement($n.a,null))," Laudo vigente"),r.a.createElement("span",null,r.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(197, 128, 0)"}},r.a.createElement($n.a,null))," Laudo vencido                                            "),r.a.createElement("span",null,r.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(136, 13, 13)"}},r.a.createElement($n.a,null))," Nenhum Laudo cadastrado"))))),!i&&r.a.createElement("section",{className:"center flex paper"},o.map((function(e,a){return r.a.createElement(Wn,{key:a,veiculoId:e.veiculoId,onClick:g,style:y(e.laudos),city:n.cidade,placa:e.placa})}))),r.a.createElement(Gn,{anchorEl:d,handleClose:x,menuOptions:[{title:"Detalhes",onClick:h}]})),i&&i.laudos&&r.a.createElement(r.a.Fragment,null,"object"===typeof s?r.a.createElement("div",{className:"paper",style:{marginTop:"52px",width:"100%",padding:"0",borderRadius:"5px",overflow:"hidden"}},r.a.createElement(_n,{length:s.tableHeaders.length,title:"Laudos vinculados ao ve\xedculo placa ".concat(i.placa),table:s,style:{textAlign:"center",padding:"8px 0"}})):r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,s)),r.a.createElement("div",{className:"voltarDiv",onClick:S},r.a.createElement(Xn.a,{size:"small"}),r.a.createElement("span",{style:{padding:"2px 0 0 2px",marginLeft:"2px",fontSize:"1rem"}},"Voltar"))))})),er=[{field:"empresaLaudo",title:"Empresa Emissora"},{field:"id",title:"N\xfamero do Laudo"},{field:"createdAt",title:"Registro no sistema",type:"date"},{field:"validade",title:"Data de validade",type:"date"},{field:"laudoDoc",title:"Laudo",type:"link"}],ar=pe(["veiculos","empresas","empresasLaudo","laudos","getFiles/vehicleDocs"],(function(e){var a=e.redux,t=a.veiculos,o=a.empresas,i=a.empresasLaudo,l=a.laudos,c=a.vehicleDocs,s=Object.freeze({dropDisplay:"Clique ou arraste o arquivo para anexar o laudo",stateInputs:{id:void 0,validade:"",empresaLaudo:""}}),d=Object(n.useState)(""),u=Object(y.a)(d,2),m=u[0],p=u[1],f=Object(n.useState)(),v=Object(y.a)(f,2),E=v[0],x=v[1],S=Object(n.useState)(),w=Object(y.a)(S,2),C=w[0],k=w[1],O=Object(n.useState)([]),j=Object(y.a)(O,2),D=j[0],I=j[1],N=Object(n.useState)(!1),A=Object(y.a)(N,2),z=A[0],P=A[1],F=Object(n.useState)(),T=Object(y.a)(F,2),L=T[0],q=T[1],M=Object(n.useState)(null),B=Object(y.a)(M,2),V=B[0],R=B[1],U=Object(n.useState)(s.dropDisplay),Y=Object(y.a)(U,2),W=Y[0],H=Y[1],G=Object(n.useState)(),J=Object(y.a)(G,2),$=J[0],Z=J[1],X=Object(n.useState)(!1),Q=Object(y.a)(X,2),ae=Q[0],te=Q[1],ne=Object(n.useState)({open:!1,type:"inputError",msg:""}),re=Object(y.a)(ne,2),oe=re[0],ie=re[1],le=Object(n.useState)(Object(b.a)({},s.stateInputs)),ce=Object(y.a)(le,2),se=ce[0],de=ce[1],ue=Object(n.useState)(),me=Object(y.a)(ue,2),pe=me[0],ge=me[1];Object(n.useEffect)((function(){document.addEventListener("keydown",(function(e){27===e.keyCode&&P(!1),R(null)}))}),[]),Object(n.useEffect)((function(){!function(){var e,a,n,r,o,i;K.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(!E||""===E){c.next=17;break}return e=(new Date).getFullYear(),a=t.filter((function(e){return e.empresa===E.razaoSocial})),n=a.filter((function(a){return e-a.anoCarroceria>14&&null!==a.anoCarroceria})).sort((function(e,a){return e.placa.localeCompare(a.placa)})),r=[],o=[],n.forEach((function(e){l.forEach((function(a){e.veiculoId===a.veiculoId&&o.push(a)})),o.sort((function(e,a){var t=new Date(e.validade);return new Date(a.validade)-t})),r.push(Object(b.a)({},e,{laudos:o})),o=[]})),c.next=6,K.a.awrap(k(r));case 6:return c.next=8,K.a.awrap(I(r));case 8:if(!(L&&(null===r||void 0===r?void 0:r.length)>0)){c.next=15;break}if((null===(i=r.find((function(e){return e.veiculoId===L.veiculoId})))||void 0===i?void 0:i.laudos.length)===(null===L||void 0===L?void 0:L.laudos.length)){c.next=14;break}q(i),c.next=15;break;case 14:return c.abrupt("return");case 15:c.next=20;break;case 17:k(),I([]),x();case 20:case"end":return c.stop()}}))}()}),[E,t,l,L]);var he=Object(n.useCallback)((function(e){var a=e.target.name,t=e.target.value;if("razaoSocial"!==a){if("placa"===a&&C[0]){if("string"===typeof t&&(t=t.toLocaleUpperCase()),t&&""!==t){var n,r=C.filter((function(e){return e.placa.match(t)}));return 1===r.length&&(n=r[0]),I(r),void q(n)}I(C)}de(Object(b.a)({},se,Object(g.a)({},a,t)))}else{p(t);var i=o.find((function(e){return e.razaoSocial===t}));x(i)}}),[p,o,C,se]);Object(n.useEffect)((function(){if(L)if(L.laudos&&L.laudos[0]){var e=L.laudos,a=c.filter((function(e){return"laudoDoc"===e.metadata.fieldName})),t=[],n=[],r=[],o=Object(h.a)(er);e.forEach((function(e){o.forEach((function(t){var o,i=a.find((function(a){return a.metadata.laudoId===e.id}));i&&(o=i.id),n.includes(t.title)||n.push(t.title);t.title;var l=Object(_.a)(t,["title"]);"laudoDoc"===t.field?r.push(Object(b.a)({},l,{value:e[t.field],laudoDocId:o})):r.push(Object(b.a)({},l,{value:e[t.field]}))})),r[4].laudoDocId?r[4].value="Clique para visualizar o laudo":r[4].value="Nenhum arquivo encontrado",t.push(r),r=[]})),o=Object(h.a)(er),ge({tableHeaders:n,laudosArray:t,laudoDocs:a})}else ge("Nenhum laudo cadastrado para o ve\xedculo placa ".concat(L.placa,"."))}),[L,l,c]);var be=function(){L?(P(!z),R(null)):(P(!1),q(void 0),R(null))},ve=function(){return te(!ae)},Ee=function(e){e&&de(Object(b.a)({},s.stateInputs)),Z(),H(s.dropDisplay)},xe=e.redux.empresasLaudo.map((function(e){return e.empresa}));return r.a.createElement(n.Fragment,null,r.a.createElement(Qn,{empresas:o,razaoSocial:m,selectedEmpresa:E,filteredVehicles:D,selectedVehicle:L,anchorEl:V,stateInputs:se,selectOptions:xe,dropDisplay:W,laudoDoc:$,table:pe,functions:{handleInput:he,clickOnPlate:function(e){var a,t;return K.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:L?(e.persist(),R(e.target)):((a=e.currentTarget.id)&&(t=C.find((function(e){return e.veiculoId.toString()===a}))),q(t),I([t]));case 1:case"end":return n.stop()}}))},showDetails:be,handleFiles:function(e,a){if(e&&e[0]){var t=new FormData;t.append("fieldName","laudoDoc"),t.append("laudoId",se.id),t.append("veiculoId",L.veiculoId),t.append(a,e[0]),Z(t),H(e[0].name)}},handleSubmit:function(){var e,a,t,n,r,o;return K.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=se.empresaLaudo,a=Object(_.a)(se,["empresaLaudo"]),t=fe()||[],!(n=l.find((function(e){return e.id===se.id})))){c.next=6;break}return ie(Object(b.a)({},oe,{open:!0,msg:"O laudo informado j\xe1 existe no sistema. Laudo n\xba "+n.id.toString()})),Ee(),c.abrupt("return");case 6:if(Object.keys(se).forEach((function(e){if("validade"!==e&&(!se[e]||""===se[e])){var a=Yn.find((function(a){return a.field===e})).label;t.push(a)}})),!t[0]){c.next=11;break}return ie(Object(b.a)({},oe,{open:!0,msg:"Favor verificar o preenchimento dos seguintes campos: "+t.toString()})),Ee(),c.abrupt("return");case 11:return(r=i.find((function(a){return a.empresa===e})))&&(a.empresa_id=r.id),a.veiculo_id=L.veiculoId,o={table:"laudos",requestElement:a},c.next=17,K.a.awrap(ee.a.post("/api/addElement",o).then((function(){return ve()})).catch((function(e){return console.log(e)})));case 17:if(!$){c.next=20;break}return c.next=20,K.a.awrap(ee.a.post("/api/vehicleUpload",$));case 20:Ee("Clear all Of It!!!");case 21:case"end":return c.stop()}}))},closeMenu:function(){return R(null)},clear:function(){document.querySelector('[name = "placa"]').value="",I(C),q()}}}),z&&r.a.createElement(Mt,{close:be,data:Object(b.a)({},L,{tableData:""}),tab:3,title:"Ve\xedculo",header:"- informa\xe7\xf5es"}),oe.open&&r.a.createElement(Ia,{open:oe.open,close:function(){return ie(Object(b.a)({},oe,{open:!oe.open}))},alertType:oe.type,customMessage:oe.msg}),r.a.createElement(ya,{open:ae,close:ve,msg:"Laudo inserido com sucesso."}))}));function tr(){return r.a.createElement("div",{style:{height:"60vh",width:"100%",margin:"15% 35%"}},r.a.createElement("img",{src:"/images/underConstruction.png",alt:"P\xe1gina em constru\xe7\xe3o"}))}var nr=function(){return r.a.createElement(A.c,null,r.a.createElement(A.a,{exact:!0,path:"/",component:R}),r.a.createElement(A.a,{path:"/veiculos",exact:!0,component:Y}),r.a.createElement(A.a,{path:"/veiculos/cadastro",exact:!0,component:Na}),r.a.createElement(A.a,{path:"/veiculos/altDados",exact:!0,component:qa}),r.a.createElement(A.a,{path:"/veiculos/altSeguro",exact:!0,component:Ha}),r.a.createElement(A.a,{path:"/veiculos/laudos",exact:!0,component:ar}),r.a.createElement(A.a,{path:"/veiculos/baixaVeiculo",exact:!0,component:at}),r.a.createElement(A.a,{path:"/veiculos/config",exact:!0,component:ct}),r.a.createElement(A.a,{path:"/consultas",component:_t}),r.a.createElement(A.a,{path:"/empresas",exact:!0,component:ln}),r.a.createElement(A.a,{path:"/empresas/cadastro",component:Xt}),r.a.createElement(A.a,{path:"/empresas/socios",component:Fn}),r.a.createElement(A.a,{path:"/empresas/procuradores",component:An}),r.a.createElement(A.a,{path:"/relatorios",component:Un}),r.a.createElement(A.a,{path:"/crv",component:jt}),r.a.createElement(A.a,{path:"/faleConosco",component:tr}))};var rr=function(){var e=Object(S.a)((function(e){return{root:{backgroundColor:"#fbfbfb"}}}))().root,a=Object(c.a)(u.a,p.a,f.a)(c.e);return r.a.createElement(s.a,{store:a(x)},r.a.createElement("div",{className:e},r.a.createElement(B.a,{maxWidth:"lg",style:{minHeight:"100vh"}},r.a.createElement(l.a,null,r.a.createElement(F,null),r.a.createElement(nr,null)),r.a.createElement(T,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(rr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[318,1,2]]]);
//# sourceMappingURL=main.b444bd5f.chunk.js.map