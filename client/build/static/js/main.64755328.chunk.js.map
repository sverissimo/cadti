{"version":3,"sources":["Store/dataReducer.js","rootReducer.js","Layouts/Header.jsx","Store/StoreHOC.jsx","Layouts/Footer.jsx","Layouts/TabMenu.jsx","Utils/idsToString.js","Store/dataActions.js","Layouts/Loading.jsx","Forms/configVehicleForm.js","HomeTemplate.jsx","Veiculos/VeiculosHome.jsx","Utils/setDemand.js","Utils/handleFiles.js","Utils/checkInputErrors.js","Solicitacoes/logRoutesConfig.js","Utils/logGenerator.js","Utils/autoComplete.jsx","Reusable Components/SelectEmpresa.jsx","Reusable Components/TextInput.jsx","Reusable Components/FormSubtiltle.jsx","Forms/vistoriaForm.js","Forms/cadVehicleForm.js","Reusable Components/ClosePopUpButton.jsx","Veiculos/AddEquipa.jsx","Veiculos/CadVeiculoTemplate.jsx","Reusable Components/RemoveFileButton.jsx","Reusable Components/DragAndDrop.jsx","Forms/cadVehicleFiles.js","Forms/altDadosFiles.js","Veiculos/VehicleDocs.jsx","Utils/downloadFile.js","Reusable Components/ShowLocalFiles.jsx","Reusable Components/StandardTable.jsx","Veiculos/VehicleReview.jsx","Reusable Components/Crumbs.jsx","Reusable Components/StepperButtons.jsx","Reusable Components/Stepper.jsx","Reusable Components/ReactToast.jsx","Utils/formatValues.js","Reusable Components/AlertDialog.jsx","Utils/validaDistanciaMinima.js","Veiculos/CadVeiculo.jsx","Utils/checkDemand.js","Forms/altForm.js","Forms/altFormVistoria.js","Veiculos/AltDadosTemplate.jsx","Reusable Components/FormDialog.jsx","Veiculos/AltDados.jsx","Forms/seguroForm.js","Forms/empresaFiles.js","Veiculos/SegurosTemplate.jsx","Veiculos/ShowAllPlates.jsx","Veiculos/ConfigAddDialog.jsx","Utils/setEmpresaDemand.js","Veiculos/Seguros.jsx","Reusable Components/ConfirmDialog.jsx","Forms/laudoForm.js","Reusable Components/Placa.jsx","Reusable Components/CustomTable.jsx","Reusable Components/OnClickMenu.jsx","Veiculos/LaudosTemplate.jsx","Forms/commonFields.js","Utils/cnpjValidator.js","Utils/cpfValidator.js","Forms/joinForms.js","Forms/cadForm.js","Forms/empresasForm.js","Forms/sociosForm.js","Forms/procuradorForm.js","Utils/createFormPattern.js","Forms/procuradorEmpresaTable.js","Forms/altContratoTable.js","Reusable Components/ShowDetails.jsx","Forms/laudosTable.js","Veiculos/Laudos.jsx","Store/ReactContext.jsx","Veiculos/BaixaOptions.jsx","Forms/baixaForm.js","Veiculos/BaixaTemplate.jsx","Veiculos/BaixaVeiculo.jsx","Veiculos/ConfigTemplate.jsx","Veiculos/Config.jsx","Consultas/tables.js","Consultas/exportToXlsx.js","Consultas/ConsultasTemplate.jsx","Forms/certificate.js","Veiculos/Certificate.jsx","Utils/formatFileSize.js","Reusable Components/ShowFiles.jsx","Consultas/ConsultasContainer.jsx","Empresas/EmpresasTemplate.jsx","Forms/dadosSociosForm.js","Empresas/SociosTemplate.jsx","Empresas/EmpresaCadReview.jsx","Utils/valueParser.js","Empresas/EmpresasContainer.jsx","Empresas/EmpresasHome.jsx","Empresas/Procurador.jsx","Empresas/ProcuradoresTemplate.jsx","Empresas/Procuradores.jsx","Empresas/Socios.jsx","Relatorios/chartsConfig.js","Relatorios/RelatoriosTemplate.jsx","Relatorios/Relatorios.jsx","Reusable Components/Table.jsx","Forms/solicitacaoTable.js","Solicitacoes/SolHistory.jsx","Solicitacoes/SolicitacoesTemplate.jsx","Forms/solicitacoesTable.js","Solicitacoes/SolicitacoesTable.jsx","Solicitacoes/Solicitacoes.jsx","Forms/altContratoForm.js","Empresas/EmpresaReview.jsx","Empresas/AltSociosTemplate.jsx","Empresas/AltContratoTemplate.jsx","Empresas/AltContrato.jsx","Routes.jsx","App.jsx","serviceWorker.js","index.js"],"names":["initState","dataReducer","state","action","type","payload","collection","data","console","log","update","forEach","el","match","push","unshift","id","map","v","toString","apolice","placaIndex","vehicleIndex","seguros","seguro","find","s","index","findIndex","placas","splice","veiculos","tablePK","updatedData","Number","element","setColor","loading","rootReducer","combineReducers","useStyles","makeStyles","theme","toolbarTitle","flex","toolbarSecondary","justifyContent","overflowX","backgroundColor","color","toolbarLink","padding","flexShrink","mainFeaturedPost","position","palette","grey","common","white","marginBottom","spacing","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","overlay","top","bottom","right","left","mainFeaturedPostContent","breakpoints","up","paddingRight","mainGrid","marginTop","card","display","cardDetails","cardMedia","width","markdown","typography","body2","sidebarAboutBox","sidebarSection","footer","background","paper","sections","title","link","StyledBadge","withStyles","badge","Badge","connect","socket","logs","withRouter","props","classes","pathname","location","demand","localStorage","getItem","useState","document","path","setSelected","logCounter","setLogCounter","useEffect","Array","isArray","count","filter","l","completed","length","selected","style","querySelector","bgColor","borderB","borderT","fontW","Fragment","CssBaseline","Toolbar","Button","size","Typography","component","variant","align","noWrap","className","i","Link","RouterLink","to","key","href","fontFamily","fontSize","borderBottom","fontWeight","borderTop","onClick","badgeContent","Footer","items","tab","changeTab","Tabs","value","indicatorColor","textColor","centered","onChange","item","Tab","label","idsToString","equipamentos","acessibilidade","equipNames","accessNames","equipamentosId","acessibilidadeId","eqId","result","setNamesFromIds","ids","namesArray","elementId","getData","collectionsArray","dispatch","getState","a","promiseArray","globalState","collectionName","axios","get","Promise","all","then","res","r","humps","camelizeKeys","responseArray","replace","camelize","Object","assign","every","p","hasOwnProperty","insertData","dataFromServer","seguradoras","eqNames","acNames","acId","seguradora","sg","seguradoraId","plates","vehicles","updatedCollection","dataEmissao","vencimento","placa","veiculoId","collectionPayload","batch","updateData","updateDocs","metadata","primarykey","stateCollection","selectedDocs","doc","some","meta","updateCollection","deleteOne","Loading","src","alt","height","configVehicleForm","field","name","table","socketIO","require","requestArray","WrappedComponent","collections","includes","req","With","redux","this","request","colName","on","insertedObjects","updatedObjects","primaryKey","object","off","c","col","React","Component","bindActionCreators","featuredPosts","date","description","imageUrl","StoreHOC","minHeight","textDecoration","menuCards","VeiculosHome","url","setDemand","alteracoes","compartilhado","empresas","vehicleDocs","history","vehicle","originalVehicle","freeze","selectedEmpresa","e","razaoSocial","empresa","delegatario","selectedVehicle","reverse","keys","codigoEmpresa","compartilhadoId","allDemandFiles","fileIds","latestDocs","filesPerFieldName","files","array","indexOf","fieldExists","file","fieldName","lastDoc","reduce","b","Date","uploadDate","demandFiles","getUpdatedValues","originalObj","newObj","sort","sizeExceedsLimit","alert","handleFiles","filesFormTemplate","formData","FormData","obj","set","form","postFilesReturnIds","filesEndPoint","filesToSend","tempFile","append","JSON","stringify","pair","post","filesArray","filesIds","f","updateFilesMetadata","filesCollection","put","removeFile","existingFiles","has","delete","returnObj","fileToRemove","undefined","from","k","checkInputErrors","sendState","dontSetDate","querySelectorAll","inputs","errors","errString","textContent","parentNode","moment","isValid","previousSibling","slice","openAlertDialog","alertType","customMsg","errorHandler","minLength","max","min","pattern","helper","docs","logRoutesConfig","subject","requestAction","responseAction","concludedAction","logGenerator","window","logRoutes","parse","historyLength","commonFields","user","createdAt","logConfig","status","empresaId","declined","approved","filteredLog","autoComplete","datalist","SelectEmpresa","handleInput","handleBlur","shared","headerTitle","delegatarioCompartilhado","activeStep","list","headerTitles","enableSelect","setTimeout","getElementsByName","focus","margin","textAlign","onBlur","textField","marginLeft","marginRight","fontColor","select","helperText","TextInput","selectOptions","disableAll","disableSome","TextField","error","FormHelperTextProps","disabled","InputLabelProps","shrink","inputProps","disable","maxLength","multiline","rows","fullWidth","SelectProps","opt","MenuItem","options","FormSubtiltle","subtitle","vistoriaForm","step","cadVehicleForm","getFullYear","zero","concat","ClosePopUpButton","close","cursor","AddEquipa","handleCheck","localeCompare","eq","FormControlLabel","control","Checkbox","checked","button","handleEquipa","closeEquipa","resetShared","setShared","modelosChassi","carrocerias","addEquipa","eqCollection","paddingBottom","RemoveFileButton","DragAndDrop","dropDisplay","single","fileName","setFileName","fileExists","setFileExistance","filename","entries","demandFile","onDrop","getRootProps","getInputProps","cadVehicleFiles","altDadosFiles","root","flexGrow","sendButton","float","text","VehicleDocs","filesForm","parentComponent","insuranceExists","Grid","container","xs","md","downloadFile","originalName","method","responseType","response","URL","createObjectURL","Blob","createElement","setAttribute","body","appendChild","click","catch","err","divContainer","alignContent","flexWrap","divFiles","alignItems","border","borderRadius","icon","verticalAlign","paddingLeft","fileIcon","ShowLocalFiles","fileArray","storage","createLink","StandardTable","labels","fields","values","alteredElements","colSpan","j","ISO_8601","format","secondary","Revisao","ultimateData","vehicleDetails","newForm","filledForm","Paper","y","Crumbs","links","numero","Breadcrumbs","separator","aria-label","backButton","StepperButtons","role","setActiveStep","lastStep","handleSubmit","uniqueStep","declineButtonLabel","setShowPendencias","showPendencias","info","nextShortcut","keyCode","ctrlKey","addEventListener","removeEventListener","flexDirection","CustomStepper","steps","Stepper","labelProps","Step","StepLabel","useStyles1","success","green","dark","primary","main","warning","amber","iconVariant","opacity","message","MySnackbarContentWrapper","onClose","other","SnackbarContent","clsx","aria-describedby","Icon","CustomizedSnackbars","Snackbar","anchorOrigin","vertical","horizontal","open","autoHideDuration","msg","formatDate","test","getDate","getMonth","getHours","getMinutes","formatMoney","toFixed","AlertDialog","confirm","customTitle","customMessage","cnpj","charAt","createAlert","Dialog","aria-labelledby","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","validaDistanciaMinima","utilizacao","dist","validDistance","d","distancias","Convencional","Executivo","Leito","Urbano","frota","toastMsg","confirmToast","setState","prevActiveStep","target","toLocaleUpperCase","checkValid","stateId","dbName","dbId","alertLabel","toLowerCase","nombre","anoCarroceria","anoChassi","distanciaMinima","carr","chas","errorMsg","validateDist","x","vEquip","currentEquipa","ve","arrayOfEquips","stateKey","handleCadastro","pesoDianteiro","pesoTraseiro","poltronas","modeloChassiId","modeloCarroceriaId","existingVeiculoId","oldHistoryLength","situacao","pbt","isNaN","review","modeloChassi","modeloCarroceria","vReview","decamelizeKeys","requestObject","toast","resetState","newState","resetFiles","resetEquip","toggleDialog","escFunction","demandState","allEqs","allAcs","CadVeiculoTemplate","PureComponent","checkDemand","logsCollection","exists","altForm","altPlacaOption","showAltPlaca","header","inputNames","inputLabels","fileInputName","inputName","stepTitles","altPlaca","newPlate","reset","toUpperCase","getId","capitalize","dominio","resetEquips","ce","updatePlate","tempObj","camelizedRequest","closeAlert","resetAll","AltDadosTemplate","seguroForm","empresaFiles","minWidth","SegurosTemplate","enableAddPlaca","addPlate","removeFromInsurance","enableChangeApolice","showAllPlates","addedPlaca","allVehicles","insurance","apoliceDoc","renderedPlacas","paddingTop","outsider","irregular","delCompartilhado","owner","onMouseOver","getOwner","Chip","onDelete","ShowAllPlates","selectAll","selectAllPlates","htmlFor","ConfigAddDialog","helperMessage","marca","marcas","selectMarca","newElement","addNewElement","setEmpresaDemand","socios","associateKeys","lastUpdate","latestDoc","empresaDocs","newMembers","oldMembers","latestDocId","om","filteredSocios","deletedVehicles","filterInsurances","filteredInsurances","allPlates","ownedPlacas","checkExistance","inputValue","se","renderPlacas","veiculo","newInsurance","clearFields","selectedSeguradora","vehicleFound","checkFields","valid","seg","allPlatesObj","insuredPlates","plate","updatedState","placaInput","allSelected","check","updateInsurance","updates","emissaoDidChange","isSame","vencimentoDidChange","seguradoraDidChange","data_emissao","seguradora_id","requestObj","columns","vehicleIds","cadSeguro","codigo_empresa","emis","venc","validEmissao","validVenc","invalido","isSameOrBefore","vencido","isBefore","pendente","isAfter","vigente","confirmAndResetState","approveInsurance","column","de","vExists","dontUpdateProps","confirmMessage","openAddDialog","filteredState","insuranceVehicles","ConfirmDialog","laudoForm","Placa","city","docsCollection","idIndex","filePK","deleteIconProperties","deleteFunction","tableHeaders","arrayOfRows","fileId","getFile","StyledMenu","Menu","elevation","getContentAnchorEl","transformOrigin","OnClickMenu","anchorEl","handleClose","menuOptions","keepMounted","Boolean","memo","filteredVehicles","stateInputs","laudoDoc","functions","clickOnPlate","showDetails","closeMenu","clear","deleteLaudo","renderColor","laudos","validade","toDate","cidade","overflow","cnpjString","tamanho","numeros","substring","digitos","soma","pos","cnpjValidator","cpf","cpfString","strCPF","Soma","Resto","parseInt","cpfValidator","input","phone","email","eForm","sForm","segForm","vForm","cadForm","empresasForm","sociosForm","procuradorForm","dataToReturn","tableData","formPattern","setForm","vData","laudoId","vencimentoContrato","jForm","updatedObj","updatedForm","joinForm","jf","mergeForms","consolidateForm","procuradorEmpresaTable","altContratoTable","ShowDetails","procuracoes","procuradores","altContrato","setProcs","setTable","table2","setTable2","tables","setTables","createFormPattern","rowObj","selectedProcs","row","selectedFiles","pr","procuradorId","tableRow","procuracaoId","proc","procTable","fieldObj","t","o","mainTitle","setAltContrato","additionalInfo","altDocs","numeroRegistro","tableArray","laudosTable","deleteFile","empresasLaudo","empresaLaudo","empresaInput","setEmpresa","oldVehicles","setOldVehicles","setFilteredVehicles","details","setDetails","selectVehicle","setAnchorEl","setDropDisplay","setLaudoDoc","changeInputs","setToast","setToastMsg","setTableData","setDemandFiles","setFileToRemove","alertDialog","setAlertDialog","confirmDialogProps","setConfirmDialog","fullDemand","dFiles","currentYear","vehiclesLaudo","laudosTemp","dateA","updatedVehicle","insertLaudos","useCallback","filtered","event","persist","currentTarget","vehicleLaudos","laudoDocs","laudosArray","tempArray","requestElement","laudoAlreadyExists","clearForm","errorLabel","toggleToast","empresa_id","veiculo_id","requestBody","closeConfirmDialog","allFields","ReactContext","createContext","radioAttempt","radioAproval","BaixaOptions","delegaTransf","justificativa","pendencias","formControl","direction","justify","FormControl","FormLabel","RadioGroup","Radio","labelPlacement","Send","baixaForm","formHolder","BaixaVeiculo","openDialog","delegaTransfId","disableSubmit","demandHistory","checkArray","historyTransfId","logSubject","newEmpresaId","BaixaTemplate","contextType","ConfigTemplate","staticData","selectCollection","handleChange","enableEdit","confirmDelete","edit","autoCorrect","spellCheck","addCounter","ac","marcaChassi","marcaCarroceria","editIndex","inputTarget","divCell","divWrap","childNodes","selectedObj","originalObject","noChanges","leftOpen","oldIndex","call","marcaCollection","m","marcaId","changedElement","newData","elementName","removeItem","originalData","decamelize","editedElements","prevProps","vehicleTable","render","rowData","timeUnit","segurosTable","filtering","exportToXlsx","rawData","formatedData","formField","formatValue","formatData","wb","Sheets","XLSX","json_to_sheet","SheetNames","excelBuffer","bookType","FileSaver","showFiles","showCertificate","del","exportButton","exportFileName","exportCsv","actionsColumnIndex","searchFieldStyle","headerStyle","emptyRowsWhenPaging","pageSize","rowStyle","localization","actions","emptyDataSourceMessage","editRow","deleteText","deleteTooltip","filterRow","filterTooltip","toolbar","searchTooltip","searchPlaceholder","exportName","exportAriaLabel","exportTitle","pagination","labelRowsSelect","labelDisplayedRows","firstTooltip","previousTooltip","nextTooltip","lastTooltip","iconProps","tooltip","hidden","editable","onRowDelete","oldData","caracteristicas","pesagem","informacoesGerais","PdfCertificate","setVehicle","print","setData","carac","delega","peso","obs","line","ultimateForm","origin","InputProps","redirect","formatFileSize","bytes","Math","round","divRow","grid","justifyItems","ShowFiles","typeId","fileLabels","download","emp","numeroAlteracao","getLabel","ConsultasContainer","tablePKs","dbTables","detailsTitle","detailsHeader","elementDetails","primaryKeys","pk","updatedElement","closeFiles","socio","socioId","sociosArray","filesToReturn","procId","selectedElement","deleteHandler","itemId","seguroVencido","contratoVencido","hasLaudo","setItem","closeCertificate","certified","TabMenu","ConsultasTemplate","contratoSocial","iconButton","addSocio","handleEdit","removeSocio","contratoSocialForm","standAlone","EmpresaCadReview","empresaDetails","tableLayout","valueParser","tecla","tam","vr","substr","formatCnpj","formatCpf","formatPhone","number","formatShare","fileNames","addedSocios","totalShare","parsedValue","sObject","invalid","share","pop","editSocio","fs","alreadyExists","socioIds","submitFile","contratoFile","globalRemoveFile","resetEmpresa","resetSocios","EmpresasTemplate","SociosTemplate","StyledTableCell","head","TableCell","StyledCell","StyledTableRow","default","TableRow","Procurador","procuracao","procArray","pro","Table","TableHead","TableBody","lineHeight","addButton","addProc","removeProc","plusOne","minusOne","checkExpires","procsToAdd","expires","zIndex","z","filteredProc","procuracoesArray","cpfProcurador","cpfExists","nProc","addedProcs","n","addedProc","gotId","approveProc","procIdArray","procurador_id","cadRequest","procs","novaProcuracao","procuracao_id","selectedFile","resetedFields","originalProcuradores","op","ProcuradoresTemplate","dialogTitle","originalSocios","originals","cpfSocio","allShares","originalStatus","rest","realChanges","altObj","deleted","shareUpdate","socioIdsArray","newSocio","socio_id","member","prevState","decamSocios","barChart","offsetX","offsetY","floating","legend","show","chart","xaxis","dataLabels","enabled","plotOptions","bar","donutChart","pie","donut","formatter","val","total","showAlways","responsive","breakpoint","RelatoriosTemplate","selectedVehicles","tableLabels","mediaIdades","moda","segurosVencidos","segurosVigentes","veiculosNovos","categories","series","colors","tableValues","sum","newArray","shift","countExpired","selectedId","setRazaoSocial","allExpired","setExpired","allValid","setValid","idades","ano","counter","unsortedLabels","arr","ultimateObj","parcial","poltronasPerYear","poltronasAcc","poltronasMedia","year","acc","average","expired","needsLaudo","veiculosAntigos","staticFields","tableStyle","showInfo","setShowFiles","tableSpan","rowArray","laudoDocId","createButton","solicitacaoTable","SolHistory","solicitacao","historyLog","setHistoryLog","docSelection","sytle","SolicitacoesTemplate","showCompleted","paddingBotom","solicitacoesTable","assessDemand","parsedData","csvData","exportToXLSX","keysToDelete","dataToExcel","setLogs","showHistory","setShowHistory","selectedLog","selectLog","alertProperties","setFilesId","originalLogs","__v","getLogs","SolicitacoesTable","altContratoForm","forms","objField","tablesSubtitles","subtitles","AltContratoTemplate","altContratoDoc","AltSociosTemplate","socioUpdates","altContratoFields","newSocios","us","nomeSocio","createRequestObj","altEmpresa","empresaUpdates","updateEmpresa","checkSocioUpdates","createLog","oldSocios","deletedSocios","requestInfo","prop","resetForms","socioToRemove","Routes","exact","HomeTemplate","CadVeiculos","AltDados","Seguros","Laudos","Config","Consultas","EmpresasHome","AltContrato","Empresas","Socios","Procuradores","Relatorios","PdfTest","Solicitacoes","App","store","applyMiddleware","promise","multi","thunk","createStore","Container","maxWidth","hostname","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.64755328.chunk.js","sourcesContent":["const initState = {}\r\n\r\nconst dataReducer = (state = initState, action) => {\r\n    const { type, payload } = action\r\n\r\n    switch (type) {\r\n\r\n        case 'GET_DATA':\r\n            return { ...state, ...payload }\r\n\r\n        case 'INSERT_DATA': {\r\n            const { collection, data } = payload\r\n            console.log(collection, data)\r\n\r\n            if (state[collection] && data) {\r\n                let update = [...state[collection]]\r\n\r\n                data.forEach(el => {\r\n                    if (collection.match('Logs')) update.push(el)\r\n                    else update.unshift(el)\r\n                })\r\n\r\n                return {\r\n                    ...state, [collection]: update\r\n                }\r\n            }\r\n            return state\r\n        }\r\n\r\n        case 'UPDATE_DATA': {\r\n            const { collection, data, id } = payload\r\n\r\n            if (state[collection] && data) {\r\n                const update = state[collection].map(v => {\r\n                    data.forEach(el => {\r\n                        if (v[id] === el[id] || v[id].toString() === el[id].toString()) {\r\n                            v = el\r\n                        }\r\n                    })\r\n                    return v\r\n                })\r\n\r\n                return {\r\n                    ...state, [collection]: update\r\n                }\r\n            }\r\n            return state\r\n        }\r\n\r\n\r\n        case 'UPDATE_COLLECTION': {\r\n            const { data, collection } = payload\r\n            // console.log(payload)\r\n            return {\r\n                ...state, [collection]: data\r\n            }\r\n        }\r\n\r\n        case 'REMOVE_FROM_INSURANCE':\r\n            const { apolice, placaIndex, vehicleIndex } = payload\r\n\r\n            if (state.seguros) {\r\n\r\n                let seguros = [...state.seguros],\r\n                    seguro = seguros.find(s => s.apolice === apolice),\r\n                    index = seguros.findIndex(s => s.apolice === apolice)\r\n\r\n                seguro.placas.splice(placaIndex, 1)\r\n                seguro.veiculos.splice(vehicleIndex, 1)\r\n                seguros[index] = seguro\r\n                // console.log(seguros)\r\n                return {\r\n                    ...state, seguros\r\n                }\r\n            }\r\n            return state\r\n\r\n        case 'DELETE_ONE':\r\n            const { tablePK, collection } = payload\r\n\r\n            if (state[collection]) {\r\n                let\r\n                    { id } = payload,\r\n                    updatedData = [...state[collection]]\r\n\r\n                if (!id) return\r\n\r\n                if (!collection.match('Docs')) id = Number(id)\r\n                if (collection === 'laudos')\r\n                    id = id.toString()\r\n\r\n                const\r\n                    element = updatedData.find(el => el[tablePK] === id),\r\n                    index = updatedData.findIndex(el => el[tablePK] === element[tablePK])\r\n                updatedData.splice(index, 1)\r\n\r\n                return {\r\n                    ...state, [collection]: updatedData\r\n                }\r\n            }\r\n            return state\r\n\r\n        case 'SET_COLOR':\r\n            return { ...state, setColor: action.payload }\r\n\r\n        case 'LOADING':\r\n            return { ...state, loading: action.payload }\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default dataReducer;","import dataReducer from './Store/dataReducer'\r\nimport { combineReducers } from 'redux';\r\n\r\nconst rootReducer = combineReducers({    \r\n    data: dataReducer    \r\n})\r\n\r\nexport default rootReducer","import React, { useState, useEffect } from 'react'\r\nimport { Link as RouterLink } from 'react-router-dom'\r\n\r\nimport { connect } from 'react-redux';\r\n\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport { Toolbar, Typography, Button, Link } from '@material-ui/core'\r\nimport Badge from '@material-ui/core/Badge';\r\nimport { withRouter } from 'react-router'\r\nimport './stylez.css'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    toolbarTitle: {\r\n        flex: 1,\r\n    },\r\n    toolbarSecondary: {\r\n        justifyContent: 'space-between',\r\n        overflowX: 'auto',\r\n        backgroundColor: '#0398c1',\r\n        color: 'white'\r\n    },\r\n\r\n    toolbarLink: {\r\n        padding: '12px 55px 13px 55px',\r\n        flexShrink: 0,\r\n    },\r\n    mainFeaturedPost: {\r\n        position: 'relative',\r\n        backgroundColor: theme.palette.grey[800],\r\n        color: theme.palette.common.white,\r\n        marginBottom: theme.spacing(4),\r\n        backgroundImage: '/images/bus_wallpaper.jpg',\r\n        backgroundSize: 'cover',\r\n        backgroundRepeat: 'no-repeat',\r\n        backgroundPosition: 'center',\r\n    },\r\n    overlay: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n        left: 0,\r\n        backgroundColor: 'rgba(0,0,0,.3)',\r\n    },\r\n    mainFeaturedPostContent: {\r\n        position: 'relative',\r\n        padding: theme.spacing(3),\r\n        [theme.breakpoints.up('md')]: {\r\n            padding: theme.spacing(6),\r\n            paddingRight: 0,\r\n        },\r\n    },\r\n    mainGrid: {\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    card: {\r\n        display: 'flex',\r\n    },\r\n    cardDetails: {\r\n        flex: 1,\r\n    },\r\n    cardMedia: {\r\n        width: 160,\r\n    },\r\n    markdown: {\r\n        ...theme.typography.body2,\r\n        padding: theme.spacing(3, 0),\r\n    },\r\n    sidebarAboutBox: {\r\n        padding: theme.spacing(2),\r\n        backgroundColor: theme.palette.grey[200],\r\n    },\r\n    sidebarSection: {\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    footer: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        marginTop: theme.spacing(8),\r\n        padding: theme.spacing(6, 0),\r\n    },\r\n}));\r\n\r\nconst sections = [\r\n    { title: 'Página Inicial', link: '/' },\r\n    { title: 'Consultas', link: '/consultas' },\r\n    { title: 'Veículos', link: '/veiculos' },\r\n    { title: 'Empresas', link: '/empresas' },\r\n    { title: 'Relatórios', link: '/relatorios' },\r\n    { title: 'Solicitações ', link: '/solicitacoes' },\r\n    //{ title: 'Fale Conosco', link: '/faleConosco' },\r\n];\r\n\r\nconst StyledBadge = withStyles((theme) => ({\r\n    badge: {\r\n        right: -8,\r\n        top: -1,\r\n        padding: '0 4px',\r\n    },\r\n}))(Badge);\r\n\r\nconst Header = props => {\r\n\r\n    const\r\n        logs = props?.logs,\r\n        classes = useStyles(),\r\n        { pathname } = props.location,\r\n        demand = localStorage.getItem('demand')\r\n\r\n    const\r\n        [path, setSelected] = useState(document.location.pathname),\r\n        [logCounter, setLogCounter] = useState()\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if (logs && Array.isArray(logs)) {\r\n            const count = logs\r\n                .filter(l => l?.completed === false)\r\n                .length\r\n\r\n            setLogCounter(count)\r\n        }\r\n        setSelected(pathname)\r\n    }, [pathname, logCounter, logs])\r\n\r\n    const selected = link => {\r\n        let\r\n            style = document.querySelector(\"a[href='/solicitacoes']\")?.style,\r\n            bgColor = '',\r\n            borderB = '',\r\n            borderT = '',\r\n            fontW = '400'\r\n\r\n        if (path === '/solicitacoes' || demand) {\r\n            if (style) {\r\n                style['background-color'] = '#11a7d2'\r\n                style['border-bottom'] = '1.5px solid #ccc'\r\n            }\r\n        }\r\n\r\n        else if (path.match(link) && link !== '/') {\r\n            bgColor = '#11a7d2'\r\n            borderB = '1.5px solid #ccc'\r\n            if (style) {\r\n                style['background-color'] = ''\r\n                style['border-bottom'] = ''\r\n            }\r\n        }\r\n        return { bgColor, borderB, borderT, fontW }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <CssBaseline />\r\n\r\n            <Toolbar>\r\n                <Button size=\"small\">Criar usuário</Button>\r\n                <Typography\r\n                    component=\"h2\"\r\n                    variant=\"h6\"\r\n                    color=\"inherit\"\r\n                    align=\"center\"\r\n                    noWrap\r\n                    className={classes.toolbarTitle}\r\n                >\r\n                    SEINFRA – Secretaria de Estado de Infraestrutura e Mobilidade\r\n                </Typography>\r\n                <Button variant=\"outlined\" size=\"small\">\r\n                    Fazer login\r\n                    </Button>\r\n            </Toolbar>\r\n            <Toolbar component=\"nav\" variant=\"dense\" className={classes.toolbarSecondary}>\r\n                {sections.map(({ link, title }, i) => (\r\n                    <Link\r\n                        component={RouterLink}\r\n                        to={link}\r\n                        key={i}\r\n                        color=\"inherit\"\r\n                        noWrap\r\n                        variant=\"body2\"\r\n                        href=\"\"\r\n                        style={{\r\n                            fontFamily: 'Segoe UI, Tahoma, Geneva, Verdana, sans-serif',\r\n                            fontSize: '15px',\r\n                            backgroundColor: selected(link).bgColor,\r\n                            borderBottom: selected(link).borderB,\r\n                            fontWeight: selected(link).fontW,\r\n                            borderTop: selected(link).borderT\r\n                        }}\r\n                        className={classes.toolbarLink}\r\n                        onClick={() => setSelected(link)}\r\n                    >\r\n                        {\r\n                            title === 'Solicitações ' ?\r\n\r\n                                <StyledBadge badgeContent={logCounter} color='secondary'>\r\n                                    <span>\r\n                                        {title}\r\n                                    </span>\r\n                                </StyledBadge>\r\n                                :\r\n                                title\r\n                        }\r\n                    </Link>\r\n                ))}\r\n            </Toolbar>\r\n        </React.Fragment >\r\n    )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        logs: state.data.logs,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(withRouter(Header))","import React from 'react'\r\nimport humps from 'humps'\r\n\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux'\r\nimport { getData, insertData, updateData, updateCollection, deleteOne, updateDocs } from './dataActions'\r\n\r\nimport Loading from '../Layouts/Loading'\r\nimport { configVehicleForm } from '../Forms/configVehicleForm'\r\n\r\nconst socketIO = require('socket.io-client')\r\nlet socket\r\n\r\nexport default function (requestArray, WrappedComponent) {\r\n\r\n    let collections = []\r\n    if (!requestArray.includes('logs')) requestArray.push('logs')\r\n    collections = requestArray.map(req => req.replace('getFiles/', '').replace('lookUpTable/', ''))\r\n\r\n    class With extends React.Component {\r\n\r\n        async componentDidMount() {\r\n            const { redux } = this.props\r\n            let request = []\r\n\r\n            requestArray.forEach(req => {\r\n                const colName = req.replace('getFiles/', '').replace('lookUpTable/', '').replace('logs/', '')\r\n                if (!redux[colName] || !redux[colName][0]) {\r\n                    request.push(req)\r\n                }\r\n            })\r\n\r\n            if (request[0]) await this.props.getData(request)\r\n\r\n            if (!socket) socket = socketIO('http://localhost:3001')\r\n            socket.on('insertVehicle', insertedObjects => this.props.insertData(insertedObjects, 'veiculos'))\r\n            socket.on('insertInsurance', insertedObjects => this.props.insertData(insertedObjects, 'seguros'))\r\n            socket.on('insertEmpresa', insertedObjects => this.props.insertData(insertedObjects, 'empresas'))\r\n            socket.on('insertSocios', insertedObjects => this.props.insertData(insertedObjects, 'socios'))\r\n            socket.on('insertProcuradores', insertedObjects => this.props.insertData(insertedObjects, 'procuradores'))\r\n            socket.on('insertElements', ({ insertedObjects, collection }) => this.props.insertData(insertedObjects, collection))\r\n\r\n            socket.on('addElements', ({ insertedObjects, table }) => {\r\n                const { collection } = configVehicleForm.find(el => el.table === table)\r\n                this.props.insertData(insertedObjects, collection)\r\n            })\r\n\r\n            socket.on('updateVehicle', updatedObjects => this.props.updateData(updatedObjects, 'veiculos', 'veiculoId'))\r\n            socket.on('updateInsurance', updatedObjects => this.props.updateCollection(updatedObjects, 'seguros'))\r\n            socket.on('updateSocios', updatedObjects => this.props.updateCollection(updatedObjects, 'socios'))\r\n            socket.on('updateProcuradores', ({ collection, data, primaryKey }) => this.props.updateData(data, collection, primaryKey))\r\n            socket.on('updateLogs', updatedObjects => this.props.updateData(updatedObjects, 'logs', 'id'))\r\n            socket.on('updateAny', ({ updatedObjects, collection, primaryKey }) => this.props.updateData(updatedObjects, collection, primaryKey))\r\n            socket.on('updateDocs', ({ ids, metadata, collection, primaryKey }) => this.props.updateDocs(ids, metadata, collection, primaryKey))\r\n            socket.on('updateElements', ({ collection, updatedCollection }) => this.props.updateCollection(updatedCollection, collection))\r\n\r\n            socket.on('deleteOne', object => {\r\n                const { id, tablePK, collection } = object\r\n                this.props.deleteOne(id, tablePK, collection)\r\n            })\r\n\r\n            socket.on('insertFiles', object => {\r\n                const { insertedObjects, collection } = object\r\n                this.props.insertData(insertedObjects, collection)\r\n            })\r\n        }\r\n        componentWillUnmount() {\r\n            if (!socket) socket = socketIO(':3001')\r\n            const clearAll = ['insertVehicle', 'insertInsurance', 'insertEmpresa', 'insertSocios', 'insertFiles', 'addElements',\r\n                'insertElements', 'insertProcuradores', 'updateVehicle', 'updateInsurance', 'updateSocios', 'updateLogs', 'deleteOne',\r\n                'updateDocs', 'updateAny']\r\n\r\n            clearAll.forEach(el => socket.off(el))\r\n        }\r\n        render() {\r\n\r\n            collections = collections.map(c => humps.camelize(c))\r\n\r\n            if (collections.length === 0 || !collections.every(col => this.props.redux.hasOwnProperty(col))) {\r\n                return <Loading />\r\n            }\r\n            else {\r\n                return <WrappedComponent {...this.props} />\r\n            }\r\n        }\r\n    }\r\n\r\n    function mapStateToProps(state) {\r\n        return {\r\n            redux: {\r\n                ...state.data,\r\n            }\r\n        }\r\n    }\r\n\r\n    function mapDispatchToProps(dispatch) {\r\n        return bindActionCreators({ getData, insertData, updateData, updateCollection, deleteOne, updateDocs }, dispatch)\r\n    }\r\n\r\n    return connect(mapStateToProps, mapDispatchToProps)(With)\r\n}\r\n","//import React from 'react'\r\n\r\nconst Footer = () => {\r\n   return null\r\n    /*  return (\r\n        <footer className=\"footer\">\r\n            <span style={{ fontSize: '0.6rem' }}>\r\n                Seinfra, Governo de Minas Gerais. Desenvolvido por Sandro Veríssimo, © 2019.\r\n            </span>\r\n        </footer>\r\n    ) */\r\n}\r\n\r\nexport default Footer;","import React from 'react'\r\nimport { Tabs, Tab } from '@material-ui/core'\r\n\r\nexport default ({items, tab, changeTab}) =>\r\n\r\n    <div className='tabMenu'> \r\n        <Tabs value={tab}\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n            centered \r\n            onChange={changeTab}>\r\n            {items.map((item, i)=> <Tab key={i} label={item} />)}\r\n        </Tabs>\r\n    </div>\r\n\r\n\r\n","export const idsToString = (veiculos, equipamentos, acessibilidade) => {\r\n\r\n    let equipNames = [], accessNames = []\r\n\r\n    const equips = veiculos.map(v => {\r\n        if (!v?.equipamentosId) v.equipamentosId = []\r\n        if (!v?.acessibilidadeId) v.acessibilidadeId = []\r\n\r\n        v.equipamentosId.forEach(eqId => {\r\n            equipamentos.forEach(({ id, item }) => {\r\n                if (id === eqId) equipNames.push(item)\r\n            })\r\n        })\r\n\r\n        v.acessibilidadeId.forEach(eqId => {\r\n            acessibilidade.forEach(({ id, item }) => {\r\n                if (id === eqId) accessNames.push(item)\r\n            })\r\n        })\r\n        const result = { ...v, equipamentos: equipNames, acessibilidade: accessNames }\r\n        equipNames = []\r\n        accessNames = []\r\n        return result\r\n    })\r\n    return equips\r\n}\r\n\r\nexport const setNamesFromIds = (collection, ids) => {\r\n\r\n    let namesArray = []\r\n    ids.forEach(elementId => {\r\n        collection.forEach(({ id, item }) => {\r\n            if (elementId === id) namesArray.push(item)\r\n        })\r\n    })\r\n    return namesArray\r\n}","import axios from 'axios'\r\nimport humps from 'humps'\r\nimport { batch } from 'react-redux'\r\nimport { idsToString } from '../Utils/idsToString'\r\n\r\nexport const getData = (collectionsArray = []) => {\r\n    return async (dispatch, getState) => {\r\n        let\r\n            promiseArray = [],\r\n            globalState = {}\r\n\r\n        if (collectionsArray.length > 0) {\r\n            collectionsArray.forEach(collectionName => {\r\n                promiseArray.push(axios.get(`/api/${collectionName}`))\r\n            })\r\n\r\n            await Promise.all(promiseArray)\r\n                .then(res => res.map(r => humps.camelizeKeys(r.data)))\r\n                .then(responseArray => {\r\n                    responseArray.forEach((el, i) => {\r\n                        let key = collectionsArray[i]\r\n                            .replace('getFiles/', '')\r\n                            .replace('lookUpTable/', '')\r\n                            .replace('logs/', '')\r\n                        key = humps.camelize(key)\r\n                        Object.assign(globalState, { [key]: el })\r\n                    })\r\n                })\r\n        }\r\n\r\n        if (['acessibilidade', 'equipamentos'].every(p => globalState.hasOwnProperty(p))) {\r\n            const { acessibilidade, equipamentos } = globalState\r\n            let veiculos = globalState.veiculos || getState().data?.veiculos\r\n\r\n            const updatedData = idsToString(veiculos, equipamentos, acessibilidade)\r\n            globalState.veiculos = updatedData\r\n        }\r\n\r\n        dispatch({\r\n            type: 'GET_DATA',\r\n            payload: globalState\r\n        })\r\n    }\r\n}\r\n\r\nexport const insertData = (dataFromServer, collection) => (dispatch, getState) => {\r\n\r\n    let data = humps.camelizeKeys(dataFromServer)\r\n    const\r\n        payload = { collection, data },\r\n        seguradoras = getState().data.seguradoras\r\n\r\n    if (!seguradoras) {\r\n        dispatch({ type: 'INSERT_DATA', payload })\r\n        return\r\n    }\r\n    console.log(payload)\r\n    if (collection === 'veiculos' && data[0]) {\r\n\r\n        const { acessibilidade, equipamentos } = getState().data\r\n\r\n        let\r\n            eqNames = [],\r\n            acNames = []\r\n\r\n        if (data[0]?.equipamentosId) {\r\n            data[0].equipamentosId.forEach(eqId => {\r\n                equipamentos.forEach(({ id, item }) => {\r\n                    if (eqId.toString() === id.toString()) eqNames.push(item)\r\n                })\r\n            })\r\n        }\r\n\r\n        if (data[0]?.acessibilidadeId) {\r\n            data[0].acessibilidadeId.forEach(acId => {\r\n                acessibilidade.forEach(({ id, item }) => {\r\n                    if (acId.toString() === id.toString()) {\r\n                        acNames.push(item)\r\n                    }\r\n                })\r\n            })\r\n        }\r\n        data[0].equipamentos = eqNames\r\n        data[0].acessibilidade = acNames\r\n    }\r\n\r\n    if (collection === 'seguros' && data[0].placas && data[0].placas.length === 1) {\r\n\r\n        const seguradora = seguradoras.find(sg => sg.id === data[0].seguradoraId)\r\n        let\r\n            seguro = data[0],\r\n            plates = [], vehicles = [],\r\n            veiculos = getState().data.veiculos,\r\n\r\n            updatedCollection = veiculos.map(v => {\r\n                if (v.apolice === seguro.apolice) {\r\n                    v.seguradora = seguradora.seguradora\r\n                    v.dataEmissao = seguro.dataEmissao\r\n                    v.vencimento = seguro.vencimento\r\n                }\r\n                return v\r\n            })\r\n\r\n        veiculos.forEach(v => {\r\n            if (v.apolice === seguro.apolice) {\r\n                plates.push(v.placa)\r\n                vehicles.push(v.veiculoId)\r\n            }\r\n        })\r\n        seguro.placas = plates\r\n        seguro.veiculos = vehicles\r\n        seguro = [seguro]\r\n\r\n        const collectionPayload = { data: updatedCollection, collection: 'veiculos' }\r\n        batch(() => {\r\n            dispatch({ type: 'INSERT_DATA', payload: { data: seguro, collection: 'seguros' } })\r\n            dispatch({ type: 'UPDATE_COLLECTION', payload: collectionPayload })\r\n        })\r\n    }\r\n\r\n    else dispatch({ type: 'INSERT_DATA', payload })\r\n\r\n}\r\n\r\nexport const updateData = (dataFromServer, collection, id) => (dispatch, getState) => {\r\n\r\n    //Se a collection for vehicleDocs, o que vem do servidor são os ids\r\n    let i = 0\r\n    if (i > 0) return\r\n    let data = humps.camelizeKeys(dataFromServer)\r\n    id = humps.camelize(id)\r\n\r\n    const { equipamentos, acessibilidade } = getState().data\r\n    if (collection === 'veiculos' && equipamentos && acessibilidade)\r\n        data = idsToString(data, equipamentos, acessibilidade)\r\n\r\n    const payload = { collection, data, id }\r\n\r\n    dispatch({ type: 'UPDATE_DATA', payload })\r\n    return\r\n}\r\n\r\nexport const updateDocs = (ids, metadata, collection, primarykey) => (dispatch, getState) => {\r\n\r\n    const stateCollection = getState().data[collection]\r\n\r\n    if (ids && ids[0] && metadata) {\r\n        let selectedDocs = stateCollection.filter(doc => ids.some(id => id === doc[primarykey]))\r\n\r\n        selectedDocs.forEach(doc => {\r\n            const meta = Object.assign({}, doc.metadata, metadata)\r\n            doc.metadata = meta\r\n        })\r\n\r\n        const payload = { collection, data: selectedDocs, id: primarykey }\r\n        dispatch({ type: 'UPDATE_DATA', payload })\r\n    }\r\n\r\n}\r\n\r\nexport const updateCollection = (data, collection) => dispatch => {\r\n\r\n    data = humps.camelizeKeys(data)\r\n    const payload = { data, collection }\r\n\r\n    dispatch({\r\n        type: 'UPDATE_COLLECTION',\r\n        payload\r\n    })\r\n}\r\n\r\nexport const updateInsurance = ({ value, ids }) => (dispatch, getState) => {\r\n    const\r\n        apolice = value,\r\n        seguros = getState().data.seguros,\r\n        veiculos = getState().data.veiculos\r\n\r\n    if (!seguros || !veiculos) return\r\n\r\n    let seguro = seguros.find(s => s.apolice === apolice),\r\n        placas = seguro.placas || [], vehicleIDs = seguro.veiculos || []\r\n\r\n    veiculos.forEach(v => {\r\n        ids.forEach(id => {\r\n            if (v.veiculoId === id) {\r\n                placas.push(v.placa)\r\n                vehicleIDs.push(v.veiculoId)\r\n            }\r\n        })\r\n    })\r\n\r\n    seguro.placas = placas\r\n    seguro.veiculos = vehicleIDs\r\n    seguro = [seguro]\r\n\r\n    const payload = { collection: 'seguros', data: seguro, id: 'apolice' }\r\n\r\n    dispatch({ type: 'UPDATE_DATA', payload })\r\n}\r\n\r\nexport const removeInsurance = (apolice, placaIndex, vehicleIndex) => dispatch => {\r\n\r\n    dispatch({\r\n        type: 'REMOVE_FROM_INSURANCE',\r\n        payload: { apolice, placaIndex, vehicleIndex }\r\n    })\r\n}\r\n\r\nexport const deleteOne = (id, tablePK, collection) => dispatch => {\r\n    tablePK = humps.camelize(tablePK)\r\n    dispatch({\r\n        type: 'DELETE_ONE',\r\n        payload: { id, tablePK, collection }\r\n    })\r\n}","import React from 'react'\r\n\r\nconst Loading = () => {\r\n    return (\r\n        <div className='loading'>\r\n            <img src=\"/images/loading.gif\" alt=\"\" height=\"60px\" width=\"60px\" />\r\n            <p> Carregando... </p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loading","export const configVehicleForm = [\r\n\r\n    {\r\n        collection: 'equipamentos',\r\n        field: 'item',\r\n        label: 'Equipamentos',\r\n        name: 'equipamentosId',\r\n        table: 'equipamentos'\r\n    },\r\n    {\r\n        collection: 'acessibilidade',\r\n        field: 'item',\r\n        label: 'Itens de acessibilidade',\r\n        name: 'acessibilidadeId',\r\n        table: 'acessibilidade'\r\n    },\r\n    {\r\n        collection:'marcaCarroceria',\r\n        field: 'marca',\r\n        label: 'Marcas de Carroceria',\r\n        name:'marcaCarroceria',\r\n        table: 'marca_carroceria'\r\n    },\r\n    {\r\n        collection: 'carrocerias',\r\n        field: 'modelo',\r\n        label: 'Modelos de Carroceria',\r\n        name:'modeloCarroceria',\r\n        table: 'modelo_carroceria'\r\n    },\r\n    {\r\n        collection: 'marcaChassi',\r\n        field: 'marca',\r\n        label: 'Marcas de Chassi',\r\n        name: 'marcaChassi',\r\n        table: 'marca_chassi'\r\n    },\r\n    {\r\n        collection: 'modelosChassi',\r\n        field: 'modeloChassi',\r\n        label: 'Modelos de Chassi',\r\n        name: 'modeloChassi',\r\n        table: 'modelo_chassi'\r\n    },\r\n    {\r\n        collection: 'seguradoras',\r\n        field: 'seguradora',\r\n        label: 'Seguradoras',\r\n        name: 'seguradora',\r\n        table: 'seguradora'\r\n    },\r\n    {\r\n        collection: 'empresasLaudo',\r\n        field: 'empresa',\r\n        label: 'Empresas certificadas INMETRO',\r\n        name: 'empresa',\r\n        table: 'empresa_laudo'\r\n    },\r\n    {\r\n        collection: 'laudos',        \r\n        table: 'laudos'\r\n    }\r\n\r\n]","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport StoreHOC from './Store/StoreHOC'\r\nimport './home.css'\r\n\r\nconst featuredPosts = [\r\n    {\r\n        title: 'Veículos',\r\n        date: '07/Nov',\r\n        description:\r\n            'Cadastre e altere os dados do veículo ou solicite sua baixa',\r\n        link: '/veiculos',\r\n        imageUrl: '/images/vehicles.jpg'\r\n    },\r\n    {\r\n        title: 'Empresas',\r\n        date: '07/Nov',\r\n        description:\r\n            'Cadastre e gerencie dados de empresas, sócios e procuradores',\r\n        link: '/empresas',\r\n        imageUrl: '/images/empresas12.jpg'\r\n    },\r\n    {\r\n        title: 'Consultas',\r\n        date: '03/Dez',\r\n        description:\r\n            'Consulte e gerencie dados de veículos, seguros e empresas',\r\n        link: '/consultas',\r\n        imageUrl: '/images/consultas2.jpg'\r\n    },\r\n    {\r\n        title: 'Relatórios',\r\n        date: '03/Dez',\r\n        description:\r\n            'Acompanhe a situação dos veículos por meio de gráficos e tabelas',\r\n        link: '/relatorios',\r\n        imageUrl: '/images/relatorios.jpg'\r\n    },\r\n]\r\n\r\nfunction Home() {\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div\r\n                style={{\r\n                    minHeight: '83vh',\r\n                    width: '100%',\r\n                    height: 'auto',\r\n                }}>\r\n                <main className=\"homeMainPost\">\r\n                    <h1>\r\n                        CadTI - MG\r\n                    </h1>\r\n                    <h2>\r\n                        Sistema de Cadastro do Transporte Intermunicipal de Minas Gerais\r\n                    </h2>\r\n                </main>\r\n                <section className='homeCardsContainer'>\r\n                    {featuredPosts.map(({ link, title, description, imageUrl }, i) => (\r\n                        <div key={i} className='homeCard'>\r\n\r\n                            <Link to={link} style={{ textDecoration: 'none' }}>\r\n                                <div className='homeCard'>\r\n                                    <div className=\"homeCardText\">\r\n                                        <h6 className=\"homeCardText\" style={{ fontWeight: 500 }}>\r\n                                            {title}\r\n                                        </h6>\r\n                                        <p className=\"homeCardText\">\r\n                                            {description}\r\n                                        </p>\r\n\r\n                                    </div>\r\n                                    <div className='homeImage'>\r\n                                        <img src={imageUrl} alt={title} className='homeImage' />\r\n                                    </div>\r\n                                </div>\r\n                            </Link>\r\n\r\n                        </div>\r\n                    ))}\r\n                </section>\r\n            </div >\r\n        </React.Fragment >\r\n    )\r\n}\r\n\r\nexport default StoreHOC(['logs'], Home)","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport './veiculos.scss'\r\n\r\nconst menuCards = [\r\n    {\r\n        title: 'Cadastro de Veículos',\r\n        date: '07/Nov',\r\n        description:\r\n            'Cadastrar um novo veículo no sistema',\r\n        imageUrl: '/images/add_new.jpg',\r\n        link: '/cadastro'\r\n    },\r\n    {\r\n        title: 'Alteração de dados',\r\n        date: '07/Nov',\r\n        description:\r\n            'Alterar dados de um veículo',\r\n        link: '/altDados',\r\n        imageUrl: '/images/pen.png'\r\n    },\r\n    {\r\n        title: 'Seguros',\r\n        date: '07/Nov',\r\n        description:\r\n            'Atualizar seguros e apólices',\r\n        link: '/seguros',\r\n        imageUrl: \"/images/car_insurance2.png\"\r\n    },\r\n    {\r\n        title: 'Laudos',\r\n        date: '07/Nov',\r\n        description:\r\n            'Laudos de segurança veicular',\r\n        link: '/laudos',\r\n        imageUrl: \"/images/laudos.png\"\r\n    },\r\n    {\r\n        title: 'Baixa',\r\n        date: '07/Nov',\r\n        description:\r\n            'Baixa de veículos',\r\n        link: '/baixaVeiculo',\r\n        imageUrl: \"/images/remove_doc.png\"\r\n    },\r\n    {\r\n        title: 'Configurações',\r\n        date: '07/Nov',\r\n        description:\r\n            'Chassi, carrocerias, seguradoras, etc',\r\n        link: '/config',\r\n        imageUrl: \"/images/config2.jpg\"\r\n    }\r\n]\r\n\r\nexport default function VeiculosHome(props) {\r\n    const { match } = props\r\n    return (\r\n        <div>\r\n            <section className=\"jumbotron\">\r\n                <h1>\r\n                    Veículos\r\n                </h1>\r\n                <p>\r\n                    Selecione uma das opções abaixo.\r\n                </p>\r\n            </section>\r\n            <section className=\"card\">\r\n                {\r\n                    menuCards.map(({ title, link, imageUrl, description }, i) =>\r\n                        <Link to={match.url + link} key={i} className=\"card__container\">\r\n                            <span className=\"card__image\"> <img src={imageUrl} alt={title} /> </span>\r\n                            <div className=\"card__text\">\r\n                                <h3 >{title}</h3>\r\n                                <p > {description}</p>\r\n                            </div>\r\n                        </Link>\r\n                    )}\r\n            </section>\r\n        </div >\r\n    )\r\n}\r\n","import { setNamesFromIds } from './idsToString'\r\n\r\nexport const setDemand = (demand, redux) => {\r\n    const\r\n        { veiculos, empresas, vehicleDocs, equipamentos, acessibilidade } = redux,\r\n        history = demand?.history,\r\n\r\n        vehicle = veiculos.find(v => v.veiculoId === demand.veiculoId),\r\n        originalVehicle = Object.freeze(vehicle),\r\n\r\n        selectedEmpresa = empresas.find(e => e.razaoSocial === demand?.empresa),\r\n        razaoSocial = selectedEmpresa?.razaoSocial,\r\n        delegatario = razaoSocial\r\n\r\n    let\r\n        selectedVehicle = { ...vehicle } || null,\r\n        alteracoes,\r\n        compartilhado\r\n\r\n    //******************Get the last log updates\r\n    if (Array.isArray(history))\r\n        alteracoes = history.reverse().find(el => el.hasOwnProperty('alteracoes'))?.alteracoes\r\n\r\n    //******************Set Alterações into State and set equipamentosId/acessibilidade array of names for each vehicle\r\n    if (alteracoes) {\r\n        Object.keys(alteracoes).forEach(key => selectedVehicle[key] = alteracoes[key])\r\n\r\n        //Pega o ID do delegatario compartilhado se houver\r\n        compartilhado = empresas.find(e => e.codigoEmpresa === selectedVehicle.compartilhadoId)?.razaoSocial\r\n        if (compartilhado)\r\n            selectedVehicle.compartilhado = compartilhado\r\n\r\n        //Pega os nomes dos equipamentos e acessórios para renderizar\r\n        const { equipamentosId, acessibilidadeId } = alteracoes\r\n        if (equipamentosId) selectedVehicle.equipamentos = setNamesFromIds(equipamentos, equipamentosId)\r\n        if (acessibilidadeId) selectedVehicle.acessibilidade = setNamesFromIds(acessibilidade, acessibilidadeId)\r\n    }\r\n\r\n    //******************Get latest uploaded files per field\r\n    let fileIds = [], allDemandFiles, latestDocs = [], filesPerFieldName = {}\r\n    history\r\n        .filter(el => el.files)\r\n        .map(el => el.files)\r\n        .forEach(array => {\r\n            array.forEach(id => fileIds.push(id))\r\n        })\r\n    allDemandFiles = vehicleDocs.filter(doc => fileIds.indexOf(doc.id) !== -1)\r\n\r\n    let fieldExists = []\r\n    allDemandFiles.forEach(file => {\r\n        const { fieldName } = file.metadata\r\n        if (!fieldExists.includes(fieldName)) {\r\n            fieldExists.push(fieldName)\r\n            filesPerFieldName[fieldName] = [file]\r\n        }\r\n        else filesPerFieldName[fieldName].push(file)\r\n    })\r\n\r\n    Object.keys(filesPerFieldName).forEach(field => {\r\n        const arrayOfFiles = filesPerFieldName[field]\r\n        let lastDoc\r\n        lastDoc = arrayOfFiles.reduce((a, b) => new Date(a.uploadDate) > new Date(b.uploadDate) ? a : b)\r\n        latestDocs.push(lastDoc)\r\n        lastDoc = []\r\n    })\r\n\r\n    //****************** Return the object    \r\n    return {\r\n        ...selectedVehicle, originalVehicle, delegatario, compartilhado, razaoSocial, selectedEmpresa,\r\n        demand, demandFiles: latestDocs, alteracoes, getUpdatedValues\r\n    }\r\n}\r\n\r\nfunction getUpdatedValues(originalObj, newObj) {\r\n    Object.keys(newObj).forEach(key => {\r\n        if (newObj[key] && originalObj[key]) {\r\n\r\n            if (key === 'equipamentosId' || key === 'acessibilidadeId')\r\n                newObj[key].sort((a, b) => a - b)\r\n\r\n            if (newObj[key].toString() === originalObj[key].toString())\r\n                delete newObj[key]\r\n        }\r\n        if (newObj[key] === '' || newObj[key] === 'null' || !newObj[key]) delete newObj[key]\r\n    })\r\n    const updatedFields = newObj\r\n    return updatedFields\r\n}","import axios from \"axios\"\r\n\r\nexport const sizeExceedsLimit = files => {\r\n    if (files[0].size > 3145728) {\r\n        alert('Arquivo excedeu o limite permitido (3MB)')\r\n        return true\r\n    }\r\n}\r\n\r\nexport const handleFiles = (files, state, filesFormTemplate) => {\r\n\r\n    const formData = new FormData()\r\n\r\n    if (files && files[0]) {\r\n\r\n        if (sizeExceedsLimit(files)) return            //limit file Size\r\n\r\n        filesFormTemplate.forEach(obj => {                   //set native file fieldname property for each file attached. Makes sense if multiple files\r\n            for (let keys in state) {\r\n                if (keys.match(obj.name) && state[obj.name]) {\r\n                    formData.set(obj.name, state[obj.name])\r\n                }\r\n                else void 0\r\n            }\r\n        })\r\n        //for (let p of formData) { console.log(p[0], p[1]) }\r\n        return { form: formData }\r\n    }\r\n}\r\n\r\nexport const postFilesReturnIds = async (formData, metadata = {}, completed, filesEndPoint) => {\r\n    let\r\n        files,\r\n        filesIds\r\n\r\n    if (formData instanceof FormData) {\r\n        let filesToSend = new FormData()\r\n\r\n        if (completed)                              //Se a demanda for aprovada é considerada completed, e então o arquivo deixa de ser temporário.\r\n            metadata.tempFile = false\r\n        else\r\n            metadata.tempFile = true\r\n\r\n        filesToSend.append('metadata', JSON.stringify(metadata))\r\n        for (let pair of formData) {\r\n            filesToSend.set(pair[0], pair[1])\r\n        }\r\n\r\n        files = await axios.post(`/api/${filesEndPoint}`, filesToSend)\r\n    }\r\n\r\n    if (files?.data?.file) {\r\n        const filesArray = files.data.file\r\n        filesIds = filesArray.map(f => f.id)\r\n        return filesIds\r\n    }\r\n    else return null\r\n}\r\n\r\nexport const updateFilesMetadata = async (obj, filesCollection) => {\r\n\r\n    const { files, demandFiles } = obj\r\n    let metadata = { tempFile: false }\r\n\r\n    if (obj?.metadata instanceof Object)\r\n        metadata = Object.assign(obj.metadata, metadata)\r\n    //console.log(obj, metadata)\r\n    let ids\r\n\r\n    if (demandFiles && demandFiles[0])\r\n        ids = demandFiles.map(f => f.id)\r\n\r\n    else {\r\n        if (files instanceof FormData) {             //If there's any upload from Seinfra, it will overwrite the latestDocs(demandFiles) before approval\r\n            for (let pair of files) {\r\n                demandFiles.forEach((f, i) => {\r\n                    if (pair[0] === f?.metadata?.fieldName)\r\n                        demandFiles.splice(i, 1)\r\n                })\r\n            }\r\n            ids = demandFiles.map(f => f.id)\r\n        }\r\n    }\r\n\r\n    await axios.put('/api/updateFilesMetadata', { ids, collection: filesCollection, metadata })\r\n        .then(r => console.log(r.data))\r\n}\r\n\r\nexport const removeFile = (name, form) => {\r\n\r\n    const existingFiles = new FormData()\r\n\r\n    if (form instanceof FormData && form.has(name)) {\r\n        for (let p of form) {\r\n            existingFiles.set(p[0], p[1])\r\n        }\r\n\r\n        existingFiles.delete(name)\r\n\r\n        const returnObj = { fileToRemove: name, form: existingFiles, [name]: undefined }\r\n\r\n        //********If form has only 1 key left, remove it from state. */\r\n        const keyCounter = Array.from(form.keys(), k => k).length\r\n\r\n        if (keyCounter <= 1 && (form.has('veiculoId') || form.has('empresaId')))\r\n            return { fileToRemove: undefined, form: undefined, [name]: undefined }\r\n        else\r\n            return returnObj\r\n    }\r\n}","import moment from 'moment'\r\n\r\nexport const checkInputErrors = (sendState, dontSetDate) => {\r\n\r\n    const\r\n        p = document.querySelectorAll('p'),\r\n        inputs = document.querySelectorAll('input')\r\n\r\n    let\r\n        label = [],\r\n        errors = [],\r\n        errString = 'Favor verificar o preenchimento dos seguintes campos: '\r\n\r\n    if (p) {\r\n        p.forEach(el => {\r\n            if (el.textContent === 'Valor inválido' || el.textContent === '✘') {\r\n                const parent = el.parentNode\r\n                const l = parent.querySelectorAll('label')\r\n                label.push(l[0])\r\n            }\r\n        })\r\n    }\r\n    if (inputs && !dontSetDate) {\r\n        inputs.forEach(el => {\r\n            if (el.type === 'date') {\r\n                if (!moment(el.value, 'YYYY-MM-DD', true).isValid()) {\r\n                    const parent = el.parentNode\r\n                    const l = parent.previousSibling\r\n                    label.push(l)\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    if (label[0]) {\r\n        label.forEach(l => errors.push(l.textContent))\r\n        errors.forEach(e => errString += e + ', ')\r\n        errString = errString\r\n            .replace('(kg)', '')\r\n            .replace('(cm)', '')\r\n            .slice(0, -2) + '.'\r\n\r\n        if (sendState) return { openAlertDialog: true, alertType: 'inputError', customMsg: errString, errors }\r\n        return errors\r\n    } else return null\r\n}\r\n\r\nexport const errorHandler = (value, el) => {\r\n    if (!value) return\r\n\r\n    if (el.errorHandler && el.errorHandler(value)) return false\r\n    else if (value && el.errorHandler && !el.errorHandler(value)) return true\r\n\r\n    if (value?.length < el?.minLength) return true\r\n\r\n    if (el.type === 'number') {\r\n        if (value > el.max || value < el.min) return true\r\n        else return false\r\n    }\r\n\r\n    if (typeof value !== 'string') value = value.toString()\r\n    if (el.pattern) return value.match(el.pattern) === null\r\n    else return false\r\n}\r\n\r\nexport const helper = (value, el) => {\r\n    if (!value) return\r\n\r\n    if (el.errorHandler && el.errorHandler(value)) return '✓'\r\n    else if (value && el.errorHandler && !el.errorHandler(value)) return '✘'\r\n\r\n    if (value?.length < el?.minLength) return '✘'\r\n    if (value?.length >= el?.minLength) return '✓'\r\n\r\n    if (typeof value !== 'string') value = value.toString()\r\n    if (value > el.max || value < el.min) return 'Valor inválido'\r\n    else if (value.match(el.pattern) === null) return '✘'\r\n    else if (el.pattern && value.match(el.pattern) !== null) return '✓'\r\n    else return ' '\r\n}\r\n","const vehicle = {\r\n\r\n    collection: 'logs',\r\n    docs: 'vehicleDocs',\r\n    primaryKey: 'veiculoId'\r\n}\r\n\r\nconst { collection, docs, primaryKey } = vehicle\r\n\r\nexport const logRoutesConfig = [\r\n    {\r\n        subject: 'Cadastro de veículo',\r\n        path: '/solicitacoes/cadastro',\r\n        requestAction: 'Cadastro de veículo solicitado',\r\n        responseAction: 'Pendências para o cadastro do veículo',\r\n        concludedAction: 'Veículo cadastrado',\r\n        collection, docs, primaryKey,\r\n    },\r\n    {\r\n        subject: 'Alteração de dados do veículo',\r\n        path: '/solicitacoes/altDados',\r\n        requestAction: 'Alteração de dados de veículo solicitada',\r\n        responseAction: 'Pendências para a alteração de dados veicular',\r\n        concludedAction: 'Dados do veículo alterados',\r\n        collection, docs, primaryKey,\r\n    },\r\n    {\r\n        ...vehicle,\r\n        subject: 'Cadastro/alteração de seguro',\r\n        path: '/solicitacoes/seguros',\r\n        requestAction: 'Cadastro de seguro solicitado',\r\n        responseAction: 'Pendências para o cadastro do seguro',\r\n        concludedAction: 'Seguro cadastrado',\r\n        primaryKey: 'id',\r\n        collection, docs,\r\n\r\n    },\r\n    {\r\n        ...vehicle,\r\n        subject: 'Cadastro de laudo de segurança veicular',\r\n        collection: 'logs',\r\n        path: '/solicitacoes/laudos',\r\n        requestAction: 'Cadastro do laudo solicitado',\r\n        responseAction: 'Pendências para o cadastro do laudo',\r\n        concludedAction: 'Laudo veicular cadastrado',\r\n    },\r\n    {\r\n        subject: 'Baixa de veículo',\r\n        path: '/solicitacoes/baixaVeiculo',\r\n        collection, docs, primaryKey,\r\n    },\r\n    {\r\n        subject: 'Configurações de Veículo',\r\n        collection: 'logs',\r\n        path: '/veiculos/config'\r\n    },\r\n    {\r\n        subject: 'Consultas',\r\n        path: '/consultas'\r\n    },\r\n    {\r\n        subject: 'Cadastro de empresa',\r\n        collection: 'empresaLogs',\r\n        path: '/empresas/cadastro'\r\n    },\r\n    {\r\n        subject: 'Alteração no quadro/dados de sócios',\r\n        requestAction: 'Alteração no quadro/dados de sócios solicitada',\r\n        concludedAction: 'Alteração de sócios cadastrada',\r\n        path: '/solicitacoes/socios',\r\n        docs: 'empresaDocs',\r\n        primaryKey: 'empresaId',\r\n        collection\r\n    },\r\n    {\r\n        subject: 'Alteração estatutária',\r\n        requestAction: 'Alteração estatutária solicitada',\r\n        responseAction: 'Pendências para a alteração estatutária',\r\n        concludedAction: 'Alteração estatutária cadastrada',\r\n        path: '/solicitacoes/altContrato',\r\n        docs: 'empresaDocs',\r\n        primaryKey: 'empresaId',\r\n        collection\r\n    },\r\n    {\r\n        subject: 'Cadastro de procurações/procuradores',\r\n        collection,\r\n        path: '/solicitacoes/procuradores',\r\n        docs: 'empresaDocs',\r\n        primaryKey: 'empresaId',\r\n        requestAction: 'Cadastro de procuração solicitado',\r\n        responseAction: 'Procuração indeferida',\r\n        concludedAction: 'Procuração cadastrada',\r\n    },\r\n]\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import axios from 'axios'\r\nimport { logRoutesConfig } from '../Solicitacoes/logRoutesConfig'\r\nimport { updateFilesMetadata, postFilesReturnIds } from './handleFiles'\r\n\r\nexport async function logGenerator(obj) {\r\n    const path = window.location.pathname\r\n\r\n    let logRoutes = JSON.parse(JSON.stringify(logRoutesConfig))\r\n    logRoutes.forEach((el, i) => el.path = logRoutesConfig[i].path.replace('/veiculos', '').replace('/solicitacoes', '').replace('/empresas', ''))\r\n\r\n    const\r\n        collection = 'logs',\r\n        historyLength = obj?.historyLength,\r\n        commonFields = {\r\n            user: 'Joe Dimaggio',\r\n            createdAt: new Date(),\r\n        }\r\n\r\n    let\r\n        logConfig = logRoutes.find(e => path.match(e.path)),\r\n        log = JSON.parse(JSON.stringify(obj))\r\n\r\n    // if !veiculoId, update to empresaDocs\r\n    let\r\n        filesCollection = 'vehicleDocs',\r\n        filesEndPoint = 'vehicleUpload'\r\n    if (!obj.veiculoId) {\r\n        filesCollection = 'empresaDocs'\r\n        filesEndPoint = 'empresaUpload'\r\n    }\r\n\r\n    const history = Object.assign(obj.history, commonFields)\r\n    log.history = history || {}\r\n\r\n    //Se par, a próxima action é a demanda de cada rota caso contrário a resposta. Depois apaga-se o historyLength */\r\n    if (historyLength || historyLength === 0) {\r\n        if (historyLength % 2 === 0 || historyLength === 0) {\r\n\r\n            if (!obj?.history?.action) log.history.action = logConfig?.requestAction\r\n            log.status = 'Aguardando análise'\r\n        }\r\n        else {\r\n\r\n            if (!obj?.history?.action) log.history.action = logConfig?.responseAction\r\n            log.status = 'Pendências'\r\n        }\r\n    }\r\n\r\n    //**********************if log already exists, no need to inform veiculoId and empresaId**********************\r\n    if (obj?.id && log.empresaId) delete log.empresaId\r\n    if (obj?.id && log.veiculoId) delete log.veiculoId\r\n    delete log.historyLength\r\n\r\n    //**********************If given by the component which called this fuction, overwrite logRoutesConfig*/\r\n    if (!obj.id || obj.subject) log.subject = obj?.subject || logConfig?.subject\r\n\r\n\r\n    //*************************IF DECLINED, UPDATE LOG AND RETURN LOG*/    \r\n    if (obj.declined) {\r\n        log.history.action = 'Solicitação indeferida'\r\n        log.status = 'Solicitação indeferida'\r\n        log.completed = true\r\n\r\n        const post = axios.post('/api/logs', { log, collection })\r\n        return post\r\n    }\r\n\r\n    if (obj.approved && !obj.declined) {\r\n        log.history.action = logConfig?.concludedAction || 'Solicitação concluída'\r\n        log.status = 'Solicitação concluída'\r\n        log.completed = true\r\n        updateFilesMetadata(obj, filesCollection)\r\n    }\r\n\r\n    //********************** Upload files and get their Ids***********************/    \r\n    const filesIds = await postFilesReturnIds(obj?.history?.files, obj?.metadata, log?.completed, filesEndPoint)\r\n\r\n    if (filesIds)\r\n        log.history.files = filesIds\r\n\r\n    const { metadata, approved, demandFiles, ...filteredLog } = log\r\n\r\n    //**********************reestablish path**********************\r\n    logRoutes = JSON.parse(JSON.stringify(logRoutesConfig))\r\n    logConfig = logRoutes.find(e => path.match(e.path))\r\n\r\n    //**********************request and return promisse**********************\r\n\r\n    //console.log(JSON.stringify(filteredLog))\r\n    const post = axios.post('/api/logs', { log: filteredLog, collection })\r\n    return post\r\n}","import React from 'react'\r\n\r\nexport default function autoComplete({ collection = [], datalist, value, empresas }) {    \r\n    \r\n    if (value?.length > 2 && typeof collection !== 'string') {\r\n        if(datalist === 'razaoSocial' && empresas && empresas[0]) collection = empresas\r\n        return (\r\n            <datalist id={datalist}>\r\n                {\r\n                    collection.map((item, index) => {\r\n\r\n                        return (\r\n                            <option key={index}>{item[datalist]}</option>\r\n                        )\r\n                    })}\r\n            </datalist>\r\n        )\r\n    } else {\r\n        return null\r\n    }\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport AutoComplete from '../Utils/autoComplete'\r\nimport './commonStyles.css'\r\n\r\nexport default function SelectEmpresa(props) {\r\n\r\n    const\r\n        { empresas, handleInput, handleBlur, shared, headerTitle } = props,\r\n        { razaoSocial, delegatarioCompartilhado, activeStep, demand } = props.data,\r\n        list = 'razaoSocial'\r\n\r\n    //Configure the form. If shared is present in state, another form will be pusshed into the array (CadVehicles)\r\n    let headerTitles = [{ title: 'Selecione a Viação', list, name: list, value: razaoSocial }]\r\n    if (shared)\r\n        headerTitles.push({ title: 'Empresa autorizada a compartilhar', list, name: 'delegatarioCompartilhado', value: delegatarioCompartilhado })\r\n\r\n    //Render field or title conditionally\r\n    let enableSelect = true\r\n    if (demand)\r\n        enableSelect = false\r\n    else if (activeStep && activeStep > 0)\r\n        enableSelect = false\r\n\r\n    useEffect(() => {\r\n        if (!enableSelect)\r\n            setTimeout(() => {\r\n                document.getElementsByName('razaoSocial')[0].focus()\r\n            }, 300);\r\n    }, [])\r\n\r\n    if (enableSelect) {\r\n\r\n\r\n        return (\r\n            <div className={props.hasOwnProperty('shared') ? 'flex center' : 'paper flex center'} style={{ width: '100%', marginBottom: 0 }}>\r\n                {\r\n                    headerTitles.map(({ title, list, name, value }, i) =>\r\n                        <div className='flexColumn' key={i}>\r\n                            <h4 style={{ margin: '5px 0', textAlign: 'center' }}>{title}</h4>\r\n                            <input\r\n                                list={list}\r\n                                name={name}\r\n                                className='selectEmpresa'\r\n                                value={value}\r\n                                onChange={handleInput}\r\n                                onBlur={handleBlur}\r\n                            />\r\n                            <AutoComplete\r\n                                collection={empresas}\r\n                                datalist={list}\r\n                                value={value}\r\n                            />\r\n                        </div>\r\n                    )\r\n                }\r\n            </div >\r\n        )\r\n    }\r\n    else return (\r\n        <>\r\n            <span className='selectedEmpresa'> {headerTitle || demand?.empresa || ''} </span>\r\n        </>\r\n    )\r\n}","import React, { Fragment } from 'react'\r\n\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport AutoComplete from '../Utils/autoComplete'\r\n//import { clearFormat } from '../Utils/formatValues'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n    textField: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        marginTop: '2px',\r\n        marginBottom: '2px',\r\n\r\n        fontSize: '0.8rem',\r\n        fontColor: '#bbb',\r\n        textAlign: 'center',\r\n    },\r\n    select: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        marginTop: '2px',\r\n        marginBottom: '2px',\r\n        background: '#fafafa',\r\n        fontSize: '0.8rem',\r\n        fontColor: '#bbb',\r\n        textAlign: 'center',\r\n    },\r\n    helperText: {\r\n        margin: '2px 0',\r\n        fontSize: '0.7rem'\r\n    },\r\n}))\r\n\r\nexport default function TextInput({ handleInput, handleBlur, form, data, empresas, selectOptions, disableAll, style = {}, disableSome = [] }) {\r\n\r\n    const classes = useStyles(),\r\n        { helperText } = classes\r\n\r\n    const errorHandler = (el) => {\r\n        let value = data[el.field]\r\n        if (!value) return\r\n\r\n        if (el.errorHandler && el.errorHandler(value)) return false\r\n        else if (value && el.errorHandler && !el.errorHandler(value)) return true\r\n\r\n        if (value?.length < el?.minLength) return true\r\n\r\n        if (el.type === 'number') {\r\n            if (value > el.max || value < el.min) return true\r\n            else return false\r\n        }\r\n\r\n        if (typeof value !== 'string') value = value.toString()\r\n        if (el.pattern) return value.match(el.pattern) === null\r\n        else return false\r\n    }\r\n\r\n    const helper = (el) => {\r\n        let value = data[el.field]\r\n        if (!value) return\r\n        if (el.errorHandler && el.errorHandler(value)) return '✓'\r\n        else if (value && el.errorHandler && !el.errorHandler(value)) return '✘'\r\n\r\n        if (value?.length < el?.minLength) return '✘'\r\n        if (value?.length >= el?.minLength) return '✓'\r\n\r\n        if (typeof value !== 'string') value = value.toString()\r\n        if (value > el.max || value < el.min) return 'Valor inválido'\r\n        else if (value.match(el.pattern) === null) return '✘'\r\n        else if (el.pattern && value.match(el.pattern) !== null) return '✓'\r\n        else return ' '\r\n    }\r\n\r\n    return (\r\n        <div className='flex center' style={{ ...style }}>\r\n            {\r\n                form.map((el, i) => (\r\n                    <Fragment key={i}>\r\n                        <TextField\r\n                            name={el.field}\r\n                            label={el.label}\r\n                            margin={el.margin}\r\n                            className={classes.textField}\r\n                            onChange={handleInput}\r\n                            onBlur={handleBlur}\r\n                            type={el.type || ''}\r\n                            error={errorHandler(el)}\r\n                            helperText={helper(el)}\r\n                            FormHelperTextProps={{ className: helperText }}\r\n                            select={el.select || false}\r\n                            value={data[el.field] || ''}\r\n                            disabled={el.disabled || disableAll || disableSome.includes(el.field) || false}\r\n                            InputLabelProps={{\r\n                                className: classes.textField,\r\n                                shrink: el.type === 'date' || undefined,\r\n                                style: { fontSize: '0.7rem', fontWeight: 400, color: '#888', fontFamily: '\\'Segoe UI\\', Tahoma, Geneva, Verdana, sans-serif' }\r\n                            }}\r\n                            inputProps={{\r\n                                style: {\r\n                                    background: el.disabled && data.disable ? '#fff' : '#fafafa',\r\n                                    fontSize: '0.85rem', textAlign: 'center', color: '#000', width: el.width || 300, height: '7px',\r\n                                    fontFamily: '\\'Segoe UI\\', Tahoma, Geneva, Verdana, sans-serif'\r\n                                },\r\n                                value: `${data[el.field] || ''}`,\r\n                                list: el.datalist || '',\r\n                                maxLength: el.maxLength || '',\r\n                                minLength: el.minLength || '',\r\n                                max: el.max || '',\r\n                            }}\r\n\r\n                            multiline={el.multiline || false}\r\n                            rows={el.rows || null}\r\n                            variant={el.variant || 'filled'}\r\n                            fullWidth={el.fullWidth || false}\r\n                            SelectProps={{\r\n                                style: {\r\n                                    background: el.disabled && data.disable ? '#fff' : '#fafafa',\r\n                                    fontSize: '0.9rem', textAlign: 'center', color: '#555', fontWeight: 400,\r\n                                    width: 325, height: '44px'\r\n                                }\r\n                            }}\r\n                        >\r\n                            {el.select === true ?\r\n                                selectOptions ?\r\n                                    selectOptions.map((opt, i) =>\r\n                                        <MenuItem key={i} value={opt} >\r\n                                            {opt}\r\n                                        </MenuItem>\r\n                                    )\r\n                                    :\r\n                                    el.options.map((opt, i) =>\r\n                                        <MenuItem key={i} value={opt} >\r\n                                            {opt}\r\n                                        </MenuItem>\r\n                                    )\r\n                                : null\r\n                            }\r\n\r\n                        </TextField>\r\n                        {el.autoComplete === true && <AutoComplete\r\n                            collection={data[el.collection]}\r\n                            empresas={empresas}\r\n                            datalist={el.datalist}\r\n                            value={data[el.field] || ''}\r\n                        />\r\n                        }\r\n                    </Fragment>\r\n                ))\r\n            }\r\n        </div>\r\n\r\n    )\r\n}","import React from 'react'\r\n\r\nexport default function FormSubtiltle({ subtitle, style = {} }) {\r\n    return (\r\n        <div className='subtitle' style={style}>\r\n            <i className='material-icons subtitle__helper'>arrow_forward</i>\r\n            <span className='subtitle__text'>\r\n                {subtitle}\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n","export const vistoriaForm = [\r\n    {\r\n        field: 'cilindros',\r\n        label: 'Cilindros',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 12,\r\n        step: 1\r\n    },\r\n    {\r\n        field: 'potencia',\r\n        label: 'Potência (cv)',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 600\r\n    },\r\n    {\r\n        field: 'eixos',\r\n        label: 'Eixos',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 8\r\n    },\r\n    {\r\n        field: 'pneumaticos',\r\n        label: 'Pneumáticos',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 20\r\n    },\r\n    {\r\n        field: 'pesoDianteiro',\r\n        label: 'Peso Dianteiro (kg)',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 12000\r\n    },\r\n    {\r\n        field: 'pesoTraseiro',\r\n        label: 'Peso Traseiro (kg)',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 15000\r\n    },\r\n    {\r\n        field: 'poltronas',\r\n        label: 'Poltronas',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 120\r\n    },\r\n    {\r\n        field: 'piquesPoltrona',\r\n        label: 'Piques poltrona',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 12\r\n    },\r\n    {\r\n        field: 'distanciaMinima',\r\n        label: 'Distância Mínima (cm)',\r\n        margin: 'normal',\r\n        type: 'number',        \r\n        max: 150\r\n    },\r\n    {\r\n        field: 'distanciaMaxima',\r\n        label: 'Distância Máxima (cm)',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 150\r\n    }   \r\n]","import { vistoriaForm } from './vistoriaForm'\r\n\r\nexport const cadVehicleForm = [[{\r\n    field: 'placa',\r\n    label: 'Placa',\r\n    margin: 'normal',\r\n    maxLength: 8,\r\n    pattern: '[a-zA-Z]{3}[-]?[ ]?\\\\d{4}|[A-Z]{3}[-]?[ ]?[0-9]{1}[A-Z]{1}[0-9]{2}'\r\n},\r\n{\r\n    field: 'renavam',\r\n    label: 'Renavam',\r\n    margin: 'normal',\r\n    maxLength: 11,\r\n    pattern: '\\\\d{11}'\r\n},\r\n{\r\n    field: 'utilizacao',\r\n    label: 'Utilização',\r\n    margin: 'normal',\r\n    select: true,\r\n    options: ['Convencional', 'Executivo', 'Leito', 'Semi-Leito', 'Urbano']\r\n},\r\n{\r\n    field: 'nChassi',\r\n    label: 'Número do Chassi',\r\n    margin: 'normal',\r\n    maxLength: 17\r\n},\r\n{\r\n    field: 'modeloChassi',\r\n    label: 'Modelo do Chassi',\r\n    margin: 'normal',\r\n    datalist: 'modeloChassi',\r\n    autoComplete: true,\r\n    collection: 'modelosChassi'\r\n},\r\n{\r\n    field: 'anoChassi',\r\n    label: 'Ano do Chassi',\r\n    margin: 'normal',\r\n    type: 'number',\r\n    max: Number(new Date().getFullYear()),\r\n    min: Number(new Date().getFullYear()) - 10\r\n},\r\n{ \r\n    field: 'valorChassi',\r\n    label: 'Valor do Chassi (R$)',\r\n    margin: 'normal',\r\n    zero: true,\r\n    pattern: '^.{9,12}$',\r\n    minLength: 8,    \r\n    maxLength: 11\r\n},\r\n{\r\n    field: 'modeloCarroceria',\r\n    label: 'Modelo da Carroceria',\r\n    margin: 'normal',\r\n    datalist: 'modelo',\r\n    autoComplete: true,\r\n    collection: 'carrocerias'\r\n},\r\n{\r\n    type: 'number',\r\n    field: 'anoCarroceria',\r\n    label: 'Ano da Carroceria',\r\n    margin: 'normal',\r\n    max: Number(new Date().getFullYear() + 1),\r\n    min: Number(new Date().getFullYear()) - 10\r\n},\r\n{    \r\n    field: 'valorCarroceria',\r\n    label: 'Valor da Carroceria (R$)',\r\n    margin: 'normal',\r\n    zero: true,    \r\n    pattern: '^.{9,12}$',\r\n    minLength: 8,    \r\n    maxLength: 11\r\n},\r\n{\r\n    field: 'dominio',\r\n    label: 'Situação da Propriedade',\r\n    margin: 'normal',\r\n    select: true,\r\n    options: ['Veículo próprio', 'Leasing', 'Possuidor']\r\n},\r\n{\r\n    field: 'cores',\r\n    label: 'Cores',\r\n    margin: 'normal',\r\n    maxLength: 50\r\n}\r\n]]    \r\n    .concat([vistoriaForm])    ","import React from 'react'\r\n\r\nexport default function ClosePopUpButton({ close, title = 'Fechar' }) {\r\n    return (\r\n        <div style={{\r\n            position: 'absolute',\r\n            top: '0.4%',\r\n            right: '0.4%'\r\n        }}>\r\n            <div>\r\n                <i\r\n                    className=\"material-icons right\"\r\n                    title={title}\r\n                    style={{ cursor: 'pointer', color: 'red' }}\r\n                    onClick={close} >\r\n                    close\r\n                </i>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport ClosePopUpButton from '../Reusable Components/ClosePopUpButton'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\n\r\nimport '../Layouts/popUp.css'\r\n\r\nexport default function AddEquipa({ data, type, equipamentos, handleCheck, close }) {\r\n\r\n    if (Array.isArray(equipamentos) && equipamentos[0]?.item) equipamentos = equipamentos.sort((a, b) => a.item.localeCompare(b.item))\r\n\r\n    return <div className='popUpWindow' style={{ right: '25%', left: '25%' }}>\r\n        <h4 className='equipaHeader'>{type === 'equipamentos' ? 'Equipamentos' : 'Itens de Acessibilidade'}</h4> <hr />\r\n        <div className=\"checkListContainer\">\r\n            {\r\n                equipamentos.map((eq, i) =>\r\n                    <span className=\"checkListEquipa\" key={i}>\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                    checked={data[eq.item]}\r\n                                    value={eq.item}\r\n                                    onChange={() => handleCheck(eq.item, type)} />\r\n                            }\r\n                            label={<p className=\"checkListLabel\">{eq.item}</p>}\r\n                        />\r\n                    </span>\r\n                )\r\n            }\r\n        </div>\r\n        <ClosePopUpButton close={close} />\r\n    </div>\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\n\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport TextInput from '../Reusable Components/TextInput'\r\nimport FormSubtiltle from '../Reusable Components/FormSubtiltle'\r\n\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport Button from '@material-ui/core/Button'\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { cadVehicleForm } from '../Forms/cadVehicleForm'\r\n\r\nimport AddEquipa from './AddEquipa'\r\n\r\nimport './veiculos.scss'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    button: {\r\n        marginRight: '15px'\r\n    }\r\n}))\r\n\r\nexport default function ({ redux, data, handleInput, handleBlur, handleEquipa, handleCheck, closeEquipa, resetShared }) {\r\n\r\n    const\r\n        [shared, setShared] = useState(false),\r\n        { button } = useStyles(),\r\n        { empresas, equipamentos, acessibilidade, modelosChassi, carrocerias } = redux,\r\n        { activeStep, addEquipa, subtitle, selectedEmpresa, type, placa } = data,\r\n        form = cadVehicleForm[activeStep]\r\n\r\n    let eqCollection = equipamentos\r\n    if (type === 'acessibilidade') eqCollection = acessibilidade\r\n\r\n    data.modelosChassi = modelosChassi\r\n    data.carrocerias = carrocerias\r\n\r\n    useEffect(() => {               //reset shared after submit\r\n        if (resetShared)\r\n            setShared(false)\r\n    }, [resetShared])\r\n\r\n    return (\r\n        <>\r\n            <header className={activeStep !== 0 ? 'flex center' : 'paper flex center'} style={{ width: '100%' }}>\r\n                <section className='flexColumn' style={{ marginBottom: '15px' }}>\r\n                    <SelectEmpresa\r\n                        data={data}\r\n                        shared={shared}\r\n                        empresas={empresas}\r\n                        headerTitle={placa && selectedEmpresa && `Cadastro de veículo ${placa} - ${selectedEmpresa?.razaoSocial}`}\r\n                        handleBlur={handleBlur}\r\n                        handleInput={handleInput}\r\n                    />\r\n                </section>\r\n                {\r\n                    activeStep === 0 &&\r\n                    <section className=\"flex center\" style={{ width: '100%', margin: '-7px 0 -4px 0' }}>\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                    checked={shared === true}\r\n                                    onChange={() => setShared(!shared)}\r\n                                    value={shared}\r\n                                />\r\n                            }\r\n                            label={\r\n                                <h4 style={{ color: '#2979ff', fontSize: '0.7rem' }}>\r\n                                    Veículo Compartilhado?\r\n                            </h4>\r\n                            }\r\n                        />\r\n                    </section>\r\n                }\r\n            </header>\r\n            {\r\n                selectedEmpresa &&\r\n                <main>\r\n                    {activeStep < 2 &&\r\n                        <section className='paper' style={{ paddingBottom: '25px' }}>\r\n                            <FormSubtiltle subtitle={subtitle[activeStep]} />\r\n                            <TextInput\r\n                                form={form}\r\n                                data={data}\r\n                                handleBlur={handleBlur}\r\n                                handleInput={handleInput}\r\n                            />\r\n                        </section>}\r\n                    {activeStep === 0 &&\r\n                        <section className='flex center' style={{ marginTop: '15px' }}>\r\n                            <Button\r\n                                variant=\"outlined\"\r\n                                size=\"small\"\r\n                                color=\"primary\"\r\n                                className={button}\r\n                                onClick={() => handleEquipa('equipamentos')}\r\n                            >\r\n                                <AddIcon />\r\n                                                Equipamentos\r\n                            </Button>\r\n                            <Button\r\n                                variant=\"outlined\"\r\n                                size=\"small\"\r\n                                color=\"primary\"\r\n                                className={button}\r\n                                onClick={() => handleEquipa('acessibilidade')}\r\n                            >\r\n                                <AddIcon />\r\n                                        Acessibilidade\r\n                            </Button>\r\n                        </section>}\r\n                    {\r\n                        addEquipa && <AddEquipa\r\n                            equipamentos={eqCollection}\r\n                            close={closeEquipa}\r\n                            handleCheck={handleCheck}\r\n                            data={data} />\r\n                    }\r\n                </main>\r\n            }\r\n        </>\r\n    )\r\n}","import React from 'react'\r\n\r\nexport default function RemoveFileButton({ name, removeFile }) {\r\n    return (\r\n        <div style={{\r\n            position: 'absolute',\r\n            top: '0.4%',\r\n            right: '0.4%'\r\n        }}>\r\n            <div>\r\n                <i\r\n                    className=\"material-icons right\"\r\n                    title='Remover arquivo'\r\n                    style={{ cursor: 'pointer', color: 'red' }}\r\n                    onClick={() => removeFile(name)}>\r\n                    close\r\n                        </i>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { Fragment, useState, useEffect } from 'react'\r\nimport Dropzone from 'react-dropzone'\r\n\r\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\r\nimport DescriptionOutlinedIcon from '@material-ui/icons/DescriptionOutlined';\r\nimport RemoveFileButton from './RemoveFileButton';\r\n\r\n\r\nexport default function DragAndDrop({ title, name, formData, handleFiles, dropDisplay, single, style, demandFiles, fileToRemove, removeFile }) {\r\n\r\n    const [fileName, setFileName] = useState()\r\n    const [fileExists, setFileExistance] = useState()\r\n\r\n    //*************Set demandFiles names, if there are any\r\n    useEffect(() => {\r\n        if (demandFiles && demandFiles[0]) {\r\n            demandFiles.forEach(({ filename, metadata }) => {\r\n                if (name === metadata.fieldName) {\r\n                    setFileName(filename)\r\n                    setFileExistance(true)\r\n                }\r\n            })\r\n        }\r\n    }, [demandFiles, name])\r\n\r\n\r\n    //*************If there's formData from props there's a new file being attached.\r\n    useEffect(() => {\r\n        if (formData instanceof FormData) {\r\n            for (let pair of formData.entries()) {\r\n                if (name === pair[0]) {     //Attach the file if there'no command to remove\r\n                    setFileName(pair[1].name)\r\n                    setFileExistance(false)\r\n                    //console.log(pair[0], pair[1])\r\n                }\r\n            }\r\n        } else if (!formData && !demandFiles) setFileName(null)\r\n    }, [formData, name, demandFiles, fileToRemove])\r\n\r\n    //*****************Remove file name from rendered field *********/    \r\n    useEffect(() => {\r\n\r\n        if (fileToRemove === name) {\r\n            const demandFile = demandFiles?.find(f => f?.metadata?.fieldName === fileToRemove)\r\n\r\n            if (fileToRemove && demandFile) {\r\n                setFileName(demandFile.filename)\r\n                setFileExistance(true)\r\n            }\r\n            else if (fileToRemove && fileToRemove === name) {\r\n                setFileName(undefined)\r\n            }\r\n        }\r\n    }, [demandFiles, fileToRemove, handleFiles, name])\r\n\r\n    return (\r\n        <div style={style ? style : null}>\r\n            <div style={{ position: 'relative', marginRight: '8px' }}>\r\n                {title ? <p className='fileInput'>{title || ''}</p>\r\n                    : <br />}\r\n                {fileName && !fileExists &&\r\n                    <RemoveFileButton removeFile={removeFile} name={name} />\r\n                }\r\n            </div>\r\n            <Dropzone onDrop={e => handleFiles(e, name)}>\r\n                {({ getRootProps, getInputProps }) => (\r\n                    <div\r\n                        style={fileExists ? { backgroundColor: '#aaa' } : {}}\r\n                        className={fileName ? 'dropBox fileAttached' : single ? 'dropBox' : 'multipleDropBox'} {...getRootProps()}>\r\n                        <input {...getInputProps()} />\r\n                        {\r\n                            fileName ?\r\n                                <Fragment>\r\n                                    <div>\r\n                                        <DescriptionOutlinedIcon className='icon' />\r\n                                        {fileName}\r\n                                    </div>\r\n                                    {single &&\r\n                                        <span>(clique ou arraste outro arquivo para alterar)</span>\r\n                                    }\r\n                                </Fragment>\r\n                                :\r\n                                <div> <AttachFileIcon className='icon' />\r\n                                    <span>  {dropDisplay}</span>\r\n                                </div>\r\n                        }\r\n                    </div>\r\n                )}\r\n            </Dropzone>\r\n        </div>\r\n    )\r\n}\r\n","export const cadVehicleFiles = [\r\n    { title: 'CRLV do Veículo', name: 'crlv' },\r\n    { title: 'Declaração de Responsabilidade de Manutenção', name: 'declaracao' },\r\n    { title: 'Certificado de Vistoria', name: 'vistoria' },\r\n    { title: 'DAE Quitada', name: 'dae' },\r\n    { title: 'Laudo de Pesagem', name: 'pesagem' },\r\n    //{ title: 'Apólice do Seguro', name: 'apoliceDoc' },\r\n]","export const altDadosFiles = [\r\n    { title: 'Documento de Transferência', name: 'transferenciaDoc' },\r\n    { title: 'Declaração de Responsabilidade de Manutenção', name: 'declaracao' },\r\n    { title: 'Certificado de Vistoria', name: 'vistoria' },\r\n    { title: 'DAE Quitada', name: 'dae' },\r\n    { title: 'Laudo de Pesagem', name: 'pesagem' },\r\n    { title: 'CRLV com nova placa', name: 'newPlateDoc' },\r\n]","import React, { Fragment } from 'react'\r\n\r\nimport DragAndDrop from '../Reusable Components/DragAndDrop'\r\nimport FormSubtiltle from '../Reusable Components/FormSubtiltle'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { cadVehicleFiles } from '../Forms/cadVehicleFiles'\r\nimport { altDadosFiles } from '../Forms/altDadosFiles'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n    root: {\r\n        flexGrow: '1',\r\n        margin: '5px',\r\n        padding: '8px',\r\n    },\r\n\r\n    sendButton: {\r\n        margin: '3% 0 3% 0',\r\n        backgroundColor: 'teal',\r\n        float: 'right'\r\n    },\r\n    text: {\r\n        textAlign: 'left',\r\n        margin: theme.spacing(2),\r\n        fontSize: '0.9rem',\r\n        fontWeight: '500',\r\n        color: '#333'\r\n    },\r\n    item: {\r\n        margin: '0 0 18px 0',\r\n        padding: '0 5px'\r\n    }\r\n}))\r\n\r\nexport default function VehicleDocs({ handleFiles, parentComponent, dropDisplay, formData, insuranceExists, demandFiles, removeFile, fileToRemove }) {\r\n    const { root, item } = useStyles()\r\n\r\n    let filesForm\r\n    if (parentComponent === 'cadastro') filesForm = cadVehicleFiles\r\n    if (parentComponent === 'altDados') filesForm = altDadosFiles\r\n\r\n    return (\r\n        <div className='paper' style={{color: '#555'}} >\r\n            <FormSubtiltle subtitle='Anexe os documentos solicitados nos campos abaixo' />\r\n            <Grid container className={root}>\r\n                {filesForm.map(({ title, name }, k) =>\r\n                    name === 'apoliceDoc' && insuranceExists ? null :\r\n                        <Fragment key={k}>\r\n                            <Grid item xs={10} md={4} className={item}>\r\n                                <DragAndDrop\r\n                                    title={title}\r\n                                    name={name}\r\n                                    formData={formData}\r\n                                    dropDisplay={dropDisplay}\r\n                                    handleFiles={handleFiles}\r\n                                    demandFiles={demandFiles}\r\n                                    removeFile={removeFile}\r\n                                    fileToRemove={fileToRemove}\r\n                                />\r\n                            </Grid>\r\n                        </Fragment>\r\n                )}\r\n            </Grid>\r\n        </div>\r\n    )\r\n}","import axios from 'axios'\r\n//import { logout } from '../auth/logout';\r\n\r\nconst downloadFile = (id, originalName, collection, fieldName) => {\r\n    if (fieldName && fieldName === 'apoliceDoc') collection = 'empresaDocs'\r\n        axios({\r\n            url: `/api/mongoDownload/?collection=${collection}&id=${id}`,\r\n            method: 'GET',\r\n            responseType: 'blob', // important\r\n        }).then((response) => {\r\n            const url = window.URL.createObjectURL(new Blob([response.data]));\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            link.setAttribute('download', originalName);\r\n            document.body.appendChild(link);\r\n            link.click();\r\n        })\r\n            .catch(err => {\r\n                console.log(err)\r\n                //          logout(err)\r\n            })\r\n}\r\n\r\nexport default downloadFile","import React from 'react'\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\nimport InsertDriveFileOutlinedIcon from '@material-ui/icons/InsertDriveFileOutlined';\r\nimport downloadFile from '../Utils/downloadFile';\r\n\r\nconst divContainer = {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    width: '100%',\r\n    alignContent: 'center',\r\n    flexWrap: 'wrap'\r\n}\r\n\r\nconst divFiles = {\r\n    textAlign: 'center',\r\n    alignItems: 'flex-start',\r\n    height: '40px',\r\n    border: '1px #ccc solid',\r\n    padding: '7px 8px 0 8px',\r\n    margin: '1% 1% 0.5% 1%',\r\n    fontSize: '0.8rem',\r\n    backgroundColor: '#f6f6f6',\r\n    borderRadius: '6px',\r\n\r\n}\r\n\r\nconst icon = {\r\n    verticalAlign: 'middle',\r\n    cursor: 'pointer',\r\n    paddingLeft: '2%'\r\n}\r\n\r\nconst fileIcon = {\r\n    verticalAlign: 'middle',\r\n    padding: '0 0% 0 2%',\r\n\r\n}\r\n\r\nexport default function ShowLocalFiles({ form, files, demand, demandFiles, collection, style = {} }) {\r\n\r\n    const createLink = (key, fileName) => {\r\n\r\n        const file = files.get(key)\r\n\r\n        const url = window.URL.createObjectURL(file);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n\r\n        //Se for imagem ou pdf, abrir em outra aba\r\n        if (file && (file.type === 'application/pdf' || file.type.match('image/'))) {\r\n            link.setAttribute('rel', \"noopener\")\r\n            link.setAttribute('target', \"_blank\")\r\n            link.setAttribute('title', fileName)\r\n        }\r\n        else link.setAttribute('download', fileName)\r\n        document.body.appendChild(link);\r\n        link.click();\r\n    }\r\n\r\n    let fileArray = []\r\n\r\n    //Se tiver demanda, pegar os dados do\r\n    if (demandFiles) {\r\n        demandFiles.forEach(file => {\r\n            form.forEach(({ name, title }) => {\r\n                if (file?.metadata?.fieldName === name)\r\n                    fileArray.push({ id: file.id, label: title, fieldName: name, fileName: file.filename, storage: 'server' })\r\n            })\r\n        })\r\n    }\r\n\r\n    //******LÓGICA PARA Q O PUSH() DO FILEARRAY SOBRESCREVA QQ OUTRO OBJETO COM MESMO FIELDNAME [criada]\r\n    if (files) for (let pair of files.entries()) {\r\n        form.forEach(({ name, title }) => {\r\n            if (name === pair[0]) {\r\n                if (pair[1] && pair[1].name) {\r\n                    const index = fileArray.findIndex(obj => obj?.fieldName === name)\r\n                    if (index !== -1)\r\n                        fileArray[index] = { label: title, fieldName: name, fileName: pair[1].name, storage: 'local' }\r\n                    else\r\n                        fileArray.push({ label: title, fieldName: name, fileName: pair[1].name, storage: 'local' })\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    return <React.Fragment>\r\n        <div style={divContainer}>\r\n            {fileArray.map((f, i) =>\r\n                <div style={{ ...divFiles, ...style }} key={i}>\r\n                    <InsertDriveFileOutlinedIcon style={fileIcon} />\r\n                    <span style={{ verticalAlign: 'middle', }}>\r\n                        {' '} {f.label}\r\n                    </span>\r\n                    <GetAppIcon style={icon}\r\n                        onClick={() => f.storage === 'local' ?\r\n                            createLink(f.fieldName, f.fileName)\r\n                            : downloadFile(f.id, f.fileName, collection, f.fieldName)} />\r\n                </div>\r\n            )}\r\n        </div>\r\n    </React.Fragment >\r\n}","import React from 'react'\r\nimport moment from 'moment'\r\nimport downloadFile from '../Utils/downloadFile'\r\n\r\nexport default function StandardTable({ length, title, labels, fields, values, style, docs, alteredElements = [] }) {\r\n\r\n    const dateFormat = value => {\r\n        if (moment(value, 'YYYY-MM-DDTHH:mm:ss.SSSZZ', true).isValid()) {\r\n            return moment(value, moment.ISO_8601, true).format('DD/MM/YYYY')\r\n        }\r\n        else {\r\n            return value\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th className='tHeader'\r\n                        style={style}\r\n                        colSpan={length}>{title}</th>\r\n                </tr>\r\n                <tr>\r\n                    {labels.map((l, i) => <th key={i} style={style}>{l}</th>)}\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    {values.map((v, j) =>\r\n                        <td className='review' key={j}\r\n                            style={{ ...style, color: alteredElements.includes(fields[j]) ? 'red' : '#000' }}\r\n                            onClick={() => docs && docs.id ? downloadFile(docs.id, docs.filename, 'vehicleDocs', docs.metadata.fieldName) : null}>\r\n                            {dateFormat(v)}\r\n                        </td>\r\n                    )}\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\n","import React, { Fragment } from 'react'\r\n\r\nimport ShowLocalFiles from '../Reusable Components/ShowLocalFiles'\r\nimport StandardTable from '../Reusable Components/StandardTable'\r\n\r\nimport Paper from '@material-ui/core/Paper'\r\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        color: theme.palette.text.secondary,\r\n        width: \"100%\",\r\n        padding: '8px 0 5px 0',\r\n        height: 'auto'\r\n    }\r\n}))\r\n\r\nexport default function Revisao({ data, parentComponent, form, filesForm, files }) {\r\n    const\r\n        classes = useStyles(),\r\n        { paper } = classes,\r\n        { acessibilidade, equipamentos, alteracoes, demand, demandFiles } = data,\r\n        originalVehicle = data?.originalVehicle\r\n\r\n    let vehicleDetails = [],\r\n        obj = {},\r\n        newForm = [],\r\n        filledForm = [],\r\n        ultimateData,\r\n        alteredElements = []\r\n\r\n    form.forEach(f => {\r\n        f.forEach(e => {\r\n            if (data.hasOwnProperty([e.field])) {\r\n                Object.assign(obj, { [e.field]: data[e.field] })\r\n                newForm.push(e)\r\n            }\r\n        })\r\n        vehicleDetails.push(obj)\r\n        filledForm.push(newForm)\r\n        obj = {}\r\n        newForm = []\r\n    })\r\n    if (parentComponent === 'cadastro') ultimateData = [\r\n        { subtitle: 'Detalhes do veículo', form: filledForm[0] || [], data: vehicleDetails[0] },\r\n        { subtitle: 'Detalhes do seguro', form: filledForm[1] || [], data: vehicleDetails[1] },\r\n        { subtitle: 'Informações sobre a vistoria', form: filledForm[2] || [], data: vehicleDetails[2] },\r\n    ]\r\n\r\n    if (parentComponent === 'altDados') ultimateData = [\r\n        { subtitle: 'Detalhes do veículo', form: filledForm[0], data: vehicleDetails[0] },\r\n        { subtitle: 'Informações sobre a vistoria', form: filledForm[1], data: vehicleDetails[1] }\r\n    ]\r\n\r\n    if (alteracoes && typeof alteracoes === 'object') alteredElements = Object.keys(alteracoes)\r\n\r\n    if (originalVehicle) {\r\n        Object.keys(originalVehicle).forEach(key => {\r\n            if (data[key] && originalVehicle[key]) {\r\n                if (data[key] !== originalVehicle[key] && !alteredElements.includes(key)) {\r\n                    alteredElements.push(key)\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Paper className={paper}>\r\n                <main className='divTable'>\r\n                    {\r\n                        ultimateData.map(({ subtitle, form, data }, y) =>\r\n                            form && data && <Fragment key={y}>\r\n                                <StandardTable\r\n                                    length={form?.length || 1}\r\n                                    title={subtitle}\r\n                                    labels={form.map(s => s.label)}\r\n                                    fields={form.map(el => el.field)}\r\n                                    values={Object.values(data)}\r\n                                    alteredElements={alteredElements}\r\n                                />\r\n                            </Fragment>\r\n                        )}\r\n                </main>\r\n                {\r\n                    equipamentos && equipamentos[0] &&\r\n                    <section style={{ margin: '0 0 13px 20px' }}>\r\n                        <p style={{ fontWeight: 500, color: '#555' }}> Equipamentos </p>\r\n                        <p>\r\n                            {\r\n                                equipamentos && equipamentos.map((e, i) =>\r\n                                    <span style={{ fontFamily: 'Segoe UI, Tahoma, Geneva, Verdana', fontSize: '12px' }} key={i}>\r\n                                        {i !== equipamentos.length - 1 ? e + ', ' : e}\r\n                                    </span>\r\n                                )\r\n                            }\r\n                        </p>\r\n                    </section>\r\n                }\r\n                {\r\n                    acessibilidade && acessibilidade[0] &&\r\n                    <section style={{ margin: '0 0 13px 20px' }}>\r\n                        <p style={{ fontWeight: 500, color: '#555' }}> Itens de acessibilidade </p>\r\n                        <p>\r\n                            {\r\n                                acessibilidade.map((e, i) =>\r\n                                    <span style={{ fontFamily: 'Segoe UI, Tahoma, Geneva, Verdana', fontSize: '12px' }} key={i}>\r\n                                        {i !== acessibilidade.length - 1 ? e + ', ' : e}\r\n                                    </span>\r\n                                )\r\n                            }\r\n                        </p>\r\n                    </section>\r\n                }\r\n                {(files || demandFiles) &&\r\n\r\n                    //<div style={{ borderTop: '1px solid #ccc', paddingTop:'5px' }}>\r\n                    <div>\r\n                        <p style={{ margin: '0 0 13px 11px', fontWeight: '500', color: '#555' }}>\r\n                            <FileCopyOutlinedIcon style={{ verticalAlign: 'middle', padding: '0 0 0 8px' }} />\r\n                            {' Documentos'}\r\n                        </p>\r\n\r\n                        <ShowLocalFiles\r\n                            demand={demand}\r\n                            collection='vehicleDocs'\r\n                            demandFiles={demandFiles}\r\n                            form={filesForm}\r\n                            files={files}\r\n                        />\r\n                    </div>\r\n\r\n                }\r\n            </Paper >\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\n\r\nexport default function Crumbs({ links, text, demand }) {\r\n    if (demand) {\r\n        links = ['Solicitações', '/solicitacoes']\r\n        text = `solicitação nº ${demand?.numero}`\r\n    }\r\n    \r\n    return (\r\n        <Grid style={{ marginTop: '1%' }}>\r\n            <Breadcrumbs separator=\"›\" aria-label=\"breadcrumb\" >\r\n                <Link\r\n                    to='/' style={{}}\r\n                >\r\n                    <HomeIcon style={{ verticalAlign: 'middle', marginRight: '5px', paddingBottom: '3px' }} />\r\n                    <span style={{ fontSize: '0.8rem', }}>\r\n                        Página inicial\r\n                    </span>\r\n\r\n                </Link>\r\n                <Link color=\"primary\" to={links[1]} style={{ fontSize: '0.8rem' }}>\r\n                    {links[0]}\r\n                </Link>\r\n                <span style={{ fontSize: '0.8rem' }} >{text}</span>\r\n            </Breadcrumbs>\r\n        </Grid>\r\n    )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Button from '@material-ui/core/Button'\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n    button: {\r\n        margin: theme.spacing(1),\r\n        float: 'right'\r\n    },\r\n    backButton: {\r\n        margin: theme.spacing(1),\r\n        float: 'left',\r\n        color: '#333',\r\n        backgroundColor: '#eee'\r\n    },\r\n    textField: {\r\n        marginTop: '20px',\r\n        width: '100%'\r\n    }\r\n}))\r\n\r\nexport default function StepperButtons({ activeStep, setActiveStep, lastStep, handleSubmit, disabled, demand, uniqueStep, declineButtonLabel,\r\n    setShowPendencias, showPendencias, handleInput, info }) {\r\n\r\n    const classes = useStyles(), { backButton, button, textField } = classes\r\n\r\n    let role\r\n    if (demand?.status.match('Pendências')) role = 'empresa'\r\n    if (demand?.status.match('Aguardando')) role = 'seinfra'\r\n\r\n    useEffect(() => {\r\n        function nextShortcut(e) {\r\n            if (e.keyCode === 37 && e.ctrlKey)\r\n                setActiveStep('back')\r\n            if (e.keyCode === 39 && e.ctrlKey)\r\n                setActiveStep('next')\r\n            if (e.keyCode === 13 && e.ctrlKey)\r\n                handleSubmit()\r\n        }\r\n        document.addEventListener('keydown', nextShortcut)\r\n        return () => document.removeEventListener('keydown', nextShortcut)\r\n    })\r\n\r\n\r\n\r\n    return (\r\n        <div style={{ width: '100%' }}>\r\n            {activeStep < lastStep ?\r\n                <>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        className={backButton}\r\n                        title={activeStep !== 0 ? 'Ctrl + ←' : null}\r\n                        onClick={() => setActiveStep('back')}\r\n                        disabled={activeStep === 0}\r\n                    >\r\n                        Voltar\r\n                </Button>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        title={!disabled ? 'Ctrl + →' : null}\r\n                        className={button}\r\n                        onClick={() => setActiveStep('next')}\r\n                        disabled={disabled}\r\n                    >\r\n                        Avançar\r\n                </Button>\r\n                </>\r\n                :\r\n                <div style={{ display: 'flex', flexDirection: 'column', width: '100%' }}>\r\n                    {role === 'seinfra' && !showPendencias ? null\r\n                        :\r\n                        <TextField\r\n                            name='info'\r\n                            className={textField}\r\n                            value={info}\r\n                            label={!demand || role === 'empresa' ? 'Observações/informações complementares' : 'Pendências/irregularidades para a aprovação'}\r\n                            type='text'\r\n                            onChange={handleInput}\r\n                            InputLabelProps={{ shrink: true, style: { fontWeight: 600, marginBottom: '5%' } }}\r\n                            inputProps={{ style: { paddingBottom: '2%' }, maxLength: 600 }}\r\n                            multiline\r\n                            rows={3}\r\n                            variant='outlined'\r\n                        />\r\n                    }\r\n                    <div style={{ display: 'flex', width: '100%' }}>\r\n                        {activeStep === lastStep && !uniqueStep &&\r\n                            <Button\r\n                                variant=\"contained\"\r\n                                className={backButton}\r\n                                title={activeStep !== 0 ? 'Ctrl + ←' : null}\r\n                                onClick={() => setActiveStep('back')}\r\n                                disabled={activeStep === 0}\r\n                            >\r\n                                Voltar\r\n                        </Button>}\r\n                        <div style={{ display: 'flex', justifyContent: 'flex-end', width: '100%' }}>\r\n                            {\r\n                                !demand || role === 'empresa' ?\r\n                                    <Button\r\n                                        variant='contained'\r\n                                        color=\"primary\"\r\n                                        className={button}\r\n                                        onClick={() => handleSubmit()}\r\n                                    >\r\n                                        Enviar solicitação\r\n                                    </Button>\r\n                                    :\r\n                                    <>\r\n                                        <Button\r\n                                            variant='outlined'\r\n                                            color=\"secondary\"\r\n                                            className={button}\r\n                                            onClick={() => setShowPendencias()}\r\n                                        >\r\n                                            {showPendencias ? 'Cancelar' : declineButtonLabel || 'Registrar pendencias'}\r\n                                        </Button>\r\n                                        <Button\r\n                                            variant=\"contained\"\r\n                                            color={showPendencias ? \"secondary\" : \"primary\"}\r\n                                            className={button}\r\n                                            onClick={() => showPendencias ? handleSubmit(false) : handleSubmit(true)}\r\n                                        >\r\n                                            {showPendencias ? 'Indeferir' : 'Aprovar'}\r\n                                        </Button>\r\n                                    </>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\n\r\nexport default function CustomStepper({ activeStep, steps }) {\r\n    return (\r\n        <div className='paper' style={{ padding: '15px', margin: '10px 0' }} >\r\n            <Stepper activeStep={activeStep}>\r\n                {steps.map((label, index) => {\r\n                    const stepProps = {};\r\n                    const labelProps = {};\r\n                    return (\r\n                        <Step key={label}\r\n                            {...stepProps}\r\n                        >\r\n                            <StepLabel {...labelProps}>\r\n                                {label}\r\n                            </StepLabel>\r\n                        </Step>\r\n                    )\r\n                })}\r\n            </Stepper>\r\n        </div>\r\n    )\r\n}","import React, { Fragment } from 'react';\r\nimport clsx from 'clsx';\r\n//import { ErrorIcon, InfoIcon, Close, WarningIcon } from '@material-ui/icons/';\r\nimport { amber, green } from '@material-ui/core/colors';\r\nimport { Snackbar, SnackbarContent, Icon } from '@material-ui/core';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles1 = makeStyles(theme => ({\r\n    success: {\r\n        backgroundColor: green[600],\r\n    },\r\n    error: {\r\n        backgroundColor: theme.palette.error.dark,\r\n    },\r\n    info: {\r\n        backgroundColor: theme.palette.primary.main,\r\n    },\r\n    warning: {\r\n        backgroundColor: amber[700],\r\n    },\r\n    icon: {\r\n        fontSize: 20,\r\n    },\r\n    iconVariant: {\r\n        opacity: 0.9,\r\n        marginRight: theme.spacing(1),\r\n    },\r\n    message: {\r\n        display: 'flex',\r\n        alignItems: 'center'        \r\n    },\r\n}));\r\n\r\nfunction MySnackbarContentWrapper(props) {\r\n    const classes = useStyles1();\r\n    const { className, message, onClose, variant, ...other } = props;\r\n\r\n\r\n    return (\r\n        <SnackbarContent\r\n            className={clsx(classes[variant], className)}\r\n            aria-describedby=\"client-snackbar\"\r\n            message={\r\n                <Fragment>\r\n                    <span id=\"client-snackbar\" className={classes.message}>\r\n                        <Icon>check</Icon>    {message}\r\n                    </span>\r\n                </Fragment>\r\n            }\r\n            {...other}\r\n        />\r\n    );\r\n}\r\n\r\nexport default function CustomizedSnackbars(props) {\r\n    \r\n    return (\r\n        <div>\r\n            <Snackbar\r\n                anchorOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'right',\r\n                }}\r\n                open={props.open}\r\n                autoHideDuration={2000}\r\n                onClose={props.close}\r\n            >\r\n                <MySnackbarContentWrapper\r\n                    variant=\"success\"\r\n                    message={props.msg}                    \r\n                />\r\n            </Snackbar>\r\n        </div>\r\n    );\r\n}","export const formatDate = (date, min) => {\r\n\r\n    const minutes = () => {\r\n        if (new Date(date).getMinutes() < 10) {\r\n            return '0' + new Date(date).getMinutes()\r\n        } else {\r\n            return new Date(date).getMinutes()\r\n        }\r\n    }\r\n\r\n    if (/\\d/.test(date)) {\r\n        let data = new Date(date).getDate() + '/' + (new Date(date).getMonth() + 1) + '/' + new Date(date).getFullYear()// + ', ' + new Date(date).getHours() + ':' + minutes() + 'h'\r\n        if (min) data += ', ' + new Date(date).getHours() + ':' + minutes() + 'h'\r\n        return data.toString()\r\n    } else {\r\n        return date\r\n    }\r\n}\r\n\r\nexport const formatMoney = (value = '') => {\r\n    let v = value.replace(/\\D/g, '');\r\n    v = (v / 100).toFixed(2) + '';\r\n    v = v.replace(\".\", \",\");\r\n    v = v.replace(/(\\d)(\\d{3})(\\d{3}),/g, \"$1.$2.$3,\");\r\n    v = v.replace(/(\\d)(\\d{3}),/g, \"$1.$2,\");\r\n    return v\r\n}\r\n\r\n\r\nexport const formatCpf = (input) => {\r\n    if (!input) return\r\n    else {\r\n        input = input\r\n            .replace(/\\D/g, '') // substitui qualquer caracter que nao seja numero por nada\r\n            .replace(/(\\d{3})(\\d)/, '$1.$2') // captura 2 grupos de numero o primeiro de 3 e o segundo de 1, apos capturar o primeiro grupo ele adiciona um ponto antes do segundo grupo de numero\r\n            .replace(/(\\d{3})(\\d)/, '$1.$2')\r\n            .replace(/(\\d{3})(\\d{1,2})/, '$1-$2')\r\n            .replace(/(-\\d{2})\\d+?$/, '$1') // captura 2 numeros seguidos de um traço e não deixa ser digitado mais nada\r\n    }\r\n    return input\r\n}\r\n\r\n/* export const formatCnpj = (input) => {\r\n    if (!input) return\r\n    return input.replace(/(\\d{2})(\\d{3})(\\d{3})(\\d{4})(\\d{2})/g, \"$1.$2.$3/$4-$5\");\r\n} */\r\n\r\nexport function formatCnpj(input) {\r\n\r\n    const tecla = k => k.keyCode;\r\n    document.addEventListener('keypress', tecla)\r\n\r\n    let\r\n        tam,\r\n        vr = input.toString()\r\n\r\n    vr = vr.replace(\".\", \"\");\r\n    vr = vr.replace(\"/\", \"\");\r\n    vr = vr.replace(\"-\", \"\");\r\n    tam = vr.length + 1;\r\n    if (tecla !== 14) {\r\n        if (tam === 3)\r\n            input = vr.substr(0, 2) + '.';\r\n        if (tam === 6)\r\n            input = vr.substr(0, 2) + '.' + vr.substr(2, 5) + '.';\r\n        if (tam === 10)\r\n            input = vr.substr(0, 2) + '.' + vr.substr(2, 3) + '.' + vr.substr(6, 3) + '/';\r\n        if (tam === 15)\r\n            input = vr.substr(0, 2) + '.' + vr.substr(2, 3) + '.' + vr.substr(6, 3) + '/' + vr.substr(9, 4) + '-' + vr.substr(13, 2);\r\n    }\r\n    return input\r\n}\r\n\r\nexport function clearFormat(input) {\r\n    if (!input) return\r\n    else return input.replace(/(\\.|\\/|-)/g, \"\");\r\n}\r\n\r\nexport function formatPhone(phone) {\r\n    if (!phone) return\r\n\r\n    phone = phone\r\n        .replace(/(?!\\d)./g, '')\r\n        .replace(/(\\d{2})/, '($1) ')\r\n    if (phone.length === 13) phone = phone.replace(/(\\d{4})(\\d)/, '$1-$2')\r\n    if (phone.length === 14) phone = phone.replace(/(\\d{5})(\\d)/, '$1-$2')\r\n\r\n    return phone\r\n}\r\n\r\nexport function formatShare(number) {\r\n    if (!number) return\r\n\r\n    /* if ((number.length === 4 && number.charAt(3) === '0')) {\r\n        console.log(typeof number, number)\r\n        return number\r\n    } else if (number.length === 5 && number.charAt(4) === '0') {\r\n        console.log(typeof number, number, 'ha')\r\n        return number\r\n    }\r\n */\r\n\r\n    /*   if (number.length > 1 && number.search(',') !== -1)\r\n          return number\r\n      if (number.length >= 5) {\r\n          number = Number(number)\r\n          number = +(number.toPrecision(4))\r\n      } */\r\n    if (number.length >= 5)\r\n        number = number.slice(0, 5)\r\n    return number\r\n}","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function AlertDialog({ open, alertType, close, confirm, customTitle, customMessage, tab }) {\r\n\r\n  const createAlert = type => {\r\n    let title, message, subject = ''\r\n    const subjectOptions = ['a empresa', 'o sócio', 'a procuração', 'o veículo', 'o seguro']\r\n\r\n    if (tab || tab === 0) subject = subjectOptions[tab]\r\n\r\n    if (customTitle && customMessage) {\r\n      title = customTitle\r\n      message = customMessage\r\n      return { title, message }\r\n    }\r\n\r\n    if (typeof type === 'object') {\r\n      title = 'Empresa já cadastrada'\r\n      message = `A empresa ${type.razaoSocial} já está cadastrada no sistema com o CNPJ ${type.cnpj}.`\r\n      return { title, message }\r\n    }\r\n\r\n    switch (type) {\r\n      case 'plateNotFound':\r\n        title = 'Placa não encontrada'\r\n        message = 'A placa informada não corresponde a nenhum veículo da frota da viação selecionada. Para cadastrar um novo veículo, selecione a opção Veículos => \"Cadastro de Veículo\" no menu acima.'\r\n        return { title, message }\r\n      case 'invalidPlate':\r\n        title = 'Placa inválida'\r\n        message = 'Certifique-se de que a placa informada é uma placa válida, com três letras seguidas de 4 números (ex: AAA-0000)'\r\n        return { title, message }\r\n      case 'plateExists':\r\n        title = 'Placa já cadastrada!'\r\n        message = 'A placa informada já está cadastrada. Para atualizar seguro, alterar dados ou solicitar baixa, utilize as opções acima. '\r\n        return { title, message }\r\n      case 'invalidModel':\r\n        title = 'Modelo não cadastrado.'\r\n        message = customMessage\r\n        return { title, message }\r\n      case 'inputError':\r\n        title = 'Preenchimento inválido.'\r\n        message = customMessage\r\n        return { title, message }\r\n      case 'fieldsMissing':\r\n        title = 'Favor preencher todos os campos.'\r\n        message = 'Os campos acima são de preenchimento obrigatório. Certifique-se de ter preenchido todos eles.'\r\n        return { title, message }\r\n      case 'invalidInsurance':\r\n        title = 'Favor verificar os dados do seguro.'\r\n        message = 'As informações referentes ao seguro do veículo são obrigatórias. Certifique-se de ter informado todas elas.'\r\n        return { title, message }\r\n      case 'filesNotFound':\r\n        title = 'Arquivos não encontrados'\r\n        message = `Não há nenhum documento aprovado no sistema para ${subject} selecionad${subject.charAt(0)}.\r\n          Caso haja uma solicitação em aberto para ${subject}, acesse a opção \"Solicitações\" no menu superior para ter acesso aos arquivos.`\r\n        return { title, message }\r\n\r\n      case 'empresaNotFound':\r\n        title = 'Empresa não encontrada.'\r\n        message = `A empresa informada não está registrada no sistema. Para cadastrar uma nova empresa, utilize a opção Empresas -> Cadastrar.`\r\n        return { title, message }\r\n      case 'seguradoraNotFound':\r\n        title = 'Seguradora não encontrada.'\r\n        message = `A seguradora informada não está registrada no sistema. Favor verificar o nome da seguradora.`\r\n        return { title, message }\r\n\r\n      case 'alreadyExists':\r\n        title = 'CPF já cadastrado.'\r\n        message = `O CPF informado corresponde a um sócio já cadastrado. \r\n          Para remover ou editar as informações dos sócios, utilize a respectiva opção abaixo.`\r\n        return { title, message }\r\n      case 'numberNotValid':\r\n        title = 'Número inválido.'\r\n        message = 'O número digitado não é válido.'\r\n        return { title, message }\r\n      case 'overShared':\r\n        title = 'Participação societária inválida.'\r\n        message = 'A participação societária informada excede a 100%.'\r\n        return { title, message }\r\n      case 'subShared':\r\n        title = 'Participação societária inválida.'\r\n        message = 'A participação societária informada não soma 100%. Favor informar todos os sócios com suas respectivas participações.'\r\n        return { title, message }\r\n      case 'veiculoPendente':\r\n        title = 'Pendências encontradas para este veículo.'\r\n        message = 'Verifique se há alguma aprovação pendente quanto ao cadastro, seguro, transferência ou alteração de dados do veículo.'\r\n        return { title, message }\r\n      case 'seguroVencido':\r\n        title = 'Pendências encontradas para o seguro deste veículo.'\r\n        message = 'Para regularizar o seguro deste veículo, acesse a opção Veículos=>Seguros no menu acima.'\r\n        return { title, message }\r\n      case 'contratoVencido':\r\n        title = 'Contrato expirado.'\r\n        message = 'O contrato de concessão com o delegatário selecionado está expirado.'\r\n        return { title, message }\r\n      default:\r\n        return { title: null, message: null }\r\n    }\r\n  }\r\n  const { title, message } = createAlert(alertType)\r\n\r\n  if (title && message) return (\r\n    <div>\r\n      <Dialog\r\n        open={open}\r\n        onClose={close}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            {message}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={close} color=\"primary\">\r\n            {confirm ? 'Cancelar' : 'Fechar'}\r\n          </Button>\r\n          {confirm && <Button onClick={close} color=\"primary\" autoFocus>\r\n            Confirmar\r\n          </Button>}\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  )\r\n  else return null\r\n}","const validaDistanciaMinima = (utilizacao, dist) => {\r\n\r\n    const distancias = {\r\n        Convencional: 70,\r\n        Executivo: 79,\r\n        'Semi-Leito': 95,\r\n        Leito: 105,\r\n        Urbano: 65\r\n    }\r\n\r\n    let validDistance, d\r\n\r\n    if (distancias[utilizacao] && dist && dist !== '') {\r\n        dist = Number(dist)\r\n        d = distancias[utilizacao]\r\n\r\n        if (d <= dist)\r\n            validDistance = true\r\n        else\r\n            validDistance = false\r\n    }\r\n    if (validDistance)\r\n        return false\r\n    else if (d)\r\n        return `A distância mínima para a utilização \"${utilizacao}\" é de ${d} centímetros. Altere a distância ou clique em \"voltar\" para alterar a utilização.`\r\n}\r\n\r\nexport default validaDistanciaMinima","import React, { PureComponent, Fragment } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport { setDemand } from '../Utils/setDemand'\r\nimport { handleFiles, removeFile } from '../Utils/handleFiles'\r\nimport { checkInputErrors } from '../Utils/checkInputErrors'\r\nimport { logGenerator } from '../Utils/logGenerator'\r\n\r\nimport CadVeiculoTemplate from './CadVeiculoTemplate'\r\nimport VehicleDocs from './VehicleDocs'\r\nimport Review from './VehicleReview'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport StepperButtons from '../Reusable Components/StepperButtons'\r\nimport CustomStepper from '../Reusable Components/Stepper'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\n\r\nimport { formatMoney } from '../Utils/formatValues'\r\nimport { cadVehicleFiles } from '../Forms/cadVehicleFiles'\r\nimport { cadVehicleForm } from '../Forms/cadVehicleForm'\r\n\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\nimport validateDist from '../Utils/validaDistanciaMinima'\r\n\r\nclass VeiculosContainer extends PureComponent {\r\n    constructor() {\r\n        super()\r\n        this.escFunction = (e) => {\r\n            if (e.keyCode === 27 && this.state.addEquipa)\r\n                this.closeEquipa()\r\n        }\r\n    }\r\n\r\n    state = {\r\n        activeStep: 0,\r\n        steps: ['Dados do Veículo', 'Vistoria e laudos', 'Documentos', 'Revisão'],\r\n        subtitle: ['Informe os dados do veículo.', 'Preencha os campos abaixo conforme a vistoria realizada'],\r\n        razaoSocial: '',\r\n        frota: [],\r\n        delegatarioCompartilhado: '',\r\n        toastMsg: 'Veículo cadastrado!',\r\n        confirmToast: false,\r\n        addEquipa: false,\r\n        openAlertDialog: false,\r\n        dropDisplay: 'Clique ou arraste para anexar'\r\n    }\r\n\r\n    async componentDidMount() {\r\n\r\n        const\r\n            { redux } = this.props,\r\n            { equipamentos, acessibilidade } = redux,\r\n            demand = this.props?.location?.state?.demand\r\n\r\n        if (demand) {\r\n            const demandState = setDemand(demand, redux)\r\n            console.log(demandState)\r\n            this.setState({ ...demandState, activeStep: 3 })\r\n        }\r\n\r\n        //*********Create state[key] for each equipamentos/acessibilidade and turn them to false before a vehicle is selected *********/\r\n        //Se tiver demanda, os equipamentos e acessibilidade são definidos no dataActions para incorporar no estado global\r\n        let\r\n            allEqs = {},\r\n            allAcs = {}\r\n\r\n        equipamentos.forEach(e => Object.assign(allEqs, { [e?.item]: false }))\r\n        acessibilidade.forEach(e => Object.assign(allAcs, { [e?.item]: false }))\r\n\r\n        await this.setState({ ...allEqs, ...allAcs })\r\n        //await this.setState({ ...allEqs, ...allAcs, selectedEmpresa: redux.empresas[0], razaoSocial: 'what' })\r\n\r\n        document.addEventListener('keydown', this.escFunction, false)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.setState({})\r\n        document.removeEventListener('keydown', this.escFunction, false)\r\n    }\r\n\r\n    setActiveStep = async action => {\r\n\r\n        if (this.state.activeStep === 0) {\r\n            const matchPlaca = this.state.frota.filter(v => v.placa === this.state.placa)[0]\r\n            if (matchPlaca) {\r\n                await this.setState({ placa: '' });\r\n                this.setState({ alertType: 'plateExists', openAlertDialog: true })\r\n                return null\r\n            }\r\n        }\r\n\r\n        const { errors } = this.state\r\n        if (errors && errors[0]) {\r\n            await this.setState({ ...this.state, ...checkInputErrors('setState') })\r\n            return\r\n        }\r\n\r\n        const prevActiveStep = this.state.activeStep\r\n        if (action === 'next') this.setState({ activeStep: prevActiveStep + 1 });\r\n        if (action === 'back') this.setState({ activeStep: prevActiveStep - 1 });\r\n        if (action === 'reset') this.setState({ activeStep: 0 })\r\n    }\r\n\r\n    handleInput = async e => {\r\n        const\r\n            { veiculos, empresas } = this.props.redux,\r\n            { name } = e.target\r\n        let\r\n            { value } = e.target\r\n\r\n        this.setState({ [name]: value })\r\n\r\n        switch (name) {\r\n            case 'razaoSocial':\r\n\r\n                let selectedEmpresa = empresas.find(e => e.razaoSocial === value)\r\n\r\n                if (selectedEmpresa) {\r\n                    const { razaoSocial, codigoEmpresa } = selectedEmpresa\r\n                    await this.setState({ selectedEmpresa, razaoSocial, codigoEmpresa })\r\n                    if (value !== selectedEmpresa.razaoSocial) this.setState({ selectedEmpresa: undefined })\r\n\r\n                    const frota = veiculos.filter(v => v.empresa === this.state.razaoSocial)\r\n\r\n                    this.setState({ frota })\r\n\r\n                } else this.setState({ selectedEmpresa: undefined, frota: [], placa: undefined })\r\n                break\r\n\r\n            case 'placa':\r\n                if (typeof value === 'string') {\r\n                    value = value.toLocaleUpperCase()\r\n                    await this.setState({ [name]: value })\r\n                }\r\n                break\r\n\r\n            case ('valorChassi'):\r\n                this.setState({ [name]: formatMoney(value) })\r\n                break\r\n            case ('valorCarroceria'):\r\n                this.setState({ [name]: formatMoney(value) })\r\n                break\r\n\r\n            default: void 0\r\n        }\r\n    }\r\n\r\n    checkValid = async (name, value, collection, stateId, dbName, dbId, alertLabel) => {\r\n\r\n        const item = collection.filter(el => el[dbName].toLowerCase().match(value.toLowerCase()))\r\n        if (value === '') this.setState({ [name]: '', [stateId]: '' })\r\n        if (item[0]) {\r\n            const nombre = item[0][dbName]\r\n            const id = item[0][dbId]\r\n            if (value !== '') {\r\n                await this.setState({ [name]: nombre, [stateId]: id })\r\n\r\n            }\r\n        } else {\r\n            await this.setState({ [name]: '', [stateId]: '' })\r\n            this.setState({\r\n                alertType: 'invalidModel', openAlertDialog: true,\r\n                customMsg: `O modelo de ${alertLabel} não está cadastrado no sistema.`\r\n            })\r\n            document.getElementsByName(name)[0].focus()\r\n        }\r\n    }\r\n\r\n    handleBlur = async e => {\r\n        const\r\n            { empresas, modelosChassi, carrocerias } = this.props.redux,\r\n            { frota, anoCarroceria, anoChassi, utilizacao, distanciaMinima } = this.state,\r\n            { name } = e.target,\r\n            carr = Number(anoCarroceria),\r\n            chas = Number(anoChassi)\r\n\r\n        let\r\n            { value } = e.target\r\n\r\n        const errors = checkInputErrors()\r\n        if (errors) this.setState({ errors })\r\n        else this.setState({ errors: undefined })\r\n\r\n        switch (name) {\r\n            case 'modeloChassi':\r\n                this.checkValid(name, value, modelosChassi, 'modeloChassiId', 'modeloChassi', 'id', 'chassi')\r\n                break\r\n            case 'modeloCarroceria':\r\n                this.checkValid(name, value, carrocerias, 'modeloCarroceriaId', 'modelo', 'id', 'carroceria')\r\n                break\r\n            case 'delegatarioCompartilhado':\r\n                this.checkValid(name, value, empresas, 'compartilhadoId', 'razaoSocial', 'codigoEmpresa')\r\n                break\r\n            case 'anoChassi':\r\n                if (anoCarroceria && chas && (carr !== chas && carr !== chas + 1)) {\r\n                    this.setState({\r\n                        anoChassi: '',\r\n                        openAlertDialog: true,\r\n                        customTitle: 'Ano de chassi inválido.',\r\n                        customMsg: `Ano de chassi incompatível com o ano de carroceria informado.`\r\n                    })\r\n                }\r\n                break\r\n            case 'anoCarroceria':\r\n                if (chas && carr && (carr !== chas && carr !== chas + 1)) {\r\n                    this.setState({\r\n                        anoCarroceria: '',\r\n                        openAlertDialog: true,\r\n                        customTitle: 'Ano de carroceria inválido.',\r\n                        customMsg: `Ano de carroceria incompatível com o ano de chassi informado.`\r\n                    })\r\n                }\r\n                break\r\n            case 'distanciaMinima':\r\n                let errorMsg\r\n                if (utilizacao)\r\n                    errorMsg = validateDist(utilizacao, distanciaMinima)\r\n                if (errorMsg)\r\n                    this.setState({\r\n                        openAlertDialog: true,\r\n                        customTitle: 'Distância mínima inválida.',\r\n                        customMsg: errorMsg,\r\n                        distanciaMinima: ''\r\n                    })\r\n                break\r\n            default: void 0\r\n        }\r\n\r\n        if (name === 'placa' && typeof this.state.frota !== 'string') {\r\n\r\n            if (value.length === 7) {\r\n                const x = value.replace(/(\\w{3})/, '$1-')\r\n                await this.setState({ placa: x })\r\n                value = x\r\n            }\r\n            if (value.length === 8) {\r\n                const x = value.replace(' ', '-')\r\n                await this.setState({ placa: x })\r\n                value = x\r\n            }\r\n            const matchPlaca = frota.find(v => v.placa === value)\r\n            if (matchPlaca) {\r\n                await this.setState({ placa: null });\r\n                value = ''\r\n                this.setState({ alertType: 'plateExists', openAlertDialog: true })\r\n                document.getElementsByName('placa')[0].focus()\r\n            }\r\n        }\r\n    }\r\n\r\n    handleEquipa = async type => {\r\n\r\n        const collection = this.props.redux[type]\r\n        let\r\n            vEquip = [],\r\n            currentEquipa = []\r\n\r\n        await this.setState({ type })\r\n\r\n        //Só precisa pegar a lista e marcar check na hora de abrir o dialog.\r\n        if (this.state.addEquipa === false) {\r\n            if (this.state[type])\r\n                currentEquipa = this.state[type]\r\n\r\n            collection.forEach(({ item }) => {\r\n                currentEquipa.forEach(eq => {\r\n                    if (eq.toLowerCase() === item.toLowerCase())\r\n                        vEquip.push(item)\r\n                })\r\n            })\r\n            vEquip.forEach(ve => this.setState({ [ve]: true }))\r\n        }\r\n\r\n        this.setState({ addEquipa: !this.state.addEquipa })\r\n    }\r\n\r\n    handleCheck = async item => {\r\n        const\r\n            { type } = this.state,\r\n            collection = this.props.redux[type]\r\n\r\n        if (!collection) return\r\n\r\n        let arrayOfEquips = [], ids = [], stateKey\r\n\r\n        if (type === 'equipamentos') stateKey = 'equipamentosId'\r\n        if (type === 'acessibilidade') stateKey = 'acessibilidadeId'\r\n\r\n        await this.setState({ ...this.state, [item]: !this.state[item] })\r\n\r\n        collection.forEach(({ id, item }) => {\r\n            if (this.state[item] === true) {\r\n                arrayOfEquips.push(item)\r\n                ids.push(id)\r\n            }\r\n        })\r\n\r\n        if (arrayOfEquips[0]) this.setState({ [type]: arrayOfEquips, [stateKey]: ids })\r\n        else if (type === 'equipamentos') this.setState({ equipamentos: [], [stateKey]: [] })\r\n        else if (type === 'acessibilidade') this.setState({ acessibilidade: [], [stateKey]: [] })\r\n    }\r\n\r\n    handleCadastro = async approved => {\r\n        const\r\n            { equipamentosId, acessibilidadeId, pesoDianteiro, pesoTraseiro, poltronas, codigoEmpresa, compartilhadoId, modeloChassiId, originalVehicle, getUpdatedValues,\r\n                modeloCarroceriaId, selectedEmpresa, showPendencias, info, form, demand, demandFiles } = this.state,\r\n\r\n            existingVeiculoId = demand?.veiculoId,\r\n            oldHistoryLength = demand?.history?.length || 0\r\n\r\n        let\r\n            veiculoId,\r\n            situacao = 'Cadastro solicitado'\r\n\r\n        let pbt = Number(poltronas) * 93 + (Number(pesoDianteiro) + Number(pesoTraseiro))\r\n        if (isNaN(pbt)) pbt = undefined\r\n\r\n        //**********Prepare the request Object************* */\r\n        let review = {}\r\n\r\n        cadVehicleForm.forEach(form => {\r\n            form.forEach(obj => {\r\n                for (let k in this.state) {\r\n                    if (k === obj.field) Object.assign(review, { [k]: this.state[k] })\r\n                }\r\n            })\r\n        })\r\n\r\n        let { delegatarioCompartilhado, modeloChassi, modeloCarroceria, ...vReview } = review\r\n\r\n        Object.assign(vReview, {\r\n            codigoEmpresa, situacao, pbt, modeloChassiId, modeloCarroceriaId,\r\n            equipamentosId, acessibilidadeId, apolice: 'Seguro não cadastrado'\r\n        })\r\n        vReview.compartilhadoId = compartilhadoId\r\n\r\n        if (demand && originalVehicle)\r\n            vReview = getUpdatedValues(originalVehicle, vReview)     //Save only real changes to the request Object (method from setDemand())\r\n\r\n        const vehicle = humps.decamelizeKeys(vReview)\r\n\r\n        //***************If it doesnt exist, post the new vehicle Object, else get existing Id and update *********** */\r\n\r\n        if (!existingVeiculoId)\r\n            await axios.post('/api/cadastroVeiculo', vehicle)\r\n                .then(res => {\r\n                    veiculoId = res.data\r\n                })\r\n                .catch(err => console.log(err))\r\n        else {\r\n            veiculoId = existingVeiculoId\r\n\r\n            if (demand && approved && !showPendencias)\r\n                situacao = 'Seguro não cadastrado'\r\n\r\n            const\r\n                table = 'veiculos',\r\n                tablePK = 'veiculo_id',\r\n                requestObject = {\r\n                    ...vehicle,\r\n                    situacao\r\n                }\r\n\r\n            await axios.put('/api/updateVehicle', { requestObject, table, tablePK, id: veiculoId })\r\n        }\r\n\r\n        //*****************Generate log ************** */\r\n        const log = {\r\n            empresaId: selectedEmpresa?.codigoEmpresa,\r\n            veiculoId,\r\n            history: {\r\n                info,\r\n                files: form,\r\n            },\r\n            metadata: { veiculoId },\r\n            demandFiles,\r\n            historyLength: oldHistoryLength,\r\n            approved\r\n        }\r\n\r\n        if (demand) log.id = demand?.id\r\n\r\n        logGenerator(log)\r\n            .then(r => console.log(r?.data))\r\n            .catch(err => console.log(err))\r\n\r\n        //*************Confirm send and clear State******************* */\r\n        if (!approved) {\r\n            let toastMsg = 'Solicitação de cadastro enviada.'\r\n            if (demand && demand.status.match('Aguardando'))\r\n                toastMsg = 'Pendências para o cadastro registradas.'\r\n            this.toast(toastMsg)\r\n        }\r\n        else\r\n            this.toast()\r\n\r\n        if (!demand)\r\n            this.resetState()\r\n        else\r\n            setTimeout(() => { this.props.history.push('/solicitacoes') }, 1500)\r\n    }\r\n\r\n    handleFiles = async (files, name) => {\r\n\r\n        if (files && files[0]) {\r\n            await this.setState({ [name]: files[0] })\r\n\r\n            const newState = handleFiles(files, this.state, cadVehicleFiles)\r\n            this.setState({ ...newState, fileToRemove: null })\r\n        }\r\n    }\r\n\r\n    removeFile = async (name) => {\r\n        const\r\n            { form } = this.state,\r\n            newState = removeFile(name, form)\r\n\r\n        this.setState({ ...this.state, ...newState })\r\n    }\r\n\r\n    resetState = () => {\r\n        const\r\n            resetState = {},\r\n            { equipamentos } = this.props.redux,\r\n            resetFiles = {},\r\n            resetEquip = {}\r\n\r\n        cadVehicleForm.forEach(form => {\r\n            form.forEach(obj => {\r\n                Object.keys(obj).forEach(key => {\r\n                    if (key === 'field' && this.state[obj[key]]) Object.assign(resetState, { [obj[key]]: undefined })\r\n                })\r\n            })\r\n        })\r\n        cadVehicleFiles.forEach(({ name }) => {\r\n            Object.assign(resetFiles, { [name]: null })\r\n        })\r\n\r\n        equipamentos.forEach(e => Object.assign(resetEquip, { [e.item]: false }))\r\n\r\n        this.setState({\r\n            ...resetState,\r\n            ...resetFiles,\r\n            ...resetEquip,\r\n            activeStep: 0,\r\n            razaoSocial: '',\r\n            selectedEmpresa: undefined,\r\n            frota: [],\r\n            delegatarioCompartilhado: '',\r\n            form: new FormData(),\r\n            resetShared: true\r\n        })\r\n    }\r\n\r\n    closeEquipa = () => this.setState({ addEquipa: false })\r\n    setShowPendencias = () => this.setState({ showPendencias: !this.state.showPendencias })\r\n    toggleDialog = () => this.setState({ openAlertDialog: !this.state.openAlertDialog })\r\n    toast = toastMsg => this.setState({ confirmToast: !this.state.confirmToast, toastMsg: toastMsg ? toastMsg : this.state.toastMsg })\r\n\r\n    render() {\r\n        const\r\n            { confirmToast, toastMsg, activeStep, openAlertDialog, alertType, steps, selectedEmpresa,\r\n                dropDisplay, form, demand, demandFiles, showPendencias, info, resetShared, customMsg, customTitle } = this.state,\r\n\r\n            { redux } = this.props\r\n\r\n        return <Fragment>\r\n            <Crumbs links={['Veículos', '/veiculos']} text='Cadastro de veículo' demand={demand} selectedEmpresa={selectedEmpresa} />\r\n\r\n            <CustomStepper\r\n                activeStep={activeStep}\r\n                steps={steps}\r\n                setActiveStep={this.setActiveStep}\r\n            />\r\n            <CadVeiculoTemplate\r\n                data={this.state}\r\n                redux={redux}\r\n                handleInput={this.handleInput}\r\n                handleBlur={this.handleBlur}\r\n                handleEquipa={this.handleEquipa}\r\n                handleCheck={this.handleCheck}\r\n                closeEquipa={this.closeEquipa}\r\n                match={this.props.match}\r\n                resetShared={resetShared}\r\n            />\r\n            {activeStep === 2 && <VehicleDocs\r\n                parentComponent='cadastro'\r\n                dropDisplay={dropDisplay}\r\n                formData={form}\r\n                handleFiles={this.handleFiles}\r\n                demandFiles={demandFiles}\r\n                fileToRemove={this.state.fileToRemove}\r\n                removeFile={this.removeFile}\r\n            />}\r\n\r\n            {activeStep === 3 && <Review\r\n                parentComponent='cadastro' files={this.state.form}\r\n                filesForm={cadVehicleFiles} data={this.state}\r\n                form={cadVehicleForm}\r\n            />}\r\n\r\n            {selectedEmpresa && <StepperButtons\r\n                activeStep={activeStep}\r\n                lastStep={steps.length - 1}\r\n                setActiveStep={this.setActiveStep}\r\n                demand={demand}\r\n                setShowPendencias={this.setShowPendencias}\r\n                showPendencias={showPendencias}\r\n                info={info}\r\n                handleSubmit={this.handleCadastro}\r\n                handleInput={this.handleInput}\r\n            //disabled={(typeof placa !== 'string' || placa === '')}\r\n            />}\r\n            <ReactToast open={confirmToast} close={this.toast} msg={toastMsg} />\r\n            {openAlertDialog && <AlertDialog open={openAlertDialog} close={this.toggleDialog} alertType={alertType} customMessage={customMsg} customTitle={customTitle} />}\r\n        </Fragment>\r\n    }\r\n}\r\nconst collections = ['veiculos', 'empresas', 'modelosChassi', 'carrocerias', 'equipamentos', 'acessibilidade', 'getFiles/vehicleDocs']\r\n\r\nexport default StoreHOC(collections, VeiculosContainer)","import { logRoutesConfig } from '../Solicitacoes/logRoutesConfig'\r\n\r\nexport const checkDemand = (id, logsCollection) => {\r\n\r\n    const path = window.location.pathname\r\n\r\n    logRoutesConfig.forEach((el, i) => el.path = logRoutesConfig[i].path.replace('/veiculos', '').replace('/solicitacoes', '').replace('/empresas', ''))\r\n\r\n    const\r\n        component = logRoutesConfig.find(c => path.match(c?.path)),\r\n        subject = component?.subject,\r\n        primaryKey = component?.primaryKey\r\n\r\n    const exists = logsCollection.find(log => log.subject === subject && log[primaryKey] === id.toString() && log.completed === false)\r\n\r\n    if (exists) return exists\r\n    else return false\r\n}\r\n\r\n\r\n\r\n/* export const checkDemand = id => {\r\n    let primaryKey, subject\r\n    const path = window.location.pathname\r\n\r\n    logRoutesConfig.forEach((el, i) => el.path = logRoutesConfig[i].path.replace('/veiculos', '').replace('/solicitacoes', '').replace('/empresas', ''))\r\n\r\n    const\r\n        component = logRoutesConfig.find(c => path.match(c?.path)),\r\n        collection = component?.collection\r\n\r\n    if (collection) {\r\n        if (collection === 'logs') {\r\n            subject = component.subject\r\n            primaryKey = 'veiculoId'\r\n        }\r\n        if (collection === 'empresaLogs') primaryKey = 'codigoEmpresa'\r\n\r\n   const findLog = axios.get(`/api/log?collection=${collection}&subject=${subject}&primaryKey=${primaryKey}&id=${id}`)\r\n        return findLog\r\n\r\n    }\r\n\r\n} */","import { altFormVistoria } from './altFormVistoria'\r\n\r\nexport const altForm = [[{\r\n    field: 'placa',\r\n    label: 'Placa',\r\n    margin: 'normal',\r\n    datalist: 'placa',\r\n    autoComplete: true,\r\n    collection: 'frota',\r\n},\r\n{\r\n    field: 'delegatario',\r\n    label: 'Delegatário',\r\n    margin: 'normal',\r\n    datalist: 'razaoSocial',\r\n    autoComplete: true,\r\n    collection: 'empresas'\r\n},\r\n{\r\n    field: 'compartilhado',\r\n    label: 'Delegatário Compartilhado',\r\n    margin: 'normal',\r\n    datalist: 'razaoSocial',\r\n    autoComplete: true,\r\n    collection: 'empresas'\r\n},\r\n{\r\n    field: 'utilizacao',\r\n    label: 'Utilização',\r\n    margin: 'normal',\r\n    select: true,\r\n    options: ['Convencional', 'Executivo', 'Leito', 'Semi-Leito', 'Urbano']\r\n},\r\n{\r\n    field: 'dominio',\r\n    label: 'Situação da Propriedade',\r\n    margin: 'normal',\r\n    select: true,\r\n    options: ['Veículo próprio', 'Leasing', 'Possuidor']\r\n},\r\n{\r\n    field: 'cores',\r\n    label: 'Cores',\r\n    margin: 'normal',\r\n    maxLength: 50\r\n},\r\n{\r\n    field: 'renavam',\r\n    label: 'Renavam',\r\n    margin: 'normal',\r\n    disabled: true\r\n},\r\n{\r\n    field: 'nChassi',\r\n    label: 'Número do Chassi',\r\n    margin: 'normal',\r\n    maxLength: 17,\r\n    disabled: true\r\n},\r\n{\r\n    field: 'modeloChassi',\r\n    label: 'Modelo do Chassi',\r\n    margin: 'normal',\r\n    disabled: true\r\n},\r\n{\r\n    field: 'anoChassi',\r\n    label: 'Ano do Chassi',\r\n    margin: 'normal',\r\n    type: 'number',\r\n    disabled: true\r\n},\r\n{\r\n    field: 'valorChassi',\r\n    label: 'Valor do Chassi (R$)',\r\n    margin: 'normal',\r\n    zero: true,\r\n    disabled: true\r\n},\r\n{\r\n    field: 'modeloCarroceria',\r\n    label: 'Modelo da Carroceria',\r\n    margin: 'normal',\r\n    disabled: true\r\n},\r\n{\r\n    type: 'number',\r\n    field: 'anoCarroceria',\r\n    label: 'Ano da Carroceria',\r\n    margin: 'normal',\r\n    disabled: true\r\n},\r\n{\r\n    field: 'valorCarroceria',\r\n    label: 'Valor da Carroceria (R$)',\r\n    margin: 'normal',\r\n    zero: true,\r\n    disabled: true\r\n},\r\n\r\n]]\r\n    .concat([altFormVistoria])\r\n    .concat([[]])\r\n    .concat([[]])","export const altFormVistoria = [\r\n  \r\n    {\r\n        field: 'pesoDianteiro',\r\n        label: 'Peso Dianteiro (kg)',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 12000\r\n    },\r\n    {\r\n        field: 'pesoTraseiro',\r\n        label: 'Peso Traseiro (kg)',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 15000\r\n    },\r\n    {\r\n        field: 'poltronas',\r\n        label: 'Poltronas',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 120\r\n    },\r\n    {\r\n        field: 'piquesPoltrona',\r\n        label: 'Piques poltrona',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 12\r\n    },\r\n    {\r\n        field: 'distanciaMinima',\r\n        label: 'Distância Mínima (cm)',\r\n        margin: 'normal',\r\n        type: 'number',        \r\n        max: 150\r\n    },\r\n    {\r\n        field: 'distanciaMaxima',\r\n        label: 'Distância Máxima (cm)',\r\n        margin: 'normal',\r\n        type: 'number',\r\n        max: 150\r\n    }         \r\n]","import React from 'react'\r\n\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport FormSubtiltle from '../Reusable Components/FormSubtiltle'\r\nimport TextInput from '../Reusable Components/TextInput'\r\nimport AddEquipa from './AddEquipa'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { altForm } from '../Forms/altForm'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    button: {\r\n        marginRight: '15px'\r\n    }\r\n}))\r\n\r\nexport default function ({ handleInput, handleBlur, data, handleCheck, handleEquipa, altPlacaOption, showAltPlaca, empresas, equipamentos, acessibilidade, close }) {\r\n\r\n    const\r\n        { activeStep, subtitle, placa, selectedEmpresa, addEquipa, demand, type } = data,\r\n        classes = useStyles(), { button } = classes,\r\n        form = altForm[activeStep]\r\n\r\n    let eqCollection = equipamentos\r\n    if (type === 'acessibilidade') eqCollection = acessibilidade\r\n\r\n    return (\r\n        <div className='flex center'>\r\n            <SelectEmpresa\r\n                data={data}\r\n                empresas={empresas}\r\n                headerTitle={selectedEmpresa && `Alteração de dados ${placa || ''} - ${selectedEmpresa?.razaoSocial}`}\r\n                handleInput={handleInput}\r\n                handleBlur={handleBlur}\r\n            />\r\n            {\r\n                selectedEmpresa &&\r\n                <main>\r\n                    {activeStep < 2 &&\r\n                        <section className='paper'>\r\n                            <FormSubtiltle subtitle={subtitle[activeStep]} />\r\n                            <TextInput\r\n                                form={form}\r\n                                data={data}\r\n                                empresas={empresas}\r\n                                handleBlur={handleBlur}\r\n                                handleInput={handleInput}\r\n                                disableSome={demand ? ['placa', 'delegatario'] : ['delegatario']}\r\n                            />\r\n                        </section>}\r\n\r\n                    {activeStep === 0 &&\r\n                        <section className=\"flex center\">\r\n                            <Button\r\n                                variant=\"outlined\"\r\n                                size=\"small\"\r\n                                color=\"primary\"\r\n                                className={button}\r\n                                onClick={() => handleEquipa('equipamentos')}\r\n                            >\r\n                                <AddIcon />\r\n                                        Equipamentos\r\n                                    </Button>\r\n                            <Button\r\n                                variant=\"outlined\"\r\n                                size=\"small\"\r\n                                color=\"primary\"\r\n                                className={button}\r\n                                onClick={() => handleEquipa('acessibilidade')}\r\n                            >\r\n                                <AddIcon />\r\n                                        Acessibilidade\r\n                            </Button>\r\n                        </section>}\r\n\r\n                    {altPlacaOption && placa.match('[a-zA-Z]{3}[-]?\\\\d{4}') &&\r\n                        <div className='addNewDiv'>\r\n                            <span onClick={() => showAltPlaca()}> → Clique aqui para alterar a placa para o formato Mercosul.</span>\r\n                        </div>\r\n                    }\r\n                    {\r\n                        addEquipa && <AddEquipa\r\n                            type={type}\r\n                            equipamentos={eqCollection}\r\n                            close={close}\r\n                            handleCheck={handleCheck}\r\n                            data={data} />\r\n                    }\r\n                </main>\r\n            }\r\n        </div>\r\n    )\r\n}   ","import React from 'react';\r\nimport DragAndDrop from './DragAndDrop'\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function AlertDialog({ open, close, title, header, inputNames, inputLabels, fileInputName, confirm, handleInput, handleFiles,\r\n  values, formData, dropDisplay, type = 'text' }) {\r\n\r\n  let disabled = true\r\n  const errorHandler = (inputName, value) => {\r\n    if (inputName === 'newPlate') {\r\n      if (value.length < 9 && value.match('[a-zA-Z]{3}?[-]\\\\d{1}\\\\w{1}\\\\d{2}')) {\r\n        disabled = false\r\n        return false\r\n      }\r\n      else {\r\n        disabled = true\r\n        return true\r\n      }\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <Dialog open={open} onClose={close} aria-labelledby=\"form-dialog-title\">\r\n      <DialogTitle id=\"form-dialog-title\">{title}</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          {header}\r\n        </DialogContentText>\r\n        <br />\r\n        {\r\n          inputNames.map((inputName, i) => (\r\n            <TextField\r\n              key={i}\r\n              autoFocus={inputName === 'newPlate' && true}\r\n              name={inputName}\r\n              label={inputLabels[i]}\r\n              onChange={handleInput}\r\n              values={values[i]}\r\n              type={type}\r\n              error={errorHandler(inputName, values[i])}\r\n              fullWidth\r\n              InputLabelProps={{ shrink: true }}\r\n            />\r\n          ))}\r\n        <br /><br />\r\n        <DragAndDrop\r\n          title='Anexar arquivo'\r\n          name={fileInputName}\r\n          formData={formData}\r\n          dropDisplay={dropDisplay}\r\n          handleFiles={handleFiles}\r\n        />\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={close} color=\"primary\">\r\n          Cancelar\r\n              </Button>\r\n        <Button onClick={confirm} color=\"primary\" disabled={disabled}>\r\n          Confirmar\r\n              </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}","import React, { Component, Fragment } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport { checkDemand } from '../Utils/checkDemand'\r\nimport { checkInputErrors } from '../Utils/checkInputErrors'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\nimport { altDadosFiles } from '../Forms/altDadosFiles'\r\nimport { altForm } from '../Forms/altForm'\r\nimport { logGenerator } from '../Utils/logGenerator'\r\nimport { setDemand } from '../Utils/setDemand'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport CustomStepper from '../Reusable Components/Stepper'\r\n\r\nimport AltDadosTemplate from './AltDadosTemplate'\r\nimport VehicleDocs from './VehicleDocs'\r\nimport Review from './VehicleReview'\r\nimport StepperButtons from '../Reusable Components/StepperButtons'\r\n\r\nimport FormDialog from '../Reusable Components/FormDialog'\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\nimport { handleFiles, removeFile } from '../Utils/handleFiles'\r\nimport validateDist from '../Utils/validaDistanciaMinima'\r\n\r\n\r\nclass AltDados extends Component {\r\n\r\n    constructor() {\r\n        super()\r\n        this.escFunction = (e) => {\r\n            if (e.keyCode === 27) {\r\n                if (this.state.addEquipa) this.closeEquipa()\r\n            }\r\n        }\r\n    }\r\n\r\n    state = {\r\n        stepTitles: ['Informe a placa para alterar os dados abaixo ou mantenha as informações atuais e clique em avançar',\r\n            'Altere os dados desejados abaixo e clique em avançar', 'Anexe os documentos solicitados',\r\n            'Revisão das informações e deferimento'],\r\n        steps: ['Alterar dados do Veículo', 'Alterar dados adicionais', 'Documentos', 'Revisão'],\r\n\r\n        subtitle: ['Informe os dados do veículo.', 'Informações adicionais',\r\n            'Anexe os arquivos solicitados', 'Revisão'],\r\n        empresas: [],\r\n        razaoSocial: '',\r\n        compartilhadoId: '',\r\n        frota: [],\r\n        toastMsg: 'Dados atualizados!',\r\n        confirmToast: false,\r\n        activeStep: 0,\r\n        files: [],\r\n        openAlertDialog: false,\r\n        altPlaca: false,\r\n        newPlate: '',\r\n        placa: '',\r\n        addEquipa: false,\r\n        dropDisplay: 'Clique ou arraste para anexar',\r\n        showPendencias: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const\r\n            { redux } = this.props,\r\n            { equipamentos, acessibilidade } = redux,\r\n            demand = this.props?.location?.state?.demand\r\n\r\n        if (demand) {\r\n            const demandState = setDemand(demand, redux)\r\n            console.log(demandState)\r\n            this.setState({ ...demandState, activeStep: 3 })\r\n        }\r\n\r\n        //*********Create state[key] for each equipamentos/acessibilidade and turn them to false before a vehicle is selected *********/\r\n        let\r\n            allEqs = {},\r\n            allAcs = {}\r\n\r\n        equipamentos.forEach(e => Object.assign(allEqs, { [e?.item]: false }))\r\n        acessibilidade.forEach(e => Object.assign(allAcs, { [e?.item]: false }))\r\n\r\n        await this.setState({ ...allEqs, ...allAcs })\r\n\r\n        document.addEventListener('keydown', this.escFunction, false)\r\n    }\r\n\r\n    componentWillUnmount() { this.setState({}) }\r\n\r\n    setActiveStep = async action => {\r\n        const { errors } = this.state\r\n        if (errors && errors[0]) {\r\n            this.setState({ ...this.state, ...checkInputErrors('setState') })\r\n            return\r\n        }\r\n\r\n        const prevActiveStep = this.state.activeStep\r\n        if (action === 'next') this.setState({ activeStep: prevActiveStep + 1 });\r\n        if (action === 'back') this.setState({ activeStep: prevActiveStep - 1 });\r\n        if (action === 'reset') this.setState({ activeStep: 0 })\r\n    }\r\n\r\n    handleInput = async e => {\r\n        const { veiculos, empresas, equipamentos } = this.props.redux,\r\n            { name, value } = e.target\r\n\r\n        if (name === 'razaoSocial') {\r\n            let selectedEmpresa = empresas.find(e => e.razaoSocial === value)\r\n\r\n            if (selectedEmpresa) {\r\n                await this.setState({ razaoSocial: selectedEmpresa.razaoSocial, selectedEmpresa })\r\n                if (value !== selectedEmpresa.razaoSocial) this.setState({ selectedEmpresa: undefined })\r\n\r\n                const frota = veiculos.filter(v => v.empresa === this.state.razaoSocial)\r\n\r\n                this.setState({ frota })\r\n\r\n            } else {\r\n                this.setState({ selectedEmpresa: undefined, frota: [] })\r\n                this.reset()\r\n            }\r\n        }\r\n\r\n        if (name === 'placa' && this.state.frota) {\r\n            const vehicle = this.state.frota.find(v => v.placa === value)\r\n            if (!vehicle) equipamentos.forEach(e => this.setState({ [e]: false }))\r\n        }\r\n\r\n        if (name === 'newPlate') {\r\n            let newPlate = value\r\n            if (typeof newPlate === 'string') {\r\n                newPlate = newPlate.replace(/[a-z]/g, l => l.toUpperCase())\r\n                if (newPlate.match('[A-Z]{3}[0-9]{1}[A-Z]{1}[0-9]{2}')) newPlate = newPlate.replace(/(\\w{3})/, '$1-')\r\n                this.setState({ ...this.state, newPlate })\r\n            }\r\n        } else this.setState({ [name]: value })\r\n    }\r\n\r\n    getId = async (name, value, collection, stateId, dbName, dbId) => {\r\n\r\n        const item = collection.filter(el => el[dbName].toLowerCase().match(value.toLowerCase()))\r\n        if (value === '') this.setState({ [name]: '', [stateId]: '' })\r\n        if (item[0]) {\r\n            const nombre = item[0][dbName]\r\n            const id = item[0][dbId]\r\n            if (value !== '') {\r\n                await this.setState({ [name]: nombre, [stateId]: id })\r\n\r\n            }\r\n        } else {\r\n            await this.setState({ [name]: '', [stateId]: '' })\r\n            this.setState({ openAlertDialog: true, alertType: 'empresaNotFound' })\r\n            document.getElementsByName(name)[0].focus()\r\n        }\r\n    }\r\n\r\n    capitalize = (field, value) => {\r\n        if (!value || typeof value !== 'string') return\r\n        if (field === 'utilizacao') {\r\n            if (value === 'RODOVIARIO') value = 'CONVENCIONAL'\r\n            if (value === 'SEMI LEITO - EXECUTIVO') value = 'Semi-Leito'\r\n            if (value !== 'Semi-Leito') value = value.charAt(0) + value.slice(1).toLowerCase()\r\n        }\r\n        if (field === 'dominio' && value === 'Sim') value = 'Veículo próprio'\r\n        if (field === 'dominio' && value === 'Não') value = 'Possuidor'\r\n\r\n        return value\r\n    }\r\n\r\n    handleBlur = async e => {\r\n        const\r\n            { empresas, logs, equipamentos, acessibilidade } = this.props.redux,\r\n            { frota, demand, utilizacao, distanciaMinima } = this.state,\r\n            { name } = e.target\r\n\r\n        let\r\n            { value } = e.target\r\n\r\n        const errors = checkInputErrors()\r\n        if (errors) this.setState({ errors })\r\n        else this.setState({ errors: undefined })\r\n\r\n        switch (name) {\r\n\r\n            case 'compartilhado':\r\n                this.getId(name, value, empresas, 'compartilhadoId', 'razaoSocial', 'codigoEmpresa')\r\n                break;\r\n            case 'delegatario':\r\n                await this.getId(name, value, empresas, 'codigoEmpresa', 'razaoSocial', 'codigoEmpresa')\r\n                break;\r\n\r\n            case 'distanciaMinima':\r\n                let errorMsg\r\n                if (utilizacao)\r\n                    errorMsg = validateDist(utilizacao, distanciaMinima)\r\n                if (errorMsg) {\r\n                    this.setState({\r\n                        openAlertDialog: true,\r\n                        customTitle: 'Distância mínima inválida.',\r\n                        customMessage: errorMsg,\r\n                        distanciaMinima: ''\r\n                    })\r\n                }\r\n                break\r\n            default:\r\n                void 0\r\n        }\r\n        if (name === 'placa' && value.length > 2 && Array.isArray(this.state.frota)) {\r\n\r\n            let vehicle = this.state.frota.find(v => {\r\n                if (typeof value === 'string') return v.placa.toLowerCase().match(value.toLowerCase())\r\n                else return v.placa.match(value)\r\n            })\r\n\r\n            if (vehicle && typeof vehicle === 'object') {\r\n\r\n                let\r\n                    utilizacao = this.capitalize('utilizacao', vehicle?.utilizacao) || null,\r\n                    dominio = this.capitalize('dominio', vehicle?.dominio) || null,\r\n                    resetEquips = {}\r\n\r\n                //Every time a new vehicle is selected, clear the equips/acessibilidade. Method this.setEquipa() will set it back.\r\n                const allEquips = equipamentos.concat(acessibilidade)\r\n                allEquips.forEach(({ item }) => Object.assign(resetEquips, { [item]: false }))\r\n\r\n                //Add few mor properties to vehicle and preserve vehicle before changes.\r\n                vehicle = Object.assign({}, vehicle, { utilizacao, dominio })\r\n                const originalVehicle = Object.freeze(vehicle)\r\n\r\n                //setState()\r\n                await this.setState({ ...resetEquips, ...vehicle, originalVehicle, disable: true })\r\n\r\n                if (vehicle !== undefined && vehicle.hasOwnProperty('empresa')) this.setState({ delegatario: vehicle.empresa })\r\n\r\n                if (!demand) {\r\n                    const customTitle = 'Solicitação já cadastrada',\r\n                        customMessage = `Já existe uma demanda aberta para o veículo de placa ${vehicle.placa}. Para acessá-la, clique em \"Solicitações\" no menu superior.`\r\n\r\n                    const demandExists = checkDemand(vehicle?.veiculoId, logs)\r\n                    if (demandExists) {\r\n                        await this.setState({ customTitle, customMessage, openAlertDialog: true, delegatario: '' })\r\n                        this.reset()\r\n                        return\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (this.state.placa !== '' && !vehicle) {\r\n                let reset = {}\r\n                if (frota[0]) Object.keys(frota[0]).forEach(k => reset[k] = '')\r\n                this.setState({ alertType: 'plateNotFound', openAlertDialog: true })\r\n                this.setState({ ...reset, disable: false })\r\n            }\r\n        }\r\n    }\r\n\r\n    handleEquipa = type => {\r\n        const collection = this.props.redux[type]\r\n        let vEquip = [], currentEquipa = []\r\n\r\n        if (this.state.addEquipa === false) {\r\n\r\n            if (this.state[type]) currentEquipa = this.state[type]\r\n\r\n            collection.forEach(({ item }) => {\r\n                currentEquipa.forEach(ce => {\r\n                    if (ce.toLowerCase() === item.toLowerCase()) vEquip.push(item)\r\n                })\r\n            })\r\n\r\n            vEquip.forEach(ve => this.setState({ [ve]: true }))\r\n            console.log(this.state)\r\n        }\r\n        this.setState({ addEquipa: !this.state.addEquipa, type })\r\n    }\r\n\r\n    handleCheck = async (item, type) => {\r\n        const collection = this.props.redux[type]\r\n\r\n        if (!collection) return\r\n\r\n        let array = [], ids = [], stateKey\r\n\r\n        if (type === 'equipamentos') stateKey = 'equipamentosId'\r\n        if (type === 'acessibilidade') stateKey = 'acessibilidadeId'\r\n\r\n        await this.setState({ ...this.state, [item]: !this.state[item] })\r\n\r\n        collection.forEach(({ id, item }) => {\r\n            if (this.state[item] === true) {\r\n                array.push(item)\r\n                ids.push(id)\r\n            }\r\n        })\r\n\r\n        if (array[0]) this.setState({ [type]: array, [stateKey]: ids })\r\n        else if (type === 'equipamentos') this.setState({ equipamentos: [], [stateKey]: [] })\r\n        else if (type === 'acessibilidade') this.setState({ acessibilidade: [], [stateKey]: [] })\r\n    }\r\n\r\n    showAltPlaca = () => {\r\n        const title = 'Alteração de placa',\r\n            header = 'Para alterar a placa do veículo para o padrão Mercosul, digite a placa no campo abaixo e anexe o CRLV atualizado do veículo.'\r\n        this.setState({ altPlaca: true, title, header })\r\n    }\r\n\r\n    updatePlate = () => {\r\n        this.setState({ placa: this.state.newPlate })\r\n        this.toggleDialog()\r\n    }\r\n\r\n    handleSubmit = async (approved) => {\r\n        const\r\n            { veiculoId, poltronas, pesoDianteiro, pesoTraseiro, codigoEmpresa, originalVehicle, showPendencias, getUpdatedValues,\r\n                compartilhadoId, newPlate, selectedEmpresa, equipamentosId, acessibilidadeId, info, demand, form, demandFiles } = this.state,\r\n\r\n            oldHistoryLength = demand?.history?.length || 0\r\n\r\n        //****************************Prepare the request Object*******************************\r\n        let pbt = Number(poltronas) * 93 + (Number(pesoDianteiro) + Number(pesoTraseiro))\r\n        if (isNaN(pbt)) pbt = undefined\r\n\r\n        let tempObj = {}\r\n        altForm.forEach(form => {\r\n            form.forEach(obj => {\r\n                for (let k in this.state) {\r\n                    if (k === obj.field && !obj.disabled) {\r\n                        if (this.state[k]) Object.assign(tempObj, { [k]: this.state[k] })\r\n                    }\r\n                }\r\n            })\r\n        })\r\n        tempObj = Object.assign(tempObj, { codigoEmpresa, compartilhadoId, pbt, equipamentosId, acessibilidadeId })\r\n\r\n        if (demand && getUpdatedValues)\r\n            tempObj = getUpdatedValues(originalVehicle, tempObj)  //Save only real changes to the request Object (method from setDemand())\r\n\r\n        let { placa, delegatario, compartilhado, ...camelizedRequest } = tempObj //remove invalid fields for update\r\n\r\n        if (newPlate && newPlate !== '')\r\n            camelizedRequest.placa = newPlate\r\n\r\n        //Se existia um delegatário compartilhado e a alteração é de apagar a relação de compartilhamento, deletar o delCompartilhado\r\n        if ((!this.state.compartilhado || this.state.compartilhado === '') && originalVehicle?.compartilhadoId)\r\n            camelizedRequest.compartilhadoId = 'NULL'\r\n\r\n        if (!approved && Object.keys(camelizedRequest).length === 0) {\r\n            this.setState({ openAlertDialog: true, customTitle: 'Nenhuma alteração', customMessage: 'Não foi realizada nenhuma alteração na solicitação aberta. Para prosseguir, altere algum dos campos ou adicione uma justificativa.' })\r\n            return\r\n        }\r\n        const requestObject = humps.decamelizeKeys(camelizedRequest)\r\n\r\n        //******************GenerateLog********************** */\r\n        let\r\n            history = {\r\n                alteracoes: camelizedRequest,\r\n                info,\r\n                files: form,\r\n            },\r\n            log = {\r\n                empresaId: selectedEmpresa?.codigoEmpresa,\r\n                veiculoId,\r\n                history,\r\n                demandFiles,\r\n                metadata: { veiculoId },\r\n                historyLength: oldHistoryLength,\r\n                approved\r\n            }\r\n        if (demand) log.id = demand?.id\r\n\r\n        logGenerator(log)\r\n            .then(r => console.log(r?.data))\r\n            .catch(err => console.log(err))\r\n\r\n        //*********************if approved, putRequest to update DB  ********************** */\r\n        if (demand && approved && !showPendencias) {\r\n            if (selectedEmpresa.codigoEmpresa !== codigoEmpresa) requestObject.apolice = 'Seguro não cadastrado'\r\n\r\n            const\r\n                table = 'veiculos',\r\n                tablePK = 'veiculo_id'\r\n\r\n            await axios.put('/api/updateVehicle', { requestObject, table, tablePK, id: veiculoId })\r\n        }\r\n\r\n        //******************Clear the state ********************** */\r\n        if (!approved) {\r\n            let toastMsg = 'Solicitação de alteração de dados enviada.'\r\n            if (demand && demand.status.match('Aguardando'))\r\n                toastMsg = 'Pendências para a alteração de dados registradas.'\r\n            this.toast(toastMsg)\r\n        }\r\n        else\r\n            this.toast()\r\n\r\n        if (!demand) {\r\n            await this.setState({ activeStep: 0, razaoSocial: undefined })\r\n            this.reset(true)\r\n        }\r\n        else\r\n            setTimeout(() => { this.props.history.push('/solicitacoes') }, 1500)\r\n    }\r\n\r\n    handleFiles = async (files, name) => {\r\n\r\n        if (files && files[0]) {\r\n            await this.setState({ [name]: files[0] })\r\n\r\n            const newState = handleFiles(files, this.state, altDadosFiles)\r\n            this.setState({ ...newState, fileToRemove: null })\r\n        }\r\n    }\r\n\r\n    removeFile = async (name) => {\r\n        const\r\n            { form } = this.state,\r\n            newState = removeFile(name, form)\r\n\r\n        this.setState({ ...this.state, ...newState })\r\n    }\r\n\r\n    setShowPendencias = () => this.setState({ showPendencias: !this.state.showPendencias })\r\n    toggleDialog = () => this.setState({ altPlaca: !this.state.altPlaca })\r\n    closeAlert = () => this.setState({ openAlertDialog: !this.state.openAlertDialog })\r\n    closeEquipa = () => this.setState({ addEquipa: false })\r\n    toast = toastMsg => this.setState({ confirmToast: !this.state.confirmToast, toastMsg: toastMsg ? toastMsg : this.state.toastMsg })\r\n    reset = resetAll => {\r\n\r\n        let resetFiles = {}\r\n\r\n        altForm.forEach(form => form.forEach(el => this.setState({ [el.field]: '' })))\r\n        altDadosFiles.forEach(({ name }) => {\r\n            Object.assign(resetFiles, { [name]: undefined })\r\n        })\r\n        if (resetAll) this.setState({ ...resetFiles, form: undefined, selectedEmpresa: undefined, razaoSocial: undefined })\r\n        else this.setState({ ...resetFiles, form: undefined })\r\n    }\r\n\r\n    render() {\r\n\r\n        const\r\n            { empresas, equipamentos, acessibilidade } = this.props.redux,\r\n\r\n            { confirmToast, toastMsg, stepTitles, activeStep, steps, altPlaca, selectedEmpresa, openAlertDialog, alertType, customTitle, customMessage,\r\n                dropDisplay, form, title, header, newPlate, demand, showPendencias, info, demandFiles } = this.state\r\n\r\n        return <Fragment>\r\n            <Crumbs links={['Veículos', '/veiculos']} text='Alteração de dados' demand={demand} />\r\n            <CustomStepper\r\n                activeStep={activeStep}\r\n                steps={steps}\r\n                stepTitles={stepTitles}\r\n                setActiveStep={this.setActiveStep}\r\n            />\r\n            <AltDadosTemplate\r\n                data={this.state}\r\n                empresas={empresas}\r\n                equipamentos={equipamentos}\r\n                acessibilidade={acessibilidade}\r\n                setActiveStep={this.setActiveStep}\r\n                altPlacaOption={activeStep === 0}\r\n                handleInput={this.handleInput}\r\n                handleBlur={this.handleBlur}\r\n                showAltPlaca={this.showAltPlaca}\r\n                handleEquipa={this.handleEquipa}\r\n                handleCheck={this.handleCheck}\r\n                close={this.closeEquipa}\r\n            />\r\n            {activeStep === 2 && <VehicleDocs\r\n                parentComponent='altDados'\r\n                dropDisplay={dropDisplay}\r\n                formData={form}\r\n                handleFiles={this.handleFiles}\r\n                demandFiles={demandFiles}\r\n                fileToRemove={this.state.fileToRemove}\r\n                removeFile={this.removeFile}\r\n            />}\r\n            {activeStep === 3 && <Review\r\n                parentComponent='altDados'\r\n                data={this.state}\r\n                form={altForm}\r\n                files={this.state.form}\r\n                filesForm={altDadosFiles}\r\n            />}\r\n            {selectedEmpresa && <StepperButtons\r\n                activeStep={activeStep}\r\n                lastStep={steps.length - 1}\r\n                handleSubmit={this.handleSubmit}\r\n                setActiveStep={this.setActiveStep}\r\n                showPendencias={showPendencias}\r\n                setShowPendencias={this.setShowPendencias}\r\n                info={info}\r\n                handleInput={this.handleInput}\r\n                demand={demand}\r\n            />}\r\n            <ReactToast open={confirmToast} close={this.toast} msg={toastMsg} />\r\n            <FormDialog\r\n                open={altPlaca}\r\n                close={this.toggleDialog}\r\n                title={title}\r\n                header={header}\r\n                inputNames={['newPlate']}\r\n                inputLabels={['Alterar Placa']}\r\n                fileInputName='newPlateDoc'\r\n                values={[newPlate]}\r\n                handleInput={this.handleInput}\r\n                handleFiles={this.handleFiles}\r\n                confirm={this.updatePlate}\r\n                dropDisplay={dropDisplay}\r\n                formData={form}\r\n            />\r\n            {openAlertDialog &&\r\n                <AlertDialog open={openAlertDialog} close={this.closeAlert} alertType={alertType} customMessage={customMessage} customTitle={customTitle} />}\r\n        </Fragment>\r\n    }\r\n}\r\n\r\nconst collections = ['veiculos', 'empresas', 'equipamentos', 'acessibilidade', 'getFiles/vehicleDocs'];\r\n\r\nexport default StoreHOC(collections, AltDados)","export const seguroForm = [\r\n    {\r\n        field: 'seguradora',\r\n        label: 'Seguradora',        \r\n        autoComplete: true,\r\n        datalist: 'seguradora',\r\n        collection: 'seguradoras',\r\n        width: 225\r\n    },\r\n    {       \r\n        field: 'apolice',\r\n        label: 'Apólice',        \r\n        autoComplete: true,\r\n        datalist: 'apolice',\r\n        collection: 'seguros',\r\n        maxLength: 25,\r\n        width: 225\r\n    },    \r\n    {\r\n        type: 'date',\r\n        field: 'dataEmissao',\r\n        label: 'Início da vigência',\r\n        width: 225\r\n    },\r\n    {\r\n        type: 'date',\r\n        field: 'vencimento',\r\n        label: 'Vencimento',\r\n        width: 225\r\n    }]","export const empresaFiles = [\r\n    { title: 'Contrato Social', name: 'contratoSocial' },\r\n    { title: 'Procuração', name: 'procuracao' },\r\n    { title: 'Apólice', name: 'apoliceDoc' },\r\n    { title: 'Alteração de contrato social', name: 'altContratoDoc' }\r\n]","import React, { Fragment } from 'react'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport TextInput from '../Reusable Components/TextInput'\r\nimport AutoComplete from '../Utils/autoComplete'\r\nimport DragAndDrop from '../Reusable Components/DragAndDrop'\r\nimport StepperButtons from '../Reusable Components/StepperButtons'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport Chip from '@material-ui/core/Chip'\r\n\r\nimport Add from '@material-ui/icons/Add'\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport Search from '@material-ui/icons/Search'\r\n\r\nimport { seguroForm } from '../Forms/seguroForm'\r\nimport './veiculos.scss'\r\nimport ShowLocalFiles from '../Reusable Components/ShowLocalFiles'\r\nimport { empresaFiles } from '../Forms/empresaFiles'\r\nimport FormSubtiltle from '../Reusable Components/FormSubtiltle'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    textField: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        width: '25%',\r\n        minWidth: 310,\r\n        fontSize: '0.8rem',\r\n        fontColor: '#bbb',\r\n        textAlign: 'center',\r\n    },\r\n}))\r\n\r\nexport default function SegurosTemplate({ empresas, data, seguros, seguradoras, enableAddPlaca, handleInput, handleBlur,\r\n    addPlate, removeFromInsurance, handleFiles, handleSubmit, enableChangeApolice, showAllPlates, removeFile, setShowPendencias }) {\r\n\r\n    const { selectedEmpresa, placa, apolice, addedPlaca, allVehicles, frota, demandFiles, fileToRemove, demand, insurance, dropDisplay, apoliceDoc,\r\n        showPendencias, info, renderedPlacas } = data\r\n\r\n    data.seguradoras = seguradoras\r\n\r\n    const classes = useStyles(), { textField } = classes\r\n\r\n    const getOwner = ({ compartilhado, outsider, irregular, delCompartilhado, owner }, e) => {\r\n\r\n        e.target.title = 'Veículo próprio'\r\n        if (compartilhado)\r\n            e.target.title = `Veículo próprio. Compartilhado por: ${delCompartilhado}`\r\n        if (outsider)\r\n            e.target.title = `Autorizado compartilhamento. Proprietário: ${owner}`\r\n        if (irregular)\r\n            e.target.title = `NÃO autorizado compartilhamento! Proprietário: ${owner}`\r\n    }\r\n\r\n    const insuranceExists = seguros.some(s => s.apolice === apolice)\r\n    return (\r\n        <Fragment>\r\n            <div style={{ width: '100%', display: 'flex', flexDirection: 'column' }}>\r\n                <Crumbs links={['Veículos', '/veiculos']} text='Seguros' demand={demand} />\r\n                <SelectEmpresa\r\n                    data={data}\r\n                    empresas={empresas}\r\n                    handleInput={handleInput}\r\n                    handleBlur={handleBlur}\r\n                />\r\n                {selectedEmpresa &&\r\n                    <section className=\"paper\">\r\n                        <FormSubtiltle subtitle='Informe os dados do seguro.' />\r\n                        <TextInput\r\n                            form={seguroForm}\r\n                            data={data}\r\n                            handleBlur={handleBlur}\r\n                            handleInput={handleInput}\r\n                        />\r\n                        {insuranceExists &&\r\n                            <div className='addNewDiv'>\r\n                                <span onClick={() => enableChangeApolice()}> → Clique aqui para adicionar nova apólice mantendo as placas abaixo selecionadas.</span>\r\n                            </div>\r\n                        }\r\n                    </section>\r\n                }\r\n                {\r\n                    selectedEmpresa && enableAddPlaca &&\r\n                    <main className='paper' style={{ textAlign: 'center', color: '#555' }}>\r\n                        <p>Utilize as opções abaixo para filtrar, adicionar ou excluir placas desta apólice</p>\r\n                        <section className='flex spaceBetween' style={{ paddingTop: '17px' }}>\r\n                            <div>\r\n                                <TextField\r\n                                    inputProps={{\r\n                                        name: 'addedPlaca',\r\n                                        list: 'placa'\r\n                                    }}\r\n                                    InputLabelProps={{\r\n                                        style: { fontSize: '0.8rem' }\r\n                                    }}\r\n                                    label='Insira a placa'\r\n                                    className={textField}\r\n                                    value={addedPlaca}\r\n                                    onChange={handleInput}\r\n                                    onBlur={handleBlur}\r\n                                />\r\n                                <AutoComplete\r\n                                    collection={allVehicles}\r\n                                    datalist='placa'\r\n                                    value={addedPlaca}\r\n                                />\r\n                                <Button\r\n                                    size=\"small\"\r\n                                    variant=\"contained\"\r\n                                    className={classes.button}\r\n                                    style={{ margin: '10px 0 10px 0' }}\r\n                                    onClick={() => addPlate(addedPlaca)}\r\n                                >\r\n                                    <Add /> Adicionar\r\n                            </Button>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <TextField\r\n                                    inputProps={{\r\n                                        name: 'placa',\r\n                                    }}\r\n                                    InputLabelProps={{\r\n                                        style: { fontSize: '0.8rem' }\r\n                                    }}\r\n                                    label='Filtrar'\r\n                                    className={textField}\r\n                                    value={placa || ''}\r\n                                    onChange={handleInput}\r\n                                    onBlur={handleBlur}\r\n                                />\r\n                                <Search style={{ marginTop: '18px' }} />\r\n                            </div>\r\n\r\n                            {!demand ?\r\n                                <DragAndDrop\r\n                                    name='apoliceDoc'\r\n                                    formData={apoliceDoc}\r\n                                    dropDisplay={dropDisplay}\r\n                                    handleFiles={handleFiles}\r\n                                    demandFiles={demandFiles}\r\n                                    removeFile={removeFile}\r\n                                    fileToRemove={fileToRemove}\r\n                                    style={{ padding: '0 10px', margin: '0 10px', width: '28%', minWidth: '320px' }}\r\n                                />\r\n                                : demandFiles[0] &&\r\n                                <div style={{ width: '225px', marginTop: '15px' }}>\r\n                                    <ShowLocalFiles\r\n                                        demand={demand}\r\n                                        collection='empresaDocs'\r\n                                        demandFiles={demandFiles}\r\n                                        form={empresaFiles}\r\n                                        style={{ width: '200px' }}\r\n                                    //files={files}\r\n                                    />\r\n                                </div>\r\n                            }\r\n\r\n                        </section>\r\n\r\n                        <div className='addNewDiv' style={{ justifyContent: 'flex-start', padding: '10px' }}>\r\n                            <span onClick={() => showAllPlates()}>→ Clique aqui para selecionar placas</span>\r\n                        </div>\r\n\r\n                        {/********************************* Lista de placas vinculadas (Chips) ********************************************/}\r\n\r\n                        {insurance?.placas && insurance?.placas[0]\r\n                            ?\r\n                            <div style={{ marginTop: '15px' }}>\r\n                                Placas vinculadas a apólice {insurance.apolice}\r\n                            </div>\r\n                            :\r\n                            <div style={{ marginTop: '30px' }}></div>\r\n                        }\r\n                        {insurance && insurance.placas && apolice && apolice.length > 2 && renderedPlacas && renderedPlacas[0] &&\r\n                            <>\r\n                                <p style={{ fontSize: '0.7rem', marginBottom: '10px', marginTop: '3px', color: '#787b6e' }} >\r\n                                    Selecionado{renderedPlacas.length > 1 ? 's' : ''} {renderedPlacas.length} veículo{renderedPlacas.length > 1 ? 's' : ''} de {frota?.length}\r\n                                </p>\r\n                                <div className=\"placasChipContainer\">\r\n                                    {\r\n                                        renderedPlacas.map(({ placa, compartilhado, outsider, irregular, delCompartilhado, owner }, i,) =>\r\n\r\n                                            <div onMouseOver={e => getOwner({ compartilhado, outsider, irregular, delCompartilhado, owner }, e)} key={i}>\r\n                                                <Chip\r\n                                                    key={i}\r\n                                                    label={placa}\r\n                                                    onDelete={() => removeFromInsurance(placa)}\r\n                                                    className={\r\n                                                        compartilhado ? 'chip-compartilhado'\r\n                                                            : outsider ? 'chip-outsider'\r\n                                                                : irregular ? 'chip-irregular'\r\n                                                                    : 'chip'}\r\n                                                    variant=\"outlined\"\r\n                                                />\r\n                                            </div>\r\n                                        )\r\n                                    }\r\n                                </div>\r\n                            </>\r\n                        }\r\n                    </main>}\r\n            </div >\r\n            {\r\n                apolice && (insurance || enableAddPlaca) && !demand ?\r\n                    <div style={{ minHeight: '60px', position: 'flex' }}>\r\n                        <Button\r\n                            size=\"small\"\r\n                            color='primary'\r\n                            className='saveButton'\r\n                            variant=\"contained\"\r\n                            onClick={() => handleSubmit()}\r\n                        //disabled={!renderedPlacas[0] || !apoliceDoc ? true : false}\r\n                        >\r\n                            Salvar <span>&nbsp;&nbsp; </span> <SaveIcon />\r\n                        </Button>\r\n                    </div>\r\n                    :\r\n                    selectedEmpresa && demand ?\r\n                        <StepperButtons\r\n                            uniqueStep={true}\r\n                            declineButtonLabel='Indeferir'\r\n                            demand={demand}\r\n                            setShowPendencias={setShowPendencias}\r\n                            showPendencias={showPendencias}\r\n                            info={info}\r\n                            handleSubmit={handleSubmit}\r\n                            handleInput={handleInput}\r\n                        />\r\n                        : null\r\n            }\r\n        </Fragment >\r\n    )\r\n}","import React from 'react'\r\nimport ClosePopUpButton from '../Reusable Components/ClosePopUpButton'\r\nimport '../Layouts/popUp.css'\r\n\r\nfunction ShowAllPlates({ items, title, data, close, selectAll, handleCheck, selectAllPlates }) {\r\n\r\n    return (\r\n        <div className=\"popUpWindow row\">\r\n            <h6>{title} Clique em \"X\" ou pressione 'esc' para voltar</h6>\r\n            <div style={{ margin: '10px 0', fontSize: '0.8rem' }}>\r\n                <input\r\n                    id='all'\r\n                    type='checkbox'\r\n                    checked={selectAll === true}\r\n                    onChange={() => selectAllPlates()} />\r\n                <label htmlFor='all'>{selectAll ? 'Desmarcar todas selecionadas' : 'Selecionar todas'}</label>\r\n            </div>\r\n\r\n            <main className=\"checkListContainer\">\r\n                {\r\n                    items.map((item, i) =>\r\n                        <div className=\"checkListItem\" key={i}>\r\n                            <input\r\n                                id={i}\r\n                                type='checkbox'\r\n                                checked={data[item] === true}\r\n                                onChange={() => handleCheck(item)} />\r\n                            <label htmlFor={i}>{item}</label>\r\n                        </div>\r\n                    )\r\n                }\r\n            </main>\r\n            <ClosePopUpButton close={close} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ShowAllPlates\r\n","import React from 'react';\r\n\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function ConfigAddDialog({ open, close, title, helperMessage, marca, marcas, selectMarca, newElement, handleInput, addNewElement }) {\r\n\r\n    return (\r\n        <div>\r\n            <Dialog open={open} onClose={close} aria-labelledby=\"form-dialog-title\">\r\n                <DialogTitle id=\"form-dialog-title\">{title}</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        {helperMessage}\r\n                    </DialogContentText>\r\n                    <div className=\"editFields\">\r\n                        {marcas && <div className=\"configMarca\">\r\n                            <TextField\r\n                                onChange={selectMarca}\r\n                                value={marca}\r\n                                label='Selecione uma marca'\r\n                                select={true}\r\n                                InputLabelProps={{ shrink: true }}\r\n                                SelectProps={{\r\n                                    style: {\r\n                                        fontSize: '0.9rem', color: '#555', fontWeight: 400,\r\n                                        width: 325, height: '44px'\r\n                                    }\r\n                                }}\r\n                            >\r\n                                {marcas.map(({ marca }, i) =>\r\n                                    <MenuItem key={i} value={marca} >\r\n                                        {marca}\r\n                                    </MenuItem>\r\n                                )}\r\n                            </TextField>\r\n                        </div>}\r\n                        <div className=\"configField\">\r\n                            <TextField\r\n                                autoFocus\r\n                                margin=\"dense\"\r\n                                name='newElement'\r\n                                label=\"Inserir\"\r\n                                type=\"text\"\r\n                                onChange={handleInput}\r\n                                value={newElement}\r\n                                fullWidth\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <br /><br /><br />\r\n\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={close} color=\"primary\">\r\n                        Cancelar\r\n              </Button>\r\n                    <Button onClick={() => addNewElement()} color=\"primary\">\r\n                        Confirmar\r\n              </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}","export const setEmpresaDemand = (demand, redux, socios) => {\r\n\r\n    const { pathname } = document.location\r\n    let associateKeys = { name: 'nomeSocio', id: 'socioId' }\r\n\r\n    if (pathname.match('procurador'))\r\n        associateKeys = { name: 'nomeProcurador', id: 'procuradorId' }\r\n\r\n    const\r\n        { empresas, empresaDocs } = redux,\r\n        { name, id } = associateKeys,\r\n        history = demand?.history || [],\r\n        length = history?.length,\r\n\r\n        selectedEmpresa = empresas.find(e => e.codigoEmpresa === demand?.empresaId),\r\n        razaoSocial = selectedEmpresa?.razaoSocial\r\n\r\n    let\r\n        lastUpdate,\r\n        newMembers = [],\r\n        oldMembers = [],\r\n        latestDoc\r\n\r\n    if (history[0]) lastUpdate = history[length - 1]\r\n\r\n    if (lastUpdate) {\r\n        newMembers = lastUpdate?.newMembers || []\r\n        oldMembers = lastUpdate?.oldMembers || []\r\n    }\r\n\r\n    //******************Get latest uploaded files per field\r\n\r\n    const\r\n        latestDocId = history\r\n            .reverse()\r\n            .find(el => el.files)?.files || []\r\n\r\n    if (latestDocId[0])\r\n        latestDoc = empresaDocs.find(doc => doc.id === latestDocId[0])\r\n\r\n    if (oldMembers[0])\r\n        socios.forEach(s => {\r\n            oldMembers.forEach(om => {\r\n                if (s[id] === om[id])\r\n                    Object.keys(om).forEach(key => {\r\n                        s[key] = om[key]\r\n                    })\r\n            })\r\n        })\r\n\r\n    const\r\n        filteredSocios = socios\r\n            .concat(newMembers)\r\n            .sort((a, b) => a[name].localeCompare(b[name]))\r\n\r\n    //****************** Return the object\r\n    return {\r\n        razaoSocial, selectedEmpresa, demand, latestDoc, newMembers, oldMembers, getUpdatedValues, filteredSocios\r\n    }\r\n}\r\n\r\nfunction getUpdatedValues(originalObj, newObj) {\r\n    Object.keys(newObj).forEach(key => {\r\n        if (newObj[key] && originalObj[key]) {\r\n\r\n            if (key === 'equipamentosId' || key === 'acessibilidadeId')\r\n                newObj[key].sort((a, b) => a - b)\r\n\r\n            if (newObj[key].toString() === originalObj[key].toString())\r\n                delete newObj[key]\r\n        }\r\n        if (newObj[key] === '' || newObj[key] === 'null' || !newObj[key]) delete newObj[key]\r\n    })\r\n    const updatedFields = newObj\r\n    return updatedFields\r\n}","import React, { Component, Fragment } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\nimport moment from 'moment'\r\nimport { sizeExceedsLimit } from '../Utils/handleFiles'\r\nimport SeguroTemplate from './SegurosTemplate'\r\nimport ShowAllPlates from './ShowAllPlates'\r\nimport ConfigAddDialog from './ConfigAddDialog'\r\nimport { checkInputErrors } from '../Utils/checkInputErrors'\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\nimport { seguroForm } from '../Forms/seguroForm'\r\nimport { logGenerator } from '../Utils/logGenerator'\r\nimport { setEmpresaDemand } from '../Utils/setEmpresaDemand'\r\nimport { removeFile } from '../Utils/handleFiles'\r\n\r\n\r\nclass Seguro extends Component {\r\n\r\n    constructor() {\r\n        super()\r\n        this.escFunction = (e) => {\r\n            if (e.keyCode === 27) {\r\n                if (this.state.openAddDialog) this.toggleDialog()\r\n                if (this.state.showAllPlates) this.setState({ showAllPlates: false })\r\n            }\r\n        }\r\n    }\r\n\r\n    state = {\r\n        addedPlaca: '',\r\n        razaoSocial: '',\r\n        seguradora: '',\r\n        deletedVehicles: [],\r\n        toastMsg: 'Seguro atualizado!',\r\n        confirmToast: false,\r\n        dropDisplay: 'Clique ou arraste para anexar a apólice',\r\n        showAllPlates: false,\r\n        showPendencias: false,\r\n        selectAll: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const\r\n            { redux } = this.props,\r\n            demand = this.props?.location?.state?.demand\r\n\r\n        if (demand) {\r\n            const\r\n                demandState = setEmpresaDemand(demand, redux, []),\r\n                { latestDoc, newMembers, oldMembers, filteredSocios, ...filteredState } = demandState,\r\n                history = demand?.history[0],\r\n                insurance = {}\r\n\r\n            seguroForm.forEach(({ field }) => {\r\n                if (history.hasOwnProperty(field))\r\n                    insurance[field] = history[field]\r\n            })\r\n\r\n            const insuranceVehicles = redux.veiculos\r\n                .filter(v => history.vehicleIds.some(id => id === v.veiculoId))\r\n\r\n            insurance.placas = insuranceVehicles.map(v => v.placa)\r\n            insurance.veiculos = insuranceVehicles.map(v => v.veiculoId)\r\n\r\n            const seguradoraId = history?.seguradoraId\r\n\r\n            await this.setState({ ...this.state, ...filteredState, ...insurance, insurance, demand, seguradoraId, demandFiles: [latestDoc] })\r\n\r\n            await this.filterInsurances()\r\n            this.renderPlacas()\r\n        }\r\n        document.addEventListener('keydown', this.escFunction, false)\r\n    }\r\n    //Se uma viação válida estiver selecionada, filtra sua frota e os veículos que apesar de não possuir os tem na apólice de seguro\r\n    filterInsurances = async () => {\r\n        const\r\n            { seguros } = this.props.redux,\r\n            { selectedEmpresa } = this.state,\r\n            { codigoEmpresa } = selectedEmpresa,\r\n            filteredInsurances = seguros.filter(seguro => seguro.codigoEmpresa === codigoEmpresa),\r\n            dataFromServer = await axios.get(`/api/allVehicles?codigoEmpresa=${codigoEmpresa}`),\r\n            allVehicles = humps.camelizeKeys(dataFromServer?.data) || [],\r\n            allPlates = allVehicles.map(vehicle => vehicle.placa).sort(),\r\n            frota = allVehicles.filter(v => v.codigoEmpresa === codigoEmpresa),\r\n            ownedPlacas = frota.map(v => v.placa)\r\n\r\n        //console.log(\"Seguro -> componentDidMount -> allVehicles\", allVehicles, allPlates, ownedPlacas)\r\n        this.setState({ seguros: filteredInsurances, allVehicles, frota, ownedPlacas, allPlates })\r\n    }\r\n\r\n    //Verifica se o seguro já existe\r\n    checkExistance = async inputValue => {\r\n\r\n        const\r\n            seguros = JSON.parse(JSON.stringify(this.props.redux.seguros)),\r\n            { selectedEmpresa, demand } = this.state,\r\n            { codigoEmpresa } = selectedEmpresa,\r\n            s = [...seguros.filter(se => se.codigoEmpresa === codigoEmpresa)]\r\n\r\n        let insurance = { ...s.find(s => s.apolice === inputValue) }\r\n\r\n        if (demand && this.state.insurance)\r\n            insurance = this.state.insurance\r\n\r\n        const insuranceExists = Object.keys(insurance).length > 0\r\n\r\n        if (insuranceExists) {\r\n            const\r\n                dataEmissao = moment(insurance.dataEmissao).format('YYYY-MM-DD'),\r\n                vencimento = moment(insurance.vencimento).format('YYYY-MM-DD'),\r\n                { seguradora, seguradoraId } = insurance\r\n\r\n            await this.setState({ seguradora, seguradoraId, dataEmissao, vencimento, insurance })\r\n            return\r\n        }\r\n        else this.setState({ dataEmissao: '', vencimento: '', deletedVehicles: [], insurance: {} })\r\n    }\r\n\r\n    //Marca as placas que possuem compartilhamento por outra empresa. Acionado ao se informar a apólice (caso já exista)   \r\n    renderPlacas = placas => {\r\n        const { allVehicles, insurance, ownedPlacas } = this.state\r\n        //console.log(\"allVehicles\", allVehicles)\r\n\r\n        if (insurance) {\r\n            //Se passar as placas como argumento se trata do filtro do searchBar. Senão é a renderização depois de preencher a apólice\r\n            if (!placas) placas = insurance.placas || []\r\n\r\n            let renderedPlacas = []\r\n            placas.forEach(p => {\r\n                const\r\n                    veiculo = allVehicles.find(v => v.placa === p),\r\n                    { placa, empresa, compartilhado } = veiculo,\r\n                    vehicleDetails = { placa, owner: empresa, delCompartilhado: compartilhado }\r\n\r\n                //Se o veículo não for próprio\r\n                if (!ownedPlacas.includes(placa)) {\r\n                    //Se constar com compartilhado de outra viação, está fora da frota da empresa, senão pode estar irregular\r\n                    if (compartilhado)\r\n                        Object.assign(vehicleDetails, { outsider: true })\r\n                    else\r\n                        Object.assign(vehicleDetails, { irregular: true })\r\n                }\r\n                //Se o veículo for próprio:\r\n                else {\r\n                    if (compartilhado)\r\n                        vehicleDetails.compartilhado = true\r\n                    else\r\n                        vehicleDetails.compartilhado = false\r\n                }\r\n                renderedPlacas.push(vehicleDetails)\r\n            })\r\n            this.setState({ renderedPlacas })\r\n        }\r\n    }\r\n\r\n    handleInput = async e => {\r\n\r\n        let { value } = e.target\r\n        const\r\n            { name } = e.target,\r\n            { empresas, seguradoras } = this.props.redux,\r\n            { selectedEmpresa, allVehicles, insurance, apolice, dataEmissao, vencimento, newInsurance, seguradora } = this.state\r\n\r\n        this.setState({ [name]: value })\r\n\r\n        switch (name) {\r\n            case 'razaoSocial':\r\n                let selectedEmpresa = empresas.find(e => e.razaoSocial === value)\r\n\r\n                if (selectedEmpresa) {\r\n                    await this.setState({ razaoSocial: selectedEmpresa.razaoSocial, selectedEmpresa })\r\n                    if (value !== selectedEmpresa.razaoSocial) this.setState({ selectedEmpresa: undefined })\r\n                    this.filterInsurances()\r\n\r\n                } else {\r\n                    this.setState({ selectedEmpresa: undefined, frota: [] })\r\n                    this.clearFields()\r\n                }\r\n                break\r\n\r\n            case 'apolice':\r\n                await this.checkExistance(value)\r\n                this.renderPlacas()\r\n                break\r\n\r\n            case 'seguradora':\r\n                const selectedSeguradora = seguradoras.find(sg => sg.seguradora === value)\r\n                if (selectedSeguradora) {\r\n                    this.setState({ seguradoraId: selectedSeguradora.id })\r\n                }\r\n                break\r\n            case 'placa':\r\n                let placas = []\r\n                if (insurance?.placas) {\r\n                    if (insurance.placas[0] && insurance.placas[0] !== null)\r\n                        placas = insurance.placas.sort()\r\n\r\n                    if (value !== undefined && value.length > 2 && placas[0]) {\r\n                        if (typeof value === 'string')\r\n                            placas = insurance.placas.filter(p => p.toLowerCase().match(value.toLowerCase())).sort()\r\n                        else\r\n                            placas = insurance.placas.filter(p => p.match(value)).sort()\r\n                    }\r\n                    this.renderPlacas(placas)\r\n                }\r\n                break\r\n            case 'addedPlaca':\r\n                const vehicleFound = allVehicles.find(v => v.placa === value)\r\n                if (vehicleFound) this.setState({ vehicleFound })\r\n                break;\r\n            default:\r\n                void 0\r\n        }\r\n\r\n        // *************NEW INSURANCE CHECK / UPDATE STATE****************\r\n        const fields = ['seguradora', 'apolice', 'dataEmissao', 'vencimento']\r\n        const checkFields = fields.every(f => this.state[f] && this.state[f] !== '')\r\n\r\n        if (name !== 'razaoSocial' && !newInsurance && checkFields && !insurance) {\r\n            let seguradoraId\r\n            const selectedSeguradora = seguradoras.find(sg => sg.seguradora === this.state.seguradora)\r\n            if (selectedSeguradora) seguradoraId = selectedSeguradora.id\r\n\r\n            const newInsurance = {\r\n                empresa: selectedEmpresa.razaoSocial,\r\n                codigoEmpresa: selectedEmpresa.codigoEmpresa,\r\n                apolice, seguradora, seguradoraId, dataEmissao, vencimento, placas: [], veiculos: []\r\n            }\r\n            await this.setState({ insurance: newInsurance, seguradoraId })\r\n        }\r\n    }\r\n\r\n    handleBlur = e => {\r\n\r\n        const\r\n            { seguradoras, seguros } = this.props.redux,\r\n            { seguradora, selectedEmpresa } = this.state,\r\n            { name } = e.target,\r\n            codigoEmpresa = selectedEmpresa?.codigoEmpresa\r\n\r\n        if (name === 'seguradora') {\r\n            let filteredInsurances = []\r\n\r\n            const valid = seguradoras.find(s => s.seguradora.toLowerCase().match(seguradora.toLowerCase()))\r\n            if (valid && seguradora.length > 2)\r\n                this.setState({ seguradora: valid.seguradora, seguradoraId: valid.id })\r\n            if (!valid && seguradora.length > 2)\r\n                this.setState({ openAlertDialog: true, alertType: 'seguradoraNotFound', seguradora: undefined })\r\n\r\n            if (selectedEmpresa && !seguradora) {\r\n                filteredInsurances = seguros.filter(s => s.codigoEmpresa === codigoEmpresa)\r\n                this.setState({ seguros: filteredInsurances })\r\n            }\r\n            else if (!selectedEmpresa && seguradora !== '') {\r\n                filteredInsurances = seguros.filter(s => s.seguradora === seguradora)\r\n                this.setState({ seguros: filteredInsurances })\r\n            }\r\n            else if (selectedEmpresa && seguradora !== '') {\r\n                filteredInsurances = seguros\r\n                    .filter(seg => seg.codigoEmpresa === codigoEmpresa)\r\n                    .filter(seg => seg.seguradora === seguradora)\r\n                this.setState({ seguros: filteredInsurances })\r\n            }\r\n        }\r\n        if (name === 'dataEmissao' || name === 'vencimento') {\r\n            const errors = checkInputErrors()\r\n            if (errors) this.setState({ errors })\r\n            else this.setState({ errors: undefined })\r\n        }\r\n    }\r\n\r\n    showAllPlates = () => {\r\n        const { insurance, allPlates } = this.state\r\n        let placas = [], allPlatesObj = {}\r\n\r\n        if (insurance?.placas)\r\n            placas = insurance.placas\r\n\r\n        allPlates.forEach(p => Object.assign(allPlatesObj, { [p]: false }))\r\n        placas.forEach(p => Object.assign(allPlatesObj, { [p]: true }))\r\n\r\n        this.setState({ allPlatesObj, insuredPlates: placas, showAllPlates: !this.state.showAllPlates })\r\n    }\r\n\r\n    handleCheck = async plate => {\r\n\r\n        let allPlatesObj = { ...this.state.allPlatesObj }\r\n        allPlatesObj[plate] = !allPlatesObj[plate]\r\n\r\n        if (allPlatesObj[plate] === true) this.addPlate(plate)\r\n        else this.removeFromInsurance(plate)\r\n\r\n        this.setState({ allPlatesObj })\r\n    }\r\n\r\n    selectAllPlates = () => {\r\n        const\r\n            { allPlates, selectAll } = this.state,\r\n            updatedState = {}\r\n\r\n        if (allPlates) {\r\n            allPlates.forEach(p => {\r\n\r\n                if (selectAll) {\r\n                    updatedState[p] = false\r\n                    this.removeFromInsurance(p)\r\n                } else {\r\n                    updatedState[p] = true\r\n                    this.addPlate(p, true)\r\n                }\r\n            })\r\n        }\r\n        this.setState({ selectAll: !selectAll, allPlatesObj: updatedState })\r\n    }\r\n\r\n    addPlate = async (placaInput, allSelected) => {\r\n\r\n        const\r\n            { apolice, allVehicles, deletedVehicles, insurance } = this.state,\r\n            vehicleFound = allVehicles.find(v => v.placa === placaInput)\r\n\r\n        if (!placaInput || placaInput === '') return\r\n\r\n        //Check if vehicle belongs to frota before add to insurance and  if plate already belongs to apolice\r\n        if (vehicleFound === undefined || vehicleFound.hasOwnProperty('veiculoId') === false) {\r\n            this.setState({ openAlertDialog: true, alertType: 'plateNotFound' })\r\n            return null\r\n        } else if (insurance && insurance.placas && vehicleFound.placa && !allSelected) {\r\n            const check = insurance.placas.find(p => p === vehicleFound.placa)\r\n            if (check) {\r\n                this.setState({ openAlertDialog: true, alertType: 'plateExists' })\r\n                return null\r\n            }\r\n        }\r\n        // Add plates to rendered list\r\n        if (apolice && insurance) {\r\n            const\r\n                update = { ...insurance },\r\n                { veiculoId } = vehicleFound\r\n\r\n            if (!update.placas) update.placas = []\r\n            if (!update.veiculos) update.veiculos = []\r\n\r\n            if (!update.placas.includes(placaInput))\r\n                update.placas.push(placaInput)\r\n            if (!update.veiculos.includes(veiculoId))\r\n                update.veiculos.push(veiculoId)\r\n\r\n            //Remove from state.deletedVehicles if its the case\r\n            if (deletedVehicles.includes(veiculoId)) {\r\n                const i = deletedVehicles.indexOf(veiculoId)\r\n                deletedVehicles.splice(i, 1)\r\n            }\r\n            this.renderPlacas(update?.placas)\r\n            this.setState({ insurance: update, addedPlaca: '', deletedVehicles })\r\n        }\r\n    }\r\n\r\n    removeFromInsurance = async placaInput => {\r\n\r\n        const\r\n            { apolice, allVehicles } = this.state,\r\n            vehicleFound = allVehicles.find(v => v.placa === placaInput),\r\n            { veiculoId, placa } = vehicleFound\r\n\r\n        let\r\n            insurance = { ...this.state.insurance },\r\n            deletedVehicles = [...this.state.deletedVehicles],\r\n            placas = [],\r\n            veiculos = [],\r\n            check\r\n\r\n        const seg = this.props.redux.seguros.find(s => s.apolice === apolice)\r\n        if (seg && seg.placas)\r\n            check = seg.placas.includes(placa)\r\n\r\n        if (check) {\r\n            let { veiculos } = insurance\r\n            const k = veiculos.indexOf(veiculoId)\r\n\r\n            if (!deletedVehicles.includes(veiculos[k])) {\r\n                deletedVehicles.push(veiculos[k])\r\n                this.setState({ deletedVehicles })\r\n            }\r\n        }\r\n\r\n        if (insurance.placas) placas = insurance.placas\r\n        if (insurance.veiculos) veiculos = insurance.veiculos\r\n\r\n        const\r\n            i = placas.indexOf(placa),\r\n            k = veiculos.indexOf(veiculoId)\r\n\r\n        insurance.placas.splice(i, 1)\r\n        insurance.veiculos.splice(k, 1)\r\n\r\n        await this.setState({ insurance })\r\n        this.renderPlacas()\r\n    }\r\n\r\n    updateInsurance = () => {\r\n        const\r\n            { insurance, dataEmissao, vencimento, seguradoraId } = this.state,\r\n            { id, veiculos } = insurance\r\n\r\n        let updates = {}\r\n        const\r\n            emissaoDidChange = !moment(dataEmissao).isSame(moment(insurance.dataEmissao)),\r\n            vencimentoDidChange = !moment(vencimento).isSame(moment(insurance.vencimento)),\r\n            seguradoraDidChange = seguradoraId !== insurance.seguradoraId\r\n\r\n        if (!emissaoDidChange && !vencimentoDidChange && seguradoraDidChange) return null\r\n\r\n        if (emissaoDidChange) updates.data_emissao = dataEmissao\r\n        if (vencimentoDidChange) updates.vencimento = vencimento\r\n        if (seguradoraDidChange) updates.seguradora_id = seguradoraId\r\n\r\n        const requestObj = {\r\n            id,\r\n            columns: Object.keys(updates),\r\n            updates,\r\n            vehicleIds: veiculos\r\n        }\r\n        axios.put('/api/updateInsurance', requestObj)\r\n            .then(r => console.log(r.data))\r\n    }\r\n\r\n    handleSubmit = async approved => {\r\n\r\n        const { seguradora, insurance, errors, deletedVehicles, seguradoraId, apolice,\r\n            dataEmissao, vencimento, selectedEmpresa, demand, demandFiles, apoliceDoc, info } = this.state\r\n\r\n        let vehicleIds = []\r\n\r\n        //Checar erros de preenchimento ou campos vazios\r\n        if (errors && errors[0]) {\r\n            this.setState({ ...this.state, ...checkInputErrors('setState') })\r\n            return\r\n        }\r\n        if (!seguradora || seguradora === '') {\r\n            this.setState({ openAlertDialog: true, alertType: 'seguradoraNotFound', seguradora: undefined })\r\n            return\r\n        }\r\n        if (!insurance?.veiculos || !insurance.veiculos[0]) {\r\n            this.setState({\r\n                openAlertDialog: true, customTitle: 'Nenhum veículo inserido',\r\n                customMsg: 'Não foi inserido nenhum veículo para o seguro informado. Para inserir, digite a placa no campo \"Insira a placa\" ou clique para selecionar a(s) placa(s) do(s) veículo(s) coberto(s) por esse seguro.'\r\n            })\r\n            return\r\n        }\r\n\r\n        //Create seguro object e checar datas\r\n        const\r\n            cadSeguro = {\r\n                apolice,\r\n                seguradora_id: seguradoraId,\r\n                codigo_empresa: selectedEmpresa.codigoEmpresa\r\n            },\r\n            emis = moment(dataEmissao, 'YYYY-MM-DD', true),\r\n            venc = moment(vencimento, 'YYYY-MM-DD', true),\r\n            validEmissao = emis.isValid(),\r\n            validVenc = venc.isValid(),\r\n            invalido = venc.isSameOrBefore(emis, 'day'),\r\n            vencido = venc.isBefore(moment(), 'day'),\r\n            pendente = emis.isAfter(moment(), 'day'),\r\n            vigente = emis.isSameOrBefore(moment(), 'day')\r\n\r\n        if (invalido) {\r\n            alert('A data de vencimento informada é anterior ao início da vigência.')\r\n            return\r\n        }\r\n        if (vencido) {\r\n            alert('O seguro informado está vencido.')\r\n            return\r\n        }\r\n        if (pendente)\r\n            cadSeguro.situacao = 'Aguardando início da vigência'\r\n        if (vigente)\r\n            cadSeguro.situacao = 'Vigente'\r\n        if (validEmissao)\r\n            cadSeguro.data_emissao = dataEmissao\r\n        if (validVenc)\r\n            cadSeguro.vencimento = vencimento\r\n\r\n        //*******************Create a new demand\r\n        if (!demand) {\r\n            // New or existing, insurance will be in state if the all fields are filled and update every plate added or removed.\r\n            if (insurance)\r\n                vehicleIds = insurance.veiculos\r\n\r\n            let { codigoEmpresa, ...seguro } = cadSeguro\r\n            seguro.seguradora = seguradora\r\n            seguro = humps.camelizeKeys(seguro)\r\n\r\n            const log = {\r\n                empresaId: selectedEmpresa?.codigoEmpresa,\r\n                history: {\r\n                    ...seguro,\r\n                    vehicleIds,\r\n                    files: apoliceDoc\r\n                },\r\n                demandFiles,\r\n                metadata: {\r\n                    fieldName: 'apoliceDoc',\r\n                    apolice,\r\n                    empresaId: selectedEmpresa?.codigoEmpresa,\r\n                },\r\n                historyLength: 0,\r\n                approved\r\n            }\r\n            //Registrar os veiculos apagados pela demanda\r\n            if (deletedVehicles[0])\r\n                log.history.deletedVehicles = deletedVehicles\r\n\r\n            logGenerator(log)\r\n            this.confirmAndResetState('Solicitação de cadastro de seguro enviada')\r\n            return\r\n        }\r\n\r\n        //Se a demanda já existe e for indeferida\r\n        if (approved === false) {\r\n            const log = {\r\n                id: demand.id,\r\n                history: {\r\n                    info\r\n                },\r\n                declined: true\r\n            }\r\n            logGenerator(log)\r\n                .then(r => console.log(r))\r\n            this.confirmAndResetState('Solicitação indeferida!')\r\n        }\r\n        //Aprovar demanda\r\n        if (approved === true)\r\n            this.approveInsurance(cadSeguro)\r\n    }\r\n\r\n    approveInsurance = async cadSeguro => {\r\n        const\r\n            { seguros } = this.props.redux,\r\n            { apolice, vencimento, dataEmissao, seguradoraId, insurance, demand, demandFiles } = this.state,\r\n            vehicleIds = insurance.veiculos\r\n\r\n        //****************************** Cria o body para os requests****************************** */\r\n        const body = {\r\n            table: 'veiculos',\r\n            column: 'apolice',\r\n            value: apolice,\r\n            tablePK: 'veiculo_id',\r\n            ids: vehicleIds\r\n        }\r\n        //********************************** CREATE/UPDATE INSURANCE **********************************\r\n        const insuranceExists = seguros.find(s => s.apolice === apolice)\r\n\r\n        if (insuranceExists) {\r\n            const\r\n                de = moment(insuranceExists.dataEmissao).isSame(moment(dataEmissao)),\r\n                v = moment(insuranceExists.vencimento).isSame(moment(vencimento)),\r\n                vExists = JSON.stringify(vehicleIds) === JSON.stringify(insuranceExists.veiculos)\r\n\r\n            //Evitar seguro repetido de ser cadastrado\r\n            if (de && v && vExists) {\r\n                this.setState({\r\n                    openAlertDialog: true,\r\n                    customTitle: 'Seguro existente',\r\n                    customMsg: 'O seguro informado já existe no sistema. Para cadastrar um novo seguro, altere o número da apólice, ou as datas de emissão e vencimento.'\r\n                })\r\n                return\r\n            }\r\n            //Se o seguro novo tiver o mesmo número de apólice e já estiver vigente, apenas atualiza o registro do Postgresql\r\n            if (cadSeguro.situacao === 'Vigente') {\r\n                let updates = { dataEmissao, vencimento, seguradoraId, situacao: cadSeguro.situacao }\r\n                updates = humps.decamelizeKeys(updates)\r\n                const\r\n                    columns = Object.keys(updates),\r\n                    requestObj = {\r\n                        id: insuranceExists?.id,\r\n                        vehicleIds,\r\n                        columns,\r\n                        updates,\r\n                    }\r\n                await axios.put('/api/updateInsurance', { ...requestObj })\r\n\r\n                //Se algum veículo não está no novo seguro de mesmo n de apolice, deve ser excluido o número de apólice dele\r\n                const deletedVehicles = demand?.history[0]?.deletedVehicles\r\n                if (deletedVehicles)\r\n                    body.deletedVehicles = deletedVehicles\r\n            }\r\n        }\r\n\r\n        //Se as datas forem diferentes, se trata de cadastrar um novo seguro no MongoDB, ainda que o número da apólice seja o mesmo (caso insuranceExists === true ou false)\r\n        if (cadSeguro.situacao === 'Aguardando início da vigência') {\r\n            cadSeguro.veiculos = vehicleIds\r\n            console.log({ ...cadSeguro })\r\n            await axios.post('/api/cadSeguroMongo', { ...cadSeguro })\r\n        }\r\n        //Se o seguro cadastrado já estiver vigente já cadastra direto no Postgrtesql (tabela seguros) e atualiza a tabela de veículos\r\n        if (cadSeguro.situacao === 'Vigente' && !insuranceExists)\r\n            await axios.post('/api/cadSeguro', cadSeguro)\r\n                .then(r => {\r\n                    if (r.status === 200)\r\n                        console.log(r.status, 'cadSeguroOk')\r\n                })\r\n\r\n        //A atualização da coluna \"apólice\" da tabela veículos vai sempre ocorrer. Independente de ser um novo número ou não de apolice, \r\n        //novos veículos podem ser adicionados ou excluídos\r\n\r\n        await axios.put('/api/updateInsurances', body)\r\n            .then(res => {\r\n                console.log(res.data)\r\n                this.setState({ dontUpdateProps: true })\r\n            })\r\n\r\n        //Cria o log de demanda concluída\r\n        const log = {\r\n            id: demand.id,\r\n            demandFiles,\r\n            history: {},\r\n            metadata: {},\r\n            approved: true\r\n        }\r\n        logGenerator(log)\r\n        this.confirmAndResetState()\r\n    }\r\n\r\n    confirmAndResetState = confirmMessage => {\r\n        const { demand } = this.state\r\n        this.toast(confirmMessage)\r\n        this.clearFields()\r\n\r\n        if (demand)\r\n            setTimeout(() => {\r\n                this.props.history.push('/solicitacoes')\r\n            }, 1500);\r\n    }\r\n\r\n    handleFiles = async files => {\r\n        //limit files Size\r\n        if (sizeExceedsLimit(files)) return\r\n\r\n        let formData = new FormData()\r\n        formData.append('apoliceDoc', files[0])\r\n        await this.setState({ apoliceDoc: formData, fileToRemove: null })\r\n    }\r\n\r\n    removeFile = async (name) => {\r\n        const\r\n            { apoliceDoc } = this.state,\r\n            newState = removeFile(name, apoliceDoc)\r\n\r\n        this.setState({ ...this.state, ...newState })\r\n    }\r\n    addNewElement = () => this.setState({ apolice: this.state.newElement, openAddDialog: false })\r\n    setShowPendencias = () => this.setState({ showPendencias: !this.state.showPendencias })\r\n    toggleDialog = () => this.setState({ openAddDialog: !this.state.openAddDialog })\r\n    toast = toastMsg => this.setState({ confirmToast: !this.state.confirmToast, toastMsg: toastMsg ? toastMsg : this.state.toastMsg })\r\n    closeAlert = () => this.setState({ openAlertDialog: !this.state.openAlertDialog })\r\n    clearFields = () => {\r\n        this.setState({\r\n            seguradora: '', insurance: undefined, apolice: '', dataEmissao: '', vencimento: '', apoliceDoc: null, deletedVehicles: [],\r\n            dropDisplay: 'Clique ou arraste para anexar a apólice'\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const\r\n            { openAlertDialog, alertType, openAddDialog, showAllPlates, allPlates, allPlatesObj, selectAll, customTitle, customMsg } = this.state,\r\n            { empresas, seguradoras, seguros } = this.props.redux\r\n\r\n        const enableAddPlaca = seguroForm\r\n            .every(k => this.state.hasOwnProperty(k.field) && this.state[k.field] !== '')\r\n\r\n        return (\r\n            <Fragment>\r\n                <SeguroTemplate\r\n                    data={this.state}\r\n                    empresas={empresas}\r\n                    seguros={seguros}\r\n                    seguradoras={seguradoras}\r\n                    enableAddPlaca={enableAddPlaca}\r\n                    handleInput={this.handleInput}\r\n                    handleBlur={this.handleBlur}\r\n                    addPlate={this.addPlate}\r\n                    removeFromInsurance={this.removeFromInsurance}\r\n                    enableChangeApolice={this.toggleDialog}\r\n                    handleFiles={this.handleFiles}\r\n                    handleSubmit={this.handleSubmit}\r\n                    showAllPlates={this.showAllPlates}\r\n                    setShowPendencias={this.setShowPendencias}\r\n                    removeFile={this.removeFile}\r\n                />\r\n                {openAddDialog && <ConfigAddDialog\r\n                    open={openAddDialog}\r\n                    close={this.toggleDialog}\r\n                    title='Alterar número da apólice'\r\n                    helperMessage='Informe o número atualizado da apólice.'\r\n                    handleInput={this.handleInput}\r\n                    addNewElement={this.addNewElement}\r\n                />}\r\n                {\r\n                    showAllPlates &&\r\n                    <ShowAllPlates\r\n                        items={allPlates}\r\n                        close={this.showAllPlates}\r\n                        title='Selecione as placas para adicionar à apólice.'\r\n                        handleCheck={this.handleCheck}\r\n                        data={allPlatesObj}\r\n                        selectAll={selectAll}\r\n                        selectAllPlates={this.selectAllPlates}\r\n                    />\r\n                }\r\n\r\n                {\r\n                    openAlertDialog &&\r\n                    <AlertDialog open={openAlertDialog} close={this.closeAlert} alertType={alertType} customTitle={customTitle} customMessage={customMsg} />\r\n                }\r\n                <ReactToast open={this.state.confirmToast} close={this.toast} msg={this.state.toastMsg} />\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst collections = ['veiculos', 'empresas', 'seguradoras', 'seguros', 'getFiles/empresaDocs']\r\n\r\nexport default StoreHOC(collections, Seguro)","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { Fragment } from 'react';\r\n\r\nexport default function ConfirmDialog({ open, type, close, confirm, element, id, index, customTitle = '', customMessage = '' }) {\r\n\r\n    let title, message\r\n    if (type === 'delete') {\r\n        title = 'Confirmar exclusão'\r\n        message = 'Tem certeza que deseja excluir esse registro?'\r\n        if (element) message = message.replace('?', ': ')\r\n    }\r\n\r\n    if (title && message) return (\r\n        <div>\r\n            <Dialog\r\n                open={open}\r\n                onClose={close}\r\n                aria-labelledby=\"alert-dialog-title\"\r\n                aria-describedby=\"alert-dialog-description\"\r\n            >\r\n                <DialogTitle id=\"alert-dialog-title\">{title}</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText id=\"alert-dialog-description\">\r\n                        {element ?\r\n                            <Fragment>\r\n                                {message}<strong>  {element}    </strong>?\r\n                            </Fragment>\r\n                            : message}\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={close} autoFocus> Cancelar </Button>\r\n                    <Button onClick={() => confirm(id || index)} color=\"primary\"> Confirmar </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n    else return null\r\n}","export const laudoForm = [\r\n    {\r\n        field: 'id',\r\n        label: 'Número do laudo',              \r\n        maxLength: 30\r\n    },\r\n    {\r\n        field: 'validade',\r\n        label: 'Data de validade',\r\n        type: 'date'\r\n    },\r\n    {\r\n        field: 'empresaLaudo',\r\n        label: 'Empresa emissora',        \r\n        select: true\r\n    },    \r\n]","import React from 'react'\r\n\r\nconst Placa = props => {\r\n    const { veiculoId, city, placa, onClick, style } = props\r\n\r\n    return (\r\n        <div id={veiculoId} onClick={onClick} style={style} className='placaContainer'>\r\n            <div className=\"placaCity\">{city}</div>\r\n            <div className=\"placaCode\">{placa}</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Placa","import React from 'react'\r\nimport moment from 'moment'\r\nimport downloadFile from '../Utils/downloadFile'\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nexport default function StandardTable({ table, docsCollection, length, title, style, idIndex = 0, filePK, deleteIconProperties = {}, deleteFunction }) {\r\n    const { tableHeaders, arrayOfRows, docs } = table\r\n\r\n    const dateFormat = value => {\r\n        if (moment(value, 'YYYY-MM-DDTHH:mm:ss.SSSZZ', true).isValid())\r\n            return moment(value, moment.ISO_8601, true).format('DD/MM/YYYY')\r\n        else\r\n            return value\r\n    }\r\n\r\n    const getFile = id => {\r\n        const file = docs.find(f => f.id === id)\r\n        if (id && file)\r\n            downloadFile(file.id, file.filename, docsCollection, file.metadata.fieldName);\r\n    }\r\n\r\n    return (\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th className='tHeader'\r\n                        style={style}\r\n                        colSpan={length}>{title}</th>\r\n                </tr>\r\n                <tr>\r\n                    {tableHeaders.map((l, i) => <th key={i} style={style}>{l}</th>)}\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {\r\n                    arrayOfRows.map((el, j) =>\r\n                        <tr key={j}>\r\n                            {\r\n                                el.map((obj, i) =>\r\n                                    <td key={i} style={style} className={obj.type === 'link' && obj.fileId ? 'link2' : 'review'}\r\n                                        onClick={\r\n                                            () => obj.field === filePK && obj.fileId ? getFile(obj.fileId)\r\n                                                : obj?.action === 'delete' ? deleteFunction(el[idIndex]?.value)\r\n                                                    : null}>\r\n                                        {\r\n                                            obj.type === 'date' ? dateFormat(obj.value)\r\n                                                : obj?.action === 'delete' && el[idIndex]?.value ? <DeleteIcon {...deleteIconProperties} />\r\n                                                    : obj.value\r\n                                        }\r\n                                    </td>\r\n                                )}\r\n                        </tr>\r\n                    )}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst StyledMenu = withStyles({\r\n    paper: {\r\n        border: '1px solid #d3d4d5',\r\n    },\r\n})((props) => (\r\n    <Menu\r\n        elevation={0}\r\n        getContentAnchorEl={null}\r\n        anchorOrigin={{\r\n            vertical: 'center',\r\n            horizontal: 'right',\r\n        }}\r\n        transformOrigin={{\r\n            vertical: 'top',\r\n            horizontal: 'left',\r\n        }}\r\n        {...props}\r\n    />\r\n));\r\n\r\nconst OnClickMenu = ({ anchorEl, handleClose, menuOptions }) => {\r\n\r\n\r\n    return (\r\n        <>\r\n            <StyledMenu\r\n                id=\"simple-menu\"\r\n                anchorEl={anchorEl}\r\n                keepMounted\r\n                open={Boolean(anchorEl)}\r\n                onClose={handleClose}\r\n            >\r\n                {menuOptions.map(({ title, onClick }, i) => (\r\n                    <MenuItem key = {i} onClick={onClick}>{title}</MenuItem>\r\n                ))}               \r\n            </StyledMenu>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default OnClickMenu","import React from 'react'\r\nimport moment from 'moment'\r\n\r\nimport { laudoForm } from '../Forms/laudoForm'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport Placa from '../Reusable Components/Placa'\r\nimport TextInput from '../Reusable Components/TextInput'\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport CustomTable from '../Reusable Components/CustomTable'\r\nimport DragAndDrop from '../Reusable Components/DragAndDrop'\r\nimport OnClickMenu from '../Reusable Components/OnClickMenu'\r\nimport FormSubtiltle from '../Reusable Components/FormSubtiltle'\r\nimport ShowLocalFiles from '../Reusable Components/ShowLocalFiles'\r\nimport StepperButtons from '../Reusable Components/StepperButtons'\r\n\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Search from '@material-ui/icons/Search'\r\nimport StopIcon from '@material-ui/icons/Stop';\r\nimport Button from '@material-ui/core/Button'\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\n\r\nconst LaudosTemplate = (\r\n    { empresas, razaoSocial, selectedEmpresa, filteredVehicles, selectedVehicle, stateInputs, selectOptions, table,\r\n        anchorEl, laudoDoc, dropDisplay, functions, demand, demandFiles, showPendencias, info, fileToRemove }) => {\r\n\r\n    const\r\n        placa = selectedVehicle?.placa,\r\n        { handleInput, clickOnPlate, showDetails, handleFiles, handleSubmit, closeMenu, clear,\r\n            removeFile, deleteLaudo, setShowPendencias } = functions\r\n\r\n    const renderColor = laudos => {\r\n        if (laudos && laudos[0] && laudos[0].validade) {\r\n            const { validade } = laudos[0]\r\n\r\n            if (moment(validade, moment.ISO_8601).isValid() && moment(validade).isAfter(moment().toDate())) return { backgroundColor: 'rgb(13, 136, 13)' }\r\n            if (moment(validade, moment.ISO_8601).isValid() && moment(validade).isBefore(moment().toDate())) return { backgroundColor: 'rgb(197, 128, 0)' }\r\n        }\r\n        else return { backgroundColor: 'rgb(136, 13, 13)' }\r\n    }\r\n\r\n    const deleteIconProperties = {\r\n        color: 'secondary',\r\n        title: 'Apagar Laudo',\r\n        style: { cursor: 'pointer' }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Crumbs links={['Veículos', '/veiculos']} text='Laudos' demand={demand} selectedEmpresa={selectedEmpresa} />\r\n            <div style={demand ? { marginTop: '15px' } : {}}>\r\n                <SelectEmpresa\r\n                    empresas={empresas}\r\n                    data={{ razaoSocial, demand }}\r\n                    headerTitle={placa && selectedEmpresa && `Cadastro de laudo veicular ${placa} - ${selectedEmpresa?.razaoSocial}`}\r\n                    handleInput={handleInput}\r\n                />\r\n            </div>\r\n            {\r\n                selectedEmpresa && !Array.isArray(selectedEmpresa) && <>\r\n                    {!demand &&\r\n                        <header className='flex' style={{ marginBottom: '15px', justifyContent: 'space-between' }}>\r\n                            {\r\n                                !selectedVehicle ?\r\n                                    <FormSubtiltle\r\n                                        subtitle='Selecione o veículo para atualizar consultar ou inserir o laudo de segurança veicular.'\r\n                                        style={{ marginTop: '25px' }}\r\n                                    />\r\n                                    :\r\n                                    <Placa\r\n                                        veiculoId={selectedVehicle.veiculoId}\r\n                                        onClick={clickOnPlate}\r\n                                        style={{ ...renderColor(selectedVehicle.laudos), marginLeft: 0 }}\r\n                                        city={selectedEmpresa.cidade}\r\n                                        placa={selectedVehicle.placa}\r\n                                    />\r\n                            }\r\n                            <div>\r\n                                <TextField\r\n                                    inputProps={{ name: 'placa' }}\r\n                                    InputLabelProps={{ style: { fontSize: '0.8rem' } }}\r\n                                    label='Filtrar'\r\n                                    onChange={handleInput}\r\n                                />\r\n                                <Search style={{ marginTop: '10px' }} />\r\n                            </div>\r\n                        </header>\r\n                    }\r\n                    {selectedVehicle && <>\r\n                        <main className='paper' style={demand ? { marginTop: '15px' } : {}}>\r\n                            <FormSubtiltle\r\n                                subtitle={\r\n                                    !demand ?\r\n                                        'Para inserir novo laudo, informe o número, a data de vencimento, a empresa que emitiu e anexe o documento referente ao laudo.'\r\n                                        :\r\n                                        'Verifique as informações abaixo, confira com o laudo anexo e escolha uma das opções abaixo.'\r\n                                }\r\n                            />\r\n\r\n                            <br />\r\n                            <br />\r\n                            <TextInput\r\n                                form={laudoForm}\r\n                                data={stateInputs}\r\n                                handleInput={handleInput}\r\n                                selectOptions={selectOptions}\r\n                            />\r\n                            {!demand ? <DragAndDrop\r\n                                name='laudoDoc'\r\n                                formData={laudoDoc}\r\n                                dropDisplay={dropDisplay}\r\n                                handleFiles={handleFiles}\r\n                                removeFile={removeFile}\r\n                                fileToRemove={fileToRemove}\r\n                                single={true}\r\n                                style={{ width: '400px', margin: '15px auto 0 auto' }}\r\n                            />\r\n                                : demandFiles &&\r\n                                <ShowLocalFiles\r\n                                    demand={demand}\r\n                                    collection='vehicleDocs'\r\n                                    demandFiles={demandFiles}\r\n                                    form={[{ title: 'Laudo veicular', name: 'laudoDoc' }]}\r\n                                //files={files}\r\n                                />\r\n                            }\r\n                        </main>\r\n                        <section>\r\n                            {\r\n                                selectedEmpresa && !demand ?\r\n                                    <Button\r\n                                        size=\"small\"\r\n                                        color='primary'\r\n                                        className='saveButton'\r\n                                        variant=\"contained\"\r\n                                        onClick={() => handleSubmit()}\r\n                                    //   disabled={!laudoDoc ? true : false}\r\n                                    >\r\n                                        Cadastrar Laudo\r\n                                    </Button>\r\n                                    : selectedEmpresa && demand ?\r\n                                        <StepperButtons\r\n                                            uniqueStep={true}\r\n                                            declineButtonLabel='Indeferir'\r\n                                            demand={demand}\r\n                                            setShowPendencias={() => setShowPendencias(!showPendencias)}\r\n                                            showPendencias={showPendencias}\r\n                                            info={info}\r\n                                            handleSubmit={handleSubmit}\r\n                                            handleInput={handleInput}\r\n                                        />\r\n                                        : null\r\n                            }\r\n                        </section>\r\n                    </>\r\n                    }\r\n\r\n                    <section>\r\n                        <h4>\r\n                            {!selectedVehicle ?\r\n                                <div className='flex' style={{ justifyContent: 'space-between' }}>\r\n                                    <div>\r\n                                        {`Exibindo ${filteredVehicles.length} veículos com mais de 15 anos.`}\r\n                                    </div>\r\n                                    <div className='flex placasCaption' style={{ fontSize: '0.8rem' }}>\r\n                                        <span>\r\n                                            <span style={{ paddingTop: '5px', color: 'rgb(13, 136, 13)' }}><StopIcon /></span> Laudo vigente\r\n                                        </span>\r\n                                        <span>\r\n                                            <span style={{ paddingTop: '5px', color: 'rgb(197, 128, 0)' }}><StopIcon /></span> Laudo vencido                                            </span>\r\n                                        <span>\r\n                                            <span style={{ paddingTop: '5px', color: 'rgb(136, 13, 13)' }}><StopIcon /></span> Nenhum Laudo cadastrado\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                                :\r\n                                null\r\n                            }\r\n                        </h4>\r\n                    </section>\r\n\r\n                    {/* *********************** RENDERIZAÇÃO DAS PLACAS ********************************* */}\r\n                    {!selectedVehicle &&\r\n                        <section className='center flex paper'>\r\n                            {filteredVehicles.map((v, i) => (\r\n                                <Placa\r\n                                    key={i}\r\n                                    veiculoId={v.veiculoId}\r\n                                    onClick={clickOnPlate}\r\n                                    style={renderColor(v.laudos)}\r\n                                    city={selectedEmpresa.cidade}\r\n                                    placa={v.placa}\r\n                                />\r\n\r\n                            ))}\r\n                        </section>\r\n                    }\r\n\r\n                    <OnClickMenu\r\n                        anchorEl={anchorEl}\r\n                        handleClose={closeMenu}\r\n                        menuOptions={[{\r\n                            title: 'Detalhes',\r\n                            onClick: showDetails\r\n                        }\r\n                        ]}\r\n                    />\r\n                </>\r\n            }\r\n            {\r\n                selectedVehicle && selectedVehicle.laudos && !demand &&\r\n                <>\r\n                    {typeof table === 'object' ?\r\n                        <div className=\"paper\" style={{ marginTop: '52px', width: '100%', padding: '0', borderRadius: '5px', overflow: 'hidden' }}>\r\n                            <CustomTable\r\n                                length={table.tableHeaders.length}\r\n                                title={`Laudos vinculados ao veículo placa ${selectedVehicle.placa}`}\r\n                                table={table}\r\n                                style={{ textAlign: 'center', padding: '8px 0' }}\r\n                                deleteIconProperties={deleteIconProperties}\r\n                                deleteFunction={deleteLaudo}\r\n                                idIndex={1}\r\n                                filePK='laudoDoc'\r\n                                docsCollection='vehicleDocs'\r\n                            />\r\n                        </div>\r\n                        :\r\n                        <>\r\n                            <br />\r\n                            <br />\r\n                            <p>{table}</p>\r\n                        </>\r\n                    }\r\n                    <div className='voltarDiv' onClick={clear}>\r\n                        <ArrowBackIcon size='small' />\r\n                        <span style={{ padding: '2px 0 0 2px', marginLeft: '2px', fontSize: '1rem' }}>Voltar</span>\r\n                    </div>\r\n                </>\r\n            }\r\n        </React.Fragment >\r\n    )\r\n}\r\n\r\nexport default React.memo(LaudosTemplate)","import cpfValidator from '../Utils/cpfValidator'\r\nimport { cnpjValidator } from '../Utils/cnpjValidator'\r\n\r\nimport { clearFormat } from '../Utils/formatValues'\r\n\r\nexport const\r\n    razaoSocial = {\r\n        field: 'razaoSocial',\r\n        label: 'Empresa',\r\n        width: '340px'\r\n    },\r\n    placas = {\r\n        field: 'placas',\r\n        label: 'Veículos cadastrados',\r\n        width: '340px'\r\n    },\r\n    createdAt = {\r\n        field: 'createdAt',\r\n        label: 'Data do registro no sistema',\r\n        type: 'date',\r\n        width: '190px'\r\n    },\r\n    cnpj = {\r\n        field: 'cnpj',\r\n        label: 'CNPJ',\r\n        maxLength: 18,\r\n        pattern: /^\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}$/,\r\n        errorHandler: (cnpjString) => cnpjValidator(cnpjString)\r\n    },\r\n    cpf = {\r\n        field: 'cpfSocio',\r\n        label: 'CPF',\r\n        maxLength: 14,\r\n        width: 190,\r\n        errorHandler: (cpfString) => cpfValidator(clearFormat(cpfString))\r\n    },\r\n    phone = {\r\n        label: 'Telefone',\r\n    //    minLength: 14,\r\n        maxLength: 15,\r\n        pattern: '((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))'\r\n\r\n    },\r\n    email = {\r\n        label: 'E-mail',\r\n        type: 'email',\r\n        maxLength: 60,\r\n        pattern: '[a-zA-Z0-9]@[a-zA-Z0-9]{1,20}?[.]([a-zA-Z0-9])',\r\n    }","export function cnpjValidator(cnpj) {\r\n\r\n    cnpj = cnpj.replace(/[^\\d]+/g, '');\r\n\r\n    if (cnpj === '') return false;\r\n\r\n    if (cnpj.length !== 14)\r\n        return false;\r\n\r\n    // LINHA 10 - Elimina CNPJs invalidos conhecidos\r\n    if (cnpj === \"00000000000000\" ||\r\n        cnpj === \"11111111111111\" ||\r\n        cnpj === \"22222222222222\" ||\r\n        cnpj === \"33333333333333\" ||\r\n        cnpj === \"44444444444444\" ||\r\n        cnpj === \"55555555555555\" ||\r\n        cnpj === \"66666666666666\" ||\r\n        cnpj === \"77777777777777\" ||\r\n        cnpj === \"88888888888888\" ||\r\n        cnpj === \"99999999999999\")\r\n        return false; // LINHA 21\r\n\r\n    // Valida DVs LINHA 23 -\r\n    let tamanho = cnpj.length - 2,\r\n        numeros = cnpj.substring(0, tamanho),\r\n        digitos = cnpj.substring(tamanho),\r\n        soma = 0,\r\n        pos = tamanho - 7,\r\n        resultado\r\n    for (let i = tamanho; i >= 1; i--) {\r\n        soma += numeros.charAt(tamanho - i) * pos--;\r\n        if (pos < 2)\r\n            pos = 9;\r\n    }\r\n    resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;    \r\n    if (resultado.toString() !== digitos.charAt(0))\r\n        return false;\r\n\r\n    tamanho = tamanho + 1;\r\n    numeros = cnpj.substring(0, tamanho);\r\n    soma = 0;\r\n    pos = tamanho - 7;\r\n    for (let i = tamanho; i >= 1; i--) {\r\n        soma += numeros.charAt(tamanho - i) * pos--;\r\n        if (pos < 2)\r\n            pos = 9;\r\n    }\r\n    resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\r\n    if (resultado.toString() !== digitos.charAt(1))\r\n        return false; // LINHA 49\r\n\r\n    return true; // LINHA 51\r\n\r\n}\r\n\r\n/* export function cnpjValidator(c) {\r\n\r\n    var b = [6, 5, 4, 3, 2, 9, 8, 7, 6, 5, 4, 3, 2];\r\n\r\n    if ((c = c.replace(/[^\\d]/g, \"\")).length != 14)\r\n        return false;\r\n\r\n    if (/0{14}/.test(c))\r\n        return false;\r\n\r\n    for (var j = 0; j < 2; ++j) {\r\n        for (var i = 0, n = 0; i < 12 + j; n += c[i] * b[++i - j]);\r\n        if (c[12 + j] != ((n %= 11) < 2) ? 0 : 11 - n)\r\n            return false;\r\n    }\r\n\r\n    return true;\r\n\r\n}\r\n\r\n\r\n\r\n */\r\n/* export function cnpjValidator(cnpj) {\r\n\r\n    cnpj = cnpj.replace(/[^\\d]+/g, '');\r\n\r\n    if (cnpj === '') return false;\r\n\r\n    if (cnpj.length !== 14)\r\n        return false;\r\n\r\n    // Elimina CNPJs invalidos conhecidos\r\n    if (cnpj === \"00000000000000\" ||\r\n        cnpj === \"11111111111111\" ||\r\n        cnpj === \"22222222222222\" ||\r\n        cnpj === \"33333333333333\" ||\r\n        cnpj === \"44444444444444\" ||\r\n        cnpj === \"55555555555555\" ||\r\n        cnpj === \"66666666666666\" ||\r\n        cnpj === \"77777777777777\" ||\r\n        cnpj === \"88888888888888\" ||\r\n        cnpj === \"99999999999999\")\r\n        return false;\r\n\r\n    // Valida DVs\r\n    let\r\n        tamanho = cnpj.length - 2,\r\n        numeros = cnpj.substring(0, tamanho),\r\n        digitos = cnpj.substring(tamanho),\r\n        soma = 0,\r\n        pos = tamanho - 7,\r\n        resultado\r\n\r\n    for (let i = tamanho; i >= 1; i--) {\r\n        soma += numeros.charAt(tamanho - i) * pos--;\r\n        if (pos < 2)\r\n            pos = 9;\r\n    }\r\n    resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\r\n    if (resultado !== digitos.charAt(0))\r\n        return false;\r\n\r\n    tamanho = tamanho + 1;\r\n    numeros = cnpj.substring(0, tamanho);\r\n    soma = 0;\r\n    pos = tamanho - 7;\r\n    for (let i = tamanho; i >= 1; i--) {\r\n        soma += numeros.charAt(tamanho - i) * pos--;\r\n        if (pos < 2)\r\n            pos = 9;\r\n    }\r\n    resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\r\n    if (resultado !== digitos.charAt(1))\r\n        return false;\r\n\r\n    return true;\r\n} */","export default function cpfValidator(strCPF) {\r\n    if (!strCPF) return\r\n    let Soma;\r\n    let Resto;\r\n    Soma = 0;\r\n    if (strCPF === \"00000000000\") return false;\r\n\r\n    for (let i = 1; i <= 9; i++) Soma = Soma + parseInt(strCPF.substring(i - 1, i)) * (11 - i);\r\n    Resto = (Soma * 10) % 11;\r\n\r\n    if ((Resto === 10) || (Resto === 11)) Resto = 0;\r\n    if (Resto !== parseInt(strCPF.substring(9, 10))) return false;\r\n\r\n    Soma = 0;\r\n    for (let i = 1; i <= 10; i++) Soma = Soma + parseInt(strCPF.substring(i - 1, i)) * (12 - i);\r\n    Resto = (Soma * 10) % 11;\r\n\r\n    if ((Resto === 10) || (Resto === 11)) Resto = 0;\r\n    if (Resto !== parseInt(strCPF.substring(10, 11))) return false;    \r\n    return true;\r\n}\r\n","import { razaoSocial, placas, createdAt } from '../Forms/commonFields'\r\n\r\nexport const eForm = [\r\n    {\r\n        field: 'razaoSocial',\r\n        width: '540px'\r\n    },\r\n    {\r\n        field: 'rua',\r\n        width: '540px'\r\n    },\r\n    {\r\n        field: 'situacao',\r\n        label: 'Situação'\r\n    },   \r\n    {\r\n        ...createdAt,\r\n        width: '150px',\r\n    },\r\n    {\r\n        field: 'frota',\r\n        label: 'Tamanho da Frota'\r\n    },\r\n    {\r\n        field: 'oldId',\r\n        label: 'Código no sistema antigo'\r\n    },\r\n    /*     {\r\n            ...placas\r\n        }, */\r\n\r\n]\r\n\r\nexport const sForm = [\r\n    {\r\n        ...razaoSocial\r\n    },\r\n    {\r\n        ...createdAt\r\n    },\r\n]\r\n\r\nexport const segForm = [\r\n    {\r\n        ...razaoSocial\r\n    },\r\n    {\r\n        ...createdAt\r\n    },\r\n    {\r\n        ...placas\r\n    },\r\n    {\r\n        field: 'segurados',\r\n        label: 'Número de veículos segurados',\r\n    },\r\n]\r\n\r\nexport const vForm = [\r\n    {\r\n        field: 'dataRegistro',\r\n        label: 'Data do registro no sistema',\r\n        type: 'date',\r\n    },\r\n    {\r\n        field: 'pbt',\r\n        label: 'Peso Bruto Total'\r\n    },\r\n    {\r\n        field: 'situacao',\r\n        label: 'Situação'\r\n    },\r\n    {\r\n        field: 'indicadorIdade',\r\n        label: 'Indicador de idade'\r\n    },\r\n    {\r\n        field: 'equipamentosId',\r\n        label: 'Equipamentos'\r\n    },\r\n    {\r\n        field: 'compartilhado',\r\n        label: 'Compartilhado por'\r\n    },\r\n    {\r\n        field: 'marcaChassi',\r\n        label: 'Marca do Chassi',\r\n    },\r\n    {\r\n        field: 'marcaCarroceria',\r\n        label: 'Marca da Carroceria',\r\n    },\r\n]","import { vistoriaForm } from './vistoriaForm'\r\nimport { seguroForm } from './seguroForm'\r\n\r\nexport const cadForm = [[{\r\n    field: 'placa',\r\n    label: 'Placa',\r\n    margin: 'normal',\r\n    maxLength: 8,\r\n    pattern: '[a-zA-Z]{3}[-]?[ ]?\\\\d{4}|[A-Z]{3}[-]?[ ]?[0-9]{1}[A-Z]{1}[0-9]{2}'\r\n},\r\n{\r\n    field: 'renavam',\r\n    label: 'Renavam',\r\n    margin: 'normal',\r\n    maxLength: 11,\r\n    pattern: '\\\\d{11}'\r\n},\r\n{\r\n    field: 'utilizacao',\r\n    label: 'Utilização',\r\n    margin: 'normal',\r\n    select: true,\r\n    options: ['Convencional', 'Executivo', 'Leito', 'Semi-Leito', 'Urbano']\r\n},\r\n{\r\n    field: 'nChassi',\r\n    label: 'Número do Chassi',\r\n    margin: 'normal',\r\n    maxLength: 17\r\n},\r\n{\r\n    field: 'modeloChassi',\r\n    label: 'Modelo do Chassi',\r\n    margin: 'normal',\r\n    datalist: 'modeloChassi',\r\n    autoComplete: true,\r\n    collection: 'modelosChassi'\r\n},\r\n{\r\n    field: 'anoChassi',\r\n    label: 'Ano do Chassi',\r\n    margin: 'normal',\r\n    type: 'number',\r\n    max: Number(new Date().getFullYear()),\r\n    min: Number(new Date().getFullYear()) - 10\r\n},\r\n{ \r\n    field: 'valorChassi',\r\n    label: 'Valor do Chassi (R$)',\r\n    margin: 'normal',\r\n    zero: true,\r\n    pattern: '^.{9,12}$',\r\n    minLength: 8,    \r\n    maxLength: 11\r\n},\r\n{\r\n    field: 'modeloCarroceria',\r\n    label: 'Modelo da Carroceria',\r\n    margin: 'normal',\r\n    datalist: 'modelo',\r\n    autoComplete: true,\r\n    collection: 'carrocerias'\r\n},\r\n{\r\n    type: 'number',\r\n    field: 'anoCarroceria',\r\n    label: 'Ano da Carroceria',\r\n    margin: 'normal',\r\n    max: Number(new Date().getFullYear() + 1),\r\n    min: Number(new Date().getFullYear()) - 10\r\n},\r\n{    \r\n    field: 'valorCarroceria',\r\n    label: 'Valor da Carroceria (R$)',\r\n    margin: 'normal',\r\n    zero: true,    \r\n    pattern: '^.{9,12}$',\r\n    minLength: 8,    \r\n    maxLength: 11\r\n},\r\n{\r\n    field: 'dominio',\r\n    label: 'Situação da Propriedade',\r\n    margin: 'normal',\r\n    select: true,\r\n    options: ['Veículo próprio', 'Leasing', 'Possuidor']\r\n},\r\n{\r\n    field: 'cores',\r\n    label: 'Cores',\r\n    margin: 'normal',\r\n    maxLength: 50\r\n}\r\n]]\r\n    .concat([seguroForm])\r\n    .concat([vistoriaForm])    ","import { cnpj, phone, email } from './commonFields'\r\n\r\nexport const empresasForm = [\r\n    {\r\n        field: 'razaoSocial',\r\n        label: 'Razão Social'        \r\n    },\r\n    {\r\n        ...cnpj,\r\n        maxLength: 18,\r\n        pattern: /^\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}$/\r\n    },\r\n    {\r\n        field: 'inscricaoEstadual',\r\n        label: 'Inscrição Estadual',\r\n        maxLength: 13,\r\n        pattern: '\\\\d{13}'\r\n    },\r\n    {\r\n        ...phone,\r\n        field: 'telefone',\r\n        label: 'Telefone',        \r\n    },\r\n    {\r\n        ...email,\r\n        field: 'email',\r\n        label: 'E-mail'        \r\n    },\r\n    {\r\n        field: 'cep',\r\n        label: 'CEP',\r\n        maxLength: 10\r\n    },\r\n    {\r\n        field: 'numero',\r\n        label: 'Número',\r\n        type: 'number',\r\n        max: 32000\r\n    },\r\n    {\r\n        field: 'complemento',\r\n        label: 'Complemento',\r\n        maxLength: 20,\r\n    },\r\n    {\r\n        field: 'rua',\r\n        label: 'Rua',\r\n        maxLength: 100,\r\n    },\r\n    {\r\n        field: 'bairro',\r\n        label: 'Bairro',\r\n        maxLength: 40,\r\n    },\r\n    {\r\n        field: 'cidade',\r\n        label: 'Cidade',\r\n        maxLength: 60,\r\n    },\r\n    {\r\n        field: 'uf',\r\n        label: 'Estado',\r\n        maxLength: 2,\r\n        pattern: '[A-Z]{2}'\r\n    },\r\n    {\r\n        field: 'vencimentoContrato',\r\n        label: 'Vencimento do Contrato',\r\n        type: 'date',\r\n    }\r\n]","import { cpf, email, phone } from './commonFields'\r\n\r\nconst width = 195\r\n\r\nexport const sociosForm = [{\r\n    field: 'nomeSocio',\r\n    label: 'Nome do Sócio',\r\n    maxLength: 90,\r\n    width\r\n},\r\n{\r\n    ...cpf,\r\n    width\r\n},\r\n{\r\n    ...phone,\r\n    field: 'telSocio',\r\n    width\r\n},\r\n{\r\n    ...email,\r\n    field: 'emailSocio',\r\n    width\r\n},\r\n{\r\n    field: 'share',\r\n    label: 'Participação Societária (%)',\r\n    /* pattern: /(^100(,0{1,2})?$)|(^([1-9]([0-9])?|0)(,[0-9]{1,2})?$)/,\r\n    maxLength: 5, */\r\n    type: 'number',\r\n    max: 100,\r\n    width\r\n}]\r\n\r\n","import { cpf, email, phone } from './commonFields'\r\n\r\nexport const procuradorForm = [{\r\n    field: 'nomeProcurador',\r\n    label: 'Nome do Procurador',\r\n    maxLength: 90,\r\n    width: 240\r\n},\r\n{\r\n    ...cpf,\r\n    field: 'cpfProcurador',\r\n    width: 240\r\n},\r\n{\r\n    ...phone,\r\n    field: 'telProcurador',    \r\n    width: 240\r\n},\r\n{\r\n    ...email,\r\n    field: 'emailProcurador',\r\n    width: 240\r\n}]","import { eForm, sForm, segForm, vForm } from '../Forms/joinForms'\r\n\r\nimport { cadForm } from '../Forms/cadForm'\r\nimport { empresasForm } from '../Forms/empresasForm'\r\nimport { sociosForm } from '../Forms/sociosForm'\r\nimport { procuradorForm } from '../Forms/procuradorForm'\r\nimport { seguroForm } from '../Forms/seguroForm'\r\n\r\n//Essa função seleciona e formata todos os campos que aparecem no componente ShowDetails e na exportação do arquivo de excel no ConsultasContainer\r\nconst dataToReturn = (tab, data) => {\r\n    if (data) {\r\n        delete data.tableData\r\n        const\r\n            element = [],\r\n            formPattern = setForm(tab)\r\n\r\n        Object.keys(data).forEach(key => {\r\n            if (tab === 3) {\r\n                const { veiculoId, laudoId, tableData, modeloChassiId, modeloCarroceriaId, codigoEmpresa, vencimentoContrato, delegatarioCompartilhado,\r\n                    acessibilidadeId, equipamentosId, ...vData } = data\r\n                data = vData\r\n            }\r\n\r\n            formPattern.forEach(({ field, label, type, width, fullWidth }) => {\r\n                if (key === field) {\r\n                    let obj = {}\r\n                    Object.assign(obj, { field, label, value: data[key] })\r\n                    if (type) Object.assign(obj, { type })\r\n                    if (width) Object.assign(obj, { width })\r\n                    element.push(obj)\r\n                    obj = {}\r\n                }\r\n            })\r\n        })\r\n\r\n        Object.keys(data).forEach(key => {\r\n\r\n            const equal = element.find(el => el.field === key)\r\n\r\n            if (!equal && tab === 3)\r\n                element.push({ field: key, label: key, value: data[key] })\r\n        })\r\n        return element\r\n    }\r\n}\r\n\r\nexport default dataToReturn\r\n\r\n//Essa função adiciona novos campos e sobrescreve configurações de design dos formulários utilizados em outras partes do sistema.\r\nfunction mergeForms(form, jForm) {\r\n    let\r\n        updatedForm = [],\r\n        updatedObj,\r\n        joinForm = [...jForm]\r\n\r\n    form.forEach(f => {\r\n        joinForm.forEach((jf, i) => {\r\n            if (f.field === jf.field) {\r\n                updatedObj = Object.assign({}, f, jf)\r\n                joinForm.splice(i, 1)\r\n                updatedForm.push(updatedObj)\r\n            }\r\n            else if (!updatedForm.find(el => el.field === f.field)) {\r\n                updatedForm.push(f)\r\n            }\r\n        })\r\n    })\r\n\r\n    updatedForm = updatedForm.concat(joinForm)\r\n\r\n    return updatedForm\r\n}\r\n//Junta os forms que aparecem apenas na tabela do ConsultaTemplate com outros campos do DB (próprios da tabela ou joins)\r\nexport function setForm(tab) {\r\n    let formPattern\r\n    switch (tab) {\r\n        case 0:\r\n            formPattern = mergeForms(empresasForm, eForm)\r\n            return formPattern\r\n        case 1:\r\n            formPattern = sociosForm.concat(sForm)\r\n            return formPattern\r\n        case 2:\r\n            formPattern = procuradorForm\r\n            return formPattern\r\n        case 3:\r\n            let consolidateForm = []\r\n            formPattern = cadForm.concat([vForm])\r\n            formPattern.forEach(form => {\r\n                consolidateForm = ([...consolidateForm, ...form])\r\n            })\r\n            return consolidateForm\r\n        case 4:\r\n            formPattern = seguroForm.concat(segForm)\r\n            return formPattern\r\n        default:\r\n            return formPattern\r\n    }\r\n}\r\n","export const procuradorEmpresaTable = [\r\n    {\r\n        field: 'nomeProcurador',\r\n        title: 'Nome',\r\n    },\r\n    {\r\n        field: 'cpfProcurador',\r\n        title: 'CPF',\r\n    },\r\n    {\r\n        field: 'emailProcurador',\r\n        title: 'E-mail'\r\n    },\r\n    {\r\n        field: 'telProcurador',\r\n        title: 'Telefone'\r\n    },\r\n    {\r\n        field: 'vencimento',\r\n        title: 'Validade da procuração',\r\n        type: 'date',\r\n        format: value => value ? value : 'Prazo indeterminado'\r\n    },\r\n    {\r\n        field: 'fileId',\r\n        title: 'Baixar Procuração',\r\n        type: 'link'\r\n    },\r\n]\r\n\r\n","const altContratoTable = [\r\n    {\r\n        field: 'numeroAlteracao',\r\n        label: 'Número da alteração',\r\n    },\r\n    {\r\n        field: 'numeroRegistro',\r\n        label: 'Registro na junta comercial',\r\n    },\r\n    {\r\n        field: 'numeroSei',\r\n        label: 'Número do registro SEI',\r\n    },\r\n    {\r\n        field: 'dataJunta',\r\n        label: 'Registro na Junta Comercial',\r\n        type: 'date',\r\n        format: value => value ? value : 'Nenhuma data informada'\r\n    },\r\n    {\r\n        field: 'fileId',\r\n        label: 'Baixar alteração contratual',\r\n        value: 'Clique para baixar o arquivo',\r\n        type: 'link'\r\n    },\r\n]\r\n\r\nexport default altContratoTable","import React, { useState, useEffect } from 'react'\r\nimport moment from 'moment'\r\nimport CustomTable from './CustomTable'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport ClosePopUpButton from '../Reusable Components/ClosePopUpButton'\r\nimport createFormPattern from '../Utils/createFormPattern'\r\nimport { procuradorEmpresaTable as procTable } from '../Forms/procuradorEmpresaTable'\r\nimport altContratoTable from '../Forms/altContratoTable'\r\n\r\nexport default function ShowDetails({ data, tab, title, header, close, empresas, procuracoes, procuradores, empresaDocs, altContrato }) {\r\n    //data é o objeto (row) do campo de dados de uma determinada tabela\r\n    const\r\n        [procs, setProcs] = useState(),\r\n        [table, setTable] = useState(),\r\n        [table2, setTable2] = useState(),\r\n        [tables, setTables] = useState([]),\r\n        element = createFormPattern(tab, data) || [] //Element é o form com a adição do campo value, inserindo data para cada objeto(field)\r\n\r\n    //Informações adicionais no showDetails fora dos campos padrão\r\n    useEffect(() => {\r\n        const additionalInfo = (tab) => {\r\n            if (tab === 0) {\r\n                let selectedProcs = [], tableHeaders = [], arrayOfRows = [], row = [], rowObj\r\n\r\n                const\r\n                    razaoSocial = element.find(el => el.field === 'razaoSocial')?.value,\r\n                    codigoEmpresa = empresas.find(e => e.razaoSocial === razaoSocial)?.codigoEmpresa,\r\n                    selectedDocs = procuracoes.filter(p => p.codigoEmpresa === codigoEmpresa),\r\n                    selectedFiles = empresaDocs.filter(d => d.metadata?.fieldName === 'procuracao' && d.metadata?.empresaId === codigoEmpresa)\r\n\r\n                //Cria uma array de procuradores com base na array de procuradorId disponível na tabela Procuracao do Postgresql\r\n                procuradores.forEach(pr => {\r\n                    selectedDocs.forEach(doc => {\r\n                        if (doc.procuradores.some(p => p === pr.procuradorId)) {\r\n                            const\r\n                                tableRow = { ...pr, vencimento: doc.vencimento },\r\n                                file = empresaDocs.find(f => f.metadata.procuracaoId === doc.procuracaoId) // achar arquivo da procuração, se houver\r\n\r\n                            if (file)\r\n                                tableRow.fileId = file?.id\r\n                            selectedProcs.push(tableRow)\r\n                        }\r\n                    })\r\n                })\r\n\r\n                selectedProcs.forEach(proc => {\r\n                    procTable.forEach(fieldObj => {\r\n                        const { field } = fieldObj\r\n                        //insere o cabeçalho da tabela (apenas uma vez)\r\n                        if (!tableHeaders.some(t => t === fieldObj.title))\r\n                            tableHeaders.push(fieldObj.title)\r\n                        //insere as linhas (também apenas uma vez)\r\n                        if (proc.hasOwnProperty(field) && !row.some(o => o.hasOwnProperty(field))) {\r\n\r\n                            //se a coluna/field for um arquivo o valor que aparecerá na tabela é \"Clique para baixar...\"\r\n                            if (field === 'fileId' && proc.fileId)\r\n                                rowObj = { ...fieldObj, value: 'Clique para baixar a procuração', fileId: proc.fileId }\r\n                            //Senão, o valor é o valor da célula\r\n                            else\r\n                                rowObj = { ...fieldObj, value: proc[field] }\r\n\r\n                            //se a célula possuir um método de autoFormatação, aplicar\r\n                            if (fieldObj.format) {\r\n                                const value = fieldObj.format(proc[field])\r\n                                rowObj = { ...fieldObj, value }\r\n                            }\r\n                            row.push(rowObj)\r\n                        }\r\n                    })\r\n                    arrayOfRows.push(row)\r\n                    row = []\r\n                })\r\n\r\n                //Cria uma array de arquivos com base no id de cada procuração              \r\n                if (selectedProcs[0]) {\r\n                    setProcs(selectedProcs)\r\n                    setTable({\r\n                        mainTitle: `Procuradores cadastrados para ${data?.razaoSocial}`,\r\n                        tableHeaders,\r\n                        arrayOfRows,\r\n                        docs: selectedFiles\r\n                    })\r\n                }\r\n                setAltContrato()\r\n            }\r\n        }\r\n        additionalInfo(tab)\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [tab])\r\n\r\n    const setAltContrato = async () => {\r\n        if (altContrato) {\r\n            const\r\n                alteracoes = altContrato.filter(a => a.codigoEmpresa === data.codigoEmpresa),\r\n                altDocs = empresaDocs.filter(doc => doc?.metadata?.fieldName === 'altContratoDoc' && doc?.metadata.empresaId === data.codigoEmpresa)\r\n            console.log(alteracoes)\r\n            let tableHeaders = [], arrayOfRows = [], row = [], rowObj = {}\r\n\r\n            alteracoes.forEach(alt => {\r\n                altContratoTable.forEach(fieldObj => {\r\n                    const { field } = fieldObj\r\n                    if (!tableHeaders.includes(fieldObj.label))\r\n                        tableHeaders.push(fieldObj.label)\r\n                    if (field === 'fileId' || (alt.hasOwnProperty(field) && !row.some(o => o.hasOwnProperty(field)))) {\r\n                        //se a coluna/field for um arquivo o valor que aparecerá na tabela é \"Clique para baixar...\"\r\n                        if (field === 'fileId') {\r\n                            let fileId = altDocs.find(d => d.metadata.numeroRegistro === alt.numeroRegistro)\r\n                            fileId = fileId?.id\r\n                            if (fileId)\r\n                                rowObj = { ...fieldObj, value: fieldObj?.value, fileId }\r\n                        }\r\n                        //Senão, o valor é o valor da célula\r\n                        else\r\n                            rowObj = { ...fieldObj, value: alt[field] }\r\n                        //se a célula possuir um método de autoFormatação, aplicar\r\n                        if (fieldObj.format) {\r\n                            const value = fieldObj.format(alt[field])\r\n                            rowObj = { ...fieldObj, value }\r\n                        }\r\n                        row.push(rowObj)\r\n                    }\r\n                })\r\n                arrayOfRows.push(row)\r\n                row = []\r\n            })\r\n            if (alteracoes[0]) {\r\n                setProcs(true)\r\n                setTable2({\r\n                    mainTitle: `Alterações do contrato social - ${data?.razaoSocial}`,\r\n                    tableHeaders,\r\n                    arrayOfRows,\r\n                    docs: altDocs\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const tableArray = []\r\n        if (table)\r\n            tableArray.push(table)\r\n        if (table2)\r\n            tableArray.unshift(table2)\r\n        if (tableArray[0])\r\n            setTables(tableArray)\r\n    }, [table, table2])\r\n\r\n    return (\r\n        <div className=\"popUpWindow\" style={{ left: '20%', right: '20%' }}>\r\n            <h4 className='equipaHeader'>{title} {data[header]}</h4> <hr />\r\n            <main className=\"checkListContainer\" style={{ justifyContent: 'flex-start' }}>\r\n                {\r\n                    element.map(({ field, label, value, type, width }, i) =>\r\n                        <div className=\"showDetailsItem\" style={{ width: width ? width : 150, }} key={i}>\r\n                            <TextField\r\n                                name={field}\r\n                                label={label}\r\n                                value={type === 'date' ? moment(value).format('DD/MM/YYYY') : value || ''}\r\n                                InputLabelProps={{ shrink: true, style: { fontSize: '0.9rem', fontWeight: 500 } }}\r\n                                inputProps={{\r\n                                    style: {\r\n                                        fontSize: '0.7rem',\r\n                                        width: width ? width : 150,\r\n                                        fontColor: '#bbb',\r\n                                        textAlign: 'center'\r\n                                    }\r\n                                }}\r\n                                variant='outlined'\r\n                            />\r\n                        </div>\r\n                    )}\r\n            </main>\r\n            {tables[0] &&\r\n                tables.map((table, i) =>\r\n                    <section key={i}>\r\n                        <hr style={{ margin: '12px 0' }} />\r\n                        <CustomTable\r\n                            length={table.tableHeaders.length}\r\n                            title={table.mainTitle}\r\n                            table={table}\r\n                            style={{ textAlign: 'center', padding: '8px 0' }}\r\n                            idIndex={1}\r\n                            filePK='fileId'\r\n                            docsCollection='empresaDocs'\r\n                        />\r\n                    </section>\r\n                )\r\n            }\r\n            <ClosePopUpButton close={close} />\r\n        </div>\r\n    )\r\n}","export const laudosTable = [\r\n    {\r\n        field: 'empresaLaudo',\r\n        title: 'Empresa Emissora',\r\n    },\r\n    {\r\n        field: 'id',\r\n        title: 'Número do Laudo',\r\n    },\r\n    {\r\n        field: 'createdAt',\r\n        title: 'Registro no sistema',\r\n        type: 'date'\r\n    },\r\n    {\r\n        field: 'validade',\r\n        title: 'Data de validade',\r\n        type: 'date'\r\n    },\r\n    \r\n    {\r\n        field: 'laudoDoc',\r\n        title: 'Laudo',\r\n        type: 'link'\r\n    },\r\n    {\r\n        field: 'delete',\r\n        title: 'Remover',        \r\n        action: 'delete',\r\n        deleteFile: true\r\n    }\r\n]\r\n\r\n\r\n","import React, { useState, useEffect, useCallback, Fragment } from 'react'\r\nimport axios from 'axios'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\nimport ConfirmDialog from '../Reusable Components/ConfirmDialog'\r\n\r\nimport { checkInputErrors } from '../Utils/checkInputErrors'\r\nimport LaudosTemplate from './LaudosTemplate'\r\nimport ShowDetails from '../Reusable Components/ShowDetails'\r\nimport { laudoForm } from '../Forms/laudoForm'\r\nimport { laudosTable } from '../Forms/laudosTable'\r\nimport { logGenerator } from '../Utils/logGenerator'\r\nimport { setDemand } from '../Utils/setDemand'\r\nimport { sizeExceedsLimit } from '../Utils/handleFiles'\r\nlet i = 1\r\nconst Laudos = props => {\r\n    const\r\n        { veiculos, empresas, empresasLaudo, laudos, vehicleDocs } = props.redux,\r\n        demand = props?.location?.state?.demand\r\n\r\n    const initState = Object.freeze({\r\n        dropDisplay: 'Clique ou arraste o arquivo para anexar o laudo',\r\n        stateInputs: {\r\n            id: undefined,\r\n            validade: '',\r\n            empresaLaudo: ''\r\n        }\r\n    })\r\n\r\n    const\r\n        [razaoSocial, empresaInput] = useState(''),\r\n        [selectedEmpresa, setEmpresa] = useState(),\r\n        [oldVehicles, setOldVehicles] = useState(),\r\n        [filteredVehicles, setFilteredVehicles] = useState([]),\r\n        [details, setDetails] = useState(false),\r\n        [selectedVehicle, selectVehicle] = useState(),\r\n        [anchorEl, setAnchorEl] = useState(null),\r\n        [dropDisplay, setDropDisplay] = useState(initState.dropDisplay),\r\n        [laudoDoc, setLaudoDoc] = useState(),\r\n        [stateInputs, changeInputs] = useState({ ...initState.stateInputs }),\r\n        [toast, setToast] = useState(false),\r\n        [toastMsg, setToastMsg] = useState('Laudo enviado com sucesso.'),\r\n        [table, setTableData] = useState(),\r\n        [demandFiles, setDemandFiles] = useState(),\r\n        [fileToRemove, setFileToRemove] = useState(),\r\n        [showPendencias, setShowPendencias] = useState(false),\r\n        [alertDialog, setAlertDialog] = useState({\r\n            open: false,\r\n            type: 'inputError',\r\n            msg: '',\r\n        }),\r\n        [confirmDialogProps, setConfirmDialog] = useState({\r\n            open: false,\r\n            type: 'delete',\r\n            element: undefined,\r\n        })\r\n\r\n    useEffect(() => {                               //Set esc key to close details window\r\n        const escFunction = e => { if (e.keyCode === 27) setDetails(false); setAnchorEl(null) }\r\n        document.addEventListener('keydown', escFunction)\r\n    }, [])\r\n\r\n\r\n    if (demand && i === 1) {\r\n        i++\r\n        const\r\n            { history } = demand,\r\n            state = {},\r\n            fullDemand = setDemand(demand, props.redux),\r\n            empresa = fullDemand.selectedEmpresa,\r\n            dFiles = fullDemand.demandFiles,\r\n            { originalVehicle } = fullDemand\r\n\r\n        Object.entries(history[0]).forEach(([k, v]) => {            // Set state with demandState\r\n            if (stateInputs.hasOwnProperty(k))\r\n                state[k] = v\r\n        })\r\n\r\n        setEmpresa(empresa)\r\n        empresaInput(empresa.razaoSocial)\r\n        changeInputs(state)\r\n        setDemandFiles(dFiles)\r\n        selectVehicle(originalVehicle)\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        async function insertLaudos() {\r\n            if (selectedEmpresa && selectedEmpresa !== '') {\r\n                // Estabelece quais são os veículos 15+anos (oldVehicles)\r\n                const\r\n                    currentYear = new Date().getFullYear(),\r\n                    frota = veiculos.filter(v => v.empresa === selectedEmpresa.razaoSocial),\r\n                    oldVehicles = frota.filter(v => currentYear - v.anoCarroceria > 14 && v.anoCarroceria !== null).sort((a, b) => a.placa.localeCompare(b.placa))\r\n\r\n                let vehiclesLaudo = [], laudosTemp = []\r\n                oldVehicles.forEach(v => {                  //Acrescenta os laudos atualizados para cada veículo 15+anos (oldVehicles)\r\n                    laudos.forEach(l => {\r\n                        if (v.veiculoId === l.veiculoId) {\r\n                            laudosTemp.push(l)\r\n                        }\r\n                    })\r\n                    laudosTemp.sort((a, b) => {\r\n                        const dateA = new Date(a.validade)\r\n                        const dateB = new Date(b.validade)\r\n                        return dateB - dateA\r\n                    })\r\n                    vehiclesLaudo.push({ ...v, laudos: laudosTemp })\r\n                    laudosTemp = []\r\n                })\r\n\r\n                await setOldVehicles(vehiclesLaudo)\r\n                await setFilteredVehicles(vehiclesLaudo)\r\n\r\n                if (selectedVehicle && vehiclesLaudo?.length > 0) {\r\n                    const updatedVehicle = vehiclesLaudo.find(v => v.veiculoId === selectedVehicle.veiculoId)\r\n                    if (updatedVehicle?.laudos?.length !== selectedVehicle?.laudos?.length) {\r\n                        await selectVehicle(updatedVehicle)\r\n                    } else return\r\n                }\r\n            } else {\r\n                setOldVehicles()\r\n                setFilteredVehicles([])\r\n                setEmpresa()\r\n            }\r\n        }\r\n\r\n        insertLaudos()\r\n    }, [selectedEmpresa, veiculos, laudos, selectedVehicle])\r\n\r\n    const handleInput = useCallback(e => {\r\n        const { name } = e.target\r\n        let { value } = e.target\r\n\r\n        if (name === 'razaoSocial') {\r\n            empresaInput(value)\r\n            const selectedEmpresa = empresas.find(e => e.razaoSocial === value)\r\n            setEmpresa(selectedEmpresa)\r\n            return\r\n        }\r\n        if (name === 'placa' && oldVehicles[0]) {\r\n            if (typeof value === 'string') value = value.toLocaleUpperCase()\r\n            if (!value || value === '') setFilteredVehicles(oldVehicles)\r\n            else {\r\n                let vehicle\r\n                const filtered = oldVehicles.filter(v => v.placa.match(value))\r\n                if (filtered.length === 1) vehicle = filtered[0]\r\n\r\n                setFilteredVehicles(filtered)\r\n                selectVehicle(vehicle)\r\n                return\r\n            }\r\n        }\r\n        changeInputs({\r\n            ...stateInputs, [name]: value\r\n        })\r\n\r\n    }, [empresaInput, empresas, oldVehicles, stateInputs])\r\n\r\n    const clickOnPlate = async event => {\r\n\r\n        if (selectedVehicle) {\r\n            event.persist()\r\n            setAnchorEl(event.target);\r\n        } else {\r\n            const { id } = event.currentTarget\r\n            let v\r\n            if (id) v = oldVehicles.find(v => v.veiculoId.toString() === id)\r\n            selectVehicle(v)\r\n            setFilteredVehicles([v])\r\n        }\r\n    }\r\n\r\n    //Cria os cabeçalhos, linhas e células da tabela que exibe os laudos\r\n    useEffect(() => {\r\n        if (selectedVehicle && !demand) {\r\n            if (selectedVehicle.laudos && selectedVehicle.laudos[0]) {\r\n\r\n                const\r\n                    vehicleLaudos = selectedVehicle?.laudos,\r\n                    laudoDocs = vehicleDocs.filter(d => d.metadata.fieldName === 'laudoDoc')\r\n\r\n                let laudosArray = [], tableHeaders = [], tempArray = [], table2 = [...laudosTable]\r\n\r\n                vehicleLaudos.forEach(l => {\r\n                    table2.forEach(t => {\r\n                        let fileId\r\n\r\n                        const laudoDoc = laudoDocs.find(d => d.metadata.laudoId === l.id || d.metadata.laudoId.toString() === l.id.toString())\r\n                        if (laudoDoc)\r\n                            fileId = laudoDoc.id\r\n\r\n                        if (!tableHeaders.includes(t.title))\r\n                            tableHeaders.push(t.title)\r\n\r\n                        const { title, ...tableData } = t\r\n\r\n                        if (t.field === 'laudoDoc')\r\n                            tempArray.push({ ...tableData, value: l[t.field], fileId })\r\n                        else\r\n                            tempArray.push({ ...tableData, value: l[t.field] })\r\n                    })\r\n\r\n                    if (tempArray[4].fileId) tempArray[4].value = 'Clique para visualizar o laudo'\r\n                    else tempArray[4].value = 'Nenhum arquivo encontrado'\r\n                    laudosArray.push(tempArray)\r\n                    tempArray = []\r\n                })\r\n\r\n                table2 = [...laudosTable]\r\n                setTableData({ tableHeaders, arrayOfRows: laudosArray, docs: laudoDocs })\r\n\r\n            } else setTableData(`Nenhum laudo cadastrado para o veículo placa ${selectedVehicle.placa}.`)\r\n        }\r\n    }, [selectedVehicle, laudos, vehicleDocs, demand])\r\n\r\n    useEffect(() => {\r\n        i = 1\r\n        void 0\r\n    }, [])\r\n    const clear = () => {\r\n        document.querySelector('[name = \"placa\"]').value = ''\r\n        setFilteredVehicles(oldVehicles)\r\n        selectVehicle()\r\n    }\r\n\r\n    const showDetails = () => {\r\n\r\n        if (selectedVehicle) {\r\n            setDetails(!details)\r\n            setAnchorEl(null)\r\n        } else {\r\n            setDetails(false)\r\n            selectVehicle(undefined)\r\n            setAnchorEl(null)\r\n        }\r\n    }\r\n\r\n    const handleSubmit = async approved => {\r\n\r\n        const\r\n            empresaId = selectedEmpresa?.codigoEmpresa,\r\n            veiculoId = selectedVehicle?.veiculoId\r\n        let\r\n            { empresaLaudo, ...requestElement } = stateInputs,\r\n            errors = checkInputErrors() || []\r\n\r\n        //***************************Check for errors*********************/\r\n\r\n        const laudoAlreadyExists = laudos.find(l => l.id === stateInputs.id)\r\n        if (laudoAlreadyExists) {\r\n            setAlertDialog({\r\n                ...alertDialog,\r\n                open: true,\r\n                msg: 'O laudo informado já existe no sistema. Laudo nº ' + laudoAlreadyExists.id.toString()\r\n            })\r\n            clearForm()\r\n            return\r\n        }\r\n        Object.keys(stateInputs).forEach(k => {\r\n            if (k !== 'validade' && (!stateInputs[k] || stateInputs[k] === '')) {\r\n                let errorLabel = laudoForm.find(obj => obj.field === k)?.label\r\n                errors.push(errorLabel)\r\n            }\r\n        })\r\n        if (errors[0]) {\r\n            setAlertDialog({\r\n                ...alertDialog,\r\n                open: true,\r\n                msg: 'Favor verificar o preenchimento dos seguintes campos: ' + errors.toString()\r\n            })\r\n            clearForm()\r\n            return\r\n        }\r\n\r\n        //***************************Prepare the Log *********************/\r\n        if (approved === undefined) {\r\n\r\n            const history = {\r\n                ...stateInputs\r\n            },\r\n                log = {\r\n                    empresaId,\r\n                    veiculoId,\r\n                    history,\r\n                    historyLength: 0,\r\n                    metadata: {\r\n                        fieldName: 'laudoDoc',\r\n                        veiculoId\r\n                    },\r\n                }\r\n\r\n            if (laudoDoc)\r\n                log.history.files = laudoDoc\r\n\r\n            logGenerator(log)\r\n                .then(r => console.log(r?.data))\r\n            clearForm('all fields, reset state please!')\r\n            removeFile('laudoDoc')\r\n            toggleToast()\r\n            //console.log(initState.dropDisplay, laudoDoc)\r\n            return\r\n        }\r\n\r\n        if (approved === false) {\r\n            const log = {\r\n                id: demand.id,\r\n                empresaId,\r\n                history: {\r\n                    info: stateInputs?.info\r\n                },\r\n                declined: true\r\n            }\r\n            logGenerator(log)\r\n                .then(r => console.log(r))\r\n            setToastMsg('Solicitação indeferida!')\r\n            toggleToast()\r\n\r\n            setTimeout(() => {\r\n                props.history.push('/solicitacoes')\r\n            }, 1500);\r\n        }\r\n\r\n        if (approved === true) {\r\n            //Prepare the request Object\r\n            const empresa = empresasLaudo.find(e => e.empresa === empresaLaudo)\r\n            let laudoId\r\n            if (empresa) requestElement.empresa_id = empresa.id\r\n            requestElement.veiculo_id = selectedVehicle.veiculoId\r\n\r\n            const requestBody = { table: 'laudos', requestElement }\r\n\r\n            //Submit\r\n            await axios.post('/api/addElement', requestBody)\r\n                .then(r => {\r\n                    laudoId = r?.data[0]?.id\r\n                    console.log(r.data)\r\n                })\r\n                .catch(err => console.log(err))\r\n\r\n            //Record the log\r\n            const log = {\r\n                id: demand.id,\r\n                veiculoId,\r\n                demandFiles,\r\n                history: {},\r\n                metadata: {\r\n                    laudoId,\r\n                    tempFile: 'false'\r\n                },\r\n                approved\r\n            }\r\n\r\n            logGenerator(log)\r\n                .then(r => console.log(r.data))\r\n\r\n            //Toast cofirmation, clear State and redirect to Solicitacoes\r\n            setTimeout(() => { props.history.push('/solicitacoes') }, 1500);\r\n            setToastMsg('Laudo aprovado!')\r\n            toggleToast()\r\n            clearForm('Clear all Of It!!!')\r\n        }\r\n    }\r\n\r\n    function confirmDelete(laudoId) {\r\n        setConfirmDialog({\r\n            ...confirmDialogProps, open: true,\r\n            element: `laudo nº ${laudoId}`,\r\n            laudoId\r\n        })\r\n    }\r\n\r\n    function deleteLaudo(laudoId) {\r\n\r\n        const { veiculoId } = selectedVehicle\r\n\r\n        if (laudoId) {\r\n            closeConfirmDialog()\r\n\r\n            axios.delete(`/api/delete?table=laudos&tablePK=id&id=${laudoId}&veiculoId=${veiculoId}`)\r\n                .then(({ data }) => console.log(data))\r\n\r\n            const laudoDoc = vehicleDocs.find(d => d.metadata.fieldName === 'laudoDoc' && d.metadata.laudoId === laudoId.toString())\r\n            if (laudoDoc) axios.delete(`/api/deleteFile?collection=vehicleDocs&id=${laudoDoc?.id}`)\r\n                .then(({ data }) => console.log(data))\r\n        }\r\n    }\r\n\r\n    const handleFiles = (files, name) => {\r\n        //limit file Size\r\n        if (sizeExceedsLimit(files)) return\r\n\r\n        if (files && files[0]) {\r\n            let formData = new FormData()\r\n            formData.append('fieldName', 'laudoDoc')\r\n            formData.append('laudoId', stateInputs.id)\r\n            formData.append('veiculoId', selectedVehicle.veiculoId)\r\n            formData.append(name, files[0])\r\n            setLaudoDoc(formData)\r\n            setFileToRemove(undefined)\r\n            //  setDropDisplay(files[0].name)\r\n        }\r\n    }\r\n\r\n    const removeFile = async name => {\r\n        setFileToRemove(name)\r\n        setLaudoDoc(undefined)\r\n    }\r\n\r\n    const\r\n        closeMenu = () => setAnchorEl(null),\r\n        toggleAlert = () => setAlertDialog({ ...alertDialog, open: !alertDialog.open }),\r\n        toggleToast = () => setToast(!toast),\r\n        closeConfirmDialog = () => setConfirmDialog({ ...confirmDialogProps, open: false }),\r\n\r\n        clearForm = allFields => {\r\n            if (allFields) changeInputs({ ...initState.stateInputs })\r\n            setLaudoDoc()\r\n            setDropDisplay(initState.dropDisplay)\r\n            setOldVehicles()\r\n            setFilteredVehicles()\r\n        }\r\n\r\n    const selectOptions = props.redux.empresasLaudo.map(e => e.empresa)\r\n\r\n    return (\r\n        <Fragment>\r\n            <LaudosTemplate\r\n                empresas={empresas} razaoSocial={razaoSocial} selectedEmpresa={selectedEmpresa} filteredVehicles={filteredVehicles} selectedVehicle={selectedVehicle}\r\n                anchorEl={anchorEl} stateInputs={stateInputs} selectOptions={selectOptions} dropDisplay={dropDisplay} laudoDoc={laudoDoc} table={table}\r\n                demand={demand} demandFiles={demandFiles} showPendencias={showPendencias} fileToRemove={fileToRemove}\r\n                functions={{\r\n                    handleInput, clickOnPlate, showDetails, handleFiles, handleSubmit, closeMenu, clear, removeFile,\r\n                    setShowPendencias, deleteLaudo: confirmDelete\r\n                }}\r\n            />\r\n            {details && <ShowDetails\r\n                close={showDetails}\r\n                data={{ ...selectedVehicle, tableData: '' }}\r\n                tab={3}\r\n                title={'Veículo'}\r\n                header={'- informações'}\r\n            />}\r\n\r\n            {confirmDialogProps.open && <ConfirmDialog {...confirmDialogProps} close={closeConfirmDialog} confirm={deleteLaudo} id={confirmDialogProps.laudoId} />}\r\n\r\n            {alertDialog.open && <AlertDialog open={alertDialog.open} close={toggleAlert} alertType={alertDialog.type} customMessage={alertDialog.msg} />}\r\n            <ReactToast open={toast} close={toggleToast} msg={toastMsg} />\r\n        </Fragment >\r\n    )\r\n}\r\n\r\nconst collections = ['veiculos', 'empresas', 'empresasLaudo', 'laudos', 'getFiles/vehicleDocs']\r\nexport default StoreHOC(collections, Laudos)\r\n\r\n/*\r\n        [razaoSocial, empresaInput] = useState(empresas[0].razaoSocial),\r\n        [selectedEmpresa, setEmpresa] = useState(empresas[0]),\r\n        [oldVehicles, setOldVehicles] = useState(veiculos[0]),\r\n        [filteredVehicles, setFilteredVehicles] = useState([veiculos[0]]),\r\n        [details, setDetails] = useState(false),\r\n        [selectedVehicle, selectVehicle] = useState(veiculos[0]),\r\n\r\n\r\n\r\n[razaoSocial, empresaInput] = useState(''),\r\n[selectedEmpresa, setEmpresa] = useState(),\r\n[oldVehicles, setOldVehicles] = useState(),\r\n[filteredVehicles, setFilteredVehicles] = useState([]),\r\n[details, setDetails] = useState(false),\r\n[selectedVehicle, selectVehicle] = useState(), */","import { createContext } from 'react'\r\n\r\nexport const ReactContext = createContext(null)\r\n\r\nexport const  initContext = {\r\n    user: 'MockUser',\r\n    demandId: null\r\n}\r\n\r\n\r\n\r\n","import React from 'react'\r\n\r\nimport TextField from '@material-ui/core/TextField'\r\nimport AutoComplete from '../Utils/autoComplete'\r\nimport Grid from '@material-ui/core/Grid'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport { Send } from '@material-ui/icons'\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\n\r\n\r\nconst radioAttempt = [\r\n    {\r\n        value: 'venda',\r\n        label: 'Venda para outra empresa do sistema'\r\n    },\r\n    {\r\n        value: 'outro',\r\n        label: 'Outro'\r\n    }\r\n]\r\n\r\nconst radioAproval = [\r\n    {\r\n        value: 'aprovar',\r\n        label: 'Aprovar baixa do veículo'\r\n    },\r\n    {\r\n        value: 'pendencias',\r\n        label: 'Informar pendências/impedimentos para a baixa'\r\n    }\r\n]\r\n\r\nexport default function BaixaOptions({ empresas, demand, checked, delegaTransf, justificativa, pendencias, handleInput, handleBlur, handleCheck, handleSubmit }) {\r\n\r\n\r\n    const checkOptions = () => {\r\n\r\n        if (!demand || demand?.status.match('Pendências')) return radioAttempt\r\n        else return radioAproval\r\n    }\r\n\r\n    const formControl = checkOptions()\r\n\r\n    return (\r\n        <>\r\n            <Grid container\r\n                direction=\"row\"\r\n                justify=\"space-between\"\r\n                alignItems=\"center\"\r\n                style={{ width: checked ? '1200px' : '600px', marginTop: '25px' }}\r\n            >\r\n                <Grid item xs={checked ? 6 : 12}>\r\n                    <FormControl component=\"fieldset\">\r\n                        <FormLabel component=\"legend\">{!demand || demand?.status.match('Pendências') ? 'Motivo da baixa' : 'Aprovar baixa?'}</FormLabel>\r\n                        <RadioGroup aria-label=\"position\" name=\"position\"\r\n                            onChange={handleCheck} row\r\n                            style={{ width: 'auto' }}\r\n                            className='radio'\r\n                        >\r\n                            {\r\n                                formControl.map(({ value, label }, i) =>\r\n                                    <FormControlLabel\r\n                                        key={i}\r\n                                        className='radio'\r\n                                        value={value}\r\n                                        control={<Radio color=\"primary\" />}\r\n                                        label={<span style={{ fontSize: '0.8rem' }}>{label}</span>}\r\n                                        labelPlacement=\"start\"\r\n                                    />\r\n                                )\r\n                            }\r\n                        </RadioGroup>\r\n                    </FormControl>\r\n                </Grid>\r\n\r\n                {checked === 'venda' ?\r\n                    <Grid item xs={6} >\r\n                        <TextField\r\n                            inputProps={{\r\n                                list: 'razaoSocial',\r\n                                name: 'delegaTransf',\r\n                            }}\r\n                            value={delegaTransf}\r\n                            onChange={handleInput}\r\n                            onBlur={handleBlur}\r\n                            label='Informe o delegatário para o qual foi transferido o veículo.'\r\n                            fullWidth\r\n                        />\r\n                        <AutoComplete\r\n                            collection={empresas}\r\n                            datalist='razaoSocial'\r\n                            value={delegaTransf}\r\n                        />\r\n                    </Grid>\r\n                    :\r\n                    checked && checked !== 'aprovar' &&\r\n                    <Grid item xs={6}>\r\n                        <TextField\r\n                            name={checked === 'outro' ? 'justificativa' : 'pendencias'}\r\n                            value={checked === 'outro' ? justificativa : pendencias}\r\n                            label={checked === 'outro' ? 'Justificativa' : 'Pendências'}\r\n                            onChange={handleInput}\r\n                            InputLabelProps={{ shrink: true }}\r\n                            multiline\r\n                            rows={3}\r\n                            variant='outlined'\r\n                            fullWidth\r\n                        />\r\n                    </Grid>\r\n                }\r\n            </Grid>\r\n            <Grid container direction=\"row\" justify='flex-end' style={{ width: '1200px' }}>\r\n                <Grid item xs={11} style={{ width: '1000px' }}></Grid>\r\n                <Grid item xs={1} style={{ align: \"right\" }}>\r\n                    <Button\r\n                        size=\"small\"\r\n                        color=\"primary\"\r\n                        variant=\"outlined\"\r\n                        style={{ margin: '10px 0 10px 0' }}\r\n                        onClick={() => handleSubmit()}\r\n                    >\r\n                        Confirmar <span>&nbsp;&nbsp; </span> <Send />\r\n                    </Button>\r\n                </Grid>\r\n            </Grid>\r\n        </>\r\n    )\r\n}\r\n","export const baixaForm = [\r\n    {\r\n        field: 'placa',\r\n        label: 'Placa',      \r\n        datalist: 'placa',\r\n        autoComplete: true,\r\n        collection: 'frota',\r\n        maxLength: 8\r\n    },\r\n    {\r\n        field: 'renavam',\r\n        label: 'Renavam',        \r\n    },\r\n    {\r\n        field: 'nChassi',\r\n        label: 'Número do Chassi',        \r\n        maxLength: 17,\r\n    },   \r\n    {\r\n        field: 'utilizacao',\r\n        label: 'Utilização',        \r\n        disabled: true\r\n    },\r\n    {\r\n        field: 'dominio',\r\n        label: 'Situação da Propriedade',        \r\n        disabled: true\r\n    },\r\n\r\n    {\r\n        field: 'marcaChassi',\r\n        label: 'Marca do Chassi',        \r\n        disabled: true\r\n    },\r\n    {\r\n        field: 'modeloChassi',\r\n        label: 'Modelo do Chassi',        \r\n        disabled: true\r\n    },\r\n    {\r\n        field: 'marcaCarroceria',\r\n        label: 'Marca da Carroceria',        \r\n        disabled: true\r\n    },\r\n    {\r\n        field: 'modeloCarroceria',\r\n        label: 'Modelo da Carroceria',        \r\n        disabled: true\r\n    },\r\n    {\r\n        type: 'number',\r\n        field: 'indicadorIdade',\r\n        label: 'Ano',        \r\n        disabled: true\r\n    }\r\n]","import React, { Fragment } from 'react'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport TextInput from '../Reusable Components/TextInput'\r\n\r\nimport BaixaOptions from './BaixaOptions'\r\n\r\nimport { baixaForm } from '../Forms/baixaForm'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport './veiculos.scss'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    container: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        padding: theme.spacing(1),\r\n    },\r\n    formHolder: {\r\n        width: 900,\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(1),\r\n        textAlign: 'center',\r\n        color: theme.palette.text.secondary,\r\n        margin: theme.spacing(1)\r\n    }\r\n}));\r\n\r\nexport default function ({ handleInput, handleBlur, handleCheck, handleSubmit, data, empresas }) {\r\n    const { razaoSocial, frota, checked, delegaTransf, justificativa, demand } = data,\r\n        classes = useStyles(), { paper, container, formHolder } = classes\r\n\r\n    return (\r\n        <Fragment>\r\n            <Crumbs links={['Veículos', '/veiculos']} text='Baixa de veículo' demand={demand} />\r\n            <SelectEmpresa\r\n                data={data}\r\n                empresas={empresas}\r\n                handleInput={handleInput}\r\n                handleBlur={handleBlur}\r\n            />\r\n            <Grid\r\n                container\r\n                direction=\"row\"\r\n                className={container}\r\n                justify=\"center\"\r\n            >\r\n                {razaoSocial && frota[0] &&\r\n                    <Grid item xs={12}>\r\n                        <Paper className={paper}>\r\n                            <h3 style={{ marginBottom: '7px' }}>\r\n                                {!demand ? 'Informe os dados para a baixa' : `Solicitação nº${demand?.numero} - ${demand?.subject}`}\r\n                            </h3>\r\n                            {demand && <h4>Situação: {demand?.status}</h4>}\r\n                            <TextInput\r\n                                form={baixaForm}\r\n                                data={data}\r\n                                handleBlur={handleBlur}\r\n                                handleInput={handleInput}\r\n                                disableAll={demand ? true : false}\r\n                            />\r\n                        </Paper>\r\n\r\n                        <BaixaOptions\r\n                            demand={demand}\r\n                            checked={checked}\r\n                            delegaTransf={delegaTransf}\r\n                            justificativa={justificativa}\r\n                            empresas={empresas}\r\n                            handleInput={handleInput}\r\n                            handleBlur={handleBlur}\r\n                            handleCheck={handleCheck}\r\n                            handleSubmit={handleSubmit}\r\n                        />\r\n                    </Grid>\r\n                }\r\n                {!razaoSocial && !frota[0] &&\r\n                    <Grid container justify=\"center\">\r\n                        <div className={formHolder}></div>\r\n                    </Grid>}\r\n            </Grid>\r\n        </Fragment>\r\n    )\r\n}","import React, { Component, Fragment } from 'react'\r\nimport { ReactContext } from '../Store/ReactContext'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport BaixaTemplate from './BaixaTemplate'\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\n\r\nimport { logGenerator } from '../Utils/logGenerator'\r\nimport { baixaForm } from '../Forms/baixaForm'\r\nimport { checkDemand } from '../Utils/checkDemand'\r\n\r\nimport './veiculos.scss'\r\n\r\n\r\nclass BaixaVeiculo extends Component {\r\n\r\n    static contextType = ReactContext\r\n\r\n    state = {\r\n        empresas: [],\r\n        razaoSocial: '',\r\n        frota: [],\r\n        placa: '',\r\n        form: {},\r\n        check: '',\r\n        delegaTransf: '',\r\n        toastMsg: 'Solicitação de Baixa Enviada',\r\n        confirmToast: false,\r\n        openDialog: false,\r\n    }\r\n\r\n    async componentDidMount() {\r\n\r\n        const demand = this.props?.location?.state?.demand\r\n        if (demand) {\r\n            const\r\n                { empresas, veiculos } = this.props.redux,\r\n                { empresa, veiculo } = demand,\r\n                selectedEmpresa = empresas.find(e => e.razaoSocial === empresa),\r\n                frota = veiculos.filter(v => v.placa === veiculo),\r\n                selectedVehicle = frota.find(v => v.placa === veiculo)\r\n\r\n            await this.setState({ razaoSocial: empresa, selectedEmpresa, placa: veiculo, frota, ...selectedVehicle, demand })\r\n        }\r\n    }\r\n\r\n    handleInput = async e => {\r\n        const\r\n            { name, value } = e.target,\r\n            { veiculos, empresas } = this.props.redux\r\n\r\n        this.setState({ [name]: value })\r\n\r\n        if (name === 'razaoSocial') {\r\n            let selectedEmpresa = empresas.find(e => e.razaoSocial === value)\r\n\r\n            if (selectedEmpresa) {\r\n                await this.setState({ razaoSocial: selectedEmpresa.razaoSocial, selectedEmpresa })\r\n                if (value !== selectedEmpresa.razaoSocial) this.setState({ selectedEmpresa: undefined })\r\n\r\n                const frota = veiculos.filter(v => v.empresa === this.state.razaoSocial)\r\n                this.setState({ frota })\r\n\r\n            } else {\r\n                await this.setState({ selectedEmpresa: undefined, frota: [] })\r\n                this.reset()\r\n            }\r\n        }\r\n    }\r\n\r\n    handleBlur = async e => {\r\n        const\r\n            { empresas, logs } = this.props.redux,\r\n            { frota, demand } = this.state,\r\n            { name } = e.target\r\n        let { value } = e.target\r\n\r\n        if (name === 'delegaTransf') {\r\n            if (value.length > 0) {\r\n                const delegaTransf = empresas.find(e => e.razaoSocial === value)\r\n                if (delegaTransf) {\r\n                    const { razaoSocial, codigoEmpresa } = delegaTransf\r\n                    await this.setState(\r\n                        {\r\n                            delegaTransf: razaoSocial,\r\n                            delegaTransfId: codigoEmpresa,\r\n                            disableSubmit: true\r\n                        }\r\n                    )\r\n                    console.log(this.state)\r\n                    void 0\r\n                } else this.setState({ openAlertDialog: true, alertType: 'empresaNotFound', delegaTransf: '' })\r\n            }\r\n        }\r\n\r\n        if (name === 'placa' && typeof frota !== 'string') {\r\n            if (!value || value === '') this.setState({ disableSubmit: true })\r\n\r\n            let vehicle\r\n            if (value.length > 2)\r\n                vehicle = frota.find(v => {\r\n                    if (typeof value === 'string') return v.placa.toLowerCase().match(value.toLowerCase())\r\n                    else return v.placa.match(value)\r\n                })\r\n\r\n            if (vehicle) {\r\n                if (!demand) {\r\n                    const\r\n                        customTitle = 'Solicitação já cadastrada',\r\n                        customMessage = `Já existe uma demanda aberta para o veículo de placa ${vehicle.placa}. Para acessá-la, clique em \"Solicitações\" no menu superior.`\r\n\r\n                    const demandExists = checkDemand(vehicle?.veiculoId, logs)\r\n\r\n                    if (demandExists) {\r\n                        this.setState({ customTitle, customMessage, openAlertDialog: true, delegatario: '', placa: undefined })\r\n                        return\r\n                    }\r\n                }\r\n                await this.setState({ ...vehicle })\r\n\r\n            } else if (this.state.placa !== '') {\r\n                let reset = {}\r\n                if (frota[0]) Object.keys(frota[0]).forEach(k => reset[k] = '')\r\n                this.setState({ alertType: 'plateNotFound', openAlertDialog: true, disableSubmit: true })\r\n                this.setState({ ...reset })\r\n            }\r\n        }\r\n    }\r\n\r\n    handleSubmit = async () => {\r\n\r\n        const\r\n            { selectedEmpresa, checked, veiculoId, justificativa, pendencias, delegaTransf, delegaTransfId, demand } = this.state,\r\n            oldHistoryLength = demand?.history?.length || 0,\r\n            demandHistory = demand?.history.some(el => el.hasOwnProperty('delegaTransfId'))\r\n        let\r\n            tempObj,\r\n            enableSubmit,\r\n            log = {},\r\n            logSubject,\r\n            info,\r\n            history,\r\n            historyTransfId,\r\n            checkArray = ['selectedEmpresa', 'placa', 'codigoEmpresa']\r\n\r\n        if (demand && demandHistory && Array.isArray(demandHistory))\r\n            historyTransfId = demandHistory.reverse().find(e => e.hasOwnProperty('delegaTransfId')).delegaTransfId\r\n\r\n        switch (checked) {\r\n            case ('venda'):\r\n                checkArray.push('delegaTransf')\r\n\r\n                logSubject = `Baixa de veículo - venda para ${delegaTransf}`\r\n                info = `Solicitação de transferência do veículo para ${delegaTransf}`\r\n                history = { action: 'Solicitação de baixa', info }\r\n\r\n                if (!demand && delegaTransfId) history.delegaTransfId = delegaTransfId\r\n                if (demand && delegaTransfId && delegaTransfId !== historyTransfId) history.delegaTransfId = delegaTransfId\r\n                break\r\n\r\n            case ('outro'):\r\n                checkArray.push('justificativa')\r\n                history = { action: 'Solicitação de baixa', info: justificativa }\r\n                break\r\n\r\n            case ('pendencias'):\r\n                history = { action: 'Pendências para a baixa do veículo', info: pendencias }\r\n                this.setState({ toastMsg: 'Pendências para baixa enviadas.' })\r\n                break\r\n\r\n            case ('aprovar'):\r\n                tempObj = { situacao: 'Veículo baixado', apolice: 'Seguro não cadastrado' }\r\n                history = { action: 'Baixa do veículo aprovada' }\r\n\r\n                if (demand?.subject.match('venda')) {\r\n                    const newEmpresaId = demand?.history[0]?.delegaTransfId\r\n                    tempObj.codigoEmpresa = newEmpresaId\r\n                    tempObj.situacao = 'Ativo'\r\n                }\r\n                break\r\n            default: return\r\n        }\r\n\r\n        enableSubmit = checkArray.every(k => this.state.hasOwnProperty(k) && this.state[k] !== '')\r\n        if (!enableSubmit) {\r\n            await this.setState({ openAlertDialog: true, alertType: 'fieldsMissing' })\r\n            return null\r\n        }\r\n\r\n        //**************Create Log****************** */\r\n        log = {\r\n            subject: logSubject,\r\n            empresaId: selectedEmpresa?.codigoEmpresa,\r\n            veiculoId,\r\n            history,\r\n            historyLength: oldHistoryLength\r\n        }\r\n\r\n        if (demand) log.id = demand?.id\r\n        if (checked === 'aprovar') log.approved = true\r\n\r\n        logGenerator(log).then(r => console.log(r.data))\r\n\r\n        //*************If approved, submit request to update Postgres DB **************** */\r\n        if (checked === 'aprovar') {\r\n            const\r\n                requestObject = humps.decamelizeKeys(tempObj),\r\n                table = 'veiculos',\r\n                tablePK = 'veiculo_id'\r\n\r\n            await axios.put('/api/updateVehicle', { requestObject, table, tablePK, id: this.state.veiculoId })\r\n                .catch(err => console.log(err))\r\n            this.setState({ toastMsg: 'Baixa realizada com sucesso.' })\r\n        }\r\n\r\n        //***********Clear state****************** */        \r\n        this.toast()\r\n        await this.setState({ selectedEmpresa: undefined, frota: [], razaoSocial: '' })\r\n        this.reset()\r\n\r\n        //***********if demand, Redirect to /solicitacoes */        \r\n        if (demand)\r\n            setTimeout(() => {\r\n                this.props.history.push('/solicitacoes')\r\n            }, 1500)\r\n    }\r\n\r\n    handleCheck = e => this.setState({ checked: e.target.value })\r\n    reset = () => {\r\n        baixaForm.forEach(el => this.setState({ [el.field]: '' }))\r\n        this.setState({ delegaTransf: '', check: '', justificativa: '', checked: false, demand: undefined })\r\n    }\r\n    closeAlert = () => this.setState({ openAlertDialog: !this.state.openAlertDialog })\r\n    toast = () => this.setState({ confirmToast: !this.state.confirmToast })\r\n\r\n    render() {\r\n        const { delegaTransf, confirmToast, toastMsg, checked, openAlertDialog, customTitle, customMessage, alertType } = this.state\r\n\r\n        return <Fragment>\r\n            <BaixaTemplate\r\n                data={this.state}\r\n                empresas={this.props.redux.empresas}\r\n                checked={checked}\r\n                delegaTransf={delegaTransf}\r\n                handleInput={this.handleInput}\r\n                handleBlur={this.handleBlur}\r\n                handleCheck={this.handleCheck}\r\n                handleSubmit={this.handleSubmit}\r\n            />\r\n            {openAlertDialog && <AlertDialog open={openAlertDialog} close={this.closeAlert} alertType={alertType} customTitle={customTitle} customMessage={customMessage} />}\r\n            <ReactToast open={confirmToast} close={this.toast} msg={toastMsg} />\r\n        </Fragment >\r\n    }\r\n}\r\n\r\nconst collections = ['veiculos', 'empresas']\r\n\r\nexport default StoreHOC(collections, BaixaVeiculo)","import React, { Fragment } from 'react'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport Add from '@material-ui/icons/Add'\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport './config.css'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n    textField: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        marginTop: '2px',        \r\n        width: '275px',\r\n        fontSize: '0.8rem',\r\n        fontColor: '#bbb',\r\n        textAlign: 'center',\r\n    }    \r\n}))\r\n\r\nexport default function ConfigTemplate({ collections, collection, data, staticData,\r\n    selectCollection, handleChange, enableEdit, confirmDelete, handleSubmit, openAddDialog }) {\r\n\r\n    const\r\n        classes = useStyles(),\r\n        { textField } = classes\r\n\r\n    return (\r\n        <Fragment>\r\n           <Crumbs links={['Veículos', '/veiculos']} text='Alterar configurações de veículos' />\r\n            <center>\r\n                <h4>Selecione uma das opções abaixo.</h4>\r\n            </center>\r\n            <div className=\"selectHeader\">\r\n                <TextField\r\n                    className={textField}\r\n                    onChange={selectCollection}\r\n                    value={collection}\r\n                    select={true}\r\n                    SelectProps={{\r\n                        style: {\r\n                            fontSize: '0.9rem', color: '#555', fontWeight: 400,\r\n                            width: 325, height: '44px'\r\n                        }\r\n                    }}\r\n                >\r\n                    {collections.map((opt, i) =>\r\n                        <MenuItem key={i} value={opt} >\r\n                            {opt}\r\n                        </MenuItem>\r\n                    )}\r\n                </TextField>\r\n            </div>\r\n           {staticData && collection && <div className='divHeader'>\r\n                <Button\r\n                    size=\"small\"\r\n                    color='primary'\r\n                    variant='outlined'                    \r\n                    style={{ margin: '10px 0 10px 0' }}\r\n                    onClick={() => openAddDialog()}\r\n                >\r\n                    <Add /> Adicionar\r\n                </Button>\r\n            </div>}\r\n            <div className='container'>\r\n                {\r\n                    data && staticData && data.map((el, i) =>\r\n                        <div className='divCell' key={i}>\r\n                            <TextField\r\n                                value={el.edit ? el[staticData.field] : el[staticData.field] + ' (' + el['count'] + ')'}\r\n                                onChange={handleChange}\r\n                                name={el.field}\r\n                                type='text'\r\n                                inputProps={{\r\n                                    autoCorrect: 'off',\r\n                                    spellCheck: false,\r\n                                    style: {\r\n                                        fontSize: '0.8rem',\r\n                                        color: el.edit === true ? '#000' : '#999'\r\n                                    },                                    \r\n                                }}\r\n                                className={textField}\r\n                                disabled={el.edit === false}\r\n                            />\r\n                            <button component='span'\r\n                                className='configVehicleIcon'\r\n                                title='Editar'\r\n                                onClick={() => enableEdit(i)}\r\n                                display='none'>\r\n                                <EditIcon className='confIcon' color='primary' />\r\n                            </button>\r\n                            <button\r\n                                className='configVehicleIcon'\r\n                                title='Remover'\r\n                                onClick={() => confirmDelete(i)}>\r\n                                <DeleteIcon className='confIcon' color='secondary' />\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n            </div>           \r\n        </Fragment >\r\n    )\r\n}","import React, { PureComponent, Fragment } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport ConfigAddDialog from './ConfigAddDialog'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\nimport ConfigTemplate from './ConfigTemplate'\r\nimport ConfirmDialog from '../Reusable Components/ConfirmDialog'\r\n\r\nimport { configVehicleForm } from '../Forms/configVehicleForm'\r\n\r\nclass VehicleConfig extends PureComponent {\r\n\r\n    state = {\r\n        collection: '',\r\n        marca: '',\r\n        options: [],\r\n        openAddDialog: false,\r\n        confirmToast: false,\r\n        toastMsg: 'Dados atualizados!',\r\n        confirmDialogProps: { open: false }\r\n    }\r\n    componentDidMount() {\r\n        let options = []\r\n        configVehicleForm.forEach(col => { options.push(col.label) })\r\n        this.setState({ options })\r\n\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const\r\n            redux = JSON.parse(JSON.stringify(this.props.redux)),\r\n            { veiculos } = redux,\r\n            { staticData, data, editIndex } = this.state\r\n\r\n        if (!staticData || !data) return null\r\n\r\n        const { collection } = staticData\r\n        if (JSON.stringify(prevProps.redux[collection]) !== JSON.stringify(redux[collection])) {\r\n            const data = this.addCounter(veiculos, staticData, redux[collection])\r\n            if (editIndex || editIndex === 0)\r\n                data[editIndex].edit = true\r\n            this.setState({ data })\r\n        }\r\n    }\r\n\r\n    addCounter = (veiculos, staticData, data) => {\r\n        const { name, field, label } = staticData\r\n\r\n        data.forEach(el => {\r\n            const vehicles = veiculos.filter(v => {\r\n                if (label === 'Itens de acessibilidade' && v[name]) {\r\n                    const vehicleAccessItems = v[name]\r\n                    const hasItem = vehicleAccessItems.find(ac => ac === el.id)\r\n                    return hasItem\r\n                }\r\n\r\n                if (label === 'Equipamentos' && v[name]) return v[name].toLowerCase().match(el[field].toLowerCase())\r\n                return v[name] === el[field]\r\n            }),\r\n                count = vehicles.length\r\n            Object.assign(el, { count })\r\n        })\r\n        data = data.sort((a, b) => a[field].localeCompare(b[field]))\r\n        return data\r\n    }\r\n\r\n    selectCollection = async e => {\r\n        const\r\n            { value } = e.target,\r\n            { veiculos, marcaChassi, marcaCarroceria } = this.props.redux\r\n        let\r\n            staticData = configVehicleForm.find(el => el.label === value),\r\n            data = JSON.parse(JSON.stringify(this.props.redux[staticData.collection]))\r\n\r\n        data = this.addCounter(veiculos, staticData, data)\r\n        data.forEach(el => el.edit = false)\r\n\r\n        this.setState({ marcas: undefined, marca: '' })\r\n        if (staticData.collection === 'modelosChassi') this.setState({ marcas: marcaChassi })\r\n        if (staticData.collection === 'carrocerias') this.setState({ marcas: marcaCarroceria })\r\n\r\n        await this.setState({ collection: value, data, staticData })\r\n        void 0\r\n    }\r\n\r\n    enableEdit = async index => {\r\n        let oldIndex\r\n        const\r\n            redux = JSON.parse(JSON.stringify(this.props.redux)),\r\n            divCell = document.querySelectorAll('.divCell'),\r\n            divWrap = divCell[index].childNodes[0],\r\n            inputTarget = divWrap.querySelectorAll('input')[0],\r\n            { updatedObj, staticData } = this.state,\r\n            data = JSON.parse(JSON.stringify(this.state.data)),\r\n            selectedObj = data[index],\r\n            name = this.state?.staticData?.field\r\n\r\n        //O index de referência vai variar: se houver um campo em edição e se clicar no enableEdit de outro, o index de refrência é do campo anterior\r\n        //Inicialmente os objetos originais se baseiam no index que é dado como argumento da função\r\n        if (selectedObj?.edit === undefined) selectedObj.edit = false\r\n\r\n        let\r\n            originalObject = redux[staticData.collection].find(el => {\r\n                if (el.id === selectedObj.id)\r\n                    return Object.freeze(el)\r\n                else return {}\r\n            }),\r\n            noChanges = data[index][name] === originalObject[name]\r\n\r\n        //Verificar se já havia algum edit === true e se está se checando outro como true ao mesmo tempo q torna o ativo false        \r\n        const leftOpen = data.some((el, i) => {\r\n            if (i !== index && el.edit === true) {\r\n                oldIndex = data.indexOf(el)\r\n                return el\r\n            } else return false\r\n        })\r\n\r\n        //desativa a edição de todos os outros campos exceto o escolhido (index)\r\n        async function select() {\r\n            data.forEach(el => el.edit = false)\r\n            data[index].edit = true\r\n            await this.setState({ data, editIndex: index })\r\n            inputTarget.focus()\r\n        }\r\n        //Se todos objs estiverem com edição desabilitada:\r\n        if (!leftOpen) {\r\n            //So o clicado estiver desabilitad, apenas habilite sua edição\r\n            if (selectedObj.edit === false) {\r\n                data[index].edit = true\r\n                await this.setState({ data })\r\n                inputTarget.focus()\r\n            }\r\n            // Senão, verificar se houve mudança. Caso positivo, request p salvar e depois desabilita edição\r\n            else {\r\n                data[index].edit = false\r\n                if (updatedObj && !noChanges)\r\n                    this.handleSubmit(updatedObj)\r\n                this.setState({ data, editIndex: undefined })\r\n            }\r\n            return\r\n        }\r\n        //Nesse caso, um campo está em ediçao e outro campo foi clicado. Salva-se o em edição caso tenha sido alterado e se habilita a edição do próximo\r\n        if (leftOpen && !selectedObj.edit) {\r\n            select.call(this)\r\n            //Atualização do index para achar o objeto original referente ao último objeto com edit=true\r\n            originalObject = redux[staticData.collection].find(el => el.id === data[oldIndex]?.id)\r\n            noChanges = data[oldIndex][name] === originalObject[name]\r\n\r\n            if (updatedObj && !noChanges)\r\n                this.handleSubmit(updatedObj)\r\n        }\r\n    }\r\n\r\n    selectMarca = e => {\r\n        const\r\n            { value } = e.target,\r\n            { collection } = this.state.staticData,\r\n            { marcaChassi, marcaCarroceria } = this.props.redux\r\n\r\n        let marcaCollection\r\n        if (collection === 'modelosChassi') marcaCollection = marcaChassi\r\n        if (collection === 'carrocerias') marcaCollection = marcaCarroceria\r\n\r\n        const { id } = marcaCollection.find(m => m.marca === value)\r\n\r\n        this.setState({ marca: value, marcaId: id })\r\n    }\r\n\r\n    handleChange = async e => {\r\n        const\r\n            { value } = e.target,\r\n            { staticData, data } = this.state,\r\n            { field } = staticData,\r\n\r\n            changedElement = data.find(el => el.edit === true),\r\n            index = data.indexOf(changedElement)\r\n\r\n        changedElement[field] = value\r\n\r\n        let newData = [...this.state.data]\r\n        newData[index] = changedElement\r\n        const updatedObj = {\r\n            id: changedElement?.id,\r\n            [field]: value\r\n        }\r\n        this.setState({ data: newData, updatedObj })\r\n    }\r\n\r\n    handleInput = e => {\r\n        const { value } = e.target\r\n        this.setState({ newElement: value })\r\n    }\r\n\r\n    addNewElement = async () => {\r\n\r\n        const\r\n            { staticData, newElement, marcaId } = this.state,\r\n            { table, field, collection } = staticData,\r\n            { veiculos } = this.props.redux\r\n\r\n        let requestElement = { [field]: newElement }\r\n        if (marcaId) requestElement.marcaId = marcaId\r\n        requestElement = humps.decamelizeKeys(requestElement)\r\n\r\n        await axios.post('/api/addElement', { table, requestElement })\r\n\r\n        let data = this.props.redux[collection]\r\n        data = this.addCounter(veiculos, staticData, data)\r\n\r\n        this.setState({ openAddDialog: false, data, marcaId: undefined })\r\n    }\r\n\r\n    confirmDelete = index => {\r\n\r\n        const\r\n            { data, staticData } = this.state,\r\n            { field } = staticData,\r\n\r\n            elementName = data[index][field],\r\n            confirmDialogProps = {\r\n                open: true,\r\n                type: 'delete',\r\n                element: `${elementName}`,\r\n                index\r\n            }\r\n\r\n        this.setState({ confirmDialogProps })\r\n    }\r\n\r\n    removeItem = async index => {\r\n        this.closeConfirmDialog()\r\n\r\n        let data = [...this.state.data]\r\n\r\n        const\r\n            { staticData } = this.state,\r\n            { collection, table } = staticData,\r\n            id = data[index].id,\r\n            originalData = this.props.redux[collection],\r\n            registered = originalData.find(el => el.id === id)\r\n\r\n        if (registered) {\r\n            await axios.delete(`/api/delete?table=${table}&tablePK=id&id=${id}`)\r\n                .catch(err => console.log(err))\r\n        }\r\n        data.splice(index, 1)\r\n        this.setState({ data })\r\n\r\n    }\r\n\r\n    handleSubmit = async updatedObj => {\r\n        const\r\n            { staticData } = this.state,\r\n            { field, table } = staticData,\r\n            tablePK = 'id',\r\n            column = humps.decamelize(field),\r\n            editedElements = [humps.decamelizeKeys(updatedObj)]\r\n\r\n        await axios.put('/api/editElements', { requestArray: editedElements, table, tablePK, column })\r\n            .then(r => console.log('updated.'))\r\n            .catch(err => console.log(err))\r\n\r\n        this.setState({ updatedObj: undefined })\r\n    }\r\n\r\n    closeConfirmDialog = () => {\r\n        let confirmDialogProps = { ...this.state.confirmDialogProps }\r\n        confirmDialogProps.open = false\r\n\r\n        this.setState({ confirmDialogProps })\r\n    }\r\n\r\n    toggleDialog = () => this.setState({ openAddDialog: !this.state.openAddDialog })\r\n    toast = () => this.setState({ confirmToast: !this.state.confirmToast })\r\n\r\n    render() {\r\n\r\n        const { options, collection, data, staticData, openAddDialog, marca, marcas, confirmToast, toastMsg, confirmDialogProps } = this.state\r\n        return (\r\n            <Fragment>\r\n                <ConfigTemplate\r\n                    collections={options}\r\n                    collection={collection}\r\n                    data={data}\r\n                    staticData={staticData}\r\n                    selectCollection={this.selectCollection}\r\n                    enableEdit={this.enableEdit}\r\n                    handleChange={this.handleChange}\r\n                    handleSubmit={this.handleSubmit}\r\n                    openAddDialog={this.toggleDialog}\r\n                    confirmDelete={this.confirmDelete}\r\n                />\r\n                {openAddDialog && <ConfigAddDialog\r\n                    open={openAddDialog}\r\n                    close={this.toggleDialog}\r\n                    title={staticData.label}\r\n                    helperMessage='Para adicionar, insira o nome no campo abaixo e clique em \"Confirmar\".'\r\n                    marca={marca}\r\n                    marcas={marcas}\r\n                    selectMarca={this.selectMarca}\r\n                    handleInput={this.handleInput}\r\n                    addNewElement={this.addNewElement}\r\n                />}\r\n                {confirmDialogProps.open && <ConfirmDialog {...confirmDialogProps} close={this.closeConfirmDialog} confirm={this.removeItem} />}\r\n\r\n                <ReactToast open={confirmToast} close={this.toast} msg={toastMsg} />\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst collections = ['seguradoras', 'lookUpTable/marca_chassi', 'modelosChassi', 'lookUpTable/marca_carroceria',\r\n    'carrocerias', 'equipamentos', 'veiculos', 'acessibilidade', 'empresasLaudo']\r\n\r\nexport default StoreHOC(collections, VehicleConfig)","import { formatDate } from '../Utils/formatValues'\r\n\r\nexport const delegatarioTable = [\r\n    {\r\n        field: 'razaoSocial',\r\n        title: 'Razão Social',\r\n    },\r\n    {\r\n        field: 'cnpj',\r\n        title: 'CNPJ',\r\n    },\r\n    {\r\n        field: 'vencimentoContrato',\r\n        title: 'Vencimento do Cadastro',\r\n        filtering: false,\r\n        render: rowData => formatDate(rowData.vencimentoContrato)\r\n    },\r\n    {\r\n        field: 'cidade',\r\n        title: 'Município',\r\n    },\r\n    {\r\n        field: 'telefone',\r\n        title: 'Telefone',\r\n    },\r\n    {\r\n        field: 'frota',\r\n        title: 'Tamanho da frota'\r\n    }\r\n]\r\n\r\nexport const sociosTable = [\r\n    {\r\n        field: 'nomeSocio',\r\n        title: 'Nome',\r\n    },\r\n    {\r\n        field: 'cpfSocio',\r\n        title: 'CPF',\r\n    },\r\n    {\r\n        field: 'razaoSocial',\r\n        title: 'Delegatário(s)',\r\n    },\r\n    {\r\n        field: 'emailSocio',\r\n        title: 'E-mail',\r\n\r\n    },\r\n    {\r\n        field: 'telSocio',\r\n        title: 'Telefone',\r\n\r\n    },\r\n    {\r\n        field: 'share',\r\n        title: 'Participação Societária (%)',\r\n        filtering: false,\r\n    }\r\n]\r\n\r\n\r\nexport const procuradorTable = [\r\n    {\r\n        field: 'nomeProcurador',\r\n        title: 'Nome',\r\n    },\r\n    {\r\n        field: 'cpfProcurador',\r\n        title: 'CPF',\r\n    },\r\n    {\r\n        field: 'emailProcurador',\r\n        title: 'E-mail',\r\n    },\r\n    {\r\n        field: 'telProcurador',\r\n        title: 'Telefone'\r\n    }\r\n]\r\n\r\nexport const vehicleTable = [\r\n    {\r\n        field: 'placa',\r\n        title: 'Placa',\r\n    },\r\n    {\r\n        field: 'empresa',\r\n        title: 'Delegatário',\r\n    },\r\n    {\r\n        field: 'seguradora',\r\n        title: 'Seguradora',\r\n    },\r\n    {\r\n        field: 'apolice',\r\n        title: 'Número da Apólice',\r\n    },\r\n    {\r\n        field: 'vencimento',\r\n        title: 'Vencimento Seguro',\r\n        render: rowData => formatDate(rowData.vencimento)\r\n    },\r\n    {\r\n        field: 'situacao',\r\n        title: 'Situação',\r\n    },\r\n    {\r\n        field: 'compartilhado',\r\n        title: 'Compartilhado por'\r\n    },\r\n    /*  {\r\n         field: 'anoCarroceria',\r\n         title: 'Ano de Fabricação',\r\n         filtering: false\r\n     } */\r\n    {\r\n        field: 'indicadorIdade',\r\n        title: 'Indicador de idade',\r\n        render: rowData => {\r\n            let\r\n                i = rowData['indicadorIdade'],\r\n                timeUnit = ' anos',\r\n                output\r\n\r\n            if (i || i === 0) {\r\n                if (i === -1)\r\n                    i = 0\r\n                if (i === 1 || i === 0)\r\n                    timeUnit = ' ano'\r\n                output = i.toString() + timeUnit\r\n                return output\r\n            }\r\n        }\r\n    }\r\n]\r\n\r\nexport const segurosTable = [\r\n    {\r\n        field: 'apolice',\r\n        title: 'Número da Apólice',\r\n    },\r\n    {\r\n        field: 'seguradora',\r\n        title: 'Seguradora',\r\n    },\r\n    {\r\n        field: 'empresa',\r\n        title: 'Segurado',\r\n    },\r\n    {\r\n        field: 'situacao',\r\n        title: 'Situação',\r\n    },\r\n    {\r\n        field: 'segurados',\r\n        title: 'Número de veículos',\r\n    },\r\n    {\r\n        field: 'dataEmissao',\r\n        title: 'Início da vigência',\r\n        filtering: false,\r\n        render: rowData => formatDate(rowData.dataEmissao)\r\n    },\r\n    {\r\n        field: 'vencimento',\r\n        title: 'Vencimento',\r\n        filtering: false,\r\n        render: rowData => formatDate(rowData.vencimento)\r\n    }\r\n]\r\n\r\nexport const tables = [delegatarioTable].concat([sociosTable]).concat([procuradorTable]).concat([vehicleTable]).concat([segurosTable])\r\n","import * as FileSaver from 'file-saver';\r\nimport * as XLSX from 'xlsx';\r\nimport moment from 'moment'\r\n\r\nconst exportToXlsx = (subject, tab, form, rawData) => {\r\n    const\r\n        fileType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8',\r\n        fileExtension = '.xlsx',\r\n        fileName = subject[tab]\r\n\r\n    const formatedData = formatData(form, rawData)\r\n\r\n    const ws = XLSX.utils.json_to_sheet(formatedData);\r\n    const wb = { Sheets: { 'data': ws }, SheetNames: ['data'] };\r\n    const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\r\n    const data = new Blob([excelBuffer], { type: fileType });\r\n    FileSaver.saveAs(data, fileName + fileExtension);\r\n}\r\n\r\nfunction formatData(form, data) {\r\n\r\n    const rawData = JSON.parse(JSON.stringify(data))\r\n\r\n    const formatValue = value => {\r\n        if (moment(value, 'YYYY-MM-DDTHH:mm:ss.SSSZZ', true).isValid())\r\n            value = moment(value).format('DD/MM/YYYY')\r\n        return value\r\n    }\r\n\r\n    if (Array.isArray(rawData)) {\r\n        rawData.forEach((obj, i) => {\r\n            Object.entries(obj).forEach(([key, value]) => {\r\n\r\n                const formField = form.find(f => f.field === key)\r\n\r\n                if (!formField) {\r\n                    delete obj[key]\r\n                    return\r\n\r\n                } else {\r\n                    const header = formField?.label\r\n                    value = formatValue(value)\r\n                    obj[header] = value\r\n                    delete obj[key]\r\n                }\r\n            })\r\n        })\r\n    }\r\n    return rawData\r\n}\r\n\r\nexport default exportToXlsx","import React from 'react'\r\nimport MaterialTable from 'material-table';\r\nimport { tables } from './tables'\r\nimport exportToXlsx from './exportToXlsx';\r\nimport { setForm } from '../Utils/createFormPattern';\r\n\r\nexport default function ({ tab, collection, showDetails, showFiles, showCertificate, del }) {\r\n\r\n    const\r\n        id = ['codigoEmpresa', 'socioId', 'procuradorId', 'veiculoId', 'apolice'][tab],\r\n        subject = ['empresas', 'sócios', 'procuradores', 'veículos', 'seguros'],\r\n        form = setForm(tab)\r\n\r\n    if (!Array.isArray(collection)) collection = []\r\n    collection = collection.map(obj => ({ ...obj }))\r\n\r\n    return (\r\n        <div style={{ margin: '10px 0' }} className='noPrint'>\r\n            <MaterialTable\r\n                title={`Pesquisar dados de ${subject[tab]}`}\r\n                columns={tables[tab]}\r\n                data={collection}\r\n                style={{ fontFamily: 'Segoe UI', fontSize: '14px' }}\r\n                options={{\r\n                    filtering: true,\r\n                    exportButton: true,\r\n                    exportFileName: subject[tab],\r\n                    exportCsv: (columns, data) => {\r\n                        exportToXlsx(subject, tab, form, data)\r\n                    },\r\n                    actionsColumnIndex: -1,\r\n                    searchFieldStyle: { color: '#024', fontSize: '14px' },\r\n                    headerStyle: { backgroundColor: '#FAFAFC' },\r\n                    emptyRowsWhenPaging: false,\r\n                    pageSize: 20,\r\n                    rowStyle: {\r\n                        fontSize: '0.5rem',\r\n                    }\r\n                }}\r\n\r\n                localization={{\r\n                    header: { actions: 'Opções' },\r\n                    body: {\r\n                        emptyDataSourceMessage: 'Registro não encontrado.',\r\n                        editRow: { deleteText: 'Tem certeza que deseja apagar esse registro ?' },\r\n                        deleteTooltip: 'Apagar',\r\n                        filterRow: { filterTooltip: 'Filtrar' }\r\n                    },\r\n                    toolbar: {\r\n                        searchTooltip: 'Procurar',\r\n                        searchPlaceholder: 'Procurar',\r\n                        exportName: 'Salvar como arquivo do excel',\r\n                        exportAriaLabel: 'Exportar',\r\n                        exportTitle: 'Exportar'\r\n                    },\r\n                    pagination: {\r\n\r\n                        labelRowsSelect: 'Resultados por página',\r\n                        labelDisplayedRows: ' {from}-{to} a {count}',\r\n                        firstTooltip: 'Primeira página',\r\n                        previousTooltip: 'Página anterior',\r\n                        nextTooltip: 'Próxima Página',\r\n                        lastTooltip: 'Última Página',\r\n\r\n                    }\r\n                }}\r\n                actions={[\r\n                    {\r\n                        icon: 'info',\r\n                        iconProps: { color: 'primary' },\r\n                        tooltip: 'Mais informações',\r\n                        onClick: (event, rowData) => showDetails(event, rowData)\r\n                    },\r\n                    {\r\n                        icon: 'file_copy_outline',\r\n                        iconProps: { color: 'secondary' },\r\n                        tooltip: 'Ver arquivos',\r\n                        onClick: (event, rowData) => showFiles(rowData[id])\r\n                    },\r\n                    {\r\n                        icon: 'class_outlined',\r\n                        iconProps: { color: 'action' },\r\n                        tooltip: 'Emitir certificado',\r\n                        hidden: tab !== 3,\r\n                        onClick: (event, rowData) => showCertificate(rowData)\r\n                    }\r\n                ]}\r\n                editable={{\r\n                    onRowDelete: async oldData => await del(oldData)\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n}","export const delegatario = [[\r\n    {\r\n        field: 'empresa',\r\n        label: 'Delegatário',\r\n        width: '120mm',\r\n        left: '50mm'\r\n    },\r\n    {\r\n        type: 'date',\r\n        field: 'vencimentoContrato',\r\n        label: 'Validade do Contrato',\r\n        width: '36mm',\r\n        left: '5mm'\r\n    },\r\n]]\r\n\r\nexport const caracteristicas = [\r\n    [\r\n        {\r\n            field: 'placa',\r\n            label: 'Placa',\r\n            width: '25mm',\r\n            left: '8mm'\r\n        },\r\n        {\r\n            field: 'renavam',\r\n            label: 'Renavam',\r\n            width: '42mm',\r\n            left: '14mm'\r\n        },\r\n        {\r\n            field: 'poltronas',\r\n            label: 'Poltronas',\r\n            width: '16mm',\r\n            left: '2mm'\r\n        },\r\n        {\r\n            field: 'piquesPoltrona',\r\n            label: 'Piques poltrona',\r\n            width: '19mm'\r\n        },\r\n        {\r\n            field: 'nChassi',\r\n            label: 'Número do Chassi',\r\n            width: '50mm',\r\n            left: '15mm'\r\n        },\r\n\r\n    ],\r\n    [\r\n        {\r\n            field: 'marcaChassi',\r\n            label: 'Marca do Chassi',\r\n            width: '49mm',\r\n            left: '15mm'\r\n        },\r\n        {\r\n            field: 'modeloChassi',\r\n            label: 'Modelo do Chassi',\r\n            width: '49mm',\r\n            left: '15mm'\r\n        },\r\n        {\r\n            field: 'anoChassi',\r\n            label: 'Ano do chassi',\r\n        },\r\n        {\r\n            field: 'distanciaMinima',\r\n            label: 'Distância Mínima (cm)',\r\n        },\r\n        {\r\n            field: 'distanciaMaxima',\r\n            label: 'Distância Máxima (cm)'\r\n        }\r\n    ],\r\n    [\r\n        {\r\n            field: 'marcaCarroceria',\r\n            label: 'Marca da Carroceria',\r\n            width: '49mm',\r\n            left: '15mm'\r\n        },\r\n        {\r\n            field: 'modeloCarroceria',\r\n            label: 'Modelo da Carroceria',\r\n            width: '49mm',\r\n            left: '15mm'\r\n        },\r\n        {\r\n            field: 'anoCarroceria',\r\n            label: 'Ano da carroceria',\r\n        },\r\n        {\r\n            field: 'cores',\r\n            label: 'Cores',\r\n            width: '45mm',\r\n            left: '15mm'\r\n        }]\r\n]\r\n\r\nexport const seguro = [[\r\n    {\r\n        field: 'seguradora',\r\n        label: 'Seguradora',\r\n        width: '75mm',\r\n        left: '27.5mm'\r\n    },\r\n    {\r\n        field: 'apolice',\r\n        label: 'Apólice',\r\n        width: '35mm',\r\n        left: '13mm'\r\n    },\r\n    {\r\n        type: 'date',\r\n        field: 'dataEmissao',\r\n        label: 'Data de Emissão',\r\n        width: '25mm',\r\n        left: '5mm'\r\n    },\r\n    {\r\n        type: 'date',\r\n        field: 'vencimento',\r\n        label: 'Vencimento',\r\n        width: '25mm',\r\n        left: '5mm'\r\n    }]]\r\n\r\nexport const pesagem = [[\r\n    {\r\n        field: 'eixos',\r\n        label: 'Nº Eixos',\r\n        width: '15mm',\r\n        left: '2mm'\r\n    },\r\n    {\r\n        field: 'pbt',\r\n        label: 'Peso Bruto Total',\r\n        width: '25mm',\r\n        left: '5mm'\r\n    },\r\n    {\r\n        field: 'pesoDianteiro',\r\n        label: 'Peso Dianteiro (kg)',\r\n        width: '28mm',\r\n        left: '4mm'\r\n    },\r\n    {\r\n        field: 'pesoTraseiro',\r\n        label: 'Peso Traseiro (kg)',\r\n        width: '28mm',\r\n        left: '4mm'\r\n    },\r\n    {\r\n        field: 'pbt',\r\n        label: 'Peso Bruto Total',\r\n        width: '25mm',\r\n        left: '5mm'\r\n    },\r\n    {\r\n        field: 'pesoPassageiros',\r\n        label: 'Passag/Bagagem',\r\n        width: '25mm',\r\n        left: '3mm'\r\n    },\r\n]]\r\n\r\n\r\nexport const informacoesGerais = [[\r\n    {\r\n        type: 'date',\r\n        field: 'dataRegistro',\r\n        label: 'Data de Registro',\r\n        width: '35mm',\r\n        left: '9mm'\r\n    },\r\n    {\r\n        field: 'dataExpedicao',\r\n        label: 'Data de expedição',\r\n        width: '35mm',\r\n        left: '9mm'\r\n    },\r\n    {\r\n        field: 'utilizacao',\r\n        label: 'Utilização',\r\n        width: '35mm',\r\n        left: '9mm'\r\n    },\r\n    {\r\n        field: 'equipamentosId',\r\n        label: 'Acessórios',\r\n        width: '65mm',\r\n    }\r\n]]\r\n\r\nexport const other = [[\r\n    {\r\n        field: 'compartilhado', \r\n        label: 'Empresas autorizadas a compartilhar',\r\n        width: '120mm',\r\n        left: '20mm'\r\n    },\r\n    {\r\n        field: 'observacoes', \r\n        label: 'Observações',\r\n        width: '80mm',        \r\n    }\r\n]]","import React, { Fragment, useState, useEffect } from 'react'\r\nimport moment from 'moment'\r\n\r\nimport { delegatario, caracteristicas, seguro, pesagem, informacoesGerais, other } from '../Forms/certificate'\r\n\r\nimport './certificate.css'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport PrintTwoToneIcon from '@material-ui/icons/PrintTwoTone';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n    textField: {\r\n        paddingRight: '25px',\r\n        fontSize: '0.8rem',\r\n        fontColor: '#bbb',\r\n        textAlign: 'center',\r\n    }\r\n}))\r\n\r\n\r\nexport default function PdfCertificate() {\r\n\r\n    const [vehicle, setVehicle] = useState({})\r\n    \r\n\r\n    useEffect(() => {\r\n        async function setData() {            \r\n            const data = JSON.parse(localStorage.getItem('vehicle'))        \r\n            let menus = document.querySelectorAll('.MuiToolbar-root')\r\n            menus.forEach(m => m.style.display = 'none')\r\n            await setVehicle(data)\r\n            setTimeout(() => {\r\n                if (data) window.print()\r\n            }, 500);\r\n        }\r\n        setData()\r\n        localStorage.removeItem('vehicle')        \r\n    }, [])\r\n\r\n    const classes = useStyles(),\r\n        { textField } = classes\r\n\r\n    let carac = caracteristicas,\r\n        delega = delegatario,\r\n        seg = seguro,\r\n        peso = pesagem,\r\n        info = informacoesGerais,\r\n        obs = other,\r\n        object = {}\r\n\r\n    const formArray = [carac, delega, seg, peso, info, obs]\r\n\r\n    if (vehicle)\r\n        formArray.forEach(form => {\r\n            Object.entries(vehicle).forEach(([key, value]) => {\r\n                form.forEach((line, i) => {\r\n                    line.forEach((obj, k) => {\r\n                        if (obj.field === key) {\r\n                            object = Object.assign(obj, { value })\r\n                            form[i][k] = object\r\n                            object = {}\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        })\r\n    const checkMulti = field => {\r\n        if (field === 'equipamentosId' || field === 'equipamentosId') return\r\n        else return 'certificate'\r\n    }\r\n    const redirect = () => {\r\n        let menus = document.querySelectorAll('.MuiToolbar-root')\r\n        menus.forEach(m => m.style.display = 'none')\r\n        const url = window.location.origin\r\n        window.location.href = url;\r\n    }\r\n    const ultimateForm = [\r\n        { title: 'Delegatário', form: delega },\r\n        { title: 'Características do Veículo', form: carac },\r\n        { title: 'Seguro', form: seg },\r\n        { title: 'Pesagem', form: peso },\r\n        { title: 'Informações gerais', form: info },\r\n        { title: 'Outras informações', form: obs }\r\n    ]\r\n    if (!vehicle) {\r\n        const url = window.location.origin\r\n        window.location.replace(url)\r\n        return null\r\n    }\r\n    return (\r\n        <Fragment>\r\n            <div id='pdfPage' className='A4'>\r\n                <div className='header'>\r\n                    <img src='/images/certficateHeader.png' height='100%' width='100%' alt=\"header\" />\r\n                </div>\r\n                {ultimateForm.map(({ title, form }, y) =>\r\n                    <div className={title !== 'Delegatário' ? 'box' : 'firstBox'} key={y}>\r\n                        {title !== 'Delegatário' && <span className='boxTitle'>{title}</span>}\r\n                        {form.map((line, i) =>\r\n                            <div key={i} className={title !== 'Delegatário' ? 'divLine' : 'firstDivLine'} style={{ marginTop: i === 0 && '11mm' }}>\r\n                                {line.map((el, k) =>\r\n                                    <TextField\r\n                                        disabled\r\n                                        key={k}\r\n                                        name={el.field}\r\n                                        label={el.label}\r\n                                        className={textField}\r\n                                        multiline={el.field === 'equipamentosId' || (el.field === 'observacoes' && el.value && el.value.length > 50) ? true : false}\r\n                                        rows={\r\n                                            el.value && el.value.length < 86 ? '2' :\r\n                                                el.value && el.value.length < 140 ? '3' : '4'\r\n                                        }\r\n                                        variant={el.field === 'equipamentosId' || (el.field === 'observacoes' && el.value && el.value.length > 50) ? 'outlined' : 'standard'}\r\n                                        value={\r\n                                            el.type === 'date' ? moment(el.value).format('DD-MM-YYYY') :\r\n                                                el.field === 'dataExpedicao' ? moment().format('DD-MM-YYYY') :\r\n                                                    el.value || ''\r\n                                        }\r\n                                        inputProps={{\r\n                                            className: checkMulti(el.field),\r\n                                            style: {\r\n                                                width: el.width || '18mm',\r\n                                                fontSize: '2.7mm',\r\n                                                padding: '1px 0',\r\n                                                margin: '0',\r\n                                                flex: '1',\r\n                                                color: '#000'\r\n                                            }\r\n                                        }}\r\n                                        InputProps={{ style: { padding: el.field === 'equipamentosId' || (el.field === 'observacoes' && el.value && el.value.length > 50) ? '1mm' : '' } }}\r\n                                        InputLabelProps={{\r\n                                            shrink: true,\r\n                                            style: {\r\n                                                fontSize: '13px',\r\n                                                textAlign: 'center !important',\r\n                                                left: el.left || '0',\r\n                                                color: '#000'\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n                <div className='porteObrigatorio'>\r\n                    <img src=\"/images/porteObrigatorio.png\" height='100%' width='100%' alt=\"porte obrigatório\" />\r\n                    <br />\r\n                    Este certificado pode ser verificado em <span className='link' onClick={() => redirect()}> http://www.sismob.mg.gov.br </span>\r\n                </div>\r\n            </div>\r\n            <br />\r\n\r\n            <button title='Imprimir / salvar PDF' className='noprint printButton' onClick={() => window.print()}>\r\n                <PrintTwoToneIcon style={{\r\n                    cursor: 'pointer',\r\n                    color: 'rgb(161, 161, 180)',\r\n                    fontSize: '40pt',\r\n                }} /></button>\r\n        </Fragment>\r\n    )\r\n}","const formatFileSize = (bytes) => {\r\n\r\n    if (bytes > 1024 && bytes < 1048576) {\r\n        return Math.round(bytes / 1024) + ' KB'\r\n\r\n    } else if (bytes >= 1048576 && bytes < (1048576 * 1024)) {\r\n        return ((bytes / 1024) / 1024).toFixed(2) + ' MB'\r\n    } else {\r\n        return bytes + ' bytes'\r\n    }\r\n}\r\n\r\nexport default formatFileSize","import React from 'react';\r\n\r\nimport { formatDate } from '../Utils/formatValues'\r\nimport formatFileSize from '../Utils/formatFileSize'\r\nimport download from '../Utils/downloadFile'\r\n\r\nimport ClosePopUpButton from './ClosePopUpButton'\r\nimport { cadVehicleFiles } from '../Forms/cadVehicleFiles'\r\nimport { empresaFiles } from '../Forms/empresaFiles'\r\n\r\nconst divRow = {\r\n    marginBottom: 0,\r\n    display: 'grid',\r\n    grid: '50px / 4% 40% 25% 25%',\r\n    width: '99%',\r\n    margin: 'auto',\r\n    padding: '10px 0 0 0',\r\n    justifyItems: 'auto'\r\n}\r\n\r\nconst ShowFiles = ({ filesCollection, close, typeId, empresas, filesIds, razaoSocial }) => {\r\n\r\n    let files = [],\r\n        collection = 'empresaDocs', fileLabels = [...empresaFiles]\r\n\r\n    switch (typeId) {\r\n        case 'veiculoId':\r\n            collection = 'vehicleDocs'\r\n            fileLabels = [...cadVehicleFiles]\r\n            if (!fileLabels.find(f => f.name === 'transferenciaDoc')) fileLabels.push({ title: 'Documento de Transferência', name: 'transferenciaDoc' })\r\n            if (!fileLabels.find(f => f.name === 'newPlateDoc')) fileLabels.push({ title: 'CRLV com nova placa', name: 'newPlateDoc' })\r\n            if (!fileLabels.find(f => f.name === 'apoliceDoc')) fileLabels.push({ title: 'Apólice de seguro', name: 'apoliceDoc' })\r\n            if (!fileLabels.find(f => f.name === 'laudoDoc')) fileLabels.push({ title: 'Laudo de segurança veicular', name: 'laudoDoc' })\r\n            break;\r\n        default: void 0\r\n    }\r\n\r\n    //Achar e filtrar na coleção de arquivos do MongoDB qual(is) cujo(s) id está na array filesIds\r\n    if (filesIds)\r\n        filesCollection = filesCollection.filter(f => filesIds.indexOf(f.id) !== -1)\r\n\r\n    if (filesCollection && filesCollection[0]) {\r\n        filesCollection.forEach(obj => {\r\n            fileLabels.forEach(o => {\r\n                if (obj.metadata && o.name === obj.metadata.fieldName)\r\n                    files.push({ ...obj, label: o.title })\r\n            })\r\n        })\r\n    }\r\n\r\n    const getLabel = file => {\r\n        const { metadata, label } = file\r\n\r\n        switch (metadata.fieldName) {\r\n            case 'procuracao':\r\n                if (razaoSocial)\r\n                    return label + ' - ' + razaoSocial\r\n                const emp = empresas.find(e => e.codigoEmpresa === Number(metadata.empresaId))\r\n                return label + ' - ' + emp?.razaoSocial || ''\r\n\r\n            case 'apoliceDoc':\r\n                if (metadata.apolice)\r\n                    return label + ' número ' + metadata.apolice\r\n                else\r\n                    return label\r\n\r\n            case 'altContratoDoc':\r\n                if (metadata.numeroAlteracao)\r\n                    return `${metadata.numeroAlteracao}ª ` + label\r\n                else\r\n                    return label\r\n\r\n            default:\r\n                return label\r\n        }\r\n    }\r\n    const header = ['Arquivo', 'Data de Upload', 'Tamanho']\r\n\r\n    if (files[0]) {\r\n        return (\r\n            <div className={filesIds ? '' : 'popUpWindow'}>\r\n                <h5>\r\n                    <img alt=\"\" src=\"/images/folderIcon2.jpg\" style={{ paddingLeft: '20px', marginRight: '20px' }} /> Arquivos\r\n                </h5>\r\n\r\n                <hr style={{ marginBottom: '5px' }} />\r\n                <div style={divRow}>\r\n                    <div>\r\n                        <img alt=\"\" src=\"/images/multipleFiles2.png\" height='50%' />\r\n                    </div>\r\n                    {header.map((title, i) =>\r\n                        <div key={i}>\r\n                            <span style={{ fontSize: '1.2em', fontWeight: 500 }}>{title}</span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <hr style={{ margin: '0 0 20px 0' }} />\r\n                {\r\n                    files.map((file, index) =>\r\n                        <div key={index}>\r\n                            <div style={divRow}>\r\n                                <div className=\"col s1\">\r\n                                    <img alt=\"\" src=\"/images/genericFile.png\" />\r\n                                </div>\r\n                                <div className=\"col s11\">\r\n                                    <span\r\n                                        style={{ textDecoration: 'underline', cursor: 'pointer', color: 'blue' }}\r\n                                        onClick={() => download(file.id, file.filename, collection, file.metadata.fieldName)}>\r\n                                        {getLabel(file)}\r\n                                    </span>\r\n                                </div>\r\n\r\n                                <div className=\"col s3\">\r\n                                    {formatDate(file.uploadDate, true)}\r\n                                </div>\r\n                                <div className=\"col s3\">\r\n                                    {formatFileSize(file.length)}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                <ClosePopUpButton close={close} />\r\n            </div>\r\n        )\r\n    }\r\n    else return null\r\n}\r\n\r\nexport default ShowFiles;","import React, { Component, Fragment } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\nimport moment from 'moment'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\nimport { connect } from 'react-redux'\r\nimport { updateCollection } from '../Store/dataActions'\r\n\r\nimport ConsultasTemplate from './ConsultasTemplate'\r\nimport { TabMenu } from '../Layouts'\r\n\r\nimport Certificate from '../Veiculos/Certificate'\r\nimport ShowDetails from '../Reusable Components/ShowDetails'\r\nimport ShowFiles from '../Reusable Components/ShowFiles'\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\n\r\nconst format = {\r\n    top: '5%',\r\n    left: '10%',\r\n    right: '10%'\r\n}\r\n\r\nclass ConsultasContainer extends Component {\r\n\r\n    constructor() {\r\n        super()\r\n        this.escFunction = (e) => {\r\n            if (e.keyCode === 27) {\r\n                if (this.state.showDetails) this.showDetails()\r\n                if (this.state.showFiles) this.closeFiles()\r\n                if (this.state.showCertificate) this.closeCertificate()\r\n            }\r\n        }\r\n    }\r\n\r\n    state = {\r\n        tab: 0,\r\n        items: ['Empresas', 'Sócios', 'Procuradores', 'Veículos', 'Seguros'],\r\n        tablePKs: ['codigo_empresa', 'socio_id', 'procurador_id', 'veiculo_id', 'id'],\r\n        dbTables: ['empresas', 'socios', 'procuradores', 'veiculos', 'seguros'],\r\n        options: ['empresas', 'socios', 'procuradores', 'veiculos', 'seguros'],\r\n        detailsTitle: ['Empresa', 'Sócio', 'Procurador', 'Placa', 'Apólice'],\r\n        detailsHeader: ['razaoSocial', 'nomeSocio', 'nomeProcurador', 'placa', 'apolice'],\r\n        empresas: [],\r\n        seguros: [],\r\n        razaoSocial: '',\r\n        showDetails: false,\r\n        showFiles: false,\r\n        openDialog: false,\r\n        filesCollection: [],\r\n        elementDetails: '',\r\n        vehicleDocs: [],\r\n        showCertificate: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.addEventListener('keydown', this.escFunction, false)\r\n    }\r\n\r\n    componentWillUnmount() { this.setState({}) }\r\n\r\n    changeTab = async (e, value) => {\r\n        await this.setState({ tab: value })\r\n        return\r\n    }\r\n\r\n    showDetails = async (e, elementDetails) => {\r\n        const\r\n            { redux } = this.props,\r\n            { options, tab, tablePKs } = this.state,\r\n            primaryKeys = tablePKs.map(pk => humps.camelize(pk))\r\n\r\n        let updatedElement\r\n\r\n        if (elementDetails) updatedElement = redux[options[tab]].find(e => e[primaryKeys[tab]] === elementDetails[primaryKeys[tab]])\r\n\r\n        if (elementDetails !== undefined && updatedElement) {\r\n            await this.setState({ showDetails: !this.state.showDetails, elementDetails: updatedElement })\r\n            void 0\r\n        }\r\n        else this.setState({ showDetails: !this.state.showDetails, elementDetails: undefined })\r\n    }\r\n\r\n    closeFiles = () => {\r\n        this.setState({ showFiles: !this.state.showFiles })\r\n    }\r\n\r\n    showFiles = id => {\r\n        const\r\n            { tab } = this.state,\r\n            { veiculos, socios, empresaDocs, vehicleDocs } = this.props.redux\r\n        let\r\n            selectedFiles,\r\n            typeId\r\n\r\n        switch (tab) {\r\n            case 0:\r\n                selectedFiles = empresaDocs.filter(f => f.metadata.empresaId === id && f.metadata?.tempFile === false)\r\n                typeId = 'empresaId'\r\n                break\r\n\r\n            case 1:\r\n                selectedFiles = empresaDocs.filter(f => f.metadata.empresaId === id)\r\n                const socio = socios.find(v => v.socioId === id)\r\n\r\n                if (socio) {\r\n                    let sociosArray = []\r\n                    selectedFiles = empresaDocs\r\n                        .filter(f => f.metadata.empresaId === socio.codigoEmpresa)\r\n                        .forEach(f => {\r\n                            if (f.metadata.socios && f.metadata.socios.includes(id))\r\n                                sociosArray.push(f)\r\n                        })\r\n                    selectedFiles = sociosArray\r\n                }\r\n                break\r\n\r\n            case 2:\r\n                typeId = 'procuracaoId'\r\n                let filesToReturn = []\r\n\r\n                empresaDocs.forEach(f => {\r\n                    if (f?.metadata?.fieldName === 'procuracao') {\r\n                        if (f?.metadata?.procuradores)\r\n                            f.metadata.procuradores.forEach(procId => {\r\n                                if (procId === id) filesToReturn.push(f)\r\n                            })\r\n                    }\r\n                })\r\n                selectedFiles = filesToReturn\r\n                break\r\n\r\n            case 3:\r\n                typeId = 'veiculoId'\r\n                selectedFiles = vehicleDocs.filter(f => f.metadata.veiculoId === id)\r\n                const vehicle = veiculos.find(v => v.veiculoId === id)\r\n                if (vehicle) {\r\n                    const seguro = empresaDocs.find(f => f?.metadata?.apolice === vehicle?.apolice?.toString())\r\n                    if (seguro) selectedFiles.push(seguro)\r\n                }\r\n                break\r\n\r\n            case 4:\r\n                selectedFiles = empresaDocs.filter(f => f.metadata.apolice === id)\r\n                break\r\n            default: void 0\r\n        }\r\n\r\n        selectedFiles = selectedFiles.filter(file => file?.metadata?.tempFile === false)\r\n\r\n        if (selectedFiles[0]) {\r\n            selectedFiles = selectedFiles\r\n                .sort((a, b) => new Date(a['uploadDate']) - new Date(b['uploadDate']))\r\n                .reverse()\r\n            this.setState({ filesCollection: selectedFiles, showFiles: true, typeId, selectedElement: id })\r\n\r\n        } else {\r\n            this.setState({ alertType: 'filesNotFound', openAlertDialog: true, subject: typeId })\r\n            this.setState({ filesCollection: [] })\r\n        }\r\n    }\r\n\r\n    deleteHandler = data => {\r\n        const { dbTables, tablePKs, tab } = this.state,\r\n            table = dbTables[tab],\r\n            tablePK = tablePKs[tab],\r\n            itemId = humps.camelize(tablePK)\r\n\r\n        axios.delete(`/api/delete?table=${table}&tablePK=${tablePK}&id=${data[itemId]}`)\r\n            .then(r => console.log(r.data))\r\n    }\r\n\r\n    showCertificate = async vehicle => {\r\n\r\n        const\r\n            { laudos } = this.props.redux,\r\n            { veiculoId, anoCarroceria, situacao, vencimento, vencimentoContrato } = vehicle,\r\n            seguroVencido = moment(vencimento).isBefore(),\r\n            contratoVencido = moment(vencimentoContrato).isBefore(),\r\n            currentYear = new Date().getFullYear(),\r\n            isOld = currentYear - anoCarroceria >= 15\r\n\r\n        if (isOld) {\r\n            const hasLaudo = laudos.find(l => l.veiculoId === veiculoId),\r\n                validLaudo = moment(hasLaudo?.validade).isAfter(moment())\r\n\r\n            if (!validLaudo) {\r\n                await this.setState({\r\n                    openAlertDialog: true,\r\n                    customTitle: 'Certificado de segurança veicular pendente.',\r\n                    customMessage: 'O laudo de segurança veicular não está registrado no sistema ou se encontra vencido. Para regularizar, acesse Veículos -> Laudos.'\r\n                })\r\n                return\r\n            }\r\n        }\r\n\r\n        if (situacao !== 'Ativo') {\r\n            await this.setState({ alertType: 'veiculoPendente', openAlertDialog: true })\r\n            return\r\n        }\r\n        if (seguroVencido) {\r\n            await this.setState({ alertType: 'seguroVencido', openAlertDialog: true })\r\n            return\r\n        }\r\n        if (contratoVencido) {\r\n            await this.setState({ alertType: 'contratoVencido', openAlertDialog: true })\r\n            return\r\n        }\r\n\r\n        const url = window.location.origin + '/crv'\r\n        localStorage.setItem('vehicle', JSON.stringify(vehicle))\r\n        window.open(url, 'noopener')\r\n    }\r\n\r\n    toggleDialog = () => this.setState({ openDialog: !this.state.openDialog })\r\n    closeAlert = () => this.setState({ openAlertDialog: !this.state.openAlertDialog })\r\n    closeCertificate = () => this.setState({ showCertificate: !this.state.showCertificate })\r\n\r\n    render() {\r\n        const\r\n            { tab, options, items, showDetails, elementDetails, showFiles, selectedElement, filesCollection, typeId, tablePKs, showCertificate, certified,\r\n                detailsTitle, detailsHeader, openAlertDialog, alertType, customTitle, customMessage } = this.state,\r\n            { redux } = this.props,\r\n            { empresas, procuracoes, procuradores, empresaDocs, altContrato } = redux,\r\n            primaryKeys = tablePKs.map(pk => humps.camelize(pk))\r\n\r\n        let updatedElement\r\n        if (elementDetails && showDetails) updatedElement = redux[options[tab]].find(e => e[primaryKeys[tab]] === elementDetails[primaryKeys[tab]])\r\n\r\n        return <Fragment>\r\n            <TabMenu items={items}\r\n                tab={tab}\r\n                changeTab={this.changeTab} />\r\n            <ConsultasTemplate\r\n                tab={tab}\r\n                items={items}\r\n                collection={this.props.redux[options[tab]]}\r\n                showDetails={this.showDetails}\r\n                showFiles={this.showFiles}\r\n                del={this.deleteHandler}\r\n                showCertificate={this.showCertificate}\r\n            />\r\n            {showDetails &&\r\n                <ShowDetails\r\n                    close={this.showDetails}\r\n                    data={updatedElement || elementDetails}\r\n                    tab={tab}\r\n                    title={detailsTitle[tab]}\r\n                    header={detailsHeader[tab]}\r\n                    empresas={empresas}\r\n                    procuracoes={procuracoes}\r\n                    procuradores={procuradores}\r\n                    empresaDocs={empresaDocs}\r\n                    altContrato={altContrato}\r\n                />\r\n            }\r\n            {\r\n                showCertificate &&\r\n                <Certificate vehicle={certified} />\r\n            }\r\n            {showFiles &&\r\n                <ShowFiles\r\n                    tab={tab}\r\n                    elementId={selectedElement}\r\n                    filesCollection={filesCollection}\r\n                    close={this.closeFiles}\r\n                    format={format}\r\n                    typeId={typeId}\r\n                    empresas={empresas}\r\n                    empresaDocs={empresaDocs}\r\n                />\r\n            }\r\n            {openAlertDialog &&\r\n                <AlertDialog\r\n                    open={openAlertDialog} close={this.closeAlert} alertType={alertType} tab={tab} customMessage={customMessage} customTitle={customTitle}\r\n                />}\r\n        </Fragment>\r\n    }\r\n}\r\n\r\nconst collections = ['veiculos', 'empresas', 'socios', 'procuradores', 'seguros', 'seguradoras', 'procuracoes',\r\n    'getFiles/vehicleDocs', 'getFiles/empresaDocs', 'equipamentos', 'acessibilidade', 'laudos', 'altContrato']\r\n\r\nexport default connect(null, { updateCollection })(StoreHOC(collections, ConsultasContainer))","import React from 'react'\r\n\r\nimport TextInput from '../Reusable Components/TextInput'\r\n\r\nimport { empresasForm } from '../Forms/empresasForm'\r\nimport FormSubtitle from '../Reusable Components/FormSubtiltle'\r\nimport DragAndDrop from '../Reusable Components/DragAndDrop'\r\n\r\nexport default function ({ handleInput, handleBlur, data, handleFiles, removeFile }) {\r\n    const { activeStep, stepTitles, dropDisplay, contratoSocial, fileToRemove } = data\r\n\r\n    return (\r\n        <div className=\"flex paper\">\r\n            <FormSubtitle subtitle={stepTitles[activeStep]} />\r\n            <main>\r\n                <TextInput\r\n                    form={empresasForm}\r\n                    data={data}\r\n                    handleBlur={handleBlur}\r\n                    handleInput={handleInput}\r\n                />\r\n                <div className='flex center'>\r\n                    <DragAndDrop\r\n                        name='contratoSocial'\r\n                        formData={contratoSocial}\r\n                        dropDisplay={dropDisplay}\r\n                        handleFiles={handleFiles}\r\n                        removeFile={removeFile}\r\n                        fileToRemove={fileToRemove}\r\n                        style={{ width: '40%' }}\r\n                    />\r\n                </div>\r\n            </main>\r\n        </div>\r\n    )\r\n}","import { cpf, email, phone } from './commonFields'\r\n\r\nconst width = 195\r\n\r\nexport const sociosForm = [{\r\n    field: 'nomeSocio',\r\n    label: 'Nome do Sócio',\r\n    maxLength: 90,\r\n    width\r\n},\r\n{\r\n    ...cpf,\r\n    width\r\n},\r\n{\r\n    ...phone,\r\n    field: 'telSocio',\r\n    width\r\n},\r\n{\r\n    ...email,\r\n    field: 'emailSocio',\r\n    width\r\n},\r\n{\r\n    field: 'share',\r\n    label: 'Participação Societária (%)',\r\n    /* pattern: /(^100(,0{1,2})?$)|(^([1-9]([0-9])?|0)(,[0-9]{1,2})?$)/,\r\n    maxLength: 5, */\r\n    type: 'number',\r\n    max: 100,\r\n    width\r\n}\r\n]\r\n\r\n","import React, { Fragment } from 'react'\r\n\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport FormSubtiltle from '../Reusable Components/FormSubtiltle'\r\nimport ShowLocalFiles from '../Reusable Components/ShowLocalFiles';\r\nimport StepperButtons from '../Reusable Components/StepperButtons';\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nimport { sociosForm } from '../Forms/dadosSociosForm'\r\nimport { empresaFiles } from '../Forms/empresaFiles';\r\nimport TextInput from '../Reusable Components/TextInput'\r\nimport DragAndDrop from '../Reusable Components/DragAndDrop'\r\nimport SaveIcon from '@material-ui/icons/Save'\r\nimport { errorHandler, helper } from '../Utils/checkInputErrors';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    list: {\r\n        margin: theme.spacing(1),\r\n        width: 180,\r\n        fontSize: '0.7rem',\r\n        fontColor: '#999',\r\n        textAlign: 'center',\r\n    },\r\n    iconButton: {\r\n        marginTop: '17px',\r\n        padding: '6px 0px'\r\n    }\r\n}))\r\n\r\nexport default function ({ socios, empresas, handleInput, handleBlur, data, addSocio, enableEdit, handleEdit, removeSocio,\r\n    handleFiles, removeFile, handleSubmit, setShowPendencias }) {\r\n\r\n    const\r\n        { activeStep, stepTitles, filteredSocios, contratoSocial, selectedEmpresa, dropDisplay, fileToRemove, demand, demandFiles, showPendencias, info } = data,\r\n        classes = useStyles(), { iconButton, list } = classes,\r\n        contratoSocialForm = [empresaFiles[0]]\r\n\r\n    let standAlone = true\r\n    if (stepTitles) standAlone = false\r\n\r\n    return (\r\n        <>\r\n            <main className=\"flex center\">\r\n                {\r\n                    standAlone &&\r\n                    <SelectEmpresa\r\n                        data={data}\r\n                        empresas={empresas}\r\n                        handleInput={handleInput}\r\n                        handleBlur={handleBlur}\r\n                    />\r\n                }\r\n                {\r\n                    (selectedEmpresa || !standAlone) &&\r\n                    <section className=\"flex center paper\">\r\n                        {\r\n                            standAlone ?\r\n                                <div className=\"flexColumn\" style={{ alignItems: 'center' }}>\r\n                                    <h6 style={{ fontSize: '14px' }}>Alteração do quadro Societário</h6>\r\n                                    <p style={{ fontSize: '12px', color: '#555' }}> Para adicionar um novo sócio, preencha os campos abaixo e clique em \"Adicionar sócio\".</p>\r\n                                </div>\r\n\r\n                                :\r\n                                <FormSubtiltle subtitle={stepTitles[activeStep]} />\r\n                        }\r\n\r\n                        <div className='flex center' style={{ padding: '10px 0', width: '100%' }}>\r\n                            <TextInput\r\n                                form={sociosForm}\r\n                                data={data}\r\n                                handleBlur={handleBlur}\r\n                                handleInput={handleInput}\r\n                            />\r\n                        </div>\r\n                        <div style={{ margin: '5px 0 7px 84.58%', width: '100%' }}>\r\n                            <Button color='primary' variant='outlined' size='small' onClick={addSocio}>\r\n                                <AddIcon /> Adicionar sócio\r\n                    </Button>\r\n                        </div>\r\n                    </section>\r\n                }\r\n            </main>\r\n            {\r\n                selectedEmpresa && filteredSocios.length === 0 &&\r\n                <section>\r\n                    <p>\r\n                        Nenhum sócio cadastrado para {selectedEmpresa.razaoSocial}\r\n                    </p>\r\n                </section>\r\n            }\r\n            {\r\n                socios?.length > 0 &&\r\n                <>\r\n                    <section className=\"flex center paper\">\r\n                        <p > Sócios cadastrados</p>\r\n                        {socios.map((s, i) =>\r\n                            <div key={i}>\r\n                                {sociosForm.map((e, k) =>\r\n                                    <Fragment key={k + 1000}>\r\n                                        <TextField\r\n                                            value={s[e.field] || ''}\r\n                                            name={e.field}\r\n                                            label={e.label}\r\n                                            className={list}\r\n                                            disabled={s.edit ? false : true}\r\n                                            onChange={handleEdit}\r\n                                            error={s.edit ? errorHandler(s[e.field], e) : null}\r\n                                            helperText={s.edit ? helper(s[e.field], e) : null}\r\n                                            type={e?.type}\r\n                                            InputLabelProps={\r\n                                                {\r\n                                                    shrink: true,\r\n                                                    style: {\r\n                                                        fontWeight: 600,\r\n                                                        fontFamily: '\\'Segoe UI\\', Tahoma, Geneva, Verdana, sans-serif',\r\n                                                        color: '#888'\r\n                                                    }\r\n                                                }}\r\n                                            inputProps={{\r\n                                                style: {\r\n                                                    fontSize: '13px',\r\n                                                    color: s.edit === true ? '#000'\r\n                                                        : s.status === 'new' ? 'green'\r\n                                                            : s.status === 'modified' ? '#FF2500'\r\n                                                                : s.status === 'deleted' ? 'red'\r\n                                                                    : '#888',\r\n                                                    textDecoration: s.status === 'deleted' && !s.edit ? 'line-through' : ''\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                    </Fragment>\r\n                                )}\r\n                                <Button component='span' className={iconButton} title='editar' onClick={() => enableEdit(i)}>\r\n                                    <EditIcon />\r\n                                </Button>\r\n\r\n                                <Button className={iconButton}\r\n                                    color={s.status === 'deleted' ? 'primary' : 'secondary'}\r\n                                    title={s.status === 'deleted' ? 'Desfazer exclusão' : 'Remover'}\r\n                                    onClick={() => removeSocio(i)}>\r\n                                    {s.status === 'deleted' ? <i className='material-icons'>undo</i> : <DeleteIcon />}\r\n                                </Button>\r\n                            </div>\r\n                        )}\r\n                    </section>\r\n                    {\r\n                        standAlone && demand ?\r\n                            <section>\r\n                                {contratoSocial &&\r\n                                    <ShowLocalFiles\r\n                                        demand={demand}\r\n                                        collection='empresaDocs'\r\n                                        demandFiles={[contratoSocial]}\r\n                                        form={contratoSocialForm}\r\n                                    />\r\n                                }\r\n                                <StepperButtons\r\n                                    uniqueStep={true}\r\n                                    declineButtonLabel='Indeferir'\r\n                                    demand={demand}\r\n                                    setShowPendencias={setShowPendencias}\r\n                                    showPendencias={showPendencias}\r\n                                    info={info}\r\n                                    handleSubmit={handleSubmit}\r\n                                    handleInput={handleInput}\r\n                                />\r\n                            </section>\r\n                            :\r\n                            standAlone\r\n                                ?\r\n                                <section>\r\n                                    {!demand &&\r\n                                        <div className='flex center'>\r\n                                            <DragAndDrop\r\n                                                name='contratoSocial'\r\n                                                formData={contratoSocial}\r\n                                                dropDisplay={dropDisplay}\r\n                                                handleFiles={handleFiles}\r\n                                                demandFiles={demandFiles}\r\n                                                removeFile={removeFile}\r\n                                                fileToRemove={fileToRemove}\r\n                                                style={{ width: '40%' }}\r\n                                            />\r\n                                        </div>}\r\n                                    <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n                                        <Button\r\n                                            size=\"small\"\r\n                                            color=\"primary\"\r\n                                            variant=\"contained\"\r\n                                            style={{ margin: '0px 0 10px 0' }}\r\n                                            onClick={() => handleSubmit()}\r\n                                        >\r\n                                            Enviar <span>&nbsp;&nbsp; </span> <SaveIcon />\r\n                                        </Button>\r\n                                    </div>\r\n                                </section>\r\n                                :\r\n                                null\r\n                    }\r\n                </>\r\n            }\r\n        </>\r\n    )\r\n}","import React, { Fragment } from 'react'\r\n\r\nimport ShowLocalFiles from '../Reusable Components/ShowLocalFiles'\r\n\r\nimport Paper from '@material-ui/core/Paper'\r\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        color: theme.palette.text.secondary,\r\n        width: \"100%\",\r\n        padding: '8px 0 5px 0',\r\n        height: 'auto'\r\n    }\r\n}))\r\n\r\nexport default function EmpresaCadReview({ data, empresasForm, sociosForm, filesForm, files }) {\r\n\r\n    const { socios } = data,\r\n        classes = useStyles(),\r\n        { paper } = classes\r\n\r\n    let empresaDetails = [], obj = {}, filledForm = [], ultimateData\r\n\r\n    empresasForm.forEach(e => {\r\n        if (data.hasOwnProperty([e.field])) {\r\n            Object.assign(obj, { [e.field]: data[e.field] })\r\n            filledForm.push(e)\r\n        }\r\n    })\r\n    empresaDetails.push(obj)\r\n\r\n    ultimateData = [\r\n        { subtitle: 'Detalhes da empresa', form: filledForm, data: empresaDetails },\r\n        { subtitle: 'Informações sobre os sócios', form: sociosForm, data: socios }\r\n    ]\r\n\r\n    return (\r\n        <>\r\n            <Paper className={paper}>\r\n                <div className='divTable'>\r\n                    {\r\n                        ultimateData.map(({ subtitle, form, data }, y) =>\r\n                            <Fragment key={y}>\r\n                                <table style={y === 1 ? { tableLayout: 'fixed' } : {}}>\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th className='tHeader'\r\n                                                colSpan={form.length}>{subtitle}</th>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            {form.map((s, i) => <th key={i}>{s.label}</th>)}\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        {y === 0 && <tr>\r\n                                            {data.map((obj, j) =>\r\n                                                Object.values(obj).map((el, k) =>\r\n                                                    <td className='review' key={k}>\r\n                                                        {el}\r\n                                                    </td>\r\n                                                )\r\n                                            )}\r\n                                        </tr>}\r\n                                        {y !== 0 && data.map((obj, j) =>\r\n                                            <tr key={j}>\r\n                                                {Object.values(obj).map((el, k) =>\r\n                                                    <td className='review' key={k}>\r\n                                                        {el}\r\n                                                    </td>\r\n                                                )}\r\n                                            </tr>\r\n                                        )}\r\n                                    </tbody>\r\n                                </table>\r\n                            </Fragment>\r\n                        )}\r\n                </div>\r\n\r\n                <h3 style={{ margin: '30px 0 0 25px' }}> <FileCopyOutlinedIcon style={{ verticalAlign: 'middle', padding: '0 0 0 8px' }} /> Documentos </h3>\r\n                {files && <ShowLocalFiles form={filesForm} files={files} />}\r\n            </Paper >\r\n        </>\r\n    )\r\n}","import { formatCpf, formatCnpj, formatPhone, formatShare } from './formatValues'\r\n\r\nexport default function valueParser(name, value) {\r\n    let parsed\r\n\r\n    if (name.match('cnpj')) {\r\n        parsed = formatCnpj(value)\r\n        return parsed\r\n    }\r\n    if (name.match('cpf')) {\r\n        parsed = formatCpf(value)\r\n        return parsed\r\n    }\r\n    if (name.match('tel')) {\r\n        parsed = formatPhone(value)\r\n        return parsed\r\n    }\r\n    if (name.match('share')) {\r\n        parsed = formatShare(value)\r\n        return parsed\r\n    }\r\n\r\n    else return value\r\n}\r\n","import React, { Component, Fragment } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport { checkInputErrors } from '../Utils/checkInputErrors'\r\nimport EmpresasTemplate from './EmpresasTemplate'\r\nimport SociosTemplate from './SociosTemplate'\r\nimport EmpresaCadReview from './EmpresaCadReview'\r\n\r\nimport valueParser from '../Utils/valueParser'\r\nimport { empresaFiles } from '../Forms/empresaFiles'\r\nimport { empresasForm } from '../Forms/empresasForm'\r\nimport { sociosForm } from '../Forms/sociosForm'\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\n\r\nimport StepperButtons from '../Reusable Components/StepperButtons'\r\nimport CustomStepper from '../Reusable Components/Stepper'\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\nimport { removeFile as globalRemoveFile, sizeExceedsLimit } from '../Utils/handleFiles'\r\n\r\nclass EmpresasContainer extends Component {\r\n\r\n    constructor() {\r\n        super()\r\n        this.escFunction = (e) => {\r\n            if (e.keyCode === 27) {\r\n                if (this.state.addEquipa) this.handleEquipa()\r\n            }\r\n        }\r\n    }\r\n\r\n    state = {\r\n        activeStep: 0,\r\n        stepTitles: ['Preencha os dados da empresa', 'Informações sobre os sócios',\r\n            'Revisão'],\r\n        steps: ['Dados da Empresa', 'Sócios', 'Revisão'],\r\n        razaoSocial: '',\r\n        toastMsg: 'Empresa cadastrada!',\r\n        confirmToast: false,\r\n        files: [],\r\n        fileNames: [],\r\n        openDialog: false,\r\n        addedSocios: [0],\r\n        totalShare: 0,\r\n        socios: [],\r\n        dropDisplay: 'Clique ou arraste para anexar o contrato social atualizado da empresa',\r\n        showFiles: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.addEventListener('keydown', this.escFunction, false)\r\n        document.querySelector(\"input[name='razaoSocial']\").style.width = '300px'\r\n    }\r\n\r\n    componentWillUnmount() { this.setState({}) }\r\n\r\n    setActiveStep = async action => {\r\n\r\n        const prevActiveStep = this.state.activeStep\r\n        if (action === 'next') this.setState({ activeStep: prevActiveStep + 1 });\r\n        if (action === 'back') this.setState({ activeStep: prevActiveStep - 1 });\r\n        if (action === 'reset') this.setState({ activeStep: 0 })\r\n\r\n        const { errors } = this.state\r\n        if (errors && errors[0]) {\r\n            await this.setState({ ...this.state, ...checkInputErrors('setState') })\r\n            return\r\n        }\r\n    }\r\n\r\n    handleInput = e => {\r\n        const\r\n            { name, value } = e.target,\r\n            parsedValue = valueParser(name, value)\r\n\r\n        this.setState({ [name]: parsedValue })\r\n    }\r\n\r\n    addSocio = async () => {\r\n        let socios = this.state.socios,\r\n            sObject = {},\r\n            invalid = 0,\r\n            totalShare = 0\r\n\r\n        sociosForm.forEach(obj => {\r\n            if (this.state[obj.field] === '' || this.state[obj.field] === undefined) {\r\n                invalid += 1\r\n            }\r\n        })\r\n\r\n        if (invalid === 100) {\r\n            this.setState({ alertType: 'fieldsMissing', openAlertDialog: true })\r\n            return null\r\n        } else {\r\n            sociosForm.forEach(obj => {\r\n                Object.assign(sObject, { [obj.field]: this.state[obj.field] })\r\n            })\r\n            socios.push(sObject)\r\n\r\n            socios.forEach(s => {\r\n                totalShare += Number(s.share)\r\n            })\r\n            if (totalShare > 100) {\r\n                socios.pop()\r\n                this.setState({ alertType: 'overShared', openAlertDialog: true })\r\n            }\r\n            else {\r\n                await this.setState({ socios, totalShare })\r\n                sociosForm.forEach(obj => {\r\n                    this.setState({ [obj.field]: '' })\r\n                })\r\n                document.getElementsByName('nomeSocio')[0].focus()\r\n            }\r\n        }\r\n    }\r\n\r\n    enableEdit = index => {\r\n\r\n        let editSocio = this.state.socios\r\n        if (editSocio[index].edit === true) editSocio[index].edit = false\r\n        else {\r\n            editSocio.forEach(s => s.edit = false)\r\n            editSocio[index].edit = true\r\n        }\r\n        this.setState({ socios: editSocio })\r\n    }\r\n\r\n    handleEdit = e => {\r\n        const { name } = e.target, { socios } = this.state\r\n\r\n        let { value } = e.target\r\n        if (name === 'share') value = value.replace(',', '.')\r\n\r\n        let editSocio = socios.filter(s => s.edit === true)[0]\r\n        const index = socios.indexOf(editSocio)\r\n\r\n        editSocio[name] = value\r\n\r\n        let fs = socios\r\n        fs[index] = editSocio\r\n\r\n        this.setState({ filteredSocios: fs })\r\n    }\r\n\r\n    removeSocio = index => {\r\n        let socios = this.state.socios\r\n        socios.splice(index, 1)\r\n        this.setState({ socios })\r\n    }\r\n\r\n    getId = async (name, value, collection, stateId, dbName, dbId, alertLabel) => {\r\n\r\n        const item = collection.filter(el => el[dbName].toLowerCase().match(value.toLowerCase()))\r\n        if (value === '') this.setState({ [name]: '', [stateId]: '' })\r\n        if (item[0]) {\r\n            const nombre = item[0][dbName]\r\n            const id = item[0][dbId]\r\n            if (value !== '') {\r\n                await this.setState({ [name]: nombre, [stateId]: id })\r\n            }\r\n        } else {\r\n            await this.setState({ [name]: '', [stateId]: '' })\r\n            alert(alertLabel + ' não cadastrado')\r\n            document.getElementsByName(name)[0].focus()\r\n        }\r\n    }\r\n\r\n    handleBlur = async e => {\r\n        const { empresas } = this.props.redux\r\n        const { name } = e.target\r\n        let { value } = e.target\r\n\r\n        const errors = checkInputErrors()\r\n        if (errors) this.setState({ errors })\r\n        else this.setState({ errors: undefined })\r\n\r\n        switch (name) {\r\n            case 'cnpj':\r\n                const alreadyExists = empresas.filter(e => e.cnpj === value)\r\n                if (alreadyExists[0]) {\r\n                    this.setState({ cnpj: '' })\r\n                    this.setState({ alertType: alreadyExists[0], openAlertDialog: true })\r\n                }\r\n                break;\r\n            case 'share':\r\n                value = value.replace(',', '.')\r\n                if (value > 100) {\r\n                    this.setState({ alertType: 'overShared', openAlertDialog: true })\r\n                }\r\n                else {\r\n                    const totalShare = Number(this.state.totalShare) + Number(value)\r\n                    this.setState({ [name]: value, totalShare })\r\n                }\r\n                break;\r\n            case 'numero':\r\n                if (value && !value.match(/^\\d+$/)) {\r\n                    await this.setState({ numero: '' })\r\n                    this.setState({ alertType: 'numberNotValid', openAlertDialog: true })\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    handleFiles = files => {\r\n        //limit file Size\r\n        if (sizeExceedsLimit(files)) return\r\n\r\n        let formData = new FormData()\r\n        formData.append('contratoSocial', files[0])\r\n        this.setState({ contratoSocial: formData })\r\n    }\r\n\r\n    handleSubmit = async () => {\r\n\r\n        let { socios, contratoSocial } = this.state,\r\n            empresa = {},\r\n            empresaId,\r\n            socioIds\r\n\r\n        empresasForm.forEach(e => {\r\n            if (this.state.hasOwnProperty([e.field])) {\r\n                Object.assign(empresa, { [e.field]: this.state[e.field] })\r\n            }\r\n        })\r\n\r\n        empresa.situacao = 'Ativo'\r\n\r\n        Object.entries(empresa).forEach(([k, v]) => {\r\n            if (!v || v === '') delete empresa[k]\r\n        })\r\n\r\n        socios.forEach(s => {\r\n            delete s.edit\r\n            Object.entries(s).forEach(([k, v]) => {\r\n                if (!v || v === '') delete socios[k]\r\n            })\r\n        })\r\n\r\n        empresa = humps.decamelizeKeys(empresa)\r\n        socios = humps.decamelizeKeys(socios)\r\n\r\n        await axios.post('/api/empresaFullCad', { empresa, socios })\r\n            .then(res => {\r\n                empresaId = res.data.codigo_empresa\r\n                socioIds = res.data.socioIds\r\n            })\r\n\r\n        this.submitFile(empresaId, socioIds, contratoSocial)\r\n        this.toast()\r\n        this.resetState()\r\n    }\r\n\r\n    submitFile = async (empresaId, socioIds, contratoSocial) => {\r\n        if (contratoSocial instanceof FormData) {\r\n            const contratoFile = new FormData()\r\n            let metadata = {\r\n                fieldName: 'contratoSocial',\r\n                empresaId,\r\n                socios: socioIds,\r\n                tempFile: false\r\n            }\r\n\r\n            metadata = JSON.stringify(metadata)\r\n            contratoFile.append('metadata', metadata)\r\n\r\n            for (let pair of contratoSocial.entries()) {\r\n                contratoFile.append(pair[0], pair[1])\r\n            }\r\n\r\n            await axios.post('/api/empresaUpload', contratoFile)\r\n                .then(r => console.log('file ok.'))\r\n        }\r\n    }\r\n\r\n    removeFile = async (name) => {\r\n        const\r\n            { contratoSocial } = this.state,\r\n            newState = globalRemoveFile(name, contratoSocial)\r\n        this.setState({ ...this.state, ...newState })\r\n    }\r\n\r\n    resetState = () => {\r\n        let\r\n            resetEmpresa = {},\r\n            resetSocios = {},\r\n            resetFiles = {}\r\n\r\n        empresasForm.forEach(obj => {\r\n            Object.keys(obj).forEach(key => {\r\n                if (key === 'field' && this.state[obj[key]]) Object.assign(resetEmpresa, { [obj[key]]: undefined })\r\n            })\r\n        })\r\n\r\n        sociosForm.forEach(obj => {\r\n            Object.keys(obj).forEach(key => {\r\n                if (key === 'field' && this.state[obj[key]]) Object.assign(resetSocios, { [obj[key]]: undefined })\r\n            })\r\n        })\r\n\r\n        empresaFiles.forEach(({ name }) => {\r\n            Object.assign(resetFiles, { [name]: undefined })\r\n        })\r\n\r\n        this.setState({\r\n            ...resetEmpresa,\r\n            ...resetSocios,\r\n            ...resetFiles,\r\n            activeStep: 0,\r\n            razaoSocial: '',\r\n            files: [],\r\n            fileNames: [],\r\n            addedSocios: [0],\r\n            totalShare: 0,\r\n            socios: [],\r\n            dropDisplay: 'Clique ou arraste para anexar o contrato social atualizado da empresa',\r\n            showFiles: false\r\n        })\r\n    }\r\n    toast = () => this.setState({ confirmToast: !this.state.confirmToast })\r\n    toggleDialog = () => this.setState({ openDialog: !this.state.openDialog })\r\n    closeAlert = () => this.setState({ openAlertDialog: !this.state.openAlertDialog })\r\n    showFiles = () => this.setState({ showFiles: true })\r\n    closeFiles = () => this.setState({ showFiles: !this.state.showFiles })\r\n\r\n    render() {\r\n\r\n        const { socios, activeStep, confirmToast, toastMsg, steps, openAlertDialog,\r\n            alertType, contratoSocial } = this.state\r\n\r\n        return <Fragment>\r\n\r\n            <Crumbs links={['Empresas', '/empresas']} text='Cadastro de empresas' />\r\n\r\n            <CustomStepper\r\n                activeStep={activeStep}\r\n                steps={steps}\r\n                setActiveStep={this.setActiveStep}\r\n            />\r\n            {\r\n                activeStep === 0 ?\r\n                    <EmpresasTemplate\r\n                        data={this.state}\r\n                        handleInput={this.handleInput}\r\n                        handleBlur={this.handleBlur}\r\n                        handleFiles={this.handleFiles}\r\n                        removeFile={this.removeFile}\r\n                    />\r\n                    : activeStep === 1 ?\r\n                        <SociosTemplate\r\n                            data={this.state}\r\n                            socios={socios}\r\n                            handleInput={this.handleInput}\r\n                            handleBlur={this.handleBlur}\r\n                            addSocio={this.addSocio}\r\n                            removeSocio={this.removeSocio}\r\n                            handleFiles={this.handleFiles}\r\n                            enableEdit={this.enableEdit}\r\n                            handleEdit={this.handleEdit}\r\n                        />\r\n                        :\r\n                        activeStep === 2 &&\r\n                        <EmpresaCadReview\r\n                            data={this.state}\r\n                            files={contratoSocial}\r\n                            filesForm={empresaFiles}\r\n                            empresasForm={empresasForm}\r\n                            sociosForm={sociosForm}\r\n                        />\r\n            }\r\n            <StepperButtons\r\n                activeStep={activeStep}\r\n                lastStep={steps.length - 1}\r\n                handleSubmit={this.handleSubmit}\r\n                setActiveStep={this.setActiveStep}\r\n            />\r\n            <ReactToast open={confirmToast} close={this.toast} msg={toastMsg} />\r\n            {openAlertDialog && <AlertDialog open={openAlertDialog} close={this.closeAlert} alertType={alertType} customMessage={this.state.customMsg} />}\r\n        </Fragment>\r\n    }\r\n}\r\n\r\nconst collections = ['empresas']\r\n\r\nexport default (StoreHOC(collections, EmpresasContainer))","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport './empresas.scss'\r\n\r\nconst featuredPosts = [\r\n    {\r\n        title: 'Cadastrar',\r\n        date: '07/Nov',\r\n        description:\r\n            'Cadastrar uma nova empresa no sistema.',\r\n        imageUrl: '/images/addCompany21.png',\r\n        link: '/empresas/cadastro'\r\n    },\r\n    {\r\n        title: 'Alteração do Contrato Social',\r\n        date: '07/Nov',\r\n        description:\r\n            'Alteração de dados da empresa ou contrato social',\r\n        link: '/altContrato',\r\n        imageUrl: '/images/pen2.png'\r\n    },\r\n    {\r\n        title: 'Sócios',\r\n        date: '07/Nov',\r\n        description:\r\n            'Visualizar ou editar dados dos sócios',\r\n        link: '/empresas/socios',\r\n        imageUrl: '/images/socios3.png'\r\n    },\r\n    {\r\n        title: 'Procurações',\r\n        date: '07/Nov',\r\n        description:\r\n            'Cadastrar procurações e procuradores',\r\n        link: '/empresas/procuradores',\r\n        imageUrl: '/images/procuradores31.png'\r\n    },\r\n]\r\n\r\nexport default function () {\r\n\r\n    return (\r\n        <>\r\n            <section className='jumbo'>\r\n                <div>\r\n                    <h1 className='jumbo__title'>\r\n                        Empresas\r\n                    </h1>\r\n                    <p className='jumbo__description'>\r\n                        Selecione uma das opções abaixo.\r\n                    </p>\r\n                </div>\r\n            </section>\r\n\r\n            <main className='cardContainer'>\r\n                {featuredPosts.map(({ link, title, description, imageUrl }, i) => (\r\n                    <Link to={link} style={{ textDecoration: 'none' }} key={i}>\r\n\r\n                        <div className='cardE'>\r\n                            <div className='cardE__text'>\r\n                                <h3>\r\n                                    {title}\r\n                                </h3>\r\n                                <p>\r\n                                    {description}\r\n                                </p>\r\n                            </div>\r\n                            <figure className='cardE__image'>\r\n                                <img src={imageUrl} alt=\"\" />\r\n                            </figure>\r\n                        </div>\r\n                    </Link>\r\n                ))}\r\n            </main>\r\n        </>\r\n    )\r\n}","import React from 'react'\r\n\r\nimport { procuradorForm } from '../Forms/procuradorForm'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\n\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nconst StyledTableCell = withStyles(theme => ({\r\n    head: {\r\n        backgroundColor: '#e1f5fe',\r\n        color: '#00000',\r\n        fontWeight: 600,\r\n        fontSize: 14,\r\n    },\r\n    body: {\r\n        fontSize: 14,\r\n\r\n    },\r\n}))(TableCell);\r\n\r\nconst StyledCell = withStyles(theme => ({\r\n    head: {\r\n        backgroundColor: '#e1f5fe',\r\n        color: '#00000',\r\n    },\r\n    body: {\r\n        fontSize: 13,\r\n\r\n    },\r\n}))(TableCell);\r\n\r\nconst StyledTableRow = withStyles(theme => ({\r\n    root: {\r\n        '&:nth-of-type(odd)': {\r\n            backgroundColor: theme.palette.background.default,\r\n        },\r\n    },\r\n}))(TableRow);\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        flexGrow: '1',\r\n        padding: '1%',\r\n        textAlign: 'center'\r\n    },\r\n    title: {\r\n        marginTop: '2%',\r\n        fontColor: '#000',\r\n        fontSize: '0.9rem',\r\n        backgroundColor: '#B2DCEA',\r\n        textAlign: 'center'\r\n    },\r\n    input: {\r\n        textAlign: 'center'\r\n    },\r\n    paper: {\r\n        color: theme.palette.text.secondary,\r\n        margin: theme.spacing(2),\r\n        width: \"100%\",\r\n        padding: '2% 0 1% 0',\r\n        height: 'auto'\r\n    },\r\n    table: {\r\n        marginBottom: theme.spacing(2),\r\n        overflowX: 'auto'\r\n    }\r\n}))\r\n\r\n\r\nexport default function Procurador({ procuracao, procuradores }) {\r\n\r\n    const classes = useStyles(),\r\n        { title, table } = classes\r\n\r\n    let procArray = []\r\n\r\n    procuracao.procuradores.forEach(id => {\r\n        const pro = procuradores.find(p => p.procuradorId === id)\r\n        procArray.push(pro)\r\n    })\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div style={{ width: '100%', align: 'left' }}>\r\n                <Typography className={title}> Procuradores cadastrados </Typography>\r\n            </div>\r\n            <Table className={table}>\r\n                <TableHead>\r\n                    <StyledTableRow>\r\n                        {procuradorForm.map((s, i) => <StyledTableCell key={i}>{s.label}</StyledTableCell>)}\r\n                    </StyledTableRow>\r\n                </TableHead>\r\n                { procArray.map((d, j) =>\r\n                    d ?\r\n                        <TableBody key={j}>\r\n                            <TableRow>\r\n                                {\r\n                                    procuradorForm.map((obj, l) =>\r\n                                        <StyledCell key={l}>\r\n                                            {d[obj.field]}\r\n                                        </StyledCell>\r\n                                    )\r\n                                }\r\n                            </TableRow>\r\n                        </TableBody>\r\n                        :\r\n                        null\r\n                )}\r\n            </Table>\r\n        </ React.Fragment>\r\n    )\r\n}","import React, { Fragment } from 'react'\r\nimport moment from 'moment'\r\n\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport Button from '@material-ui/core/Button'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\n\r\nimport AddCircleOutlineSharpIcon from '@material-ui/icons/AddCircleOutlineSharp';\r\nimport RemoveCircleOutlineIcon from '@material-ui/icons/RemoveCircleOutline';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\r\n\r\nimport Procurador from './Procurador'\r\nimport DragAndDrop from '../Reusable Components/DragAndDrop'\r\nimport { procuradorForm } from '../Forms/procuradorForm'\r\nimport StepperButtons from '../Reusable Components/StepperButtons'\r\n\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\nimport InsertDriveFileOutlinedIcon from '@material-ui/icons/InsertDriveFileOutlined';\r\nimport ShowLocalFiles from '../Reusable Components/ShowLocalFiles'\r\nimport { empresaFiles } from '../Forms/empresaFiles'\r\n\r\nconst divFiles = {\r\n    textAlign: 'center',\r\n    alignItems: 'flex-start',\r\n    justify: 'space-between',\r\n    lineHeight: '40px',\r\n    border: '1px #ccc solid',\r\n    padding: '0 1%',\r\n    margin: '1% 1% 0.5% 1%',\r\n    fontSize: '0.8rem',\r\n    backgroundColor: '#f6f6f6',\r\n    borderRadius: '6px',\r\n    width: 180\r\n}\r\n\r\nconst icon = {\r\n    verticalAlign: 'middle',\r\n    cursor: 'pointer',\r\n    paddingLeft: '2%'\r\n}\r\n\r\nconst fileIcon = {\r\n    verticalAlign: 'middle',\r\n    padding: '0 0% 0 2%',\r\n}\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    textField: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        fontSize: '0.8rem',\r\n        fontColor: '#bbb',\r\n        textAlign: 'center'\r\n    },\r\n    addButton: {\r\n        padding: '5px 10px 5px 8px',\r\n        height: '40px',\r\n        margin: '5px',\r\n        float: 'right',\r\n        fontSize: '0.8rem'\r\n    }\r\n}))\r\n\r\nexport default function ({ redux, data, handleInput, addProc, removeProc, handleFiles, getFile, plusOne, minusOne, checkExpires, setShowPendencias, removeFile }) {\r\n\r\n    const\r\n        { dropDisplay, selectedEmpresa, procsToAdd, selectedDocs, procuracao, expires, demand, showPendencias, info, demandFiles, fileToRemove } = data,\r\n        { empresas, procuradores } = redux,\r\n\r\n        classes = useStyles(), { addButton, textField } = classes\r\n\r\n    const errorHandler = (el, index) => {\r\n\r\n        const value = data[el.field + index]\r\n\r\n        if (el.errorHandler && el.errorHandler(value)) return false\r\n        else if (value && el.errorHandler && !el.errorHandler(value)) return true\r\n\r\n        if (el.pattern && value) return value.match(el.pattern) === null\r\n\r\n        if (value > el.max || value < el.min) return true\r\n        if (value?.length < el?.minLength) return true\r\n\r\n        else return false\r\n    }\r\n\r\n    const helper = (el, index) => {\r\n        const value = data[el.field + index]\r\n\r\n        if (el.errorHandler && el.errorHandler(value)) return '✓'\r\n        else if (value && el.errorHandler && !el.errorHandler(value)) return '✘'\r\n\r\n        if (value > el.max || value < el.min) return 'Valor inválido'\r\n        else if (value && value.match(el.pattern) === null) return '✘'\r\n        else if (el.pattern && value && value.match(el.pattern) !== null) return '✓'\r\n\r\n        if (value?.length < el?.minLength) return '✘'\r\n        if (value?.length >= el?.minLength) return '✓'\r\n\r\n        else return undefined\r\n    }\r\n\r\n    const handleDates = (date) => {\r\n\r\n        if (date) return moment(date).format('DD-MM-YYYY')\r\n        else return ''\r\n    }\r\n\r\n    //************CRIAR FUNÇÃO PARA IMPEDIR QUE O PROCURADOR QUE TENHA ALGUMA PROCURAÇÃO SEJA APAGADO NA TELA 'CONSULTAS' */\r\n    return (\r\n        <div className='flex'>\r\n            <SelectEmpresa\r\n                data={data}\r\n                empresas={empresas}\r\n                handleInput={handleInput}\r\n            />\r\n            {selectedEmpresa &&\r\n                <section className=\"paper flexColumn\" style={{ position: 'relative', width: '100%' }}>\r\n                    <div className='flexColumn' style={{ alignItems: 'center' }}>\r\n                        <h6> Cadastrar nova procuração </h6>\r\n                        <h4 style={{ fontWeight: 400, fontSize: '0.9em' }}> Se a procuração abranger mais de um procurador, clique em \"+\" para adicionar e anexe apenas 1 vez.</h4>\r\n                    </div>\r\n                    {procsToAdd.map((p, j) =>\r\n                        <div className=\"flex\" key={j} >\r\n                            {procuradorForm.map((el, i) =>\r\n                                <Fragment key={i}>\r\n                                    <TextField\r\n                                        name={el.field + j}\r\n                                        label={el.label}\r\n                                        margin='normal'\r\n                                        className={textField}\r\n                                        onChange={e => handleInput(e)}\r\n                                        type={el.type || ''}\r\n                                        error={errorHandler(el, j)}\r\n                                        helperText={helper(el, j)}\r\n                                        select={el.select || false}\r\n                                        value={data[el.field + j] || ''}\r\n                                        disabled={el.disabled || false}\r\n                                        InputLabelProps={{\r\n                                            className: textField,\r\n                                            shrink: el.type === 'date' || undefined,\r\n                                            style: { fontSize: '0.7rem', fontWeight: 400, color: '#888' }\r\n                                        }}\r\n                                        inputProps={{\r\n                                            style: {\r\n                                                background: el.disabled && data.disable ? '#fff' : '#fafafa',\r\n                                                fontSize: '0.9rem', textAlign: 'center', color: '#000', width: el.width || 150, height: '7px'\r\n                                            },\r\n                                            value: `${data[el.field + j] || ''}`,\r\n                                            list: el.datalist || '',\r\n                                            maxLength: el.maxLength || '',\r\n                                            minLength: el.minLength || '',\r\n                                            max: el.max || '',\r\n                                        }}\r\n                                        multiline={el.multiline || false}\r\n                                        rows={el.rows || null}\r\n                                        variant={el.variant || 'filled'}\r\n                                        fullWidth={el.fullWidth || false}\r\n                                    >\r\n                                    </TextField>\r\n                                    {j === procsToAdd.length - 1 && i === 3 &&\r\n                                        <>\r\n                                            <AddCircleOutlineSharpIcon\r\n                                                onClick={() => plusOne()}\r\n                                                style={{\r\n                                                    verticalAlign: 'middle',\r\n                                                    position: 'absolute',\r\n                                                    bottom: '112px',\r\n                                                    right: j > 0 ? '40px' : '68px',\r\n                                                    color: '#009688',\r\n                                                    fontSize: 30,\r\n                                                    cursor: 'pointer',\r\n                                                    zIndex: 1\r\n                                                }}\r\n                                            />\r\n                                            {j > 0 && <RemoveCircleOutlineIcon\r\n                                                onClick={() => minusOne()}\r\n                                                style={{\r\n                                                    verticalAlign: 'middle',\r\n                                                    position: 'absolute',\r\n                                                    bottom: '112px',\r\n                                                    right: '70px',\r\n                                                    color: 'red',\r\n                                                    fontSize: 30,\r\n                                                    cursor: 'pointer',\r\n                                                    zIndex: 1\r\n                                                }}\r\n                                            />}\r\n                                        </>\r\n                                    }\r\n                                </Fragment>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"flex\" style={{ alignItems: 'center', padding: '0 20px', width: '100%', margin: '12px 0 6px 0' }}>\r\n                        <div style={{ width: '50%' }}>\r\n                            {!demand ?\r\n                                <DragAndDrop\r\n                                    name='procuracao'\r\n                                    formData={procuracao}\r\n                                    dropDisplay={dropDisplay}\r\n                                    handleFiles={handleFiles}\r\n                                    demandFiles={demandFiles}\r\n                                    removeFile={removeFile}\r\n                                    fileToRemove={fileToRemove}\r\n                                />\r\n                                :\r\n                                <div className=\"flex\">\r\n                                    <ShowLocalFiles\r\n                                        demand={demand}\r\n                                        collection='empresaDocs'\r\n                                        demandFiles={demandFiles}\r\n                                        form={empresaFiles}\r\n                                        style={{ minWidth: '220px' }}\r\n                                    />\r\n                                </div>\r\n                            }\r\n                        </div>\r\n\r\n                        <div style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center', width: '50%', paddingTop: '8px' }}>\r\n                            <div style={{ marginTop: '12px' }}>\r\n                                <FormControlLabel\r\n                                    control={\r\n                                        <Checkbox\r\n                                            checked={expires === true}\r\n                                            onChange={() => checkExpires()}\r\n                                            value={expires}\r\n                                        />\r\n                                    }\r\n                                    label={\r\n\r\n                                        <span style={{ color: '#2979ff', fontSize: '0.8em', float: 'right' }}>\r\n                                            Procuração por prazo determinado?\r\n                                    </span>\r\n                                    }\r\n                                />\r\n                            </div>\r\n                            <TextField\r\n                                name='vencimento'\r\n                                label='Vencimento'\r\n                                margin='normal'\r\n                                className={textField}\r\n                                onChange={e => handleInput(e)}\r\n                                type='date'\r\n                                helper='se indeterminado, deixar em branco'\r\n                                value={data.vencimento || ''}\r\n                                disabled={expires === false}\r\n                                InputLabelProps={{\r\n                                    className: textField,\r\n                                    shrink: true,\r\n                                    style: { fontSize: '0.8rem', color: '#455a64', marginBottom: '5%' }\r\n                                }}\r\n                                inputProps={{\r\n                                    style: { background: '#fafafa', fontSize: '0.8rem', textAlign: 'center', color: '#000', height: '9px' },\r\n                                }}\r\n                                variant={'filled'}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </section>}\r\n            <div style={{ display: 'flex', justifyContent: 'flex-end', width: '100%' }}>\r\n                {selectedEmpresa && !demand ?\r\n                    <Button\r\n                        className={addButton}\r\n                        size='small'\r\n                        color=\"secondary\"\r\n                        variant=\"contained\"\r\n                        onClick={() => addProc()}\r\n                    >\r\n                        <AddIcon />Cadastrar procuração\r\n                        </Button>\r\n                    : selectedEmpresa && demand ?\r\n                        <StepperButtons\r\n                            uniqueStep={true}\r\n                            declineButtonLabel='Indeferir'\r\n                            demand={demand}\r\n                            setShowPendencias={setShowPendencias}\r\n                            showPendencias={showPendencias}\r\n                            info={info}\r\n                            handleSubmit={addProc}\r\n                            handleInput={handleInput}\r\n                        />\r\n                        : null\r\n                }\r\n            </div>\r\n\r\n            <section className=\"flexColumn\" style={{ width: '100%', paddingRight: '0' }}>\r\n                {\r\n                    selectedEmpresa && !selectedDocs[0] && !demand ?\r\n                        <div className=\"flex paper\">\r\n                            Nenhum procurador cadastrado para {selectedEmpresa.razaoSocial}\r\n                        </div>\r\n                        :\r\n                        selectedEmpresa && selectedDocs[0] &&\r\n                        <h2 style={{ margin: '25px 0 0 15px' }}>\r\n                            Procurações cadastradas\r\n                    </h2>\r\n                }\r\n                {\r\n                    selectedDocs.length > 0 && selectedDocs.map((procuracao, z) =>\r\n                        <div key={z * 0.01} className='flexColumn paper' style={{ padding: '10px 15px 20px 15px' }}>\r\n                            <h5>\r\n                                Procuração {\r\n                                    !procuracao.vencimento ?\r\n                                        'por prazo indeterminado'\r\n                                        :\r\n                                        'com vencimento em ' + handleDates(procuracao.vencimento)\r\n                                }\r\n                            </h5>\r\n\r\n                            <Procurador procuradores={procuradores} procuracao={procuracao} />\r\n\r\n                            <div className='flex center' style={{  position: 'relative' }}>\r\n                                <span style={divFiles}>\r\n                                    <InsertDriveFileOutlinedIcon style={fileIcon} />\r\n                                    <span style={{ verticalAlign: 'middle', }}>\r\n                                        {' '} Baixar arquivo\r\n                                    </span>\r\n                                    <GetAppIcon style={icon} onClick={() => getFile(procuracao.procuracaoId)} />\r\n                                </span>\r\n                                <span style={{ ...divFiles, width: 90, backgroundColor: 'white', border: 0, position: 'absolute', right: 0 }}>\r\n                                    <DeleteOutlinedIcon color='secondary' style={icon} onClick={() => removeProc(procuracao)} />\r\n                                    Apagar\r\n                                    </span>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                }\r\n            </section>\r\n        </div >\r\n    )\r\n}","import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport valueParser from '../Utils/valueParser'\r\nimport { checkInputErrors } from '../Utils/checkInputErrors'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\n\r\nimport ProcuradoresTemplate from './ProcuradoresTemplate'\r\nimport download from '../Utils/downloadFile'\r\nimport { procuradorForm } from '../Forms/procuradorForm'\r\n\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\nimport { logGenerator } from '../Utils/logGenerator'\r\nimport { setEmpresaDemand } from '../Utils/setEmpresaDemand'\r\nimport { removeFile, sizeExceedsLimit } from '../Utils/handleFiles'\r\n\r\nclass Procuradores extends Component {\r\n\r\n    constructor() {\r\n        super()\r\n        this.escFunction = (e) => {\r\n            if (e.keyCode === 27) {\r\n                if (this.state.openDialog) this.toggleDialog()\r\n            }\r\n        }\r\n    }\r\n\r\n    state = {\r\n        empresas: [],\r\n        razaoSocial: '',\r\n        toastMsg: 'Procuração cadastrada!',\r\n        confirmToast: false,\r\n        fileNames: [],\r\n        openDialog: false,\r\n        expires: false,\r\n        filteredProc: [],\r\n        dropDisplay: 'Clique ou arraste para anexar a procuração referente a este(s) procurador(es).',\r\n        procuradores: [],\r\n        procsToAdd: [1],\r\n        procuracoesArray: [],\r\n        selectedDocs: [],\r\n        showPendencias: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const\r\n            { redux } = this.props,\r\n            demand = this.props?.location?.state?.demand\r\n\r\n        //*************Set demand if any\r\n        if (demand) {\r\n            const\r\n                originalProcuradores = JSON.parse(JSON.stringify(redux.procuradores)),\r\n                demandState = setEmpresaDemand(demand, redux, originalProcuradores),\r\n                { latestDoc, ...updatedState } = demandState,\r\n                { history } = demand,\r\n                { vencimento, expires } = history[0],\r\n                newMembers = history[0].newMembers || [],\r\n                oldMembers = history[0].oldMembers || []\r\n            console.log(demandState)\r\n            let allDemandProcs, procsToAdd = []\r\n\r\n            if (oldMembers[0]) {\r\n                oldMembers.forEach(m => {\r\n                    originalProcuradores.forEach(op => {\r\n                        Object.keys(op).forEach(key => {\r\n                            if (m?.procuradorId === op?.procuradorId && !m[key]) {\r\n                                m[key] = op[key]\r\n                            }\r\n                        })\r\n                    })\r\n                })\r\n            }\r\n            if (newMembers[0] || oldMembers[0]) {\r\n                allDemandProcs = newMembers.concat(oldMembers)\r\n                allDemandProcs.forEach((p, i) => {\r\n                    procsToAdd.push(i)\r\n                    procuradorForm.forEach(({ field }) => {\r\n                        this.setState({ [field + i]: p[field] })\r\n                    })\r\n                })\r\n            }\r\n            this.setState({ vencimento, expires, procsToAdd })\r\n            this.setState({ ...updatedState, demandFiles: [latestDoc] })\r\n        }\r\n\r\n        document.addEventListener('keydown', this.escFunction, false)\r\n    }\r\n\r\n    componentWillUnmount() { this.setState({}) }\r\n\r\n    handleInput = async e => {\r\n        const\r\n            { name } = e.target,\r\n            { empresas } = this.props.redux,\r\n            procuradores = [...this.props.redux.procuradores],\r\n            procuracoes = JSON.parse(JSON.stringify(this.props.redux.procuracoes))\r\n\r\n        let { value } = e.target\r\n\r\n        //***********************Parse values ********************** */\r\n        const parsedValue = valueParser(name, value)\r\n        this.setState({ [name]: parsedValue })\r\n\r\n        //**************************SetState *********************** */\r\n        if (name === 'razaoSocial' && Array.isArray(procuradores)) {\r\n\r\n            const selectedEmpresa = empresas.find(e => e.razaoSocial === value)\r\n\r\n            if (selectedEmpresa) {\r\n                const selectedDocs = procuracoes.filter(pr => pr.codigoEmpresa === selectedEmpresa.codigoEmpresa)\r\n\r\n                await this.setState({ selectedEmpresa, selectedDocs, razaoSocial: selectedEmpresa.razaoSocial })\r\n                if (value !== selectedEmpresa.razaoSocial) this.setState({ selectedEmpresa: undefined, selectedDocs: [] })\r\n\r\n            } else this.setState({ selectedEmpresa: undefined, selectedDocs: [] })\r\n        }\r\n\r\n        if (name.match('cpfProcurador')) {\r\n            const proc = procuradores.find(p => p.cpfProcurador === value)\r\n            if (proc) {\r\n                const index = name.charAt(name.length - 1)\r\n                let cpfExists\r\n                Object.keys(this.state).forEach(stateKey => {\r\n                    if (stateKey !== name && this.state[stateKey] === value) {\r\n                        alert('Este CPF já foi informado.')\r\n                        this.setState({ [name]: '' })\r\n                        cpfExists = true\r\n                    }\r\n                })\r\n\r\n                if (!cpfExists)\r\n                    procuradorForm.forEach(({ field }) => {\r\n                        const key = field + index\r\n                        this.setState({ [key]: proc[field] })\r\n                    })\r\n            }\r\n        }\r\n    }\r\n\r\n    addProc = async (approved) => {\r\n\r\n        const\r\n            { redux } = this.props,\r\n            { selectedEmpresa, demand, procuracao, vencimento, expires, info } = this.state,\r\n            empresaId = selectedEmpresa.codigoEmpresa,\r\n            procuradores = JSON.parse(JSON.stringify(redux.procuradores)),\r\n            nProc = [...this.state.procsToAdd]\r\n        let\r\n            addedProcs = [],\r\n            sObject = {}\r\n\r\n        //***********************Check for errors *********************** */\r\n        /*       let { errors } = checkInputErrors('returnObj', 'Dont check the date, please!') || []\r\n      \r\n              if (errors && errors[0]) {\r\n                  if (!expires)\r\n                      await this.setState({ ...this.state, ...checkInputErrors('setState', 'dontCheckDate') })\r\n                  else\r\n                      await this.setState({ ...this.state, ...checkInputErrors('setState') })\r\n                  return\r\n              }\r\n   */\r\n        //***********Create array of Procs from state***********\r\n        nProc.forEach((n, i) => {\r\n            procuradorForm.forEach(obj => {\r\n                Object.assign(sObject, { [obj.field]: this.state[obj.field + i] })\r\n            })\r\n            let j = 0\r\n            Object.values(sObject).forEach(v => {\r\n                if (v) j += 1\r\n            })\r\n            if (j > 0) addedProcs.push(sObject)\r\n            j = 0\r\n            sObject = {}\r\n\r\n            procuradorForm.forEach(obj => {\r\n                this.setState({ [obj.field + i]: '' })\r\n            })\r\n        })\r\n\r\n        let\r\n            gotId,\r\n            newMembers = [],\r\n            oldMembers = []\r\n\r\n        addedProcs.forEach(addedProc => {\r\n            gotId = procuradores.find(p => p.cpfProcurador === addedProc.cpfProcurador)\r\n            if (gotId?.procuradorId) {\r\n\r\n                Object.keys(addedProc).forEach(k => {\r\n                    if (addedProc[k] === gotId[k])\r\n                        delete addedProc[k]\r\n                })\r\n                addedProc.procuradorId = gotId.procuradorId\r\n                oldMembers.push(addedProc)\r\n            }\r\n            else\r\n                newMembers.push(addedProc)\r\n        })\r\n\r\n        if (approved === undefined) {\r\n\r\n            const log = {\r\n                status: 'Aguardando aprovação',\r\n                empresaId,\r\n                history: {\r\n                    files: procuracao,\r\n                    newMembers,\r\n                    oldMembers,\r\n                    vencimento,\r\n                    expires\r\n                },\r\n                metadata: {\r\n                    fieldName: 'procuracao',\r\n                    empresaId\r\n                },\r\n            }\r\n            Object.entries(log).forEach(([k, v]) => { if (!v) delete log[k] })\r\n            log.approved = approved\r\n            log.historyLength = 0\r\n\r\n            logGenerator(log)\r\n                .then(r => console.log(r))\r\n\r\n            this.setState({ toastMsg: 'Solicitação de cadastro enviada', confirmToast: true })\r\n            setTimeout(() => { this.resetState() }, 1500);\r\n        }\r\n        if (approved === false) {\r\n            const log = {\r\n                id: demand.id,\r\n                empresaId,\r\n                history: {\r\n                    info\r\n                },\r\n                declined: true\r\n            }\r\n            logGenerator(log)\r\n                .then(r => console.log(r))\r\n            this.setState({ toastMsg: 'Solicitação indeferida!', confirmToast: true })\r\n            setTimeout(() => {\r\n                this.props.history.push('/solicitacoes')\r\n            }, 1500);\r\n        }\r\n        if (approved === true) {\r\n            newMembers = humps.decamelizeKeys(newMembers)\r\n            oldMembers = humps.decamelizeKeys(oldMembers)\r\n            this.approveProc(newMembers, oldMembers)\r\n        }\r\n    }\r\n\r\n    approveProc = async (newMembers, oldMembers) => {\r\n\r\n        const\r\n            { selectedEmpresa, demandFiles, vencimento, demand } = this.state,\r\n            { codigoEmpresa } = selectedEmpresa,\r\n            procIdArray = oldMembers.map(m => m.procurador_id)\r\n\r\n        //******************Post newMembers  *****************/\r\n        if (newMembers.length > 0) {\r\n            newMembers = humps.decamelizeKeys(newMembers)\r\n            const cadRequest = {\r\n                table: 'procuradores', tablePK: 'procurador_id',\r\n                procuradores: newMembers,\r\n                empresas: [codigoEmpresa]\r\n            }\r\n            await axios.post('/api/cadProcuradores', cadRequest)\r\n                .then(procs => {\r\n                    procs.data.forEach(p => procIdArray.push(p.procurador_id))\r\n                })\r\n        }\r\n\r\n        //***************Update existing members ****************/\r\n        const request = {\r\n            table: 'procuradores',\r\n            tablePK: 'procurador_id',\r\n            requestArray: oldMembers,\r\n            keys: procuradorForm.map(p => humps.decamelize(p.field))\r\n        }\r\n\r\n        if (oldMembers && oldMembers[0])\r\n            axios.put('/api/editProc', { ...request })\r\n                .then(r => console.log(r))\r\n\r\n        //***************Create new Procuracao****************/\r\n        let novaProcuracao = {\r\n            codigo_empresa: codigoEmpresa,\r\n            vencimento,\r\n            status: 'vigente',\r\n            procuradores: procIdArray\r\n        }\r\n\r\n        Object.entries(novaProcuracao).forEach(([k, v]) => {\r\n            if (!v || v === '') delete novaProcuracao[k]\r\n        })\r\n\r\n        let procuracaoId\r\n\r\n        await axios.post('/api/cadProcuracao', novaProcuracao)\r\n            .then(r => procuracaoId = r.data[0].procuracao_id)\r\n\r\n        novaProcuracao.procuracaoId = procuracaoId\r\n        const log = {\r\n            id: demand.id,\r\n            demandFiles,\r\n            history: {},\r\n            approved: true\r\n        }\r\n\r\n        if (demandFiles)\r\n            log.metadata = {\r\n                fieldName: 'procuracao',\r\n                empresaId: selectedEmpresa.codigoEmpresa,\r\n                procuracaoId: procuracaoId,\r\n                procuradores: procIdArray,\r\n            }\r\n        //generate log\r\n        logGenerator(log)\r\n            .then(r => console.log(r))\r\n\r\n        this.toast()\r\n        if (demand)\r\n            setTimeout(() => {\r\n                this.props.history.push('/solicitacoes')\r\n            }, 1500);\r\n        this.resetState()\r\n    }\r\n\r\n    removeProc = async proc => {\r\n\r\n        const\r\n            id = proc.procuracaoId,\r\n            selectedFile = this.props.redux.empresaDocs.find(f => Number(f.metadata.procuracaoId) === id)\r\n\r\n        let procs = [...this.state.selectedDocs]\r\n\r\n        await axios.delete(`/api/delete?table=procuracoes&tablePK=procuracao_id&id=${id}`)\r\n            .then(r => console.log(r.data))\r\n\r\n        if (selectedFile && selectedFile.hasOwnProperty('id'))\r\n            axios.delete(`/api/deleteFile?collection=empresaDocs&id=${selectedFile.id}`)\r\n                .then(({ data }) => console.log(data))\r\n\r\n        const i = procs.indexOf(proc)\r\n        procs.splice(i, 1)\r\n\r\n        this.setState({ selectedDocs: procs })\r\n    }\r\n\r\n    handleFiles = files => {\r\n        //limit file Size\r\n        if (sizeExceedsLimit(files)) return\r\n\r\n        let procuracao = new FormData()\r\n        procuracao.append('procuracao', files[0])\r\n        this.setState({ procuracao, fileToRemove: null })\r\n    }\r\n\r\n    removeFile = async (name) => {\r\n        const\r\n            { procuracao } = this.state,\r\n            newState = removeFile(name, procuracao)\r\n\r\n        this.setState({ ...this.state, ...newState })\r\n    }\r\n\r\n    getFile = id => {\r\n        const\r\n            { empresaDocs } = this.props.redux,\r\n            selectedFile = empresaDocs.find(f => Number(f.metadata.procuracaoId) === id)\r\n\r\n        if (selectedFile) {\r\n            const { id, filename } = selectedFile\r\n            download(id, filename, 'empresaDocs')\r\n        } else {\r\n            this.setState({ alertType: 'filesNotFound', openAlertDialog: true })\r\n        }\r\n    }\r\n\r\n    plusOne = () => {\r\n        let i = [...this.state.procsToAdd]\r\n        i.push(1)\r\n        this.setState({ procsToAdd: i })\r\n    }\r\n\r\n    minusOne = () => {\r\n        let i = [...this.state.procsToAdd]\r\n        i.pop()\r\n        this.setState({ procsToAdd: i })\r\n    }\r\n\r\n    checkExpires = () => {\r\n        if (this.state.expires === true) this.setState({ vencimento: '' })\r\n        this.setState({ expires: !this.state.expires })\r\n    }\r\n\r\n    resetState = () => {\r\n        const\r\n            { procsToAdd } = this.state,\r\n            keys = procuradorForm.map(({ field }) => field),\r\n            resetedFields = {}\r\n\r\n        procsToAdd.forEach((p, i) => {\r\n            keys.forEach(key => {\r\n                if (this.state.hasOwnProperty(key + i))\r\n                    resetedFields[key + i] = undefined\r\n            })\r\n        })\r\n        this.removeFile('procuracao')\r\n        this.setState({\r\n            ...resetedFields,\r\n            dropDisplay: 'Clique ou arraste para anexar a procuração referente a este(s) procurador(es).',\r\n            procsToAdd: [1],\r\n            vencimento: undefined,\r\n            procuracao: undefined,\r\n            expires: false\r\n        })\r\n    }\r\n\r\n    setShowPendencias = () => this.setState({ showPendencias: !this.state.showPendencias })\r\n    toggleDialog = () => this.setState({ openDialog: !this.state.openDialog })\r\n    closeAlert = () => this.setState({ openAlertDialog: !this.state.openAlertDialog })\r\n    toast = () => this.setState({ confirmToast: !this.state.confirmToast })\r\n\r\n    render() {\r\n        const { openAlertDialog, alertType, demand } = this.state\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <Crumbs links={['Empresas', '/empresas']} text='Cadastro de procurações' demand={demand} />\r\n                <ProcuradoresTemplate\r\n                    data={this.state}\r\n                    redux={this.props.redux}\r\n                    handleInput={this.handleInput}\r\n                    removeProc={this.removeProc}\r\n                    handleFiles={this.handleFiles}\r\n                    removeFile={this.removeFile}\r\n                    addProc={this.addProc}\r\n                    handleSubmit={this.handleSubmit}\r\n                    plusOne={this.plusOne}\r\n                    minusOne={this.minusOne}\r\n                    getFile={this.getFile}\r\n                    checkExpires={this.checkExpires}\r\n                    setShowPendencias={this.setShowPendencias}\r\n                />\r\n                <ReactToast open={this.state.confirmToast} close={this.toast} msg={this.state.toastMsg} />\r\n                {\r\n                    openAlertDialog &&\r\n                    <AlertDialog open={openAlertDialog} close={this.closeAlert} alertType={alertType} customMessage={this.state.customMsg} />\r\n                }\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst collections = ['empresas', 'procuradores', 'procuracoes', 'getFiles/empresaDocs']\r\n\r\nexport default (StoreHOC(collections, Procuradores))","import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport SociosTemplate from './SociosTemplate'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\nimport valueParser from '../Utils/valueParser'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport { sociosForm } from '../Forms/dadosSociosForm'\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\nimport { removeFile, sizeExceedsLimit } from '../Utils/handleFiles'\r\nimport { setEmpresaDemand } from '../Utils/setEmpresaDemand'\r\nimport { logGenerator } from '../Utils/logGenerator'\r\n\r\nclass AltSocios extends Component {\r\n\r\n    state = {\r\n        razaoSocial: '',\r\n        toastMsg: 'Dados atualizados!',\r\n        confirmToast: false,\r\n        files: [],\r\n        fileNames: [],\r\n        openDialog: false,\r\n        dialogTitle: '',\r\n        addedSocios: [0],\r\n        totalShare: 0,\r\n        filteredSocios: [],\r\n        dropDisplay: 'Clique ou arraste para anexar o contrato social atualizado da empresa',\r\n        showFiles: false,\r\n        showPendencias: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        const\r\n            { redux } = this.props,\r\n            demand = this.props?.location?.state?.demand,\r\n            originals = humps.decamelizeKeys(redux.socios),\r\n            socios = JSON.parse(JSON.stringify(redux.socios)),\r\n            filteredSocios = socios.filter(s => s.razaoSocial === this.state.razaoSocial)\r\n\r\n        if (demand) {\r\n\r\n            const filteredSocios = socios.filter(s => s.codigoEmpresa === demand.empresaId)\r\n            console.log(filteredSocios)\r\n\r\n            const\r\n                demandState = setEmpresaDemand(demand, redux, filteredSocios),\r\n                { latestDoc, ...updatedState } = demandState\r\n            console.log(demandState)\r\n            this.setState({ ...updatedState, contratoSocial: latestDoc, originals })\r\n        }\r\n        else this.setState({ originals, filteredSocios })\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const\r\n            { socios } = prevProps.redux,\r\n            { originals } = prevState,\r\n            decamSocios = humps.decamelizeKeys(socios)\r\n\r\n        if (JSON.stringify(decamSocios) !== JSON.stringify(originals))\r\n            this.setState({ originals: decamSocios })\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.setState({})\r\n        document.removeEventListener('keydown', this.escFunction, false)\r\n    }\r\n\r\n    handleInput = async e => {\r\n        const\r\n            { empresas } = this.props.redux,\r\n            { name } = e.target\r\n        let\r\n            { value } = e.target\r\n\r\n        const parsedValue = valueParser(name, value)\r\n\r\n        this.setState({ [name]: parsedValue })\r\n\r\n        if (name === 'razaoSocial') {\r\n            const\r\n                originalSocios = humps.camelizeKeys(this.state.originals),\r\n                filteredSocios = originalSocios.filter(s => s.razaoSocial === value).map(s => s),\r\n                selectedEmpresa = empresas.find(e => e.razaoSocial === value)\r\n\r\n            if (filteredSocios.length > 0) {\r\n                this.setState({ filteredSocios, selectedEmpresa })\r\n            } else this.setState({ filteredSocios: [] })\r\n            if (selectedEmpresa) {\r\n                await this.setState({ razaoSocial: selectedEmpresa.razaoSocial, selectedEmpresa })\r\n                if (value !== selectedEmpresa.razaoSocial) this.setState({ selectedEmpresa: undefined })\r\n            } else this.setState({ selectedEmpresa: undefined })\r\n        }\r\n    }\r\n\r\n    handleBlur = async e => {\r\n        const { filteredSocios, share } = this.state\r\n        const { name } = e.target\r\n        let { value } = e.target\r\n        switch (name) {\r\n            case 'cpfSocio':\r\n                const alreadyExists = filteredSocios.find(e => e.cpfSocio === value)\r\n                if (alreadyExists) {\r\n                    this.setState({ alertType: 'alreadyExists', openAlertDialog: true })\r\n                    this.setState({ cpfSocio: '' })\r\n                }\r\n                break;\r\n            case 'share':\r\n\r\n                if (share && typeof share !== 'number')\r\n                    await this.setState({ share: Number(this.state.share) })                         //Garante que o state é um número\r\n\r\n                if (value) {\r\n                    value = this.state.share\r\n                    if (value > 100) {\r\n                        await this.setState({ share: '' })\r\n                        value = ''\r\n                        this.setState({ alertType: 'numberNotValid', openAlertDialog: true })\r\n                    }\r\n                    if (value < 0) {\r\n                        value = value * -1\r\n                        this.setState({ share: value })\r\n                    }\r\n                    if (value > 0) {\r\n                        let totalShare = 0\r\n                        const allShares = filteredSocios.map(s => s.share ? Number(s.share) : 0)            //Procura valor share entre os sócios\r\n\r\n                        if (allShares[0])                                                   // se encontrar, retorna a soma dos valores\r\n                            totalShare = allShares.reduce((a, b) => a + b)\r\n\r\n                        totalShare += value\r\n                        //console.log(totalShare, typeof totalShare)\r\n                        this.setState({ totalShare })\r\n                    }\r\n                }\r\n                break;\r\n            default: break;\r\n        }\r\n    }\r\n\r\n    addSocio = async () => {\r\n        let socios = this.state.filteredSocios,\r\n            sObject = {}\r\n\r\n        //check if totalShare is more than 100\r\n\r\n        if (this.state.totalShare > 100) {\r\n            this.setState({ openAlertDialog: true, alertType: 'overShared' })\r\n            return null\r\n        }\r\n\r\n        sociosForm.forEach(obj => {\r\n            Object.assign(sObject, { [obj.field]: this.state[obj.field] })\r\n        })\r\n        socios.unshift(sObject)\r\n\r\n        await this.setState({ filteredSocios: socios })\r\n\r\n        sociosForm.forEach(async obj => {\r\n            await this.setState({ [obj.field]: undefined })\r\n        })\r\n        document.getElementsByName('nomeSocio')[0].focus()\r\n    }\r\n\r\n    removeSocio = async index => {\r\n        let socios = [...this.state.filteredSocios]\r\n        const socio = socios[index]\r\n\r\n        if (socio.status && socio.status !== 'deleted') {\r\n            socio.originalStatus = socio.status\r\n            socio.status = 'deleted'\r\n        }\r\n        else if (socio?.status === 'deleted')\r\n            socio.status = socio?.originalStatus\r\n        else\r\n            socio.status = 'deleted'\r\n\r\n        this.setState({ filteredSocios: socios })\r\n    }\r\n\r\n    enableEdit = index => {\r\n\r\n        let editSocio = this.state.filteredSocios\r\n        if (editSocio[index].edit === true) editSocio[index].edit = false\r\n        else {\r\n            editSocio.forEach(s => s.edit = false)\r\n            editSocio[index].edit = true\r\n        }\r\n        this.setState({ filteredSocios: editSocio })\r\n    }\r\n\r\n    handleEdit = e => {\r\n        const { name } = e.target\r\n        let { value } = e.target\r\n\r\n        value = valueParser(name, value)\r\n\r\n        let editSocio = this.state.filteredSocios.filter(s => s.edit === true)[0]\r\n        const index = this.state.filteredSocios.indexOf(editSocio)\r\n\r\n        editSocio[name] = value\r\n\r\n        let fs = this.state.filteredSocios\r\n        fs[index] = editSocio\r\n\r\n        this.setState({ filteredSocios: fs })\r\n    }\r\n\r\n    handleSubmit = async approved => {\r\n        const\r\n            { socios } = this.props.redux,\r\n            { selectedEmpresa, filteredSocios, demand, contratoSocial, info } = this.state,\r\n            { codigoEmpresa } = selectedEmpresa,\r\n            oldHistoryLength = demand?.history?.length || 0\r\n\r\n        let log = {}\r\n        log.metadata = {}\r\n\r\n        //check if totalShare is more than 100\r\n        let updatedShare = filteredSocios\r\n            .map(({ share }) => {\r\n                if (typeof share === 'string')\r\n                    share = Number(share)\r\n                if (share)\r\n                    return share\r\n                else return 0\r\n            })\r\n            .reduce((a, b) => a + b)\r\n\r\n        updatedShare = +(updatedShare.toFixed(2))\r\n\r\n        if (updatedShare > 100) {\r\n            this.setState({ openAlertDialog: true, alertType: 'overShared' })\r\n            return null\r\n        }\r\n\r\n        let\r\n            oldMembers = [],\r\n            newMembers = [],\r\n            keys = sociosForm.map(el => humps.decamelize(el.field))\r\n        keys.splice(1, 1)\r\n\r\n        //*************Organize socios into oldMembers and newMembers arrays*/\r\n        filteredSocios.forEach(fs => {\r\n            let { razaoSocial, createdAt, edit, ...rest } = fs\r\n            fs = rest\r\n            fs.codigoEmpresa = codigoEmpresa\r\n            if (!fs.hasOwnProperty('socioId')) {\r\n                const gotId = socios.find(s => s.cpfSocio === fs.cpfSocio)\r\n                if (gotId) {\r\n                    fs.socioId = gotId.socioId\r\n                    oldMembers.push(fs)\r\n                } else {\r\n                    if (fs?.status !== 'deleted') {\r\n                        fs.status = 'new'\r\n                        newMembers.push(fs)\r\n                    }\r\n                }\r\n            } else {\r\n                oldMembers.push(fs)\r\n                delete oldMembers.socioId\r\n            }\r\n        })\r\n\r\n        const table = 'socios', tablePK = 'socio_id'\r\n        let\r\n            realChanges = [],\r\n            altObj = {},\r\n            shareUpdate,\r\n            deleted\r\n\r\n        //*****************Send only real updates of oldMembers and add status = 'modified'\r\n        const originals = humps.camelizeKeys(this.state.originals)\r\n\r\n        oldMembers.forEach(m => {\r\n            originals.forEach(async s => {\r\n                if (m.socioId === s.socioId) {\r\n                    Object.keys(m).forEach(key => {\r\n                        if (m[key] && m[key] !== '' && (m[key] !== s[key] || key === 'socioId')) {\r\n                            Object.assign(altObj, { [key]: m[key] })\r\n                        }\r\n                    })\r\n                    //if marked as deleted, preserve status to create delete request, else mark as modified. if deleted, demand needs approval\r\n                    if (Object.keys(altObj).length > 1) {\r\n                        if (altObj?.status !== 'deleted') {\r\n                            m.status = 'modified'\r\n                            altObj.status = 'modified'\r\n                        }\r\n                        else deleted = true\r\n                        realChanges.push(altObj)\r\n                    }\r\n                    if (altObj.share || deleted) shareUpdate = true\r\n                    altObj = {}\r\n                }\r\n            })\r\n        })\r\n\r\n        //delete newMembers empty / undefined fields / canceled newMembers\r\n\r\n        newMembers = newMembers.filter(({ status }) => status !== 'deleted')\r\n        newMembers.forEach(m => {\r\n            Object.keys(m).forEach(key => {\r\n                if (!m[key] || m[key] === '') delete m[key]\r\n            })\r\n        })\r\n\r\n        const modifiedMembers = oldMembers.filter(m => m?.status === 'modified')\r\n\r\n        //alert if oldMembers and new members dont exist\r\n        if (!modifiedMembers[0] && !newMembers[0] && !contratoSocial && approved !== false && !deleted) {\r\n            alert('Nenhuma alteração foi realizada.')\r\n            return\r\n        }\r\n\r\n        //Variables to be inserted in files metadata\r\n        let\r\n            updateFilesMetadata = false,\r\n            socioIdsArray = filteredSocios\r\n                .filter(s => s.socioId !== undefined)\r\n                .map(s => s.socioId)\r\n\r\n        //**********If not approved but share was updated, create demand ***************** */\r\n        if (!approved && (newMembers.length > 0 || shareUpdate))\r\n            this.setState({ toastMsg: 'Alteração estatuária enviada!' })\r\n\r\n        //**********Else if approved and/or no share update, prepare request Object to PG DB */\r\n        else if ((!shareUpdate && newMembers.length === 0) || approved) {\r\n\r\n            log.completed = true\r\n            log.metadata.tempFile = 'false'\r\n\r\n            oldMembers = humps.decamelizeKeys(realChanges)\r\n            newMembers = humps.decamelizeKeys(newMembers)\r\n\r\n            try {\r\n                //insert new members, if any\r\n                if (newMembers.length > 0) {\r\n                    newMembers.forEach(m => delete m.status)\r\n                    await axios.post('/api/cadSocios', { socios: newMembers, table, tablePK })\r\n                        .then(r => r.data.forEach(newSocio => socioIdsArray.push(newSocio.socio_id)))\r\n                    updateFilesMetadata = true // if new members are inserted, we need to update socioIds array in file metadata.\r\n                }\r\n\r\n                //remove members marked as 'deleted' from the database and update any modified\r\n                if (oldMembers.length > 0) {\r\n                    oldMembers.forEach(async (member, i) => {                                           //remove deleted from DB\r\n                        if (member?.status === 'deleted') {\r\n                            await axios.delete(`/api/delete?table=socios&tablePK=socio_id&id=${member.socio_id}`)\r\n                                .catch(err => console.log(err))\r\n\r\n                            const index = socioIdsArray.indexOf(member.socio_id)\r\n                            if (index !== -1) {\r\n                                socioIdsArray.splice(i, 1)\r\n                                updateFilesMetadata = true\r\n                            }\r\n                        }\r\n                    })\r\n                    oldMembers = oldMembers.filter(({ status }) => status === 'modified')               //update existing member data\r\n                    oldMembers.forEach(m => delete m.status)\r\n                    await axios.put('/api/editSocios', { requestArray: oldMembers, table, tablePK, keys })\r\n                        .then(r => console.log(r.data))\r\n                }\r\n            } catch (err) {\r\n                console.log(err)\r\n            }\r\n        }\r\n\r\n        //**********Prepare the log object, approved, or not.******************\r\n        log = {\r\n            ...log,\r\n            id: demand?.id,\r\n            empresaId: codigoEmpresa,\r\n            info,\r\n            history: {},\r\n            historyLength: oldHistoryLength,\r\n            approved\r\n        }\r\n\r\n        if (realChanges.length > 0) log.history.oldMembers = realChanges\r\n        if (newMembers.length > 0) log.history.newMembers = newMembers\r\n        if (contratoSocial && demand) log.demandFiles = [contratoSocial]\r\n        //if (demand) log.id = demand?.id\r\n        if (approved === false) log.declined = true\r\n        if (log.completed) log.approved = true\r\n\r\n        //If first attempt to send files completed (no share update) or not, handle files\r\n        if (contratoSocial && !updateFilesMetadata && !demand) {\r\n            log.history.files = contratoSocial\r\n            log.metadata = {\r\n                fieldName: 'contratoSocial',\r\n                empresaId: codigoEmpresa\r\n            }\r\n        }\r\n        log.metadata.socios = socioIdsArray\r\n\r\n        logGenerator(log)                               //Generate the demand\r\n            .then(r => {\r\n                console.log(r?.data)\r\n                this.toast()\r\n            })\r\n            .catch(err => console.log(err))\r\n\r\n        //*******************Reset state and variables ************** */\r\n        oldMembers = []\r\n        realChanges = []\r\n        altObj = {}\r\n        newMembers = []\r\n\r\n        this.resetState()\r\n        if (demand)\r\n            setTimeout(() => { this.props.history.push('/solicitacoes') }, 1500)\r\n    }\r\n\r\n    handleFiles = files => {\r\n        //limit file Size\r\n        if (sizeExceedsLimit(files)) return\r\n\r\n        if (files && files[0]) {\r\n            const contratoSocial = new FormData()\r\n            contratoSocial.append('contratoSocial', files[0])\r\n            this.setState({ contratoSocial, fileToRemove: null })\r\n        }\r\n    }\r\n\r\n    removeFile = async (name) => {\r\n        const\r\n            { contratoSocial } = this.state,\r\n            newState = removeFile(name, contratoSocial)\r\n\r\n        this.setState({ ...this.state, ...newState })\r\n    }\r\n\r\n    resetState = () => {\r\n        const { filteredSocios } = this.state\r\n\r\n        if (filteredSocios)\r\n            filteredSocios.forEach(s => s.edit = false)\r\n\r\n        this.setState({\r\n            razaoSocial: '', selectedEmpresa: undefined, filteredSocios: [],\r\n            dropDisplay: 'Clique ou arraste para anexar o contrato social atualizado da empresa',\r\n            contratoSocial: undefined\r\n        })\r\n    }\r\n\r\n    setShowPendencias = () => this.setState({ showPendencias: !this.state.showPendencias })\r\n    toggleDialog = () => this.setState({ openDialog: !this.state.openDialog })\r\n    closeAlert = () => this.setState({ openAlertDialog: !this.state.openAlertDialog })\r\n    toast = () => this.setState({ confirmToast: !this.state.confirmToast })\r\n\r\n    render() {\r\n        const { filteredSocios, openAlertDialog, alertType } = this.state,\r\n            { empresas } = this.props.redux\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <Crumbs links={['Empresas', '/empresas']} text='Alteração do quadro societário' />\r\n                <SociosTemplate\r\n                    data={this.state}\r\n                    socios={filteredSocios}\r\n                    empresas={empresas}\r\n                    handleInput={this.handleInput}\r\n                    handleBlur={this.handleBlur}\r\n                    addSocio={this.addSocio}\r\n                    removeSocio={this.removeSocio}\r\n                    enableEdit={this.enableEdit}\r\n                    handleEdit={this.handleEdit}\r\n                    handleFiles={this.handleFiles}\r\n                    handleSubmit={this.handleSubmit}\r\n                    removeFile={this.removeFile}\r\n                    setShowPendencias={this.setShowPendencias}\r\n                />\r\n                <ReactToast open={this.state.confirmToast} close={this.toast} msg={this.state.toastMsg} />\r\n                {openAlertDialog && <AlertDialog open={openAlertDialog} close={this.closeAlert} alertType={alertType} />}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst collections = ['empresas', 'socios', 'getFiles/empresaDocs']\r\n\r\nexport default StoreHOC(collections, AltSocios)","export const barChart = {\r\n    options: {\r\n        title: {\r\n            text: 'Veículos por ano de fabricação',\r\n            align: 'center',\r\n            marginTop: 10,\r\n            offsetX: 0,\r\n            offsetY: 0,\r\n            floating: false,\r\n            style: {\r\n                fontSize: '14px',\r\n                fontWeight: 500,\r\n                fontFamily: '\\'Segoe UI\\', Tahoma, Geneva, Verdana, sans-serif ',\r\n            },\r\n        },\r\n        legend: { show: false },\r\n        chart: {\r\n            id: \"veiculos_ano_fabricacao\",\r\n        },\r\n        xaxis: {            \r\n            labels: {\r\n                style: {\r\n                    fontSize: '9px',\r\n                    fontWeight: 400,\r\n                    fontFamily: '\\'Segoe UI\\', Tahoma, Geneva, Verdana, sans-serif ',\r\n                },\r\n            }\r\n        },\r\n        dataLabels: {\r\n            enabled: false,\r\n        },\r\n      //  fill: { colors: ['rgb(47, 75, 124)'] },\r\n        plotOptions: { bar: { horizontal: false }, },\r\n    }\r\n}\r\n\r\nexport const donutChart = {\r\n    options: {\r\n        title: {\r\n            text: 'Percentual de veículos por ano de fabricação',\r\n            align: 'center',\r\n            marginTop: 10,\r\n            marginBottom: 20,\r\n            offsetX: 0,\r\n            offsetY: 0,\r\n            floating: false,\r\n            style: {\r\n                fontSize: '13px',\r\n                fontWeight: 500,\r\n                fontFamily: '\\'Segoe UI\\', Tahoma, Geneva, Verdana, sans-serif ',\r\n            },\r\n        },\r\n        plotOptions: {\r\n            pie: {\r\n                donut: {\r\n                    labels: {\r\n                        show: true,\r\n                        name: {\r\n                            show: true,\r\n                            fontSize: '20px',\r\n                            fontFamily: '\\'Segoe UI\\', Tahoma, Geneva, Verdana, sans-serif ',\r\n                            fontWeight: 600,\r\n                            color: '#373d3f',\r\n                            offsetY: -10\r\n                        },\r\n                        value: {\r\n                            show: true,\r\n                            fontSize: '15px',\r\n                            fontFamily: 'Helvetica, Arial, sans-serif',\r\n                            fontWeight: 400,\r\n                            color: '#373d3f',\r\n                            offsetY: 16,\r\n                            formatter: function (val) {\r\n                                return val\r\n                            }\r\n                        },\r\n                        total: {\r\n                            show: true,\r\n                            showAlways: true,\r\n                            label: 'Total:',\r\n                            fontSize: '20px',\r\n                            fontFamily: 'Helvetica, Arial, sans-serif',\r\n                            fontWeight: 600,\r\n                            color: '#373d3f',\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        responsive: [{\r\n            breakpoint: 480,\r\n            options: {\r\n                chart: {\r\n                    width: 200\r\n                },\r\n                legend: {\r\n                    position: 'bottom'\r\n                }\r\n            }\r\n        }]\r\n    },\r\n}","import React from 'react'\r\nimport Chart from \"react-apexcharts\";\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport { barChart, donutChart } from './chartsConfig'\r\n\r\nimport Paper from '@material-ui/core/Paper'\r\nimport './relatorios.css'\r\n\r\nconst RelatoriosTemplate = (\r\n    { empresas, razaoSocial, selectedEmpresa, selectedVehicles, labels, values, tableLabels, tableData, mediaIdades, moda, \r\n        handleInput, segurosVencidos, segurosVigentes, oldVehicles, veiculosNovos }) => {\r\n\r\n    const colors = ['#ff7c43', '#ffa600', '#FF9800', '#f95d6a', '#f44336', '#2E93fA', '#3333ff', '#66DA26', '#669999', '#E91E63', '#d45087', '#a05195', '#665191', '#2f4b7c', '#003f5c',]\r\n\r\n    return (\r\n        <main className='relatorios'>\r\n            <SelectEmpresa\r\n                empresas={empresas}\r\n                data={{ razaoSocial }}\r\n                handleInput={handleInput}\r\n            />\r\n            {(!selectedVehicles || selectedVehicles.length === 0) ? <p>Nenhum veículo cadastrado para {selectedEmpresa.razaoSocial}</p>\r\n                :\r\n                <>\r\n                    <h3 style={{ width: '100%', textAlign: 'center' }}>\r\n                        {!selectedEmpresa ? 'Exibindo todos os veículos' : selectedEmpresa.razaoSocial} - Média de idade da frota: {mediaIdades} anos. Moda do ano de fabricação: {moda}.\r\n                    </h3>\r\n                    <Paper>\r\n                        <section className='rowContainer'>\r\n                            <Chart\r\n                                options={{ ...barChart.options, xaxis: { ...barChart.options.xaxis, categories: labels } }}\r\n                                series={[{ name: \"Veículos\", data: values }]}\r\n                                type=\"bar\"\r\n                                width=\"600\"\r\n                            />\r\n                            <Chart\r\n                                options={{ ...donutChart.options, labels, colors }}\r\n                                series={values}\r\n                                type=\"donut\"\r\n                                width=\"480\"\r\n                            />\r\n                        </section>\r\n                    </Paper>\r\n                    <Paper>\r\n                        <section>\r\n                            <table>\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th className='tHeader'\r\n                                            style={{ color: '#fff', backgroundColor: 'rgb(84, 110, 122, 0.7)' }}\r\n                                            colSpan={tableLabels.length}>Veículos por ano - {!selectedEmpresa ? 'Exibindo todos os veículos' : selectedEmpresa.razaoSocial}  </th>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        {tableLabels.map((l, i) => <th key={l}>{l}</th>)}\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {\r\n                                        tableData.map((tableValues, i) =>\r\n                                            <tr key={i}>\r\n                                                {tableValues.map((d, j) =>\r\n                                                    <td className='review relatorioTD' key={j}>\r\n                                                        {d}\r\n                                                    </td>\r\n                                                )}\r\n                                            </tr>\r\n                                        )\r\n                                    }\r\n                                </tbody>\r\n                            </table>\r\n                        </section>\r\n                    </Paper>\r\n                    {/* <div className=\"addSpace\"> </div> */}\r\n                    <section className='rowContainer'>\r\n                        <Chart\r\n                            options={{\r\n                                title: {\r\n                                    ...donutChart.options.title,\r\n                                    text: `Seguros vencidos: ${segurosVencidos} / vigentes: ${segurosVigentes}`,\r\n                                },\r\n                                labels: ['Seguros vencidos', 'Seguros vigentes'],\r\n                                colors: ['#FF9800', '#3333ff']\r\n                            }}\r\n                            series={[Number(segurosVencidos), Number(segurosVigentes)]}\r\n                            type=\"pie\"\r\n                            width=\"400\"\r\n                        />\r\n                        <Chart\r\n                            options={{\r\n                                title: {\r\n                                    ...donutChart.options.title,\r\n                                    text: `Idade superior a 15 anos: ${oldVehicles} / inferior 15 anos: ${veiculosNovos}`,\r\n                                },\r\n                                labels: ['Veículos com mais de 15 anos', 'Veículos com menos de 15 anos'],\r\n                                colors: ['#f44336', '#2E93fA']\r\n                            }}\r\n                            series={[Number(oldVehicles), Number(veiculosNovos)]}\r\n                            type=\"pie\"\r\n                            width=\"420\"\r\n                            height='220'\r\n                        />\r\n                    </section>\r\n\r\n                </>\r\n            }\r\n        </main >\r\n    )\r\n}\r\n\r\nexport default RelatoriosTemplate","import React, { useState, useEffect } from 'react'\r\nimport StoreHOC from '../Store/StoreHOC'\r\nimport RelatoriosTemplate from './RelatoriosTemplate'\r\nimport moment from 'moment'\r\n\r\nconst sum = array => {\r\n    let newArray = [...array]\r\n    newArray.shift()\r\n    if (newArray[0]) {\r\n        const total = newArray.reduce((a, b) => a + b)\r\n        return total\r\n    }\r\n}\r\n\r\nconst average = array => {\r\n    let newArray = array.map(n => Number(n))\r\n    newArray.shift()\r\n\r\n    if (newArray[0]) {\r\n        const\r\n            sum = newArray.reduce((a, b) => a + b),\r\n            average = sum / newArray.length\r\n\r\n        return average.toFixed(2)\r\n    }\r\n}\r\n\r\nconst countExpired = vehicles => {\r\n\r\n    return vehicles\r\n        .filter(r => !r.vencimento || (moment(r.vencimento).isValid() && moment(r.vencimento).isBefore(moment()) && r.veiculoId && r))\r\n        .length\r\n}\r\n\r\nconst Relatorios = props => {\r\n\r\n    const\r\n        { veiculos, empresas } = props.redux,\r\n        [razaoSocial, setRazaoSocial] = useState(''),\r\n        [selectedEmpresa, setEmpresa] = useState(undefined),\r\n        [allExpired, setExpired] = useState(''),\r\n        [allValid, setValid] = useState(''),\r\n        [oldVehicles, setOldVehicles] = useState('')\r\n\r\n    const handleInput = e => {\r\n        const { value } = e.target\r\n        setRazaoSocial(value)\r\n        let empresa\r\n\r\n        if (value.length > 2) {\r\n            empresa = empresas.find(e => e.razaoSocial === value)\r\n            if (empresa) setEmpresa(empresa)\r\n        }\r\n        else setEmpresa('')\r\n    }\r\n\r\n    let selectedId, selectedVehicles\r\n    if (selectedEmpresa && selectedEmpresa !== '') {\r\n        selectedId = selectedEmpresa.codigoEmpresa\r\n        selectedVehicles = veiculos\r\n            .filter(v => v.codigoEmpresa === selectedId)\r\n    } else selectedVehicles = veiculos\r\n\r\n\r\n    // **************************MÉDIA****************************\r\n\r\n    const\r\n        idades =\r\n            selectedVehicles\r\n                .map(({ anoCarroceria }) => anoCarroceria)\r\n                .filter(ano => ano !== null)\r\n                .sort()\r\n\r\n    let mediaIdades = idades.reduce((a, b) => a + b / idades.length, 0)\r\n    mediaIdades = (new Date().getFullYear() - mediaIdades).toFixed(2)\r\n\r\n    // **************************CONTAGEM****************************\r\n\r\n    let counter = {}\r\n    idades.forEach(function (e) {\r\n        if (counter[e] === undefined) {\r\n            counter[e] = 0\r\n        }\r\n        counter[e] += 1\r\n    })\r\n\r\n    // *******************CONSOLIDAÇÃO DE VALORES**********************\r\n    const\r\n        unsortedLabels = Object.keys(counter),\r\n        labels = [...unsortedLabels.sort((a, b) => a - b)],\r\n        values = Object.values(counter)\r\n\r\n    let obj = {}, arr = [], ultimateObj = {}\r\n    labels.forEach(ano => {\r\n        selectedVehicles.forEach(v => {\r\n            if (v.anoCarroceria && v.anoCarroceria.toString() === ano) {\r\n                arr.push({ veiculoId: v.veiculoId, poltronas: v.poltronas })\r\n                if (!obj[ano]) obj[ano] = arr\r\n                else obj[ano].push(...arr)\r\n                arr = []\r\n            }\r\n        })\r\n        ultimateObj[ano] = obj[ano]\r\n        obj = {}\r\n    })\r\n\r\n    let parcial = 0, poltronasPerYear = ['Capacidade Total'], poltronasAcc = [], poltronasMedia = ['Capacidade Média']\r\n\r\n    Object.keys(ultimateObj).forEach(year => {\r\n        ultimateObj[year].forEach(v => {\r\n            parcial += v.poltronas\r\n        })\r\n        //poltronasTotal += parcial\r\n        poltronasPerYear.push(parcial)\r\n        poltronasMedia.push((parcial / ultimateObj[year].length).toFixed(2))\r\n\r\n        const acc = poltronasPerYear.reduce((a, b) => a + b, 0)\r\n        poltronasAcc.push(acc)\r\n        parcial = 0\r\n    })\r\n\r\n    poltronasPerYear.push(sum(poltronasPerYear))\r\n\r\n    let\r\n        tableLabels = ['Ano'],\r\n        tableValues = ['Nº de Veículos']\r\n\r\n    tableLabels.push(...labels, 'Total')\r\n    tableValues.push(...values)\r\n    tableValues.push(sum(tableValues))\r\n    poltronasMedia.push(average(poltronasMedia))\r\n\r\n    const tableData = [tableValues, poltronasMedia, poltronasPerYear]\r\n\r\n    // **************************MODA****************************\r\n    let moda = unsortedLabels.sort((a, b) => counter[a] - counter[b])\r\n    moda = moda[moda.length - 1]\r\n\r\n    //**********************SEGUROS VENCIDOS E VEÍCULOS COM LAUDO***********************\r\n    const currentYear = new Date().getFullYear()\r\n\r\n    useEffect(() => {\r\n\r\n        const\r\n            currentYear = new Date().getFullYear(),\r\n            expired = countExpired(selectedVehicles),\r\n            needsLaudo = selectedVehicles\r\n                .filter(v => currentYear - v.anoCarroceria > 14 && v.anoCarroceria !== null)\r\n                .length\r\n\r\n        setExpired(expired)\r\n        setValid(selectedVehicles.length - expired)\r\n        setOldVehicles(needsLaudo)\r\n\r\n    }, [selectedVehicles])\r\n\r\n    let segurosVencidos = [], segurosVigentes, veiculosAntigos, veiculosNovos\r\n\r\n    if (razaoSocial.length > 2 && selectedEmpresa) {\r\n        segurosVencidos = countExpired(selectedVehicles)\r\n\r\n        veiculosAntigos = selectedVehicles\r\n            .filter(v => currentYear - v.anoCarroceria > 14 && v.anoCarroceria !== null)\r\n            .length\r\n\r\n        segurosVigentes = selectedVehicles.length - segurosVencidos\r\n        veiculosNovos = selectedVehicles.length - veiculosAntigos\r\n    }\r\n    else {\r\n        segurosVencidos = allExpired\r\n        segurosVigentes = allValid\r\n        veiculosAntigos = oldVehicles\r\n        veiculosNovos = selectedVehicles.length - oldVehicles\r\n    }\r\n\r\n    return (\r\n        <RelatoriosTemplate\r\n            empresas={empresas}\r\n            razaoSocial={razaoSocial}\r\n            labels={labels}\r\n            values={values}\r\n            tableLabels={tableLabels}\r\n            tableData={tableData}\r\n            selectedEmpresa={selectedEmpresa}\r\n            selectedVehicles={selectedVehicles}\r\n            mediaIdades={mediaIdades}\r\n            moda={moda}\r\n            handleInput={handleInput}\r\n            segurosVencidos={segurosVencidos}\r\n            segurosVigentes={segurosVigentes}\r\n            oldVehicles={veiculosAntigos}\r\n            veiculosNovos={veiculosNovos}\r\n        />\r\n    )\r\n}\r\n\r\nconst collections = ['veiculos', 'empresas']\r\n\r\nexport default StoreHOC(collections, Relatorios)","import React from 'react'\r\nimport moment from 'moment'\r\n\r\nimport ShowFiles from './ShowFiles'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\r\n\r\nexport default function StandardTable({ tableData, staticFields, title, tableStyle, style, completed, showInfo, \r\n    showFiles, setShowFiles, filesCollection, primaryKey, close, filesIds, razaoSocial }) {\r\n\r\n    const dateFormat = value => {\r\n        if (moment(value, 'YYYY-MM-DDTHH:mm:ss.SSSZZ', true).isValid()) {\r\n            return moment(value, moment.ISO_8601, true).format('DD/MM/YYYY, HH:mm[h]')\r\n        }\r\n        else return value\r\n    }\r\n\r\n    const createButton = (action, index, files) => {\r\n        const disable = !tableData[index]?.info ? true : false\r\n        const dStyle = { cursor: 'default' }\r\n\r\n        switch (action) {\r\n            case ('info'):\r\n                return (\r\n                    <div style={{ display: 'flex', justifyContent: 'flex-start' }}>\r\n                        <span\r\n                            className='button'\r\n                            style={disable ? dStyle : {}}\r\n                            component='span'\r\n                            title={!disable ? 'Ver informações adicionais' : 'Nenhuma informação adicional'}\r\n                            onClick={() => showInfo(index)} >\r\n                            <InfoIcon color={!disable ? 'primary' : 'disabled'} />\r\n                        </span>\r\n\r\n                        {files ?\r\n                            <span className='button' component='span' title='Ver arquivos' onClick={() => { setShowFiles(files) }\r\n                            } >\r\n                                <FileCopyOutlinedIcon />\r\n                            </span>\r\n                            :\r\n                            <span style={{ padding: '2px 10px 0 17px' }}> - </span>\r\n                        }\r\n                    </div >\r\n                )\r\n            case ('completed'):\r\n                return <DoneIcon style={{ color: 'green' }} />\r\n            default: return\r\n        }\r\n    }\r\n\r\n    //A tabela é uma array de arrays. Cada row é uma array de objects, que tem field, label, action, style, etc. Cada Object é um td\r\n    let\r\n        tableHeaders = [],\r\n        arrayOfRows = [],\r\n        tableRow = []\r\n\r\n    tableData.forEach((log, i) => {\r\n        staticFields.forEach(obj => {\r\n\r\n            if (!tableHeaders.includes(obj.title)) tableHeaders.push(obj.title)\r\n            if (obj.field === 'info') {\r\n                tableRow.push({ ...obj, index: i, files: log?.files })\r\n            }\r\n            else if (obj.field === 'files') tableRow.push({ ...obj, files: log?.files })\r\n            else if (obj.action) tableRow.push({ ...obj, id: log?.id })\r\n            else tableRow.push({ ...obj, value: log[obj.field] })\r\n        })\r\n\r\n        arrayOfRows.push(tableRow)\r\n        tableRow = []\r\n    })\r\n    if (completed) {\r\n        const i = tableHeaders.indexOf('Analisar solicitação')\r\n        tableHeaders[i] = 'Concluída'\r\n    }\r\n    const tableSpan = arrayOfRows[0]?.length || ''\r\n\r\n    return (\r\n        showFiles ? <>\r\n            <ShowFiles\r\n                filesCollection={filesCollection}\r\n                close={close}\r\n                typeId={primaryKey}\r\n                filesIds={filesIds}\r\n                razaoSocial={razaoSocial}\r\n            />\r\n            <footer>\r\n                <div className='voltarDiv' style={{\r\n                    padding: '0px',\r\n                    margin: '30px 0 0 0',\r\n                    position: 'absolute',\r\n                    bottom: '1%',\r\n                    zIndex: '10'\r\n                }}>\r\n                    <Button variant='outlined' color='primary' onClick={() => setShowFiles(false)}>\r\n                        <ArrowBackIcon size='tiny' />\r\n                        <span style={{ padding: '2px 0 0 2px', marginLeft: '2px', fontSize: '.85rem' }}>Voltar</span>\r\n                    </Button>\r\n                </div>\r\n            </footer>\r\n        </>\r\n            :\r\n            <table style={tableStyle || undefined}>\r\n                <thead>\r\n                    <tr>\r\n                        <th className='tHeader'\r\n                            style={style}\r\n                            colSpan={tableSpan}>{title}</th>\r\n                    </tr>\r\n                    <tr>\r\n                        {tableHeaders.map((l, i) => <th key={i} style={style}>{l}</th>)}\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {\r\n                        arrayOfRows.map((rowArray, j) =>\r\n                            <tr key={j}>\r\n                                {\r\n                                    rowArray.map((obj, i) =>\r\n                                        <td\r\n                                            key={i}\r\n                                            style={obj?.style ? obj.style : style}\r\n                                            className={obj.type === 'link' && obj.laudoDocId ? 'link2' : 'review'}\r\n                                        >\r\n                                            {obj.type === 'date' ? dateFormat(obj.value)\r\n                                                : obj?.action ? createButton(obj.action, obj?.index, obj?.files)\r\n                                                    : obj.value\r\n                                            }\r\n                                        </td>\r\n                                    )}\r\n                            </tr>\r\n                        )}\r\n                </tbody>\r\n            </table>\r\n    )\r\n}\r\n","const solicitacaoTable = [\r\n    {\r\n        field: 'action',\r\n        title: 'Movimentação',\r\n    },\r\n    {\r\n        field: 'user',\r\n        title: 'Usuário'\r\n    },\r\n    {\r\n        field: 'createdAt',\r\n        title: 'Registro no sistema',\r\n        type: 'date'\r\n    },\r\n    {\r\n        field: 'info',\r\n        title: 'Informações adicionais',\r\n        action: 'info',\r\n        style: {textAlign: 'center'}\r\n    }   \r\n]\r\n\r\nexport default solicitacaoTable","import React from 'react'\r\nimport moment from 'moment'\r\n\r\nimport Table from '../Reusable Components/Table'\r\nimport solicitacaoTable from '../Forms/solicitacaoTable'\r\nimport ClosePopUpButton from '../Reusable Components/ClosePopUpButton'\r\n\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport Button from '@material-ui/core/Button'\r\n\r\nexport default function SolHistory({ solicitacao, showInfo, historyLog, setHistoryLog, close, vehicleDocs, empresaDocs, showFiles, setShowFiles, filesIds }) {\r\n\r\n    const\r\n        { history } = solicitacao,\r\n        date = moment(historyLog?.createdAt).format('DD/MM/YYYY, HH:mm[h]')\r\n    let docSelection = {}\r\n    if (solicitacao.hasOwnProperty('veiculoId'))\r\n        docSelection = {\r\n            primaryKey: 'veiculoId',\r\n            filesCollection: vehicleDocs\r\n        }\r\n    else\r\n        docSelection = {\r\n            primaryKey: 'empresaId',\r\n            filesCollection: empresaDocs\r\n        }\r\n\r\n    return (\r\n        <main className=\"popUpWindow\" sytle={{ width: '90%' }}>\r\n            {!historyLog ?\r\n                <Table\r\n                    {...docSelection}\r\n                    tableData={history}\r\n                    staticFields={solicitacaoTable}\r\n                    length={solicitacaoTable.length}\r\n                    title={`Solicitação nº ${solicitacao?.numero}`}\r\n                    id={solicitacao.id}\r\n                    razaoSocial={solicitacao?.empresa}\r\n                    showInfo={showInfo}\r\n                    style={{ padding: '9px 4px' }}\r\n                    tableStyle={{ marginTop: '23px' }}\r\n                    showFiles={showFiles}\r\n                    setShowFiles={setShowFiles}\r\n                    close={close}\r\n                    filesIds={filesIds}\r\n                />\r\n                :\r\n                <>\r\n                    <header className='infoLogHeader'>\r\n                        <h3>Informações adicionais</h3>\r\n                        <hr />\r\n                        <div className='floatRight'>Inserido por {historyLog?.user} {date ? 'às ' + date : ''}</div>\r\n                    </header>\r\n                    <section>\r\n\r\n                        <br /><br /><br />\r\n                        <div>{historyLog.info}</div>\r\n                    </section>\r\n                    <footer>\r\n                        <div className='voltarDiv' style={{\r\n                            padding: '0px',\r\n                            margin: '30px 0 0 0',\r\n                            position: 'absolute',\r\n                            bottom: '1%'\r\n                        }}>\r\n                            <Button variant='outlined' color='primary' onClick={() => setHistoryLog(false)}>\r\n                                <ArrowBackIcon size='tiny' />\r\n                                <span style={{ padding: '2px 0 0 2px', marginLeft: '2px', fontSize: '.85rem' }}>Voltar</span>\r\n                            </Button>\r\n                        </div>\r\n                    </footer>\r\n                </>\r\n            }\r\n            <ClosePopUpButton close={close} />\r\n        </main >\r\n    )\r\n}","import React from 'react'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n\r\nexport default function SolicitacoesTemplate({ completed, showCompleted }) {\r\n    return (\r\n        <header style={{ display:'flex', justifyContent: 'flex-end', height: '50px', paddingBotom: '10px' }}>\r\n            <FormControlLabel\r\n                style={{ marginTop: '20px' }}\r\n                control={\r\n                    <Checkbox\r\n                        checked={completed === true}\r\n                        onChange={() => showCompleted(!completed)}\r\n                        value={completed}\r\n                    />\r\n                }\r\n                label={<p style={{ color: '#2979ff', fontSize: '0.7rem', float: 'right' }}> Mostrar solicitações concluídas</p>}\r\n            />\r\n        </header>\r\n    )\r\n}\r\n","export const solicitacoesTable = [\r\n    {\r\n        field: 'numero',\r\n        title: 'Número',\r\n    },\r\n    {\r\n        field: 'subject',\r\n        title: 'Solicitação',\r\n    },\r\n    {\r\n        field: 'empresa',\r\n        title: 'Empresa',\r\n    },\r\n    {\r\n        field: 'veiculo',\r\n        title: 'Veículo',\r\n    },\r\n    {\r\n        field: 'status',\r\n        title: 'Situação',\r\n    },\r\n    {\r\n        field: 'updatedAt',\r\n        title: 'Última Atualização',\r\n        type: 'date'\r\n    },    \r\n   /*  {\r\n        field: 'history',\r\n        title: 'Ver histórico',        \r\n        action: 'showHistory'\r\n    },\r\n    {\r\n        field: 'assess',\r\n        title: '    ',\r\n        action: 'assess'\r\n    }   */\r\n]\r\n","import React from 'react'\r\nimport * as FileSaver from 'file-saver';\r\nimport * as XLSX from 'xlsx';\r\n\r\nimport MaterialTable from 'material-table';\r\n\r\nimport { solicitacoesTable } from '../Forms/solicitacoesTable'\r\n\r\nexport default function ({ tableData, title, showDetails, assessDemand, completed, showInfo }) {\r\n\r\n    let parsedData = JSON.parse(JSON.stringify(tableData))\r\n    parsedData.forEach(obj => delete obj.history)\r\n\r\n    const dataToExcel = rawData => {\r\n        const keysToDelete = ['id', 'v', 'veiculoId', 'empresaId', 'tableData', 'createdAt', 'completed']\r\n        rawData.forEach((obj, i) => {\r\n            Object.keys(obj).forEach(key => {\r\n                solicitacoesTable.forEach(({ field, title }) => {\r\n                    if (key === field) {\r\n                        obj[title] = obj[key]\r\n                        delete obj[key]\r\n                    } else if (keysToDelete.includes(key)) delete obj[key]\r\n                })\r\n            })\r\n        })\r\n        return rawData\r\n    }\r\n\r\n    return (\r\n        <div style={{ margin: '10px 0' }} className='noPrint'>\r\n            <MaterialTable\r\n                title={title}\r\n                columns={solicitacoesTable}\r\n                data={parsedData}\r\n                style={{ fontFamily: 'Segoe UI', fontSize: '14px' }}\r\n                options={{\r\n                    filtering: true,\r\n                    exportButton: true,\r\n                    exportFileName: 'Solicitações',\r\n                    exportCsv: (columns, data) => {\r\n                        const\r\n                            fileType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8',\r\n                            fileExtension = '.xlsx',\r\n                            fileName = 'Solicitações'\r\n\r\n                        const exportToXLSX = (csvData, fileName) => {\r\n                            const ws = XLSX.utils.json_to_sheet(csvData);\r\n                            const wb = { Sheets: { 'data': ws }, SheetNames: ['data'] };\r\n                            const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\r\n                            const data = new Blob([excelBuffer], { type: fileType });\r\n                            FileSaver.saveAs(data, fileName + fileExtension);\r\n                        }\r\n\r\n                        const tst = dataToExcel(data)\r\n                        exportToXLSX(tst, fileName)\r\n                    },\r\n                    actionsColumnIndex: -1,\r\n                    searchFieldStyle: { color: '#024', fontSize: '14px' },\r\n                    headerStyle: { backgroundColor: '#FAFAFC' },\r\n                    emptyRowsWhenPaging: false,\r\n                    pageSize: 10,\r\n                }}\r\n\r\n                localization={{\r\n                    header: { actions: 'Opções' },\r\n                    body: {\r\n                        emptyDataSourceMessage: 'Nenhuma solicitação aberta no momento.',\r\n                        editRow: { deleteText: 'Tem certeza que deseja apagar esse registro ?' },\r\n                        deleteTooltip: 'Apagar',\r\n                        filterRow: { filterTooltip: 'Filtrar' }\r\n                    },\r\n                    toolbar: {\r\n                        searchTooltip: 'Procurar',\r\n                        searchPlaceholder: 'Procurar',\r\n                        exportName: 'Salvar como arquivo do excel',\r\n                        exportAriaLabel: 'Exportar',\r\n                        exportTitle: 'Exportar'\r\n                    },\r\n                    pagination: {\r\n\r\n                        labelRowsSelect: 'Resultados por página',\r\n                        labelDisplayedRows: ' {from}-{to} a {count}',\r\n                        firstTooltip: 'Primeira página',\r\n                        previousTooltip: 'Página anterior',\r\n                        nextTooltip: 'Próxima Página',\r\n                        lastTooltip: 'Última Página',\r\n\r\n                    }\r\n                }}\r\n                actions={[\r\n                    {\r\n                        icon: 'history_icon',\r\n                        iconProps: { color: 'primary' },\r\n                        tooltip: 'Ver histórico',\r\n                        onClick: (event, rowData) => showDetails(rowData['id'])\r\n                    },\r\n                    rowData => ({\r\n                        icon: !completed ? 'assignment_turned_in_outlined' : rowData?.status === 'Solicitação indeferida' ? 'clear' : 'done_icon',\r\n                        iconProps: {\r\n                            className: !completed ? 'assessDemandButton' : '',\r\n                            color: rowData?.status === 'Solicitação indeferida' ? 'secondary' : completed ? 'action' : 'disabled'\r\n                        },\r\n                        tooltip: rowData?.status.match('Aguardando')\r\n                            ? 'Analisar solicitação'\r\n                            : rowData?.status.match('Pendências')\r\n                                ? 'Abrir solicitação'\r\n                                : rowData?.status === 'Solicitação indeferida' ?\r\n                                    'Indeferida'\r\n                                    : 'Concluída',\r\n                        onClick: (event, rowData) => !completed ? assessDemand(rowData['id']) : null\r\n                    })\r\n                ]}\r\n            />\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\n\r\nimport SolHistory from './SolHistory'\r\nimport SolicitacoesTemplate from './SolicitacoesTemplate'\r\nimport SolicitacoesTable from './SolicitacoesTable'\r\nimport { logRoutesConfig } from './logRoutesConfig'\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\n\r\n\r\nfunction Solicitacoes(props) {\r\n\r\n    const\r\n        { veiculos, empresas, vehicleDocs, empresaDocs } = props.redux,\r\n        [logs, setLogs] = useState([]),\r\n        [showHistory, setShowHistory] = useState(false),\r\n        [selectedLog, selectLog] = useState(),\r\n        [completed, showCompleted] = useState(false),\r\n        [historyLog, setHistoryLog] = useState(),\r\n        [alertProperties, setAlertDialog] = useState({ openAlertDialog: false, customMessage: '', customTitle: '' }),\r\n        [showFiles, setShowFiles] = useState(false),\r\n        [filesIds, setFilesId] = useState(),\r\n        { openAlertDialog, customTitle, customMessage } = alertProperties\r\n\r\n    //*********Effect adds eventListner to Esc key--> back/closes windows ************/\r\n    useEffect(() => {\r\n        function escFunction(e) {\r\n            if (e.keyCode === 27) {\r\n                if (!showFiles && !historyLog) setShowHistory()\r\n                if (showFiles) setShowFiles(false)\r\n                else if (historyLog) setHistoryLog()\r\n            }\r\n        }\r\n        document.addEventListener('keydown', escFunction)\r\n        return () => document.removeEventListener('keydown', escFunction)\r\n    }, [historyLog, showFiles])\r\n\r\n    //********Prepares the Logs ArrayofObjects from the DB to be displayed with additional and filtered fields************/\r\n    useEffect(() => {\r\n\r\n        async function getLogs() {\r\n\r\n            const originalLogs = [...props.redux.logs]\r\n\r\n            let logs = originalLogs.map(log => {\r\n                log.empresa = empresas.find(e => e.codigoEmpresa === log.empresaId)?.razaoSocial\r\n                log.veiculo = veiculos.find(v => v.veiculoId === log.veiculoId)?.placa\r\n                const { __v, ...filtered } = log\r\n                return filtered\r\n            })\r\n\r\n            if (completed) logs = logs.filter(l => l.completed === true)\r\n            else logs = logs.filter(l => l.completed === false)\r\n            setLogs(logs)\r\n        }\r\n        getLogs()\r\n\r\n    }, [veiculos, empresas, completed, props.redux.logs])\r\n\r\n    const assessDemand = async id => {\r\n\r\n        let log = logs.find(l => l.id === id)\r\n        selectLog(log)\r\n\r\n        let pathname = logRoutesConfig.find(r => log?.subject.match(r.subject))?.path\r\n        if (!pathname.match('/solicitacoes')) pathname = '/solicitacoes' + pathname\r\n        props.history.push({ pathname, state: { demand: log } })\r\n    }\r\n\r\n    const showDetails = async id => {\r\n        setHistoryLog(false)\r\n        setShowFiles(false)\r\n\r\n        const log = logs.find(l => l.id === id)\r\n        await selectLog(log)\r\n        setShowHistory(true)\r\n    }\r\n\r\n    const showInfo = index => {\r\n        if (selectedLog && selectedLog?.history) {\r\n\r\n            const historyLog = selectedLog?.history[index]\r\n\r\n            if (!historyLog?.info) return\r\n            setHistoryLog(historyLog)\r\n        }\r\n    }\r\n    const renderFiles = (ids) => {\r\n        if (ids) {\r\n            setShowFiles(true)\r\n            setFilesId(ids)\r\n        }\r\n        else setShowFiles(false)\r\n    }\r\n\r\n    const toggleAlertDialog = () => setAlertDialog({ ...alertProperties, openAlertDialog: !openAlertDialog })\r\n    const close = () => {\r\n        setShowHistory(false)\r\n        setShowFiles(false)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <SolicitacoesTemplate\r\n                completed={completed}\r\n                showCompleted={showCompleted}\r\n            />\r\n            <SolicitacoesTable\r\n                tableData={logs}\r\n                title={!completed ? 'Solicitações em andamento' : 'Solicitações concluídas'}\r\n                showDetails={showDetails}\r\n                assessDemand={assessDemand}\r\n                completed={completed}\r\n                style={{ textAlign: 'center' }}\r\n            />\r\n            {showHistory && <SolHistory\r\n                solicitacao={selectedLog}\r\n                close={close}\r\n                showInfo={showInfo}\r\n                historyLog={historyLog}\r\n                setHistoryLog={setHistoryLog}\r\n                vehicleDocs={vehicleDocs}\r\n                empresaDocs={empresaDocs}\r\n                setShowFiles={renderFiles}\r\n                showFiles={showFiles}\r\n                filesIds={filesIds}\r\n            />\r\n            }\r\n            {openAlertDialog &&\r\n                <AlertDialog open={openAlertDialog} close={toggleAlertDialog} customMessage={customMessage} customTitle={customTitle} />}\r\n        </>\r\n    )\r\n}\r\n\r\nconst collections = ['veiculos', 'empresas', 'logs', 'getFiles/vehicleDocs', 'getFiles/empresaDocs']\r\n\r\nexport default StoreHOC(collections, Solicitacoes)","const width = '240px'\r\nexport const altContratoForm = [\r\n    {\r\n        field: 'numeroAlteracao',\r\n        label: 'Número da alteração',\r\n        maxLength: 3,\r\n        pattern: '^\\\\d{1,3}$',\r\n        width\r\n    },\r\n    {\r\n        field: 'numeroRegistro',\r\n        label: 'Registro na junta comercial',\r\n        maxLength: 40,\r\n        width\r\n    },\r\n    {\r\n        field: 'numeroSei',\r\n        label: 'Número do registro SEI (se houver)',\r\n        maxLength: 30,\r\n        width\r\n    },\r\n    {\r\n        field: 'dataJunta',\r\n        label: 'Data de registro na Junta Comercial',\r\n        type: 'date',\r\n        width\r\n    }\r\n]","import React, { Fragment } from 'react'\r\nimport ShowLocalFiles from '../Reusable Components/ShowLocalFiles'\r\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\r\nimport moment from 'moment'\r\n\r\nexport default function Revisao({ data, forms, filesForm, files, demandFiles }) {\r\n\r\n    //Para cada formulário, roda o State do componente(container) e atribui a propriedade value em cada campo \r\n    forms.forEach(form => {\r\n        form.forEach(objField => {\r\n            Object.entries(data).forEach(([k, v]) => {\r\n                if (objField.field === k)\r\n                    objField.value = v\r\n            })\r\n        })\r\n    })\r\n\r\n    //Consertando a data - (campo 'Vencimento do contrato')\r\n    const i = forms[0].findIndex(el => el.field === 'vencimentoContrato')\r\n    if (i !== -1) {\r\n        let venc = forms[0][i].value\r\n        if (venc && moment(venc).isValid()) {\r\n            venc = moment(venc).format('DD/MM/YYYY')\r\n            forms[0][i].value = venc\r\n        }\r\n    }\r\n\r\n    const tablesSubtitles = ['Dados da empresa', 'Informações sobre a alteração do contrato social']\r\n\r\n    return (\r\n        <>\r\n            <section className='flex'>\r\n                <div className='divTable'>\r\n                    {\r\n                        forms.map((form, y) =>\r\n                            <Fragment key={y}>\r\n                                <table style={y === 1 ? { tableLayout: 'fixed' } : {}}>\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th className='tHeader'\r\n                                                colSpan={form.length}>{tablesSubtitles[y]}\r\n                                            </th>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            {form.map(({ label }, i) => <th key={i}>{label}</th>)}\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <tr>\r\n                                            {form.map(({ value }, k) =>\r\n                                                <td className='review' key={k}>\r\n                                                    {value}\r\n                                                </td>\r\n                                            )}\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                            </Fragment>\r\n                        )}\r\n                </div>\r\n\r\n                <h3 style={{ margin: '30px 0 0 25px' }}> <FileCopyOutlinedIcon style={{ verticalAlign: 'middle', padding: '0 0 0 8px' }} /> Documentos </h3>\r\n                {(files || demandFiles) &&\r\n                    <ShowLocalFiles\r\n                        demandFiles={demandFiles}\r\n                        form={filesForm}\r\n                        files={files}\r\n                        collection='empresaDocs'\r\n                    />\r\n                }\r\n            </section >\r\n        </>\r\n    )\r\n}","import React, { Fragment } from 'react'\r\n\r\nimport FormSubtiltle from '../Reusable Components/FormSubtiltle'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nimport { sociosForm } from '../Forms/sociosForm'\r\nimport TextInput from '../Reusable Components/TextInput'\r\nimport { errorHandler, helper } from '../Utils/checkInputErrors';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    list: {\r\n        margin: theme.spacing(1),\r\n        width: 180,\r\n        fontSize: '0.7rem',\r\n        fontColor: '#999',\r\n        textAlign: 'center',\r\n    },\r\n    iconButton: {\r\n        marginTop: '17px',\r\n        padding: '6px 0px'\r\n    }\r\n}))\r\n\r\nexport default function ({ handleInput, handleBlur, data, addSocio, enableEdit, handleEdit, removeSocio }) {\r\n\r\n    const\r\n        { selectedEmpresa, subtitles, activeStep, filteredSocios } = data,\r\n        classes = useStyles(), { iconButton, list } = classes\r\n\r\n    return (\r\n        <>\r\n            {\r\n                selectedEmpresa &&\r\n                <section className=\"flex paper\">\r\n                    <FormSubtiltle subtitle={subtitles[activeStep]} />\r\n                    <div className=\"flex center\">\r\n                        <div style={{ padding: '10px 0', width: '100%' }}>\r\n                            <TextInput\r\n                                form={sociosForm}\r\n                                data={data}\r\n                                handleBlur={handleBlur}\r\n                                handleInput={handleInput}\r\n                            />\r\n                        </div>\r\n                        <div style={{ margin: '5px 0 7px 84.58%', width: '100%' }}>\r\n                            <Button color='primary' variant='outlined' size='small' onClick={addSocio}>\r\n                                <AddIcon /> Adicionar sócio\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n            }\r\n\r\n            {\r\n                selectedEmpresa && filteredSocios.length === 0 &&\r\n                <section>\r\n                    <p>\r\n                        Nenhum sócio cadastrado para {selectedEmpresa.razaoSocial}\r\n                    </p>\r\n                </section>\r\n            }\r\n            {\r\n                filteredSocios?.length > 0 &&\r\n                <>\r\n                    <section className=\"flex center paper\">\r\n                        <p > Sócios cadastrados</p>\r\n                        {filteredSocios.map((s, i) =>\r\n                            <div key={i}>\r\n                                {sociosForm.map((e, k) =>\r\n                                    <Fragment key={k + 1000}>\r\n                                        <TextField\r\n                                            value={s[e.field] || ''}\r\n                                            name={e.field}\r\n                                            label={e.label}\r\n                                            className={list}\r\n                                            disabled={s.edit && e.field !== 'cpfSocio' ? false : true}\r\n                                            onChange={handleEdit}\r\n                                            error={s.edit ? errorHandler(s[e.field], e) : null}\r\n                                            helperText={s.edit ? helper(s[e.field], e) : null}\r\n                                            type={e?.type}\r\n                                            InputLabelProps={\r\n                                                {\r\n                                                    shrink: true,\r\n                                                    style: {\r\n                                                        fontWeight: 600,\r\n                                                        fontFamily: '\\'Segoe UI\\', Tahoma, Geneva, Verdana, sans-serif',\r\n                                                        color: '#888'\r\n                                                    }\r\n                                                }}\r\n                                            inputProps={{\r\n                                                style: {\r\n                                                    fontSize: '13px',\r\n                                                    color: s.edit === true ? '#000'\r\n                                                        : s.status === 'new' ? 'green'\r\n                                                            : s.status === 'modified' ? '#FF2500'\r\n                                                                : s.status === 'deleted' ? 'red'\r\n                                                                    : '#888',\r\n                                                    textDecoration: s.status === 'deleted' && !s.edit ? 'line-through' : ''\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                    </Fragment>\r\n                                )}\r\n                                <Button component='span' className={iconButton} title='editar' onClick={() => enableEdit(i)}>\r\n                                    <EditIcon />\r\n                                </Button>\r\n\r\n                                <Button className={iconButton}\r\n                                    color={s.status === 'deleted' ? 'primary' : 'secondary'}\r\n                                    title={s.status === 'deleted' ? 'Desfazer exclusão' : 'Remover'}\r\n                                    onClick={() => removeSocio(i)}>\r\n                                    {s.status === 'deleted' ? <i className='material-icons'>undo</i> : <DeleteIcon />}\r\n                                </Button>\r\n                            </div>\r\n                        )}\r\n                    </section>\r\n                </>\r\n            }\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport { altContratoForm } from '../Forms/altContratoForm'\r\nimport { empresasForm } from '../Forms/empresasForm'\r\nimport EmpresaReview from './EmpresaReview'\r\n\r\nimport Crumbs from '../Reusable Components/Crumbs'\r\nimport FormSubtiltle from '../Reusable Components/FormSubtiltle'\r\nimport SelectEmpresa from '../Reusable Components/SelectEmpresa'\r\nimport CustomStepper from '../Reusable Components/Stepper'\r\nimport TextInput from '../Reusable Components/TextInput'\r\nimport StepperButtons from '../Reusable Components/StepperButtons'\r\nimport DragAndDrop from '../Reusable Components/DragAndDrop'\r\nimport AltSociosTemplate from './AltSociosTemplate'\r\nimport { empresaFiles } from '../Forms/empresaFiles'\r\n\r\n\r\nconst AltContratoTemplate = (\r\n    { empresas, data, setActiveStep, enableEdit, handleEdit, addSocio, removeSocio, handleInput, handleSubmit, handleFiles, removeFile,\r\n        setShowPendencias }) => {\r\n\r\n    const\r\n        { selectedEmpresa, demand, demandFiles, activeStep, stepTitles, subtitles, dropDisplay, altContratoDoc, fileToRemove, info, showPendencias } = data,\r\n        headerTitle = `Alteração de contrato social - ${selectedEmpresa?.razaoSocial}`,\r\n        forms = [empresasForm, altContratoForm]\r\n\r\n    return (\r\n        <main>\r\n            <header>\r\n                <Crumbs links={['Empresas', '/empresas']} text='Alteração de dados e contrato social' />\r\n                {/*--------------------- Steppers ------------------------------*/}\r\n                <section>\r\n                    <CustomStepper\r\n                        activeStep={activeStep}\r\n                        steps={stepTitles}\r\n                        setActiveStep={setActiveStep}\r\n                    />\r\n                </section>\r\n                <div className=\"flex center\">\r\n                    <SelectEmpresa\r\n                        empresas={empresas}\r\n                        data={data}\r\n                        headerTitle={headerTitle}\r\n                        handleInput={handleInput}\r\n                    />\r\n                </div>\r\n            </header>\r\n            {\r\n                //   selectedEmpresa?.cnpj &&\r\n                selectedEmpresa &&\r\n                <>\r\n                    {/*--------------------- Form / inputs -------------------------*/}\r\n                    {\r\n                        activeStep !== 2 ?\r\n                            <section className=\"flex paper\">\r\n                                <FormSubtiltle subtitle={subtitles[activeStep]} />\r\n                                {\r\n                                    activeStep < 2\r\n                                        ?\r\n                                        <>\r\n                                            <TextInput\r\n                                                form={forms[activeStep]}\r\n                                                data={data}\r\n                                                handleInput={handleInput}\r\n                                                style={{ width: '100%' }}\r\n                                            />\r\n                                            {\r\n                                                activeStep === 1 &&\r\n                                                <div className='flex center' style={{ width: '100%' }}>\r\n                                                    <DragAndDrop\r\n                                                        name='altContratoDoc'\r\n                                                        style={{ width: '440px' }}\r\n                                                        dropDisplay={dropDisplay}\r\n                                                        formData={altContratoDoc}\r\n                                                        handleFiles={handleFiles}\r\n                                                        demandFiles={demandFiles}\r\n                                                        removeFile={removeFile}\r\n                                                        fileToRemove={fileToRemove}\r\n                                                    />\r\n                                                </div>\r\n                                            }\r\n                                        </>\r\n                                        :\r\n                                        <EmpresaReview\r\n                                            data={data}\r\n                                            forms={forms}\r\n                                            files={altContratoDoc}\r\n                                            demandFiles={demandFiles}\r\n                                            filesForm={empresaFiles}\r\n                                        />\r\n                                }\r\n                            </section>\r\n                            :\r\n                            <section>\r\n                                <AltSociosTemplate\r\n                                    data={data}\r\n                                    handleInput={handleInput}\r\n                                    addSocio={addSocio}\r\n                                    removeSocio={removeSocio}\r\n                                    handleFiles={handleFiles}\r\n                                    enableEdit={enableEdit}\r\n                                    handleEdit={handleEdit}\r\n                                />\r\n                            </section>\r\n                    }\r\n                    <footer>\r\n                        <StepperButtons\r\n                            demand={demand}\r\n                            declineButtonLabel='Indeferir'\r\n                            setShowPendencias={setShowPendencias}\r\n                            showPendencias={showPendencias}\r\n                            info={info}\r\n                            activeStep={activeStep}\r\n                            lastStep={stepTitles.length - 1}\r\n                            setActiveStep={setActiveStep}\r\n                            handleInput={handleInput}\r\n                            handleSubmit={handleSubmit}\r\n                        />\r\n                    </footer>\r\n                </>\r\n            }\r\n        </main>\r\n    )\r\n}\r\n\r\nexport default AltContratoTemplate","import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport humps from 'humps'\r\n\r\nimport StoreHOC from '../Store/StoreHOC'\r\nimport AltContratoTemplate from './AltContratoTemplate'\r\nimport ReactToast from '../Reusable Components/ReactToast'\r\nimport { logGenerator } from '../Utils/logGenerator'\r\nimport { removeFile as globalRemoveFile, sizeExceedsLimit } from '../Utils/handleFiles'\r\nimport valueParser from '../Utils/valueParser'\r\n\r\nimport { altContratoForm } from '../Forms/altContratoForm'\r\nimport { empresasForm } from '../Forms/empresasForm'\r\nimport { sociosForm } from '../Forms/sociosForm'\r\nimport AlertDialog from '../Reusable Components/AlertDialog'\r\n\r\nconst AltContrato = props => {\r\n\r\n    const\r\n        { empresas, socios } = props.redux,\r\n        [state, setState] = useState({\r\n            razaoSocial: '',\r\n            activeStep: 0,\r\n            stepTitles: ['Alterar dados da empresa', 'Informações sobre alteração do contrato social', 'Informações sobre sócios', 'Revisão'],\r\n            subtitles: ['Utilize os campos abaixo caso deseje editar os dados da empresa',\r\n                'Informe as alterações no contrato social e anexe uma cópia do documento',\r\n                'Adicione ou altere sócios e suas respectivas participações.',\r\n                'Revise os dados informados.'\r\n            ],\r\n            dropDisplay: 'Clique ou arraste para anexar a cópia da alteração do contrato social ',\r\n            demand: undefined,\r\n            confirmToast: false,\r\n            filteredSocios: [],\r\n            showPendencias: false,\r\n            openAlertDialog: false\r\n            //selectedEmpresa: empresas[0],\r\n            //filteredSocios: [socios[0], socios[1]],\r\n        })\r\n\r\n    //ComponentDidMount para carregar demand, se houver\r\n    useEffect(() => {\r\n        const demand = props?.location?.state?.demand\r\n\r\n        if (demand && demand.history[0]) {\r\n            const\r\n                { empresaDocs } = props.redux,\r\n                { altContrato, socioUpdates, files } = demand?.history[0],\r\n                selectedEmpresa = empresas.find(e => e.empresaId === demand.codigoEmpresa),\r\n                altContratoFields = {}\r\n\r\n            let\r\n                filteredSocios = JSON.parse(JSON.stringify(socios.filter(s => s.codigoEmpresa === selectedEmpresa.codigoEmpresa))),\r\n                demandFiles\r\n\r\n            if (altContrato)\r\n                altContratoForm.forEach(({ field }) => altContratoFields[field] = altContrato[field])\r\n\r\n            if (socioUpdates[0]) {\r\n                const newSocios = []\r\n                filteredSocios.forEach(fs => {\r\n                    socioUpdates.forEach(us => {\r\n                        if (fs.socioId === us?.socioId) {\r\n                            Object.keys(us).forEach(k => {\r\n                                fs[k] = us[k]\r\n                            })\r\n                        }\r\n                        if (us.status === 'new' && !newSocios.includes(us))\r\n                            newSocios.push(us)\r\n                    })\r\n                })\r\n                filteredSocios = filteredSocios.concat(newSocios)\r\n            }\r\n            if (files)\r\n                demandFiles = empresaDocs.filter(d => files.includes(d.id))\r\n\r\n            setState({ ...state, ...altContrato, ...selectedEmpresa, selectedEmpresa, demand, demandFiles, filteredSocios, activeStep: 3 })\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n        if (state.selectedEmpresa) {\r\n\r\n            const codigoEmpresa = state.selectedEmpresa.codigoEmpresa,\r\n                originalSocios = JSON.parse(JSON.stringify(socios.filter(s => s.codigoEmpresa === codigoEmpresa))) || []\r\n\r\n            setState({ ...state, originalSocios })\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [state.selectedEmpresa])\r\n\r\n    const setActiveStep = action => {\r\n\r\n        let activeStep = state.activeStep\r\n        if (action === 'next') activeStep++\r\n        if (action === 'back') activeStep--\r\n        if (action === 'reset') activeStep = 0\r\n        setState({ ...state, activeStep })\r\n\r\n        if (activeStep === 3)\r\n            checkSocioUpdates()\r\n    }\r\n\r\n    const handleInput = e => {\r\n        const { name, value } = e.target\r\n        let\r\n            selectedEmpresa = {},\r\n            filteredSocios\r\n\r\n        if (name === 'razaoSocial') {\r\n            selectedEmpresa = empresas.find(e => e.razaoSocial === value) || {}\r\n            let venc = selectedEmpresa?.vencimentoContrato\r\n\r\n            if (venc && venc.length > 0)\r\n                selectedEmpresa.vencimentoContrato = venc.substr(0, 10)\r\n\r\n            if (selectedEmpresa?.codigoEmpresa)\r\n                filteredSocios = JSON.parse(JSON.stringify(socios.filter(s => s.codigoEmpresa === selectedEmpresa.codigoEmpresa)))\r\n\r\n            setState({ ...state, ...selectedEmpresa, selectedEmpresa, filteredSocios, [name]: value })\r\n        }\r\n        else {\r\n            const parsedValue = valueParser(name, value)\r\n            setState({ ...state, [name]: parsedValue })\r\n        }\r\n    }\r\n\r\n    const enableEdit = index => {\r\n\r\n        let editSocio = state.filteredSocios\r\n        if (editSocio[index].edit === true) {\r\n            editSocio[index].edit = false\r\n            checkSocioUpdates()\r\n        }\r\n        else {\r\n            editSocio.forEach(s => s.edit = false)\r\n            editSocio[index].edit = true\r\n        }\r\n        setState({ ...state, filteredSocios: editSocio })\r\n    }\r\n\r\n    const handleEdit = e => {\r\n        const\r\n            { name } = e.target,\r\n            { filteredSocios } = state\r\n\r\n        let { value } = e.target\r\n\r\n        if (name === 'share')\r\n            value = value.replace(',', '.')\r\n\r\n        let editSocio = filteredSocios.find(s => s.edit === true)\r\n        const index = filteredSocios.indexOf(editSocio)\r\n\r\n        editSocio[name] = value\r\n\r\n        const fs = filteredSocios\r\n        fs[index] = editSocio\r\n\r\n        setState({ ...state, filteredSocios: fs })\r\n    }\r\n\r\n    const addSocio = async () => {\r\n        let socios = state.filteredSocios,\r\n            sObject = {},\r\n            invalid = 0,\r\n            totalShare = 0\r\n\r\n        sociosForm.forEach(obj => {\r\n            if (state[obj.field] === '' || state[obj.field] === undefined) {\r\n                invalid += 1\r\n            }\r\n        })\r\n\r\n        if (invalid === 100) {\r\n            setState({ ...state, alertType: 'fieldsMissing', openAlertDialog: true })\r\n            return null\r\n        }\r\n        else {\r\n            sociosForm.forEach(obj => {\r\n                Object.assign(sObject, { [obj.field]: state[obj.field] })\r\n            })\r\n            sObject.status = 'new'\r\n            socios.push(sObject)\r\n            socios.sort((a, b) => a.nomeSocio.localeCompare(b.nomeSocio))\r\n\r\n            //Verifica se a soma das participações passou 100%\r\n            socios.forEach(s => {\r\n                totalShare += Number(s.share)\r\n            })\r\n            if (totalShare > 100) {\r\n                socios.pop()\r\n                await setState({ ...state, alertType: 'overShared', openAlertDialog: true })\r\n                return\r\n            }\r\n\r\n            const clearForm = {}\r\n            sociosForm.forEach(obj => clearForm[obj.field] = '')\r\n\r\n            await setState({ ...state, ...clearForm, filteredSocios: socios, totalShare })\r\n            setTimeout(() => {\r\n                console.log(state)\r\n                document.getElementsByName('nomeSocio')[0].focus()\r\n            }, 200);\r\n        }\r\n    }\r\n\r\n    const removeSocio = index => {\r\n        const\r\n            { filteredSocios } = state,\r\n            socioToRemove = filteredSocios[index]\r\n\r\n        if (socioToRemove?.status === 'new') {\r\n            filteredSocios.splice(index, 1)\r\n            setState({ ...state, filteredSocios })\r\n        }\r\n        else {\r\n            if (socioToRemove.status && socioToRemove.status !== 'deleted') {\r\n                socioToRemove.originalStatus = socioToRemove.status\r\n                socioToRemove.status = 'deleted'\r\n            }\r\n            else if (socioToRemove?.status === 'deleted')\r\n                socioToRemove.status = socioToRemove?.originalStatus\r\n            else\r\n                socioToRemove.status = 'deleted'\r\n\r\n            setState({ ...state, filteredSocios })\r\n        }\r\n\r\n\r\n    }\r\n\r\n    const handleSubmit = async approved => {\r\n        const\r\n            { demand, altContratoDoc } = state,\r\n            altContrato = createRequestObj(altContratoForm),\r\n            altEmpresa = createRequestObj(empresasForm),\r\n            empresaUpdates = updateEmpresa(altEmpresa),\r\n            socioUpdates = checkSocioUpdates(),\r\n            log = createLog({ demand, altContrato, socioUpdates, approved })\r\n\r\n        let\r\n            socioIds = [],\r\n            toastMsg = 'Solicitação de alteração contratual enviada.'\r\n        //Se não houver nenhuma altreração, alerta e retorna\r\n        if (!demand && !altContrato && !empresaUpdates && !altContratoDoc && !socioUpdates && !socioUpdates[0]) {\r\n            alert('Nenhuma modificação registrada!')\r\n            return\r\n        }\r\n        //A alteração de dados da empresa não precisa de aprovação. Se for só isso, não gera demanda\r\n        if (empresaUpdates) {\r\n            axios.put('/api/editTableRow', empresaUpdates)\r\n            toastMsg = 'Dados da empresa alterados com sucesso.'\r\n            if (!socioUpdates[0] && !altContrato && !altContratoDoc) {\r\n                toast('Dados da empresa atualizados!')\r\n                setTimeout(() => { resetState() }, 750);\r\n                return\r\n            }\r\n        }\r\n        //Ao aprovar a solicitação(demanda)\r\n        if (demand && approved) {\r\n            //Registrar as alterações contratuais\r\n            if (altContrato)\r\n                axios.post('/api/altContrato', altContrato)\r\n            //Atualizar os sócios: existentes, novos e a excluir\r\n            if (socioUpdates) {\r\n                const\r\n                    { newSocios, oldSocios, deletedSocios } = socioUpdates,\r\n                    requestInfo = {\r\n                        table: 'socios',\r\n                        tablePK: 'socio_id'\r\n                    }\r\n                if (newSocios[0])\r\n                    await axios.post('/api/cadSocios', { socios: newSocios })\r\n                        .then(async r => {\r\n                            const ids = r?.data.map(s => s.socio_id)\r\n                            if (ids[0])\r\n                                socioIds = socioIds.concat(ids)\r\n                        })\r\n                if (oldSocios[0]) {\r\n                    await axios.put('/api/editSocios', { requestArray: oldSocios, ...requestInfo })\r\n                    const ids = oldSocios.map(s => s.socio_id)\r\n                    socioIds = socioIds.concat(ids)\r\n                    console.log(socioIds, oldSocios, ids)\r\n                }\r\n                if (deletedSocios[0])\r\n                    deletedSocios.forEach(s => {\r\n                        axios.delete(`/api/delete?table=socios&tablePK=socio_id&id=${s.socio_id}`)\r\n                    })\r\n                toastMsg = 'Alteração de contrato social aprovada.'\r\n                console.log(socioIds)\r\n            }\r\n        }\r\n        if (approved === false)\r\n            toastMsg = 'Solicitação indeferida.'\r\n\r\n        if (socioIds[0])\r\n            log.metadata.socios = socioIds\r\n        console.log(socioIds)\r\n        logGenerator(log)                               //Generate the demand\r\n            .then(r => {\r\n                console.log(r?.data)\r\n            })\r\n            .catch(err => console.log(err))\r\n\r\n        if (demand)\r\n            setTimeout(() => {\r\n                props.history.push('/solicitacoes')\r\n            }, 1500);\r\n        else\r\n            setTimeout(() => { resetState() }, 900);\r\n        toast(toastMsg)\r\n    }\r\n\r\n    const checkSocioUpdates = () => {\r\n        const\r\n            { originalSocios, filteredSocios, selectedEmpresa, demand } = state,\r\n            { codigoEmpresa } = selectedEmpresa\r\n        let\r\n            socioUpdates = [],\r\n            altObj = {}\r\n\r\n        //verifica se houve alteração em sócios existentes e as insere em oldSocios ou se há novos sócios, inseridos em newSocios\r\n        filteredSocios.forEach(m => {\r\n            delete m.edit\r\n            if (m.socioId) {\r\n                originalSocios.forEach(async s => {\r\n                    if (m.socioId === s.socioId) {\r\n                        Object.keys(m).forEach(key => {\r\n                            if (m[key] && m[key] !== '' && (m[key] !== s[key] || key === 'socioId')) {\r\n                                Object.assign(altObj, { [key]: m[key] })\r\n                            }\r\n                        })\r\n                        //if marked as deleted, preserve status to create delete request, else mark as modified.                        \r\n                        if (Object.keys(altObj).length > 1) {\r\n                            if (altObj?.status !== 'deleted') {\r\n                                m.status = 'modified'\r\n                                altObj.status = 'modified'\r\n                            }\r\n                            //Se os únicos campos forem socioId e status, não inserir em oldSocios. A não ser que seja deleted, aí registra p apagar depois\r\n                            if (altObj.socioId && altObj.status && (altObj?.status === 'deleted' || Object.keys(altObj).length > 2))\r\n                                socioUpdates.push(altObj)\r\n                            else {\r\n                                m.status = undefined\r\n                                altObj.status = undefined\r\n                            }\r\n                        }\r\n                        altObj = {}\r\n                    }\r\n                })\r\n            }\r\n            //Se o(s) sócio(s) não possuem ID, se trata de um novo sócio, assim, todo o objeto é inserido no socioUpdates\r\n            else {\r\n                m.codigoEmpresa = codigoEmpresa\r\n                socioUpdates.push(m)\r\n            }\r\n        })\r\n        if (!demand)\r\n            return socioUpdates\r\n\r\n        //Separa os sócios modificados em novos, alterados e excluídos para que cada o respectivo request seja feito\r\n        if (socioUpdates[0]) {\r\n            socioUpdates = humps.decamelizeKeys(socioUpdates)\r\n            const\r\n                newSocios = socioUpdates.filter(s => s.status === 'new'),\r\n                oldSocios = socioUpdates.filter(s => s.status === 'modified'),\r\n                deletedSocios = socioUpdates.filter(s => s.status === 'deleted')\r\n\r\n            //Apaga a prop 'status' de cada sócio antes do request\r\n            newSocios.forEach(s => delete s.status)\r\n            oldSocios.forEach(s => delete s.status)\r\n            deletedSocios.forEach(s => delete s.status)\r\n\r\n            return { newSocios, oldSocios, deletedSocios }\r\n        }\r\n        else return null\r\n    }\r\n\r\n    const updateEmpresa = altEmpresa => {\r\n        const\r\n            { selectedEmpresa } = state,\r\n            { codigoEmpresa } = selectedEmpresa\r\n\r\n        //Apaga propriedades === null ou inexistentes\r\n        for (let prop in selectedEmpresa) {\r\n            if (altEmpresa[prop] && altEmpresa[prop] === selectedEmpresa[prop])\r\n                delete altEmpresa[prop]\r\n        }\r\n        //Prepara o objeto e envia o request\r\n        const shouldUpdate = Object.keys(altEmpresa).length > 0\r\n        if (shouldUpdate) {\r\n            const requestObj = {\r\n                id: codigoEmpresa,\r\n                table: 'empresas',\r\n                tablePK: 'codigo_empresa',\r\n                updates: humps.decamelizeKeys(altEmpresa)\r\n            }\r\n            return requestObj\r\n        }\r\n    }\r\n\r\n    const createLog = ({ demand, altContrato, approved, socioUpdates }) => {\r\n        const\r\n            { selectedEmpresa, info, altContratoDoc, numeroAlteracao } = state,\r\n            { codigoEmpresa } = selectedEmpresa\r\n        let log\r\n\r\n        //Se não houver demanda, criar demanda/log\r\n        if (!demand) {\r\n            log = {\r\n                history: {\r\n                    altContrato,\r\n                    info,\r\n                    socioUpdates\r\n                },\r\n                empresaId: codigoEmpresa,\r\n                historyLength: 0,\r\n                approved\r\n            }\r\n            if (approved === false)\r\n                log.declined = true\r\n\r\n            if (altContratoDoc) {\r\n                log.history.files = altContratoDoc\r\n                log.metadata = {\r\n                    fieldName: 'altContratoDoc',\r\n                    empresaId: codigoEmpresa,\r\n                    numeroAlteracao\r\n                }\r\n            }\r\n        }\r\n        //Se houver demand, mas for rejeitada, indeferir demanda\r\n        if (demand && approved === false) {\r\n            const { id, empresaId } = demand\r\n            log = {\r\n                id,\r\n                empresaId,\r\n                history: {\r\n                    info\r\n                },\r\n                declined: true\r\n            }\r\n        }\r\n        //Se aprovado\r\n        if (demand && approved === true) {\r\n            const\r\n                { id } = demand,\r\n                { demandFiles, numeroAlteracao, numeroRegistro } = state\r\n            log = {\r\n                id,\r\n                demandFiles,\r\n                history: {},\r\n                metadata: {\r\n                    numeroAlteracao,\r\n                    numeroRegistro,\r\n                },\r\n                approved\r\n            }\r\n        }\r\n        return log\r\n    }\r\n\r\n    //Prepara os objetos para o request\r\n    const createRequestObj = form => {\r\n\r\n        const { selectedEmpresa } = state\r\n        let returnObj = { codigoEmpresa: selectedEmpresa?.codigoEmpresa }\r\n\r\n        form.forEach(({ field }) => {\r\n            for (let prop in state) {\r\n                if (prop === field && state[prop])\r\n                    Object.assign(returnObj, { [prop]: state[prop] })\r\n            }\r\n        })\r\n\r\n        if (Object.keys(returnObj).length > 1)\r\n            return returnObj\r\n        else\r\n            return null\r\n    }\r\n\r\n    const handleFiles = files => {\r\n        //limit file Size\r\n        if (sizeExceedsLimit(files)) return\r\n\r\n        if (files && files[0]) {\r\n            const altContratoDoc = new FormData()\r\n            altContratoDoc.append('altContratoDoc', files[0])\r\n            setState({ ...state, altContratoDoc, fileToRemove: null })\r\n        }\r\n    }\r\n\r\n    const removeFile = async (name) => {\r\n        const\r\n            { altContratoDoc } = state,\r\n            newState = globalRemoveFile(name, altContratoDoc)\r\n\r\n        setState({ ...state, ...newState })\r\n    }\r\n\r\n    const resetState = () => {\r\n        const\r\n            resetForms = {},\r\n            forms = [altContratoForm, sociosForm]\r\n\r\n        forms.forEach(form => {\r\n            form.forEach(({ field }) => {\r\n                Object.assign(resetForms, { [field]: '' })\r\n            })\r\n        })\r\n\r\n        setState({\r\n\r\n            ...state, ...resetForms, activeStep: 0, razaoSocial: '', selectedEmpresa: undefined, filteredSocios: [],\r\n            altContratoDoc: undefined, fileToRemove: undefined\r\n        })\r\n    }\r\n    const\r\n        toast = toastMsg => setState({ ...state, confirmToast: !state.confirmToast, toastMsg }),\r\n        setShowPendencias = () => setState({ ...state, showPendencias: !state.showPendencias }),\r\n        closeAlert = () => setState({ ...state, openAlertDialog: !state.openAlertDialog }),\r\n        { filteredSocios, confirmToast, toastMsg, openAlertDialog, alertType, customMessage, customTitle } = state\r\n\r\n    return (\r\n        <>\r\n            <AltContratoTemplate\r\n                empresas={empresas}\r\n                data={state}\r\n                setActiveStep={setActiveStep}\r\n                handleInput={handleInput}\r\n                handleSubmit={handleSubmit}\r\n                handleFiles={handleFiles}\r\n                removeFile={removeFile}\r\n                socios={filteredSocios}\r\n                addSocio={addSocio}\r\n                removeSocio={removeSocio}\r\n                enableEdit={enableEdit}\r\n                handleEdit={handleEdit}\r\n                setShowPendencias={setShowPendencias}\r\n            />\r\n            <ReactToast open={confirmToast} close={toast} msg={toastMsg} />\r\n            {\r\n                openAlertDialog &&\r\n                <AlertDialog open={openAlertDialog} alertType={alertType} close={closeAlert} customMessage={customMessage} customTitle={customTitle} />\r\n            }\r\n        </>\r\n    )\r\n}\r\nconst collections = ['empresas', 'socios', 'getFiles/empresaDocs']\r\nexport default (StoreHOC(collections, AltContrato))","import React from 'react'\r\nimport { Switch, Route } from 'react-router-dom'\r\nimport HomeTemplate from './HomeTemplate'\r\n\r\nimport VeiculosHome from './Veiculos/VeiculosHome'\r\nimport CadVeiculos from './Veiculos/CadVeiculo'\r\nimport AltDados from './Veiculos/AltDados'\r\nimport Seguros from './Veiculos/Seguros'\r\nimport Laudos from './Veiculos/Laudos'\r\nimport BaixaVeiculo from './Veiculos/BaixaVeiculo'\r\nimport Config from './Veiculos/Config'\r\n\r\nimport Consultas from './Consultas/ConsultasContainer'\r\nimport Empresas from './Empresas/EmpresasContainer'\r\nimport EmpresasHome from './Empresas/EmpresasHome'\r\nimport Procuradores from './Empresas/Procuradores'\r\nimport Socios from './Empresas/Socios'\r\nimport Relatorios from './Relatorios/Relatorios'\r\nimport Solicitacoes from './Solicitacoes/Solicitacoes'\r\n//import UnderConstruction from './UnderConstruction'\r\nimport PdfTest from './Veiculos/Certificate'\r\nimport AltContrato from './Empresas/AltContrato'\r\n\r\nconst Routes = () => {\r\n    return (\r\n        <Switch>\r\n            <Route exact path='/' component={HomeTemplate} />\r\n            <Route path='/veiculos' exact component={VeiculosHome} />\r\n            <Route path='/veiculos/cadastro' exact component={CadVeiculos} />\r\n            <Route path='/veiculos/altDados' exact component={AltDados} />\r\n            <Route path='/veiculos/seguros' exact component={Seguros} />\r\n            <Route path='/veiculos/laudos' exact component={Laudos} />\r\n            <Route path='/veiculos/baixaVeiculo' exact component={BaixaVeiculo} />\r\n            <Route path='/veiculos/config' exact component={Config} />\r\n            <Route path='/consultas' component={Consultas} />\r\n            <Route path='/empresas' exact component={EmpresasHome} />\r\n            <Route path='/altContrato' exact component={AltContrato} />\r\n            <Route path='/empresas/cadastro' component={Empresas} />\r\n            <Route path='/empresas/socios' component={Socios} />\r\n            <Route path='/empresas/procuradores' component={Procuradores} />\r\n            <Route path='/relatorios' component={Relatorios} />\r\n            <Route path='/crv' component={PdfTest} />\r\n            <Route path='/solicitacoes' exact component={Solicitacoes} />\r\n            <Route path='/solicitacoes/cadastro' exact component={CadVeiculos} />\r\n            <Route path='/solicitacoes/altDados' exact component={AltDados} />\r\n            <Route path='/solicitacoes/seguros' exact component={Seguros} />\r\n            <Route path='/solicitacoes/baixaVeiculo' exact component={BaixaVeiculo} />\r\n            <Route path='/solicitacoes/laudos' exact component={Laudos} />\r\n            <Route path='/solicitacoes/altContrato' exact component={AltContrato} />\r\n            <Route path='/solicitacoes/socios' exact component={Socios} />\r\n            <Route path='/solicitacoes/procuradores' exact component={Procuradores} />\r\n\r\n\r\n            {/* <Route path='/faleConosco' component={UnderConstruction} /> */}\r\n        </Switch>\r\n    )\r\n}\r\n\r\nexport default Routes","import React from 'react';\r\nimport { BrowserRouter } from 'react-router-dom'\r\n\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport promise from 'redux-promise';\r\nimport multi from 'redux-multi';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './rootReducer'\r\n\r\nimport { Header, Footer } from './Layouts'\r\nimport Container from '@material-ui/core/Container';\r\nimport Routes from './Routes'\r\nimport './Layouts/stylez.css'\r\n\r\nfunction App() {\r\n\r\n  const store = applyMiddleware(promise, multi, thunk)(createStore)\r\n\r\n  return (\r\n    <Provider store={store(rootReducer)}>\r\n      <div className='app'>\r\n        <Container maxWidth=\"lg\" style={{ minHeight: '100vh' }}>\r\n          <BrowserRouter>\r\n            <Header />\r\n            <Routes />\r\n          </BrowserRouter>\r\n          <Footer />\r\n        </Container>\r\n      </div>\r\n    </Provider>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App.jsx';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}