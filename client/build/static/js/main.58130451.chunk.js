(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{161:function(e,a,t){e.exports={jumbotron:"veiculosHome_jumbotron__3NqZq",card:"veiculosHome_card__dn84Q",card__container:"veiculosHome_card__container__3mnvT",card__image:"veiculosHome_card__image___Ethh",card__text:"veiculosHome_card__text__2qLQG"}},189:function(e,a,t){e.exports={container:"avisos_container__32-XQ",tableContainer:"avisos_tableContainer__1vxH2","MuiIconButton-colorSecondary":"avisos_MuiIconButton-colorSecondary__10neS",avisosHeader:"avisos_avisosHeader__CGb6M",avisosHeaderAdmin:"avisos_avisosHeaderAdmin__2DIUq"}},206:function(e,a,t){},325:function(e,a,t){e.exports={termoCiencia__div:"compartilhamento_termoCiencia__div__17vbm",termoCiencia__text:"compartilhamento_termoCiencia__text__1d2i0"}},402:function(e,a,t){},428:function(e,a){},429:function(e,a,t){},430:function(e,a,t){},485:function(e,a,t){e.exports=t(715)},537:function(e,a){},540:function(e,a,t){},542:function(e,a,t){},543:function(e,a,t){},544:function(e,a,t){},545:function(e,a,t){},602:function(e,a){},603:function(e,a){},604:function(e,a,t){},605:function(e,a,t){},607:function(e,a,t){},608:function(e,a,t){},609:function(e,a,t){},610:function(e,a,t){},611:function(e,a,t){},714:function(e,a,t){},715:function(e,a,t){"use strict";t.r(a);var o=t(0),r=t.n(o),n=t(25),i=t.n(n),l=t(44),c=t(39),s=t(460),d=t.n(s),u=t(461),m=t.n(u),p=t(462),f=t(8),v=t(20),h=t(2),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,o=a.payload;switch(t){case"GET_DATA":return Object(h.a)(Object(h.a)({},e),o);case"INSERT_DATA":var r=o.collection,n=o.data;if(e[r]&&n){var i=Object(v.a)(e[r]);return n.forEach((function(e){r.match("logs")?i.push(e):i.unshift(e)})),Object(h.a)(Object(h.a)({},e),{},Object(f.a)({},r,i))}return e;case"UPDATE_DATA":var l=o.collection,c=o.data,s=o.id;if(e[l]&&c){var d=e[l].map((function(e){return c.forEach((function(a){e[s]!==a[s]&&e[s].toString()!==a[s].toString()||(e=a)})),e}));return Object(h.a)(Object(h.a)({},e),{},Object(f.a)({},l,d))}return e;case"UPDATE_COLLECTION":var u=o.data,m=o.collection;return Object(h.a)(Object(h.a)({},e),{},Object(f.a)({},m,u));case"REMOVE_FROM_INSURANCE":var p=o.apolice,b=o.placaIndex,g=o.vehicleIndex;if(e.seguros){var E=Object(v.a)(e.seguros),x=E.find((function(e){return e.apolice===p})),S=E.findIndex((function(e){return e.apolice===p}));return x.placas.splice(b,1),x.veiculos.splice(g,1),E[S]=x,Object(h.a)(Object(h.a)({},e),{},{seguros:E})}return e;case"DELETE_ONE":var O=o.tablePK,y=o.collection;if(e[y]){var j=o.id,w=Object(v.a)(e[y]);if(!j)return;y.match("Docs")||"users"===y||"avisos"===y||(j=Number(j)),"laudos"===y&&(j=j.toString()),console.log("\ud83d\ude80 ~ file: dataReducer.js ~ line 83 ~ dataReducer ~ updatedData",{id:j,updatedData:w});var C=w.find((function(e){return e[O]===j})),k=w.findIndex((function(e){return e[O]===C[O]}));if(-1===k)return;return w.splice(k,1),Object(h.a)(Object(h.a)({},e),{},Object(f.a)({},y,w))}return e;case"SET_COLOR":return Object(h.a)(Object(h.a)({},e),{},{setColor:a.payload});case"LOADING":return Object(h.a)(Object(h.a)({},e),{},{loading:a.payload});default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,o=a.payload;switch(t){case"LOG_USER":return Object(h.a)(Object(h.a)({},e),o);case"LOG_USER_OUT":return Object(h.a)(Object(h.a)({},e),{},{user:o});default:return e}},E=Object(l.c)({data:b,user:g}),x=function(e,a){return"LOG_USER_OUT"===a.type&&(e={data:{},user:{}}),E(e,a)},S=t(58),O=t(40),y=t(7),j=t.n(y),w=t(10),C=t(48),k=t(49),D=t(51),N=t(50),I=t(24),A=t.n(I),P=t(13),T=t.n(P),F=t(38),z=function(e,a,t){var o=[],r=[];return e.map((function(e){(null===e||void 0===e?void 0:e.equipamentosId)||(e.equipamentosId=[]),(null===e||void 0===e?void 0:e.acessibilidadeId)||(e.acessibilidadeId=[]),e.equipamentosId.forEach((function(e){a.forEach((function(a){var t=a.id,r=a.item;t===e&&o.push(r)}))})),e.acessibilidadeId.forEach((function(e){t.forEach((function(a){var t=a.id,o=a.item;t===e&&r.push(o)}))}));var n=Object(h.a)(Object(h.a)({},e),{},{equipamentos:o,acessibilidade:r});return o=[],r=[],n}))},M=function(e,a){var t=[];return a.forEach((function(a){e.forEach((function(e){var o=e.id,r=e.item;a===o&&t.push(r)}))})),t},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(){var a=Object(w.a)(j.a.mark((function a(t,o){var r,n,i,l,c,s,d,u,m,p,b,g,E,x,S,O;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=[],n={},!(e.length>0)){a.next=5;break}return e.forEach((function(e){r.push(T.a.get("/api/".concat(e)))})),a.next=5,Promise.all(r).then((function(e){return e.map((function(e){return A.a.camelizeKeys(e.data)}))})).then((function(a){a.forEach((function(a,t){var o=e[t].replace("getFiles/","").replace("lookUpTable/","").replace("logs/","");o=A.a.camelize(o),Object.assign(n,Object(f.a)({},o,a))}))})).catch((function(e){var a;console.log(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data),n=Object(h.a)(Object(h.a)({},n),{},{sessionExpired:!0})}));case 5:if(["acessibilidade","equipamentos"].every((function(e){return n.hasOwnProperty(e)}))&&(c=(l=n).acessibilidade,s=l.equipamentos,d=n.veiculos||(null===(i=o().data)||void 0===i?void 0:i.veiculos),u=z(d,s,c),n.veiculos=u),n.veiculos&&n.veiculos.length&&e.includes("laudos")){m=n.laudos||[],p=Object(F.a)(n.veiculos);try{for(p.s();!(b=p.n()).done;){g=b.value,E=Object(F.a)(m);try{for(E.s();!(x=E.n()).done;)S=x.value,g.veiculoId===S.veiculoId&&(g.numeroLaudo=S.id,g.empresaLaudo=S.empresaLaudo,g.vencimentoLaudo=S.validade)}catch(y){E.e(y)}finally{E.f()}}}catch(y){p.e(y)}finally{p.f()}}n.socios&&Array.isArray(n.socios)&&((O=Object(v.a)(n.socios)).forEach((function(e){if(e.empresas&&"string"===typeof e.empresas)if(e.empresas.match("object"))console.log(e);else try{e.empresas=JSON.parse(e.empresas)}catch(a){console.log("invalid socio id"+e.socioId+a.message)}})),n.socios=O),t({type:"GET_DATA",payload:n});case 9:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},_=function(e,a){return function(t,o){var r=A.a.camelizeKeys(e);console.log("\ud83d\ude80 ~ file: dataActions.js ~ line 73 ~ insertData ~ data",r);var n={collection:a,data:r},i=o().data.seguradoras;if("socios"===a&&r.forEach((function(e){if(e.empresas&&"string"===typeof e.empresas)if(e.empresas.match("object"))console.log(e);else try{e.empresas=JSON.parse(e.empresas)}catch(a){console.log("invalid socio id"+e.socioId+a.message)}})),i){if("veiculos"===a&&r[0]){var l,s,d=o().data,u=d.acessibilidade,m=d.equipamentos,p=[],f=[];(null===(l=r[0])||void 0===l?void 0:l.equipamentosId)&&r[0].equipamentosId.forEach((function(e){m.forEach((function(a){var t=a.id,o=a.item;e.toString()===t.toString()&&p.push(o)}))})),(null===(s=r[0])||void 0===s?void 0:s.acessibilidadeId)&&r[0].acessibilidadeId.forEach((function(e){u.forEach((function(a){var t=a.id,o=a.item;e.toString()===t.toString()&&f.push(o)}))})),r[0].equipamentos=p,r[0].acessibilidade=f}if("seguros"===a&&r[0]&&r[0].placas&&1===r[0].placas.length){var v=i.find((function(e){return e.id===r[0].seguradoraId})),h=r[0],b=[],g=[],E=o().data.veiculos,x=E.map((function(e){return e.apolice===h.apolice&&(e.seguradora=v.seguradora,e.dataEmissao=h.dataEmissao,e.vencimento=h.vencimento),e}));E.forEach((function(e){e.apolice===h.apolice&&(b.push(e.placa),g.push(e.veiculoId))})),h.placas=b,h.veiculos=g,h=[h];var S={data:x,collection:"veiculos"};Object(c.b)((function(){t({type:"INSERT_DATA",payload:{data:h,collection:"seguros"}}),t({type:"UPDATE_COLLECTION",payload:S})}))}else t({type:"INSERT_DATA",payload:n})}else t({type:"INSERT_DATA",payload:n})}},q=function(e,a,t){return function(o,r){var n=A.a.camelizeKeys(e);t=A.a.camelize(t);var i=r().data,l=i.equipamentos,c=i.acessibilidade;"veiculos"===a&&l&&c&&(n=z(n,l,c)),"seguradora"===a&&(a="seguradoras"),o({type:"UPDATE_DATA",payload:{collection:a,data:n,id:t}})}},R=function(e,a,t,o){return function(r,n){var i=n().data[t];if(e&&e[0]&&a){var l=i.filter((function(a){return e.some((function(e){return e===a[o]}))}));l.forEach((function(e){var t=Object.assign({},e.metadata,a);e.metadata=t})),r({type:"UPDATE_DATA",payload:{collection:t,data:l,id:o}})}}},V=function(e,a){return function(t){var o={data:e=A.a.camelizeKeys(e),collection:a};"socios"===a&&e.forEach((function(e){if(e.empresas&&"string"===typeof e.empresas)if(e.empresas.match("object"))console.log(e);else try{e.empresas=JSON.parse(e.empresas)}catch(a){console.log("invalid socio id"+e.socioId+a.message)}})),t({type:"UPDATE_COLLECTION",payload:o})}},B=function(e,a,t){return function(o){a=A.a.camelize(a),o({type:"DELETE_ONE",payload:{id:e,tablePK:a,collection:t}})}},U=function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("img",{src:"/images/loading.gif",alt:"",height:"60px",width:"60px"}),r.a.createElement("p",null," Carregando... "))},H=[{collection:"equipamentos",field:"item",label:"Equipamentos",name:"equipamentosId",table:"equipamentos"},{collection:"acessibilidade",field:"item",label:"Itens de acessibilidade",name:"acessibilidadeId",table:"acessibilidade"},{collection:"marcaCarroceria",field:"marca",label:"Marcas de Carroceria",name:"marcaCarroceria",table:"marca_carroceria"},{collection:"carrocerias",field:"modelo",label:"Modelos de Carroceria",name:"modeloCarroceria",table:"modelo_carroceria"},{collection:"marcaChassi",field:"marca",label:"Marcas de Chassi",name:"marcaChassi",table:"marca_chassi"},{collection:"modelosChassi",field:"modeloChassi",label:"Modelos de Chassi",name:"modeloChassi",table:"modelo_chassi"},{collection:"seguradoras",field:"seguradora",label:"Seguradoras",name:"seguradora",table:"seguradora"},{collection:"empresasLaudo",field:"empresa",label:"Empresas certificadas INMETRO",name:"empresa",table:"empresa_laudo"},{label:"Motivos para baixa do ve\xedculo"},{collection:"laudos",table:"laudos"}],Y=t(41),J=t(3),K=t(153),W=t(386),G=t(716),$=t(387),X=t(738),Z=t(385),Q=Object(Z.a)((function(e){return{success:{backgroundColor:K.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:W.a[700]},message:{display:"flex",alignItems:"center"}}}));function ee(e){var a=Q(),t=e.className,o=e.message,n=(e.onClose,e.variant),i=Object(Y.a)(e,["className","message","onClose","variant"]);return r.a.createElement(G.a,Object.assign({className:Object(J.a)(a[n],t),"aria-describedby":"client-snackbar",message:o&&"string"===typeof o&&r.a.createElement("span",{id:"client-snackbar",className:a.message},r.a.createElement($.a,null,"error"===e.variant?"close":"warning"===e.variant?"error_outlined":"check"),"    ",o)},i))}function ae(e){return r.a.createElement("div",null,r.a.createElement(X.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.open,autoHideDuration:1500,onClose:e.close},r.a.createElement(ee,{variant:e.status||"success",message:e.msg})))}function te(e,a){var t=new Date;t.setTime(t.getTime()+36e5),t=t.toUTCString(),document.cookie="".concat(e,"=").concat(a,"; expires=").concat(t,"; path=/")}function oe(e){var a=new Date;a.setTime(10),document.cookie="".concat(e,"=; expires=").concat(a.toUTCString(),"; path=/")}function re(e){for(var a=e+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){for(var r=t[o];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(a))return r.substring(a.length,r.length)}return""}var ne,ie=function(e){return function(a){a({type:"LOG_USER",payload:e})}},le=function(e){return function(a){a({type:"LOG_USER",payload:e})}},ce=function(){return function(){var e=Object(w.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/auth/logout",{method:"GET",credentials:"same-origin"}).then((function(e){oe("loggedIn")})).catch((function(e){return console.log(e)}));case 2:a({type:"LOG_USER_OUT"});case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},se=function(e,a){if(e&&a){var t=[],o="Os seguintes campos s\xe3o de preenchimento obrigat\xf3rio: ";return e.forEach((function(e){var r=a[e.field];(null===e||void 0===e?void 0:e.disabled)||e.notRequired||r&&""!==r||(o+="".concat(e.label,", "),t.push(e.field))})),o=o.substr(0,o.length-2),t.length?{openAlertDialog:!0,alertType:"inputError",customMsg:o,customMessage:o,customTitle:"Preenchimento obrigat\xf3rio."}:null}},de=t(19),ue=t.n(de),me=function(e,a){var t=document.querySelectorAll("p"),o=document.querySelectorAll("input"),r=[],n=[],i="Favor verificar o preenchimento dos seguintes campos: ";return t&&t.forEach((function(e){if("Valor inv\xe1lido"===e.textContent||"\u2718"===e.textContent){var a=e.parentNode.querySelectorAll("label");r.push(a[0])}})),o&&!a&&o.forEach((function(e){if("date"===e.type&&"dataJunta"!==e.name&&!ue()(e.value,"YYYY-MM-DD",!0).isValid()){var a=e.parentNode.previousSibling;r.push(a)}})),r[0]?(r.forEach((function(e){return n.push(e.textContent)})),n.forEach((function(e){return i+=e+", "})),i=i.replace("(kg)","").replace("(cm)","").slice(0,-2)+".",e?{openAlertDialog:!0,alertType:"inputError",customTitle:"Preenchimento Inv\xe1lido,",customMsg:i,customMessage:i,errors:n}:n):null},pe=function(e,a){var t;if(e)return(!a.errorHandler||!a.errorHandler(e))&&(!(!e||!a.errorHandler||a.errorHandler(e))||((null===(t=e)||void 0===t?void 0:t.length)<(null===a||void 0===a?void 0:a.minLength)||("number"===a.type?e>a.max||e<a.min:("string"!==typeof e&&(e=e.toString()),!!a.pattern&&null===e.match(a.pattern)))))},fe=function(e,a){var t,o;if(e)return a.errorHandler&&a.errorHandler(e)?"\u2713":e&&a.errorHandler&&!a.errorHandler(e)||(null===(t=e)||void 0===t?void 0:t.length)<(null===a||void 0===a?void 0:a.minLength)?"\u2718":(null===(o=e)||void 0===o?void 0:o.length)>=(null===a||void 0===a?void 0:a.minLength)?"\u2713":("string"!==typeof e&&(e=e.toString()),e>a.max||e<a.min?"Valor inv\xe1lido":null===e.match(a.pattern)?"\u2718":a.pattern&&null!==e.match(a.pattern)?"\u2713":" ")},ve=t(516),he="localhost"===window.location.hostname?{env:"development",webSocketHost:"ws://localhost:3001/"}:{env:"production",webSocketHost:"wss://www.cadti.mg.gov.br:80/",options:{secure:!0}},be=he.webSocketHost,ge=he.options,Ee=function(e,a){var t=[];["logs","parametros","avisos"].forEach((function(a){e.includes(a)||e.push(a)})),t=e.map((function(e){return e.replace("getFiles/","").replace("lookUpTable/","")}));var o=function(o){Object(D.a)(i,o);var n=Object(N.a)(i);function i(){var e;Object(C.a)(this,i);for(var a=arguments.length,t=new Array(a),o=0;o<a;o++)t[o]=arguments[o];return(e=n.call.apply(n,[this].concat(t))).state={confirmToast:!1},e.quitFn=function(a){a.ctrlKey&&17===a.keyCode&&e.props.logUserOut()},e.getUser=Object(w.a)(j.a.mark((function a(){var t,o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,T.a.get("/getUser");case 2:t=a.sent,(o=null===t||void 0===t?void 0:t.data)&&e.props.logUser(o);case 5:case"end":return a.stop()}}),a)}))),e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e}return Object(k.a)(i,[{key:"componentDidMount",value:function(){var a=Object(w.a)(j.a.mark((function a(){var t,o,r=this;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(document.addEventListener("keypress",(function(e){return r.quitFn(e)})),t=this.props.redux,o=[],e.forEach((function(e){var a=e.replace("getFiles/","").replace("lookUpTable/","").replace("logs/","");t[a]&&t[a][0]||o.push(e)})),!o[0]){a.next=7;break}return a.next=7,this.props.getData(o);case 7:ne||(ne=ve({url:be,options:ge})),ne.on("connect",(function(){var e;return ne.emit("userDetails",null===(e=r.props)||void 0===e?void 0:e.user)})),ne.on("insertVehicle",(function(e){return r.props.insertData(e,"veiculos")})),ne.on("insertInsurance",(function(e){return r.props.insertData(e,"seguros")})),ne.on("insertProcuradores",(function(e){return r.props.insertData(e,"procuradores")})),ne.on("insertElements",(function(e){var a=e.insertedObjects,t=e.collection;return r.props.insertData(a,t)})),ne.on("addElements",(function(e){var a=e.insertedObjects,t=e.table,o=H.find((function(e){return e.table===t})).collection;r.props.insertData(a,o)})),ne.on("updateVehicle",(function(e){return r.props.updateData(e,"veiculos","veiculoId")})),ne.on("updateInsurance",(function(e){return r.props.updateCollection(e,"seguros")})),ne.on("updateSocios",(function(e){return r.props.updateCollection(e,"socios")})),ne.on("updateProcuradores",(function(e){var a=e.collection,t=e.data,o=e.primaryKey;return r.props.updateData(t,a,o)})),ne.on("updateLogs",(function(e){return r.props.updateData(e,"logs","id")})),ne.on("updateAny",(function(e){var a=e.data,t=e.collection,o=e.primaryKey;return r.props.updateData(a,t,o)})),ne.on("updateDocs",(function(e){var a=e.ids,t=e.metadata,o=e.collection,n=e.primaryKey;return r.props.updateDocs(a,t,o,n)})),ne.on("updateElements",(function(e){var a=e.collection,t=e.updatedCollection;return r.props.updateCollection(t,a)})),ne.on("updateUser",(function(e){return r.props.editUser(e)})),ne.on("deleteOne",(function(e){var a=e.id,t=e.tablePK,o=e.collection;r.props.deleteOne(a,t,o)})),ne.on("insertFiles",(function(e){var a=e.insertedObjects,t=e.collection;r.props.insertData(a,t)}));case 25:case"end":return a.stop()}}),a,this)})));return function(){return a.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e;document.removeEventListener("keypress",this.quitFn),(null===(e=ne)||void 0===e?void 0:e.connected)&&(ne.off(),ne.disconnect(),ne=void 0)}},{key:"render",value:function(){var e=this;return re("loggedIn").length>0&&!this.props.redux.sessionExpired?(this.props.user.name||this.getUser(),0!==(t=t.map((function(e){return A.a.camelize(e)}))).length&&t.every((function(a){return e.props.redux.hasOwnProperty(a)}))?r.a.createElement(a,Object.assign({},this.props,{checkBlankInputs:se,checkInputErrors:me})):r.a.createElement(U,null)):(setTimeout((function(){e.props.history instanceof Array&&e.props.history.push("/"),e.props.logUserOut()}),1200),r.a.createElement(ae,{open:!0,close:this.toast,msg:"Sess\xe3o expirada.",status:"error"}))}}]),i}(r.a.Component);return Object(c.c)((function(e){return{redux:Object(h.a)({},e.data),user:e.user}}),(function(e){return Object(l.b)({getData:L,insertData:_,updateData:q,updateCollection:V,deleteOne:B,updateDocs:R,logUser:ie,editUser:le,logUserOut:ce},e)}))(o)},xe=(t(540),[{title:"Ve\xedculos",date:"07/Nov",description:"Cadastre e altere os dados do ve\xedculo ou solicite sua baixa",link:"/veiculos",imageUrl:"/images/vehicles.jpg"},{title:"Empresas",date:"07/Nov",description:"Cadastre e gerencie dados de empresas, s\xf3cios e procuradores",link:"/empresas",imageUrl:"/images/empresas12.jpg"},{title:"Consultas",date:"03/Dez",description:"Consulte e gerencie dados de ve\xedculos, seguros e empresas",link:"/consultas",imageUrl:"/images/consultas2.jpg"},{title:"Relat\xf3rios",date:"03/Dez",description:"Acompanhe a situa\xe7\xe3o dos ve\xedculos por meio de gr\xe1ficos e tabelas",link:"/relatorios",imageUrl:"/images/relatorios.jpg"}]),Se={nomeSistema:"Sistema de Cadastro do Transporte Intermunicipal de Minas Gerais",siglaSistema:"CadTI - MG"};var Oe=Ee(["logs","parametros","avisos"],(function(e){var a=e.redux.parametros[0].nomes;a&&(Se.nomeSistema=null===a||void 0===a?void 0:a.sistema,Se.siglaSistema=null===a||void 0===a?void 0:a.siglaSistema);var t=Se.nomeSistema,o=Se.siglaSistema;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{minHeight:"83vh",width:"100%",height:"auto"}},r.a.createElement("main",{className:"homeMainPost"},r.a.createElement("h1",null,o),r.a.createElement("h2",null,t)),r.a.createElement("section",{className:"homeCardsContainer"},xe.map((function(e,a){var t=e.link,o=e.title,n=e.description,i=e.imageUrl;return r.a.createElement("div",{key:a,className:"homeCard"},r.a.createElement(S.b,{to:t,style:{textDecoration:"none"}},r.a.createElement("div",{className:"homeCard"},r.a.createElement("div",{className:"homeCardText"},r.a.createElement("h6",{className:"homeCardText",style:{fontWeight:500}},o),r.a.createElement("p",{className:"homeCardText"},n)),r.a.createElement("div",{className:"homeImage"},r.a.createElement("img",{src:i,alt:o,className:"homeImage"})))))})))))})),ye=t(161),je=t.n(ye),we=[{title:"Cadastro de Ve\xedculos",description:"Cadastrar um novo ve\xedculo no sistema",imageUrl:"/images/add_new.jpg",link:"/cadastro"},{title:"Altera\xe7\xe3o de dados",description:"Alterar dados de um ve\xedculo",link:"/altDados",imageUrl:"/images/pen.png"},{title:"Seguros",description:"Cadastro e atualiza\xe7\xe3o de seguro",link:"/seguros",imageUrl:"/images/car_insurance2.png"},{title:"Compartilhamento",description:"Gerenciar compartilhamento do ve\xedculo",link:"/compartilhamento",imageUrl:"/images/shareVehicle2.png"},{title:"Laudos",description:"Laudos de seguran\xe7a veicular",link:"/laudos",imageUrl:"/images/laudos.png"},{title:"Baixa",description:"Baixa de ve\xedculos",link:"/baixaVeiculo",imageUrl:"/images/remove_doc.png"},{title:"Configura\xe7\xf5es",description:"Chassi, carrocerias, seguradoras, etc",link:"/config",imageUrl:"/images/config2.jpg"}],Ce=je.a.jumbotron,ke=je.a.card,De=je.a.card__image,Ne=je.a.card__container,Ie=je.a.card__text;var Ae=Ee([],(function(e){var a=e.match,t=e.user;return r.a.createElement("div",null,r.a.createElement("section",{className:Ce},r.a.createElement("h1",null,"Ve\xedculos"),r.a.createElement("p",null,"Selecione uma das op\xe7\xf5es abaixo.")),r.a.createElement("section",{className:ke},we.map((function(e,o){var n=e.title,i=e.link,l=e.imageUrl,c=e.description;return"admin"!==(null===t||void 0===t?void 0:t.role)&&"/config"===i?null:r.a.createElement(S.b,{to:a.url+i,key:o,className:Ne},r.a.createElement("span",{className:De}," ",r.a.createElement("img",{src:l,alt:n})," "),r.a.createElement("div",{className:Ie},r.a.createElement("h3",null,n),r.a.createElement("p",null," ",c)))}))))})),Pe=t(81),Te=function(e,a){var t,o,r=a.veiculos,n=a.empresas,i=a.vehicleDocs,l=a.equipamentos,c=a.acessibilidade,s=null===e||void 0===e?void 0:e.history,d=r.find((function(a){return a.veiculoId===e.veiculoId})),u=JSON.parse(JSON.stringify(d)),m=n.find((function(a){return a.razaoSocial===(null===e||void 0===e?void 0:e.empresa)})),p=null===m||void 0===m?void 0:m.razaoSocial,f=p,v=Object(h.a)({},d)||null;if(Array.isArray(s)&&(o=null===(t=s.reverse().find((function(e){return e.hasOwnProperty("alteracoes")})))||void 0===t?void 0:t.alteracoes),o){Object.keys(o).forEach((function(e){return v[e]=o[e]}));var b=o,g=b.equipamentosId,E=b.acessibilidadeId;g&&(v.equipamentos=M(l,g)),E&&(v.acessibilidade=M(c,E))}var x,S=[],O=[],y={};s.filter((function(e){return e.files})).map((function(e){return e.files})).forEach((function(e){e.forEach((function(e){return S.push(e)}))})),x=i.filter((function(e){return-1!==S.indexOf(e.id)}));var j=[];return x.forEach((function(e){var a=e.metadata.fieldName;j.includes(a)?y[a].push(e):(j.push(a),y[a]=[e])})),Object.keys(y).forEach((function(e){var a;a=y[e].reduce((function(e,a){return new Date(e.uploadDate)>new Date(a.uploadDate)?e:a})),O.push(a),a=[]})),Object(h.a)(Object(h.a)({},v),{},{originalVehicle:u,delegatario:f,razaoSocial:p,selectedEmpresa:m,demand:e,demandFiles:O,alteracoes:o,getUpdatedValues:Fe})};function Fe(e,a){return Object.keys(a).forEach((function(t){a[t]&&e[t]&&("equipamentosId"!==t&&"acessibilidadeId"!==t||a[t].sort((function(e,a){return e-a})),a[t].toString()===e[t].toString()&&delete a[t]),""!==a[t]&&"null"!==a[t]&&a[t]||delete a[t]})),a}var ze=function(e){if(e[0].size>3145728)return alert("Arquivo excedeu o limite permitido (3MB)"),!0},Me=function(e,a,t){var o=new FormData;if(e&&e[0]){if(ze(e))return;return t.forEach((function(e){for(var t in console.log(e.name),a)t.match(e.name)&&a[e.name]&&o.set(e.name,a[e.name])})),{form:o}}},Le=function(){var e=Object(w.a)(j.a.mark((function e(a){var t,o,r,n,i,l,c,s,d,u,m,p,f=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:{},n=f.length>2?f[2]:void 0,i=f.length>3?f[3]:void 0,!(a instanceof FormData)){e.next=13;break}s=new FormData,r.tempFile=!n,console.log(r),s.append("metadata",JSON.stringify(r)),d=Object(F.a)(a);try{for(d.s();!(u=d.n()).done;)m=u.value,s.set(m[0],m[1]),console.log("\ud83d\ude80 ~ file: handleFiles.js ~ line 49 ~ postFilesReturnIds ~ pair[0], pair[1]",m[0],m[1])}catch(v){d.e(v)}finally{d.f()}return e.next=12,T.a.post("/api/".concat(i),s);case 12:l=e.sent;case 13:if(!(null===(t=l)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.file)){e.next=19;break}return p=l.data.file,c=p.map((function(e){return e.id})),e.abrupt("return",c);case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),_e=function(){var e=Object(w.a)(j.a.mark((function e(a,t){var o,r,n,i,l,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.files,r=a.demandFiles,n={tempFile:!1},(null===a||void 0===a?void 0:a.metadata)instanceof Object&&(n=Object.assign(a.metadata,n)),r&&r[0])i=r.map((function(e){return e.id}));else if(o instanceof FormData){l=Object(F.a)(o);try{for(s=function(){var e=c.value;r.forEach((function(a,t){var o;e[0]===(null===a||void 0===a||null===(o=a.metadata)||void 0===o?void 0:o.fieldName)&&r.splice(t,1)}))},l.s();!(c=l.n()).done;)s()}catch(d){l.e(d)}finally{l.f()}i=r.map((function(e){return e.id}))}return e.next=6,T.a.put("/api/updateFilesMetadata",{ids:i,collection:t,metadata:n}).then((function(e){return console.log(e.data)}));case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),qe=function(e,a){var t=new FormData;if(a instanceof FormData&&a.has(e)){var o,r=Object(F.a)(a);try{for(r.s();!(o=r.n()).done;){var n=o.value;t.set(n[0],n[1])}}catch(l){r.e(l)}finally{r.f()}t.delete(e);var i=Object(f.a)({fileToRemove:e,form:t},e,void 0);return Array.from(a.keys(),(function(e){return e})).length<=1&&(a.has("veiculoId")||a.has("empresaId"))?Object(f.a)({fileToRemove:void 0,form:void 0},e,void 0):i}},Re={collection:"logs",docs:"vehicleDocs",primaryKey:"veiculoId"},Ve=Re.collection,Be=Re.docs,Ue=Re.primaryKey,He=[{subject:"Cadastro de ve\xedculo",path:"/solicitacoes/cadastro",requestAction:"Cadastro de ve\xedculo solicitado",responseAction:"Pend\xeancias para o cadastro do ve\xedculo",concludedAction:"Ve\xedculo cadastrado",collection:Ve,docs:Be,primaryKey:Ue},{subject:"Reativa\xe7\xe3o de ve\xedculo",path:"/solicitacoes/cadastro",requestAction:"Reativa\xe7\xe3o de ve\xedculo solicitada",responseAction:"Pend\xeancias para a reativa\xe7\xe3o do ve\xedculo",concludedAction:"Ve\xedculo reativado",collection:Ve,docs:Be,primaryKey:Ue},{subject:"Altera\xe7\xe3o de dados do ve\xedculo",path:"/solicitacoes/altDados",requestAction:"Altera\xe7\xe3o de dados de ve\xedculo solicitada",responseAction:"Pend\xeancias para a altera\xe7\xe3o de dados veicular",concludedAction:"Dados do ve\xedculo alterados",collection:Ve,docs:Be,primaryKey:Ue},Object(h.a)(Object(h.a)({},Re),{},{subject:"Cadastro/altera\xe7\xe3o de seguro",path:"/solicitacoes/seguros",requestAction:"Cadastro de seguro solicitado",responseAction:"Pend\xeancias para o cadastro do seguro",concludedAction:"Seguro cadastrado",primaryKey:"id",collection:Ve,docs:Be}),Object(h.a)(Object(h.a)({},Re),{},{subject:"Compartilhamento de ve\xedculo",path:"/solicitacoes/compartilhamento",requestAction:"Compartilhamento de seguro solicitado",concludedAction:"Compartilhamento de ve\xedculo realizado.",primaryKey:"id",collection:Ve,docs:Be}),Object(h.a)(Object(h.a)({},Re),{},{subject:"Cadastro de laudo de seguran\xe7a veicular",collection:"logs",path:"/solicitacoes/laudos",requestAction:"Cadastro do laudo solicitado",responseAction:"Pend\xeancias para o cadastro do laudo",concludedAction:"Laudo veicular cadastrado"}),{subject:"Baixa de ve\xedculo",path:"/solicitacoes/baixaVeiculo",requestAction:"Baixa de ve\xedculo solicitada",collection:Ve,docs:Be,primaryKey:Ue},{subject:"Configura\xe7\xf5es de Ve\xedculo",collection:"logs",path:"/veiculos/config"},{subject:"Consultas",path:"/consultas"},{subject:"Cadastro de empresa",collection:"empresaLogs",path:"/empresas/cadastro"},{subject:"Altera\xe7\xe3o no quadro/dados de s\xf3cios",requestAction:"Altera\xe7\xe3o no quadro/dados de s\xf3cios solicitada",concludedAction:"Altera\xe7\xe3o de s\xf3cios cadastrada",path:"/solicitacoes/socios",docs:"empresaDocs",primaryKey:"empresaId",collection:Ve},{subject:"Altera\xe7\xe3o estatut\xe1ria",requestAction:"Altera\xe7\xe3o estatut\xe1ria solicitada",responseAction:"Pend\xeancias para a altera\xe7\xe3o estatut\xe1ria",concludedAction:"Altera\xe7\xe3o estatut\xe1ria cadastrada",path:"/solicitacoes/altContrato",docs:"empresaDocs",primaryKey:"empresaId",collection:Ve},{subject:"Cadastro de procura\xe7\xf5es/procuradores",collection:Ve,path:"/solicitacoes/procuradores",docs:"empresaDocs",primaryKey:"empresaId",requestAction:"Cadastro de procura\xe7\xe3o solicitado",responseAction:"Procura\xe7\xe3o indeferida",concludedAction:"Procura\xe7\xe3o cadastrada"}];function Ye(e){return Je.apply(this,arguments)}function Je(){return(Je=Object(w.a)(j.a.mark((function e(a){var t,o,r,n,i,l,c,s,d,u,m,p,f,v,h,b,g,E,x,S,O,y,w,C,k;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=window.location.pathname,l=(null===(t=al.getState())||void 0===t||null===(o=t.user)||void 0===o?void 0:o.name)||"Usu\xe1rio n\xe3o identificado",c=a.empresaId,(s=JSON.parse(JSON.stringify(He))).forEach((function(e,a){return e.path=He[a].path.replace("/veiculos","").replace("/solicitacoes","").replace("/empresas","")})),d="logs",u=null===a||void 0===a?void 0:a.historyLength,m={user:l,createdAt:new Date},p=s.find((function(e){return i.match(e.path)})),f=JSON.parse(JSON.stringify(a)),a.subject&&a.subject.match("Reativa\xe7\xe3o")&&(p=s.find((function(e){return e.subject===a.subject}))),v="vehicleDocs",h="vehicleUpload",a.veiculoId||(v="empresaDocs",h="empresaUpload"),b=Object.assign(a.history,m),f.history=b||{},(u||0===u)&&(u%2===0||0===u?((null===a||void 0===a||null===(g=a.history)||void 0===g?void 0:g.action)||(f.history.action=null===(E=p)||void 0===E?void 0:E.requestAction),f.status="Aguardando an\xe1lise"):((null===a||void 0===a||null===(x=a.history)||void 0===x?void 0:x.action)||(f.history.action=null===(S=p)||void 0===S?void 0:S.responseAction),f.status="Pend\xeancias")),(null===a||void 0===a?void 0:a.id)&&f.veiculoId&&delete f.veiculoId,delete f.historyLength,a.id&&!a.subject||(f.subject=(null===a||void 0===a?void 0:a.subject)||(null===(r=p)||void 0===r?void 0:r.subject)),!a.declined){e.next=20;break}return f.history.action="Solicita\xe7\xe3o indeferida",f.status="Solicita\xe7\xe3o indeferida",f.completed=!0,O=T.a.post("/api/logs",{log:f,collection:d,codigoEmpresa:c}),e.abrupt("return",O);case 20:return a.approved&&!a.declined&&(f.history.action=(null===(y=p)||void 0===y?void 0:y.concludedAction)||"Solicita\xe7\xe3o conclu\xedda",f.status="Solicita\xe7\xe3o conclu\xedda",f.completed=!0,_e(a,v)),e.next=23,Le(null===a||void 0===a||null===(n=a.history)||void 0===n?void 0:n.files,null===a||void 0===a?void 0:a.metadata,null===f||void 0===f?void 0:f.completed,h);case 23:return(w=e.sent)&&(f.history.files=w),f.metadata,f.approved,f.demandFiles,C=Object(Y.a)(f,["metadata","approved","demandFiles"]),s=JSON.parse(JSON.stringify(He)),p=s.find((function(e){return i.match(e.path)})),k=T.a.post("/api/logs",{log:C,collection:d,codigoEmpresa:c}),e.abrupt("return",k);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ke=t(14);function We(e){var a=e.collection,t=void 0===a?[]:a,o=e.field,n=e.itemProp,i=e.value;return(null===i||void 0===i?void 0:i.length)>2&&"string"!==typeof t?(n||(n=o),r.a.createElement("datalist",{id:o,autoComplete:"off"},t.map((function(e,a){return r.a.createElement("option",{key:a},e[n])})))):null}t(542);var Ge=Object(c.c)((function(e){return{user:e.user,redux:e.data}}))((function(e){var a=Object(o.useState)(!0),t=Object(Ke.a)(a,2),n=t[0],i=t[1],l=e.empresas,c=e.compartilhados,s=e.handleInput,d=e.handleBlur,u=e.shared,m=e.headerTitle,p=e.data,f=p.razaoSocial,v=p.compartilhado,h=p.activeStep,b=p.demand,g=l.filter((function(e){return"Desativada"!==e.situacao})),E=1===g.length,x=[{title:"Selecione a Via\xe7\xe3o",name:"razaoSocial",field:"razaoSocial",value:f}];return u&&x.push({title:"Empresa autorizada a compartilhar",field:"compartilhado",name:"compartilhado",itemProp:"razaoSocial",value:v}),Object(o.useEffect)((function(){b||h>0||E?i(!1):0===h&&i(!0);var e=document.getElementsByName("razaoSocial");n&&e[0]&&e[0].focus()}),[b,h,n,E]),r.a.createElement("div",{className:e.hasOwnProperty("shared")?"flex center":"paper flex center",style:{flexDirection:0===h?"row":"column",width:"100%",marginBottom:0}},!n&&r.a.createElement("div",{className:"selectedEmpresa",style:{padding:u&&0===h&&"0 30px 33px 0"}},m||(null===b||void 0===b?void 0:b.empresa)||f||""),e.hasOwnProperty("shared")&&0!==h&&v&&r.a.createElement("div",{className:"compartilhadoHeader"},"Compartilhado por ",v),(!h||0===h)&&n&&x.map((function(e,a){var t=e.title,o=e.field,n=e.name,i=e.itemProp,l=e.value;return(E&&1===a||!E)&&r.a.createElement("div",{className:"flexColumn",key:a},r.a.createElement("h4",{style:{margin:"5px 0",textAlign:"center"}},t),r.a.createElement("input",{list:o,name:n,className:"selectEmpresa",value:l||"",onChange:s,onBlur:d,autoComplete:"off"}),r.a.createElement(We,{collection:"compartilhado"===o?c:g,field:o,itemProp:i,value:l}))})))})),$e=t(401),Xe=t(400),Ze=Object(Z.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"1px",marginBottom:"1px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},select:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"2px",marginBottom:"2px",background:"#fafafa",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},helperText:{margin:"2px 0",fontSize:"0.7rem"}}}));function Qe(e){var a=e.handleInput,t=e.handleBlur,n=e.form,i=e.data,l=e.empresas,c=e.compartilhados,s=e.seguros,d=e.seguradoras,u=e.selectOptions,m=e.disableAll,p=e.style,f=void 0===p?{}:p,v=e.disableSome,b=void 0===v?[]:v,g={compartilhados:c,empresas:l,seguros:s,seguradoras:d},E=Ze(),x=E.helperText,S=function(e){var a,t=i[e.field];if(t)return(!e.errorHandler||!e.errorHandler(t))&&(!(!t||!e.errorHandler||e.errorHandler(t))||((null===(a=t)||void 0===a?void 0:a.length)<(null===e||void 0===e?void 0:e.minLength)||("number"===e.type?t>e.max||t<e.min:("string"!==typeof t&&(t=t.toString()),!!e.pattern&&null===t.match(e.pattern)))))},O=function(e){var a,t,o=i[e.field];return o?e.errorHandler&&e.errorHandler(o)?"\u2713":o&&e.errorHandler&&!e.errorHandler(o)||(null===(a=o)||void 0===a?void 0:a.length)<(null===e||void 0===e?void 0:e.minLength)?"\u2718":(null===(t=o)||void 0===t?void 0:t.length)>=(null===e||void 0===e?void 0:e.minLength)?"\u2713":("string"!==typeof o&&(o=o.toString()),o>e.max||o<e.min?"Valor inv\xe1lido":null===o.match(e.pattern)?"\u2718":e.pattern&&null!==o.match(e.pattern)?"\u2713":" "):" "};return r.a.createElement("div",{className:"flex center",style:Object(h.a)({},f)},n.map((function(e,n){return r.a.createElement(o.Fragment,{key:n},r.a.createElement(Xe.a,{name:e.field,label:e.label,margin:e.margin,className:E.textField,onChange:a,onBlur:t,type:e.type||"",error:S(e),helperText:O(e),FormHelperTextProps:{className:x},select:e.select||!1,value:i[e.field]||"",disabled:e.disabled||m||b.includes(e.field)||!1,InputLabelProps:{className:E.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"}},inputProps:{style:{background:e.disabled&&i.disable?"#fff":"#fafafa",fontSize:"0.85rem",textAlign:"center",color:"#000",width:e.width||300,height:"7px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"},value:"".concat(i[e.field]||""),list:e.field||e.itemProp||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||"",autoComplete:"off"},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1,SelectProps:{style:{background:e.disabled&&i.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#555",fontWeight:400,width:325,height:"44px"}}},!0===e.select?u?u.map((function(e,a){return r.a.createElement($e.a,{key:a,value:e},e)})):e.options.map((function(e,a){return r.a.createElement($e.a,{key:a,value:e},e)})):null),!0===e.autoComplete&&r.a.createElement(We,{field:e.field,collection:i[e.collection]||g[e.collection],itemProp:e.itemProp,value:i[e.field]||""}))})))}function ea(e){var a=e.subtitle,t=e.style,o=void 0===t?{}:t;return r.a.createElement("div",{className:"subtitle",style:o},r.a.createElement("i",{className:"material-icons subtitle__helper"},"arrow_forward"),r.a.createElement("span",{className:"subtitle__text"},a))}var aa=t(453),ta=t(403),oa=t(404),ra=t(65),na=t.n(ra),ia=[{field:"cilindros",label:"Cilindros",margin:"normal",type:"number",max:12,step:1},{field:"potencia",label:"Pot\xeancia (cv)",margin:"normal",type:"number",max:600},{field:"eixos",label:"Eixos",margin:"normal",type:"number",max:8},{field:"pneumaticosDianteiro",label:"Pneum\xe1ticos Eixo Dianteiro",margin:"normal",type:"number",max:12},{field:"pneumaticosTraseiro",label:"Pneum\xe1ticos Eixo Traseiro",margin:"normal",type:"number",max:18},{field:"pesoDianteiro",label:"Peso Dianteiro (t)",margin:"normal",type:"number",max:12},{field:"pesoTraseiro",label:"Peso Traseiro (t)",margin:"normal",type:"number",max:15},{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piquesPoltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150},{field:"numeroDae",label:"N\xba Documento Arrecada\xe7\xe3o Estadual",maxLength:40}],la=[[{field:"placa",label:"Placa",margin:"normal",maxLength:8,pattern:"[a-zA-Z]{3}[-]?[ ]?\\d{4}|[A-Z]{3}[-]?[ ]?[0-9]{1}[A-Z]{1}[0-9]{2}"},{field:"renavam",label:"Renavam",margin:"normal",maxLength:11,pattern:/^(\d{9}|\d{11})$/},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Comercial","Comercial Executivo","Convencional","Convencional Executivo","Leito","Leito e Executivo","Semi-Leito","Semi-Leito Executivo"]},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17},{field:"modeloChassi",label:"Modelo do Chassi",autoComplete:!0,collection:"modelosChassi"},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",max:Number((new Date).getFullYear())},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:9,maxLength:11},{field:"modeloCarroceria",label:"Modelo da Carroceria",itemProp:"modelo",autoComplete:!0,collection:"carrocerias"},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",max:Number((new Date).getFullYear()+1)},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:9,maxLength:11},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Aliena\xe7\xe3o Fiduci\xe1ria","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50}]].concat([ia]);function ca(e){var a=e.close,t=e.title,o=void 0===t?"Fechar":t;return r.a.createElement("div",{style:{position:"absolute",top:"0.4%",right:"0.4%"}},r.a.createElement("div",null,r.a.createElement("i",{className:"material-icons right",title:o,style:{cursor:"pointer",color:"red"},onClick:a},"close")))}t(402);function sa(e){var a,t=e.data,o=e.type,n=e.equipamentos,i=e.handleCheck,l=e.close;return Array.isArray(n)&&(null===(a=n[0])||void 0===a?void 0:a.item)&&(n=n.sort((function(e,a){return e.item.localeCompare(a.item)}))),r.a.createElement("div",{className:"popUpWindow",style:{right:"25%",left:"25%"}},r.a.createElement("h4",{className:"equipaHeader"},"equipamentos"===o?"Equipamentos":"Itens de Acessibilidade")," ",r.a.createElement("hr",null),r.a.createElement("div",{className:"checkListContainer"},n.map((function(e,a){return r.a.createElement("span",{className:"checkListEquipa",key:a},r.a.createElement(ta.a,{control:r.a.createElement(aa.a,{checked:t[e.item],value:e.item,onChange:function(){return i(e.item,o)}}),label:r.a.createElement("p",{className:"checkListLabel"},e.item)}))}))),r.a.createElement(ca,{close:l}))}t(206);var da=Object(Z.a)((function(e){return{button:{marginRight:"15px"}}})),ua=function(e){var a=e.redux,t=e.data,n=e.handleInput,i=e.handleBlur,l=e.handleEquipa,c=e.handleCheck,s=e.closeEquipa,d=e.resetShared,u=e.removePartilha,m=Object(o.useState)(!1),p=Object(Ke.a)(m,2),f=p[0],v=p[1],h=da().button,b=a.empresas,g=a.compartilhados,E=a.equipamentos,x=a.acessibilidade,S=a.modelosChassi,O=a.carrocerias,y=t.activeStep,j=t.demand,w=t.addEquipa,C=t.subtitle,k=t.selectedEmpresa,D=t.type,N=t.placa,I=t.reactivated,A=la[y],P=E;"acessibilidade"===D&&(P=x),t.modelosChassi=S,t.carrocerias=O,Object(o.useEffect)((function(){d&&v(!1)}),[d]);var T=C[y];return I&&(T+=" (reativa\xe7\xe3o de ve\xedculo)"),r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:0!==y?"flex center":"paper flex center",style:{width:"100%"}},r.a.createElement("section",{className:"flexColumn",style:{marginBottom:"10px"}},r.a.createElement(Ge,{data:t,shared:f,empresas:b,compartilhados:g,headerTitle:N&&k&&"Cadastro de ve\xedculo ".concat(N," - ").concat(null===k||void 0===k?void 0:k.razaoSocial),handleBlur:i,handleInput:n})),0===y&&!j&&r.a.createElement("section",{className:"flex center",style:{width:"100%",margin:"-7px 0 -4px 0"}},r.a.createElement(ta.a,{control:r.a.createElement(aa.a,{checked:!0===f,onChange:function(){return f&&u(),void v(!f)},value:f}),label:r.a.createElement("h4",{style:{color:"#2979ff",fontSize:"0.7rem"}},"Ve\xedculo Compartilhado?")}))),k&&r.a.createElement("main",null,y<2&&r.a.createElement("section",{className:"paper",style:{paddingBottom:"25px"}},r.a.createElement(ea,{subtitle:T}),r.a.createElement(Qe,{form:A,data:t,handleBlur:i,handleInput:n})),0===y&&r.a.createElement("section",{className:"flex center",style:{marginTop:"15px"}},r.a.createElement(oa.a,{variant:"outlined",size:"small",color:"primary",className:h,onClick:function(){return l("equipamentos")}},r.a.createElement(na.a,null),"Equipamentos"),r.a.createElement(oa.a,{variant:"outlined",size:"small",color:"primary",className:h,onClick:function(){return l("acessibilidade")}},r.a.createElement(na.a,null),"Acessibilidade")),w&&r.a.createElement(sa,{equipamentos:P,close:s,handleCheck:c,data:t})))},ma=t(477),pa=t(466),fa=t.n(pa),va=t(465),ha=t.n(va);function ba(e){var a=e.name,t=e.removeFile;return r.a.createElement("div",{style:{position:"absolute",top:"0.4%",right:"0.4%"}},r.a.createElement("div",null,r.a.createElement("i",{className:"material-icons right",title:"Remover arquivo",style:{cursor:"pointer",color:"red"},onClick:function(){return t(a)}},"close")))}function ga(e){var a=e.title,t=e.name,n=e.formData,i=e.handleFiles,l=e.dropDisplay,c=e.single,s=e.style,d=e.demandFiles,u=e.fileToRemove,m=e.removeFile,p=Object(o.useState)(),f=Object(Ke.a)(p,2),v=f[0],h=f[1],b=Object(o.useState)(),g=Object(Ke.a)(b,2),E=g[0],x=g[1];return Object(o.useEffect)((function(){d&&d[0]&&d.forEach((function(e){var a=e.filename,o=e.metadata;t===o.fieldName&&(h(a),x(!0))}))}),[d,t]),Object(o.useEffect)((function(){if(n instanceof FormData){var e,a=Object(F.a)(n.entries());try{for(a.s();!(e=a.n()).done;){var o=e.value;t===o[0]&&(h(o[1].name),x(!1),console.log(o[0],o[1]))}}catch(r){a.e(r)}finally{a.f()}}else n||d||h(null)}),[n,t,d,u]),Object(o.useEffect)((function(){if(u===t){var e=null===d||void 0===d?void 0:d.find((function(e){var a;return(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.fieldName)===u}));u&&e?(h(e.filename),x(!0)):u&&u===t&&h(void 0)}}),[d,u,i,t]),r.a.createElement("div",{style:s||null},r.a.createElement("div",{style:{position:"relative",marginRight:"8px"}},a?r.a.createElement("p",{className:"fileInput"},a||""):r.a.createElement("br",null),v&&!E&&r.a.createElement(ba,{removeFile:m,name:t})),r.a.createElement(ma.a,{onDrop:function(e){return i(e,t)}},(function(e){var a=e.getRootProps,t=e.getInputProps;return r.a.createElement("div",Object.assign({style:E?{backgroundColor:"#aaa"}:{},className:v?"dropBox fileAttached":c?"dropBox":"multipleDropBox"},a()),r.a.createElement("input",t()),v?r.a.createElement(o.Fragment,null,r.a.createElement("div",null,r.a.createElement(ha.a,{className:"icon"}),v),c&&r.a.createElement("span",null,"(clique ou arraste outro arquivo para alterar)")):r.a.createElement("div",null," ",r.a.createElement(fa.a,{className:"icon"}),r.a.createElement("span",null,"  ",l)))})))}var Ea=t(740),xa=[{title:"CRLV do Ve\xedculo",name:"crlv"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"Laudo de Pesagem",name:"pesagem"},{title:"Nota Fiscal Carroceria",name:"nfCarroceria"},{title:"Nota Fiscal Chassi",name:"nfChassi"},{title:"Layout do Ve\xedculo",name:"layout"},{title:"Contrato",name:"contrato"},{title:"Outros Anexos",name:"outrosAnexos"}],Sa=[{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"Laudo de Pesagem",name:"pesagem"},{title:"CRLV com nova placa",name:"newPlateDoc"},{title:"Layout do Ve\xedculo",name:"layout"},{title:"Outros Anexos",name:"outrosAnexos"}],Oa=Object(Z.a)((function(e){return{root:{flexGrow:"1",margin:"5px",padding:"8px"},sendButton:{margin:"3% 0 3% 0",backgroundColor:"teal",float:"right"},text:{textAlign:"left",margin:e.spacing(2),fontSize:"0.9rem",fontWeight:"500",color:"#333"},item:{margin:"0 0 18px 0",padding:"0 5px"}}}));function ya(e){var a,t=e.handleFiles,n=e.parentComponent,i=e.dropDisplay,l=e.formData,c=e.insuranceExists,s=e.demandFiles,d=e.removeFile,u=e.fileToRemove,m=Oa(),p=m.root,f=m.item;return"cadastro"===n&&(a=xa),"altDados"===n&&(a=Sa),r.a.createElement("div",{className:"paper",style:{color:"#555"}},r.a.createElement(ea,{subtitle:"Anexe os documentos solicitados nos campos abaixo"}),r.a.createElement(Ea.a,{container:!0,className:p},a.map((function(e,a){var n=e.title,m=e.name;return"apoliceDoc"===m&&c?null:r.a.createElement(o.Fragment,{key:a},r.a.createElement(Ea.a,{item:!0,xs:10,md:4,className:f},r.a.createElement(ga,{title:n,name:m,formData:l,dropDisplay:i,handleFiles:t,demandFiles:s,removeFile:d,fileToRemove:u})))}))))}var ja=t(252),wa=t.n(ja),Ca=t(251),ka=t.n(Ca),Da=function(e,a,t,o){o&&"apoliceDoc"===o&&(t="empresaDocs"),T()({url:"/api/mongoDownload/?collection=".concat(t,"&id=").concat(e),method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),o=document.createElement("a");o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click()})).catch((function(e){console.log(e)}))},Na={display:"flex",justifyContent:"center",width:"100%",alignContent:"center",flexWrap:"wrap"},Ia={textAlign:"center",alignItems:"flex-start",height:"40px",border:"1px #ccc solid",padding:"7px 8px 0 8px",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px"},Aa={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},Pa={verticalAlign:"middle",padding:"0 0% 0 2%"};function Ta(e){var a=e.form,t=e.files,o=e.demandFiles,n=e.collection,i=e.style,l=void 0===i?{}:i,c=[];if(o&&o.forEach((function(e){a.forEach((function(a){var t,o=a.name,r=a.title;(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.fieldName)===o&&c.push({id:e.id,label:r,fieldName:o,fileName:e.filename,storage:"server"})}))})),t){var s,d=Object(F.a)(t.entries());try{var u=function(){var e=s.value;a.forEach((function(a){var t=a.name,o=a.title;if(t===e[0]&&e[1]&&e[1].name){var r=c.findIndex((function(e){return(null===e||void 0===e?void 0:e.fieldName)===t}));-1!==r?c[r]={label:o,fieldName:t,fileName:e[1].name,storage:"local"}:c.push({label:o,fieldName:t,fileName:e[1].name,storage:"local"})}}))};for(d.s();!(s=d.n()).done;)u()}catch(m){d.e(m)}finally{d.f()}}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:Na},c.map((function(e,a){return r.a.createElement("div",{style:Object(h.a)(Object(h.a)({},Ia),l),key:a},r.a.createElement(ka.a,{style:Pa}),r.a.createElement("span",{style:{verticalAlign:"middle"}}," "," ",e.label),r.a.createElement(wa.a,{style:Aa,onClick:function(){return"local"===e.storage?function(e,a){var o=t.get(e),r=window.URL.createObjectURL(o),n=document.createElement("a");n.href=r,o&&("application/pdf"===o.type||o.type.match("image/"))?(n.setAttribute("rel","noopener"),n.setAttribute("target","_blank"),n.setAttribute("title",a)):n.setAttribute("download",a),document.body.appendChild(n),n.click()}(e.fieldName,e.fileName):Da(e.id,e.fileName,n,e.fieldName)}}))}))))}function Fa(e){var a=e.length,t=e.title,o=e.labels,n=e.fields,i=e.values,l=e.style,c=e.docs,s=e.alteredElements,d=void 0===s?[]:s;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",style:l,colSpan:a},t)),r.a.createElement("tr",null,o.map((function(e,a){return r.a.createElement("th",{key:a,style:l},e)})))),r.a.createElement("tbody",null,r.a.createElement("tr",null,i.map((function(e,a){return r.a.createElement("td",{className:"review",key:a,style:Object(h.a)(Object(h.a)({},l),{},{color:d.includes(n[a])?"red":"#000"}),onClick:function(){return c&&c.id?Da(c.id,c.filename,"vehicleDocs",c.metadata.fieldName):null}},(t=e,ue()(t,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?ue()(t,ue.a.ISO_8601,!0).format("DD/MM/YYYY"):t));var t})))))}var za=t(159),Ma=t(123),La=t.n(Ma),_a=Object(Z.a)((function(e){return{paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 5px 0",height:"auto"}}}));function qa(e){var a,t,n=e.data,i=e.parentComponent,l=e.form,c=e.filesForm,s=e.files,d=_a().paper,u=n.acessibilidade,m=n.equipamentos,p=n.alteracoes,v=n.demand,h=n.demandFiles,b=n.numeroDae,g=null===n||void 0===n?void 0:n.originalVehicle,E=b||(null===v||void 0===v?void 0:v.history)instanceof Array&&(null===v||void 0===v||null===(a=v.history.reverse().find((function(e){return e.numeroDae})))||void 0===a?void 0:a.numeroDae),x=[],S={},O=[],y=[],j=[];return l.forEach((function(e){e.forEach((function(e){n.hasOwnProperty([e.field])&&(Object.assign(S,Object(f.a)({},e.field,n[e.field])),O.push(e))})),x.push(S),y.push(O),S={},O=[]})),"cadastro"===i&&(t=[{subtitle:"Detalhes do ve\xedculo",form:y[0]||[],data:x[0]},{subtitle:"Detalhes do seguro",form:y[1]||[],data:x[1]},{subtitle:"Informa\xe7\xf5es sobre a vistoria",form:y[2]||[],data:x[2]}]),"altDados"===i&&(t=[{subtitle:"Detalhes do ve\xedculo",form:y[0],data:x[0]},{subtitle:"Informa\xe7\xf5es sobre a vistoria",form:y[1],data:x[1]}]),p&&"object"===typeof p&&(j=Object.keys(p)),g&&Object.keys(g).forEach((function(e){n[e]&&g[e]&&(n[e]===g[e]||j.includes(e)||j.push(e))})),r.a.createElement(r.a.Fragment,null,r.a.createElement(za.a,{className:d},r.a.createElement("main",{className:"divTable"},t.map((function(e,a){var t=e.subtitle,n=e.form,i=e.data;return n&&i&&r.a.createElement(o.Fragment,{key:a},r.a.createElement(Fa,{length:(null===n||void 0===n?void 0:n.length)||1,title:t,labels:n.map((function(e){return e.label})),fields:n.map((function(e){return e.field})),values:Object.values(i),alteredElements:j}))}))),m&&m[0]&&r.a.createElement("section",{style:{margin:"0 0 13px 20px"}},r.a.createElement("p",{style:{fontWeight:500,color:"#555"}}," Equipamentos "),r.a.createElement("p",null,m&&m.map((function(e,a){return r.a.createElement("span",{className:"smallFont",key:a},a!==m.length-1?e+", ":e)})))),u&&u[0]&&r.a.createElement("section",{style:{margin:"0 0 13px 20px"}},r.a.createElement("p",{style:{fontWeight:500,color:"#555"}}," Itens de acessibilidade "),r.a.createElement("p",null,u.map((function(e,a){return r.a.createElement("span",{className:"smallFont",key:a},a!==u.length-1?e+", ":e)})))),(s||h)&&r.a.createElement("div",null,r.a.createElement("p",{style:{margin:"0 0 13px 11px",fontWeight:"500",color:"#555"}},r.a.createElement(La.a,{style:{verticalAlign:"middle",padding:"0 0 0 8px"}})," Documentos"),r.a.createElement(Ta,{demand:v,collection:"vehicleDocs",demandFiles:h,form:c,files:s}),E&&r.a.createElement("span",{className:"smallFont addMargin"},"N\xba Documento Arrecada\xe7\xe3o Estadual: ",E))))}var Ra=t(759),Va=t(467),Ba=t.n(Va);function Ua(e){var a=e.links,t=e.text,o=e.demand;return o&&(a=["Solicita\xe7\xf5es","/solicitacoes"],t="solicita\xe7\xe3o n\xba ".concat(null===o||void 0===o?void 0:o.numero)),r.a.createElement(Ea.a,{style:{marginTop:"1%"}},r.a.createElement(Ra.a,{separator:"\u203a","aria-label":"breadcrumb"},r.a.createElement(S.b,{to:"/",style:{}},r.a.createElement(Ba.a,{style:{verticalAlign:"middle",marginRight:"5px",paddingBottom:"3px"}}),r.a.createElement("span",{style:{fontSize:"0.8rem"}},"P\xe1gina inicial")),r.a.createElement(S.b,{color:"primary",to:a[1],style:{fontSize:"0.8rem"}},a[0]),r.a.createElement("span",{style:{fontSize:"0.8rem"}},t)))}var Ha=Object(Z.a)((function(e){return{button:{margin:e.spacing(1),float:"right"},backButton:{margin:e.spacing(1),float:"left",color:"#333",backgroundColor:"#eee"},textField:{marginTop:"20px",width:"100%"}}}));function Ya(e){var a,t=e.activeStep,n=e.setActiveStep,i=e.lastStep,l=e.handleSubmit,c=e.disabled,s=e.demand,d=e.uniqueStep,u=e.declineButtonLabel,m=e.setShowPendencias,p=e.showPendencias,f=e.handleInput,v=e.info,h=e.obs,b=e.addObs,g=e.buttonLabel,E=Ha(),x=E.backButton,S=E.button,O=E.textField;return(null===s||void 0===s?void 0:s.status.match("Pend\xeancias"))&&(a="empresa"),(null===s||void 0===s?void 0:s.status.match("Aguardando"))&&(a="seinfra"),Object(o.useEffect)((function(){function e(e){37===e.keyCode&&e.ctrlKey&&0!==t&&n("back"),39===e.keyCode&&e.ctrlKey&&t!==i&&n("next"),13===e.keyCode&&e.ctrlKey&&l()}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}})),r.a.createElement("div",{style:{width:"100%"}},t<i?r.a.createElement(r.a.Fragment,null,r.a.createElement(oa.a,{variant:"contained",className:x,title:0!==t?"Ctrl + \u2190":null,onClick:function(){return n("back")},disabled:0===t},"Voltar"),r.a.createElement(oa.a,{variant:"contained",color:"primary",title:c?null:"Ctrl + \u2192",className:S,onClick:function(){return n("next")},disabled:c},"Avan\xe7ar")):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},"seinfra"!==a||p||b?r.a.createElement(Xe.a,{name:b?"obs":"info",className:O,value:b?h:v,label:s&&"empresa"!==a?s&&d?"Motivos para o indeferimento":p?"Pend\xeancias/irregularidades para a aprova\xe7\xe3o":"Observa\xe7\xf5es":"Observa\xe7\xf5es/informa\xe7\xf5es complementares",type:"text",onChange:f,InputLabelProps:{shrink:!0,style:{fontWeight:600,marginBottom:"5%"}},inputProps:{style:{paddingBottom:"2%"},maxLength:600},multiline:!0,rows:3,variant:"outlined"}):null,r.a.createElement("div",{style:{display:"flex",width:"100%"}},t===i&&!d&&r.a.createElement(oa.a,{variant:"contained",className:x,title:0!==t?"Ctrl + \u2190":null,onClick:function(){return n("back")},disabled:0===t},"Voltar"),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%"}},s&&"empresa"!==a?r.a.createElement(r.a.Fragment,null,r.a.createElement(oa.a,{variant:"outlined",color:"secondary",className:S,onClick:function(){return m()}},p?"Cancelar":u||"Registrar pendencias"),r.a.createElement(oa.a,{variant:"contained",color:p?"secondary":"primary",className:S,onClick:function(){return l(!p)}},p?"Indeferir":"Aprovar")):r.a.createElement(oa.a,{variant:"contained",color:"primary",className:S,onClick:function(){return l()}},g||"Enviar solicita\xe7\xe3o")))))}var Ja=t(741),Ka=t(742),Wa=t(743);function Ga(e){var a=e.activeStep,t=e.steps;return r.a.createElement("div",{className:"paper",style:{padding:"15px",margin:"10px 0"}},r.a.createElement(Ja.a,{activeStep:a},t.map((function(e,a){var t={};return r.a.createElement(Ka.a,Object.assign({key:e},{}),r.a.createElement(Wa.a,t,e))}))))}var $a=function(e,a){if(/\d/.test(e)){var t=new Date(e).getDate()+"/"+(new Date(e).getMonth()+1)+"/"+new Date(e).getFullYear();return a&&(t+=", "+new Date(e).getHours()+":"+(new Date(e).getMinutes()<10?"0"+new Date(e).getMinutes():new Date(e).getMinutes())+"h"),t.toString()}return e},Xa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.replace(/\D/g,"");return a=(a=(a=(a=(a/100).toFixed(2)+"").replace(".",",")).replace(/(\d)(\d{3})(\d{3}),/g,"$1.$2.$3,")).replace(/(\d)(\d{3}),/g,"$1.$2,")};var Za=t(744),Qa=t(748),et=t(746),at=t(747),tt=t(745);function ot(e){var a=e.open,t=e.alertType,o=e.close,n=e.confirm,i=e.customTitle,l=e.customMessage,c=e.tab,s=function(e){var a="";if((c||0===c)&&(a=["a empresa","o s\xf3cio","a procura\xe7\xe3o","o ve\xedculo","o seguro"][c]),i&&l)return{title:i,message:l};switch(e){case"plateNotFound":return{title:"Placa n\xe3o encontrada",message:'A placa informada n\xe3o corresponde a nenhum ve\xedculo da frota da via\xe7\xe3o selecionada. Para cadastrar um novo ve\xedculo, selecione a op\xe7\xe3o Ve\xedculos => "Cadastro de Ve\xedculo" no menu acima.'};case"invalidPlate":return{title:"Placa inv\xe1lida",message:"Certifique-se de que a placa informada \xe9 uma placa v\xe1lida, com tr\xeas letras seguidas de 4 n\xfameros (ex: AAA-0000)"};case"plateExists":return{title:"Placa j\xe1 cadastrada!",message:"A placa informada j\xe1 est\xe1 cadastrada. Para atualizar seguro, alterar dados ou solicitar baixa, utilize as op\xe7\xf5es acima. "};case"invalidModel":return{title:"Modelo n\xe3o cadastrado.",message:l};case"inputError":return{title:"Preenchimento inv\xe1lido.",message:l};case"fieldsMissing":return{title:"Favor preencher todos os campos.",message:"Os campos acima s\xe3o de preenchimento obrigat\xf3rio. Certifique-se de ter preenchido todos eles."};case"invalidInsurance":return{title:"Favor verificar os dados do seguro.",message:"As informa\xe7\xf5es referentes ao seguro do ve\xedculo s\xe3o obrigat\xf3rias. Certifique-se de ter informado todas elas."};case"filesNotFound":return{title:"Arquivos n\xe3o encontrados",message:"N\xe3o h\xe1 nenhum documento aprovado no sistema para ".concat(a," selecionad").concat(a.charAt(0),".\n          Caso haja uma solicita\xe7\xe3o em aberto para ").concat(a,', acesse a op\xe7\xe3o "Solicita\xe7\xf5es" no menu superior para ter acesso aos arquivos.')};case"empresaNotFound":return{title:"Empresa n\xe3o encontrada.",message:"A empresa informada n\xe3o est\xe1 registrada no sistema. Para cadastrar uma nova empresa, utilize a op\xe7\xe3o Empresas -> Cadastrar."};case"seguradoraNotFound":return{title:"Seguradora n\xe3o encontrada.",message:"A seguradora informada n\xe3o est\xe1 registrada no sistema. Favor verificar o nome da seguradora."};case"alreadyExists":return{title:"CPF j\xe1 cadastrado.",message:"O CPF informado corresponde a um s\xf3cio j\xe1 cadastrado. \n          Para remover ou editar as informa\xe7\xf5es dos s\xf3cios, utilize a respectiva op\xe7\xe3o abaixo."};case"numberNotValid":return{title:"N\xfamero inv\xe1lido.",message:"O n\xfamero digitado n\xe3o \xe9 v\xe1lido."};case"overShared":return{title:"Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",message:"A participa\xe7\xe3o societ\xe1ria informada excede a 100%."};case"subShared":return{title:"Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",message:"A participa\xe7\xe3o societ\xe1ria informada n\xe3o soma 100%. Favor informar todos os s\xf3cios com suas respectivas participa\xe7\xf5es."};case"veiculoPendente":return{title:"Pend\xeancias encontradas para este ve\xedculo.",message:"Verifique se h\xe1 alguma aprova\xe7\xe3o pendente quanto ao cadastro, seguro, transfer\xeancia ou altera\xe7\xe3o de dados do ve\xedculo."};case"seguroVencido":return{title:"Pend\xeancias encontradas para o seguro deste ve\xedculo.",message:"Para regularizar o seguro deste ve\xedculo, acesse a op\xe7\xe3o Ve\xedculos=>Seguros no menu acima."};case"contratoVencido":return{title:"Contrato expirado.",message:"O contrato de concess\xe3o com o delegat\xe1rio selecionado est\xe1 expirado."};default:return{title:null,message:null}}}(t),d=s.title,u=s.message;return d&&u?r.a.createElement("div",null,r.a.createElement(Za.a,{open:a,onClose:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(tt.a,{id:"alert-dialog-title"},d),r.a.createElement(et.a,null,r.a.createElement(at.a,{id:"alert-dialog-description"},u)),r.a.createElement(Qa.a,null,r.a.createElement(oa.a,{onClick:o,color:"primary"},n?"Cancelar":"Fechar"),n&&r.a.createElement(oa.a,{onClick:o,color:"primary",autoFocus:!0},"Confirmar")))):null}var rt=function(e,a,t){var o,r;return"leitoEExecutivo"===(e=A.a.camelize(e))&&(e="leitoExecutivo"),t[e]&&a&&""!==a&&(a=Number(a),o=(r=t[e])<=a),!o&&(r?'A dist\xe2ncia m\xednima para a utiliza\xe7\xe3o "'.concat(e,'" \xe9 de ').concat(r,' cent\xedmetros. Altere a dist\xe2ncia ou clique em "voltar" para alterar a utiliza\xe7\xe3o.'):void 0)},nt=[{field:"veiculoId",label:"N\xfamero"},{field:"placa",label:"Placa"},{field:"renavam",label:"RENAVAM"},{field:"utilizacao",label:"Utiliza\xe7\xe3o"},{field:"codigoEmpresa",label:"C\xf3digo"},{field:"empresa",label:"Delegat\xe1rio"},{field:"dataRegistro",label:"Data de Registro"},{field:"situacao",label:"Situa\xe7\xe3o"},{field:"motivoBaixa",label:"Motivo da Baixa"},{field:"dataBaixa",label:"Data baixa"},{field:"nChassi",label:"N\xfamero chassi"},{field:"marcaChassi",label:"Marca chassi"},{field:"modeloChassi",label:"Modelo chassi"},{field:"anoChassi",label:"Ano chassi"},{field:"valorChassi",label:"Valor Chassi"},{field:"marcaCarroceria",label:"Marca carroceria"},{field:"modeloCarroceria",label:"Modelo carroceria"},{field:"anoCarroceria",label:"Ano carroceria"},{field:"indicadorIdade",label:"Indicador de Idade"},{field:"valorCarroceria",label:"Valor carroceria"},{field:"dominio",label:"Leasing"},{field:"delegatarioCompartilhado",label:"Empresas autorizadas a compartilhar"},{field:"cores",label:"Cores"},{field:"seguradora",label:"Seguradora"},{field:"apolice",label:"Ap\xf3lice"},{field:"dataEmissao",label:"Data Inicio"},{field:"vencimento",label:"Data Fim"},{field:"empresaLaudo",label:"Empresa Laudo"},{field:"numeroLaudo",label:"N\xfamero Laudo"},{field:"validade",label:"Validade Laudo"},{field:"cilindros",label:"Cilindros"},{field:"potencia",label:"Pot\xeancia"},{field:"eixos",label:"Eixos"},{field:"pneumaticosDianteiros",label:"Pneum\xe1ticos Dianteiros"},{field:"pneumaticosTraseiros",label:"Pneum\xe1ticos Traseiros"},{field:"pesoDianteiro",label:"Peso Dianteiro"},{field:"pesoTraseiro",label:"Peso Traseiro"},{field:"pbt",label:"PBT"},{field:"poltronas",label:"Poltronas"},{field:"piquesPoltrona",label:"Piques Poltrona"},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima"},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima"},{field:"equipamentos",label:"Equipamentos"},{field:"acessibilidade",label:"Acessibilidade"},{field:"sipro",label:"SIPRO"},{field:"obs",label:"Observa\xe7\xe3o"}],it=function(e){var a,t=e.props.redux.modelosChassi,o=e.state.modeloChassi;if(o){var r=null===(a=t.find((function(e){return e.modeloChassi===o})))||void 0===a?void 0:a.cmt;console.log("\ud83d\ude80 ~ file: CadVeiculo.jsx ~ line 190 ~ VeiculosContainer ~ cmt",r),e.setState({cmt:r})}},lt=function(e){if(e)return"0"!==(e=e.toString().replace(".",",").replace(",000","")).slice(-1)||","!==e.charAt(1)&&","!==e.charAt(2)||(e=e.slice(0,e.length-1)),"0"!==e.slice(-1)||","!==e.charAt(1)&&","!==e.charAt(2)||(e=e.slice(0,e.length-1)),console.log(e),e},ct=function(e,a){var t=e.state,o=t.poltronas,r=t.pesoDianteiro,n=t.pesoTraseiro,i=t.cmt,l=t.modeloChassi;n=n||0;var c=.08*+(o=o||0)+(+((r=r||0)&&parseFloat(r.replace(",",".")).toFixed(3))+ +(n&&parseFloat(n.replace(",",".")).toFixed(3)));if((c=isNaN(c)?void 0:c.toFixed(3))&&i)if(+i>=c)c=Number(lt(c).replace(",",".")),e.setState({pbt:c});else{var s=lt(c),d=i&&i.toString().replace(".",","),u="O n\xfamero de poltronas e os pesos dianteiro e traseiro informados formam um peso bruto total de ".concat(s,"t, superior \xe0 \n                Carga M\xe1xima de tra\xe7\xe3o permitida: modelo ").concat(l," -> ").concat(d,"t.");e.setState(Object(f.a)({openAlertDialog:!0,customTitle:"Peso total bruto superior ao permitido (CMT) para o modelo de chassi informado.",customMessage:u},a,0))}},st=Ee(["veiculos","empresas","compartilhados","modelosChassi","carrocerias","equipamentos","acessibilidade","getFiles/vehicleDocs","parametros"],function(e){Object(D.a)(t,e);var a=Object(N.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={activeStep:0,steps:["Dados do Ve\xedculo","Vistoria e laudos","Documentos","Revis\xe3o"],subtitle:["Informe os dados do ve\xedculo.","Preencha os campos abaixo conforme a vistoria realizada"],razaoSocial:"",frota:[],delegatarioCompartilhado:"",toastMsg:"Ve\xedculo cadastrado!",confirmToast:!1,addEquipa:!1,openAlertDialog:!1,dropDisplay:"Clique ou arraste para anexar"},e.setActiveStep=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==e.state.activeStep){a.next=7;break}if(!e.state.frota.filter((function(a){return a.placa===e.state.placa}))[0]){a.next=7;break}return a.next=5,e.setState({placa:""});case 5:return e.setState({alertType:"plateExists",openAlertDialog:!0}),a.abrupt("return",null);case 7:if(o=e.props.redux.parametros[0]&&e.props.redux.parametros[0],r=o.inputValidation,"next"!==t||!r){a.next=16;break}if(n=e.props,i=n.checkBlankInputs,l=n.checkInputErrors,c=l("sendState"),s=i(la[e.state.activeStep],e.state),!c){a.next=13;break}return e.setState(Object(h.a)(Object(h.a)({},e.state),c)),a.abrupt("return");case 13:if(!s){a.next=16;break}return e.setState(Object(h.a)(Object(h.a)({},e.state),s)),a.abrupt("return");case 16:d=e.state.activeStep,"next"===t&&e.setState({activeStep:d+1}),"back"===t&&e.setState({activeStep:d-1}),"reset"===t&&e.setState({activeStep:0});case 20:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.props.redux,r=o.veiculos,n=o.empresas,i=t.target.name,l=t.target.value,e.setState(Object(f.a)({},i,l)),a.t0=i,a.next="razaoSocial"===a.t0?6:"placa"===a.t0?18:"utilizacao"===a.t0?23:"valorChassi"===a.t0?25:"valorCarroceria"===a.t0?27:29;break;case 6:if(!(c=n.find((function(e){return e.razaoSocial===l})))){a.next=16;break}return s=c.razaoSocial,d=c.codigoEmpresa,a.next=11,e.setState({selectedEmpresa:c,razaoSocial:s,codigoEmpresa:d});case 11:l!==c.razaoSocial&&e.setState({selectedEmpresa:void 0}),u=r.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:u}),a.next=17;break;case 16:e.setState({selectedEmpresa:void 0,frota:[],placa:void 0});case 17:return a.abrupt("break",30);case 18:if("string"!==typeof l){a.next=22;break}return l=l.toLocaleUpperCase(),a.next=22,e.setState(Object(f.a)({},i,l));case 22:return a.abrupt("break",30);case 23:return e.setState({distanciaMinima:void 0,distanciaMaxima:void 0}),a.abrupt("break",30);case 25:case 27:return e.setState(Object(f.a)({},i,Xa(l))),a.abrupt("break",30);case 29:case 30:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.checkValid=function(){var a=Object(w.a)(j.a.mark((function a(t,o,r,n,i,l,c){var s,d,u,m,p,v;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((d=r.find((function(e){return e[i].toLowerCase()===o.toLowerCase()})))||!o||""===o){a.next=7;break}return a.next=4,e.setState((u={},Object(f.a)(u,t,""),Object(f.a)(u,n,""),u));case 4:return e.setState({alertType:"invalidModel",openAlertDialog:!0,customTitle:"Modelo inv\xe1lido.",customMessage:"O modelo de ".concat(c," n\xe3o est\xe1 cadastrado no sistema.")}),document.getElementsByName(t)[0].focus(),a.abrupt("return");case 7:if(""===o&&e.setState((s={},Object(f.a)(s,t,""),Object(f.a)(s,n,""),s)),!d){a.next=13;break}if(p=d[i],v=d[l],""===o){a.next=13;break}return a.next=13,e.setState((m={},Object(f.a)(m,t,p),Object(f.a)(m,n,v),m));case 13:case"end":return a.stop()}}),a)})));return function(e,t,o,r,n,i,l){return a.apply(this,arguments)}}(),e.handleBlur=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m,p,f,v,h,b,g,E,x,S,O,y,w,C,k,D,N,I,A,P,T;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.props.redux,r=o.empresas,n=o.modelosChassi,i=o.carrocerias,l=o.parametros,c=l[0],s=c.distanciaPoltronas,d=c.idadeBaixa,u=d.idadeMaxCad,m=d.difIdade,p=d.idadeBaixaAut,f=e.state,v=f.anoCarroceria,h=f.anoChassi,b=f.utilizacao,g=f.distanciaMinima,E=f.distanciaMaxima,x=f.situacao,S=t.target.name,O=Number(v),y=Number(h),w=(new Date).getFullYear(),C=t.target.value,N=w-u,x&&x.match("Reativa\xe7\xe3o")&&(N=w-p),a.t0=S,a.next="modeloChassi"===a.t0?6:"modeloCarroceria"===a.t0?11:"delegatarioCompartilhado"===a.t0?13:"anoChassi"===a.t0?15:"anoCarroceria"===a.t0?20:"distanciaMinima"===a.t0?25:"distanciaMaxima"===a.t0?29:"pesoDianteiro"===a.t0?33:"pesoTraseiro"===a.t0?35:"poltronas"===a.t0?37:39;break;case 6:return a.next=8,e.checkValid(S,C,n,"modeloChassiId","modeloChassi","id","chassi");case 8:return it(Object(Pe.a)(e)),e.setState({pesoDianteiro:void 0,pesoTraseiro:void 0}),a.abrupt("break",40);case 11:return e.checkValid(S,C,i,"modeloCarroceriaId","modelo","id","carroceria"),a.abrupt("break",40);case 13:return e.checkValid(S,C,r,"compartilhadoId","razaoSocial","codigoEmpresa"),a.abrupt("break",40);case 15:return k="Ano de chassi inv\xe1lido.",y&&y<N-1&&(D="O ano de fabrica\xe7\xe3o do chassi informado \xe9 anterior \xe0 idade m\xe1xima permitida para cadastro."),O&&y&&(O<y||O>y+m)&&(D="O ano de chassi \xe9 incompat\xedvel com o ano da carroceria informado."),D&&e.setState({anoChassi:"",openAlertDialog:!0,customTitle:k,customMessage:D}),a.abrupt("break",40);case 20:return k="Ano de carroceria inv\xe1lido.",O&&O<N&&(D="O ano de fabrica\xe7\xe3o do carroceria informado \xe9 anterior \xe0 idade m\xe1xima permitida."),O&&y&&(O<y||O>y+m)&&(D="O ano de fabrica\xe7\xe3o carroceria \xe9 incompat\xedvel com o ano do chassi informado."),D&&e.setState({anoCarroceria:"",openAlertDialog:!0,customTitle:k,customMessage:D}),a.abrupt("break",40);case 25:return b&&(I=rt(b,g,s)),g&&+g>+E&&(I="A Dist\xe2ncia m\xednima n\xe3o pode ser superior \xe0 dist\xe2ncia m\xe1xima."),I&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xednima inv\xe1lida.",customMessage:I,distanciaMinima:""}),a.abrupt("break",40);case 29:return b&&(A=rt(b,E,s)),E&&+E<+g&&(A="A Dist\xe2ncia m\xe1xima n\xe3o pode ser inferior \xe0 dist\xe2ncia m\xednima."),A&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xe1xima inv\xe1lida.",customMessage:A,distanciaMaxima:""}),a.abrupt("break",40);case 33:case 35:case 37:return ct(Object(Pe.a)(e),S),a.abrupt("break",40);case 39:case 40:if("placa"!==S||"string"===typeof e.state.frota){a.next=52;break}if(7!==C.length){a.next=46;break}return P=C.replace(/(\w{3})/,"$1-"),a.next=45,e.setState({placa:P,reactivated:!1});case 45:C=P;case 46:if(8!==C.length){a.next=51;break}return T=C.replace(" ","-"),a.next=50,e.setState({placa:T,reactivated:!1});case 50:C=T;case 51:e.checkPlateConflict(C);case 52:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.checkPlateConflict=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,T.a.get("/api/alreadyExists?table=veiculos&column=placa&value=".concat(t));case 2:if(o=a.sent,r=null===o||void 0===o?void 0:o.data,n=null===r||void 0===r?void 0:r.vehicleFound,!r||e.state.demand){a.next=22;break}if("existing"!==(c=r.status)){a.next=14;break}return(null===n||void 0===n?void 0:n.situacao.match(/Cadastro|Reativa\xe7\xe3o/g))?(i="Solicita\xe7\xe3o aberta.",l="J\xe1 existe uma solicita\xe7\xe3o de cadastro ou reativa\xe7\xe3o para a placa informada. Para acompanhar, acesse 'Solicita\xe7\xf5es' e filtre pela placa do ve\xedculo. "):(i="Ve\xedculo j\xe1 cadastrado.",l="A placa informada corresponde a um ve\xedculo j\xe1 cadastrado. Para alterar o cadastro, v\xe1 para Ve\xedculos -> 'Altera\xe7\xe3o de dados'."),e.setState({customTitle:i,customMessage:l,openAlertDialog:!0,placa:null,reactivated:!1}),t="",a.abrupt("return");case 14:if("Reativado"!==n["Situa\xe7\xe3o"]){a.next=21;break}return a.delegateYield(j.a.mark((function a(){var t,o,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(r in t={},o=function(e){nt.forEach((function(a){var o=a.field,r=a.label;e===r&&["renavam","nChassi","anoChassi","anoCarroceria"].includes(o)&&(t[o]=n[e])}))},n)o(r);return t.situacao="Reativa\xe7\xe3o solicitada",a.next=6,e.setState(Object(h.a)(Object(h.a)({},t),{},{reactivated:!0}));case 6:return a.abrupt("return",{v:void 0});case 7:case"end":return a.stop()}}),a)}))(),"t0",16);case 16:if("object"!==typeof(s=a.t0)){a.next=19;break}return a.abrupt("return",s.v);case 19:a.next=22;break;case 21:"discharged"===c&&(i="Ve\xedculo baixado.",l="A placa informada corresponde a um ve\xedculo baixado. Para reativar seu cadastro, v\xe1 para Ve\xedculos -> Baixa -> 'Gerenciar Ve\xedculos Baixados'.",e.setState({customTitle:i,customMessage:l,openAlertDialog:!0,placa:null,reactivated:!1}),t="");case 22:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleEquipa=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=e.props.redux[t],r=[],n=[],a.next=4,e.setState({type:t});case 4:!1===e.state.addEquipa&&(e.state[t]&&(n=e.state[t]),o.forEach((function(e){var a=e.item;n.forEach((function(e){e.toLowerCase()===a.toLowerCase()&&r.push(a)}))})),r.forEach((function(a){return e.setState(Object(f.a)({},a,!0))}))),e.setState({addEquipa:!e.state.addEquipa});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleCheck=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.state.type,n=e.props.redux[r]){a.next=3;break}return a.abrupt("return");case 3:return i=[],l=[],"equipamentos"===r&&(c="equipamentosId"),"acessibilidade"===r&&(c="acessibilidadeId"),a.next=8,e.setState(Object(h.a)(Object(h.a)({},e.state),{},Object(f.a)({},t,!e.state[t])));case 8:n.forEach((function(a){var t=a.id,o=a.item;!0===e.state[o]&&(i.push(o),l.push(t))})),i[0]?e.setState((o={},Object(f.a)(o,r,i),Object(f.a)(o,c,l),o)):"equipamentos"===r?e.setState(Object(f.a)({equipamentos:[]},c,[])):"acessibilidade"===r&&e.setState(Object(f.a)({acessibilidade:[]},c,[]));case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleCadastro=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m,p,v,h,b,g,E,x,S,O,y,w,C,k,D,N,I,P,F,z,M;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(I in r=e.state,n=r.equipamentosId,i=r.acessibilidadeId,l=r.pbt,c=r.compartilhadoId,s=r.modeloChassiId,d=r.originalVehicle,u=r.getUpdatedValues,m=r.modeloCarroceriaId,p=r.selectedEmpresa,v=r.showPendencias,h=r.obs,b=r.form,g=r.demand,E=r.demandFiles,x=r.reactivated,S=p.codigoEmpresa,O=null===g||void 0===g?void 0:g.veiculoId,y=(null===g||void 0===g||null===(o=g.history)||void 0===o?void 0:o.length)||0,C="Cadastro solicitado",k={},la.forEach((function(a){a.forEach((function(a){for(var t in e.state)t===a.field&&""!==e.state[t]&&Object.assign(k,Object(f.a)({},t,e.state[t]))}))})),k.delegatarioCompartilhado,k.modeloChassi,k.modeloCarroceria,k.apolice,D=k.numeroDae,N=Object(Y.a)(k,["delegatarioCompartilhado","modeloChassi","modeloCarroceria","apolice","numeroDae"]),Object.assign(N,{codigoEmpresa:S,situacao:C,pbt:l,modeloChassiId:s,modeloCarroceriaId:m,obs:h,equipamentosId:n,acessibilidadeId:i,apolice:"Seguro n\xe3o cadastrado"}),N)""===N[I]&&delete N[I];if(console.log(N),N.compartilhadoId=c&&c,g&&d&&(N=u(d,N)),P=A.a.decamelizeKeys(N),O){a.next=16;break}return a.next=14,T.a.post("/api/veiculos",P).then((function(e){w=e.data})).catch((function(e){return console.log(e)}));case 14:a.next=21;break;case 16:return g&&t&&!v&&(C="Seguro n\xe3o cadastrado"),P.veiculo_id=O,P.situacao=C,a.next=21,T.a.put("/api/veiculos",P);case 21:"string"===typeof(F=e.state.info)&&D&&(F+="\n\n N\xba Documento Arrecada\xe7\xe3o Estadual: ".concat(D)),z={empresaId:null===p||void 0===p?void 0:p.codigoEmpresa,veiculoId:w,history:{info:F,numeroDae:D,files:b},metadata:{veiculoId:w},demandFiles:E,historyLength:y,approved:t},g&&(z.id=null===g||void 0===g?void 0:g.id),x&&(z.subject="Reativa\xe7\xe3o de ve\xedculo"),Ye(z).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),t?e.toast():(M="Solicita\xe7\xe3o de cadastro enviada.",g&&g.status.match("Aguardando")&&(M="Pend\xeancias para o cadastro registradas."),e.toast(M)),g?setTimeout((function(){e.props.history.push("/solicitacoes")}),1500):e.resetState();case 29:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleFiles=function(){var a=Object(w.a)(j.a.mark((function a(t,o){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t||!t[0]){a.next=5;break}return a.next=3,e.setState(Object(f.a)({},o,t[0]));case 3:r=Me(t,e.state,xa),e.setState(Object(h.a)(Object(h.a)({},r),{},{fileToRemove:null}));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.removeFile=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.state.form,r=qe(t,o),e.setState(Object(h.a)(Object(h.a)({},e.state),r));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.resetState=function(){var a,t=e.props.redux,o=t.empresas,r=t.veiculos,n=t.equipamentos,i=t.acessibilidade,l=n.concat(i),c={},s={};la.forEach((function(a){return a.forEach((function(a){return e.setState(Object(f.a)({},a.field,""))}))})),xa.forEach((function(e){var a=e.name;Object.assign(c,Object(f.a)({},a,void 0))})),l.forEach((function(a){return e.setState(Object(f.a)({},a.item,!1))})),o&&1===o.length&&(s={selectedEmpresa:o[0],razaoSocial:null===(a=o[0])||void 0===a?void 0:a.razaoSocial,frota:r}),e.setState(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},c),{acessibilidade:[],acessibilidadeId:[],equipamentos:[],equipamentosId:[]}),l),{},{form:void 0,info:void 0,activeStep:0},s))},e.closeEquipa=function(){return e.setState({addEquipa:!1})},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.removePartilha=function(){return e.setState({compartilhado:void 0})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.closeEquipa()},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,o,r,n,i,l,c,s,d,u,m,p,v,b,g,E;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.redux,i=n.equipamentos,l=n.acessibilidade,c=n.empresas,s=n.veiculos,d=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(o=t.state)||void 0===o?void 0:o.demand,c&&1===c.length&&this.setState({selectedEmpresa:c[0],razaoSocial:null===(r=c[0])||void 0===r?void 0:r.razaoSocial,frota:s}),d&&(m=!1,v=Te(d,n),b=(null===d||void 0===d?void 0:d.history)&&(null===(u=d.history.reverse().find((function(e){return e.hasOwnProperty("numeroDae")})))||void 0===u?void 0:u.numeroDae),console.log("\ud83d\ude80 ~ file: CadVeiculo.jsx ~ line 75 ~ VeiculosContainer ~ componentDidMount ~ demandState",v),d.status.match("Pend\xeancias")&&(p=!0,v.obs=void 0),v.situacao.match("Reativa\xe7\xe3o")&&(m=!0),this.setState(Object(h.a)(Object(h.a)({},v),{},{numeroDae:b,activeStep:3,reactivated:m,existingPendencias:p}))),g={},E={},i.forEach((function(e){return Object.assign(g,Object(f.a)({},null===e||void 0===e?void 0:e.item,!1))})),l.forEach((function(e){return Object.assign(E,Object(f.a)({},null===e||void 0===e?void 0:e.item,!1))})),e.next=8,this.setState(Object(h.a)(Object(h.a)({},g),E));case 8:document.addEventListener("keydown",this.escFunction,!1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({}),document.removeEventListener("keydown",this.escFunction,!1)}},{key:"render",value:function(){var e=this.state,a=e.confirmToast,t=e.toastMsg,n=e.activeStep,i=e.openAlertDialog,l=e.alertType,c=e.steps,s=e.selectedEmpresa,d=e.dropDisplay,u=e.form,m=e.demand,p=e.placa,f=e.demandFiles,v=e.showPendencias,h=e.info,b=e.resetShared,g=e.customMessage,E=e.customTitle,x=e.obs,S=e.existingPendencias,O=this.props.redux;return r.a.createElement(o.Fragment,null,r.a.createElement(Ua,{links:["Ve\xedculos","/veiculos"],text:"Cadastro de ve\xedculo",demand:m,selectedEmpresa:s}),r.a.createElement(Ga,{activeStep:n,steps:c,setActiveStep:this.setActiveStep}),r.a.createElement(ua,{data:this.state,redux:O,handleInput:this.handleInput,handleBlur:this.handleBlur,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck,closeEquipa:this.closeEquipa,match:this.props.match,resetShared:b,removePartilha:this.removePartilha}),2===n&&r.a.createElement(ya,{parentComponent:"cadastro",dropDisplay:d,formData:u,handleFiles:this.handleFiles,demandFiles:f,fileToRemove:this.state.fileToRemove,removeFile:this.removeFile}),3===n&&r.a.createElement(qa,{parentComponent:"cadastro",data:this.state,files:this.state.form,filesForm:xa,form:la}),s&&r.a.createElement(Ya,{activeStep:n,lastStep:c.length-1,setActiveStep:this.setActiveStep,demand:m,setShowPendencias:this.setShowPendencias,showPendencias:v,info:h,handleSubmit:this.handleCadastro,handleInput:this.handleInput,addObs:m&&!S&&!v,obs:x,disabled:"string"!==typeof p||""===p}),r.a.createElement(ae,{open:a,close:this.toast,msg:t}),i&&r.a.createElement(ot,{open:i,close:this.toggleDialog,alertType:l,customMessage:g,customTitle:E}))}}]),t}(o.PureComponent)),dt=function(e,a){var t=window.location.pathname;He.forEach((function(e,a){return e.path=He[a].path.replace("/veiculos","").replace("/solicitacoes","").replace("/empresas","")}));var o=He.find((function(e){return t.match(null===e||void 0===e?void 0:e.path)})),r=null===o||void 0===o?void 0:o.subject,n=null===o||void 0===o?void 0:o.primaryKey,i=a.find((function(a){return a.subject===r&&a[n]==e&&!1===a.completed}));return i||!1},ut=[[{field:"placa",label:"Placa",autoComplete:!0,collection:"frota"},{field:"compartilhado",label:"Delegat\xe1rio Compartilhado",disabled:!0,notRequired:!0},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Comercial","Comercial Executivo","Convencional","Convencional Executivo","Leito","Leito e Executivo","Semi-Leito","Semi-Leito Executivo"]},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Aliena\xe7\xe3o Fiduci\xe1ria","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50},{field:"renavam",label:"Renavam",margin:"normal",disabled:!0},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17,disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",disabled:!0},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",disabled:!0},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",disabled:!0},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",disabled:!0},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,disabled:!0}]].concat([[{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piquesPoltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150},{field:"eixos",label:"Eixos",margin:"normal",type:"number",max:8},{field:"pneumaticosDianteiro",label:"Pneum\xe1ticos Eixo Dianteiro",margin:"normal",type:"number",max:12},{field:"pneumaticosTraseiro",label:"Pneum\xe1ticos Eixo Traseiro",margin:"normal",type:"number",max:18},{field:"pesoDianteiro",label:"Peso Dianteiro (t)",margin:"normal",type:"number",max:15},{field:"pesoTraseiro",label:"Peso Traseiro (t)",margin:"normal",type:"number",max:18},{field:"cilindros",label:"Cilindros",margin:"normal",type:"number",max:12,step:1,disabled:!0},{field:"potencia",label:"Pot\xeancia (cv)",margin:"normal",type:"number",max:600,disabled:!0},{field:"numeroDae",label:"N\xba Documento Arrecada\xe7\xe3o Estadual",maxLength:40}]]).concat([[]]).concat([[]]),mt=Object(Z.a)((function(e){return{button:{marginRight:"15px"}}})),pt=function(e){var a=e.handleInput,t=e.handleBlur,o=e.data,n=e.handleCheck,i=e.handleEquipa,l=e.altPlacaOption,c=e.showAltPlaca,s=e.empresas,d=e.compartilhados,u=e.equipamentos,m=e.acessibilidade,p=e.close,f=o.activeStep,v=o.subtitle,h=o.placa,b=o.selectedEmpresa,g=o.addEquipa,E=o.demand,x=o.type,S=mt().button,O=ut[f],y=u;return"acessibilidade"===x&&(y=m),r.a.createElement("div",{className:"flex center"},r.a.createElement("header",{className:"flex center",style:{marginBottom:"10px",width:"100%"}},r.a.createElement(Ge,{data:o,empresas:s,compartilhados:d,headerTitle:b&&"Altera\xe7\xe3o de dados ".concat(h||""," - ").concat(null===b||void 0===b?void 0:b.razaoSocial),handleInput:a,handleBlur:t})),b&&r.a.createElement("main",null,f<2&&r.a.createElement("section",{className:"paper"},r.a.createElement(ea,{subtitle:v[f]}),r.a.createElement(Qe,{form:O,data:o,empresas:s,compartilhados:d,handleBlur:t,handleInput:a,disableSome:E?["placa","delegatario"]:["delegatario"]})),0===f&&r.a.createElement("section",{className:"flex center"},r.a.createElement(oa.a,{variant:"outlined",size:"small",color:"primary",className:S,onClick:function(){return i("equipamentos")}},r.a.createElement(na.a,null),"Equipamentos"),r.a.createElement(oa.a,{variant:"outlined",size:"small",color:"primary",className:S,onClick:function(){return i("acessibilidade")}},r.a.createElement(na.a,null),"Acessibilidade")),l&&h.match("[a-zA-Z]{3}[-]?\\d{4}")&&r.a.createElement("div",{className:"addNewDiv"},r.a.createElement("span",{onClick:function(){return c()}}," \u2192 Clique aqui para alterar a placa para o formato Mercosul.")),g&&r.a.createElement(sa,{type:x,equipamentos:y,close:p,handleCheck:n,data:o})))};function ft(e){var a=e.open,t=e.close,o=e.title,n=e.header,i=e.inputNames,l=e.inputLabels,c=e.fileInputName,s=e.confirm,d=e.handleInput,u=e.handleFiles,m=e.values,p=e.formData,f=e.dropDisplay,v=e.type,h=void 0===v?"text":v,b=!0,g=function(e,a){if("newPlate"===e)return a.length<9&&a.match("[a-zA-Z]{3}?[-]\\d{1}\\w{1}\\d{2}")?(b=!1,!1):(b=!0,!0)};return r.a.createElement(Za.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(tt.a,{id:"form-dialog-title"},o),r.a.createElement(et.a,null,r.a.createElement(at.a,null,n),r.a.createElement("br",null),i.map((function(e,a){return r.a.createElement(Xe.a,{key:a,autoFocus:"newPlate"===e&&!0,name:e,label:l[a],onChange:d,values:m[a],type:h,error:g(e,m[a]),fullWidth:!0,InputLabelProps:{shrink:!0}})})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ga,{title:"Anexar arquivo",name:c,formData:p,dropDisplay:f,handleFiles:u})),r.a.createElement(Qa.a,null,r.a.createElement(oa.a,{onClick:t,color:"primary"},"Cancelar"),r.a.createElement(oa.a,{onClick:s,color:"primary",disabled:b},"Confirmar")))}var vt=Ee(["veiculos","empresas","compartilhados","equipamentos","acessibilidade","getFiles/vehicleDocs","parametros"],function(e){Object(D.a)(t,e);var a=Object(N.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={stepTitles:["Informe a placa para alterar os dados abaixo ou mantenha as informa\xe7\xf5es atuais e clique em avan\xe7ar","Altere os dados desejados abaixo e clique em avan\xe7ar","Anexe os documentos solicitados","Revis\xe3o das informa\xe7\xf5es e deferimento"],steps:["Alterar dados do Ve\xedculo","Alterar dados adicionais","Documentos","Revis\xe3o"],subtitle:["Informe os dados do ve\xedculo.","Informa\xe7\xf5es adicionais","Anexe os arquivos solicitados","Revis\xe3o"],empresas:[],razaoSocial:"",compartilhadoId:"",frota:[],toastMsg:"Dados atualizados!",confirmToast:!1,activeStep:0,files:[],openAlertDialog:!1,altPlaca:!1,newPlate:"",placa:"",addEquipa:!1,dropDisplay:"Clique ou arraste para anexar",showPendencias:!1},e.setActiveStep=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.props.redux.parametros[0]&&e.props.redux.parametros[0],r=o.inputValidation,"next"!==t||!r){a.next=9;break}if(n=e.props,i=n.checkBlankInputs,l=n.checkInputErrors,c=l("sendState"),s=i(ut[e.state.activeStep],e.state),!c){a.next=6;break}return e.setState(Object(h.a)(Object(h.a)({},e.state),c)),a.abrupt("return");case 6:if(!s){a.next=9;break}return e.setState(Object(h.a)(Object(h.a)({},e.state),s)),a.abrupt("return");case 9:d=e.state.activeStep,"next"===t&&e.setState({activeStep:d+1}),"back"===t&&e.setState({activeStep:d-1}),"reset"===t&&e.setState({activeStep:0});case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.props.redux,r=o.veiculos,n=o.empresas,i=o.equipamentos,l=t.target,c=l.name,s=l.value,"razaoSocial"!==c){a.next=13;break}if(!(d=n.find((function(e){return e.razaoSocial===s})))){a.next=11;break}return a.next=6,e.setState({razaoSocial:d.razaoSocial,selectedEmpresa:d});case 6:s!==d.razaoSocial&&e.setState({selectedEmpresa:void 0}),u=r.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:u}),a.next=13;break;case 11:e.setState({selectedEmpresa:void 0,frota:[]}),e.reset();case 13:"placa"===c&&e.state.frota&&(e.state.frota.find((function(e){return e.placa===s}))||i.forEach((function(a){return e.setState(Object(f.a)({},a,!1))}))),"utilizacao"===c&&e.setState({distanciaMinima:void 0,distanciaMaxima:void 0}),"newPlate"===c?"string"===typeof(m=s)&&((m=m.replace(/[a-z]/g,(function(e){return e.toUpperCase()}))).match("[A-Z]{3}[0-9]{1}[A-Z]{1}[0-9]{2}")&&(m=m.replace(/(\w{3})/,"$1-")),e.setState(Object(h.a)(Object(h.a)({},e.state),{},{newPlate:m}))):e.setState(Object(f.a)({},c,s));case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.getId=function(){var a=Object(w.a)(j.a.mark((function a(t,o,r,n,i,l){var c,s,d,u,m,p;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=r.filter((function(e){return e[i].toLowerCase().match(o.toLowerCase())})),""===o&&e.setState((c={},Object(f.a)(c,t,""),Object(f.a)(c,n,""),c)),!s[0]){a.next=10;break}if(d=s[0][i],u=s[0][l],""===o){a.next=8;break}return a.next=8,e.setState((m={},Object(f.a)(m,t,d),Object(f.a)(m,n,u),m));case 8:a.next=14;break;case 10:return a.next=12,e.setState((p={},Object(f.a)(p,t,""),Object(f.a)(p,n,""),p));case 12:e.setState({openAlertDialog:!0,alertType:"empresaNotFound"}),document.getElementsByName(t)[0].focus();case 14:case"end":return a.stop()}}),a)})));return function(e,t,o,r,n,i){return a.apply(this,arguments)}}(),e.capitalize=function(e,a){if(a&&"string"===typeof a)return"utilizacao"===e&&("RODOVIARIO"===a&&(a="Convencional"),"EXECUTIVO"===a&&(a="Convencional Executivo"),"URBANO"===a&&(a="Comercial"),"URBANO EXECUTIVO"===a&&(a="Comercial Executivo"),"SEMI LEITO"===a&&(a="Semi-Leito"),"SEMI LEITO - EXECUTIVO"===a&&(a="Semi-Leito Executivo"),"LEITO"===a&&(a="Leito"),"LEITO E EXECUTIVO"===a&&(a="Leito e Executivo")),"dominio"===e&&"Sim"===a&&(a="Leasing"),"dominio"===e&&"N\xe3o"===a&&(a="Ve\xedculo pr\xf3prio"),a},e.handleBlur=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m,p,v,b,g,E,x,S,O,y,w,C,k,D,N,I,A,P,T,F;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.props.redux,r=o.empresas,n=o.compartilhados,i=o.logs,l=o.equipamentos,c=o.acessibilidade,s=o.parametros,d=s[0].distanciaPoltronas,u=e.state,m=u.frota,p=u.demand,v=u.utilizacao,b=u.distanciaMinima,g=u.distanciaMaxima,E=t.target.name,x=t.target.value,(S=me())?e.setState({errors:S}):e.setState({errors:void 0}),a.t0=E,a.next="compartilhado"===a.t0?7:"delegatario"===a.t0?9:"distanciaMinima"===a.t0?12:"distanciaMaxima"===a.t0?16:"pesoDianteiro"===a.t0?20:"pesoTraseiro"===a.t0?22:"poltronas"===a.t0?24:26;break;case 7:return e.getId(E,x,n,"compartilhadoId","razaoSocial","codigoEmpresa"),a.abrupt("break",27);case 9:return a.next=11,e.getId(E,x,r,"codigoEmpresa","razaoSocial","codigoEmpresa");case 11:return a.abrupt("break",27);case 12:return v&&(O=rt(v,b,d)),b&&g&&+b>+g&&(O="A Dist\xe2ncia m\xednima n\xe3o pode ser superior \xe0 dist\xe2ncia m\xe1xima."),O&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xednima inv\xe1lida.",customMessage:O,distanciaMinima:""}),a.abrupt("break",27);case 16:return v&&(y=rt(v,g,d)),g&&b&&+g<+b&&(y="A Dist\xe2ncia m\xe1xima n\xe3o pode ser inferior \xe0 dist\xe2ncia m\xednima."),y&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xe1xima inv\xe1lida.",customMessage:y,distanciaMaxima:""}),a.abrupt("break",27);case 20:case 22:case 24:return ct(Object(Pe.a)(e),E),a.abrupt("break",27);case 26:case 27:if(!("placa"===E&&x.length>2&&Array.isArray(e.state.frota))){a.next=47;break}if(!(w=e.state.frota.find((function(e){return"string"===typeof x?e.placa.toLowerCase().match(x.toLowerCase()):e.placa.match(x)})))||"object"!==typeof w){a.next=46;break}return D=e.capitalize("utilizacao",null===(C=w)||void 0===C?void 0:C.utilizacao)||null,N=e.capitalize("dominio",null===(k=w)||void 0===k?void 0:k.dominio)||null,I={},l.concat(c).forEach((function(e){var a=e.item;return Object.assign(I,Object(f.a)({},a,!1))})),w=Object.assign({},w,{utilizacao:D,dominio:N}),A=Object.freeze(w),a.next=37,e.setState(Object(h.a)(Object(h.a)(Object(h.a)({},I),w),{},{originalVehicle:A,disable:!0}));case 37:if(void 0!==w&&w.hasOwnProperty("empresa")&&e.setState({delegatario:w.empresa}),p){a.next=46;break}if("Solicita\xe7\xe3o j\xe1 cadastrada",T="J\xe1 existe uma demanda aberta para o ve\xedculo de placa ".concat(w.placa,'. Para acess\xe1-la, clique em "Solicita\xe7\xf5es" no menu superior.'),!dt(null===(P=w)||void 0===P?void 0:P.veiculoId,i)){a.next=46;break}return a.next=44,e.setState({customTitle:"Solicita\xe7\xe3o j\xe1 cadastrada",customMessage:T,openAlertDialog:!0,delegatario:""});case 44:return e.reset(),a.abrupt("return");case 46:""===e.state.placa||w||(F={},m[0]&&Object.keys(m[0]).forEach((function(e){return F[e]=""})),e.setState({alertType:"plateNotFound",openAlertDialog:!0}),e.setState(Object(h.a)(Object(h.a)({},F),{},{disable:!1})));case 47:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleEquipa=function(a){var t=e.props.redux[a],o=[],r=[];!1===e.state.addEquipa&&(e.state[a]&&(r=e.state[a]),t.forEach((function(e){var a=e.item;r.forEach((function(e){e.toLowerCase()===a.toLowerCase()&&o.push(a)}))})),o.forEach((function(a){return e.setState(Object(f.a)({},a,!0))})),console.log(e.state)),e.setState({addEquipa:!e.state.addEquipa,type:a})},e.handleCheck=function(){var a=Object(w.a)(j.a.mark((function a(t,o){var r,n,i,l,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.props.redux[o]){a.next=3;break}return a.abrupt("return");case 3:return i=[],l=[],"equipamentos"===o&&(c="equipamentosId"),"acessibilidade"===o&&(c="acessibilidadeId"),a.next=8,e.setState(Object(h.a)(Object(h.a)({},e.state),{},Object(f.a)({},t,!e.state[t])));case 8:n.forEach((function(a){var t=a.id,o=a.item;!0===e.state[o]&&(i.push(o),l.push(t))})),i[0]?e.setState((r={},Object(f.a)(r,o,i),Object(f.a)(r,c,l),r)):"equipamentos"===o?e.setState(Object(f.a)({equipamentos:[]},c,[])):"acessibilidade"===o&&e.setState(Object(f.a)({acessibilidade:[]},c,[]));case 10:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.showAltPlaca=function(){e.setState({altPlaca:!0,title:"Altera\xe7\xe3o de placa",header:"Para alterar a placa do ve\xedculo para o padr\xe3o Mercosul, digite a placa no campo abaixo e anexe o CRLV atualizado do ve\xedculo."})},e.updatePlate=function(){e.setState({placa:e.state.newPlate}),e.toggleDialog()},e.handleSubmit=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m,p,v,h,b,g,E,x,S,O,y,w,C,k,D,N,I;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.state,n=r.veiculoId,i=r.pbt,l=r.codigoEmpresa,c=r.originalVehicle,s=r.showPendencias,d=r.getUpdatedValues,u=r.numeroDae,m=r.compartilhadoId,p=r.newPlate,v=r.selectedEmpresa,h=r.equipamentosId,b=r.acessibilidadeId,g=r.demand,E=r.form,x=r.demandFiles,S=(null===g||void 0===g||null===(o=g.history)||void 0===o?void 0:o.length)||0,O={},ut.forEach((function(a){a.forEach((function(a){for(var t in e.state)t!==a.field||a.disabled||e.state[t]&&Object.assign(O,Object(f.a)({},t,e.state[t]))}))})),O=Object.assign(O,{compartilhadoId:m,pbt:i,equipamentosId:h,acessibilidadeId:b}),g&&d&&(O=d(c,O)),(y=O).delegatario,y.compartilhado,delete(w=Object(Y.a)(y,["delegatario","compartilhado"])).numeroDae,p&&""!==p&&(w.placa=p),e.state.compartilhado&&""!==e.state.compartilhado||!(null===c||void 0===c?void 0:c.compartilhadoId)||(w.compartilhadoId="NULL"),void 0!==t||0!==Object.keys(w).length){a.next=12;break}return e.setState({openAlertDialog:!0,customTitle:"Nenhuma altera\xe7\xe3o",customMessage:"N\xe3o foi realizada nenhuma altera\xe7\xe3o na solicita\xe7\xe3o aberta. Para prosseguir, altere algum dos campos ou adicione uma justificativa."}),a.abrupt("return");case 12:if("string"===typeof(C=e.state.info)&&(C+="\n\n N\xba Documento Arrecada\xe7\xe3o Estadual: ".concat(u)),(k=A.a.decamelizeKeys(w)).codigoEmpresa=l,k.veiculoId=n,D={alteracoes:w,info:C,numeroDae:u,files:E},N={empresaId:null===v||void 0===v?void 0:v.codigoEmpresa,veiculoId:n,history:D,demandFiles:x,metadata:{veiculoId:n},historyLength:S,approved:t},g&&(N.id=null===g||void 0===g?void 0:g.id),Ye(N).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),!g||!t||s){a.next=25;break}return v.codigoEmpresa!==l&&(k.apolice="Seguro n\xe3o cadastrado"),console.log("\ud83d\ude80 ~ file: AltDados.jsx ~ line 450 ~ AltDados ~ handleSubmit= ~ requestObject",k),a.next=25,T.a.put("/api/veiculos",k);case 25:t?e.toast():(I="Solicita\xe7\xe3o de altera\xe7\xe3o de dados enviada.",g&&g.status.match("Aguardando")&&(I="Pend\xeancias para a altera\xe7\xe3o de dados registradas."),e.toast(I)),g?setTimeout((function(){e.props.history.push("/solicitacoes")}),1500):setTimeout((function(){e.reset()}),1200);case 27:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleFiles=function(){var a=Object(w.a)(j.a.mark((function a(t,o){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t||!t[0]){a.next=5;break}return a.next=3,e.setState(Object(f.a)({},o,t[0]));case 3:r=Me(t,e.state,Sa),e.setState(Object(h.a)(Object(h.a)({},r),{},{fileToRemove:null}));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.removeFile=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.state.form,r=qe(t,o),e.setState(Object(h.a)(Object(h.a)({},e.state),r));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({altPlaca:!e.state.altPlaca})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.closeEquipa=function(){return e.setState({addEquipa:!1})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e.reset=function(){var a,t=e.props.redux,o=t.empresas,r=t.veiculos,n=t.equipamentos,i=t.acessibilidade,l=n.concat(i),c={},s={};ut.forEach((function(a){return a.forEach((function(a){return e.setState(Object(f.a)({},a.field,""))}))})),Sa.forEach((function(e){var a=e.name;Object.assign(c,Object(f.a)({},a,void 0))})),l.forEach((function(a){return e.setState(Object(f.a)({},a.item,!1))})),o&&1===o.length&&(s={selectedEmpresa:o[0],razaoSocial:null===(a=o[0])||void 0===a?void 0:a.razaoSocial,frota:r}),e.setState(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},c),{acessibilidade:[],acessibilidadeId:[],equipamentos:[],equipamentosId:[]}),l),{},{form:void 0,info:void 0,activeStep:0},s))},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.closeEquipa()},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,o,r,n,i,l,c,s,d,u,m,p,v,b,g,E,x,S;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.redux,i=n.equipamentos,l=n.acessibilidade,c=n.empresas,s=n.veiculos,d=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(o=t.state)||void 0===o?void 0:o.demand,c&&1===c.length&&this.setState({selectedEmpresa:c[0],razaoSocial:null===(r=c[0])||void 0===r?void 0:r.razaoSocial,frota:s}),d&&(m=Te(d,n),p=m.originalVehicle,v=m.getUpdatedValues,b=m.alteracoes,g=m.compartilhadoId,E=(null===d||void 0===d?void 0:d.history)&&(null===(u=d.history.reverse().find((function(e){return e.hasOwnProperty("numeroDae")})))||void 0===u?void 0:u.numeroDae),v(p,b),"NULL"===g&&(m.compartilhado=""),this.setState(Object(h.a)(Object(h.a)({},m),{},{numeroDae:E,activeStep:3}))),x={},S={},i.forEach((function(e){return Object.assign(x,Object(f.a)({},null===e||void 0===e?void 0:e.item,!1))})),l.forEach((function(e){return Object.assign(S,Object(f.a)({},null===e||void 0===e?void 0:e.item,!1))})),e.next=8,this.setState(Object(h.a)(Object(h.a)({},x),S));case 8:document.addEventListener("keydown",this.escFunction,!1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.props.redux,a=e.empresas,t=e.compartilhados,n=e.equipamentos,i=e.acessibilidade,l=this.state,c=l.confirmToast,s=l.toastMsg,d=l.stepTitles,u=l.activeStep,m=l.steps,p=l.altPlaca,f=l.selectedEmpresa,v=l.openAlertDialog,h=l.alertType,b=l.customTitle,g=l.customMessage,E=l.dropDisplay,x=l.form,S=l.title,O=l.header,y=l.newPlate,j=l.demand,w=l.showPendencias,C=l.info,k=l.demandFiles;return r.a.createElement(o.Fragment,null,r.a.createElement(Ua,{links:["Ve\xedculos","/veiculos"],text:"Altera\xe7\xe3o de dados",demand:j}),r.a.createElement(Ga,{activeStep:u,steps:m,stepTitles:d,setActiveStep:this.setActiveStep}),r.a.createElement(pt,{data:this.state,empresas:a,compartilhados:t,equipamentos:n,acessibilidade:i,setActiveStep:this.setActiveStep,altPlacaOption:0===u,handleInput:this.handleInput,handleBlur:this.handleBlur,showAltPlaca:this.showAltPlaca,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck,close:this.closeEquipa}),2===u&&r.a.createElement(ya,{parentComponent:"altDados",dropDisplay:E,formData:x,handleFiles:this.handleFiles,demandFiles:k,fileToRemove:this.state.fileToRemove,removeFile:this.removeFile}),3===u&&r.a.createElement(qa,{parentComponent:"altDados",data:this.state,form:ut,files:this.state.form,filesForm:Sa}),f&&r.a.createElement(Ya,{activeStep:u,lastStep:m.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep,showPendencias:w,setShowPendencias:this.setShowPendencias,info:C,handleInput:this.handleInput,demand:j}),r.a.createElement(ae,{open:c,close:this.toast,msg:s}),r.a.createElement(ft,{open:p,close:this.toggleDialog,title:S,header:O,inputNames:["newPlate"],inputLabels:["Alterar Placa"],fileInputName:"newPlateDoc",values:[y],handleInput:this.handleInput,handleFiles:this.handleFiles,confirm:this.updatePlate,dropDisplay:E,formData:x}),v&&r.a.createElement(ot,{open:v,close:this.closeAlert,alertType:h,customMessage:g,customTitle:b}))}}]),t}(o.Component)),ht=t(455),bt=t(253),gt=t.n(bt),Et=t(155),xt=t.n(Et),St=[{field:"seguradora",label:"Seguradora",autoComplete:!0,collection:"seguradoras",width:150},{field:"apolice",label:"Ap\xf3lice",autoComplete:!0,collection:"seguros",maxLength:25,width:150},{type:"date",field:"dataEmissao",label:"In\xedcio da vig\xeancia",width:150},{type:"date",field:"vencimento",label:"Vencimento",width:150}],Ot=[{title:"Contrato Social",name:"contratoSocial"},{title:"Procura\xe7\xe3o",name:"procuracao"},{title:"Ap\xf3lice",name:"apoliceDoc"},{title:"Altera\xe7\xe3o de contrato social",name:"altContratoDoc"},{title:"CRC",name:"crc"}],yt=Object(Z.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"25%",minWidth:310,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"}}}));function jt(e){var a,t=e.empresas,n=e.data,i=e.seguros,l=e.seguradoras,c=e.enableAddPlaca,s=e.handleInput,d=e.handleBlur,u=e.addPlate,m=e.removeFromInsurance,p=e.handleFiles,f=e.handleSubmit,v=e.enableChangeApolice,h=e.showAllPlates,b=e.removeFile,g=e.setShowPendencias,E=n.selectedEmpresa,x=n.placa,S=n.apolice,O=n.addedPlaca,y=n.allVehicles,j=n.frota,w=n.demandFiles,C=n.fileToRemove,k=n.demand,D=n.insurance,N=n.dropDisplay,I=n.apoliceDoc,A=n.showPendencias,P=n.info,T=n.renderedPlacas,F=n.numeroDae;F||(F=(null===k||void 0===k?void 0:k.history)instanceof Array&&(null===k||void 0===k||null===(a=k.history.reverse().find((function(e){return e.numeroDae})))||void 0===a?void 0:a.numeroDae)),n.seguradoras=l;var z=yt(),M=z.textField,L=i.some((function(e){return e.apolice===S}));return r.a.createElement(o.Fragment,null,r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},r.a.createElement(Ua,{links:["Ve\xedculos","/veiculos"],text:"Seguros",demand:k}),r.a.createElement(Ge,{data:n,empresas:t,handleInput:s,handleBlur:d}),E&&r.a.createElement("section",{className:"paper"},r.a.createElement(ea,{subtitle:"Informe os dados do seguro."}),r.a.createElement(Qe,{form:St,data:n,seguros:i,seguradoras:l,handleBlur:d,handleInput:s}),L&&r.a.createElement("div",{className:"addNewDiv"},r.a.createElement("span",{onClick:function(){return v()}}," \u2192 Clique aqui para adicionar nova ap\xf3lice mantendo as placas abaixo selecionadas."))),E&&c&&r.a.createElement("main",{className:"paper",style:{textAlign:"center",color:"#555"}},r.a.createElement("p",null,"Utilize as op\xe7\xf5es abaixo para filtrar, adicionar ou excluir placas desta ap\xf3lice"),r.a.createElement("section",{className:"flex spaceBetween",style:{paddingTop:"17px"}},r.a.createElement("div",null,r.a.createElement(Xe.a,{inputProps:{name:"addedPlaca",list:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Insira a placa",className:M,value:O,onChange:s,onBlur:d}),r.a.createElement(We,{collection:y,field:"placa",value:O}),r.a.createElement(oa.a,{size:"small",variant:"contained",className:z.button,style:{margin:"10px 0 10px 0"},onClick:function(){return u(O)}},r.a.createElement(na.a,null)," Adicionar")),r.a.createElement("div",null,r.a.createElement(Xe.a,{inputProps:{name:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Filtrar",className:M,value:x||"",onChange:s,onBlur:d}),r.a.createElement(xt.a,{style:{marginTop:"18px"}})),k?w[0]&&r.a.createElement("div",{style:{width:"225px",marginTop:"15px"}},r.a.createElement(Ta,{demand:k,collection:"empresaDocs",demandFiles:w,form:Ot,style:{width:"200px"}})):r.a.createElement(ga,{name:"apoliceDoc",formData:I,dropDisplay:N,handleFiles:p,demandFiles:w,removeFile:b,fileToRemove:C,style:{padding:"0 10px",margin:"0 10px",width:"28%",minWidth:"320px"}})),r.a.createElement("section",{className:"flex",style:{margin:"5px 0"}},r.a.createElement(Xe.a,{inputProps:{name:"numeroDae"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"N\xba Documento de Arrecada\xe7\xe3o Estadual (DAE)",className:M,value:F||"",onChange:s,onBlur:d})),r.a.createElement("div",{className:"addNewDiv",style:{justifyContent:"flex-start",padding:"10px"}},r.a.createElement("span",{onClick:function(){return h()}},"\u2192 Clique aqui para selecionar placas")),(null===D||void 0===D?void 0:D.placas)&&(null===D||void 0===D?void 0:D.placas[0])?r.a.createElement("div",{style:{marginTop:"15px"}},"Placas vinculadas a ap\xf3lice ",D.apolice):r.a.createElement("div",{style:{marginTop:"30px"}}),D&&D.placas&&S&&S.length>2&&T&&T[0]&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:{fontSize:"0.7rem",marginBottom:"10px",marginTop:"3px",color:"#787b6e"}},"Selecionado",T.length>1?"s":""," ",T.length," ve\xedculo",T.length>1?"s":""," de ",null===j||void 0===j?void 0:j.length),r.a.createElement("div",{className:"placasChipContainer"},T.map((function(e,a){var t=e.placa,o=e.compartilhado,n=e.outsider,i=e.irregular,l=e.delCompartilhado,c=e.owner;return r.a.createElement("div",{onMouseOver:function(e){return function(e,a){var t=e.compartilhado,o=e.outsider,r=e.irregular,n=e.delCompartilhado,i=e.owner;a.target.title="Ve\xedculo pr\xf3prio",t&&(a.target.title="Ve\xedculo pr\xf3prio. Compartilhado por: ".concat(n)),o&&(a.target.title="Autorizado compartilhamento. Propriet\xe1rio: ".concat(i)),r&&(a.target.title="N\xc3O autorizado compartilhamento! Propriet\xe1rio: ".concat(i))}({compartilhado:o,outsider:n,irregular:i,delCompartilhado:l,owner:c},e)},key:a},r.a.createElement(ht.a,{key:a,label:t,onDelete:function(){return m(t)},className:o?"chip-compartilhado":n?"chip-outsider":i?"chip-irregular":"chip",variant:"outlined"}))})))))),S&&(D||c)&&!k?r.a.createElement("div",{style:{minHeight:"60px",position:"flex"}},r.a.createElement(oa.a,{size:"small",color:"primary",className:"saveButton",variant:"contained",onClick:function(){return f()}},"Salvar ",r.a.createElement("span",null,"\xa0\xa0 ")," ",r.a.createElement(gt.a,null))):E&&k?r.a.createElement(Ya,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:k,setShowPendencias:g,showPendencias:A,info:P,handleSubmit:f,handleInput:s}):null)}var wt=function(e){var a=e.items,t=e.title,o=e.data,n=e.close,i=e.selectAll,l=e.handleCheck,c=e.selectAllPlates;return r.a.createElement("div",{className:"popUpWindow row"},r.a.createElement("h6",null,t," Clique em \"X\" ou pressione 'esc' para voltar"),r.a.createElement("div",{style:{margin:"10px 0",fontSize:"0.8rem"}},r.a.createElement("input",{id:"all",type:"checkbox",checked:!0===i,onChange:function(){return c()}}),r.a.createElement("label",{htmlFor:"all"},i?"Desmarcar todas selecionadas":"Selecionar todas")),r.a.createElement("main",{className:"checkListContainer"},a.map((function(e,a){return r.a.createElement("div",{className:"checkListItem",key:a},r.a.createElement("input",{id:a,type:"checkbox",checked:!0===o[e],onChange:function(){return l(e)}}),r.a.createElement("label",{htmlFor:a},e))}))),r.a.createElement(ca,{close:n}))};function Ct(e){var a=e.open,t=e.close,o=e.title,n=e.helperMessage,i=e.marca,l=e.marcas,c=e.selectMarca,s=e.newElement,d=e.handleInput,u=e.addNewElement;return r.a.createElement("div",null,r.a.createElement(Za.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(tt.a,{id:"form-dialog-title"},o),r.a.createElement(et.a,null,r.a.createElement(at.a,null,n),r.a.createElement("div",{className:"editFields"},l&&r.a.createElement("div",{className:"configMarca"},r.a.createElement(Xe.a,{onChange:c,value:i,label:"Selecione uma marca",select:!0,InputLabelProps:{shrink:!0},SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},l.map((function(e,a){var t=e.marca;return r.a.createElement($e.a,{key:a,value:t},t)})))),r.a.createElement("div",{className:"configField"},r.a.createElement(Xe.a,{autoFocus:!0,margin:"dense",name:"newElement",label:"Inserir",type:"text",onChange:d,value:s,fullWidth:!0}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(Qa.a,null,r.a.createElement(oa.a,{onClick:t,color:"primary"},"Cancelar"),r.a.createElement(oa.a,{onClick:function(){return u()},color:"primary"},"Confirmar"))))}var kt=function(e,a,t){var o,r={name:"nomeSocio",id:"socioId"};document.location.pathname.match("procurador")&&(r={name:"nomeProcurador",id:"procuradorId"});var n,i,l,c,s=a.empresas,d=a.empresaDocs,u=r,m=u.name,p=u.id,f=(null===e||void 0===e?void 0:e.history)||[],v=null===f||void 0===f?void 0:f.length,h=s.find((function(a){return a.codigoEmpresa===(null===e||void 0===e?void 0:e.empresaId)})),b=null===h||void 0===h?void 0:h.razaoSocial,g=[],E=[];(f[0]&&(n=f[v-1]),n)&&(g=(null===(l=n)||void 0===l?void 0:l.newMembers)||[],E=(null===(c=n)||void 0===c?void 0:c.oldMembers)||[]);var x=(null===(o=f.reverse().find((function(e){return e.files})))||void 0===o?void 0:o.files)||[];x[0]&&(i=d.find((function(e){return e.id===x[0]}))),E[0]&&t.forEach((function(e){E.forEach((function(a){e[p]===a[p]&&Object.keys(a).forEach((function(t){e[t]=a[t]}))}))}));var S=t.concat(g).sort((function(e,a){return e[m].localeCompare(a[m])}));return{razaoSocial:b,selectedEmpresa:h,demand:e,latestDoc:i,newMembers:g,oldMembers:E,getUpdatedValues:Dt,filteredSocios:S}};function Dt(e,a){return Object.keys(a).forEach((function(t){a[t]&&e[t]&&("equipamentosId"!==t&&"acessibilidadeId"!==t||a[t].sort((function(e,a){return e-a})),a[t].toString()===e[t].toString()&&delete a[t]),""!==a[t]&&"null"!==a[t]&&a[t]||delete a[t]})),a}var Nt=Ee(["veiculos","empresas","seguradoras","seguros","getFiles/empresaDocs"],function(e){Object(D.a)(t,e);var a=Object(N.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={addedPlaca:"",razaoSocial:"",seguradora:"",deletedVehicles:[],toastMsg:"Seguro atualizado!",confirmToast:!1,dropDisplay:"Clique ou arraste para anexar a ap\xf3lice",showAllPlates:!1,showPendencias:!1,selectAll:!1},e.filterInsurances=Object(w.a)(j.a.mark((function a(){var t,o,r,n,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.props.redux.seguros,o=e.state.selectedEmpresa,r=o.codigoEmpresa,n=t.filter((function(e){return e.codigoEmpresa===r})),a.next=6,T.a.get("/api/allVehicles?codigoEmpresa=".concat(r));case 6:i=a.sent,l=A.a.camelizeKeys(null===i||void 0===i?void 0:i.data)||[],c=l.map((function(e){return e.placa})).sort(),s=l.filter((function(e){return e.codigoEmpresa===r})),d=s.map((function(e){return e.placa})),e.setState({seguros:n,allVehicles:l,frota:s,ownedPlacas:d,allPlates:c});case 12:case"end":return a.stop()}}),a)}))),e.checkExistence=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m,p,f;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=JSON.parse(JSON.stringify(e.props.redux.seguros)),r=e.state,n=r.selectedEmpresa,i=r.demand,l=n.codigoEmpresa,c=Object(v.a)(o.filter((function(e){return e.codigoEmpresa===l}))),s=Object(h.a)({},c.find((function(e){return e.apolice===t}))),i&&e.state.insurance&&(s=e.state.insurance),!(Object.keys(s).length>0)){a.next=11;break}return d=ue()(s.dataEmissao).format("YYYY-MM-DD"),u=ue()(s.vencimento).format("YYYY-MM-DD"),p=(m=s).seguradora,f=m.seguradoraId,a.next=8,e.setState({seguradora:p,seguradoraId:f,dataEmissao:d,vencimento:u,insurance:s});case 8:return a.abrupt("return");case 11:e.setState({dataEmissao:"",vencimento:"",deletedVehicles:[],insurance:{}});case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.renderPlacas=function(a){var t=e.state,o=t.allVehicles,r=t.insurance,n=t.ownedPlacas;if(r){a||(a=r.placas);var i=[];a&&(a.forEach((function(a){var t=o.find((function(e){return e.placa===a}));if(t){var r=t.placa,l=t.empresa,c=t.compartilhado,s={placa:r,owner:l,delCompartilhado:c};n.includes(r)?s.compartilhado=!!c:c?Object.assign(s,{outsider:!0}):Object.assign(s,{irregular:!0}),i.push(s)}else e.setState({renderedPlacas:i})})),e.setState({renderedPlacas:i}))}},e.handleInput=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m,p,v,h,b,g,E,x,S,O,y,w,C;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=t.target.value,r=t.target.name,n=e.props.redux,i=n.empresas,l=n.seguradoras,c=e.state,s=c.selectedEmpresa,d=c.allVehicles,u=c.insurance,m=c.apolice,p=c.dataEmissao,v=c.vencimento,h=c.newInsurance,b=c.seguradora,e.setState(Object(f.a)({},r,o)),a.t0=r,a.next="razaoSocial"===a.t0?6:"apolice"===a.t0?17:"seguradora"===a.t0?22:"placa"===a.t0?25:"addedPlaca"===a.t0?28:31;break;case 6:if(!(g=i.find((function(e){return e.razaoSocial===o})))){a.next=14;break}return a.next=10,e.setState({razaoSocial:g.razaoSocial,selectedEmpresa:g});case 10:o!==g.razaoSocial&&e.setState({selectedEmpresa:void 0}),e.filterInsurances(),a.next=16;break;case 14:e.setState({selectedEmpresa:void 0,frota:[]}),e.clearFields();case 16:return a.abrupt("break",32);case 17:return d||e.filterInsurances(),a.next=20,e.checkExistence(o);case 20:return e.renderPlacas(),a.abrupt("break",32);case 22:return(E=l.find((function(e){return e.seguradora===o})))&&e.setState({seguradoraId:E.id}),a.abrupt("break",32);case 25:return x=[],(null===u||void 0===u?void 0:u.placas)&&(u.placas[0]&&null!==u.placas[0]&&(x=u.placas.sort()),void 0!==o&&o.length>2&&x[0]&&(x="string"===typeof o?u.placas.filter((function(e){return e.toLowerCase().match(o.toLowerCase())})).sort():u.placas.filter((function(e){return e.match(o)})).sort()),e.renderPlacas(x)),a.abrupt("break",32);case 28:return(S=d.find((function(e){return e.placa===o})))&&e.setState({vehicleFound:S}),a.abrupt("break",32);case 31:case 32:if(O=["seguradora","apolice","dataEmissao","vencimento"].every((function(a){return e.state[a]&&""!==e.state[a]})),"razaoSocial"===r||h||!O||u){a.next=40;break}return(w=l.find((function(a){return a.seguradora===e.state.seguradora})))&&(y=w.id),C={empresa:s.razaoSocial,codigoEmpresa:s.codigoEmpresa,apolice:m,seguradora:b,seguradoraId:y,dataEmissao:p,vencimento:v,placas:[],veiculos:[]},a.next=40,e.setState({insurance:C,seguradoraId:y});case 40:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleBlur=function(a){var t=e.props.redux,o=t.seguradoras,r=t.seguros,n=e.state,i=n.seguradora,l=n.selectedEmpresa,c=a.target.name,s=null===l||void 0===l?void 0:l.codigoEmpresa;if("seguradora"===c){var d=[],u=o.find((function(e){return e.seguradora.toLowerCase().match(i.toLowerCase())}));u&&i.length>2&&e.setState({seguradora:u.seguradora,seguradoraId:u.id}),!u&&i.length>2&&e.setState({openAlertDialog:!0,alertType:"seguradoraNotFound",seguradora:void 0}),l&&!i?(d=r.filter((function(e){return e.codigoEmpresa===s})),e.setState({seguros:d})):l||""===i?l&&""!==i&&(d=r.filter((function(e){return e.codigoEmpresa===s})).filter((function(e){return e.seguradora===i})),e.setState({seguros:d})):(d=r.filter((function(e){return e.seguradora===i})),e.setState({seguros:d}))}if("dataEmissao"===c||"vencimento"===c){var m=me();m?e.setState({errors:m}):e.setState({errors:void 0})}},e.showAllPlates=function(){var a=e.state,t=a.insurance,o=a.allPlates,r=[],n={};(null===t||void 0===t?void 0:t.placas)&&(r=t.placas),o.forEach((function(e){return Object.assign(n,Object(f.a)({},e,!1))})),r.forEach((function(e){return Object.assign(n,Object(f.a)({},e,!0))})),e.setState({allPlatesObj:n,insuredPlates:r,showAllPlates:!e.state.showAllPlates})},e.handleCheck=function(){var a=Object(w.a)(j.a.mark((function a(t){var o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:(o=Object(h.a)({},e.state.allPlatesObj))[t]=!o[t],!0===o[t]?e.addPlate(t):e.removeFromInsurance(t),e.setState({allPlatesObj:o});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.selectAllPlates=function(){var a=e.state,t=a.allPlates,o=a.selectAll,r={};t&&t.forEach((function(a){o?(r[a]=!1,e.removeFromInsurance(a)):(r[a]=!0,e.addPlate(a,!0))})),e.setState({selectAll:!o,allPlatesObj:r})},e.addPlate=function(){var a=Object(w.a)(j.a.mark((function a(t,o){var r,n,i,l,c,s,d,u,m;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.state,n=r.apolice,i=r.allVehicles,l=r.deletedVehicles,c=r.insurance,s=i.find((function(e){return e.placa===t})),t&&""!==t){a.next=3;break}return a.abrupt("return");case 3:if(void 0!==s&&!1!==s.hasOwnProperty("veiculoId")){a.next=8;break}return e.setState({openAlertDialog:!0,alertType:"plateNotFound"}),a.abrupt("return",null);case 8:if(!(c&&c.placas&&s.placa)||o){a.next=13;break}if(!c.placas.find((function(e){return e===s.placa}))){a.next=13;break}return e.setState({openAlertDialog:!0,alertType:"plateExists"}),a.abrupt("return",null);case 13:n&&c&&(d=Object(h.a)({},c),u=s.veiculoId,d.placas&&d.placas[0]||(d.placas=[]),d.veiculos&&d.veiculos[0]||(d.veiculos=[]),d.placas.includes(t)||d.placas.push(t),d.veiculos.includes(u)||d.veiculos.push(u),l.includes(u)&&(m=l.indexOf(u),l.splice(m,1)),e.renderPlacas(null===d||void 0===d?void 0:d.placas),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 374 ~ Seguro ~ addPlate= ~ update",d),e.setState({insurance:d,addedPlaca:"",deletedVehicles:l}));case 14:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.removeFromInsurance=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m,p,f,b,g,E,x;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=e.state,r=o.apolice,n=o.allVehicles,i=n.find((function(e){return e.placa===t})),l=i.veiculoId,c=i.placa,s=Object(h.a)({},e.state.insurance),d=Object(v.a)(e.state.deletedVehicles),u=[],m=[],(f=e.props.redux.seguros.find((function(e){return e.apolice===r})))&&f.placas&&(p=f.placas.includes(c)),p&&(b=s.veiculos,g=b.indexOf(l),d.includes(b[g])||(d.push(b[g]),e.setState({deletedVehicles:d}))),s.placas&&(u=s.placas),s.veiculos&&(m=s.veiculos),E=u.indexOf(c),x=m.indexOf(l),s.placas.splice(E,1),s.veiculos.splice(x,1),a.next=12,e.setState({insurance:s});case 12:e.renderPlacas();case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleSubmit=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m,p,f,v,b,g,E,x;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.state,r=o.insurance,n=o.deletedVehicles,i=o.seguradoraId,l=o.apolice,c=o.numeroDae,s=o.selectedEmpresa,d=o.demand,u=o.apoliceDoc,m=o.info,p=o.dataEmissao,f=o.vencimento,v=s.codigoEmpresa,b=r.veiculos,!e.checkForErrors(r)){a.next=3;break}return a.abrupt("return");case 3:if(g=e.setInsuranceStatus({apolice:l,seguradoraId:i,codigoEmpresa:v,dataEmissao:p,vencimento:f}),E=A.a.decamelizeKeys(g),d){a.next=10;break}return x={empresaId:null===s||void 0===s?void 0:s.codigoEmpresa,history:Object(h.a)(Object(h.a)({},A.a.camelizeKeys(E)),{},{seguradora:e.state.seguradora,vehicleIds:b,info:c?"N\xba Documento Arrecada\xe7\xe3o Estadual: ".concat(c):"N\xfamero do DAE n\xe3o informado",numeroDae:c,files:u,deletedVehicles:n}),demandFiles:e.state.demandFiles,metadata:{fieldName:"apoliceDoc",apolice:l,empresaId:null===s||void 0===s?void 0:s.codigoEmpresa},historyLength:0,approved:t},a.next=8,Ye(x);case 8:return e.confirmAndResetState("Solicita\xe7\xe3o de cadastro de seguro enviada"),a.abrupt("return");case 10:t?e.approveInsurance(E):(Ye({id:d.id,history:{info:m},declined:!0}),e.confirmAndResetState("Solicita\xe7\xe3o indeferida!"));case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.approveInsurance=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m,p,f,v,b,g,E,x;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.props.redux.seguros,r=e.state,n=r.apolice,i=r.vencimento,l=r.dataEmissao,c=r.seguradoraId,s=r.insurance,d=r.demand,u=r.demandFiles,m=d.history[0].deletedVehicles,p=s.veiculos||d.history[0].vehicleIds,f={table:"veiculos",column:"apolice",value:n,tablePK:"veiculo_id",ids:p,deletedVehicles:m},v=o.find((function(e){return e.apolice===n})),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 542 ~ Seguro ~ insuranceExists",v),!v){a.next=15;break}return b=ue()(v.dataEmissao).isSame(ue()(l)),g=ue()(v.vencimento).isSame(ue()(i)),E=JSON.stringify(p)===JSON.stringify(v.veiculos),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 548 ~ Seguro ~ JSON.stringify(insuranceExists.veiculos)",JSON.stringify(v.veiculos)),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 548 ~ Seguro ~  JSON.stringify(vehicleIds)",JSON.stringify(p)),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 548 ~ Seguro ~ vExists",E),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 551 ~ Seguro ~ de && v ",b&&g),a.abrupt("return");case 14:"Vigente"===t.situacao&&(x=A.a.decamelizeKeys({id:null===v||void 0===v?void 0:v.id,seguradoraId:c,situacao:t.situacao,dataEmissao:l,vencimento:i}),T.a.put("/api/seguros",{update:x,vehicleIds:p,deletedVehicles:m}));case 15:if("Aguardando in\xedcio da vig\xeancia"!==t.situacao){a.next=20;break}return t.veiculos=p,console.log(Object(h.a)({},t)),a.next=20,T.a.post("/api/cadSeguroMongo",Object(h.a)({},t));case 20:if("Vigente"!==t.situacao||v){a.next=23;break}return a.next=23,T.a.post("/api/cadSeguro",t).then((function(e){200===e.status&&console.log(e.status,"cadSeguroOk")}));case 23:return a.next=25,T.a.put("/api/updateInsurances",f).then((function(a){console.log(a.data),e.setState({dontUpdateProps:!0})}));case 25:Ye({id:d.id,demandFiles:u,history:{},metadata:{},approved:!0}),e.confirmAndResetState();case 28:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.confirmAndResetState=function(a){var t=e.state.demand;e.toast(a),e.clearFields(),t&&setTimeout((function(){e.props.history.push("/solicitacoes")}),1500)},e.handleFiles=function(){var a=Object(w.a)(j.a.mark((function a(t){var o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!ze(t)){a.next=2;break}return a.abrupt("return");case 2:return(o=new FormData).append("apoliceDoc",t[0]),a.next=6,e.setState({apoliceDoc:o,fileToRemove:null});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.removeFile=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.state.apoliceDoc,r=qe(t,o),e.setState(Object(h.a)(Object(h.a)({},e.state),r));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.addNewElement=function(){return e.setState({apolice:e.state.newElement,openAddDialog:!1})},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({openAddDialog:!e.state.openAddDialog})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.clearFields=Object(w.a)(j.a.mark((function a(){var t,o,r,n,i,l;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.props.redux,r=o.empresas,n=o.veiculos,i={seguradora:"",insurance:void 0,apolice:"",dataEmissao:"",vencimento:"",apoliceDoc:null,deletedVehicles:[],dropDisplay:"Clique ou arraste para anexar a ap\xf3lice"},l={selectedEmpresa:r[0],razaoSocial:null===(t=r[0])||void 0===t?void 0:t.razaoSocial,frota:n},!r||1!==r.length){a.next=7;break}return a.next=4,e.setState(Object(h.a)(Object(h.a)({},i),l));case 4:e.filterInsurances(),a.next=8;break;case 7:r&&e.setState(Object(h.a)({},i));case 8:case"end":return a.stop()}}),a)}))),e.escFunction=function(a){27===a.keyCode&&(e.state.openAddDialog&&e.toggleDialog(),e.state.showAllPlates&&e.setState({showAllPlates:!1}))},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,o,r,n,i,l,c,s,d,u,m,p,f,v;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.redux,n=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(o=t.state)||void 0===o?void 0:o.demand,i=r.empresas,l=r.veiculos,!i||1!==i.length){e.next=5;break}return e.next=4,this.setState({selectedEmpresa:i[0],razaoSocial:null===(c=i[0])||void 0===c?void 0:c.razaoSocial,frota:l});case 4:this.filterInsurances();case 5:if(!n){e.next=17;break}return s=kt(n,r,[]),d=s.latestDoc,s.newMembers,s.oldMembers,s.filteredSocios,u=Object(Y.a)(s,["latestDoc","newMembers","oldMembers","filteredSocios"]),m=null===n||void 0===n?void 0:n.history[0],p={},St.forEach((function(e){var a=e.field;m.hasOwnProperty(a)&&(p[a]=m[a])})),f=r.veiculos.filter((function(e){return m.vehicleIds.some((function(a){return a===e.veiculoId}))})),p.placas=f.map((function(e){return e.placa})),p.veiculos=f.map((function(e){return e.veiculoId})),v=null===m||void 0===m?void 0:m.seguradoraId,e.next=14,this.setState(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},this.state),u),p),{},{insurance:p,demand:n,seguradoraId:v,demandFiles:[d]}));case 14:return e.next=16,this.filterInsurances();case 16:this.renderPlacas();case 17:document.addEventListener("keydown",this.escFunction,!1);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkForErrors",value:function(e){var a=this.state,t=a.errors,o=a.seguradora;return t&&t[0]?(this.setState(Object(h.a)(Object(h.a)({},this.state),me("setState"))),!0):o&&""!==o?(null===e||void 0===e?void 0:e.veiculos)&&e.veiculos[0]?void 0:(this.setState({openAlertDialog:!0,customTitle:"Nenhum ve\xedculo inserido",customMsg:'N\xe3o foi inserido nenhum ve\xedculo para o seguro informado. Para inserir, digite a placa no campo "Insira a placa" ou clique para selecionar a(s) placa(s) do(s) ve\xedculo(s) coberto(s) por esse seguro.'}),!0):(this.setState({openAlertDialog:!0,alertType:"seguradoraNotFound",seguradora:void 0}),!0)}},{key:"setInsuranceStatus",value:function(e){var a=e.dataEmissao,t=e.vencimento,o=ue()(a,"YYYY-MM-DD",!0),r=ue()(t,"YYYY-MM-DD",!0),n=o.isValid(),i=r.isValid(),l=r.isSameOrBefore(o,"day"),c=r.isBefore(ue()(),"day"),s=o.isAfter(ue()(),"day"),d=o.isSameOrBefore(ue()(),"day");if(l)alert("A data de vencimento informada \xe9 anterior ao in\xedcio da vig\xeancia.");else{if(!c)return s&&(e.situacao="Aguardando in\xedcio da vig\xeancia"),d&&(e.situacao="Vigente"),n&&(e.dataEmissao=a),i&&(e.vencimento=t),e;alert("O seguro informado est\xe1 vencido.")}}},{key:"render",value:function(){var e=this,a=this.state,t=a.openAlertDialog,n=a.alertType,i=a.openAddDialog,l=a.showAllPlates,c=a.allPlates,s=a.allPlatesObj,d=a.selectAll,u=a.customTitle,m=a.customMsg,p=this.props.redux,f=p.empresas,v=p.seguradoras,h=p.seguros,b=St.every((function(a){return e.state.hasOwnProperty(a.field)&&""!==e.state[a.field]}));return r.a.createElement(o.Fragment,null,r.a.createElement(jt,{data:this.state,empresas:f,seguros:h,seguradoras:v,enableAddPlaca:b,handleInput:this.handleInput,handleBlur:this.handleBlur,addPlate:this.addPlate,removeFromInsurance:this.removeFromInsurance,enableChangeApolice:this.toggleDialog,handleFiles:this.handleFiles,handleSubmit:this.handleSubmit,showAllPlates:this.showAllPlates,setShowPendencias:this.setShowPendencias,removeFile:this.removeFile}),i&&r.a.createElement(Ct,{open:i,close:this.toggleDialog,title:"Alterar n\xfamero da ap\xf3lice",helperMessage:"Informe o n\xfamero atualizado da ap\xf3lice.",handleInput:this.handleInput,addNewElement:this.addNewElement}),l&&r.a.createElement(wt,{items:c,close:this.showAllPlates,title:"Selecione as placas para adicionar \xe0 ap\xf3lice.",handleCheck:this.handleCheck,data:s,selectAll:d,selectAllPlates:this.selectAllPlates}),t&&r.a.createElement(ot,{open:t,close:this.closeAlert,alertType:n,customTitle:u,customMessage:m}),r.a.createElement(ae,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}))}}]),t}(o.Component));function It(e){var a,t,n=e.open,i=e.type,l=e.close,c=e.confirm,s=e.element,d=e.id,u=e.index;e.customTitle,e.customMessage;return console.log("\ud83d\ude80 ~ file: ConfirmDialog.jsx ~ line 11 ~ ConfirmDialog ~ id",d),"delete"===i&&(a="Confirmar exclus\xe3o",t="Tem certeza que deseja excluir esse registro?",s&&(t=t.replace("?",": "))),"deactivateEmpresa"===i&&(a="Desativar empresa",t="Tem certeza que deseja desativar a empresa ".concat(s,"?")),a&&t?r.a.createElement("div",null,r.a.createElement(Za.a,{open:n,onClose:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(tt.a,{id:"alert-dialog-title"},a),r.a.createElement(et.a,null,r.a.createElement(at.a,{id:"alert-dialog-description"},s?r.a.createElement(o.Fragment,null,t,r.a.createElement("strong",null,"  ",s,"    "),"?"):t)),r.a.createElement(Qa.a,null,r.a.createElement(oa.a,{onClick:l,autoFocus:!0}," Cancelar "),r.a.createElement(oa.a,{onClick:function(){return c(d||u)},color:"primary"}," Confirmar ")))):null}var At=[{field:"id",label:"N\xfamero do laudo",maxLength:30},{field:"validade",label:"Data de validade",type:"date"},{field:"empresaLaudo",label:"Empresa emissora",select:!0}],Pt=function(e){var a=e.veiculoId,t=e.city,o=e.placa,n=e.onClick,i=e.style;return r.a.createElement("div",{id:a,onClick:n,style:i,className:"placaContainer"},r.a.createElement("div",{className:"placaCity"},t),r.a.createElement("div",{className:"placaCode"},o))},Tt=t(124),Ft=t.n(Tt);function zt(e){var a=e.table,t=e.docsCollection,o=e.length,n=e.title,i=e.style,l=e.idIndex,c=void 0===l?0:l,s=e.clickable,d=e.openInfo,u=e.filePK,m=e.deleteIconProperties,p=void 0===m?{}:m,f=e.deleteFunction,v=a.tableHeaders,b=a.arrayOfRows,g=a.docs;return r.a.createElement("table",{className:"showDetailsTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",style:i,colSpan:o},n)),r.a.createElement("tr",null,v.map((function(e,a){return r.a.createElement("th",{key:a,style:i},e)})))),r.a.createElement("tbody",null,b.map((function(e,a){return r.a.createElement("tr",{key:a,className:s?"clickable":"",onClick:function(){return s?d(a):void 0}},e.map((function(a,o){var n,l;return r.a.createElement("td",{key:o,style:Object(h.a)(Object(h.a)({},i),{},{width:"numeroSei"===a.field&&"200px"}),className:"link"===a.type&&a.fileId?"link2":"review",onClick:function(){var o;return a.field===u&&a.fileId?function(e){var a=g.find((function(a){return a.id===e}));e&&a&&Da(a.id,a.filename,t,a.metadata.fieldName)}(a.fileId):"delete"===(null===a||void 0===a?void 0:a.action)?f(null===(o=e[c])||void 0===o?void 0:o.value):null}},"date"===a.type?(l=a.value,ue()(l,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?ue()(l,ue.a.ISO_8601,!0).format("DD/MM/YYYY"):l):"delete"===(null===a||void 0===a?void 0:a.action)&&(null===(n=e[c])||void 0===n?void 0:n.value)?r.a.createElement(Ft.a,p):a.value)})))}))))}var Mt=t(235),Lt=t(6),_t=Object(Lt.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return r.a.createElement(Mt.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"}},e))})),qt=function(e){var a=e.anchorEl,t=e.handleClose,o=e.menuOptions;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_t,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:t},o.map((function(e,a){var t=e.title,o=e.onClick;return r.a.createElement($e.a,{key:a,onClick:o},t)}))))},Rt=t(267),Vt=t.n(Rt),Bt=t(156),Ut=t.n(Bt),Ht=r.a.memo((function(e){var a=e.empresas,t=e.razaoSocial,o=e.selectedEmpresa,n=e.filteredVehicles,i=e.selectedVehicle,l=e.stateInputs,c=e.selectOptions,s=e.table,d=e.anchorEl,u=e.laudoDoc,m=e.dropDisplay,p=e.functions,f=e.demand,v=e.demandFiles,b=e.showPendencias,g=e.info,E=e.fileToRemove,x=null===i||void 0===i?void 0:i.placa,S=p.handleInput,O=p.clickOnPlate,y=p.showDetails,j=p.handleFiles,w=p.handleSubmit,C=p.closeMenu,k=p.clear,D=p.removeFile,N=p.deleteLaudo,I=p.setShowPendencias,A=function(e){if(!(e&&e[0]&&e[0].validade))return{backgroundColor:"rgb(136, 13, 13)"};var a=e[0].validade;return ue()(a,ue.a.ISO_8601).isValid()&&ue()(a).isAfter(ue()().toDate())?{backgroundColor:"rgb(13, 136, 13)"}:ue()(a,ue.a.ISO_8601).isValid()&&ue()(a).isBefore(ue()().toDate())?{backgroundColor:"rgb(197, 128, 0)"}:void 0};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ua,{links:["Ve\xedculos","/veiculos"],text:"Laudos",demand:f,selectedEmpresa:o}),r.a.createElement("div",{style:f?{marginTop:"15px"}:{}},r.a.createElement(Ge,{empresas:a,data:{razaoSocial:t,demand:f},headerTitle:x&&o&&"Cadastro de laudo veicular ".concat(x," - ").concat(null===o||void 0===o?void 0:o.razaoSocial),handleInput:S})),o&&!Array.isArray(o)&&r.a.createElement(r.a.Fragment,null,!f&&r.a.createElement("header",{className:"flex",style:{marginBottom:"15px",justifyContent:"space-between"}},i?r.a.createElement(Pt,{veiculoId:i.veiculoId,onClick:O,style:Object(h.a)(Object(h.a)({},A(i.laudos)),{},{marginLeft:0}),city:o.cidade,placa:i.placa}):r.a.createElement(ea,{subtitle:"Selecione o ve\xedculo para atualizar consultar ou inserir o laudo de seguran\xe7a veicular.",style:{marginTop:"25px"}}),r.a.createElement("div",null,r.a.createElement(Xe.a,{inputProps:{name:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Filtrar",onChange:S}),r.a.createElement(xt.a,{style:{marginTop:"10px"}}))),i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"paper",style:f?{marginTop:"15px"}:{}},r.a.createElement(ea,{subtitle:f?"Verifique as informa\xe7\xf5es abaixo, confira com o laudo anexo e escolha uma das op\xe7\xf5es abaixo.":"Para inserir novo laudo, informe o n\xfamero, a data de vencimento, a empresa que emitiu e anexe o documento referente ao laudo."}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Qe,{form:At,data:l,handleInput:S,selectOptions:c}),f?v&&r.a.createElement(Ta,{demand:f,collection:"vehicleDocs",demandFiles:v,form:[{title:"Laudo veicular",name:"laudoDoc"}]}):r.a.createElement(ga,{name:"laudoDoc",formData:u,dropDisplay:m,handleFiles:j,removeFile:D,fileToRemove:E,single:!0,style:{width:"400px",margin:"15px auto 0 auto"}})),r.a.createElement("section",null,o&&!f?r.a.createElement(oa.a,{size:"small",color:"primary",className:"saveButton",variant:"contained",onClick:function(){return w()}},"Cadastrar Laudo"):o&&f?r.a.createElement(Ya,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:f,setShowPendencias:function(){return I(!b)},showPendencias:b,info:g,handleSubmit:w,handleInput:S}):null)),r.a.createElement("section",null,r.a.createElement("h4",null,i?null:r.a.createElement("div",{className:"flex",style:{justifyContent:"space-between"}},r.a.createElement("div",null,"Exibindo ".concat(n.length," ve\xedculos com mais de 15 anos.")),r.a.createElement("div",{className:"flex placasCaption",style:{fontSize:"0.8rem"}},r.a.createElement("span",null,r.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(13, 136, 13)"}},r.a.createElement(Vt.a,null))," Laudo vigente"),r.a.createElement("span",null,r.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(197, 128, 0)"}},r.a.createElement(Vt.a,null))," Laudo vencido                                            "),r.a.createElement("span",null,r.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(136, 13, 13)"}},r.a.createElement(Vt.a,null))," Nenhum Laudo cadastrado"))))),!i&&r.a.createElement("section",{className:"center flex paper"},n.map((function(e,a){return r.a.createElement(Pt,{key:a,veiculoId:e.veiculoId,onClick:O,style:A(e.laudos),city:o.cidade,placa:e.placa})}))),r.a.createElement(qt,{anchorEl:d,handleClose:C,menuOptions:[{title:"Detalhes",onClick:y}]})),i&&i.laudos&&!f&&r.a.createElement(r.a.Fragment,null,"object"===typeof s?r.a.createElement("div",{className:"paper",style:{marginTop:"52px",width:"100%",padding:"0",borderRadius:"5px",overflow:"hidden"}},r.a.createElement(zt,{length:s.tableHeaders.length,title:"Laudos vinculados ao ve\xedculo placa ".concat(i.placa),table:s,style:{textAlign:"center",padding:"8px 0"},deleteIconProperties:{color:"secondary",title:"Apagar Laudo",style:{cursor:"pointer"}},deleteFunction:N,idIndex:1,filePK:"laudoDoc",docsCollection:"vehicleDocs"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,s)),r.a.createElement("div",{className:"voltarDiv",onClick:k},r.a.createElement(Ut.a,{size:"small"}),r.a.createElement("span",{style:{padding:"2px 0 0 2px",marginLeft:"2px",fontSize:"1rem"}},"Voltar"))))}));var Yt={field:"codigoEmpresa",label:"C\xf3digo da Empresa"},Jt={field:"razaoSocial",label:"Empresa",width:"340px"},Kt={field:"createdAt",label:"Data do registro no sistema",type:"date",width:"190px"},Wt={field:"cnpj",label:"CNPJ",maxLength:18,errorHandler:function(e){return function(e){if(""===(e=e.replace(/[^\d]+/g,"")))return!1;if(14!==e.length)return!1;if("00000000000000"===e||"11111111111111"===e||"22222222222222"===e||"33333333333333"===e||"44444444444444"===e||"55555555555555"===e||"66666666666666"===e||"77777777777777"===e||"88888888888888"===e||"99999999999999"===e)return!1;for(var a=e.length-2,t=e.substring(0,a),o=e.substring(a),r=0,n=a-7,i=a;i>=1;i--)r+=t.charAt(a-i)*n--,n<2&&(n=9);if((r%11<2?0:11-r%11).toString()!==o.charAt(0))return!1;a+=1,t=e.substring(0,a),r=0,n=a-7;for(var l=a;l>=1;l--)r+=t.charAt(a-l)*n--,n<2&&(n=9);return(r%11<2?0:11-r%11).toString()===o.charAt(1)}(e)}},Gt={field:"cpfSocio",label:"CPF",maxLength:14,width:190,errorHandler:function(e){return function(e){if(e){var a,t;if(a=0,"00000000000"===e)return!1;for(var o=1;o<=9;o++)a+=parseInt(e.substring(o-1,o))*(11-o);if(10!==(t=10*a%11)&&11!==t||(t=0),t!==parseInt(e.substring(9,10)))return!1;a=0;for(var r=1;r<=10;r++)a+=parseInt(e.substring(r-1,r))*(12-r);return 10!==(t=10*a%11)&&11!==t||(t=0),t===parseInt(e.substring(10,11))}}((a=e)?a.replace(/(\.|\/|-)/g,""):void 0);var a}},$t={label:"Telefone",maxLength:15,pattern:"((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))"},Xt={label:"E-mail",type:"email",maxLength:60,pattern:"[a-zA-Z0-9]@[a-zA-Z0-9]{1,20}?[.]([a-zA-Z0-9])"},Zt=[{field:"razaoSocial",width:"540px"},{field:"rua",width:"540px"},{field:"situacao",label:"Situa\xe7\xe3o"},Object(h.a)({},Yt),Object(h.a)(Object(h.a)({},Kt),{},{width:"150px"}),{field:"frota",label:"Tamanho da Frota"}],Qt=[Object(h.a)({},Jt),Object(h.a)({},Kt)],eo=[Object(h.a)(Object(h.a)({},Jt),{},{field:"empresa",width:"540px"}),Object(h.a)({},Yt),Object(h.a)(Object(h.a)({},Kt),{},{width:"150px"}),Object(h.a)({},{field:"placas",label:"Ve\xedculos cadastrados",width:"340px"}),{field:"segurados",label:"N\xfamero de ve\xedculos segurados"}],ao=[{field:"codigoEmpresa",label:"C\xf3digo do Delegat\xe1rio"},{field:"empresa",label:"Delegat\xe1rio"},{field:"dataRegistro",label:"Data do registro no sistema",type:"date"},{field:"cmt",label:"CMT (t)"},{field:"pbt",label:"Peso Bruto Total"},{field:"situacao",label:"Situa\xe7\xe3o"},{field:"indicadorIdade",label:"Indicador de idade"},{field:"equipamentos",label:"Equipamentos"},{field:"marcaChassi",label:"Marca do Chassi"},{field:"marcaCarroceria",label:"Marca da Carroceria"},{field:"sipro",label:"SEI"},{field:"compartilhado",label:"Compartilhado por"},{field:"codigoCompartilhado",label:"C\xf3digo Del. Compartilhado"},{field:"empresaLaudo",label:"Empresa Laudo"},{field:"numeroLaudo",label:"N\xfamero do Laudo"},{field:"vencimentoLaudo",label:"Validade do Laudo",type:"date"},{field:"acessibilidade",label:"Itens de Acessibilidade"},{field:"obs",label:"Observa\xe7\xf5es"}],to=[[{field:"placa",label:"Placa",margin:"normal",maxLength:8,pattern:"[a-zA-Z]{3}[-]?[ ]?\\d{4}|[A-Z]{3}[-]?[ ]?[0-9]{1}[A-Z]{1}[0-9]{2}"},{field:"renavam",label:"Renavam",margin:"normal",maxLength:11,pattern:/^(\d{9}|\d{11})$/},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Comercial","Comercial Executivo","Convencional","Convencional Executivo","Leito","Leito e Executivo","Semi-Leito","Semi-Leito Executivo"]},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17},{field:"modeloChassi",label:"Modelo do Chassi",autoComplete:!0,collection:"modelosChassi"},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",max:Number((new Date).getFullYear()),min:Number((new Date).getFullYear())-10},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",datalist:"modelo",autoComplete:!0,collection:"carrocerias"},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",max:Number((new Date).getFullYear()+1),min:Number((new Date).getFullYear())-10},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Aliena\xe7\xe3o Fiduci\xe1ria","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50}]].concat([St]).concat([ia]),oo=[{field:"razaoSocial",label:"Raz\xe3o Social"},Object(h.a)(Object(h.a)({},Wt),{},{maxLength:18,pattern:"[0-9]{2}.?[0-9]{3}.?[0-9]{3}/?[0-9]{4}-?[0-9]{2}"}),{field:"inscricaoEstadual",label:"Inscri\xe7\xe3o Estadual",maxLength:13,pattern:"\\d{13}"},Object(h.a)(Object(h.a)({},$t),{},{field:"telefone",label:"Telefone"}),Object(h.a)(Object(h.a)({},Xt),{},{field:"email",label:"E-mail"}),{field:"cep",label:"CEP",maxLength:10},{field:"rua",label:"Rua",maxLength:100},{field:"numero",label:"N\xfamero",type:"number",max:32e3},{field:"complemento",label:"Complemento",maxLength:20,notRequired:!0},{field:"bairro",label:"Bairro",maxLength:40},{field:"cidade",label:"Cidade",maxLength:60},{field:"uf",label:"Estado",maxLength:2,pattern:"[A-Z]{2}"},{field:"numeroContrato",label:"N\xfamero do Contrato Social"},{field:"vencimentoContrato",label:"Vencimento do Cadastro - CRC",type:"date"}],ro=[{field:"nomeSocio",label:"Nome do S\xf3cio",maxLength:90,width:195},Object(h.a)(Object(h.a)({},Gt),{},{width:195,disabled:!1}),Object(h.a)(Object(h.a)({},$t),{},{field:"telSocio",width:195}),Object(h.a)(Object(h.a)({},Xt),{},{field:"emailSocio",width:195}),{field:"share",label:"Participa\xe7\xe3o Societ\xe1ria (%)",type:"number",max:100,width:195}],no=[{field:"nomeProcurador",label:"Nome do Procurador",maxLength:90,width:220},Object(h.a)(Object(h.a)({},Gt),{},{field:"cpfProcurador",width:220}),Object(h.a)(Object(h.a)({},$t),{},{field:"telProcurador",width:220}),Object(h.a)(Object(h.a)({},Xt),{},{field:"emailProcurador",width:220}),{field:"createdAt",label:"Data de inclus\xe3o no sistema",type:"date",width:220}],io=["codigoEmpresa","razaoSocial","situacao","createdAt","vencimentoContrato","numeroContrato","cnpj","inscricaoEstadual","rua","numero","complemento","bairro","cidade","estado","cep","telefone","email","frota"],lo=["nomeSocio","cpfSocio","razaoSocial","share","createdAt","emailSocio","telSocio"],co=["nomeProcurador","cpfProcurador","emailProcurador","telProcurador","codigoEmpresa","razaoSocial","createdAt","procuradorId"],so=["id","apolice","seguradoraId","dataEmissao","vencimento","createdAt","situacao","seguradora","codigoEmpresa","empresa","segurados","placas","veiculos"],uo=["veiculoId","placa","renavam","dataRegistro","situacao","utilizacao","codigoEmpresa","empresa","dominio","apolice","seguradora","dataEmissao","vencimento","cilindros","potencia","nChassi","anoChassi","valorChassi","modeloChassiId","anoCarroceria","valorCarroceria","modeloCarroceriaId","poltronas","piquesPoltrona","distanciaMinima","distanciaMaxima","eixos","pneumaticosDianteiro","pneumaticosTraseiro","pesoDianteiro","pesoTraseiro","pbt","cores","compartilhadoId","equipamentosId","acessibilidadeId","sipro","indicadorIdade","marcaChassi","modeloChassi","cmt","marcaCarroceria","empresa","compartilhado","codigoCompartilhado","numeroLaudo","empresaLaudo","vencimentoLaudo","equipamentos","acessibilidade","obs"],mo=function(e,a){var t;if("empresas"===e)t=io;else if("socios"===e||"s\xf3cios"===e)t=lo;else if("procuradores"===e)t=co;else if("ve\xedculos"===e&&a[0].veiculoId)t=uo;else{if("seguros"!==e)return a;t=so}var o=[];return a.forEach((function(e){var a={};t.forEach((function(t){a[t]||(a[t]=e[t])})),o.push(a),a={}})),o},po=function(e,a){if(a){delete a.tableData;var t,o=[],r=fo(e);0===e&&(t="empresas"),1===e&&(t="socios"),2===e&&(t="procuradores"),3===e&&(t="ve\xedculos"),4===e&&(t="seguros");var n=mo(t,[a]);return a=n[0]?n[0]:a,Object.keys(a).forEach((function(t){if(3===e){var n=a,i=(n.veiculoId,n.laudoId,n.tableData,n.modeloChassiId,n.modeloCarroceriaId,n.vencimentoContrato,n.delegatarioCompartilhado,n.acessibilidadeId,n.equipamentosId,n.compartilhadoId,Object(Y.a)(n,["veiculoId","laudoId","tableData","modeloChassiId","modeloCarroceriaId","vencimentoContrato","delegatarioCompartilhado","acessibilidadeId","equipamentosId","compartilhadoId"]));a=i}r.forEach((function(e){var r=e.field,n=e.label,i=e.type,l=e.width;e.fullWidth;if(t===r){var c={};Object.assign(c,{field:r,label:n,value:a[t]}),i&&Object.assign(c,{type:i}),l&&Object.assign(c,{width:l}),o.push(c),c={}}}))})),Object.keys(a).forEach((function(t){o.find((function(e){return e.field===t}))||3!==e||o.push({field:t,label:t,value:a[t]})})),o}};function fo(e){var a;switch(e){case 0:return a=function(e,a){var t,o=[],r=Object(v.a)(a);return e.forEach((function(e){r.forEach((function(a,n){e.field===a.field?(t=Object.assign({},e,a),r.splice(n,1),o.push(t)):o.find((function(a){return a.field===e.field}))||o.push(e)}))})),o=o.concat(r)}(oo,Zt);case 1:return a=ro.concat(Qt);case 2:return a=no;case 3:var t=[];return to.forEach((function(e){t.push.apply(t,Object(v.a)(e))})),a=t.concat.apply(t,Object(v.a)(ao));case 4:return a=St.concat(eo);default:return a}}var vo=[{field:"nomeProcurador",title:"Nome"},{field:"cpfProcurador",title:"CPF"},{field:"emailProcurador",title:"E-mail"},{field:"telProcurador",title:"Telefone"},{field:"vencimento",title:"Validade da procura\xe7\xe3o",type:"date",format:function(e){return e||"Prazo indeterminado"}},{field:"fileId",title:"Baixar Procura\xe7\xe3o",type:"link"}],ho=[{field:"numeroAlteracao",label:"N\xfamero da altera\xe7\xe3o"},{field:"numeroRegistro",label:"Registro na junta comercial"},{field:"numeroSei",label:"N\xfamero do registro SEI"},{field:"createdAt",label:"Registro no CadTI",type:"date",format:function(e){return e||"Nenhuma data informada"}},{field:"dataJunta",label:"Data de Registro na Junta Comercial",type:"date",format:function(e){return e||"Nenhuma data informada"}},{field:"fileId",label:"Baixar altera\xe7\xe3o contratual",value:"Clique para baixar o arquivo",type:"link"}],bo=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:e.id,className:"obs__label"},e.label),r.a.createElement("textarea",Object.assign({className:"obs__textArea",cols:"30",disabled:!1!==e.disabled},e)))},go=[{field:"razaoSocial",title:"Empresa",maxLength:90,width:220},{field:"codigoEmpresa",title:"C\xf3digo da empresa",width:220},{field:"status",title:"Status",width:220},{field:"vencimento",title:"Validade da procura\xe7\xe3o",type:"date",format:function(e){return e||"Prazo indeterminado"}},{field:"fileId",title:"Baixar Procura\xe7\xe3o",type:"link"}];function Eo(e){var a=e.data,t=e.tab,n=e.title,i=e.header,l=e.close,c=e.empresas,s=e.procuracoes,d=e.procuradores,u=e.empresaDocs,m=e.altContrato,p=Object(o.useState)(),f=Object(Ke.a)(p,2),v=f[0],b=f[1],g=Object(o.useState)(),E=Object(Ke.a)(g,2),x=E[0],S=E[1],O=Object(o.useState)([]),y=Object(Ke.a)(O,2),C=y[0],k=y[1],D=po(t,a)||[],N=D.find((function(e){return"obs"===e.field})),I=D.find((function(e){return"equipamentos"===e.field})),A=D.find((function(e){return"acessibilidade"===e.field}));Object(o.useEffect)((function(){var e,o,r,n=null===(e=D.find((function(e){return"razaoSocial"===e.field})))||void 0===e?void 0:e.value,i=null===(o=c.find((function(e){return e.razaoSocial===n})))||void 0===o?void 0:o.codigoEmpresa,l=s.filter((function(e){return e.codigoEmpresa===i})),m=u.filter((function(e){var a,t;return"procuracao"===(null===(a=e.metadata)||void 0===a?void 0:a.fieldName)&&(null===(t=e.metadata)||void 0===t?void 0:t.empresaId)===i})),p=[],f=[],v=[],g=[];if(function(e){0===e&&(d.forEach((function(e){l.forEach((function(a){if(a.procuradores.some((function(a){return a===e.procuradorId}))){var t=Object(h.a)(Object(h.a)({},e),{},{vencimento:a.vencimento}),o=u.find((function(e){return e.metadata.procuracaoId===a.procuracaoId}));o&&(t.fileId=null===o||void 0===o?void 0:o.id),p.push(t)}}))})),p.forEach((function(e){vo.forEach((function(a){var t=a.field;if(f.some((function(e){return e===a.title}))||f.push(a.title),e.hasOwnProperty(t)&&!g.some((function(e){return e.hasOwnProperty(t)}))){if(r="fileId"===t&&e.fileId?Object(h.a)(Object(h.a)({},a),{},{value:"Clique para baixar a procura\xe7\xe3o",fileId:e.fileId}):Object(h.a)(Object(h.a)({},a),{},{value:e[t]}),a.format){var o=a.format(e[t]);r=Object(h.a)(Object(h.a)({},a),{},{value:o})}g.push(r)}})),v.push(g),g=[]})),p[0]&&b({mainTitle:"Procuradores cadastrados para ".concat(null===a||void 0===a?void 0:a.razaoSocial),tableHeaders:f,arrayOfRows:v,docs:m}),P())}(t),2===t){var E,x=null===a||void 0===a?void 0:a.procuradorId,S=s.filter((function(e){return e.procuradores.includes(x)}));S.forEach((function(e){var a;E=u.find((function(a){var t=a.metadata;return(null===t||void 0===t?void 0:t.procuracaoId)===e.procuracaoId})),e.fileId=null===(a=E)||void 0===a?void 0:a.id})),S.forEach((function(e){go.forEach((function(a){var t=a.field;if(f.some((function(e){return e===a.title}))||f.push(a.title),e.hasOwnProperty(t)&&!g.some((function(e){return e.hasOwnProperty(t)}))){if(r="fileId"===t&&e.fileId?Object(h.a)(Object(h.a)({},a),{},{value:"Clique para baixar a procura\xe7\xe3o",fileId:e.fileId}):Object(h.a)(Object(h.a)({},a),{},{value:e[t]}),a.format){var o=a.format(e[t]);r=Object(h.a)(Object(h.a)({},a),{},{value:o})}g.push(r)}})),v.push(g),g=[]})),S[0]&&b({mainTitle:"Procura\xe7\xf5es cadastrados para ".concat(null===a||void 0===a?void 0:a.nomeProcurador),tableHeaders:f,arrayOfRows:v,docs:u})}}),[t,m]);var P=function(){var e=Object(w.a)(j.a.mark((function e(){var t,o,r,n,i,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m&&(t=m.filter((function(e){return e.codigoEmpresa===a.codigoEmpresa})),o=u.filter((function(e){var t;return"altContratoDoc"===(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.fieldName)&&(null===e||void 0===e?void 0:e.metadata.empresaId)===a.codigoEmpresa})),r=[],n=[],i=[],l={},t.forEach((function(e){ho.forEach((function(a){var t=a.field;if(r.includes(a.label)||r.push(a.label),"fileId"===t||!i.some((function(e){return e.hasOwnProperty(t)}))){if("fileId"===t){var n,c=o.find((function(a){return a.metadata.numeroAlteracao===e.numeroAlteracao}));c=null===(n=c)||void 0===n?void 0:n.id,l=c?Object(h.a)(Object(h.a)({},a),{},{value:null===a||void 0===a?void 0:a.value,fileId:c}):Object(h.a)(Object(h.a)({},a),{},{value:"-"})}else l=Object(h.a)(Object(h.a)({},a),{},{value:e[t]||"-"});if(a.format){var s=a.format(e[t])||"-";l=Object(h.a)(Object(h.a)({},a),{},{value:s})}i.push(l)}})),n.push(i),i=[]})),console.log("\ud83d\ude80 ~ file: ShowDetails.jsx ~ line 198 ~ setAltContrato ~     arrayOfRows",n),t[0]&&S({mainTitle:"Altera\xe7\xf5es do contrato social - ".concat(null===a||void 0===a?void 0:a.razaoSocial),tableHeaders:r,arrayOfRows:n,docs:o}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var e=[];v&&e.push(v),x&&e.unshift(x),e[0]&&k(e)}),[v,x]),r.a.createElement("div",{className:"popUpWindow",style:{left:"20%",right:"20%"}},r.a.createElement("h4",{className:"equipaHeader"},n," ",a[i])," ",r.a.createElement("hr",null),r.a.createElement("main",{className:"checkListContainer",style:{justifyContent:"flex-start"}},D.map((function(e,a){var t=e.field,o=e.label,n=e.value,i=e.type,l=e.width;return"obs"!==t&&"equipamentos"!==t&&"acessibilidade"!==t&&r.a.createElement("div",{className:"showDetailsItem",style:{width:l||150},key:a},r.a.createElement(Xe.a,{name:t,label:o,value:o.match("Peso ")?lt(n):"date"!==i?n||"":ue()(n,!0).isValid()?n&&ue()(n).format("DD/MM/YYYY"):"",InputLabelProps:{shrink:!0,style:{fontSize:"0.9rem",fontWeight:500}},inputProps:{style:{fontSize:"0.7rem",width:l||150,fontColor:"#bbb",textAlign:"center"}},variant:"outlined"}))}))),C[0]&&C.map((function(e,a){return r.a.createElement("section",{key:a},r.a.createElement("hr",{style:{margin:"12px 0"}}),r.a.createElement(zt,{length:e.tableHeaders.length,title:e.mainTitle,table:e,style:{textAlign:"center",padding:"8px 0"},idIndex:1,filePK:"fileId",docsCollection:"empresaDocs"}))})),3===t&&r.a.createElement("footer",{className:"flexColumn"},(null===I||void 0===I?void 0:I.value)&&r.a.createElement(bo,{label:"Equipamentos:",name:"equipamentos",id:"equipamentos",defaultValue:null===I||void 0===I?void 0:I.value,rows:"2"}),(null===A||void 0===A?void 0:A.value)&&r.a.createElement(bo,{label:"Itens de acessibilidade:",name:"acessibilidade",id:"acessibilidade",defaultValue:null===A||void 0===A?void 0:A.value,rows:"2"}),(null===N||void 0===N?void 0:N.value)&&r.a.createElement(bo,{label:"Observa\xe7\xf5es:",name:"obs",id:"obs",defaultValue:null===N||void 0===N?void 0:N.value,rows:"6"})),r.a.createElement(ca,{close:l}))}var xo=[{field:"empresaLaudo",title:"Empresa Emissora"},{field:"id",title:"N\xfamero do Laudo"},{field:"createdAt",title:"Registro no sistema",type:"date"},{field:"validade",title:"Data de validade",type:"date"},{field:"laudoDoc",title:"Laudo",type:"link"},{field:"delete",title:"Remover",action:"delete",deleteFile:!0}],So=1,Oo=Ee(["veiculos","empresas","empresasLaudo","laudos","getFiles/vehicleDocs"],(function(e){var a,t,n,i=e.user,l=e.redux,c=l.veiculos,s=l.empresas,d=l.empresasLaudo,u=l.laudos,m=l.vehicleDocs,p=l.logs,b=null===e||void 0===e||null===(a=e.location)||void 0===a||null===(t=a.state)||void 0===t?void 0:t.demand,g=Object.freeze({dropDisplay:"Clique ou arraste o arquivo para anexar o laudo",stateInputs:{id:void 0,validade:"",empresaLaudo:""}}),E=Object(o.useState)(""),x=Object(Ke.a)(E,2),S=x[0],O=x[1],y=Object(o.useState)(),C=Object(Ke.a)(y,2),k=C[0],D=C[1],N=Object(o.useState)(),I=Object(Ke.a)(N,2),A=I[0],P=I[1],F=Object(o.useState)([]),z=Object(Ke.a)(F,2),M=z[0],L=z[1],_=Object(o.useState)(!1),q=Object(Ke.a)(_,2),R=q[0],V=q[1],B=Object(o.useState)(),U=Object(Ke.a)(B,2),H=U[0],J=U[1],K=Object(o.useState)(null),W=Object(Ke.a)(K,2),G=W[0],$=W[1],X=Object(o.useState)(g.dropDisplay),Z=Object(Ke.a)(X,2),Q=Z[0],ee=Z[1],te=Object(o.useState)(),oe=Object(Ke.a)(te,2),re=oe[0],ne=oe[1],ie=Object(o.useState)(Object(h.a)({},g.stateInputs)),le=Object(Ke.a)(ie,2),ce=le[0],se=le[1],de=Object(o.useState)(!1),ue=Object(Ke.a)(de,2),pe=ue[0],fe=ue[1],ve=Object(o.useState)("Laudo enviado para aprova\xe7\xe3o."),he=Object(Ke.a)(ve,2),be=he[0],ge=he[1],Ee=Object(o.useState)(),xe=Object(Ke.a)(Ee,2),Se=xe[0],Oe=xe[1],ye=Object(o.useState)(),je=Object(Ke.a)(ye,2),we=je[0],Ce=je[1],ke=Object(o.useState)(),De=Object(Ke.a)(ke,2),Ne=De[0],Ie=De[1],Ae=Object(o.useState)(!1),Pe=Object(Ke.a)(Ae,2),Fe=Pe[0],Me=Pe[1],Le=Object(o.useState)({open:!1,type:"inputError",msg:""}),_e=Object(Ke.a)(Le,2),qe=_e[0],Re=_e[1],Ve=Object(o.useState)({open:!1,type:"delete",element:void 0}),Be=Object(Ke.a)(Ve,2),Ue=Be[0],He=Be[1];s&&1===s.length&&1===So&&(So++,D(s[0]),O(null===(n=s[0])||void 0===n?void 0:n.razaoSocial));if(Object(o.useEffect)((function(){document.addEventListener("keydown",(function(e){27===e.keyCode&&V(!1),$(null)}))}),[]),b&&1===So){So++;var Je=b.history,We={},Ge=Te(b,e.redux),$e=Ge.selectedEmpresa,Xe=Ge.demandFiles,Ze=Ge.originalVehicle;Object.entries(Je[0]).forEach((function(e){var a=Object(Ke.a)(e,2),t=a[0],o=a[1];ce.hasOwnProperty(t)&&(We[t]=o)})),D($e),O($e.razaoSocial),se(We),Ce(Xe),J(Ze)}Object(o.useEffect)((function(){!function(){if(k&&""!==k){var e=(new Date).getFullYear(),a=c.filter((function(e){return e.empresa===k.razaoSocial})).filter((function(a){return e-a.anoCarroceria>15&&null!==a.anoCarroceria})).sort((function(e,a){return e.placa.localeCompare(a.placa)})),t=[];if(a.forEach((function(e){var a=u.filter((function(a){return a.veiculoId===e.veiculoId}));t.push(Object(h.a)(Object(h.a)({},e),{},{laudos:a}))})),P(t),L(t),H&&(null===t||void 0===t?void 0:t.length)>0){var o,r,n=t.find((function(e){return e.veiculoId===H.veiculoId}));if((null===n||void 0===n||null===(o=n.laudos)||void 0===o?void 0:o.length)===(null===H||void 0===H||null===(r=H.laudos)||void 0===r?void 0:r.length))return;J(n)}}else P(),L([]),D()}()}),[k,c,u,H]);var Qe=Object(o.useCallback)((function(e){var a=e.target.name,t=e.target.value;if("razaoSocial"!==a){if("placa"===a&&A[0]){if("string"===typeof t&&(t=t.toLocaleUpperCase()),t&&""!==t){var o,r=A.filter((function(e){return e.placa.match(t)}));return 1===r.length&&(o=r[0]),L(r),void J(o)}L(A)}se(Object(h.a)(Object(h.a)({},ce),{},Object(f.a)({},a,t)))}else{O(t);var n=s.find((function(e){return e.razaoSocial===t}));D(n)}}),[O,s,A,ce]),ea=function(){var e=Object(w.a)(j.a.mark((function e(a){var t,o,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.currentTarget.id,!dt(t,p)){e.next=4;break}return alert("Solicita\xe7\xe3o de cadastro do laudo j\xe1 realizada para este ve\xedculo."),e.abrupt("return");case 4:H?(a.persist(),$(a.target)):((o=a.currentTarget.id)&&(r=A.find((function(e){return e.veiculoId.toString()===o}))),J(r),L([r]));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){if(H&&!b)if(H.laudos&&H.laudos[0]){var e=null===H||void 0===H?void 0:H.laudos,a=m.filter((function(e){return"laudoDoc"===e.metadata.fieldName})),t=[],o=[],r=[],n=Object(v.a)(xo);"empresa"===i.role&&n.pop(),e.forEach((function(e){n.forEach((function(t){var n,i=a.find((function(a){var t;return(null===a||void 0===a||null===(t=a.metadata)||void 0===t?void 0:t.laudoId)==(null===e||void 0===e?void 0:e.id)}));i&&(n=i.id),o.includes(t.title)||o.push(t.title);t.title;var l=Object(Y.a)(t,["title"]);"laudoDoc"===t.field?r.push(Object(h.a)(Object(h.a)({},l),{},{value:e[t.field],fileId:n})):r.push(Object(h.a)(Object(h.a)({},l),{},{value:e[t.field]}))})),r[4].fileId?r[4].value="Clique para visualizar o laudo":r[4].value="Nenhum arquivo encontrado",t.push(r),r=[]})),n=Object(v.a)(xo),Oe({tableHeaders:o,arrayOfRows:t,docs:a})}else Oe("Nenhum laudo cadastrado para o ve\xedculo placa ".concat(H.placa,"."))}),[H,u,m,b,i.role]),Object(o.useEffect)((function(){So=1}),[]);var aa=function(){document.querySelector('[name = "placa"]').value="",L(A),J()},ta=function(){H?(V(!R),$(null)):(V(!1),J(void 0),$(null))},oa=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,m,p,f,v;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=null===k||void 0===k?void 0:k.codigoEmpresa,r=null===H||void 0===H?void 0:H.veiculoId,n=ce.empresaLaudo,i=Object(Y.a)(ce,["empresaLaudo"]),l=me()||[],!(c=u.find((function(e){return e.id===ce.id})))){a.next=7;break}return Re(Object(h.a)(Object(h.a)({},qe),{},{open:!0,msg:"O laudo informado j\xe1 existe no sistema. Laudo n\xba "+c.id.toString()})),la(),a.abrupt("return");case 7:if(Object.keys(ce).forEach((function(e){if("validade"!==e&&(!ce[e]||""===ce[e])){var a,t=null===(a=At.find((function(a){return a.field===e})))||void 0===a?void 0:a.label;l.push(t)}})),!l[0]){a.next=12;break}return Re(Object(h.a)(Object(h.a)({},qe),{},{open:!0,msg:"Favor verificar o preenchimento dos seguintes campos: "+l.toString()})),la(),a.abrupt("return");case 12:if(void 0!==t){a.next=21;break}return s=Object(h.a)({},ce),m={empresaId:o,veiculoId:r,history:s,historyLength:0,metadata:{fieldName:"laudoDoc",veiculoId:r}},re&&(m.history.files=re),Ye(m).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})),la("all fields, reset state please!"),ra("laudoDoc"),na(),setTimeout((function(){aa()}),1200),a.abrupt("return");case 21:if(!1===t&&(Ye({id:b.id,empresaId:o,history:{info:null===ce||void 0===ce?void 0:ce.info},declined:!0}).then((function(e){return console.log(e)})),ge("Solicita\xe7\xe3o indeferida!"),na(),setTimeout((function(){e.history.push("/solicitacoes")}),1500)),!0!==t){a.next=36;break}return(p=d.find((function(e){return e.empresa===n})))&&(i.empresa_id=p.id),i.veiculo_id=r,i.codigo_empresa=o,v={table:"laudos",requestElement:i},a.next=30,T.a.post("/api/addElement",v).then((function(e){var a;f=null===e||void 0===e||null===(a=e.data[0])||void 0===a?void 0:a.id,console.log(e.data)})).catch((function(e){return console.log(e)}));case 30:Ye({id:b.id,veiculoId:r,demandFiles:we,history:{},metadata:{laudoId:f,tempFile:"false"},approved:t}).then((function(e){return console.log(e.data)})),setTimeout((function(){e.history.push("/solicitacoes")}),1500),ge("Laudo aprovado!"),na(),la("Clear all Of It!!!");case 36:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();var ra=function(){var e=Object(w.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ie(a),ne(void 0);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),na=function(){return fe(!pe)},ia=function(){return He(Object(h.a)(Object(h.a)({},Ue),{},{open:!1}))},la=function(e){e&&se(Object(h.a)({},g.stateInputs)),ne(),ee(g.dropDisplay)},ca=e.redux.empresasLaudo.map((function(e){return e.empresa}));return r.a.createElement(o.Fragment,null,r.a.createElement(Ht,{empresas:s,razaoSocial:S,selectedEmpresa:k,filteredVehicles:M,selectedVehicle:H,anchorEl:G,stateInputs:ce,selectOptions:ca,dropDisplay:Q,laudoDoc:re,table:Se,demand:b,demandFiles:we,showPendencias:Fe,fileToRemove:Ne,functions:{handleInput:Qe,clickOnPlate:ea,showDetails:ta,handleFiles:function(e,a){if(!ze(e)&&e&&e[0]){var t=new FormData;t.append("fieldName","laudoDoc"),t.append("laudoId",ce.id),t.append("veiculoId",H.veiculoId),t.append(a,e[0]),ne(t),Ie(void 0)}},handleSubmit:oa,closeMenu:function(){return $(null)},clear:aa,removeFile:ra,setShowPendencias:Me,deleteLaudo:function(e){He(Object(h.a)(Object(h.a)({},Ue),{},{open:!0,element:"laudo n\xba ".concat(e),laudoId:e}))}}}),R&&r.a.createElement(Eo,{close:ta,data:Object(h.a)(Object(h.a)({},H),{},{tableData:""}),tab:3,title:"Ve\xedculo",header:"- informa\xe7\xf5es"}),Ue.open&&r.a.createElement(It,Object.assign({},Ue,{close:ia,confirm:function(e){var a=H.veiculoId,t=k.codigoEmpresa;if(e){ia(),T.a.delete("/api/delete?table=laudos&tablePK=id&id=".concat(e,"&veiculoId=").concat(a,"&codigoEmpresa=").concat(t)).then((function(e){var a=e.data;return console.log(a)}));var o=m.find((function(a){return"laudoDoc"===a.metadata.fieldName&&a.metadata.laudoId===e.toString()}));o&&T.a.delete("/api/deleteFile?collection=vehicleDocs&id=".concat(null===o||void 0===o?void 0:o.id,"&codigoEmpresa=").concat(t)).then((function(e){var a=e.data;return console.log(a)}))}},id:Ue.laudoId})),qe.open&&r.a.createElement(ot,{open:qe.open,close:function(){return Re(Object(h.a)(Object(h.a)({},qe),{},{open:!qe.open}))},alertType:qe.type,customMessage:qe.msg}),r.a.createElement(ae,{open:pe,close:na,msg:be}))})),yo=Object(o.createContext)(null);function jo(e){var a=e.motivosBaixa,t=e.selectMotivo,o=e.selectedMotivo,n=e.demand;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flexColumn"},!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Selecione o motivo da baixa"),r.a.createElement(Xe.a,{className:"config__selector",onChange:t,name:"selectedOption",value:o||"",select:!0,placeholder:"Clique para selecionar...",SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},a.map((function(e,a){return r.a.createElement($e.a,{key:a,value:e},e)}))))))}var wo=t(758),Co=t(405),ko=t(315),Do=(t(543),[{value:"baixar",label:"Baixar ve\xedculo"},{value:"gerenciar",label:"Gerenciar ve\xedculos baixados"}]);function No(e){e.empresas;var a=e.selectOption;e.parametros,e.demand,e.checked,e.delegaTransf,e.justificativa,e.pendencias,e.handleInput,e.handleBlur,e.handleCheck,e.handleSubmit;return r.a.createElement("div",{className:"flex center"},r.a.createElement("div",{className:"flexColumn "},r.a.createElement("h3",{className:"radio__title"},"Selecione uma das op\xe7\xf5es abaixo"),r.a.createElement(ko.a,{component:"fieldset"},r.a.createElement(Co.a,{"aria-label":"position",name:"position",onChange:a,row:!0,style:{width:"auto"},className:"radio"},Do.map((function(e,a){var t=e.value,o=e.label;return r.a.createElement(ta.a,{key:a,className:"radio",value:t,label:r.a.createElement("span",{className:"radio__legend"}," ",o," "),control:r.a.createElement(wo.a,{color:"primary",size:"small"})})}))))))}var Io=function(e){var a=e.action,t=e.color,o=e.onClick,n=e.disabled,i=function(){return null},l="";return"save"===a&&(i=function(){return r.a.createElement(gt.a,null)},l="Salvar"),r.a.createElement(oa.a,{size:"small",color:t||"primary",className:"saveButton",variant:"contained",onClick:function(){return o()},disabled:n},e.label||l," ",r.a.createElement("span",null,"\xa0\xa0 ")," ",i())},Ao=function(e){var a=e.data,t=e.user,o=e.handleInput,n=e.searchDischarged,i=e.downloadXls,l=e.reactivateVehicle,c=t.role,s=a.placaBaixada,d=a.dischargedFound,u=a.notFound,m=a.reactivate,p=a.selectedOption,f=JSON.parse(JSON.stringify(nt)),v=f.find((function(e){return"Observa\xe7\xe3o"===e.label})),h=f.indexOf(v);return f.splice(h,1),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex center paper"},r.a.createElement("header",{className:"searchDischarged__header"},r.a.createElement("div",{className:"searchDischarged"},r.a.createElement("div",null,r.a.createElement("form",{onSubmit:n},r.a.createElement(Xe.a,{type:"text",name:"placaBaixada",label:"Pesquisar pela placa do ve\xedculo",value:s||"",onChange:o,placeholder:"Digite a placa",InputLabelProps:{style:{fontSize:"0.7rem"}},InputProps:{style:{width:"250px",marginRight:"10px",fontSize:"0.9rem",textAlign:"center"}}})),r.a.createElement("span",{action:"search",onClick:n,style:{marginTop:"18px"}},r.a.createElement(xt.a,{className:"pointer"}))),"empresa"!==c&&r.a.createElement("div",{className:"downloadXls",onClick:i},r.a.createElement("img",{className:"downloadXls__icon",src:"baixar"===p?"":"/images/excel.png",alt:"Fazer o download do arquivo xlsx",title:"Arquivo xlsx com todos os ve\xedculos baixados"})))),d&&r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"dischargedContainer"},f.map((function(e,a){var t=e.label;return r.a.createElement(Xe.a,{label:t,key:a,value:d[t],disabled:!0,InputLabelProps:{style:{fontSize:"0.7rem"},shrink:!0},InputProps:{style:{width:"250px",margin:"8px 10px 0 0",fontSize:"0.7rem",color:"Situa\xe7\xe3o"===t&&"Reativado"===d[t]?"red":"#444"}}})}))),r.a.createElement("section",{className:"obs"},r.a.createElement("label",{htmlFor:"obs",className:"obs__label"},"Observa\xe7\xf5es:"),r.a.createElement("textarea",{name:"obs",id:"obs",className:"obs__textArea",defaultValue:d["Observa\xe7\xe3o"],cols:"30",rows:"6"})),m&&r.a.createElement("footer",{className:"reactivate"},r.a.createElement(Io,{action:"save",label:"Reativar",onClick:function(){return l()}})))),u&&r.a.createElement("h3",null,"Ve\xedculo n\xe3o encontrado."))},Po=t(468),To=t.n(Po),Fo=[{field:"placa",label:"Placa",datalist:"placa",autoComplete:!0,collection:"frota",maxLength:8},{field:"renavam",label:"Renavam"},{field:"nChassi",label:"N\xfamero do Chassi",maxLength:17},{field:"utilizacao",label:"Utiliza\xe7\xe3o",disabled:!0},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",disabled:!0},{field:"marcaChassi",label:"Marca do Chassi",disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",disabled:!0},{field:"marcaCarroceria",label:"Marca da Carroceria",disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",disabled:!0},{type:"number",field:"indicadorIdade",label:"Indicador de idade",disabled:!0}],zo=function(e){var a=e.user,t=e.selectOption,n=e.handleInput,i=e.handleBlur,l=e.handleCheck,c=e.handleSubmit,s=e.selectMotivo,d=e.data,u=e.empresas,m=e.motivosBaixa,p=e.searchDischarged,f=e.downloadXls,v=e.reactivateVehicle,h=e.setShowPendencias,b=d.selectedEmpresa,g=d.selectedOption,E=d.checked,x=d.delegaTransf,S=d.justificativa,O=d.selectedMotivo,y=d.demand,j=d.info,w=d.motivo,C=d.showPendencias;return r.a.createElement(o.Fragment,null,r.a.createElement(Ua,{links:["Ve\xedculos","/veiculos"],text:"Baixa de ve\xedculo",demand:y}),r.a.createElement(Ge,{data:d,empresas:u,handleInput:n,handleBlur:i}),r.a.createElement("div",{className:"flexColumn"},b&&r.a.createElement(r.a.Fragment,null,!y&&r.a.createElement(No,{demand:y,checked:E,delegaTransf:x,justificativa:S,empresas:u,selectOption:t,handleInput:n,handleBlur:i,handleCheck:l,handleSubmit:c}),"baixar"===g?r.a.createElement("div",{className:"flex"},r.a.createElement("section",{className:"paper"},r.a.createElement("h3",{style:{marginBottom:"7px"}},y?"Solicita\xe7\xe3o n\xba".concat(null===y||void 0===y?void 0:y.numero," - ").concat(null===y||void 0===y?void 0:y.subject):"Informe os dados para a baixa"),y&&r.a.createElement("h4",null,w),y&&r.a.createElement("h4",null,"Situa\xe7\xe3o: ",null===y||void 0===y?void 0:y.status),r.a.createElement(Qe,{form:Fo,data:d,handleBlur:i,handleInput:n,disableAll:!!y})),r.a.createElement(jo,{demand:y,selectedOption:g,motivosBaixa:m,selectMotivo:s,selectedMotivo:O,info:j,empresas:u,handleInput:n,handleBlur:i,handleSubmit:c,setShowPendencias:h,showPendencias:C})):"gerenciar"===g?r.a.createElement(Ao,{data:d,user:a,handleInput:n,searchDischarged:p,downloadXls:f,reactivateVehicle:v}):null,y||"baixar"!==g?y?r.a.createElement(Ya,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:y,setShowPendencias:h,showPendencias:C,info:j,handleSubmit:c,handleInput:n}):null:r.a.createElement("div",{className:"flexEnd"},r.a.createElement(oa.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"10px 0 10px 0"},onClick:function(){return c()}},"Confirmar ",r.a.createElement("span",null,"\xa0\xa0 ")," ",r.a.createElement(To.a,null))))))},Mo=function(e){Object(D.a)(t,e);var a=Object(N.a)(t);function t(){var e;Object(C.a)(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(e=a.call.apply(a,[this].concat(r))).state={empresas:[],razaoSocial:"",frota:[],placa:"",form:{},check:"",delegaTransf:"",toastMsg:"Solicita\xe7\xe3o de Baixa Enviada",confirmToast:!1,openDialog:!1,showPendencias:!1},e.selectOption=function(a){return e.setState({selectedOption:a.target.value})},e.selectMotivo=function(a){return e.setState({selectedMotivo:a.target.value})},e.handleInput=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=t.target,r=o.name,n=o.value,i=e.props.redux,l=i.veiculos,c=i.empresas,e.setState(Object(f.a)({},r,n)),!("razaoSocial"===r&&n.length>2)){a.next=15;break}if(!(s=c.find((function(e){return e.razaoSocial===n})))){a.next=12;break}return a.next=7,e.setState({razaoSocial:s.razaoSocial,selectedEmpresa:s});case 7:n!==s.razaoSocial&&e.setState({selectedEmpresa:void 0}),d=l.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:d}),a.next=15;break;case 12:return a.next=14,e.setState({selectedEmpresa:void 0,frota:[]});case 14:e.reset();case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleBlur=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m,p,f,v,b,g;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.props.redux,r=o.empresas,n=o.logs,i=e.state,l=i.frota,c=i.demand,s=t.target.name,d=t.target.value,"delegaTransf"!==s){a.next=14;break}if(!(d.length>0)){a.next=14;break}if(!(u=r.find((function(e){return e.razaoSocial===d})))){a.next=13;break}return m=u.razaoSocial,p=u.codigoEmpresa,a.next=9,e.setState({delegaTransf:m,delegaTransfId:p,disableSubmit:!0});case 9:console.log(e.state),a.next=14;break;case 13:e.setState({openAlertDialog:!0,alertType:"empresaNotFound",delegaTransf:""});case 14:if("placa"!==s||"string"===typeof l){a.next=29;break}if(d&&""!==d||e.setState({disableSubmit:!0}),d.length>2&&(f=l.find((function(e){return"string"===typeof d?e.placa.toLowerCase().match(d.toLowerCase()):e.placa.match(d)}))),!f){a.next=28;break}if(c){a.next=24;break}if("Solicita\xe7\xe3o j\xe1 cadastrada",b="J\xe1 existe uma demanda aberta para o ve\xedculo de placa ".concat(f.placa,'. Para acess\xe1-la, clique em "Solicita\xe7\xf5es" no menu superior.'),!dt(null===(v=f)||void 0===v?void 0:v.veiculoId,n)){a.next=24;break}return e.setState({customTitle:"Solicita\xe7\xe3o j\xe1 cadastrada",customMessage:b,openAlertDialog:!0,delegatario:"",placa:void 0}),a.abrupt("return");case 24:return a.next=26,e.setState(Object(h.a)(Object(h.a)({},f),{},{selectedVehicle:f}));case 26:a.next=29;break;case 28:""!==e.state.placa&&(g={},l[0]&&Object.keys(l[0]).forEach((function(e){return g[e]=""})),e.setState({alertType:"plateNotFound",openAlertDialog:!0,disableSubmit:!0}),e.setState(Object(h.a)({},g)));case 29:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleSubmit=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m,p,f,v,b,g,E,x,S,O,y;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.props.redux,r=o.empresas,n=o.veiculos,i=e.state,l=i.selectedEmpresa,c=i.veiculoId,s=i.selectedMotivo,d=i.demand,u=i.selectedVehicle,m=i.info,p=i.motivo,f=u.dataEmissao,v=u.vencimento,b=u.dataRegistro,g=l.codigoEmpresa,E={empresaId:g,veiculoId:c,history:{info:s?"Motivo da baixa: ".concat(s):p},historyLength:0,approved:t},d&&(E.id=null===d||void 0===d?void 0:d.id),!1!==t){a.next=8;break}return E.declined=!0,E.history.info=m,a.next=8,e.setState({toastMsg:"Baixa de ve\xedculo indeferida."});case 8:if(Ye(E).then((function(e){return console.log(e.data)})),!t){a.next=19;break}return"veiculos","veiculo_id",x={},nt.forEach((function(e){var a=e.field,t=e.label;u[a]&&(x[t]=u[a].toString())})),S="string"===typeof p&&p.replace("Motivo da baixa: ",""),Object.assign(x,{"Situa\xe7\xe3o":"Baixado","Data de Registro":new Date(b).toLocaleDateString(),"Data baixa":(new Date).toLocaleDateString(),"Data Inicio":new Date(f).toLocaleDateString(),"Data Fim":new Date(v).toLocaleDateString(),"Motivo da Baixa":S,"Observa\xe7\xe3o":"".concat(p)}),T.a.post("/api/baixaVeiculo",x),a.next=17,T.a.delete("/api/delete?table=".concat("veiculos","&tablePK=").concat("veiculo_id","&id=").concat(c,"&codigoEmpresa=").concat(g)).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 17:return a.next=19,e.setState({toastMsg:"Baixa realizada com sucesso."});case 19:if(e.toast(),!r||1!==r.length){a.next=26;break}return y={selectedEmpresa:r[0],razaoSocial:null===(O=r[0])||void 0===O?void 0:O.razaoSocial,frota:n},a.next=24,e.setState(Object(h.a)(Object(h.a)({},y),{},{selectedMotivo:void 0}));case 24:a.next=28;break;case 26:return a.next=28,e.setState({selectedEmpresa:void 0,frota:[],razaoSocial:"",selectedMotivo:void 0});case 28:e.reset(),d&&setTimeout((function(){e.props.history.push("/solicitacoes")}),1500);case 30:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.searchDischarged=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m,p;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),r=e.state.placaBaixada,n=e.props.redux.parametros,i=null===(o=n[0])||void 0===o?void 0:o.idadeBaixa,l=i.idadeBaixaAut,a.next=7,T.a.get("/api/getOldVehicles?placa=".concat(r));case 7:c=a.sent,(s=null===c||void 0===c?void 0:c.data)[0]?(d=s[0],u=(new Date).getFullYear(),m=+d["Ano carroceria"],p=!0,(u-m>l||"Reativado"===d["Situa\xe7\xe3o"])&&(p=!1),e.setState({dischargedFound:s[0],notFound:!1,reactivate:p})):e.setState({notFound:!0,dischargedFound:void 0});case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.reactivateVehicle=function(){var a=e.state.dischargedFound,t={placa:null===a||void 0===a?void 0:a.Placa,"Situa\xe7\xe3o":"Reativado"},o="O ve\xedculo de placa ".concat(null===a||void 0===a?void 0:a.Placa," poder\xe1 ser recadastrado no sistema acessando as op\xe7\xf5es Ve\xedculos -> Cadastro de Ve\xedculos.");T.a.patch("/api/reactivateVehicle",t).then((function(a){200===a.status&&e.setState({customMessage:o,customTitle:"Ve\xedculo reativado.",openAlertDialog:!0,placaBaixada:"",dischargedFound:void 0}),console.log(a.data)}))},e.reset=function(){Fo.forEach((function(a){return e.setState(Object(f.a)({},a.field,""))})),e.setState({delegaTransf:"",check:"",justificativa:"",checked:!1,demand:void 0})},e.downloadXls=function(){e.setState({loading:!0}),T()({url:"/api/oldVehiclesXls",method:"GET",responseType:"blob",onDownloadProgress:function(e){Math.round(e.loaded)}}).then((function(a){var t=a.headers["content-disposition"],o=t.indexOf("=")+1,r=t.slice(o),n=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");i.href=n,i.setAttribute("download",r),document.body.appendChild(i),i.click(),e.setState({loading:!1})})).catch((function(e){console.log(e)}))},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.handleCheck=function(a){return e.setState({checked:a.target.value})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,o,r,n,i,l,c,s,d,u,m,p,f,v,b,g,E;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.redux,i=n.empresas,l=n.veiculos,i&&1===i.length&&this.setState({selectedEmpresa:i[0],razaoSocial:null===(a=i[0])||void 0===a?void 0:a.razaoSocial,frota:l}),!(c=null===(t=this.props)||void 0===t||null===(o=t.location)||void 0===o||null===(r=o.state)||void 0===r?void 0:r.demand)){e.next=7;break}return d=this.props.redux,u=d.empresas,m=d.veiculos,p=c.empresa,f=c.veiculo,v=u.find((function(e){return e.razaoSocial===p})),b=m.filter((function(e){return e.placa===f})),g=b.find((function(e){return e.placa===f})),E=null===c||void 0===c||null===(s=c.history[0])||void 0===s?void 0:s.info,e.next=7,this.setState(Object(h.a)(Object(h.a)({razaoSocial:p,selectedEmpresa:v,placa:f,frota:b},g),{},{selectedVehicle:g,demand:c,selectedOption:"baixar",motivo:E}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.user,a=this.props.redux,t=a.empresas,n=a.parametros[0].motivosBaixa,i=this.state,l=i.delegaTransf,c=i.confirmToast,s=i.toastMsg,d=i.checked,u=i.openAlertDialog,m=i.customTitle,p=i.customMessage,f=i.alertType,v=i.loading;return r.a.createElement(o.Fragment,null,r.a.createElement(zo,{data:this.state,empresas:t,user:e,motivosBaixa:n,checked:d,selectOption:this.selectOption,selectMotivo:this.selectMotivo,delegaTransf:l,handleInput:this.handleInput,handleBlur:this.handleBlur,handleCheck:this.handleCheck,handleSubmit:this.handleSubmit,searchDischarged:this.searchDischarged,downloadXls:this.downloadXls,reactivateVehicle:this.reactivateVehicle,setShowPendencias:this.setShowPendencias}),u&&r.a.createElement(ot,{open:u,close:this.closeAlert,alertType:f,customTitle:m,customMessage:p}),r.a.createElement(ae,{open:c,close:this.toast,msg:s}),v&&r.a.createElement(U,null))}}]),t}(o.Component);Mo.contextType=yo;var Lo=Ee(["veiculos","empresas","parametros","equipamentos","acessibilidade"],Mo),_o=t(157),qo=t.n(_o),Ro=(t(544),t(256)),Vo=t.n(Ro),Bo=t(255),Uo=t.n(Bo),Ho=function(e){var a=e.data,t=e.handleInput,o=e.plusOne,n=e.removeOne;console.log("\ud83d\ude80 ~ file: SimpleParams.jsx ~ line 8 ~ SimpleParams ~ data",a);var i=Object(v.a)(null===a||void 0===a?void 0:a.newState)||[];return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("h4",{className:"singleParams__title"},"Clique nos campos abaixo para editar e/ou adicione novos.")),i.map((function(e,a){return r.a.createElement("section",{className:"singleParams__container",key:a},r.a.createElement("div",{className:"singleParams__rowContainer"},r.a.createElement(Xe.a,{name:a.toString(),value:i[a],onChange:t,variant:"filled",InputProps:{style:{margin:"8px 0"}},inputProps:{style:{width:"300px",textAlign:"center",fontSize:"10pt",height:"30px",padding:"5px 0"}}}),r.a.createElement("div",{className:"singleParams__deleteIcon",title:"Remover",onClick:function(){return n(a)}},r.a.createElement(Uo.a,null))))})),r.a.createElement("div",{className:"addIcon"},r.a.createElement("div",{className:"addIcon__container",onClick:function(){return o()}},r.a.createElement("span",{className:"addIcon__text"},"Adicionar"),r.a.createElement(Vo.a,{className:"addIcon__icon"}))))};function Yo(e){var a=e.title,t=e.checked,o=e.toggleChecked;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ta.a,{style:{marginTop:"20px"},control:r.a.createElement(aa.a,{checked:!0===t,onChange:function(){return o(!t)},value:t}),label:r.a.createElement("p",{style:{color:"#2979ff",fontSize:"0.7rem",float:"right"}},a)}))}t(545);var Jo=function(e){var a=e.data,t=e.selectOption,o=e.handleInput,n=e.handleSubmit,i=e.plusOne,l=e.removeOne,c=e.outsider,s=e.toggleChecked,d=a.tab,u=a.options,m=a.selectedOption,p=a.form,f=a.modified;return r.a.createElement(r.a.Fragment,null,!c&&r.a.createElement("header",{className:"selectHeader"},r.a.createElement(Ua,{links:["Par\xe2metros","/parametros"],text:"Altera\xe7\xe3o de par\xe2metros do sistema"}),r.a.createElement("h4",{className:"parametrosTitle"},"Altera\xe7\xe3o de par\xe2metros do sistema"),r.a.createElement(Xe.a,{className:"config__selector",onChange:t,name:"selectedOption",value:m||"",select:!0,label:!m&&"Selecione uma das op\xe7\xf5es...",SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},u.map((function(e,a){return r.a.createElement($e.a,{key:a,value:e},e)})))),p&&3!==d&&5!==d&&r.a.createElement("main",{className:"configForm"},r.a.createElement(Qe,{form:p,data:a,handleInput:o,style:{width:"100%",flexDirection:"column"}})),(3===d||6===d)&&r.a.createElement(Ho,{form:p,data:a,plusOne:i,removeOne:l,handleInput:o,style:{width:"100%",flexDirection:"column"}}),5===d&&r.a.createElement("div",{className:"flex center"},r.a.createElement(Yo,{title:"Habilitar valida\xe7\xe3o de campos",checked:a.inputValidation,toggleChecked:s})),m&&r.a.createElement("div",{style:{minHeight:"60px",position:"flex"}},r.a.createElement(Io,{action:"save",onClick:n,disabled:!f})))},Ko={variant:"outlined",pattern:/^[0-9]*$/,maxLength:2},Wo=Ko.variant,Go=[{field:"comercial",label:"Comercial"},{field:"comercialExecutivo",label:"Comercial Executivo"},{field:"convencional",label:"Convencional"},{field:"convencionalExecutivo",label:"Convencional Executivo"},{field:"leito",label:"Leito"},{field:"leitoExecutivo",label:"Leito e Executivo"},{field:"semiLeito",label:"Semi-Leito"},{field:"semiLeitoExecutivo",label:"Semi-Leito Executivo"}],$o=[Object(h.a)({field:"idadeMaxCad",label:"Idade m\xe1xima para cadastro (anos)"},Ko),Object(h.a)(Object(h.a)({field:"difIdade",label:"Diferen\xe7a toler\xe1vel de idade da carroceria e chassi (anos)"},Ko),{},{maxLength:1}),Object(h.a)({field:"idadeBaixaAut",label:"Idade para baixa autom\xe1tica (anos)"},Ko),{field:"diaBaixaAut",label:"Dia para baixa autom\xe1tica (dd/mm)",maxLength:5,pattern:/^(0[1-9]|[12][0-9]|30(?!\/02)|31(?!\/(0[2469]|11)))\/(0[1-9]|1[0-2])$/,variant:Wo},Object(h.a)(Object(h.a)({field:"prazoAvisoBaixa",label:"Prazo para aviso de baixa (dias)"},Ko),{},{maxLength:3})],Xo=[{field:"motivoBaixa",label:"Inserir novo motivo"}],Zo=[{field:"secretaria",label:"Nome da Secretaria"},{field:"subsecretaria",label:"Nome da Subsecretaria"},{field:"superintendencia",label:"Nome da Superintendencia"},{field:"diretoria",label:"Nome da diretoria"},{field:"sistema",label:"Nome do sistema"},{field:"siglaSecretaria",label:"Sigla da Secretaria"},{field:"siglaSistema",label:"Sigla do Sistema"}],Qo=[{field:"prazoAlertaLaudo",label:"Prazos para aviso de vencimento do Laudo (dias)",pattern:/^\d+(?:,\s*\d{1,3})*$/,maxLength:50},{field:"prazoAlertaProcuracao",label:"Prazos para aviso de vencimento da Procura\xe7\xe3o (dias)",pattern:/^\d+(?:,\s*\d{1,3})*$/,maxLength:50},{field:"prazoAlertaSeguro",label:"Prazos para aviso de vencimento do Seguro (dias)",pattern:/^\d+(?:,\s*\d{1,3})*$/,maxLength:50}],er=[{field:"adminEmails",label:"Editar e-mails para envio de alertas di\xe1rios"}],ar=Ee(["parametros"],(function(e){var a=Object(o.useState)({options:["Idade e prazos para baixa","Dist\xe2ncia m\xednima entre poltronas","Nomenclaturas","Motivos para baixa do ve\xedculo","Prazos para avisos autom\xe1ticos do sistema","Valida\xe7\xe3o de campos","Emails para notifica\xe7\xe3o autom\xe1tica"],params:["idadeBaixa","distanciaPoltronas","nomes","motivosBaixa","prazosAlerta","inputValidation","adminEmails"],forms:[$o,Go,Zo,Xo,Qo,er]}),t=Object(Ke.a)(a,2),n=t[0],i=t[1],l=n.toastMsg,c=n.toastStatus,s=n.confirmToast,d=e.outsider;Object(o.useEffect)((function(){if(d){var a,t=e.redux.parametros,o=t[0].motivosBaixa;o&&"object"===typeof o&&(null===(a=t[0])||void 0===a?void 0:a.id)&&(o.id=t[0].id),i(Object(h.a)(Object(h.a)({},n),{},{form:Xo,tab:3,initState:o,newState:o,selectedOption:"Motivos para baixa do ve\xedculo"}))}return function(){}}),[d]);var u=Object(o.useCallback)((function(a){var t,o,r,l=a.target,c=l.name,s=l.value,d=e.redux.parametros,u=n.options,m=n.forms,p=n.params,v=u.indexOf(s),b=m[v],g=d[0][p[v]];g&&g instanceof Object&&(null===(t=d[0])||void 0===t?void 0:t.id)?g.id=d[0].id:"boolean"===typeof g&&(g={id:d[0].id,inputValidation:g}),i(3===v||6===v?Object(h.a)(Object(h.a)({},n),{},(o={initState:g,newState:g},Object(f.a)(o,c,s),Object(f.a)(o,"tab",v),Object(f.a)(o,"form",b),Object(f.a)(o,"modified",!1),o)):Object(h.a)(Object(h.a)(Object(h.a)({},n),g),{},(r={initState:g},Object(f.a)(r,c,s),Object(f.a)(r,"tab",v),Object(f.a)(r,"form",b),Object(f.a)(r,"newState",void 0),Object(f.a)(r,"modified",!1),r)))}),[e.redux,n]),m=function(){var e=Object(w.a)(j.a.mark((function e(a){var t,o,r,l,c,s,d;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.tab,o=a.target,r=o.name,l=o.value,3===t||6===t?((s=Object(v.a)(n.newState))[r]=l,c=p(null,null,s),i(Object(h.a)(Object(h.a)({},n),{},{newState:s,modified:c}))):(c=p(r,l),i(Object(h.a)(Object(h.a)({},n),{},(d={},Object(f.a)(d,r,l),Object(f.a)(d,"modified",c),d))));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),p=function(e,a,t){var o,r,i,l=n.initState,c=!1;return t?i=l.toString()!==t.toString():(Object.keys(l).forEach((function(a){a!==e&&n[a].toString()!==l[a].toString()&&(o=!0)})),r=l[e]&&l[e].toString()!==a),(r||o||i)&&(c=!0),c},b=function(e,a){return i(Object(h.a)(Object(h.a)({},n),{},{confirmToast:!n.confirmToast,toastMsg:e,toastStatus:a}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Jo,{data:n,selectOption:u,plusOne:function(){var e=Object(v.a)(n.initState);n.newState&&(e=Object(v.a)(n.newState)),e[e.length]="",i(Object(h.a)(Object(h.a)({},n),{},{newState:e}))},removeOne:function(e){var a=n.initState,t=n.newState,o=Object(v.a)(a);t&&(o=Object(v.a)(t)),o.splice(e,1);var r=p(null,null,o);i(Object(h.a)(Object(h.a)({},n),{},{newState:o,modified:r}))},handleInput:m,handleSubmit:function(){var e,a=n.tab,t=n.forms,o=n.params,r=n.initState,l=n.newState,c=n.inputValidation,s=r.id,d=t[a],u=d&&d.map((function(e){return e.field})),m=o[a],p={};if(3===a||6===a)l.forEach((function(e,a){""===e&&l.splice(a,1)})),i(Object(h.a)(Object(h.a)({},n),{},{newState:l})),p=l;else if(4===a){var v,g=Object(F.a)(d);try{for(g.s();!(v=g.n()).done;){var E=v.value,x=n[E.field];Array.isArray(x)||(x=x.split(",")),x=x.map((function(e){return Number(e)})),Object.assign(p,Object(f.a)({},E.field,x))}}catch(S){g.e(S)}finally{g.f()}if(me())return void alert("Os prazos devem ser informados em n\xfameros de dias e separados por v\xedrgula. Favor verificar o preenchimento.")}else 5===a?p=c:u.forEach((function(e){return Object.assign(p,Object(f.a)({},e,n[e]))}));T.a.patch("/api/parametros",(e={},Object(f.a)(e,m,p),Object(f.a)(e,"id",s),e)).then((function(e){200===e.status&&(b(e.data),setTimeout((function(){i(5===a?Object(h.a)(Object(h.a)({},n),{},{initState:{id:s,inputValidation:c},modified:!1}):Object(h.a)(Object(h.a)({},n),{},{initState:p,modified:!1}))}),1200))})).catch((function(e){return console.log(e)}))},outsider:e.outsider,toggleChecked:function(){var e=!(null===n||void 0===n?void 0:n.inputValidation),a=e!==n.initState.inputValidation;i(Object(h.a)(Object(h.a)({},n),{},{inputValidation:e,modified:a}))}}),r.a.createElement(ae,{open:s,close:b,msg:l,status:c}))}));function tr(e){var a=e.collections,t=e.collection,n=e.data,i=e.staticData,l=e.editMotivosBaixa,c=e.selectCollection,s=e.handleChange,d=e.enableEdit,u=e.confirmDelete,m=(e.handleSubmit,e.openAddDialog);return r.a.createElement(o.Fragment,null,r.a.createElement(Ua,{links:["Ve\xedculos","/veiculos"],text:"Alterar configura\xe7\xf5es de ve\xedculos"}),r.a.createElement("center",null,r.a.createElement("h4",null,"Selecione uma das op\xe7\xf5es abaixo.")),r.a.createElement("header",{className:"selectHeader"},r.a.createElement(Xe.a,{className:"config__selector",onChange:c,value:t,select:!0,SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},a.map((function(e,a){return r.a.createElement($e.a,{key:a,value:e},e)})))),i&&t&&!l&&r.a.createElement("div",{className:"divHeader"},r.a.createElement(oa.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"10px 0 10px 0"},onClick:function(){return m()}},r.a.createElement(na.a,null)," Adicionar")),l?r.a.createElement(ar,{form:Xo,tab:3,outsider:!0}):r.a.createElement("div",{className:"container"},n&&i&&n.map((function(e,a){return r.a.createElement("div",{className:"divCell",key:a},r.a.createElement(Xe.a,{value:e.edit?e[i.field]:e[i.field]+" ("+e.count+")",onChange:s,name:e.field,type:"text",inputProps:{autoCorrect:"off",spellCheck:!1,style:{fontSize:"0.8rem",color:!0===e.edit?"#000":"#999"}},className:"config__textField",disabled:!1===e.edit}),r.a.createElement("button",{component:"span",className:"configVehicleIcon",title:"Editar",onClick:function(){return d(a)},display:"none"},r.a.createElement(qo.a,{className:"confIcon",color:"primary"})),r.a.createElement("button",{className:"configVehicleIcon",title:"Remover",onClick:function(){return u(a)}},r.a.createElement(Ft.a,{className:"confIcon",color:"secondary"})))}))))}var or=Ee(["seguradoras","lookUpTable/marca_chassi","modelosChassi","lookUpTable/marca_carroceria","carrocerias","equipamentos","veiculos","acessibilidade","empresasLaudo"],function(e){Object(D.a)(t,e);var a=Object(N.a)(t);function t(){var e;Object(C.a)(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(e=a.call.apply(a,[this].concat(r))).state={collection:"",marca:"",options:[],openAddDialog:!1,confirmToast:!1,toastMsg:"Dados atualizados!",confirmDialogProps:{open:!1}},e.addCounter=function(e,a,t){var o=a.name,r=a.field,n=a.label;return t.forEach((function(a){var t=e.filter((function(e){return!e.hasOwnProperty(o)||"Itens de acessibilidade"!==n&&"Equipamentos"!==n?e[o]===a[r]:e[o].find((function(e){return e===a.id}))})).length;Object.assign(a,{count:t})})),t=t.sort((function(e,a){return e[r].localeCompare(a[r])}))},e.selectCollection=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("Motivos para baixa do ve\xedculo"!==(o=t.target.value)){a.next=4;break}return e.setState({editMotivosBaixa:!0,collection:o}),a.abrupt("return");case 4:return r=e.props.redux,n=r.veiculos,i=r.marcaChassi,l=r.marcaCarroceria,c=H.find((function(e){return e.label===o})),s=JSON.parse(JSON.stringify(e.props.redux[c.collection])),(s=e.addCounter(n,c,s)).forEach((function(e){return e.edit=!1})),e.setState({marcas:void 0,marca:""}),"modelosChassi"===c.collection&&e.setState({marcas:i}),"carrocerias"===c.collection&&e.setState({marcas:l}),a.next=13,e.setState({collection:o,data:s,staticData:c,editMotivosBaixa:void 0});case 13:case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.enableEdit=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m,p,f,v,h,b,g,E,x;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(x=function(){return(x=Object(w.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.forEach((function(e){return e.edit=!1})),p[t].edit=!0,e.next=4,this.setState({data:p,editIndex:t});case 4:s.focus();case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},E=function(){return x.apply(this,arguments)},i=JSON.parse(JSON.stringify(e.props.redux)),l=document.querySelectorAll(".divCell"),c=l[t].childNodes[0],s=c.querySelectorAll("input")[0],d=e.state,u=d.updatedObj,m=d.staticData,p=JSON.parse(JSON.stringify(e.state.data)),f=p[t],v=null===(o=e.state)||void 0===o||null===(r=o.staticData)||void 0===r?void 0:r.field,void 0===(null===f||void 0===f?void 0:f.edit)&&(f.edit=!1),h=i[m.collection].find((function(e){return e.id===f.id?Object.freeze(e):{}})),b=p[t][v]===h[v],g=p.some((function(e,a){return a!==t&&!0===e.edit&&(n=p.indexOf(e),e)}))){a.next=18;break}if(!1!==f.edit){a.next=14;break}return p[t].edit=!0,a.next=11,e.setState({data:p});case 11:s.focus(),a.next=17;break;case 14:p[t].edit=!1,u&&!b&&e.handleSubmit(u),e.setState({data:p,editIndex:void 0});case 17:return a.abrupt("return");case 18:g&&!f.edit&&(E.call(Object(Pe.a)(e)),h=i[m.collection].find((function(e){var a;return e.id===(null===(a=p[n])||void 0===a?void 0:a.id)})),b=p[n][v]===h[v],u&&!b&&e.handleSubmit(u));case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.selectMarca=function(a){var t,o=a.target.value,r=e.state.staticData.collection,n=e.props.redux,i=n.marcaChassi,l=n.marcaCarroceria;"modelosChassi"===r&&(t=i),"carrocerias"===r&&(t=l);var c=t.find((function(e){return e.marca===o})).id;e.setState({marca:o,marcaId:c})},e.handleChange=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=t.target.value,r=e.state,n=r.staticData,i=r.data,l=n.field,c=i.find((function(e){return!0===e.edit})),s=i.indexOf(c),c[l]=o,(d=Object(v.a)(e.state.data))[s]=c,u=Object(f.a)({id:null===c||void 0===c?void 0:c.id},l,o),e.setState({data:d,updatedObj:u});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(a){var t=a.target.value;e.setState({newElement:t})},e.addNewElement=Object(w.a)(j.a.mark((function a(){var t,o,r,n,i,l,c,s,d,u;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state,o=t.staticData,r=t.newElement,n=t.marcaId,i=o.table,l=o.field,c=o.collection,s=e.props.redux.veiculos,d=Object(f.a)({},l,r),n&&(d.marcaId=n),d=A.a.decamelizeKeys(d),console.log("\ud83d\ude80 ~ file: Config.jsx ~ line 205 ~ VehicleConfig ~ addNewElement= ~ requestElement",d),a.next=7,T.a.post("/api/addElement",{table:i,requestElement:d});case 7:u=e.props.redux[c],u=e.addCounter(s,o,u),e.setState({openAddDialog:!1,data:u,marcaId:void 0});case 10:case"end":return a.stop()}}),a)}))),e.confirmDelete=function(a){var t=e.state,o=t.data,r=t.staticData.field,n=o[a][r],i={open:!0,type:"delete",element:"".concat(n),index:a};e.setState({confirmDialogProps:i})},e.removeItem=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.closeConfirmDialog(),r=Object(v.a)(e.state.data),!((null===(o=r[t])||void 0===o?void 0:o.count)>0)){a.next=6;break}return alert("O item selecionado n\xe3o pode ser apagado por haver v\xednculo com um ou mais ve\xedculos cadastrados no sistema."),a.abrupt("return");case 6:if(n=e.state.staticData,i=n.collection,l=n.table,c=r[t].id,s=e.props.redux[i],!s.find((function(e){return e.id===c}))){a.next=10;break}return a.next=10,T.a.delete("/api/delete?table=".concat(l,"&tablePK=id&id=").concat(c)).catch((function(e){return console.log(e)}));case 10:r.splice(t,1),e.setState({data:r});case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleSubmit=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=e.state.staticData,r=o.table,n=A.a.decamelizeKeys(t),a.next=3,T.a.put("/api/editElements",{table:r,tablePK:"id",update:n}).catch((function(e){return console.log(e)}));case 3:e.setState({updatedObj:void 0});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.closeConfirmDialog=function(){var a=Object(h.a)({},e.state.confirmDialogProps);a.open=!1,e.setState({confirmDialogProps:a})},e.toggleDialog=function(){return e.setState({openAddDialog:!e.state.openAddDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=[];H.forEach((function(a){e.push(a.label)})),this.setState({options:e})}},{key:"componentDidUpdate",value:function(e){var a=JSON.parse(JSON.stringify(this.props.redux)),t=a.veiculos,o=this.state,r=o.staticData,n=o.data,i=o.editIndex;if(!r||!n)return null;var l=r.collection;if(JSON.stringify(e.redux[l])!==JSON.stringify(a[l])){var c=this.addCounter(t,r,a[l]);(i||0===i)&&(c[i].edit=!0),this.setState({data:c})}}},{key:"render",value:function(){var e=this.state,a=e.options,t=e.collection,n=e.data,i=e.staticData,l=e.openAddDialog,c=e.marca,s=e.marcas,d=e.editMotivosBaixa,u=e.confirmToast,m=e.toastMsg,p=e.confirmDialogProps;return r.a.createElement(o.Fragment,null,r.a.createElement(tr,{collections:a,collection:t,data:n,staticData:i,selectCollection:this.selectCollection,enableEdit:this.enableEdit,handleChange:this.handleChange,handleSubmit:this.handleSubmit,openAddDialog:this.toggleDialog,confirmDelete:this.confirmDelete,editMotivosBaixa:d}),l&&r.a.createElement(Ct,{open:l,close:this.toggleDialog,title:i.label,helperMessage:'Para adicionar, insira o nome no campo abaixo e clique em "Confirmar".',marca:c,marcas:s,selectMarca:this.selectMarca,handleInput:this.handleInput,addNewElement:this.addNewElement}),p.open&&r.a.createElement(It,Object.assign({},p,{close:this.closeConfirmDialog,confirm:this.removeItem})),r.a.createElement(ae,{open:u,close:this.toast,msg:m}))}}]),t}(o.PureComponent)),rr=t(117),nr=t.n(rr),ir=[{field:"placa",title:"Placa"},{field:"empresa",title:"Delegat\xe1rio"},{field:"seguradora",title:"Seguradora"},{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"vencimento",title:"Vencimento Seguro",render:function(e){return $a(e.vencimento)}},{field:"situacao",title:"Situa\xe7\xe3o"},{field:"compartilhado",title:"Compartilhado por"},{field:"indicadorIdade",title:"Indicador de idade",render:function(e){var a=e.indicadorIdade,t=" anos";if(a||0===a)return-1===a&&(a=0),1!==a&&0!==a||(t=" ano"),a.toString()+t}}],lr=[{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"seguradora",title:"Seguradora"},{field:"empresa",title:"Segurado"},{field:"situacao",title:"Situa\xe7\xe3o"},{field:"segurados",title:"N\xfamero de ve\xedculos"},{field:"dataEmissao",title:"In\xedcio da vig\xeancia",filtering:!1,render:function(e){return $a(e.dataEmissao)}},{field:"vencimento",title:"Vencimento",filtering:!1,render:function(e){return $a(e.vencimento)}}],cr=[[{field:"codigoEmpresa",title:"C\xf3digo da Empresa"},{field:"razaoSocial",title:"Raz\xe3o Social"},{field:"vencimentoContrato",title:"Vencimento do Cadastro",filtering:!1,render:function(e){return $a(e.vencimentoContrato)}},{field:"cnpj",title:"CNPJ"},{field:"situacao",title:"Situa\xe7\xe3o"},{field:"frota",title:"Tamanho da frota"}]].concat([[{field:"nomeSocio",title:"Nome"},{field:"cpfSocio",title:"CPF"},{field:"nomeEmpresas",title:"Delegat\xe1rio(s)"},{field:"emailSocio",title:"E-mail"},{field:"telSocio",title:"Telefone"},{field:"share",title:"Participa\xe7\xe3o Societ\xe1ria (%)",filtering:!1}]]).concat([[{field:"nomeProcurador",title:"Nome"},{field:"cpfProcurador",title:"CPF"},{field:"emailProcurador",title:"E-mail"},{field:"telProcurador",title:"Telefone"},{field:"createdAt",title:"Data de inclus\xe3o no sistema",type:"date"},{field:"nomeEmpresas",title:"Empresas"}]]).concat([ir]).concat([lr]),sr=t(470),dr=t(324),ur=function(e,a){var t,o=JSON.parse(JSON.stringify(e)),r=[],n=Object(F.a)(o);try{var i=function(){var e=t.value,o=e.procuradorId,n=a.filter((function(e){return e.procuradores.includes(o)}));n.length&&n.forEach((function(a){var t=a.codigoEmpresa,o=a.razaoSocial,n=a.vencimento,i=e.nomeProcurador,l=e.cpfProcurador,c=e.emailProcurador,s=e.telProcurador,d=e.createdAt;r.push({"Nome do Procurador":i,CPF:l,"E-mail":c,Telefone:s,"Raz\xe3o Social":o,"C\xf3digo da Empresa":t,"Data de inclus\xe3o no sistema":$a(d),"Validade da Procura\xe7\xe3o":n?$a(n):"Prazo indeterminado"})}))};for(n.s();!(t=n.n()).done;)i()}catch(l){n.e(l)}finally{n.f()}return r};var mr=function(e,a,t,o){var r=mo(e,t)||t,n=e,i=function(e,a,t){var o=JSON.parse(JSON.stringify(a));if(Array.isArray(o)){var r,n=Object(F.a)(o);try{var i=function(){var a=r.value;Object.entries(a).forEach((function(t){var o=Object(Ke.a)(t,2),r=o[0],n=o[1],i=e.find((function(e){return e.field===r}));if("procuradorId"!==r){if(!i)return void delete a[r];var l=null===i||void 0===i?void 0:i.label;n=function(e){return e instanceof Array&&(e=e.toString()),ue()(e,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()&&(e=ue()(e).format("DD/MM/YYYY")),e}(n),a[l]=n,delete a[r]}}))};for(n.s();!(r=n.n()).done;)i()}catch(l){n.e(l)}finally{n.f()}return o}}(a,r);"procuradores"===e&&(i=ur(r,o));var l=dr.utils.json_to_sheet(i),c=function(e){var a=Object.keys(e[0]).length,t=new Array(a);return e.forEach((function(e){Object.values(e).forEach((function(e,a){var o=e?e.toString().length:2;t[a]?t[a]+=o:t[a]=o}))})),t.map((function(a){var t=Math.ceil(a/e.length)+2;return t<7?7:t}))}(i);l["!cols"]=c.map((function(e){return{wch:e}}));var s={Sheets:{data:l},SheetNames:["data"]},d=dr.write(s,{bookType:"xlsx",type:"array"}),u=new Blob([d],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});sr.saveAs(u,n+".xlsx")},pr=function(e){var a=e.tab,t=e.collection,o=e.user,n=e.procuracoes,i=e.showDetails,l=e.showFiles,c=e.showCertificate,s=e.confirmDeactivate,d=e.del,u=["codigoEmpresa","socioId","procuradorId","veiculoId","apolice"][a],m=["empresas","s\xf3cios","procuradores","ve\xedculos","seguros"],p=fo(a);return Array.isArray(t)||(t=[]),t=t.map((function(e){return Object(h.a)({},e)})),r.a.createElement("div",{style:{margin:"10px 0"},className:"noPrint"},r.a.createElement(nr.a,{title:"Pesquisar dados de ".concat(m[a]),columns:cr[a],data:t,style:{fontFamily:"Segoe UI",fontSize:"14px"},options:{filtering:!0,exportFileName:m[a],exportButton:!0,exportCsv:function(e,t){mr(m[a],p,t,n)},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:20,rowStyle:{fontSize:"0.5rem"}},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Registro n\xe3o encontrado.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportCSVName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},actions:[{icon:"info",iconProps:{color:"primary"},tooltip:"Mais informa\xe7\xf5es",onClick:function(e,a){return i(e,a)}},{icon:"file_copy_outline",iconProps:{color:"secondary"},tooltip:"Ver arquivos",onClick:function(e,a){return l(a[u])}},{icon:"class_outlined",iconProps:{color:"action"},tooltip:"Emitir certificado",hidden:3!==a,onClick:function(e,a){return c(a)}},{icon:"cancel",iconProps:{color:"disabled"},tooltip:"Desativar empresa",hidden:0!==a||"empresa"===o.role,onClick:function(e,a){return s(a)}}],editable:{isDeleteHidden:function(e){return"empresa"===o.role||0===a},onRowDelete:function(){var e=Object(w.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}}))},fr=t(755),vr=t(408),hr=t(88),br=t(756),gr=t(753),Er=(t(429),Object(Z.a)((function(e){return{toolbarTitle:{flex:1},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto",backgroundColor:"#0398c1",color:"white"},toolbarLink:{padding:"12px 55px 13px 55px",flexShrink:0}}}))),xr=[{title:"P\xe1gina Inicial",link:"/"},{title:"Consultas",link:"/consultas"},{title:"Ve\xedculos",link:"/veiculos"},{title:"Empresas",link:"/empresas"},{title:"Relat\xf3rios",link:"/relatorios"},{title:"Solicita\xe7\xf5es ",link:"/solicitacoes"},{title:"Editar Conta",link:"/editAccount",icon:"person"},{title:"Avisos",link:"/avisos",icon:"notifications"}],Sr=[{title:"Alterar par\xe2metros do sistema",link:"/parametros",icon:"settings"},{title:"Gest\xe3o de usu\xe1rios",link:"/users",icon:"group"}],Or=Object(Lt.a)((function(e){return{badge:{right:-8,top:-1,padding:"0 4px"}}}))(gr.a),yr=Object(Lt.a)((function(e){return{badge:{right:-2,top:2.5,padding:"0"}}}))(gr.a);var jr=Object(c.c)((function(e){var a,t,o;return{logs:null===(a=e.data)||void 0===a?void 0:a.logs,parametros:null===(t=e.data)||void 0===t?void 0:t.parametros,avisos:null===(o=e.data)||void 0===o?void 0:o.avisos,user:e.user}}),(function(e){return Object(l.b)({logUserOut:ce},e)}))(Object(O.g)((function(e){var a=null===e||void 0===e?void 0:e.logs,t=e.parametros,n=e.avisos,i=e.location.pathname,l=e.user,c=localStorage.getItem("demand"),s=Er(),d=s.toolbarTitle,u=s.toolbarSecondary,m=s.toolbarLink,p=Object(o.useState)(document.location.pathname),f=Object(Ke.a)(p,2),v=f[0],h=f[1],b=Object(o.useState)(),g=Object(Ke.a)(b,2),E=g[0],x=g[1],O=Object(o.useState)(),y=Object(Ke.a)(O,2),C=y[0],k=y[1];Object(o.useEffect)((function(){if(a&&Array.isArray(a)){var e=a.filter((function(e){return!1===(null===e||void 0===e?void 0:e.completed)})).length;x(e)}h(i)}),[i,E,a]),Object(o.useEffect)((function(){if(Array.isArray(n)){var e=l.messagesRead,a=n.filter((function(a){return!e||!e.includes(null===a||void 0===a?void 0:a.id)})).length;k(a)}}),[k,n,l]);var D=function(e){var a,t=null===(a=document.querySelector("a[href='/solicitacoes']"))||void 0===a?void 0:a.style,o="",r="";return"/solicitacoes"===v||c?t&&(t["background-color"]="#11a7d2",t["border-bottom"]="1.5px solid #ccc"):v.match(e)&&"/"!==e&&(o="#11a7d2",r="1.5px solid #ccc",t&&(t["background-color"]="",t["border-bottom"]="")),{bgColor:o,borderB:r,borderT:"",fontW:"400"}},N="",I="";if(t&&t[0]){var A=t[0].nomes;N=A.secretaria,I=A.siglaSecretaria}var P=function(){var a=Object(w.a)(j.a.mark((function a(){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",e.logUserOut(null===l||void 0===l?void 0:l.socketId));case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(fr.a,null),r.a.createElement(vr.a,null,r.a.createElement(hr.a,{component:"h2",variant:"h6",color:"inherit",align:"center",noWrap:!0,className:d},I," - ",N),r.a.createElement(oa.a,{variant:"outlined",size:"small",onClick:function(){return P()}},"Sair")),r.a.createElement(vr.a,{component:"nav",variant:"dense",className:u},xr.map((function(e,a){var t=e.link,o=e.title;return!e.icon&&r.a.createElement(br.a,{component:S.b,to:t,key:a,color:"inherit",noWrap:!0,variant:"body2",href:"",style:{fontFamily:"Segoe UI, Tahoma, Geneva, Verdana, sans-serif",fontSize:"15px",backgroundColor:D(t).bgColor,borderBottom:D(t).borderB,fontWeight:D(t).fontW,borderTop:D(t).borderT},className:m,onClick:function(){return h(t)}},"Solicita\xe7\xf5es "===o?r.a.createElement(Or,{badgeContent:E,color:"secondary"},r.a.createElement("span",null,o)):o)})),"admin"===l.role?Sr.map((function(e,a){var t=e.title,o=e.link,n=e.icon;return r.a.createElement(br.a,{component:S.b,to:o,key:a},r.a.createElement("span",{className:"material-icons adminLink",style:{color:"white",cursor:"pointer"},title:t},n))})):r.a.createElement(br.a,{component:S.b,to:xr[6].link},r.a.createElement("span",{className:"material-icons iconHeaderLink",style:{color:"white",cursor:"pointer"},title:xr[6].title},xr[6].icon)),r.a.createElement(br.a,{component:S.b,to:xr[7].link},r.a.createElement(yr,{badgeContent:C,color:"secondary"},r.a.createElement("span",{className:"material-icons avisosLink",style:{color:"white",cursor:"pointer"},title:xr[7].title},xr[7].icon)))))}))),wr=function(){return null},Cr=t(757),kr=t(750),Dr=function(e){var a=e.items,t=e.tab,o=e.changeTab;return r.a.createElement("div",{className:"tabMenu"},r.a.createElement(Cr.a,{value:t,indicatorColor:"primary",textColor:"primary",centered:!0,onChange:o},a.map((function(e,a){return r.a.createElement(kr.a,{key:a,label:e})}))))},Nr=[[{field:"empresa",label:"Delegat\xe1rio",width:"95mm",left:"50mm"},{field:"codigoEmpresa",label:"C\xf3digo do Delegat\xe1rio",width:"18mm"},{field:"dataExpedicaoCRV",label:"Data de emiss\xe3o",width:"20mm",value:ue()().format("DD/MM/YYYY")},{field:"vencimento",label:"Validade do CRV",type:"date",width:"20mm"}]],Ir=[[{field:"placa",label:"Placa",width:"25mm",left:"8mm"},{field:"renavam",label:"Renavam",width:"42mm",left:"14mm"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",width:"35mm",left:"11mm"},{field:"nChassi",label:"N\xfamero do Chassi",width:"50mm",left:"15mm"}]],Ar=[[{field:"poltronas",label:"Poltronas",width:"16mm",left:"2mm"},{field:"piquesPoltrona",label:"Piques poltrona",width:"19mm"},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)"},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)"},{field:"eixos",label:"Eixos",width:"12mm",left:"2mm"},{field:"pneumaticosDianteiro",label:"Pneum\xe1ticos Dianteiro"},{field:"pneumaticosTraseiro",label:"Pneum\xe1ticos Traseiro"},{field:"potencia",label:"Pot\xeancia (cv)",width:"15mm"}],[{field:"marcaChassi",label:"Marca do Chassi",width:"40mm",left:"4mm"},{field:"modeloChassi",label:"Modelo do Chassi",width:"40mm",left:"3mm"},{field:"anoChassi",label:"Ano do chassi"},{field:"marcaCarroceria",label:"Marca da Carroceria",width:"40mm",left:"2mm"},{field:"modeloCarroceria",label:"Modelo da Carroceria",width:"40mm",left:"1mm"},{field:"anoCarroceria",label:"Ano da carroceria"}]],Pr=[[{field:"seguradora",label:"Seguradora",width:"75mm",left:"27.5mm"},{field:"apolice",label:"Ap\xf3lice",width:"35mm",left:"11mm"},{type:"date",field:"dataEmissao",label:"In\xedcio de vig\xeancia",width:"25mm"},{type:"date",field:"vencimento",label:"Vencimento",width:"25mm",left:"5mm"}]],Tr=[[{field:"numeroLaudo",label:"N\xfamero do Laudo",width:"45mm",left:"10mm"},{field:"empresaLaudo",label:"Empresa Respons\xe1vel",width:"80mm",left:"26mm"},{field:"vencimentoLaudo",label:"Vencimento",type:"date",width:"35mm",left:"9mm"}]],Fr=[[{field:"cmt",label:"PBT / CMT Legal (t)",width:"27mm",left:"2mm",format:function(e){return lt(e)}},{field:"pesoDianteiro",label:"Peso Dianteiro (t)",width:"27mm",left:"3.5mm",format:function(e){return lt(e)}},{field:"pesoTraseiro",label:"Peso Traseiro (t)",width:"27mm",left:"3.5mm",format:function(e){return lt(e)}},{field:"pbt",label:"Peso Bruto Total (t)",width:"30mm",left:"4mm",format:function(e){return lt(e)}},{field:"pesoPassageiros",label:"Passag/Bagagem (t)",width:"30mm",left:"3mm",format:function(e){return lt(e)}}]],zr=[[{field:"dataRegistro",label:"Data de Registro",type:"date",width:"30mm",left:"4mm"},{field:"cores",label:"Cores",width:"65mm",left:"15mm"},{field:"compartilhado",label:"Empresa autorizada a compartilhar",width:"90mm",left:"11mm"}]],Mr=t(471),Lr=t.n(Mr),_r=(t(604),function(e){var a=e.nomes,t=a.secretaria,o=a.subsecretaria,n=a.superintendencia;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"certHeader__container"},r.a.createElement("div",{className:"certHeader__brasao"},r.a.createElement("img",{src:"/images/brasao.png",alt:"Bras\xe3o de Minas Gerais",className:"certHeader__img"})),r.a.createElement("div",{className:"certHeader__text"},r.a.createElement("p",null,t),r.a.createElement("p",null,o),r.a.createElement("p",null,n),r.a.createElement("h2",null,"Certificado de Registro e Seguro"))))}),qr=Object(Z.a)((function(e){return{textField:{paddingRight:"25px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"}}})),Rr=function(e){var a=e.vehicle,t=e.nomes,n=e.checkMulti,i=e.redirect,l=e.delega,c=e.carac,s=e.dadosVeiculo,d=e.seg,u=e.vistoria,m=e.peso,p=e.info,f=qr().textField,v=a.acessibilidade,h=a.equipamentos,b=a.obs,g=[{title:"Delegat\xe1rio",form:l},{title:"Dados do Ve\xedculo",form:s},{title:"Caracter\xedsticas do Ve\xedculo",form:c},{title:"Seguro",form:d},{title:"Vistoria",form:u},{title:"Pesagem",form:m},{title:"Informa\xe7\xf5es gerais",form:p},{title:"Observa\xe7\xf5es",form:b}];return r.a.createElement(o.Fragment,null,r.a.createElement("div",{id:"pdfPage",className:"A4"},r.a.createElement("header",{className:"header"},r.a.createElement(_r,{nomes:t})),g.map((function(e,a){var t=e.title,o=e.form;return"Observa\xe7\xf5es"!==t&&r.a.createElement("section",{className:"Delegat\xe1rio"!==t?"box":"firstBox",key:a},"Delegat\xe1rio"!==t&&r.a.createElement("span",{className:"boxTitle"},t),o.map((function(e,a){return r.a.createElement("div",{key:a,className:"Delegat\xe1rio"!==t?"divLine":"firstDivLine",style:{marginTop:0===a?"7mm":"3mm"}},e.map((function(e,a){return r.a.createElement(Xe.a,{disabled:!0,key:a,name:e.field,label:e.label,className:f,multiline:!!("equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50),rows:e.value&&e.value.length<86?"2":e.value&&e.value.length<140?"3":"4",variant:"equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50?"outlined":"standard",value:"date"===e.type?ue()(e.value,!0).isValid()?e.value&&ue()(e.value).format("DD/MM/YYYY"):"":"dataExpedicao"===e.field?ue()().format("DD-MM-YYYY"):e.format?e.format(e.value):e.value||"",inputProps:{className:n(e.field),style:{width:e.width||"18mm",fontSize:"2.7mm",padding:"0 0 1px 0",margin:"0",flex:"1",color:"#000"}},InputProps:{style:{padding:"equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50?"1mm":""}},InputLabelProps:{shrink:!0,style:{fontSize:"13px",textAlign:"center !important",left:e.left||"0",color:"#000"}}})})))})))})),r.a.createElement("div",{className:"box"},r.a.createElement("span",{className:"boxTitle"},"Equipamentos / Itens de acessibilidade"),(h||v)&&r.a.createElement("div",{className:"divLine flex",style:{overflow:"unset"}},h.map((function(e,a){return v[0]||a!==h.length-1?r.a.createElement("span",{className:"equipa"},e,",\xa0"):r.a.createElement("span",{className:"equipa"},e,".")})),v.map((function(e,a){return a!==v.length-1?r.a.createElement("span",{className:"equipa",key:a},"".concat(e,", ")):r.a.createElement("span",{className:"equipa",key:a},"".concat(e,"."))})))),b&&r.a.createElement("div",{className:"flexColumn"},r.a.createElement(bo,{label:"Observa\xe7\xf5es:",name:"obs",id:"obs",defaultValue:b,rows:"7",style:{color:"#000",fontSize:"0.55 rem",padding:"5px",overflow:"hidden"}})),r.a.createElement("footer",{className:"certFooter"},r.a.createElement("h1",{className:"certFooter__title"},"PORTE OBRIGAT\xd3RIO"),r.a.createElement("p",{className:"certFooter__text"},"Este certificado pode ser verificado em ",r.a.createElement("span",{className:"link",onClick:function(){return i()}}," https://www.cadti.mg.gov.br ")))),r.a.createElement("button",{title:"Imprimir / salvar PDF",className:"noprint printButton",onClick:function(){return window.print()}},r.a.createElement(Lr.a,{style:{cursor:"pointer",color:"rgb(161, 161, 180)",fontSize:"40pt"}})))};function Vr(){var e=Object(o.useState)({}),a=Object(Ke.a)(e,2),t=a[0],n=a[1],i=Object(o.useState)({}),l=Object(Ke.a)(i,2),c=l[0],s=l[1];Object(o.useEffect)((function(){function e(){return(e=Object(w.a)(j.a.mark((function e(){var a,t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("vehicle")),t=JSON.parse(localStorage.getItem("nomes")),document.querySelectorAll(".MuiToolbar-root").forEach((function(e){return e.style.display="none"})),e.next=5,n(a);case 5:if(!t){e.next=8;break}return e.next=8,s(t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),localStorage.removeItem("vehicle")}),[]);var d=[Ar,Ir,Nr,Pr,Tr,Fr,zr],u={};if(t){var m=t.poltronas,p=t.pesoDianteiro,f=80*m/1e3;t.pesoPassageiros=f,t.pesoDianteiro=+p,d.forEach((function(e){Object.entries(t).forEach((function(a){var t=Object(Ke.a)(a,2),o=t[0],r=t[1];e.forEach((function(a,t){a.forEach((function(a,n){a.field===o&&(u=Object.assign(a,{value:r}),e[t][n]=u,u={})}))}))}))}))}if(!t){var v=window.location.origin;return window.location.replace(v),null}return r.a.createElement(Rr,{vehicle:t,nomes:c,checkMulti:function(e){return"equipamentosId"===e||"equipamentosId"===e?void 0:"certificate"},redirect:function(){document.querySelectorAll(".MuiToolbar-root").forEach((function(e){return e.style.display="none"}));var e=window.location.origin;window.location.href=e},delega:Nr,carac:Ar,dadosVeiculo:Ir,seg:Pr,vistoria:Tr,peso:Fr,info:zr})}var Br=function(e){return e>1024&&e<1048576?Math.round(e/1024)+" KB":e>=1048576&&e<1073741824?(e/1024/1024).toFixed(2)+" MB":e+" bytes"},Ur={marginBottom:0,display:"grid",grid:"50px / 4% 40% 25% 25%",width:"99%",margin:"auto",padding:"10px 0 0 0",justifyItems:"auto"},Hr=function(e){var a=e.filesCollection,t=e.close,o=e.typeId,n=e.empresas,i=e.filesIds,l=e.razaoSocial,c=[],s="empresaDocs",d=Object(v.a)(Ot);switch(o){case"veiculoId":s="vehicleDocs",(d=Object(v.a)(xa)).find((function(e){return"transferenciaDoc"===e.name}))||d.push({title:"Documento de Transfer\xeancia",name:"transferenciaDoc"}),d.find((function(e){return"newPlateDoc"===e.name}))||d.push({title:"CRLV com nova placa",name:"newPlateDoc"}),d.find((function(e){return"apoliceDoc"===e.name}))||d.push({title:"Ap\xf3lice de seguro",name:"apoliceDoc"}),d.find((function(e){return"laudoDoc"===e.name}))||d.push({title:"Laudo de seguran\xe7a veicular",name:"laudoDoc"}),d.find((function(e){return"contratoCompartilhamento"===e.name}))||d.push({title:"Contrato de Compartilhamento",name:"contratoCompartilhamento"})}i&&(a=a.filter((function(e){return-1!==i.indexOf(e.id)}))),a&&a[0]&&a.forEach((function(e){d.forEach((function(a){e.metadata&&a.name===e.metadata.fieldName&&c.push(Object(h.a)(Object(h.a)({},e),{},{label:a.title}))}))}));return c[0]?r.a.createElement("div",{className:i?"":"popUpWindow"},r.a.createElement("h5",null,r.a.createElement("img",{alt:"",src:"/images/folderIcon2.jpg",style:{paddingLeft:"20px",marginRight:"20px"}})," Arquivos"),r.a.createElement("hr",{style:{marginBottom:"5px"}}),r.a.createElement("div",{style:Ur},r.a.createElement("div",null,r.a.createElement("img",{alt:"",src:"/images/multipleFiles2.png",height:"50%"})),["Arquivo","Data de Upload","Tamanho"].map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement("span",{style:{fontSize:"1.2em",fontWeight:500}},e))}))),r.a.createElement("hr",{style:{margin:"0 0 20px 0"}}),c.map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement("div",{style:Ur},r.a.createElement("div",{className:"col s1"},r.a.createElement("img",{alt:"",src:"/images/genericFile.png"})),r.a.createElement("div",{className:"col s11"},r.a.createElement("span",{style:{textDecoration:"underline",cursor:"pointer",color:"blue"},onClick:function(){return Da(e.id,e.filename,s,e.metadata.fieldName)}},function(e){var a=e.metadata,t=e.label;switch(a.fieldName){case"procuracao":if(l)return t+" - "+l;var o=n.find((function(e){return e.codigoEmpresa===Number(a.empresaId)}));return t+" - "+(null===o||void 0===o?void 0:o.razaoSocial)||"";case"apoliceDoc":return a.apolice?t+" n\xfamero "+a.apolice:t;case"altContratoDoc":return a.numeroAlteracao?"".concat(a.numeroAlteracao,"\xaa ")+t:t;default:return t}}(e))),r.a.createElement("div",{className:"col s3"},$a(e.uploadDate,!0)),r.a.createElement("div",{className:"col s3"},Br(e.length))))})),r.a.createElement(ca,{close:t})):null},Yr=new MutationObserver((function(e,a){e.forEach((function(e){e.addedNodes.forEach((function(e){if(e.nodeType===Node.ELEMENT_NODE){var a=e;a.classList.contains("MuiPopover-root")&&Array.from(a.getElementsByClassName("MuiMenuItem-root")).forEach((function(e){"Export as PDF"===e.textContent&&e.remove()}))}}))}))})),Jr=function(e){return e?Yr.disconnect():Yr.observe(document.body,{childList:!0})},Kr=function(e,a,t){var o;return e.forEach((function(e){if(e.empresas instanceof Array){var r=e.empresas;1===t&&(r=e.empresas.map((function(e){return null===e||void 0===e?void 0:e.codigoEmpresa}))),(o=a.filter((function(e){return r.includes(e.codigoEmpresa)})).map((function(e){return e.razaoSocial})).toString().replace(",",", "))&&(e.nomeEmpresas=o)}})),e},Wr={top:"5%",left:"10%",right:"10%"},Gr=function(e){Object(D.a)(t,e);var a=Object(N.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={tab:0,items:["Empresas","S\xf3cios","Procuradores","Ve\xedculos","Seguros"],tablePKs:["codigo_empresa","socio_id","procurador_id","veiculo_id","id"],dbTables:["empresas","socios","procuradores","veiculos","seguros"],options:["empresas","socios","procuradores","veiculos","seguros"],detailsTitle:["Empresa","S\xf3cio","Procurador","Placa","Ap\xf3lice"],detailsHeader:["razaoSocial","nomeSocio","nomeProcurador","placa","apolice"],empresas:[],seguros:[],razaoSocial:"",showDetails:!1,showFiles:!1,openDialog:!1,filesCollection:[],elementDetails:"",vehicleDocs:[],showCertificate:!1},e.changeTab=function(){var a=Object(w.a)(j.a.mark((function a(t,o){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.setState({tab:o});case 2:return a.abrupt("return");case 3:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.showDetails=function(){var a=Object(w.a)(j.a.mark((function a(t,o){var r,n,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.props.redux,n=e.state,i=n.options,l=n.tab,c=n.tablePKs,s=c.map((function(e){return A.a.camelize(e)})),o&&(d=r[i[l]].find((function(e){return e[s[l]]===o[s[l]]}))),void 0===o||!d){a.next=8;break}return a.next=5,e.setState({showDetails:!e.state.showDetails,elementDetails:d});case 5:a.next=9;break;case 8:e.setState({showDetails:!e.state.showDetails,elementDetails:void 0});case 9:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.closeFiles=function(){e.setState({showFiles:!e.state.showFiles})},e.showFiles=function(a){var t,o,r=e.state.tab,n=e.props.redux,i=n.veiculos,l=n.socios,c=n.empresaDocs,s=n.vehicleDocs;switch(r){case 0:t=c.filter((function(e){var t;return e.metadata.empresaId===a&&!1===(null===(t=e.metadata)||void 0===t?void 0:t.tempFile)})),o="empresaId";break;case 1:t=c.filter((function(e){return e.metadata.empresaId===a}));var d=l.find((function(e){return e.socioId===a}));if(d){var u=[];(t=c.filter((function(e){return d.empresas.some((function(a){return a.codigoEmpresa===e.metadata.empresaId&&"crc"!==e.metadata.fieldName}))}))).forEach((function(e){e.metadata.socios&&e.metadata.socios.includes(a)&&u.push(e)})),t=u}break;case 2:o="procuracaoId";var m=[];c.forEach((function(e){var t,o;"procuracao"===(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.fieldName)&&((null===e||void 0===e||null===(o=e.metadata)||void 0===o?void 0:o.procuradores)&&e.metadata.procuradores.forEach((function(t){t===a&&m.push(e)})))})),t=m;break;case 3:o="veiculoId",t=s.filter((function(e){return e.metadata.veiculoId===a}));var p=i.find((function(e){return e.veiculoId===a}));if(p){var f=c.find((function(e){var a,t;return(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.apolice)===(null===p||void 0===p||null===(t=p.apolice)||void 0===t?void 0:t.toString())}));f&&t.push(f)}break;case 4:t=c.filter((function(e){return e.metadata.apolice===a}))}t=t.filter((function(e){var a;return!1===(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.tempFile)})),console.log(t),t[0]?(t=t.sort((function(e,a){return new Date(e.uploadDate)-new Date(a.uploadDate)})).reverse(),e.setState({filesCollection:t,showFiles:!0,typeId:o,selectedElement:a})):(e.setState({alertType:"filesNotFound",openAlertDialog:!0,subject:o}),e.setState({filesCollection:[]}))},e.confirmDeactivate=function(a){"Desativada"!==a.situacao?e.setState({openConfirmDialog:!0,confirmType:"deactivateEmpresa",element:(null===a||void 0===a?void 0:a.razaoSocial)||"",empresaToDeactivate:null===a||void 0===a?void 0:a.codigoEmpresa}):alert("A empresa ".concat(a.razaoSocial," j\xe1 foi desativada."))},e.deleteHandler=function(a){var t=e.state,o=t.dbTables,r=t.tablePKs,n=t.tab,i=o[n],l=r[n],c=A.a.camelize(l),s=a.codigoEmpresa;if("socios"!==i&&"procuradores"!==i||(s=JSON.stringify(null===a||void 0===a?void 0:a.empresas)),0===n){var d={table:i,tablePK:"codigo_empresa",update:{codigo_empresa:s=a,situacao:"Desativada"}};T.a.put("/api/editElements",d),e.closeConfirmDialog()}else T.a.delete("/api/delete?table=".concat(i,"&tablePK=").concat(l,"&id=").concat(a[c],"&codigoEmpresa=").concat(s,"&cpf_socio=").concat(a.cpfSocio,"&cpf_procurador=").concat(a.cpfProcurador)).then((function(e){return console.log(e.data)}))},e.showCertificate=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.props.redux.parametros,r=t.anoCarroceria,n=t.situacao,i=t.vencimento,l=ue()(i).isBefore(),c=(new Date).getFullYear(),!(c-r>=16)){a.next=7;break}if(ue()(t.vencimentoLaudo).isAfter(ue()())){a.next=7;break}return a.next=6,e.setState({openAlertDialog:!0,customTitle:"Certificado de seguran\xe7a veicular pendente.",customMessage:"O laudo de seguran\xe7a veicular n\xe3o est\xe1 registrado no sistema ou se encontra vencido. Para regularizar, acesse Ve\xedculos -> Laudos."});case 6:return a.abrupt("return");case 7:if("Ativo"===n){a.next=11;break}return a.next=10,e.setState({alertType:"veiculoPendente",openAlertDialog:!0});case 10:return a.abrupt("return");case 11:if(!l){a.next=15;break}return a.next=14,e.setState({alertType:"seguroVencido",openAlertDialog:!0});case 14:return a.abrupt("return");case 15:s=window.location.origin+"/crv",localStorage.setItem("vehicle",JSON.stringify(t)),o&&o[0]&&(d=o[0].nomes,localStorage.setItem("nomes",JSON.stringify(d))),window.open(s,"noopener");case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.closeCertificate=function(){return e.setState({showCertificate:!e.state.showCertificate})},e.closeConfirmDialog=function(){return e.setState({openConfirmDialog:!1})},e.escFunction=function(a){27===a.keyCode&&(e.state.showDetails&&e.showDetails(),e.state.showFiles&&e.closeFiles(),e.state.showCertificate&&e.closeCertificate())},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1),Jr()}},{key:"componentWillUnmount",value:function(){Jr(!0),this.setState({})}},{key:"render",value:function(){var e,a=this.state,t=a.tab,n=a.options,i=a.items,l=a.showDetails,c=a.elementDetails,s=a.showFiles,d=a.selectedElement,u=a.filesCollection,m=a.typeId,p=a.tablePKs,f=a.showCertificate,h=a.certified,b=a.detailsTitle,g=a.detailsHeader,E=a.openAlertDialog,x=a.openConfirmDialog,S=a.alertType,O=a.confirmType,y=a.customTitle,j=a.customMessage,w=this.props,C=w.redux,k=w.user,D=C.empresas,N=C.procuracoes,I=C.procuradores,P=C.empresaDocs,T=C.altContrato,F=p.map((function(e){return A.a.camelize(e)})),z=Object(v.a)(this.props.redux[n[t]]);return 1!==t&&2!==t||(z=Kr(z,D,t)),c&&l&&(e=z.find((function(e){return e[F[t]]===c[F[t]]}))),r.a.createElement(o.Fragment,null,r.a.createElement(Dr,{items:i,tab:t,changeTab:this.changeTab}),r.a.createElement(pr,{tab:t,items:i,collection:z,empresas:D,procuracoes:N,user:k,showDetails:this.showDetails,showFiles:this.showFiles,del:this.deleteHandler,showCertificate:this.showCertificate,confirmDeactivate:this.confirmDeactivate}),l&&r.a.createElement(Eo,{close:this.showDetails,data:e||c,tab:t,title:b[t],header:g[t],empresas:D,procuracoes:N,procuradores:I,empresaDocs:P,altContrato:T}),f&&r.a.createElement(Vr,{vehicle:h}),s&&r.a.createElement(Hr,{tab:t,elementId:d,filesCollection:u,close:this.closeFiles,format:Wr,typeId:m,empresas:D,empresaDocs:P}),E&&r.a.createElement(ot,{open:E,close:this.closeAlert,alertType:S,tab:t,customMessage:j,customTitle:y}),x&&r.a.createElement(It,{open:x,close:this.closeConfirmDialog,confirm:this.deleteHandler,element:this.state.element,type:O,id:this.state.empresaToDeactivate}))}}]),t}(o.Component),$r=Object(c.c)(null,{updateCollection:V})(Ee(["veiculos","empresas","socios","procuradores","seguros","seguradoras","procuracoes","getFiles/vehicleDocs","getFiles/empresaDocs","equipamentos","acessibilidade","laudos","altContrato","parametros"],Gr)),Xr=[{title:"Contrato Social",name:"contratoSocial"},{title:"CRC",name:"crc"}],Zr=function(e){var a=e.handleInput,t=e.handleBlur,o=e.data,n=e.handleFiles,i=e.removeFile,l=o.activeStep,c=o.stepTitles,s=o.form,d=o.fileToRemove;return r.a.createElement("div",{className:"flex paper"},r.a.createElement(ea,{subtitle:c[l]}),r.a.createElement("main",null,r.a.createElement(Qe,{form:oo,data:o,handleBlur:t,handleInput:a}),r.a.createElement("div",{className:"flex center"},Xr.map((function(e,a){var t=e.name,o=e.title;return r.a.createElement(ga,{key:a,name:t,formData:s,dropDisplay:"Clique ou arraste para anexar o ".concat(o),handleFiles:n,removeFile:i,fileToRemove:d,style:{width:"25%",marginRight:0===a?"12px":0}})})))))},Qr=[{field:"nomeSocio",label:"Nome do S\xf3cio",maxLength:90,width:195,disabled:!0},Object(h.a)(Object(h.a)({},Gt),{},{width:195,disabled:!0}),Object(h.a)(Object(h.a)({},$t),{},{field:"telSocio",width:195}),Object(h.a)(Object(h.a)({},Xt),{},{field:"emailSocio",width:195}),{field:"share",label:"Participa\xe7\xe3o Societ\xe1ria (%)",type:"number",width:195}],en=Object(Z.a)((function(e){return{list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#999",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"}}})),an=function(e){var a=e.socios,t=e.empresas,n=e.handleInput,i=e.handleBlur,l=e.data,c=e.addSocio,s=e.enableEdit,d=e.handleEdit,u=e.removeSocio,m=l.activeStep,p=l.stepTitles,f=l.filteredSocios,v=l.selectedEmpresa,h=en(),b=h.iconButton,g=h.list,E=!0,x=Qr;return p&&(E=!1,x=ro),r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"flex center"},E&&r.a.createElement("header",{style:{marginBottom:"10px",width:"100%"}},r.a.createElement(Ge,{data:l,empresas:t,handleInput:n,handleBlur:i})),!v&&E||!E?p&&r.a.createElement("section",{className:"flex center paper"},r.a.createElement(ea,{subtitle:p[m]}),r.a.createElement("div",{className:"flex center",style:{padding:"10px 0",width:"100%"}},r.a.createElement(Qe,{form:x,data:l,handleBlur:i,handleInput:n})),r.a.createElement("div",{style:{margin:"5px 0 7px 84.58%",width:"100%"}},r.a.createElement(oa.a,{color:"primary",variant:"outlined",size:"small",onClick:c},r.a.createElement(na.a,null)," Adicionar s\xf3cio"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flexColumn",style:{alignItems:"center"}},r.a.createElement("h6",{style:{fontSize:"14px"}},"Altera\xe7\xe3o de informa\xe7\xf5es dos s\xf3cios"),r.a.createElement("p",{style:{fontSize:"12px",color:"#555"}}," Clique no l\xe1pis \xe0 direita do s\xf3cio para editar e clique novamente para salvar."),r.a.createElement("p",{style:{fontSize:"12px",color:"#555",marginTop:0}}," Para alterar a participa\xe7\xe3o societ\xe1ria, nome e CPF, v\xe1 para EMPRESAS \u2013 ALTERA\xc7\xc3O CADASTRAL")))),v&&0===f.length&&r.a.createElement("section",null,r.a.createElement("p",null,"Nenhum s\xf3cio cadastrado para ",v.razaoSocial)),(null===a||void 0===a?void 0:a.length)>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"flexColumn center paper"},r.a.createElement("p",null," S\xf3cios cadastrados"),a.map((function(e,a){return r.a.createElement("div",{key:a},x.map((function(a,t){return r.a.createElement(o.Fragment,{key:t+1e3},r.a.createElement(Xe.a,{value:e[a.field]||"",name:a.field,label:a.label,className:g,onChange:d,error:e.edit?pe(e[a.field],a):null,helperText:e.edit?fe(e[a.field],a):null,type:null===a||void 0===a?void 0:a.type,disabled:!!("share"===a.field&&E||a.disabled)||!e.edit,InputLabelProps:{shrink:!0,style:{fontWeight:600,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",color:"#888"}},inputProps:{style:{fontSize:"13px",color:!0===e.edit?"#000":"new"===e.status?"green":"modified"===e.status?"#FF2500":"deleted"===e.status?"red":"#888",textDecoration:"deleted"!==e.status||e.edit?"":"line-through"}}}))})),r.a.createElement(oa.a,{component:"span",className:b,title:"editar",onClick:function(){return s(a)}},r.a.createElement(qo.a,null)),!E&&r.a.createElement(oa.a,{className:b,color:"deleted"===e.status?"primary":"secondary",title:"deleted"===e.status?"Desfazer exclus\xe3o":"Remover",onClick:function(){return u(a)}},"deleted"===e.status?r.a.createElement("i",{className:"material-icons"},"undo"):r.a.createElement(Ft.a,null)))})))))},tn=Object(Z.a)((function(e){return{paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 5px 0",height:"auto"}}}));function on(e){var a,t=e.data,n=e.empresasForm,i=e.sociosForm,l=e.filesForm,c=e.files,s=t.socios,d=tn().paper,u=[],m={},p=[];return n.forEach((function(e){t.hasOwnProperty([e.field])&&(Object.assign(m,Object(f.a)({},e.field,t[e.field])),p.push(e))})),u.push(m),a=[{subtitle:"Detalhes da empresa",form:p,data:u},{subtitle:"Informa\xe7\xf5es sobre os s\xf3cios",form:i,data:s}],r.a.createElement(r.a.Fragment,null,r.a.createElement(za.a,{className:d},r.a.createElement("div",{className:"divTable"},a.map((function(e,a){var t=e.subtitle,n=e.form,i=e.data;return r.a.createElement(o.Fragment,{key:a},r.a.createElement("table",{style:1===a?{tableLayout:"fixed"}:{}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",colSpan:n.length},t)),r.a.createElement("tr",null,n.map((function(e,a){return r.a.createElement("th",{key:a},e.label)})))),r.a.createElement("tbody",null,0===a&&r.a.createElement("tr",null,i.map((function(e,a){return Object.values(e).map((function(e,a){return r.a.createElement("td",{className:"review",key:a},e)}))}))),0!==a&&i.map((function(e,a){return r.a.createElement("tr",{key:a},Object.values(e).map((function(e,a){return r.a.createElement("td",{className:"review",key:a},e)})))})))))}))),r.a.createElement("h3",{style:{margin:"30px 0 0 25px"}}," ",r.a.createElement(La.a,{style:{verticalAlign:"middle",padding:"0 0 0 8px"}})," Documentos "),c&&r.a.createElement(Ta,{form:l,files:c})))}function rn(e,a){return e.match("cnpj")?function(e){var a=function(e){return e.keyCode};document.addEventListener("keypress",a);var t,o=e.toString();return t=(o=(o=(o=o.replace(".","")).replace("/","")).replace("-","")).length+1,14!==a&&(3===t&&(e=o.substr(0,2)+"."),6===t&&(e=o.substr(0,2)+"."+o.substr(2,5)+"."),10===t&&(e=o.substr(0,2)+"."+o.substr(2,3)+"."+o.substr(6,3)+"/"),15===t&&(e=o.substr(0,2)+"."+o.substr(2,3)+"."+o.substr(6,3)+"/"+o.substr(9,4)+"-"+o.substr(13,2))),e}(a):e.match("cpf")?function(e){if(e)return e=e.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")}(a):e.match("tel")?function(e){if(e)return 13===(e=e.replace(/(?!\d)./g,"").replace(/(\d{2})/,"($1) ")).length&&(e=e.replace(/(\d{4})(\d)/,"$1-$2")),14===e.length&&(e=e.replace(/(\d{5})(\d)/,"$1-$2")),e}(a):e.match("share")?function(e){if(e)return e.length>=5&&(e=e.slice(0,5)),e}(a):a}var nn=Ee(["empresas"],function(e){Object(D.a)(t,e);var a=Object(N.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={activeStep:0,stepTitles:["Preencha os dados da empresa","Informa\xe7\xf5es sobre os s\xf3cios","Revis\xe3o"],steps:["Dados da Empresa","S\xf3cios","Revis\xe3o"],razaoSocial:"",toastMsg:"Empresa cadastrada!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,addedSocios:[0],totalShare:0,socios:[],showFiles:!1},e.setActiveStep=function(){var a=Object(w.a)(j.a.mark((function a(t){var o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.state.activeStep,"next"===t&&e.setState({activeStep:o+1}),"back"===t&&e.setState({activeStep:o-1}),"reset"===t&&e.setState({activeStep:0});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(a){var t=a.target,o=t.name,r=rn(o,t.value);e.setState(Object(f.a)({},o,r))},e.addSocio=Object(w.a)(j.a.mark((function a(){var t,o,r,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.state.socios,o={},r=0,n=0,ro.forEach((function(a){""!==e.state[a.field]&&void 0!==e.state[a.field]||(r+=1)})),100!==r){a.next=7;break}return e.setState({alertType:"fieldsMissing",openAlertDialog:!0}),a.abrupt("return",null);case 7:if(ro.forEach((function(a){Object.assign(o,Object(f.a)({},a.field,e.state[a.field]))})),t.push(o),t.forEach((function(e){n+=Number(e.share)})),!(n>100)){a.next=15;break}t.pop(),e.setState({alertType:"overShared",openAlertDialog:!0}),a.next=19;break;case 15:return a.next=17,e.setState({socios:t,totalShare:n});case 17:ro.forEach((function(a){e.setState(Object(f.a)({},a.field,""))})),document.getElementsByName("nomeSocio")[0].focus();case 19:case"end":return a.stop()}}),a)}))),e.enableEdit=function(a){var t=e.state.socios;!0===t[a].edit?t[a].edit=!1:(t.forEach((function(e){return e.edit=!1})),t[a].edit=!0),e.setState({socios:t})},e.handleEdit=function(a){var t=a.target.name,o=e.state.socios,r=a.target.value;"share"===t&&(r=r.replace(",","."));var n=o.filter((function(e){return!0===e.edit}))[0],i=o.indexOf(n);n[t]=r;var l=o;l[i]=n,e.setState({filteredSocios:l})},e.removeSocio=function(a){var t=e.state.socios;t.splice(a,1),e.setState({socios:t})},e.getId=function(){var a=Object(w.a)(j.a.mark((function a(t,o,r,n,i,l,c){var s,d,u,m,p,v;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(d=r.filter((function(e){return e[i].toLowerCase().match(o.toLowerCase())})),""===o&&e.setState((s={},Object(f.a)(s,t,""),Object(f.a)(s,n,""),s)),!d[0]){a.next=10;break}if(u=d[0][i],m=d[0][l],""===o){a.next=8;break}return a.next=8,e.setState((p={},Object(f.a)(p,t,u),Object(f.a)(p,n,m),p));case 8:a.next=14;break;case 10:return a.next=12,e.setState((v={},Object(f.a)(v,t,""),Object(f.a)(v,n,""),v));case 12:alert(c+" n\xe3o cadastrado"),document.getElementsByName(t)[0].focus();case 14:case"end":return a.stop()}}),a)})));return function(e,t,o,r,n,i,l){return a.apply(this,arguments)}}(),e.handleBlur=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=t.target.name,r=t.target.value,(n=me())?e.setState({errors:n}):e.setState({errors:void 0}),a.t0=o,a.next="cnpj"===a.t0?7:"share"===a.t0?13:"numero"===a.t0?16:21;break;case 7:return a.next=9,T.a.get("/api/alreadyExists?table=empresas&column=cnpj&value=".concat(r));case 9:return i=a.sent,(null===i||void 0===i?void 0:i.data)&&("Empresa j\xe1 cadastrada.","O CNPJ informado corresponde a uma empresa j\xe1 est\xe1 cadastrada no sistema. Para alterar os dados da empresa, v\xe1 para Empresas -> Altera\xe7\xe3o de dados.",e.setState({cnpj:"",customTitle:"Empresa j\xe1 cadastrada.",customMsg:"O CNPJ informado corresponde a uma empresa j\xe1 est\xe1 cadastrada no sistema. Para alterar os dados da empresa, v\xe1 para Empresas -> Altera\xe7\xe3o de dados.",openAlertDialog:!0})),a.abrupt("break",22);case 13:return(r=r.replace(",","."))>100?e.setState({alertType:"overShared",openAlertDialog:!0}):(c=Number(e.state.totalShare)+Number(r),e.setState((l={},Object(f.a)(l,o,r),Object(f.a)(l,"totalShare",c),l))),a.abrupt("break",22);case 16:if(!r||r.match(/^\d+$/)){a.next=20;break}return a.next=19,e.setState({numero:""});case 19:e.setState({alertType:"numberNotValid",openAlertDialog:!0});case 20:case 21:return a.abrupt("break",22);case 22:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleSubmit=Object(w.a)(j.a.mark((function a(){var t,o,r,n,i,l,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state,o=t.socios,r=t.form,n={},oo.forEach((function(a){e.state.hasOwnProperty([a.field])&&Object.assign(n,Object(f.a)({},a.field,e.state[a.field]))})),o&&o[0]||(console.log("Warning: No socios were registered!!!"),o=void 0),n.situacao="Ativo",n=A.a.decamelizeKeys(n),o=A.a.decamelizeKeys(o),a.next=8,T.a.post("/api/empresas",{empresa:n,socios:o});case 8:c=a.sent,i=c.data.codigo_empresa,l=c.data.socio_ids,e.submitFile(i,l,r),e.toast(),e.resetState();case 14:case"end":return a.stop()}}),a)}))),e.handleFiles=function(){var a=Object(w.a)(j.a.mark((function a(t,o){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t||!t[0]){a.next=5;break}return a.next=3,e.setState(Object(f.a)({},o,t[0]));case 3:r=Me(t,e.state,Xr),e.setState(Object(h.a)(Object(h.a)({},r),{},{fileToRemove:null}));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.submitFile=function(){var a=Object(w.a)(j.a.mark((function a(t,o){var r,n,i,l,c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.state.form,n={empresaId:t,socios:o,tempFile:!1},!(r instanceof FormData)){a.next=24;break}i=new FormData,l=Object(F.a)(r),a.prev=4,l.s();case 6:if((c=l.n()).done){a.next=16;break}return s=c.value,n.fieldName=s[0],i.append("metadata",JSON.stringify(n)),i.set(s[0],s[1]),a.next=13,T.a.post("/api/empresaUpload",i).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 13:i=new FormData;case 14:a.next=6;break;case 16:a.next=21;break;case 18:a.prev=18,a.t0=a.catch(4),l.e(a.t0);case 21:return a.prev=21,l.f(),a.finish(21);case 24:case"end":return a.stop()}}),a,null,[[4,18,21,24]])})));return function(e,t){return a.apply(this,arguments)}}(),e.removeFile=function(a){var t=e.state.form,o=qe(a,t);e.setState(Object(h.a)(Object(h.a)({},e.state),o))},e.resetState=function(){var a={},t={},o={};oo.forEach((function(t){Object.keys(t).forEach((function(o){"field"===o&&e.state[t[o]]&&Object.assign(a,Object(f.a)({},t[o],void 0))}))})),ro.forEach((function(a){Object.keys(a).forEach((function(o){"field"===o&&e.state[a[o]]&&Object.assign(t,Object(f.a)({},a[o],void 0))}))})),Xr.forEach((function(e){var a=e.name;Object.assign(o,Object(f.a)({},a,void 0))})),e.setState(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},a),t),o),{},{activeStep:0,razaoSocial:"",files:[],fileNames:[],addedSocios:[0],totalShare:0,socios:[],form:void 0,showFiles:!1}))},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.showFiles=function(){return e.setState({showFiles:!0})},e.closeFiles=function(){return e.setState({showFiles:!e.state.showFiles})},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.handleEquipa()},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1),document.querySelector("input[name='razaoSocial']").style.width="300px"}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.socios,t=e.activeStep,n=e.confirmToast,i=e.toastMsg,l=e.steps,c=e.openAlertDialog,s=e.alertType,d=e.form,u=e.customMsg,m=e.customTitle;return r.a.createElement(o.Fragment,null,r.a.createElement(Ua,{links:["Empresas","/empresas"],text:"Cadastro de empresas"}),r.a.createElement(Ga,{activeStep:t,steps:l,setActiveStep:this.setActiveStep}),0===t?r.a.createElement(Zr,{data:this.state,handleInput:this.handleInput,handleBlur:this.handleBlur,handleFiles:this.handleFiles,removeFile:this.removeFile}):1===t?r.a.createElement(an,{data:this.state,socios:a,handleInput:this.handleInput,handleBlur:this.handleBlur,addSocio:this.addSocio,removeSocio:this.removeSocio,handleFiles:this.handleFiles,enableEdit:this.enableEdit,handleEdit:this.handleEdit}):2===t&&r.a.createElement(on,{data:this.state,files:d,filesForm:Xr,empresasForm:oo,sociosForm:ro}),r.a.createElement(Ya,{activeStep:t,lastStep:l.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep,buttonLabel:"Cadastrar empresa"}),r.a.createElement(ae,{open:n,close:this.toast,msg:i}),c&&r.a.createElement(ot,{open:c,close:this.closeAlert,alertType:s,customMessage:u,customTitle:m}))}}]),t}(o.Component)),ln=(t(605),[{title:"Cadastrar",description:"Cadastrar uma nova empresa no sistema.",imageUrl:"/images/addCompany21.png",link:"/empresas/cadastro"},{title:"Altera\xe7\xe3o Cadastral",description:"Altera\xe7\xe3o de dados da empresa ou contrato social",link:"/altContrato",imageUrl:"/images/pen2.png"},{title:"S\xf3cios",description:"Visualizar ou editar dados dos s\xf3cios",link:"/empresas/socios",imageUrl:"/images/socios3.png"},{title:"Procura\xe7\xf5es",description:"Cadastrar procura\xe7\xf5es e procuradores",link:"/empresas/procuradores",imageUrl:"/images/procuradores31.png"}]),cn=Ee([],(function(e){var a=e.user,t=null===a||void 0===a?void 0:a.role;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"jumbo"},r.a.createElement("div",null,r.a.createElement("h1",{className:"jumbo__title"},"Empresas"),r.a.createElement("p",{className:"jumbo__description"},"Selecione uma das op\xe7\xf5es abaixo."))),r.a.createElement("main",{className:"cardContainer",style:{width:"empresa"!==t?"100%":"90%",marginLeft:"empresa"!==t?"0":"5%"}},ln.map((function(e,a){var o=e.link,n=e.title,i=e.description,l=e.imageUrl;return"empresa"===t&&"/empresas/cadastro"===o?null:r.a.createElement(S.b,{to:o,style:{textDecoration:"none"},key:a},r.a.createElement("div",{className:"cardE"},r.a.createElement("div",{className:"cardE__text"},r.a.createElement("h3",null,n),r.a.createElement("p",null,i)),r.a.createElement("figure",{className:"cardE__image"},r.a.createElement("img",{src:l,alt:""}))))}))))})),sn=t(472),dn=t.n(sn),un=[{field:"nomeProcurador",label:"Nome do Procurador",maxLength:90,width:220},Object(h.a)(Object(h.a)({},Gt),{},{field:"cpfProcurador",width:220}),Object(h.a)(Object(h.a)({},$t),{},{field:"telProcurador",width:220}),Object(h.a)(Object(h.a)({},Xt),{},{field:"emailProcurador",width:220})],mn=t(424),pn=t(412),fn=t(407),vn=t(419),hn=t(413),bn=Object(Lt.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000",fontWeight:600,fontSize:14},body:{fontSize:14}}}))(fn.a),gn=Object(Lt.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000"},body:{fontSize:13}}}))(fn.a),En=Object(Lt.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}}))(hn.a),xn=Object(Z.a)((function(e){return{root:{flexGrow:"1",padding:"1%",textAlign:"center"},title:{marginTop:"2%",fontColor:"#000",fontSize:"0.9rem",backgroundColor:"#B2DCEA",textAlign:"center"},input:{textAlign:"center"},paper:{color:e.palette.text.secondary,margin:e.spacing(2),width:"100%",padding:"2% 0 1% 0",height:"auto"},table:{marginBottom:e.spacing(2),overflowX:"auto"}}}));function Sn(e){var a=e.procuracao,t=e.procuradores,o=xn(),n=o.title,i=o.table,l=[];return a.procuradores.forEach((function(e){var a=t.find((function(a){return a.procuradorId===e}));l.push(a)})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:"100%",align:"left"}},r.a.createElement(hr.a,{className:n}," Procuradores cadastrados ")),r.a.createElement(mn.a,{className:i},r.a.createElement(vn.a,null,r.a.createElement(En,null,un.map((function(e,a){return r.a.createElement(bn,{key:a},e.label)})))),l.map((function(e,a){return e?r.a.createElement(pn.a,{key:a},r.a.createElement(hn.a,null,un.map((function(a,t){return r.a.createElement(gn,{key:t},e[a.field])})))):null}))))}var On={textAlign:"center",alignItems:"flex-start",justify:"space-between",lineHeight:"40px",border:"1px #ccc solid",padding:"0 1%",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px",width:180},yn={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},jn={verticalAlign:"middle",padding:"0 0% 0 2%"},wn=Object(Z.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},addButton:{padding:"5px 10px 5px 8px",height:"40px",margin:"5px",float:"right",fontSize:"0.8rem"}}})),Cn=function(e){var a=e.redux,t=e.data,n=e.handleInput,i=e.addProc,l=e.removeProc,c=e.handleFiles,s=e.getFile,d=e.plusOne,u=e.minusOne,m=e.checkExpires,p=e.setShowPendencias,f=e.removeFile,v=t.dropDisplay,b=t.selectedEmpresa,g=t.procsToAdd,E=t.selectedDocs,x=t.procuracao,S=t.expires,O=t.demand,y=t.showPendencias,j=t.info,w=t.demandFiles,C=t.fileToRemove,k=a.empresas,D=a.procuradores,N=wn(),I=N.addButton,A=N.textField,P=function(e,a){var o=t[e.field+a];return(!e.errorHandler||!e.errorHandler(o))&&(!(!o||!e.errorHandler||e.errorHandler(o))||(e.pattern&&o?null===o.match(e.pattern):o>e.max||o<e.min||(null===o||void 0===o?void 0:o.length)<(null===e||void 0===e?void 0:e.minLength)))},T=function(e,a){var o=t[e.field+a];return e.errorHandler&&e.errorHandler(o)?"\u2713":o&&e.errorHandler&&!e.errorHandler(o)?"\u2718":o>e.max||o<e.min?"Valor inv\xe1lido":o&&null===o.match(e.pattern)?"\u2718":e.pattern&&o&&null!==o.match(e.pattern)?"\u2713":(null===o||void 0===o?void 0:o.length)<(null===e||void 0===e?void 0:e.minLength)?"\u2718":(null===o||void 0===o?void 0:o.length)>=(null===e||void 0===e?void 0:e.minLength)?"\u2713":void 0};return r.a.createElement("div",{className:"flex"},r.a.createElement("header",{className:"flex center",style:{marginBottom:"10px",width:"100%"}},r.a.createElement(Ge,{data:t,empresas:k,handleInput:n})),b&&r.a.createElement("section",{className:"paper flexColumn",style:{position:"relative",width:"100%"}},r.a.createElement("div",{className:"flexColumn",style:{alignItems:"center"}},r.a.createElement("h6",null," Cadastrar nova procura\xe7\xe3o "),r.a.createElement("h4",{style:{fontWeight:400,fontSize:"0.9em"}},' Se a procura\xe7\xe3o abranger mais de um procurador, clique em "+" para adicionar e anexe apenas 1 vez.')),g.map((function(e,a){return r.a.createElement("div",{className:"flex",key:a},un.map((function(e,i){return r.a.createElement(o.Fragment,{key:i},r.a.createElement(Xe.a,{name:e.field+a,label:e.label,margin:"normal",className:A,onChange:function(e){return n(e)},type:e.type||"",error:P(e,a),helperText:T(e,a),select:e.select||!1,value:t[e.field+a]||"",disabled:e.disabled||!1,InputLabelProps:{className:A,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888"}},inputProps:{style:{background:e.disabled&&t.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#000",width:e.width||150,height:"7px"},value:"".concat(t[e.field+a]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1}),a===g.length-1&&3===i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Vo.a,{onClick:function(){return d()},style:{verticalAlign:"middle",position:"absolute",bottom:"112px",right:a>0?"40px":"68px",color:"#009688",fontSize:30,cursor:"pointer",zIndex:1}}),a>0&&r.a.createElement(dn.a,{onClick:function(){return u()},style:{verticalAlign:"middle",position:"absolute",bottom:"112px",right:"70px",color:"red",fontSize:30,cursor:"pointer",zIndex:1}})))})))})),r.a.createElement("div",{className:"flex",style:{alignItems:"center",padding:"0 20px",width:"100%",margin:"12px 0 6px 0"}},r.a.createElement("div",{style:{width:"50%"}},O?r.a.createElement("div",{className:"flex"},r.a.createElement(Ta,{demand:O,collection:"empresaDocs",demandFiles:w,form:Ot,style:{minWidth:"220px"}})):r.a.createElement(ga,{name:"procuracao",formData:x,dropDisplay:v,handleFiles:c,demandFiles:w,removeFile:f,fileToRemove:C})),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"50%",paddingTop:"8px"}},r.a.createElement("div",{style:{marginTop:"12px"}},r.a.createElement(ta.a,{control:r.a.createElement(aa.a,{checked:!0===S,onChange:function(){return m()},value:S}),label:r.a.createElement("span",{style:{color:"#2979ff",fontSize:"0.8em",float:"right"}},"Procura\xe7\xe3o por prazo determinado?")})),r.a.createElement(Xe.a,{name:"vencimento",label:"Vencimento",margin:"normal",className:A,onChange:function(e){return n(e)},type:"date",helper:"se indeterminado, deixar em branco",value:t.vencimento||"",disabled:!1===S,InputLabelProps:{className:A,shrink:!0,style:{fontSize:"0.8rem",color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:"#fafafa",fontSize:"0.8rem",textAlign:"center",color:"#000",height:"9px"}},variant:"filled"})))),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%"}},b&&!O?r.a.createElement(oa.a,{className:I,size:"small",color:"secondary",variant:"contained",onClick:function(){return i()}},r.a.createElement(na.a,null),"Cadastrar procura\xe7\xe3o"):b&&O?r.a.createElement(Ya,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:O,setShowPendencias:p,showPendencias:y,info:j,handleSubmit:i,handleInput:n}):null),r.a.createElement("section",{className:"flexColumn",style:{width:"100%",paddingRight:"0"}},!b||E[0]||O?b&&E[0]&&r.a.createElement("h2",{style:{margin:"25px 0 0 15px"}},"Procura\xe7\xf5es cadastradas"):r.a.createElement("div",{className:"flex paper"},"Nenhum procurador cadastrado para ",b.razaoSocial),E.length>0&&E.map((function(e,a){return r.a.createElement("div",{key:.01*a,className:"flexColumn paper",style:{padding:"10px 15px 20px 15px"}},r.a.createElement("h5",null,"Procura\xe7\xe3o ",e.vencimento?"com vencimento em "+((t=e.vencimento)?ue()(t).format("DD-MM-YYYY"):""):"por prazo indeterminado"),r.a.createElement(Sn,{procuradores:D,procuracao:e}),r.a.createElement("div",{className:"flex center",style:{position:"relative"}},r.a.createElement("span",{style:On},r.a.createElement(ka.a,{style:jn}),r.a.createElement("span",{style:{verticalAlign:"middle"}}," "," Baixar arquivo"),r.a.createElement(wa.a,{style:yn,onClick:function(){return s(e.procuracaoId)}})),r.a.createElement("span",{style:Object(h.a)(Object(h.a)({},On),{},{width:90,backgroundColor:"white",border:0,position:"absolute",right:0})},r.a.createElement(Uo.a,{color:"secondary",style:yn,onClick:function(){return l(e)}}),"Apagar")));var t}))))},kn=Ee(["empresas","procuradores","procuracoes","getFiles/empresaDocs"],function(e){Object(D.a)(t,e);var a=Object(N.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={empresas:[],razaoSocial:"",toastMsg:"Procura\xe7\xe3o cadastrada!",confirmToast:!1,fileNames:[],openDialog:!1,expires:!1,filteredProc:[],dropDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",procuradores:[],procsToAdd:[1],procuracoesArray:[],selectedDocs:[],showPendencias:!1},e.handleInput=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m,p;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=t.target.name,r=e.props.redux.empresas,n=Object(v.a)(e.props.redux.procuradores),i=JSON.parse(JSON.stringify(e.props.redux.procuracoes)),l=t.target.value,c=rn(o,l),e.setState(Object(f.a)({},o,c)),"razaoSocial"!==o||!Array.isArray(n)){a.next=14;break}if(!(s=r.find((function(e){return e.razaoSocial===l})))){a.next=13;break}return d=i.filter((function(e){return e.codigoEmpresa===s.codigoEmpresa})),a.next=10,e.setState({selectedEmpresa:s,selectedDocs:d,razaoSocial:s.razaoSocial});case 10:l!==s.razaoSocial&&e.setState({selectedEmpresa:void 0,selectedDocs:[]}),a.next=14;break;case 13:e.setState({selectedEmpresa:void 0,selectedDocs:[]});case 14:o.match("cpfProcurador")&&(u=n.find((function(e){return e.cpfProcurador===l})))&&(m=o.charAt(o.length-1),Object.keys(e.state).forEach((function(a){a!==o&&e.state[a]===l&&(alert("Este CPF j\xe1 foi informado."),e.setState(Object(f.a)({},o,"")),p=!0)})),p||un.forEach((function(a){var t=a.field,o=t+m;e.setState(Object(f.a)({},o,u[t]))})));case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.addProc=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m,p,h,b,g,E,x,S;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.state,r=o.selectedEmpresa,n=o.demand,i=o.procuracao,l=o.vencimento,c=o.expires,s=o.info,d=r.codigoEmpresa,u=Object(v.a)(e.state.procsToAdd),m=[],p={},u.forEach((function(a,t){un.forEach((function(a){Object.assign(p,Object(f.a)({},a.field,e.state[a.field+t]))}));var o=0;Object.values(p).forEach((function(e){e&&(o+=1)})),o>0&&m.push(p),o=0,p={},un.forEach((function(a){e.setState(Object(f.a)({},a.field+t,""))}))})),h=[],b=[],g=j.a.mark((function e(){var a,t,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x[E],e.next=3,T.a.get("/api/getOne?table=procuradores&key=cpf_procurador&value='".concat(a.cpfProcurador,"'"));case 3:t=e.sent,(null===(o=A.a.camelizeKeys(null===t||void 0===t?void 0:t.data[0]))||void 0===o?void 0:o.procuradorId)?(a.empresas=o.empresas,(0===a.empresas[0]&&1===a.empresas.length||!a.empresas)&&(a.empresas=[d]),a.empresas&&a.empresas[0]&&!a.empresas.includes(d)&&a.empresas.push(d),Object.keys(a).forEach((function(e){a[e]===o[e]&&"empresas"!==e&&"cpfProcurador"!==e&&delete a[e]})),a.procuradorId=o.procuradorId,b.push(a)):h.push(a);case 6:case"end":return e.stop()}}),e)})),E=0,x=m;case 6:if(!(E<x.length)){a.next=11;break}return a.delegateYield(g(),"t0",8);case 8:E++,a.next=6;break;case 11:void 0===t&&(S={status:"Aguardando aprova\xe7\xe3o",empresaId:d,history:{files:i,newMembers:h,oldMembers:b,vencimento:l,expires:c},metadata:{fieldName:"procuracao",empresaId:d}},Object.entries(S).forEach((function(e){var a=Object(Ke.a)(e,2),t=a[0];a[1]||delete S[t]})),S.approved=t,S.historyLength=0,Ye(S).then((function(e){return console.log(e)})),e.setState({toastMsg:"Solicita\xe7\xe3o de cadastro enviada",confirmToast:!0})),!1===t&&(Ye({id:n.id,empresaId:d,history:{info:s},declined:!0}).then((function(e){return console.log(e)})),e.setState({toastMsg:"Solicita\xe7\xe3o indeferida!",confirmToast:!0}),setTimeout((function(){e.props.history.push("/solicitacoes")}),1500)),!0===t&&(h=A.a.decamelizeKeys(h),b=A.a.decamelizeKeys(b),e.approveProc(h,b));case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.approveProc=function(){var a=Object(w.a)(j.a.mark((function a(t,o){var r,n,i,l,c,s,d,u,m,p,f,v;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.state,n=r.selectedEmpresa,i=r.demandFiles,l=r.vencimento,c=r.demand,s=n.codigoEmpresa,d=o.map((function(e){return e.procurador_id})),!(t.length>0)){a.next=7;break}return t.forEach((function(e){return e.empresas="{".concat(s,"}")})),t=A.a.decamelizeKeys(t),u={table:"procuradores",tablePK:"procurador_id",procuradores:t,empresas:[s]},a.next=7,T.a.post("/api/cadProcuradores",Object(h.a)(Object(h.a)({},u),{},{codigoEmpresa:s})).then((function(e){e.data.forEach((function(e){return d.push(e.procurador_id)}))}));case 7:return m={table:"procuradores",tablePK:"procurador_id",requestArray:o,keys:un.map((function(e){return A.a.decamelize(e.field)})),codigoEmpresa:s,updateUser:"insertEmpresa"},o&&o[0]&&(m.keys.push("empresas"),o.forEach((function(e){var a=e.empresas;a&&a[0]&&(a.includes(s)||e.empresas.push(s),e.empresas=a.toString())})),T.a.put("/api/editProc",m).then((function(e){return console.log(e)}))),p={codigo_empresa:s,vencimento:l,status:"vigente",procuradores:d},Object.entries(p).forEach((function(e){var a=Object(Ke.a)(e,2),t=a[0],o=a[1];o&&""!==o||delete p[t]})),a.next=13,T.a.post("/api/procuracoes",p);case 13:f=a.sent,p.procuracaoId=f,v={id:c.id,demandFiles:i,history:{},approved:!0},i&&(v.metadata={fieldName:"procuracao",empresaId:n.codigoEmpresa,procuracaoId:f,procuradores:d}),Ye(v).then((function(e){return console.log(e)})),e.toast(),c&&setTimeout((function(){e.props.history.push("/solicitacoes")}),1500),e.resetState();case 21:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.removeProc=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d,u,m;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=t.procuracaoId,r=t.procuradores,n=t.codigoEmpresa,i=e.props.redux.procuradores,l=e.props.redux.procuracoes,c=e.props.redux.empresaDocs.find((function(e){return Number(e.metadata.procuracaoId)===o})),!r[0]){a.next=12;break}if(s=l.filter((function(e){return e.codigoEmpresa===n&&e.procuracaoId!==o})),d=new Set,s.forEach((function(e){return e.procuradores.forEach((function(e){return d.add(e)}))})),(u=i.filter((function(e){return r.includes(e.procuradorId)&&!d.has(e.procuradorId)}))).forEach((function(e){var a=e.empresas||[];a=a.filter((function(e){return e!==n})),e.empresas=a,0===a.length&&(e.empresas=[0])})),!u[0]){a.next=12;break}return u=A.a.decamelizeKeys(u),m={table:"procuradores",tablePK:"procurador_id",requestArray:u,keys:["empresas"],codigoEmpresa:n},T.a.put("/api/editProc",Object(h.a)({},m)).then((function(e){return console.log(e)})),a.next=12,T.a.patch("/api/removeEmpresa",{cpfsToRemove:u,codigoEmpresa:n}).then((function(e){return console.log(e)}));case 12:return a.next=14,T.a.delete("/api/delete?table=procuracoes&tablePK=procuracao_id&id=".concat(o,"&codigoEmpresa=").concat(n)).then((function(e){return console.log(e.data)}));case 14:c&&c.hasOwnProperty("id")&&T.a.delete("/api/deleteFile?collection=empresaDocs&id=".concat(c.id)).then((function(e){var a=e.data;return console.log(a)}));case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleFiles=function(a){if(!ze(a)){var t=new FormData;t.append("procuracao",a[0]),e.setState({procuracao:t,fileToRemove:null})}},e.removeFile=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.state.procuracao,r=qe(t,o),e.setState(Object(h.a)(Object(h.a)({},e.state),r));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.getFile=function(a){var t=e.props.redux.empresaDocs.find((function(e){return Number(e.metadata.procuracaoId)===a}));if(t){var o=t.id,r=t.filename;Da(o,r,"empresaDocs")}else e.setState({alertType:"filesNotFound",openAlertDialog:!0})},e.plusOne=function(){var a=Object(v.a)(e.state.procsToAdd);a.push(1),e.setState({procsToAdd:a})},e.minusOne=function(){var a=Object(v.a)(e.state.procsToAdd);a.pop(),e.setState({procsToAdd:a})},e.checkExpires=function(){!0===e.state.expires&&e.setState({vencimento:""}),e.setState({expires:!e.state.expires})},e.resetState=function(){var a=e.state.procsToAdd,t=un.map((function(e){return e.field})),o={};a.forEach((function(a,r){t.forEach((function(a){e.state.hasOwnProperty(a+r)&&(o[a+r]=void 0)}))})),e.removeFile("procuracao"),e.setState(Object(h.a)(Object(h.a)({},o),{},{dropDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",procsToAdd:[1],vencimento:void 0,procuracao:void 0,expires:!1}))},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.escFunction=function(a){27===a.keyCode&&e.state.openDialog&&e.toggleDialog()},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,o,r,n,i,l,c,s,d,u,m,p,v,b,g,E,x,S,O,y=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.props.redux,n=r.empresas,i=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(o=t.state)||void 0===o?void 0:o.demand,l=JSON.parse(JSON.stringify(this.props.redux.procuracoes)),n&&1===n.length&&(c=n[0],s=l.filter((function(e){return e.codigoEmpresa===c.codigoEmpresa})),this.setState({selectedEmpresa:c,razaoSocial:null===c||void 0===c?void 0:c.razaoSocial,selectedDocs:s})),i&&(d=JSON.parse(JSON.stringify(r.procuradores)),u=kt(i,r,d),m=u.latestDoc,p=Object(Y.a)(u,["latestDoc"]),v=i.history,b=v[0],g=b.vencimento,E=b.expires,x=v[0].newMembers||[],S=v[0].oldMembers||[],console.log(u),O=[],S[0]&&S.forEach((function(e){d.forEach((function(a){Object.keys(a).forEach((function(t){(null===e||void 0===e?void 0:e.procuradorId)!==(null===a||void 0===a?void 0:a.procuradorId)||e[t]||(e[t]=a[t])}))}))})),(x[0]||S[0])&&x.concat(S).forEach((function(e,a){O.push(a),un.forEach((function(t){var o=t.field;y.setState(Object(f.a)({},o+a,e[o]))}))})),this.setState({vencimento:g,expires:E,procsToAdd:O}),this.setState(Object(h.a)(Object(h.a)({},p),{},{demandFiles:[m]}))),document.addEventListener("keydown",this.escFunction,!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var a=this.state.selectedEmpresa,t=this.props.redux.procuracoes;if(a){var o,r=(null===(o=this.state)||void 0===o?void 0:o.selectedEmpresa).codigoEmpresa,n=JSON.parse(JSON.stringify(t));if(JSON.stringify(e.redux.procuracoes)!==JSON.stringify(n)){var i=n.filter((function(e){return e.codigoEmpresa===r}));this.setState({selectedDocs:i})}}}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.openAlertDialog,t=e.alertType,o=e.demand;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ua,{links:["Empresas","/empresas"],text:"Cadastro de procura\xe7\xf5es",demand:o}),r.a.createElement(Cn,{data:this.state,redux:this.props.redux,handleInput:this.handleInput,removeProc:this.removeProc,handleFiles:this.handleFiles,removeFile:this.removeFile,addProc:this.addProc,handleSubmit:this.handleSubmit,plusOne:this.plusOne,minusOne:this.minusOne,getFile:this.getFile,checkExpires:this.checkExpires,setShowPendencias:this.setShowPendencias}),r.a.createElement(ae,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}),a&&r.a.createElement(ot,{open:a,close:this.closeAlert,alertType:t,customMessage:this.state.customMsg}))}}]),t}(o.Component)),Dn=Ee(["empresas","socios","getFiles/empresaDocs"],function(e){Object(D.a)(t,e);var a=Object(N.a)(t);function t(){var e;Object(C.a)(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(e=a.call.apply(a,[this].concat(r))).state={razaoSocial:"",toastMsg:"Dados atualizados!",confirmToast:!1,openDialog:!1,dialogTitle:"",addedSocios:[0],filteredSocios:[]},e.handleInput=function(a){var t=e.props.redux,o=t.empresas,r=t.socios,n=a.target.name,i=a.target.value,l=rn(n,i);if(e.setState(Object(f.a)({},n,l)),"razaoSocial"===n){var c=o.find((function(e){return e.razaoSocial===i}));if(c){var s=JSON.parse(JSON.stringify(r)).filter((function(e){return e.empresas&&e.empresas[0]&&e.empresas.some((function(e){return e.codigoEmpresa===c.codigoEmpresa}))}));e.setState({razaoSocial:c.razaoSocial,selectedEmpresa:c,filteredSocios:s}),i!==c.razaoSocial&&e.setState({selectedEmpresa:void 0})}else e.setState({selectedEmpresa:void 0,filteredSocios:[]})}},e.enableEdit=function(a){var t=e.state.filteredSocios,o=t[a];!0===o.edit?(e.handleSubmit(a),o.edit=!1,t[a]=o):(t.forEach((function(e){return e.edit=!1})),t[a].edit=!0),e.setState({filteredSocios:t})},e.handleEdit=function(a){var t=a.target.name,o=a.target.value;o=rn(t,o);var r=e.state.filteredSocios.filter((function(e){return!0===e.edit}))[0],n=e.state.filteredSocios.indexOf(r);r[t]=o;var i=e.state.filteredSocios;i[n]=r,e.setState({filteredSocios:i})},e.handleSubmit=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=e.state,r=o.filteredSocios,n=o.selectedEmpresa,i=n.codigoEmpresa,"socios",l=["telSocio","emailSocio"],c=r[t],s={socioId:c.socioId},l.forEach((function(e){c[e]&&(s[e]=c[e])})),d=[A.a.decamelizeKeys(s)],a.next=6,T.a.put("/api/editSocios",{requestArray:d,table:"socios",keys:l,codigoEmpresa:i}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e,a=this.props.redux,t=a.socios,o=a.empresas,r=JSON.parse(JSON.stringify(t));o&&1===o.length?this.setState({selectedEmpresa:o[0],razaoSocial:null===(e=o[0])||void 0===e?void 0:e.razaoSocial,filteredSocios:t,originalSocios:r}):this.setState({originalSocios:r})}},{key:"render",value:function(){var e=this.state,a=e.filteredSocios,t=e.openAlertDialog,o=e.alertType,n=e.confirmToast,i=e.toastMsg,l=this.props.redux.empresas;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ua,{links:["Empresas","/empresas"],text:"Altera\xe7\xe3o de dados dos s\xf3cios"}),r.a.createElement(an,{data:this.state,socios:a,empresas:l,handleInput:this.handleInput,enableEdit:this.enableEdit,handleEdit:this.handleEdit}),r.a.createElement(ae,{open:n,close:this.toast,msg:i}),t&&r.a.createElement(ot,{open:t,close:this.closeAlert,alertType:o}))}}]),t}(o.Component)),Nn=t(188),In=t.n(Nn),An={title:{text:"Ve\xedculos por ano de fabrica\xe7\xe3o",align:"center",marginTop:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:500,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}},legend:{show:!1},chart:{id:"veiculos_ano_fabricacao"},xaxis:{labels:{style:{fontSize:"9px",fontWeight:400,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}}},dataLabels:{enabled:!1},plotOptions:{bar:{horizontal:!1}}},Pn={title:{text:"Percentual de ve\xedculos por ano de fabrica\xe7\xe3o",align:"center",marginTop:10,marginBottom:20,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"13px",fontWeight:500,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}},plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0,fontSize:"20px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif ",fontWeight:600,color:"#373d3f",offsetY:-10},value:{show:!0,fontSize:"15px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,color:"#373d3f",offsetY:16,formatter:function(e){return e}},total:{show:!0,showAlways:!0,label:"Total:",fontSize:"20px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:600,color:"#373d3f"}}}}},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},Tn=(t(607),function(e){var a=e.empresas,t=e.razaoSocial,o=e.selectedEmpresa,n=e.selectedVehicles,i=e.labels,l=e.values,c=e.tableLabels,s=e.tableData,d=e.mediaIdades,u=e.moda,m=e.handleInput,p=e.segurosVencidos,f=e.segurosVigentes,v=e.oldVehicles,b=e.veiculosNovos;return r.a.createElement("main",{className:"relatorios"},r.a.createElement(Ge,{empresas:a,data:{razaoSocial:t},handleInput:m}),n&&0!==n.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{width:"100%",textAlign:"center"}},o?o.razaoSocial:"Exibindo todos os ve\xedculos"," - M\xe9dia de idade da frota: ",d," anos. Moda do ano de fabrica\xe7\xe3o: ",u,"."),r.a.createElement(za.a,null,r.a.createElement("section",{className:"rowContainer"},r.a.createElement(In.a,{options:Object(h.a)(Object(h.a)({},An),{},{xaxis:Object(h.a)(Object(h.a)({},An.xaxis),{},{categories:i})}),series:[{name:"Ve\xedculos",data:l}],type:"bar",width:"600"}),r.a.createElement(In.a,{options:Object(h.a)(Object(h.a)({},Pn),{},{labels:i,colors:["#ff7c43","#ffa600","#FF9800","#f95d6a","#f44336","#2E93fA","#3333ff","#66DA26","#669999","#E91E63","#d45087","#a05195","#665191","#2f4b7c","#003f5c"]}),series:l,type:"donut",width:"480"}))),r.a.createElement(za.a,null,r.a.createElement("section",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",style:{color:"#fff",backgroundColor:"rgb(84, 110, 122, 0.7)"},colSpan:c.length},"Ve\xedculos por ano - ",o?o.razaoSocial:"Exibindo todos os ve\xedculos","  ")),r.a.createElement("tr",null,c.map((function(e,a){return r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,s.map((function(e,a){return r.a.createElement("tr",{key:a},e.map((function(e,a){return r.a.createElement("td",{className:"review relatorioTD",key:a},e)})))})))))),r.a.createElement("section",{className:"rowContainer"},r.a.createElement(In.a,{options:{title:Object(h.a)(Object(h.a)({},Pn.title),{},{text:"Seguros vencidos: ".concat(p," / vigentes: ").concat(f)}),labels:["Seguros vencidos","Seguros vigentes"],colors:["#FF9800","#3333ff"]},series:[Number(p),Number(f)],type:"pie",width:"400"}),r.a.createElement(In.a,{options:{title:Object(h.a)(Object(h.a)({},Pn.title),{},{text:"Idade superior a 15 anos: ".concat(v," / inferior 15 anos: ").concat(b)}),labels:["Ve\xedculos com mais de 15 anos","Ve\xedculos com menos de 15 anos"],colors:["#f44336","#2E93fA"]},series:[Number(v),Number(b)],type:"pie",width:"420",height:"220"}))):r.a.createElement("p",null,"Nenhum ve\xedculo cadastrado para ",null===o||void 0===o?void 0:o.razaoSocial))}),Fn=function(e){var a=Object(v.a)(e);if(a.shift(),a[0])return a.reduce((function(e,a){return e+a}))},zn=function(e){return e.filter((function(e){return!e.vencimento||ue()(e.vencimento).isValid()&&ue()(e.vencimento).isBefore(ue()(),"day")&&e.veiculoId&&e})).length},Mn=Ee(["veiculos","empresas"],(function(e){var a,t,n=e.redux,i=n.veiculos,l=n.empresas,c=Object(o.useState)(""),s=Object(Ke.a)(c,2),d=s[0],u=s[1],m=Object(o.useState)(void 0),p=Object(Ke.a)(m,2),f=p[0],h=p[1],b=Object(o.useState)(""),g=Object(Ke.a)(b,2),E=g[0],x=g[1],S=Object(o.useState)(""),O=Object(Ke.a)(S,2),y=O[0],j=O[1],w=Object(o.useState)(""),C=Object(Ke.a)(w,2),k=C[0],D=C[1];f&&""!==f?(a=f.codigoEmpresa,t=i.filter((function(e){return e.codigoEmpresa===a}))):t=i;var N=t.map((function(e){return e.anoCarroceria})).filter((function(e){return null!==e})).sort(),I=N.reduce((function(e,a){return e+a/N.length}),0);I=((new Date).getFullYear()-I).toFixed(2);var A={};N.forEach((function(e){void 0===A[e]&&(A[e]=0),A[e]+=1}));var P=Object.keys(A),T=Object(v.a)(P.sort((function(e,a){return e-a}))),F=Object.values(A),z={},M=[],L={};T.forEach((function(e){t.forEach((function(a){var t;a.anoCarroceria&&a.anoCarroceria.toString()===e&&(M.push({veiculoId:a.veiculoId,poltronas:a.poltronas}),z[e]?(t=z[e]).push.apply(t,Object(v.a)(M)):z[e]=M,M=[])})),L[e]=z[e],z={}}));var _=0,q=["Capacidade Total"],R=[],V=["Capacidade M\xe9dia"];Object.keys(L).forEach((function(e){L[e].forEach((function(e){_+=e.poltronas})),q.push(_),V.push((_/L[e].length).toFixed(2));var a=q.reduce((function(e,a){return e+a}),0);R.push(a),_=0})),q.push(Fn(q));var B=["Ano"],U=["N\xba de Ve\xedculos"];B.push.apply(B,Object(v.a)(T).concat(["Total"])),U.push.apply(U,Object(v.a)(F)),U.push(Fn(U)),V.push(function(e){var a=e.map((function(e){return Number(e)}));if(a.shift(),a[0])return(a.reduce((function(e,a){return e+a}))/a.length).toFixed(2)}(V));var H=[U,V,q],Y=P.sort((function(e,a){return A[e]-A[a]}));Y=Y[Y.length-1];var J=(new Date).getFullYear();Object(o.useEffect)((function(){var e=(new Date).getFullYear(),a=zn(t),o=t.filter((function(a){return e-a.anoCarroceria>14&&null!==a.anoCarroceria})).length;x(a),j(t.length-a),D(o)}),[t]);var K,W,G,$=[];return d.length>2&&f?($=zn(t),W=t.filter((function(e){return J-e.anoCarroceria>14&&null!==e.anoCarroceria})).length,K=t.length-$,G=t.length-W):($=E,K=y,W=k,G=t.length-k),r.a.createElement(Tn,{empresas:l,razaoSocial:d,labels:T,values:F,tableLabels:B,tableData:H,selectedEmpresa:f,selectedVehicles:t,mediaIdades:I,moda:Y,handleInput:function(e){var a,t=e.target.value;u(t),t.length>2?(a=l.find((function(e){return e.razaoSocial===t})))&&h(a):h("")},segurosVencidos:$,segurosVigentes:K,oldVehicles:W,veiculosNovos:G})})),Ln=t(473),_n=t.n(Ln),qn=t(474),Rn=t.n(qn);function Vn(e){var a,t=e.tableData,o=e.staticFields,n=e.title,i=e.tableStyle,l=e.style,c=e.completed,s=e.showInfo,d=e.showFiles,u=e.setShowFiles,m=e.filesCollection,p=e.primaryKey,f=e.close,v=e.filesIds,b=e.razaoSocial;console.log(t[0].numeroDae||void 0);var g=[],E=[],x=[];if(t.forEach((function(e,a){o.forEach((function(t){g.includes(t.title)||g.push(t.title),"info"===t.field?x.push(Object(h.a)(Object(h.a)({},t),{},{index:a,files:null===e||void 0===e?void 0:e.files})):"files"===t.field?x.push(Object(h.a)(Object(h.a)({},t),{},{files:null===e||void 0===e?void 0:e.files})):t.action?x.push(Object(h.a)(Object(h.a)({},t),{},{id:null===e||void 0===e?void 0:e.id})):x.push(Object(h.a)(Object(h.a)({},t),{},{value:e[t.field]}))})),E.push(x),x=[]})),c){var S=g.indexOf("Analisar solicita\xe7\xe3o");g[S]="Conclu\xedda"}var O=(null===(a=E[0])||void 0===a?void 0:a.length)||"";return d?r.a.createElement(r.a.Fragment,null,r.a.createElement(Hr,{filesCollection:m,close:f,typeId:p,filesIds:v,razaoSocial:b}),r.a.createElement("footer",null,r.a.createElement("div",{className:"voltarDiv",style:{padding:"0px",margin:"30px 0 0 0",position:"absolute",bottom:"1%",zIndex:"10"}},r.a.createElement(oa.a,{variant:"outlined",color:"primary",onClick:function(){return u(!1)}},r.a.createElement(Ut.a,{size:"tiny"}),r.a.createElement("span",{style:{padding:"2px 0 0 2px",marginLeft:"2px",fontSize:".85rem"}},"Voltar"))))):r.a.createElement("table",{style:i||void 0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",style:l,colSpan:O},n)),r.a.createElement("tr",null,g.map((function(e,a){return r.a.createElement("th",{key:a,style:l},e)})))),r.a.createElement("tbody",null,E.map((function(e,a){return r.a.createElement("tr",{key:a},e.map((function(e,a){return r.a.createElement("td",{key:a,style:(null===e||void 0===e?void 0:e.style)?e.style:l,className:"link"===e.type&&e.laudoDocId?"link2":"review",title:t[0].numeroDae||void 0},"date"===e.type?(o=e.value,ue()(o,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?ue()(o,ue.a.ISO_8601,!0).format("DD/MM/YYYY, HH:mm[h]"):o):(null===e||void 0===e?void 0:e.action)?function(e,a,o){var n,i=!(null===(n=t[a])||void 0===n?void 0:n.info);switch(e){case"info":return r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start"}},r.a.createElement("span",{className:"button",style:i?{cursor:"default"}:{},component:"span",title:i?"Nenhuma informa\xe7\xe3o adicional":"Ver informa\xe7\xf5es adicionais",onClick:function(){return s(a)}},r.a.createElement(_n.a,{color:i?"disabled":"primary"})),o?r.a.createElement("span",{className:"button",component:"span",title:"Ver arquivos",onClick:function(){u(o)}},r.a.createElement(La.a,null)):r.a.createElement("span",{style:{padding:"2px 10px 0 17px"}}," - "));case"completed":return r.a.createElement(Rn.a,{style:{color:"green"}});default:return}}(e.action,null===e||void 0===e?void 0:e.index,null===e||void 0===e?void 0:e.files):e.value);var o})))}))))}var Bn=[{field:"action",title:"Movimenta\xe7\xe3o"},{field:"user",title:"Usu\xe1rio"},{field:"createdAt",title:"Registro no sistema",type:"date"},{field:"info",title:"Informa\xe7\xf5es adicionais",action:"info",style:{textAlign:"center"}}];function Un(e){var a=e.solicitacao,t=e.showInfo,o=e.historyLog,n=e.setHistoryLog,i=e.close,l=e.vehicleDocs,c=e.empresaDocs,s=e.showFiles,d=e.setShowFiles,u=e.filesIds,m=a.history,p=ue()(null===o||void 0===o?void 0:o.createdAt).format("DD/MM/YYYY, HH:mm[h]"),f={};return f=a.hasOwnProperty("veiculoId")?{primaryKey:"veiculoId",filesCollection:l}:{primaryKey:"empresaId",filesCollection:c},r.a.createElement("main",{className:"popUpWindow",sytle:{width:"90%"}},o?r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"infoLogHeader"},r.a.createElement("h3",null,"Informa\xe7\xf5es adicionais"),r.a.createElement("hr",null),r.a.createElement("div",{className:"floatRight"},"Inserido por ",null===o||void 0===o?void 0:o.user," ",p?"\xe0s "+p:"")),r.a.createElement("section",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{whiteSpace:"pre-line"}},o.info)),r.a.createElement("footer",null,r.a.createElement("div",{className:"voltarDiv",style:{padding:"0px",margin:"30px 0 0 0",position:"absolute",bottom:"1%"}},r.a.createElement(oa.a,{variant:"outlined",color:"primary",onClick:function(){return n(!1)}},r.a.createElement(Ut.a,{size:"tiny"}),r.a.createElement("span",{style:{padding:"2px 0 0 2px",marginLeft:"2px",fontSize:".85rem"}},"Voltar"))))):r.a.createElement(Vn,Object.assign({},f,{tableData:m,staticFields:Bn,length:Bn.length,title:"Solicita\xe7\xe3o n\xba ".concat(null===a||void 0===a?void 0:a.numero),id:a.id,razaoSocial:null===a||void 0===a?void 0:a.empresa,showInfo:t,style:{padding:"9px 4px"},tableStyle:{marginTop:"23px"},showFiles:s,setShowFiles:d,close:i,filesIds:u})),r.a.createElement(ca,{close:i}))}function Hn(e){var a=e.completed,t=e.showCompleted;return r.a.createElement("header",{style:{display:"flex",justifyContent:"flex-end",height:"50px",paddingBotom:"10px"}},r.a.createElement(ta.a,{style:{marginTop:"20px"},control:r.a.createElement(aa.a,{checked:!0===a,onChange:function(){return t(!a)},value:a}),label:r.a.createElement("p",{style:{color:"#2979ff",fontSize:"0.7rem",float:"right"}}," Mostrar solicita\xe7\xf5es conclu\xeddas")}))}var Yn=[{field:"numero",title:"N\xfamero",label:"N\xfamero"},{field:"subject",title:"Solicita\xe7\xe3o",label:"Solicita\xe7\xe3o"},{field:"empresa",title:"Empresa",label:"Empresa"},{field:"veiculo",title:"Ve\xedculo",label:"Ve\xedculo"},{field:"status",title:"Situa\xe7\xe3o",label:"Situa\xe7\xe3o"},{field:"updatedAt",title:"\xdaltima Atualiza\xe7\xe3o",label:"\xdaltima Atualiza\xe7\xe3o",type:"date"}],Jn=function(e){var a=e.rowData,t=e.user,o=a.status,r=t.role;return!(!o.match("indeferida")&&!o.match("conclu\xedda"))||(!("empresa"!==r||!o.match("Pend\xeancias"))||!("empresa"===r||!o.match("Aguardando")))},Kn=function(e){var a=e.tableData,t=e.title,o=e.showDetails,n=e.assessDemand,i=e.completed,l=(e.showInfo,e.user),c=JSON.parse(JSON.stringify(a));return c.forEach((function(e){return delete e.history})),r.a.createElement("div",{style:{margin:"10px 0"},className:"noPrint"},r.a.createElement(nr.a,{title:t,columns:Yn,data:c,style:{fontFamily:"Segoe UI",fontSize:"14px"},options:{filtering:!0,exportButton:!0,exportFileName:"Solicita\xe7\xf5es",exportCsv:function(e,a){return mr("Solicita\xe7\xf5es",Yn,a)},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:10},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Nenhuma solicita\xe7\xe3o aberta no momento.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportCSVName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},actions:[{icon:"history_icon",iconProps:{color:"primary"},tooltip:"Ver hist\xf3rico",onClick:function(e,a){return o(a.id)}},function(e){return Jn({rowData:e,user:l})&&{icon:i?"Solicita\xe7\xe3o indeferida"===(null===e||void 0===e?void 0:e.status)?"clear":"done_icon":"assignment_turned_in_outlined",iconProps:{className:i?"":"assessDemandButton",color:"Solicita\xe7\xe3o indeferida"===(null===e||void 0===e?void 0:e.status)?"secondary":i?"action":"disabled"},tooltip:(null===e||void 0===e?void 0:e.status.match("Aguardando"))?"Analisar solicita\xe7\xe3o":(null===e||void 0===e?void 0:e.status.match("Pend\xeancias"))?"Abrir solicita\xe7\xe3o":"Solicita\xe7\xe3o indeferida"===(null===e||void 0===e?void 0:e.status)?"Indeferida":"Conclu\xedda",onClick:function(e,a){return i?null:n(a.id)}}}]}))};var Wn=Ee(["veiculos","empresas","logs","getFiles/vehicleDocs","getFiles/empresaDocs"],(function(e){var a=e.redux,t=a.veiculos,n=a.empresas,i=a.vehicleDocs,l=a.empresaDocs,c=e.user,s=Object(o.useState)([]),d=Object(Ke.a)(s,2),u=d[0],m=d[1],p=Object(o.useState)(!1),f=Object(Ke.a)(p,2),b=f[0],g=f[1],E=Object(o.useState)(),x=Object(Ke.a)(E,2),S=x[0],O=x[1],y=Object(o.useState)(!1),C=Object(Ke.a)(y,2),k=C[0],D=C[1],N=Object(o.useState)(),I=Object(Ke.a)(N,2),A=I[0],P=I[1],T=Object(o.useState)({openAlertDialog:!1,customMessage:"",customTitle:""}),F=Object(Ke.a)(T,2),z=F[0],M=F[1],L=Object(o.useState)(!1),_=Object(Ke.a)(L,2),q=_[0],R=_[1],V=Object(o.useState)(),B=Object(Ke.a)(V,2),U=B[0],H=B[1],J=z.openAlertDialog,K=z.customTitle,W=z.customMessage;Object(o.useEffect)((function(){return Jr(),function(){return Jr(!0)}}),[]),Object(o.useEffect)((function(){function e(e){27===e.keyCode&&(q||A||g(),q?R(!1):A&&P())}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[A,q]),Object(o.useEffect)((function(){function a(){return(a=Object(w.a)(j.a.mark((function a(){var o,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=Object(v.a)(e.redux.logs),r=o.map((function(e){var a,o;e.empresa=null===(a=n.find((function(a){return a.codigoEmpresa===e.empresaId})))||void 0===a?void 0:a.razaoSocial,e.veiculo=null===(o=t.find((function(a){return a.veiculoId===e.veiculoId})))||void 0===o?void 0:o.placa;e.__v;return Object(Y.a)(e,["__v"])})),r=k?r.filter((function(e){return!0===e.completed})):r.filter((function(e){return!1===e.completed})),m(r);case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[t,n,k,e.redux.logs]);var G=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=u.find((function(e){return e.id===t})),O(r),(n=null===(o=He.find((function(e){return null===r||void 0===r?void 0:r.subject.match(e.subject)})))||void 0===o?void 0:o.path).match("/solicitacoes")||(n="/solicitacoes"+n),e.history.push({pathname:n,state:{demand:r}});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),$=function(){var e=Object(w.a)(j.a.mark((function e(a){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!1),R(!1),t=u.find((function(e){return e.id===a})),e.next=5,O(t);case 5:g(!0);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Hn,{completed:k,showCompleted:D}),r.a.createElement(Kn,{tableData:u,title:k?"Solicita\xe7\xf5es conclu\xeddas":"Solicita\xe7\xf5es em andamento",user:c,showDetails:$,assessDemand:G,completed:k,style:{textAlign:"center"}}),b&&r.a.createElement(Un,{solicitacao:S,close:function(){g(!1),R(!1)},showInfo:function(e){if(S&&(null===S||void 0===S?void 0:S.history)){var a=null===S||void 0===S?void 0:S.history[e];if(!(null===a||void 0===a?void 0:a.info))return;P(a)}},historyLog:A,setHistoryLog:P,vehicleDocs:i,empresaDocs:l,setShowFiles:function(e){e?(R(!0),H(e)):R(!1)},showFiles:q,filesIds:U}),J&&r.a.createElement(ot,{open:J,close:function(){return M(Object(h.a)(Object(h.a)({},z),{},{openAlertDialog:!J}))},customMessage:W,customTitle:K}))})),Gn=[{field:"numeroAlteracao",label:"N\xfamero da altera\xe7\xe3o",maxLength:3,pattern:"^\\d{1,3}$",width:"240px"},{field:"numeroRegistro",label:"Registro na junta comercial",maxLength:40,width:"240px"},{field:"numeroSei",label:"N\xfamero do registro SEI (se houver)",maxLength:30,notRequired:!0,width:"240px"},{field:"dataJunta",label:"Data de registro na Junta Comercial",type:"date",notRequired:!0,width:"240px"},{field:"vencimentoContrato",label:"Vencimento do Cadastro - CRC",type:"date"}],$n=t(475),Xn=t.n($n);t(608);function Zn(e){var a=e.data,t=e.forms,n=e.filesForm,i=e.files,l=e.demandFiles,c=a.filteredSocios,s=a.selectedEmpresa,d=["Dados da empresa","Informa\xe7\xf5es sobre a altera\xe7\xe3o do contrato social"],u=a.alteredFields||[];if(!u.length)for(var m in s)a[m]!==s[m]&&""!==a[m]&&u.push(m);return t.forEach((function(e){e.forEach((function(e){Object.entries(a).forEach((function(a){var t=Object(Ke.a)(a,2),o=t[0],r=t[1];e.field===o&&("date"===e.type?r&&ue()(r,!0).isValid()&&(e.value=ue()(r).format("DD/MM/YYYY")):e.value=r)}))}))})),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"flex"},r.a.createElement("div",{className:"divTable"},t.map((function(e,a){return r.a.createElement(o.Fragment,{key:a},r.a.createElement("table",{style:1===a?{tableLayout:"fixed"}:{}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",colSpan:e.length},d[a])),r.a.createElement("tr",null,e.map((function(e,a){var t=e.label;return r.a.createElement("th",{key:a},t)})))),r.a.createElement("tbody",null,r.a.createElement("tr",null,e.map((function(e,a){var t=e.field,o=e.value;return r.a.createElement("td",{className:"review",key:a,style:{color:u.includes(t)?"red":"#000"}},o)}))))))})))),r.a.createElement("section",{className:"socios_docs_container"},c&&c[0]&&c.some((function(e){return e.status}))&&r.a.createElement("section",{title:"S\xf3cios",className:"flexColumn socios__review__container"},r.a.createElement("h3",{className:"review__subtitle"},r.a.createElement(Xn.a,{className:"socios__review__icon"}),"S\xf3cios"),c.map((function(e,a){var t=e.nomeSocio,o=e.status,n=e.outsider;return r.a.createElement("div",{key:a,className:"flex socios__review__div",style:{color:n||"new"===o?"green":"modified"===o?"orange":"deleted"===o?"red":""}},r.a.createElement("span",{className:"socios__review__prop"},t,n||"new"===o?"(inclu\xeddo)":"modified"===o?"(modificado)":"deleted"===o?"(exclu\xeddo)":""))}))),(i||l)&&r.a.createElement("section",{title:"Documentos",className:"flex docs"},r.a.createElement("h3",{className:"review__subtitle"},r.a.createElement(La.a,{className:"docs__icon"})," Documentos"),r.a.createElement(Ta,{demandFiles:l,form:n,files:i,collection:"empresaDocs"}))))}var Qn=Object(Z.a)((function(e){return{list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#999",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"}}})),ei=function(e){var a=e.handleInput,t=e.handleBlur,n=e.data,i=e.addSocio,l=e.enableEdit,c=e.handleEdit,s=e.removeSocio,d=n.selectedEmpresa,u=n.subtitles,m=n.activeStep,p=n.filteredSocios,f=Qn(),v=f.iconButton,h=f.list;return r.a.createElement(r.a.Fragment,null,d&&r.a.createElement("section",{className:"flex paper"},r.a.createElement(ea,{subtitle:u[m]}),r.a.createElement("div",{className:"flex center"},r.a.createElement("div",{style:{padding:"10px 0",width:"100%"}},r.a.createElement(Qe,{form:ro,data:n,handleBlur:t,handleInput:a})),r.a.createElement("div",{style:{margin:"5px 0 7px 84.58%",width:"100%"}},r.a.createElement(oa.a,{color:"primary",variant:"outlined",size:"small",onClick:i},r.a.createElement(na.a,null)," Adicionar s\xf3cio")))),d&&0===p.length&&r.a.createElement("section",null,r.a.createElement("p",null,"Nenhum s\xf3cio cadastrado para ",d.razaoSocial)),(null===p||void 0===p?void 0:p.length)>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"flex center paper"},r.a.createElement("p",null," S\xf3cios cadastrados"),p.map((function(e,a){return r.a.createElement("div",{key:a},ro.map((function(a,t){return r.a.createElement(o.Fragment,{key:t+1e3},r.a.createElement(Xe.a,{value:e[a.field]||"",name:a.field,label:a.label,className:h,disabled:!e.edit,onChange:c,error:e.edit?pe(e[a.field],a):null,helperText:e.edit?fe(e[a.field],a):null,type:null===a||void 0===a?void 0:a.type,InputLabelProps:{shrink:!0,style:{fontWeight:600,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",color:"#888"}},inputProps:{style:{fontSize:"13px",color:!0===e.edit?"#000":"new"===e.status||e.outsider?"green":"modified"===e.status?"#FF2500":"deleted"===e.status?"red":"#888",textDecoration:"deleted"!==e.status||e.edit?"":"line-through"}}}))})),r.a.createElement(oa.a,{disabled:"deleted"===e.status,component:"span",className:v,title:"editar",onClick:function(){return l(a)}},r.a.createElement(qo.a,null)),r.a.createElement(oa.a,{className:v,color:"deleted"===e.status?"primary":"secondary",title:"deleted"===e.status?"Desfazer exclus\xe3o":"Remover",onClick:function(){return s(a)}},"deleted"===e.status?r.a.createElement("i",{className:"material-icons"},"undo"):r.a.createElement(Ft.a,null)))})))))},ai=[{title:"Altera\xe7\xe3o do contrato social",name:"altContratoDoc"},{title:"CRC",name:"crc"}],ti=function(e){var a=e.empresas,t=e.data,o=e.setActiveStep,n=e.enableEdit,i=e.handleEdit,l=e.addSocio,c=e.removeSocio,s=e.handleInput,d=e.handleBlur,u=e.handleSubmit,m=e.handleFiles,p=e.removeFile,f=e.setShowPendencias,v=JSON.parse(JSON.stringify(oo)).filter((function(e){return"numeroContrato"!==e.field&&"vencimentoContrato"!==e.field})).map((function(e){return"razaoSocial"!==e.field||t.demand||(e.field="razaoSocialEdit"),e})),h=t.selectedEmpresa,b=t.demand,g=t.demandFiles,E=t.activeStep,x=t.stepTitles,S=t.subtitles,O=t.form,y=t.fileToRemove,j=t.info,w=t.showPendencias,C="Altera\xe7\xe3o de contrato social - ".concat(null===h||void 0===h?void 0:h.razaoSocial),k=[v,Gn];return r.a.createElement("main",null,r.a.createElement("header",null,r.a.createElement(Ua,{links:["Empresas","/empresas"],text:"Altera\xe7\xe3o de dados e contrato social",demand:b,selectedEmpresa:h}),r.a.createElement("section",null,r.a.createElement(Ga,{activeStep:E,steps:x,setActiveStep:o})),r.a.createElement("div",{className:"flex center"},r.a.createElement(Ge,{empresas:a,data:t,headerTitle:C,handleInput:s}))),h instanceof Object&&r.a.createElement(r.a.Fragment,null,2!==E?r.a.createElement("section",{className:"flex paper"},r.a.createElement(ea,{subtitle:S[E]}),E<2?r.a.createElement(r.a.Fragment,null,r.a.createElement(Qe,{form:k[E],data:t,handleInput:s,style:{width:"100%"}}),r.a.createElement("div",{className:"flex center",style:{width:"100%"}},1===E&&ai.map((function(e,a){var t=e.name,o=e.title;return r.a.createElement(ga,{key:a,name:t,formData:O,dropDisplay:"Clique ou arraste para anexar o ".concat(o," "),handleFiles:m,removeFile:p,fileToRemove:y,style:{width:0===a?"380px":"250px",marginRight:0===a?"12px":0}})})))):r.a.createElement(Zn,{data:t,forms:k,files:O,demandFiles:g,filesForm:Ot})):r.a.createElement("section",null,r.a.createElement(ei,{data:t,handleInput:s,handleBlur:d,addSocio:l,removeSocio:c,handleFiles:m,enableEdit:n,handleEdit:i})),r.a.createElement("footer",null,r.a.createElement(Ya,{demand:b,declineButtonLabel:"Indeferir",setShowPendencias:f,showPendencias:w,info:j,activeStep:E,lastStep:x.length-1,setActiveStep:o,handleInput:s,handleSubmit:u}))))},oi=["Alterar dados da empresa","Informa\xe7\xf5es sobre altera\xe7\xe3o do contrato social","Informa\xe7\xf5es sobre s\xf3cios","Revis\xe3o"],ri=["Utilize os campos abaixo caso deseje editar os dados da empresa","Informe as altera\xe7\xf5es no contrato social ou CRC e anexe uma c\xf3pia do documento","Adicione ou altere s\xf3cios e suas respectivas participa\xe7\xf5es.","Revise os dados informados."],ni=Ee(["empresas","socios","getFiles/empresaDocs"],(function(e){var a=e.redux.empresas,t=Object(v.a)(e.redux.socios),n=Object(o.useState)({razaoSocial:"",activeStep:0,stepTitles:oi,subtitles:ri,dropDisplay:"Clique ou arraste para anexar a c\xf3pia da altera\xe7\xe3o do contrato social ",demand:void 0,confirmToast:!1,filteredSocios:[],showPendencias:!1,openAlertDialog:!1}),i=Object(Ke.a)(n,2),l=i[0],c=i[1];Object(o.useEffect)((function(){var o,r;if(a&&1===a.length){var n=Object(h.a)({},a[0]),i=null===n||void 0===n?void 0:n.vencimentoContrato;i&&i.length>0&&(n.vencimentoContrato=i.substr(0,10)),c(Object(h.a)(Object(h.a)(Object(h.a)({},l),n),{},{selectedEmpresa:n,filteredSocios:t}))}var s=null===e||void 0===e||null===(o=e.location)||void 0===o||null===(r=o.state)||void 0===r?void 0:r.demand;if(s&&s.history[0]){var d=e.redux.empresaDocs,u=null===s||void 0===s?void 0:s.history[0],m=u.altContrato,p=u.altEmpresa,f=u.socioUpdates,v=u.files,b=a.find((function(e){return e.codigoEmpresa===s.empresaId})),g=[];for(var E in b)p&&p[E]&&p[E]!==b[E]&&g.push(E);var x,S=Object(h.a)(Object(h.a)({},b),p),O=t.filter((function(e){return e.empresas&&e.empresas[0]&&e.empresas.some((function(e){return e.codigoEmpresa===b.codigoEmpresa}))})),y=JSON.parse(JSON.stringify(O));if(f&&f[0]){var j=[];f.forEach((function(e){"new"===e.status||e.outsider?j.push(e):y.forEach((function(a){if(e.socioId===a.socioId){var t=y.findIndex((function(a){return a.socioId===e.socioId}));-1!==t&&(y[t]=e)}}))})),y=y.concat(j).sort((function(e,a){return e.nomeSocio.localeCompare(a.nomeSocio)}))}v&&(x=d.filter((function(e){return v.includes(e.id)}))),c(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},l),m),S),{},{selectedEmpresa:b,demand:s,alteredFields:g,demandFiles:x,filteredSocios:y,activeStep:3}))}return function(){}}),[]),Object(o.useEffect)((function(){if(l.selectedEmpresa){var e=l.selectedEmpresa.codigoEmpresa,a=JSON.parse(JSON.stringify(t.filter((function(a){return a.empresas&&a.empresas[0]&&a.empresas.some((function(a){return a.codigoEmpresa===e}))}))))||[];c(Object(h.a)(Object(h.a)({},l),{},{originalSocios:a}))}}),[l.selectedEmpresa]);var s=function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,o,r,n,i,s,d,u,m,p,b,g,E;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.selectedEmpresa,t=a.codigoEmpresa,o=Object(v.a)(l.filteredSocios),r={},n=0,i=0,ro.forEach((function(e){""!==l[e.field]&&void 0!==l[e.field]||(n+=1)})),100!==n){e.next=6;break}return c(Object(h.a)(Object(h.a)({},l),{},{alertType:"fieldsMissing",openAlertDialog:!0})),e.abrupt("return");case 6:return ro.forEach((function(e){Object.assign(r,Object(f.a)({},e.field,l[e.field]))})),e.next=9,T.a.post("/api/checkSocios",{newCpfs:[null===r||void 0===r?void 0:r.cpfSocio]});case 9:if(s=e.sent,d=null===s||void 0===s?void 0:s.data,r.status="new",d[0]&&(u=d[0],m=u.socio_id,p=u.empresas,b={socioId:m,status:"modified",outsider:!0,empresas:p},Object.assign(r,Object(h.a)({},b))),r.share&&(r.share=+r.share),g=r.share,r.empresas&&r.empresas[0]&&r.empresas.push({codigoEmpresa:t,share:g}),(r.empresas&&!r.empresas[0]||!r.empresas)&&(r.empresas=[{codigoEmpresa:t,share:g}]),o.push(r),o.sort((function(e,a){return e.nomeSocio.localeCompare(a.nomeSocio)})),o.forEach((function(e){"deleted"!==(null===e||void 0===e?void 0:e.status)&&(i+=Number(e.share))})),!(i>100)){e.next=25;break}return o.pop(),e.next=24,c(Object(h.a)(Object(h.a)({},l),{},{alertType:"overShared",openAlertDialog:!0}));case 24:return e.abrupt("return");case 25:return E={},ro.forEach((function(e){return E[e.field]=""})),e.next=29,c(Object(h.a)(Object(h.a)(Object(h.a)({},l),E),{},{filteredSocios:o,totalShare:i}));case 29:setTimeout((function(){document.getElementsByName("nomeSocio")[0].focus()}),200);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var a=Object(w.a)(j.a.mark((function a(t){var o,r,n,i,c,s,d,f,v,b,E,y,w,C,k,D,N,I,P,F,z,M,L;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=l.demand,r=l.form,n=l.selectedEmpresa,i=n.codigoEmpresa,c=p(Gn),s=p(oo),d=u(t),f=m({demand:o,altEmpresa:s,altContrato:c,socioUpdates:d,approved:t}),v=[],b="Solicita\xe7\xe3o de altera\xe7\xe3o contratual enviada.",o||c||s||r||d){a.next=5;break}return alert("Nenhuma modifica\xe7\xe3o registrada!"),a.abrupt("return");case 5:if(!o||!t){a.next=26;break}if(o.history[0].altEmpresa&&s&&T.a.put("/api/editElements",{table:"empresas",tablePK:"codigo_empresa",update:A.a.decamelizeKeys(s)}),c&&T.a.post("/api/altContrato",c),!d){a.next=26;break}if(E=d.newSocios,y=d.oldSocios,w=d.cpfsToAdd,C=d.cpfsToRemove,k={table:"socios",tablePK:"socio_id",codigoEmpresa:i,cpfsToAdd:w},!E[0]){a.next=15;break}return a.next=13,T.a.post("/api/socios",{socios:E,codigoEmpresa:i});case 13:D=a.sent,v.push(D.data);case 15:if(!y[0]){a.next=24;break}return console.log("\ud83d\ude80 ~ file: AltContrato.jsx ~ line 442 ~ oldSocios",y),a.next=19,T.a.put("/api/editSocios",Object(h.a)({requestArray:y},k));case 19:if(!C[0]){a.next=22;break}return a.next=22,T.a.patch("/api/removeEmpresa",{cpfsToRemove:C,codigoEmpresa:i});case 22:N=y.map((function(e){return e.socio_id})),v=v.concat(N);case 24:v[0]&&(I=O.filter((function(e){return(null===e||void 0===e?void 0:e.socioId)&&!v.includes(e.socioId)&&"deleted"!==(null===e||void 0===e?void 0:e.status)})).map((function(e){return e.socioId})),P=v.concat(I),Object.assign(f,{metadata:{socios:P}})),b="Dados atualizados";case 26:if(!1!==t){a.next=30;break}b="Solicita\xe7\xe3o indeferida.",a.next=36;break;case 30:if(t){a.next=36;break}return M=O.filter((function(e){return(null===e||void 0===e?void 0:e.socioId)&&!v.includes(e.socioId)&&"deleted"!==(null===e||void 0===e?void 0:e.status)})).map((function(e){return e.socioId})),L=v.concat(M),a.next=34,g(i,L);case 34:(F=a.sent)instanceof Array&&(z=F.map((function(e){return e.id})),f.history.files=z);case 36:Ye(f).then((function(e){console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),o?setTimeout((function(){e.history.push("/solicitacoes")}),1500):setTimeout((function(){x()}),900),S(b);case 39:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),u=function(e){var a=l.filteredSocios,t=l.selectedEmpresa,o=l.demand,r=t.codigoEmpresa,n=[],i=[],c=[];if(a.forEach((function(e){delete e.edit,delete e.createdAt,delete e.razaoSocial,Object.keys(e).forEach((function(a){e[a]&&""!==e[a]||delete e[a]})),e.status&&n.push(e)})),!n[0])return null;if(n.forEach((function(e){if(e.empresas&&e.empresas[0]&&!e.empresas.some((function(e){return e.codigoEmpresa===r})))e.empresas.push({codigoEmpresa:r,share:null===e||void 0===e?void 0:e.share}),console.log(e,e.empresas);else if(e.empresas&&e.empresas[0]&&e.empresas.some((function(e){return e.codigoEmpresa===r}))){var a=e.empresas.findIndex((function(e){return e.codigoEmpresa===r}));e.empresas[a].share=+e.share,console.log(e,e.empresas)}else e.empresas&&e.empresas[0]||(e.empresas=[{codigoEmpresa:r,share:null===e||void 0===e?void 0:e.share}]);"new"!==e.status&&!0!==e.outsider||c.push({cpf_socio:e.cpfSocio}),e.empresas instanceof Array&&"deleted"===e.status&&(e.empresas=e.empresas.filter((function(e){return e.codigoEmpresa!==r})),i.push({cpf_socio:e.cpfSocio}),e.empresas[0]||(e.empresas=[]))})),!o)return{socioUpdates:n,cpfsToAdd:c,cpfsToRemove:i};if(o&&e){n.forEach((function(e){delete e.outsider,delete e.razaoSocial,delete e.codigoEmpresa,delete e.originalStatus,delete e.nomeEmpresas,e.empresas=JSON.stringify(e.empresas)}));var s=(n=A.a.decamelizeKeys(n)).filter((function(e){return"new"===e.status})),d=n.filter((function(e){return"modified"===e.status||"deleted"===e.status}));return d.forEach((function(e){return delete e.status})),s.forEach((function(e){return delete e.status})),{newSocios:s,oldSocios:d,cpfsToAdd:c,cpfsToRemove:i}}},m=function(e){var a,t=e.demand,o=e.altEmpresa,r=e.altContrato,n=e.approved,i=e.socioUpdates,c=l.selectedEmpresa,s=l.info,d=c.codigoEmpresa;(t||(a={history:Object(h.a)({altContrato:r,info:s,altEmpresa:o},i),empresaId:d,historyLength:0,approved:n},!1===n&&(a.declined=!0)),t&&!1===n)&&(a={id:t.id,empresaId:t.empresaId,history:{info:s},declined:!0});t&&!0===n&&(a={id:t.id,demandFiles:l.demandFiles,history:{},approved:n});return a},p=function(e){var a=l.selectedEmpresa,t=l.demand,o=a.codigoEmpresa,r=a.razaoSocial,n=t&&t.createdAt,i={codigoEmpresa:null===a||void 0===a?void 0:a.codigoEmpresa};e.forEach((function(e){var a=e.field;for(var t in l)t===a&&l[t]&&Object.assign(i,Object(f.a)({},t,l[t]))}));var c=Object.keys(i);return c.length>1?(c.includes("numeroAlteracao")&&t&&(i.createdAt=n,i.codigoEmpresa=o,i.razaoSocial=r),l.razaoSocial&&(i.razaoSocial=l.razaoSocial),l.razaoSocialEdit&&(i.razaoSocial=l.razaoSocialEdit),console.log("\ud83d\ude80 ~ file: AltContrato.jsx ~ line 676 ~ returnObj",i),i):null},b=function(){var e=Object(w.a)(j.a.mark((function e(a,t){var o,r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a&&a[0]&&(r=Object(h.a)(Object(h.a)({},l),{},Object(f.a)({},t,a[0])),n=Me(a,r,ai),c(Object(h.a)(Object(h.a)(Object(h.a)({},l),n),{},(o={},Object(f.a)(o,t,a[0]),Object(f.a)(o,"fileToRemove",null),o))));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),g=function(){var e=Object(w.a)(j.a.mark((function e(a,t){var o,r,n,i,c,s,d,u,m,p,f;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=l.form,r=l.numeroAlteracao,n=[],!(o instanceof FormData)){e.next=26;break}i={empresaId:a,tempFile:!0},c=new FormData,s=Object(F.a)(o),e.prev=5,s.s();case 7:if((d=s.n()).done){e.next=17;break}return u=d.value,"altContratoDoc"===(m=u[0])?(p=Object(h.a)(Object(h.a)({},i),{},{fieldName:m,socios:t,numeroAlteracao:r}),c.append("metadata",JSON.stringify(p))):(f=Object(h.a)(Object(h.a)({},i),{},{fieldName:m}),c.append("metadata",JSON.stringify(f))),c.set(m,u[1]),e.next=14,T.a.post("/api/empresaUpload",c).then((function(e){var a,t;console.log(e),(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.file)instanceof Array&&n.push.apply(n,Object(v.a)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.file))})).catch((function(e){return console.log(e)}));case 14:c=new FormData;case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),s.e(e.t0);case 22:return e.prev=22,s.f(),e.finish(22);case 25:return e.abrupt("return",n);case 26:case"end":return e.stop()}}),e,null,[[5,19,22,25]])})));return function(a,t){return e.apply(this,arguments)}}(),E=function(){var e=Object(w.a)(j.a.mark((function e(a){var t,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.form,o=qe(a,t),c(Object(h.a)(Object(h.a)({},l),o));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),x=function(){var e={},o={};[Gn,ro].forEach((function(a){a.forEach((function(a){var t=a.field;Object.assign(e,Object(f.a)({},t,""))}))})),a&&1===a.length&&(o=Object(h.a)(Object(h.a)({},a[0]),{},{selectedEmpresa:a[0],filteredSocios:t})),c(Object(h.a)(Object(h.a)({},e),{},{activeStep:0,stepTitles:oi,subtitles:ri,razaoSocial:"",selectedEmpresa:void 0,filteredSocios:[],form:void 0,fileToRemove:void 0},o))},S=function(e){return c(Object(h.a)(Object(h.a)({},l),{},{confirmToast:!l.confirmToast,toastMsg:e}))},O=l.filteredSocios,y=l.confirmToast,C=l.toastMsg,k=l.openAlertDialog,D=l.alertType,N=l.customMessage,I=l.customTitle;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ti,{empresas:a,data:l,setActiveStep:function(a){var t=l.activeStep,o=(e.redux.parametros[0]&&e.redux.parametros[0]).inputValidation,r=[JSON.parse(JSON.stringify(oo)).filter((function(e){return"numeroContrato"!==e.field&&"vencimentoContrato"!==e.field})).map((function(e){return"razaoSocial"===e.field&&(e.disabled=!0),e})),Gn];if("next"===a&&o){var n=e.checkBlankInputs,i=(0,e.checkInputErrors)("sendState"),s=n(r[t],l);if(i)return void c(Object(h.a)(Object(h.a)({},l),i));if(s)return void c(Object(h.a)(Object(h.a)({},l),s))}"next"===a&&t++,"back"===a&&t--,"reset"===a&&(t=0),c(Object(h.a)(Object(h.a)({},l),{},{activeStep:t}))},handleInput:function(e){var o,r=e.target,n=r.name,i=r.value,s={};if("razaoSocial"===n){var d,u,m=null===(d=s=a.find((function(e){return e.razaoSocial===i})))||void 0===d?void 0:d.vencimentoContrato;if(m&&m.length>0&&(s.vencimentoContrato=m.substr(0,10)),null===(u=s)||void 0===u?void 0:u.codigoEmpresa){o=JSON.parse(JSON.stringify(t.filter((function(e){return e.empresas&&e.empresas[0]&&e.empresas.some((function(e){return e.codigoEmpresa===s.codigoEmpresa}))}))));var p=JSON.parse(JSON.stringify(t));p=p.filter((function(e){return e.empresas&&e.empresas[0]?e.empresas.includes(s.codigoEmpresa):null})),p=o.concat(p);var b,g=new Map,E=Object(F.a)(p);try{for(E.s();!(b=E.n()).done;){var x=b.value;g.set(x.socioId,x)}}catch(O){E.e(O)}finally{E.f()}(o=Object(v.a)(g.values())).forEach((function(e){var a;e.empresas[0]&&(a=e.empresas.find((function(e){return e.share&&e.codigoEmpresa===s.codigoEmpresa}))),a&&a.share&&(e.share=a.share)}))}c(s?Object(h.a)(Object(h.a)(Object(h.a)({},l),s),{},Object(f.a)({selectedEmpresa:s,razaoSocialEdit:s.razaoSocial,filteredSocios:o},n,i)):Object(h.a)(Object(h.a)({},l),{},Object(f.a)({selectedEmpresa:void 0,filteredSocios:void 0},n,i)))}else{var S=rn(n,i);c(Object(h.a)(Object(h.a)({},l),{},Object(f.a)({},n,S)))}},handleBlur:function(e){var a=e.target,t=a.name,o=a.value,r=l.filteredSocios;("razaoSocialEdit"===t&&c((function(e){return Object(h.a)(Object(h.a)({},e),{},{razaoSocial:o})})),"cpfSocio"===t)&&(r.some((function(e){return e.cpfSocio===o}))&&c(Object(h.a)(Object(h.a)({},l),{},{openAlertDialog:!0,customTitle:"Cpf j\xe1 cadastrado",customMessage:"O cpf informado corresponde a um s\xf3cio j\xe1 cadastrado. Para remover ou editar os dados do s\xf3cio, utilize as op\xe7\xf5es abaixo.",cpfSocio:""})))},handleSubmit:d,handleFiles:b,removeFile:E,socios:O,addSocio:s,removeSocio:function(e){var a=l.filteredSocios,t=l.demand,o=a[e];"new"===(null===o||void 0===o?void 0:o.status)||!t&&o.outsider?(a.splice(e,1),c(Object(h.a)(Object(h.a)({},l),{},{filteredSocios:a}))):((null===o||void 0===o?void 0:o.status)&&"deleted"!==(null===o||void 0===o?void 0:o.status)?(o.originalStatus=o.status,o.status="deleted"):"deleted"===(null===o||void 0===o?void 0:o.status)?o.status=null===o||void 0===o?void 0:o.originalStatus:o.status="deleted",c(Object(h.a)(Object(h.a)({},l),{},{filteredSocios:a})))},enableEdit:function(e){var a=l.filteredSocios;!0===a[e].edit?a[e].edit=!1:(a.forEach((function(e){return e.edit=!1})),a[e].edit=!0),c(Object(h.a)(Object(h.a)({},l),{},{filteredSocios:a}))},handleEdit:function(e){var a=e.target.name,t=l.filteredSocios,o=l.selectedEmpresa.codigoEmpresa,r=e.target.value;"share"===a&&(r=r.replace(",","."));var n=Object(v.a)(t),i=n.find((function(e){return!0===e.edit}));if(i){var s=rn(a,r);if(i[a]=s,i.status||(i.status="modified"),"share"===a&&!isNaN(+r)){var d=i.empresas,u=d.findIndex((function(e){return e.codigoEmpresa===o}));-1!==u?d[u]=Object(h.a)(Object(h.a)({},d[u]),{},{share:+r}):d[0]?d.push({codigoEmpresa:o,share:+r}):i.empresas=[{codigoEmpresa:o,share:+r}]}c(Object(h.a)(Object(h.a)({},l),{},{filteredSocios:n}))}},setShowPendencias:function(){return c(Object(h.a)(Object(h.a)({},l),{},{showPendencias:!l.showPendencias}))}}),r.a.createElement(ae,{open:y,close:S,msg:C}),k&&r.a.createElement(ot,{open:k,alertType:D,close:function(){return c(Object(h.a)(Object(h.a)({},l),{},{openAlertDialog:!l.openAlertDialog}))},customMessage:N,customTitle:I}))})),ii=(t(609),{height:60,width:70}),li=[Object(h.a)({src:"/images/chromeLogo.png",alt:"Google Chrome",title:"Google Chrome",href:"https://www.google.com/intl/pt-BR/chrome/"},ii),Object(h.a)({src:"/images/edgeLogo.png",alt:"Microsoft Edge",title:"Microsoft Edge",href:"https://www.microsoft.com/pt-br/edge"},ii),Object(h.a)({src:"/images/operaLogo.png",alt:"Opera",title:"Opera",height:"1rem",href:"https://www.opera.com/pt-br"},ii)],ci=function(){return r.a.createElement("div",{className:"flexColumn"},r.a.createElement("h4",{className:"webBrowsers__title"},"Melhor visualizado nos navegadores"),r.a.createElement("div",{className:"webBrowsers__container"},li.map((function(e,a){return r.a.createElement("a",{key:a,href:e.href,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",Object.assign({className:"webBrowsers__logo",alt:e.alt},e)))}))))},si=function(e){var a=e.data,t=e.changeTab,n=e.handleInput,i=e.handleSubmit,l=a.title,c=a.form,s=a.buttonLabel,d=a.tab,u=a.browserNotCompatible;Object(o.useEffect)((function(){setTimeout((function(){var e=document.getElementById("email");e&&e.focus()}),600)}),[]);var m=function(e){var t,o=a[null===e||void 0===e?void 0:e.field];if(o)return(!e.errorHandler||!e.errorHandler(o))&&(!(!o||!e.errorHandler||e.errorHandler(o))||((null===(t=o)||void 0===t?void 0:t.length)<(null===e||void 0===e?void 0:e.minLength)||("string"!==typeof o&&(o=o.toString()),!!e.pattern&&null===o.match(e.pattern))))},p=function(e){var t,o,r=a[e.field];return r?e.errorHandler&&e.errorHandler(r)?"\u2713":r&&e.errorHandler&&!e.errorHandler(r)||(null===(t=r)||void 0===t?void 0:t.length)<(null===e||void 0===e?void 0:e.minLength)?"\u2718":(null===(o=r)||void 0===o?void 0:o.length)>=(null===e||void 0===e?void 0:e.minLength)?"\u2713":("string"!==typeof r&&(r=r.toString()),r>e.max||r<e.min?"Valor inv\xe1lido":null===r.match(e.pattern)?"\u2718":e.pattern&&null!==r.match(e.pattern)?"\u2713":" "):" "};return r.a.createElement("div",{className:"flexColumn login"},r.a.createElement("h2",{className:"login__title"},"CadTI - Cadastro do Transporte Intermunicipal - Seinfra MG"),r.a.createElement("div",{className:"login__form paper"},r.a.createElement("header",null,r.a.createElement("h4",{className:"header2 login__subtitle"},l),2===d&&r.a.createElement("h5",{className:"login__subtitle--forgotPassword"},"Insira o e-mail cadastrado para recuperar a senha.")),r.a.createElement("section",{className:"flexColumn center"},c.map((function(e,t){var o=e.name,i=e.label,l=e.options,c=e.type,s=void 0===c?"text":c,d=Object(Y.a)(e,["name","label","options","type"]);return r.a.createElement("div",{className:"input",key:t},r.a.createElement(Xe.a,{id:o,name:o,label:i,value:a[o]||"",onChange:n,type:s,error:m(d),helperText:p(d),InputProps:{style:{width:"260px"}},InputLabelProps:{style:{fontSize:"10pt",color:"#223"}},select:!!l},l&&l.map((function(e,a){var t=e.optionLabel,o=e.optionValue;return r.a.createElement($e.a,{key:a,value:o},t)}))))})),r.a.createElement(Io,{label:s,onClick:i})),r.a.createElement("footer",{className:"login__footer"},r.a.createElement("p",{onClick:function(){return t(0===d?1:0)}},0===d?"Ainda n\xe3o \xe9 cadastrado?":"Voltar para a tela de login"),0===d&&r.a.createElement("p",{onClick:function(){return t(2)}},"Esqueceu sua senha?"))),u&&r.a.createElement(ci,null))},di=[{name:"email",label:"E-mail"},{name:"password",label:"Senha",type:"password"}],ui=[{title:"Fazer login",form:di,buttonLabel:"entrar",endPoint:"/auth/login"},{title:"Cadastro de Usu\xe1rio",form:[{name:"name",label:"Nome Completo"},Object(h.a)(Object(h.a)({},Gt),{},{name:"cpf",field:"cpf"})].concat(di,[{name:"confirmPassword",label:"Confirme sua senha",type:"password"}]),buttonLabel:"Cadastrar",endPoint:"/auth/signUp",toastMsg:"Usu\xe1rio cadastrado."},{title:"Recupera\xe7\xe3o de senha",form:[{name:"email",label:"E-mail"}],buttonLabel:"Recuperar senha",endPoint:"/auth/forgotPassword",toastMsg:"Senha enviada para o e-mail registrado."}],mi=function(e,a){var t=document.baseURI;return"\n    <p>\n    O usu\xe1rio ".concat(e," foi criado com sucesso no Sistema de Cadastro do Transporte Intermunicipal da Seinfra-MG - CadTI.\n    </p>\n    <p>\n    Para confirmar o endere\xe7o de e-mail e liberar o acesso ao sistema, <a href= ").concat(t,"auth/verifyUser/").concat(a,"> clique aqui </a>.\n    </p>\n    Caso n\xe3o tenha feito o cadastro, favor desconsiderar essa mensagem.")};var pi=Object(c.c)((function(e){return{redux:Object(h.a)({},e.user)}}),(function(e){return Object(l.b)({logUser:ie},e)}))((function(e){var a=Object(o.useState)(Object(h.a)({tab:0},ui[0])),t=Object(Ke.a)(a,2),n=t[0],i=t[1],l=n.tab,c=n.endPoint,s=n.toastMsg,d=n.toastStatus,u=n.confirmToast,m=window.navigator.userAgent;Object(o.useEffect)((function(){m.match("Chrome")||i(Object(h.a)(Object(h.a)({},n),{},{browserNotCompatible:!0}))}),[]);var p=function(){var a=Object(w.a)(j.a.mark((function a(){var t,o,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.post(c,n);case 3:return a.next=5,T.a.get("/getUser");case 5:t=a.sent,o=null===t||void 0===t?void 0:t.data,te("loggedIn",!0),e.logUser(o),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),E(null===a.t0||void 0===a.t0||null===(r=a.t0.response)||void 0===r?void 0:r.data,"error");case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(){return a.apply(this,arguments)}}(),v=function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,o,r,l,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.form,a=n.endPoint,n.confirmToast,n.toastMsg,t=Object(Y.a)(n,["form","endPoint","confirmToast","toastMsg"]),r=1,t instanceof Object&&(t.role="empresa"),l=t.email,c=t.name,s={to:l,subject:"Confirma\xe7\xe3o de e-mail",vocativo:c},e.next=6,T.a.post(a,t).then((function(e){var a,t=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.id,o=mi(l,t);s.message=o,T.a.post("/alerts/mail",s)})).catch((function(e){var a;E(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data,"error"),o=!0}));case 6:o||(r=0,E("Usu\xe1rio cadastrado."),setTimeout((function(){return i(Object(h.a)({tab:r},ui[r]))}),1250));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(w.a)(j.a.mark((function e(){var a,t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.email,t=a,T.a.post(c,{recoveryMail:t}).then((function(e){E(e.data),setTimeout((function(){return i(Object(h.a)({tab:0},ui[0]))}),1250)})).catch((function(e){var a;E(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data,"error")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){0===l&&p(),1===l&&v(),2===l&&b()};Object(o.useEffect)((function(){var e=function(e){"Enter"===e.key&&g()};return document.addEventListener("keypress",e),function(){return document.removeEventListener("keypress",e)}}));var E=function(e,a){return i(Object(h.a)(Object(h.a)({},n),{},{confirmToast:!n.confirmToast,toastMsg:e,toastStatus:a}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(si,{data:n,handleInput:function(e){var a=e.target,t=a.name,o=rn(t,a.value);i(Object(h.a)(Object(h.a)({},n),{},Object(f.a)({},t,o)))},handleSubmit:g,changeTab:function(e){return i(Object(h.a)(Object(h.a)({},n),{},{tab:e},ui[e]))}}),r.a.createElement(ae,{open:u,close:E,msg:s,status:d}))})),fi=[{field:"name",title:"Nome",label:"Nome"},{field:"cpf",title:"CPF",label:"CPF"},{field:"email",title:"E-mail",label:"E-mail"},{field:"role",name:"role",title:"Perfil",label:"Perfil",lookup:{admin:"Administrador",tecnico:"T\xe9cnico Seinfra",empresa:"Delegat\xe1rio"},editable:"always"}],vi=function(e){var a=e.collection,t=(e.showDetails,e.addUser),o=e.editUser,n=e.deleteUser;return Array.isArray(a)||(a=[]),a=Array.from(a).sort((function(e,a){return e.name.localeCompare(a.name)})),r.a.createElement("div",{style:{margin:"10px 0"},className:"noPrint"},r.a.createElement(nr.a,{title:"Gerenciar dados de usu\xe1rios",columns:fi,data:a,style:{fontFamily:"Segoe UI",fontSize:"14px"},options:{filtering:!0,exportButton:!0,exportFileName:"Usu\xe1rios",exportCsv:function(e,a){var t,o=null===(t=fi.find((function(e){return e.lookup})))||void 0===t?void 0:t.lookup;Object(v.a)(a).forEach((function(e){Object.entries(o).forEach((function(a){var t=Object(Ke.a)(a,2),o=t[0],r=t[1];o===(null===e||void 0===e?void 0:e.role)&&(e.role=r)}))})),mr("Usu\xe1rios",fi,a)},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:20,rowStyle:{fontSize:"0.5rem"}},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Registro n\xe3o encontrado.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",addTooltip:"Adicionar novo usu\xe1rio",editTooltip:"Editar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportCSVName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar para xlsx"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},editable:{onRowAdd:function(e){return new Promise((function(a,o){setTimeout((function(){t(e),a()}),1e3)}))},onRowUpdate:function(e,t){return new Promise((function(r,n){setTimeout((function(){Object(v.a)(a)[t.tableData.id]=e,o(e),r()}),500)}))},onRowDelete:function(e){return new Promise((function(a,t){setTimeout((function(){n(e),a()}),1e3)}))}}}))},hi=Ee(["users","socios"],(function(e){var a=e.redux,t=a.users,n=a.socios,i=Object(o.useState)({confirmToast:!1}),l=Object(Ke.a)(i,2),c=l[0],s=l[1];Object(o.useEffect)((function(){return Jr(),function(){return Jr(!0)}}),[]);var d=function(){var e=Object(w.a)(j.a.mark((function e(a){var t,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.cpf,(o=n.find((function(e){return e.cpfSocio===t})))&&(a.empresas=[o.codigoEmpresa]),T.a.post("/users/addUser",a).then((function(e){return console.log(e.data)})).catch((function(e){var a;return m((null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data)||"Erro")}));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),u=c.confirmToast,m=function(e,a){return s(Object(h.a)(Object(h.a)({},c),{},{confirmToast:!u,toastMsg:e,toastStatus:a}))};return r.a.createElement("div",null,r.a.createElement(vi,{collection:t,addUser:d,editUser:function(e){T.a.put("/users/editUser",e).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))},deleteUser:function(e){var a=e.id;T.a.delete("/users/deleteUser?id=".concat(a)).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))}}),r.a.createElement(ae,{open:u,close:m,msg:c.toastMsg,status:"warning"}))})),bi=[{field:"name",label:"Nome e sobrenome"},{field:"cpf",label:"CPF",disabled:!0},{field:"email",label:"E-mail",type:"email"},{field:"password",label:"Alterar senha",type:"password"},{field:"confirmPassword",label:"Confirme a nova senha",type:"password"}],gi=(t(610),function(e){var a=e.data,t=e.handleInput,o=e.handleSubmit,n=a.modified;return r.a.createElement("div",{className:"flexColumn center editAccount__container"},r.a.createElement("header",{className:"selectHeader"},r.a.createElement("h4",{className:"parametrosTitle"},"Alterar dados da conta"),r.a.createElement(ea,{subtitle:"Caso deseje alterar apenas a senha, insira apenas a senha e a confirma\xe7\xe3o. N\xe3o \xe9 necess\xe1rio informar a senha para alterar os demais dados da conta."})),r.a.createElement("main",{className:"configForm"},r.a.createElement(Qe,{form:bi,data:a,handleInput:t,style:{width:"100%",flexDirection:"column"}})),r.a.createElement("div",{style:{minHeight:"60px",position:"flex"}},r.a.createElement(Io,{action:"save",onClick:o,disabled:!n})))}),Ei=Object(c.c)(null,{editUser:le})(Ee([],(function(e){var a=e.user,t=Object(o.useState)({initState:{confirmToast:!1},modified:!1}),n=Object(Ke.a)(t,2),i=n[0],l=n[1],c=i.toastMsg,s=i.toastStatus,d=i.confirmToast;Object(o.useEffect)((function(){a instanceof Object&&l(Object(h.a)(Object(h.a)(Object(h.a)({},i),a),{},{initState:a}))}),[]);var u=function(e,a,t){var o,r,n,l,c=i.initState,s=!1;return"confirmPassword"===e&&(s=i.modified),t?l=c.toString()!==t.toString():(Object.keys(c).forEach((function(a){i[a]&&c[a]&&a!==e&&i[a].toString()!==c[a].toString()&&(o=!0)})),r=c[e]&&c[e].toString()!==a,n="password"===e&&i[e]&&""!==a),(r||o||l||n)&&(s=!0),s},m=function(e,a){return l(Object(h.a)(Object(h.a)({},i),{},{confirmToast:!i.confirmToast,toastMsg:e,toastStatus:a}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(gi,{data:i,handleInput:function(e){var a,t=e.target,o=t.name,r=t.value,n=u(o,r);l(Object(h.a)(Object(h.a)({},i),{},(a={},Object(f.a)(a,o,r),Object(f.a)(a,"modified",n),a)))},handleSubmit:function(){var a=u(null,null,i),t=i.name,o=i.cpf,r=i.email,n=i.password,c=i.confirmPassword,s={name:t,cpf:o,email:r,password:n};n===c?(s.id=i._id,T.a.put("/users/editUser",s).then((function(o){200===o.status&&(m(o.data),e.editUser({name:t,email:r}),setTimeout((function(){l(Object(h.a)(Object(h.a)({},i),{},{initState:i,modified:a,password:void 0,confirmPassword:void 0}))}),1200))})).catch((function(e){return m(e.message,"error")}))):m("Senhas n\xe3o conferem","error")}}),r.a.createElement(ae,{open:d,close:m,msg:c,status:s}))}))),xi=[{field:"placa",label:"Placa",autoComplete:!0,collection:"frota"},{field:"renavam",label:"Renavam",disabled:!0},{field:"nChassi",label:"N\xfamero do Chassi",maxLength:17,disabled:!0},{field:"utilizacao",label:"Utiliza\xe7\xe3o",disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",disabled:!0},{field:"compartilhado",label:"Delegat\xe1rio Compartilhado",itemProp:"razaoSocial",autoComplete:!0,collection:"compartilhados"}],Si=[{title:"Contrato de Compartilhamento",name:"contratoCompartilhamento"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"}],Oi=t(325),yi=t.n(Oi),ji=function(e){var a=e.data,t=e.redux,o=e.handleInput,n=e.handleFiles,i=e.removeFile,l=e.handleSubmit,c=e.toggleAcceptTerms,s=t.empresas,d=t.compartilhados,u=a.razaoSocial,m=a.selectedEmpresa,p=a.motivoCompartilhamento,f=a.form,v=a.demand,b=a.compartilhamentoRemoved,g=a.termsAccepted,E=a.demandFiles,x=a.fileToRemove,S=xi.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{disabled:!0})})),O=yi.a.termoCiencia__div,y=yi.a.termoCiencia__text;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement(Ua,{links:["Ve\xedculos","/veiculos"],text:"Gerenciar compartilhamento de Ve\xedculos",demand:v}),r.a.createElement(Ge,{empresas:s,data:{razaoSocial:u,demand:v},handleInput:o})),m&&r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"paper",style:{margin:"0.5rem 0"}},r.a.createElement(ea,{subtitle:v?"Informa\xe7\xf5es do ve\xedculo e do compartilhamento":"Insira a placa do ve\xedculo para gerenciar seu compartilhamento."}),b&&r.a.createElement("p",{className:"smallFont",style:{color:"red"}},"*Solicita\xe7\xe3o de t\xe9rmino do compartilhamento"),r.a.createElement(Qe,{form:v?S:xi,data:a,empresas:s,compartilhados:d,handleInput:o}),r.a.createElement("section",{className:"flexColumn",style:{margin:"0 6rem"}},r.a.createElement(bo,{label:b?" Motivo do t\xe9rmino do compartilhamento":"Motivo do compartilhamento",name:"motivoCompartilhamento",id:"motivoCompartilhamento",disabled:!1,onChange:o,value:p,rows:"2"})),r.a.createElement("section",{className:"flexColumn"},r.a.createElement("div",{style:{margin:"3rem 0 0 0"}},r.a.createElement(ea,{subtitle:v?"Documentos":"Anexe os arquivos solicitados.",style:{margin:0}})),r.a.createElement("div",{className:"flex",style:{margin:"0 0 0 6rem"}},v?r.a.createElement(Ta,{demandFiles:E,form:Si,files:f,collection:"vehicleDocs"}):Si.map((function(e,a){var t=e.name,o=e.title;return r.a.createElement(ga,{key:a,name:t,formData:f,dropDisplay:"Clique ou arraste para anexar o ".concat(o," "),handleFiles:n,removeFile:i,fileToRemove:x,style:{width:"490px",marginRight:0===a?"12px":0}})})))),r.a.createElement("section",{className:O},r.a.createElement(ta.a,{control:r.a.createElement(aa.a,{checked:!0===g,onChange:function(){return c()},value:g}),label:r.a.createElement("span",{className:y},"Estou ciente de que a utiliza\xe7\xe3o de ve\xedculos de terceiros \xe9 autorizada desde que o ve\xedculo seja cadastrado na Superintend\xeancia de Transporte Intermunicipal, apresentando o Certificado de Registro da SEINFRA vigente,  e com as caracter\xedsticas necess\xe1rias para utiliza\xe7\xe3o naquela linha.")}))),r.a.createElement("footer",null,r.a.createElement(Io,{label:v?"Aprovar":"Enviar",onClick:function(){return v?l(!0):l()},disabled:!v&&!g}),v&&r.a.createElement(Io,{label:"Indeferir",color:"secondary",onClick:function(){return l(!1)}}))))},wi=Ee(["veiculos","empresas","compartilhados","getFiles/vehicleDocs"],(function(e){var a,t,n=e.redux,i=n.empresas,l=n.compartilhados,c=n.veiculos,s=n.vehicleDocs,d=Object(o.useState)({confirmToast:!1,compartilhadoAtual:null,termsAccepted:!1}),u=Object(Ke.a)(d,2),m=u[0],p=u[1],v=null===e||void 0===e||null===(a=e.location)||void 0===a||null===(t=a.state)||void 0===t?void 0:t.demand;Object(o.useEffect)((function(){var e;if(i&&1===i.length&&p(Object(h.a)(Object(h.a)({},m),{},{selectedEmpresa:i[0],razaoSocial:null===(e=i[0])||void 0===e?void 0:e.razaoSocial,frota:c})),null===v||void 0===v?void 0:v.history){var a,t=v.empresaId,o=v.veiculoId,r=v.history.length&&v.history[0],n=r.motivoCompartilhamento,l=r.compartilhado,d=r.compartilhadoId,u=r.files,f=r.compartilhamentoRemoved,b=i.find((function(e){return e.codigoEmpresa===t})),g=c.filter((function(e){return e.codigoEmpresa===t})).find((function(e){return e.veiculoId===o}));u&&(a=s.filter((function(e){return u.includes(e.id)}))),p(Object(h.a)(Object(h.a)(Object(h.a)({},m),g),{},{selectedEmpresa:b,demand:v,demandFiles:a,razaoSocial:b.razaoSocial,motivoCompartilhamento:n,compartilhado:l,compartilhadoId:d,compartilhamentoRemoved:f}))}return function(){}}),[i,v]);var b=function(){var e=Object(w.a)(j.a.mark((function e(a){var t,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=m.form,o=qe(a,t),p(Object(h.a)(Object(h.a)({},m),o));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),g=function(){var e={},a={};xi.forEach((function(a){var t=a.field;Object.assign(e,Object(f.a)({},t,void 0))})),i&&1===i.length&&(a=Object(h.a)(Object(h.a)({},i[0]),{},{selectedEmpresa:i[0]})),p(Object(h.a)(Object(h.a)(Object(h.a)({},e),{},{razaoSocial:"",selectedEmpresa:void 0,form:void 0,fileToRemove:void 0},a),{},{motivoCompartilhamento:""}))},E=function(e){return p(Object(h.a)(Object(h.a)({},m),{},{confirmToast:!m.confirmToast,toastMsg:e}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(ji,{redux:e.redux,data:m,handleInput:function(e){var a=e.target,t=a.name,o=a.value;switch(t){case"razaoSocial":var r=i.find((function(e){return e.razaoSocial===o}));if(r){var n=c.filter((function(e){return e.codigoEmpresa===r.codigoEmpresa}));p(Object(h.a)(Object(h.a)({},m),{},Object(f.a)({selectedEmpresa:r,frota:n,razaoSocial:r.razaoSocial},t,o)))}else p(Object(h.a)(Object(h.a)({},m),{},Object(f.a)({},t,o)));break;case"placa":var s=c.find((function(e){return e.placa===o})),d=(null===s||void 0===s?void 0:s.compartilhado)||"";p(s?Object(h.a)(Object(h.a)(Object(h.a)({},m),s),{},Object(f.a)({compartilhadoAtual:d},t,o)):Object(h.a)(Object(h.a)({},m),{},Object(f.a)({compartilhadoAtual:void 0},t,o)));break;case"compartilhado":var u=l.find((function(e){return e.razaoSocial===o&&""!==o}));if(u){var v=u.codigoEmpresa,b=u.razaoSocial;p(Object(h.a)(Object(h.a)({},m),{},Object(f.a)({compartilhadoId:v,compartilhado:b,compartilhamentoRemoved:!1},t,o)))}else if(o)p(Object(h.a)(Object(h.a)({},m),{},Object(f.a)({},t,o)));else{var g=m.compartilhadoAtual&&!o;p(Object(h.a)(Object(h.a)({},m),{},Object(f.a)({compartilhadoId:void 0,compartilhado:void 0,compartilhamentoRemoved:g},t,o)))}break;default:p(Object(h.a)(Object(h.a)({},m),{},Object(f.a)({},t,o)))}},handleFiles:function(e,a){if(e&&e[0]){var t,o=Object(h.a)(Object(h.a)({},m),{},Object(f.a)({},a,e[0])),r=Me(e,o,Si);p(Object(h.a)(Object(h.a)(Object(h.a)({},m),r),{},(t={},Object(f.a)(t,a,e[0]),Object(f.a)(t,"fileToRemove",null),t)))}},removeFile:b,handleSubmit:function(a){var t;if(Ye(function(e){var a,t=e.demand,o=e.approved,r=m.selectedEmpresa,n=m.compartilhadoId,i=m.compartilhado,l=m.motivoCompartilhamento,c=m.info,s=m.form,d=m.veiculoId,u=m.compartilhamentoRemoved,p=r.codigoEmpresa;t||(a={history:{info:"".concat(u?"Motivo do t\xe9rmino do compartilhamento":"Motivo do compartilhamento",": ").concat(l),motivoCompartilhamento:l,files:s,compartilhadoId:n,compartilhado:i,compartilhamentoRemoved:u},metadata:{veiculoId:d},empresaId:p,veiculoId:d,historyLength:0,approved:o},!1===o&&(a.declined=!0));t&&!1===o&&(a={id:t.id,empresaId:t.empresaId,history:{info:c},declined:!0});t&&!0===o&&(a={id:t.id,veiculoId:d,demandFiles:m.demandFiles,history:{},approved:o});return a}({demand:v,approved:a})).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),a){var o=m.compartilhadoId;o||(o="NULL");var r=T.a.create({baseURL:"/api"}),n={table:"veiculos",tablePK:"veiculo_id",id:v.veiculoId,requestObject:{veiculo_id:v.veiculoId,compartilhado_id:o}};r.put("/updateVehicle",n).catch((function(e){return console.log(e)})).then((function(e){return console.log(e)})),t="Compartilhamento de ve\xedculo aprovado."}else!1===a?t="Solicita\xe7\xe3o indeferida.":a||(t="Solicita\xe7\xe3o enviada.");v?setTimeout((function(){e.history.push("/solicitacoes")}),1500):setTimeout((function(){g()}),900),E(t)},toggleAcceptTerms:function(){return p(Object(h.a)(Object(h.a)({},m),{},{termsAccepted:!m.termsAccepted}))}}),r.a.createElement(ae,{open:m.confirmToast,close:E,msg:m.toastMsg})))})),Ci=t(476),ki=t.n(Ci),Di=function(e){var a=e.size,t=void 0===a?"small":a,o=e.variant,n=void 0===o?"contained":o,i=e.color,l=void 0===i?"primary":i,c=e.style,s=void 0===c?{}:c,d=e.label,u=void 0===d?"add a label":d,m=e.iconName,p=e.onClick;return r.a.createElement(oa.a,{size:t,variant:n,color:l,style:Object(h.a)({marginTop:"1rem"},s),onClick:p},m&&r.a.createElement($.a,null,m),r.a.createElement("span",{style:{margin:"0.1rem 0 0 0.4rem"}},u))},Ni=t(19),Ii=(t(430),function(e){var a=e.aviso,t=e.close,o=a.message,n=a.vocativo,i=o.intro,l=o.tableData,c=o.tableHeaders,s=o.tip,d=o.tipPath,u=o.footer,m=function(e,a){var t="",o="<tr>";return a.forEach((function(e){o+="<th>".concat(e,"</th>")})),o+="</tr>",e.forEach((function(e,a){t+="<tr>\n\n        ",Object.entries(e).forEach((function(e){var a=Object(Ke.a)(e,2),o=a[0],r=a[1];"vencimento"!==o&&"validade"!==o||(r=Ni(r).format("DD/MM/YYYY")),r instanceof Array&&(r=r.join().replace(/,/g,", ")),t+=" <td>".concat(r,"</td> ")})),t+="</tr>\n        "})),o+t}(l,c).replace(/<th>/g,'<th class= "aviso__th">').replace(/<td>/g,'<th class= "aviso__td">');return r.a.createElement("div",{className:"popUpWindow aviso__body",style:{left:"20%",right:"20%"}},r.a.createElement("h3",{className:"aviso__title"},"A/C ",n,":"),r.a.createElement("br",null),r.a.createElement("p",null,i),r.a.createElement("br",null),r.a.createElement("table",{className:"aviso__table",dangerouslySetInnerHTML:{__html:m}}),r.a.createElement("br",null),r.a.createElement("p",null,s,", acesse ",d),u,r.a.createElement(ca,{close:t}))}),Ai=t(189),Pi=t.n(Ai),Ti=(t(611),[{field:"from",title:"Remetente",label:"Remetente",render:function(e){return e.from?e.from:"Aviso autom\xe1tico do sistema"}},{field:"vocativo",title:"Destinat\xe1rio",label:"Destinat\xe1rio"},{field:"subject",title:"Assunto",label:"Assunto"},{field:"read",title:"Lida",label:"Status",hidden:!0},{field:"createdAt",title:"Data de cria\xe7\xe3o do aviso",label:"Data de cria\xe7\xe3o do aviso",type:"date",format:function(e){return e||"Nenhuma data informada"}}]),Fi=function(e){var a=e.aviso,t=e.close,o=a.from,n=a.vocativo,i=a.message;return r.a.createElement("div",{className:"popUpWindow aviso__body",style:{left:"20%",right:"20%"}},r.a.createElement("h3",{className:"aviso__title"},"A/C ",n,":"),r.a.createElement("br",null),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:i}}),r.a.createElement("br",null),r.a.createElement("p",null,"Att,",r.a.createElement("br",null),o,"."),r.a.createElement(ca,{close:t}))},zi=Pi.a.container,Mi=Pi.a.tableContainer,Li=Pi.a.avisosHeader,_i=Pi.a.avisosHeaderAdmin,qi=function(e){var a=e.data,t=e.openAviso,o=e.close,n=e.formatDataToExport,i=e.toggleReadMessage,l=e.confirmDelete,c=e.toggleSelect,s=e.showUnreadOnly,d=e.toggleNewAviso,u=e.defaultFrom,m=e.userRole,p=a.avisos,f=a.showAviso,v=a.aviso,b=a.rowsSelected,g=a.allAreUnread,E=a.unreadOnly,x="admin"===m||"tecnico"===m,S=Ti;return x||(S=Ti&&Ti.filter((function(e){return"vocativo"!==e.field}))),r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:x?_i:Li},x&&r.a.createElement(Di,{variant:"outlined",iconName:"add",label:"novo aviso",className:"none",onClick:d}),r.a.createElement(Yo,{title:"Mostrar somente avisos n\xe3o lidos",checked:E,toggleChecked:s})),r.a.createElement("main",{className:zi},r.a.createElement("div",{className:Mi},r.a.createElement(nr.a,{title:"Avisos",columns:S,data:p,components:{Row:function(e){var a=Object(h.a)({},e),t=a.data,o=a.actions.find((function(e){return"markAsRead"===e.name}));return!0===t.read?(o.icon="draftsOutlinedIcon",o.iconProps={color:"disabled",zindex:11}):(o.iconProps={color:"primary",zindex:11},o.icon="mailOutlined"),r.a.createElement(rr.MTableBodyRow,a)}},onRowClick:t,style:{fontFamily:"Segoe UI",fontSize:"14px"},icons:{Delete:r.a.forwardRef((function(e,a){return r.a.createElement(ki.a,Object.assign({style:{color:"red"}},e,{ref:a}))}))},options:{filtering:!0,selection:!0,selectionProps:{},search:!b,exportFileName:"avisos",exportButton:!0,exportCsv:function(e,a){var t=n(a);mr("avisos",Ti,t)},rowStyle:function(e){return{fontWeight:e.read?400:600}},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:20},onSelectionChange:function(e){return c(e)},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Nenhum aviso encontrado.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",nRowsSelected:"{0} avisos selecionados",exportCSVName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},actions:[{name:"markAsRead",icon:b&&g?"draftsOutlinedIcon":"mailOutlined",tooltip:b&&g?"Marcar como lida":"Marcar como n\xe3o lida",onClick:function(e,a){return i(a)},position:b?"auto":"row"},{name:"remove",icon:"deleteOutline",iconProps:{color:"error"},tooltip:"Apagar aviso",position:b?"auto":"row",onClick:function(e,a){return l(a)}}]}),f?v.from!==u&&v.from?r.a.createElement(Fi,{aviso:v,close:o}):r.a.createElement(Ii,{aviso:v,close:o}):null)))},Ri=[{label:"De",field:"from",disabled:!0},{label:"Assunto",field:"subject"}],Vi=t(133),Bi=t.n(Vi),Ui=function(){return r.a.createElement("svg",{viewBox:"0 0 18 18"},r.a.createElement("polygon",{className:"ql-fill ql-stroke",points:"6 10 4 12 2 10 6 10"}),r.a.createElement("path",{className:"ql-stroke",d:"M8.09,13.91A4.6,4.6,0,0,0,9,14,5,5,0,1,0,4,9"}))},Hi=function(){return r.a.createElement("svg",{viewBox:"0 0 18 18"},r.a.createElement("polygon",{className:"ql-fill ql-stroke",points:"12 10 14 12 16 10 12 10"}),r.a.createElement("path",{className:"ql-stroke",d:"M9.91,13.91A4.6,4.6,0,0,1,9,14a5,5,0,1,1,5-5"}))};var Yi=Vi.Quill.import("formats/size");Yi.whitelist=["extra-small","small","medium","large"],Vi.Quill.register(Yi,!0);var Ji=Vi.Quill.import("formats/font");Ji.whitelist=["arial","comic-sans","courier-new","georgia","helvetica","lucida","roboto","arial","sans-serif"],Vi.Quill.register(Ji,!0);var Ki={toolbar:{container:"#toolbar",handlers:{undo:function(){this.quill.history.undo()},redo:function(){this.quill.history.redo()}}},history:{delay:500,maxStack:100,userOnly:!0}},Wi=["header","font","size","bold","italic","underline","align","strike","background","list","bullet","indent","link","color"],Gi=function(){return r.a.createElement("div",{id:"toolbar"},r.a.createElement("span",{className:"ql-formats"},r.a.createElement("select",{className:"ql-font"},r.a.createElement("option",{value:"arial"},"Arial"),r.a.createElement("option",{value:"courier-new"},"Courier New"),r.a.createElement("option",{value:"georgia"},"Georgia"),r.a.createElement("option",{value:"helvetica"},"Helvetica"),r.a.createElement("option",{value:"roboto"},"Roboto"),r.a.createElement("option",{value:"sans-serif"},"Sans Serif")),r.a.createElement("select",{className:"ql-size",defaultValue:"medium"},r.a.createElement("option",{value:"small"},"Pequeno"),r.a.createElement("option",{value:"medium"},"M\xe9dio"),r.a.createElement("option",{value:"large"},"Grande")),r.a.createElement("select",{className:"ql-header",defaultValue:"4"},r.a.createElement("option",{value:"2"},"T\xedtulo"),r.a.createElement("option",{value:"3"},"Sub t\xedtulo"),r.a.createElement("option",{value:"4"},"Normal"))),r.a.createElement("span",{className:"ql-formats"},r.a.createElement("button",{className:"ql-bold"}),r.a.createElement("button",{className:"ql-italic"}),r.a.createElement("button",{className:"ql-underline"}),r.a.createElement("button",{className:"ql-strike"})),r.a.createElement("span",{className:"ql-formats"},r.a.createElement("button",{className:"ql-list",value:"ordered"}),r.a.createElement("button",{className:"ql-list",value:"bullet"}),r.a.createElement("button",{className:"ql-indent",value:"-1"}),r.a.createElement("button",{className:"ql-indent",value:"+1"})),r.a.createElement("span",{className:"ql-formats"},r.a.createElement("select",{className:"ql-align"}),r.a.createElement("select",{className:"ql-color"}),r.a.createElement("select",{className:"ql-background"})),r.a.createElement("span",{className:"ql-formats"},r.a.createElement("button",{className:"ql-undo"},r.a.createElement(Ui,null)),r.a.createElement("button",{className:"ql-redo"},r.a.createElement(Hi,null))))},$i=(t(714),function(e){var a=e.data,t=e.empresas,o=e.handleChange,n=e.toggleNewAviso,i=e.handleSubmit;return r.a.createElement("div",{className:"newAviso__container"},r.a.createElement("header",{className:"newAviso__bar"},r.a.createElement("span",{className:"newAviso__bar__title"},"Novo aviso"),r.a.createElement(ca,{close:n})),r.a.createElement("section",{className:"avisoInputs__container"},Ri.map((function(e,n){var i=e.field,l=e.label,c=e.autoComplete,s=e.collection,d=e.itemProp,u=e.disabled;return r.a.createElement("div",{key:n,className:"avisoInputs__inputDiv"},r.a.createElement(Xe.a,{name:i,label:l,onChange:o,className:"fk",value:a[i]||"",disabled:u,InputLabelProps:{style:{fontSize:"0.7rem",fontWeight:400,width:"100%",color:"#888",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"}},inputProps:{style:{background:u&&a.disable?"#fff":"#fafafa",fontSize:"0.85rem",color:"#000",width:"100%",height:"7px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"},list:i||"",autoComplete:"off"},variant:"filled"}),c&&r.a.createElement(We,{field:i,collection:a[s]||t,itemProp:d,value:a[i]||""}))}))),r.a.createElement("section",{className:"textEditor__container"},r.a.createElement("div",{className:"textEditor__wrapper"},r.a.createElement(Gi,null),r.a.createElement(Bi.a,{theme:"snow",className:"textEditor__editor",onChange:o,name:"avisoText",value:a.avisoText||"",modules:Ki,formats:Wi}))),r.a.createElement("footer",{className:"newAviso__footer"},r.a.createElement(Di,{label:"enviar",iconName:"send",style:{marginTop:"0.5rem"},onClick:i})))});var Xi=Object(c.c)((function(e){var a;return{avisos:null===(a=e.data)||void 0===a?void 0:a.avisos,user:e.user}}),(function(e){return Object(l.b)({deleteOne:B,editUser:le},e)}))(Ee(["avisos","empresas"],(function(e){var a,t,n,i,l=e.redux.avisos,c=null===(a=e.redux.parametros[0])||void 0===a||null===(t=a.nomes)||void 0===t?void 0:t.siglaSistema,s=null===e||void 0===e?void 0:e.user,d=s.name,u=s.role,m=(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.messagesRead)||[],p=(null===e||void 0===e||null===(i=e.user)||void 0===i?void 0:i.deletedMessages)||[],b=Object(o.useState)({unreadOnly:!1,showAviso:!1,writeNewAviso:!1,rowsSelected:!1,toast:!1,from:d}),g=Object(Ke.a)(b,2),E=g[0],x=g[1],S=Object(o.useCallback)((function(e){if("Escape"===e.key){if(E.showAviso)return void x(Object(h.a)(Object(h.a)({},E),{},{showAviso:!1}));x(Object(h.a)(Object(h.a)({},E),{},{writeNewAviso:!1}))}}),[E]);Object(o.useEffect)((function(){return document.addEventListener("keydown",S,!1),Jr(),function(){return document.removeEventListener("keydown",S,!1)}}),[S]),Object(o.useEffect)((function(){var e,a=Object(v.a)(l).sort((function(e,a){return new Date(null===a||void 0===a?void 0:a.createdAt)-new Date(null===e||void 0===e?void 0:e.createdAt)})),t=Object(F.a)(a);try{for(t.s();!(e=t.n()).done;){var o=e.value;Array.isArray(m)&&m.includes(o.id)?o.read=!0:o.read=!1}}catch(i){t.e(i)}finally{t.f()}var r=a.every((function(e){return!1===e.read})),n=E.unreadOnly;r&&x((function(e){return Object(h.a)(Object(h.a)({},e),{},{allAreUnread:!0})})),n&&(a=a.filter((function(e){return!1===e.read}))),x((function(e){return Object(h.a)(Object(h.a)({},e),{},{avisos:a})}))}),[e.redux.avisos,E.unreadOnly,m,l]);var O=function(a){var t;a instanceof Array===!1&&(a=[a]);var o,r=Object(v.a)(E.avisos),n=a.every((function(e){return!1===e.read})),i=a.map((function(e){return e.id}));o=!!n,(null===(t=a)||void 0===t?void 0:t.length)>1&&x(Object(h.a)(Object(h.a)({},E),{},{allAreUnread:n}));var l,c=Object(F.a)(r);try{for(c.s();!(l=c.n()).done;){var s=l.value;i.includes(s.id)&&(s.read=o)}}catch(f){c.e(f)}finally{c.f()}var d=e.user,u=d.id,m=d.cpf,p=r.filter((function(e){return!0===e.read})).map((function(e){return e.id}));T.a.patch("/api/avisos/changeReadStatus",{id:u,cpf:m,messagesRead:p}).catch((function(e){throw alert(null===e||void 0===e?void 0:e.message),new Error(e)})),e.editUser(Object(h.a)(Object(h.a)({},e.user),{},{messagesRead:p}))},y=function(){var a=e.user,t=a._id,o=a.id,r=a.cpf,n=E.idsToDelete,i=[].concat(Object(v.a)(n),Object(v.a)(p));T.a.patch("/api/avisos/deleteUserMessages",{id:o||t,cpf:r,deletedMessages:i});var l,c=Object(F.a)(n);try{for(c.s();!(l=c.n()).done;){var s=l.value;e.deleteOne(s,"id","avisos")}}catch(d){c.e(d)}finally{c.f()}e.editUser(Object(h.a)(Object(h.a)({},e.user),{},{deletedMessages:i})),x(Object(h.a)(Object(h.a)({},E),{},{openConfirmDialog:!1,rowsSelected:!1}))},j=function(){return x(Object(h.a)(Object(h.a)({},E),{},{writeNewAviso:!E.writeNewAviso}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(qi,{avisos:E.avisos,data:E,userRole:u,defaultFrom:c,formatDataToExport:function(e){return e instanceof Array&&e.forEach((function(e){!0===e.read&&(e.read="Lida"),!1===e.read&&(e.read="N\xe3o lida"),delete e.message})),e},showUnreadOnly:function(){return x(Object(h.a)(Object(h.a)({},E),{},{unreadOnly:!E.unreadOnly}))},openAviso:function(e,a){var t,o=null===a||void 0===a||null===(t=a.tableData)||void 0===t?void 0:t.id,r=E.avisos[o];r&&!(null===r||void 0===r?void 0:r.read)&&O(a),r.from!==c&&r.from||!r.message||"string"!==typeof r.message||(r.message=JSON.parse(r.message)),x(Object(h.a)(Object(h.a)({},E),{},{aviso:r,showAviso:!0}))},toggleReadMessage:O,close:function(){return x(Object(h.a)(Object(h.a)({},E),{},{showAviso:!E.showAviso}))},confirmDelete:function(e){e instanceof Array===!1&&(e=[e]);var a=e.map((function(e){return e.id}));x(Object(h.a)(Object(h.a)({},E),{},{openConfirmDialog:!0,confirmType:"delete",idsToDelete:a}))},deleteAviso:y,toggleSelect:function(e){e.some((function(e){var a;return null===(a=e.tableData)||void 0===a?void 0:a.checked}))?x(Object(h.a)(Object(h.a)({},E),{},{rowsSelected:!0})):x(Object(h.a)(Object(h.a)({},E),{},{rowsSelected:!1}))},toggleNewAviso:j}),E.writeNewAviso&&("admin"===u||"tecnico"===u)&&r.a.createElement($i,{empresas:e.redux.empresas,data:E,handleChange:function(e){if("string"===typeof e)x(Object(h.a)(Object(h.a)({},E),{},{avisoText:e}));else{var a=e.target,t=a.name,o=a.value;x(Object(h.a)(Object(h.a)({},E),{},Object(f.a)({},t,o)))}},toggleNewAviso:j,handleSubmit:function(){var a,t=E.to,o=E.subject,r=E.avisoText,n=t,i=e.user;"admin"===i.role&&(a="Administrador do sistema"),"tecnico"===i.role&&(a="Equipe t\xe9cnica");var l={from:a,to:t,vocativo:n,subject:o,message:r};T.a.post("/api/avisos/userAlerts/?type=saveAlert",l).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),x(Object(h.a)(Object(h.a)({},E),{},{writeNewAviso:!1,toast:!0,subject:void 0,avisoText:void 0}))}}),E.openConfirmDialog&&r.a.createElement(It,{open:E.openConfirmDialog,close:function(){return x(Object(h.a)(Object(h.a)({},E),{},{openConfirmDialog:!1}))},confirm:y,type:E.confirmType,id:E.idToDelete}),r.a.createElement(ae,{open:E.toast,close:function(){return x(Object(h.a)(Object(h.a)({},E),{},{toast:!E.toast}))},msg:"Aviso criado com sucesso."}))}))),Zi=function(e){var a=e.user;return r.a.createElement(O.d,null,r.a.createElement(O.b,{exact:!0,path:"/",component:Oe}),r.a.createElement(O.b,{path:"/veiculos",exact:!0,component:Ae}),r.a.createElement(O.b,{path:"/veiculos/cadastro",exact:!0,component:st}),r.a.createElement(O.b,{path:"/veiculos/altDados",exact:!0,component:vt}),r.a.createElement(O.b,{path:"/veiculos/seguros",exact:!0,component:Nt}),r.a.createElement(O.b,{path:"/veiculos/compartilhamento",exact:!0,component:wi}),r.a.createElement(O.b,{path:"/veiculos/laudos",exact:!0,component:Oo}),r.a.createElement(O.b,{path:"/veiculos/baixaVeiculo",exact:!0,component:Lo}),r.a.createElement(O.b,{path:"/veiculos/config",exact:!0,component:or}),r.a.createElement(O.b,{path:"/consultas",component:$r}),r.a.createElement(O.b,{path:"/empresas",exact:!0,component:cn}),r.a.createElement(O.b,{path:"/altContrato",exact:!0,component:ni}),r.a.createElement(O.b,{path:"/empresas/cadastro",component:nn}),r.a.createElement(O.b,{path:"/empresas/socios",component:Dn}),r.a.createElement(O.b,{path:"/empresas/procuradores",component:kn}),r.a.createElement(O.b,{path:"/relatorios",component:Mn}),r.a.createElement(O.b,{path:"/crv",component:Vr}),r.a.createElement(O.b,{path:"/solicitacoes",exact:!0,component:Wn}),r.a.createElement(O.b,{path:"/solicitacoes/cadastro",exact:!0,component:st}),r.a.createElement(O.b,{path:"/solicitacoes/altDados",exact:!0,component:vt}),r.a.createElement(O.b,{path:"/solicitacoes/seguros",exact:!0,component:Nt}),r.a.createElement(O.b,{path:"/solicitacoes/compartilhamento",exact:!0,component:wi}),r.a.createElement(O.b,{path:"/solicitacoes/baixaVeiculo",exact:!0,component:Lo}),r.a.createElement(O.b,{path:"/solicitacoes/laudos",exact:!0,component:Oo}),r.a.createElement(O.b,{path:"/solicitacoes/altContrato",exact:!0,component:ni}),r.a.createElement(O.b,{path:"/solicitacoes/socios",exact:!0,component:Dn}),r.a.createElement(O.b,{path:"/solicitacoes/procuradores",exact:!0,component:kn}),r.a.createElement(O.b,{path:"/userAuth",exact:!0,component:pi}),r.a.createElement(O.b,{path:"/editAccount",exact:!0,component:Ei}),r.a.createElement(O.b,{path:"/avisos",exact:!0,component:Xi}),r.a.createElement(O.b,{path:"/parametros"},"admin"===a.role?r.a.createElement(ar,null):r.a.createElement(O.a,{to:"/"})),r.a.createElement(O.b,{path:"/users"},"admin"===a.role?r.a.createElement(hi,null):r.a.createElement(O.a,{to:"/"})))},Qi=t(754);var el=Object(c.c)((function(e){return Object(h.a)({},e)}))((function(e){var a=re("loggedIn").length>0,t=e.user;return a?r.a.createElement("div",{className:"app"},r.a.createElement(Qi.a,{maxWidth:"lg",style:{minHeight:"100vh"}},r.a.createElement(S.a,null,r.a.createElement(jr,null),r.a.createElement(Zi,{user:t})),r.a.createElement(wr,null))):r.a.createElement(pi,null)})),al=Object(l.a)(d.a,m.a,p.a)(l.e)(x,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var tl=function(){return r.a.createElement(c.a,{store:al},r.a.createElement(el,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(tl,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[485,1,2]]]);
//# sourceMappingURL=main.58130451.chunk.js.map