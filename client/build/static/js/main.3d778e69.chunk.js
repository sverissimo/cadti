/*! For license information please see main.3d778e69.chunk.js.LICENSE.txt */
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{165:function(e,t,a){e.exports={jumbotron:"veiculosHome_jumbotron__3NqZq",card:"veiculosHome_card__dn84Q",card__container:"veiculosHome_card__container__3mnvT",card__image:"veiculosHome_card__image___Ethh",card__text:"veiculosHome_card__text__2qLQG"}},196:function(e,t,a){e.exports={container:"avisos_container__32-XQ",tableContainer:"avisos_tableContainer__1vxH2","MuiIconButton-colorSecondary":"avisos_MuiIconButton-colorSecondary__10neS",avisosHeader:"avisos_avisosHeader__CGb6M",avisosHeaderAdmin:"avisos_avisosHeaderAdmin__2DIUq"}},214:function(e,t,a){},344:function(e,t,a){e.exports={termoCiencia__div:"compartilhamento_termoCiencia__div__17vbm",termoCiencia__text:"compartilhamento_termoCiencia__text__1d2i0"}},424:function(e,t,a){},459:function(e,t){},460:function(e,t,a){},461:function(e,t,a){},517:function(e,t,a){e.exports=a(786)},572:function(e,t){},575:function(e,t,a){},581:function(e,t,a){},582:function(e,t,a){},583:function(e,t,a){},584:function(e,t,a){},673:function(e,t){},674:function(e,t){},675:function(e,t,a){},676:function(e,t,a){},678:function(e,t,a){},679:function(e,t,a){},680:function(e,t,a){},681:function(e,t,a){},682:function(e,t,a){},785:function(e,t,a){},786:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(25),i=a.n(o),c=a(54),l=a(40),s=a(489),u=a.n(s),d=a(490),f=a.n(d),p=a(508),m=a(7),h=a(20),v=a(2),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"GET_DATA":return Object(v.a)(Object(v.a)({},e),r);case"INSERT_DATA":var n=r.collection,o=r.data;if(e[n]&&o){var i=Object(h.a)(e[n]);return o.forEach((function(e){n.match("logs")?i.push(e):i.unshift(e)})),Object(v.a)(Object(v.a)({},e),{},Object(m.a)({},n,i))}return e;case"UPDATE_DATA":var c=r.collection,l=r.data,s=r.id;if(console.log("\ud83d\ude80 ~ file: dataReducer.js:31 ~ dataReducer ~ payload",r),e[c]&&l){var u=e[c].map((function(e){return l.forEach((function(t){e[s]!==t[s]&&e[s].toString()!==t[s].toString()||(e=t)})),e}));return Object(v.a)(Object(v.a)({},e),{},Object(m.a)({},c,u))}return e;case"UPDATE_COLLECTION":var d=r.data,f=r.collection;return Object(v.a)(Object(v.a)({},e),{},Object(m.a)({},f,d));case"REMOVE_FROM_INSURANCE":var p=r.apolice,g=r.placaIndex,b=r.vehicleIndex;if(e.seguros){var y=Object(h.a)(e.seguros),E=y.find((function(e){return e.apolice===p})),x=y.findIndex((function(e){return e.apolice===p}));return E.placas.splice(g,1),E.veiculos.splice(b,1),y[x]=E,Object(v.a)(Object(v.a)({},e),{},{seguros:y})}return e;case"DELETE_ONE":var w=r.tablePK,O=r.collection;if(e[O]){var S=r.id,j=Object(h.a)(e[O]);if(!S)return;O.match("Docs")||"users"===O||"avisos"===O||(S=Number(S)),"laudos"===O&&(S=S.toString()),console.log("\ud83d\ude80 ~ file: dataReducer.js ~ line 83 ~ dataReducer ~ updatedData",{id:S,updatedData:j});var L=j.find((function(e){return e[w]===S})),k=j.findIndex((function(e){return e[w]===L[w]}));if(-1===k)return;return j.splice(k,1),Object(v.a)(Object(v.a)({},e),{},Object(m.a)({},O,j))}return e;case"SET_COLOR":return Object(v.a)(Object(v.a)({},e),{},{setColor:t.payload});case"LOADING":return Object(v.a)(Object(v.a)({},e),{},{loading:t.payload});default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"LOG_USER":return Object(v.a)(Object(v.a)({},e),r);case"LOG_USER_OUT":return Object(v.a)(Object(v.a)({},e),{},{user:r});default:return e}},y=Object(c.c)({data:g,user:b}),E=function(e,t){return"LOG_USER_OUT"===t.type&&(e={data:{},user:{}}),y(e,t)},x=a(59),w=a(42),O=a(35),S=a(10),j=a(48),L=a(49),k=a(51),C=a(50),N=a(24),P=a.n(N),I=a(13),D=a.n(I),A=a(39),_=function(e,t,a){var r=[],n=[];return e.map((function(e){(null===e||void 0===e?void 0:e.equipamentosId)||(e.equipamentosId=[]),(null===e||void 0===e?void 0:e.acessibilidadeId)||(e.acessibilidadeId=[]),e.equipamentosId.forEach((function(e){t.forEach((function(t){var a=t.id,n=t.item;a===e&&r.push(n)}))})),e.acessibilidadeId.forEach((function(e){a.forEach((function(t){var a=t.id,r=t.item;a===e&&n.push(r)}))}));var o=Object(v.a)(Object(v.a)({},e),{},{equipamentos:r,acessibilidade:n});return r=[],n=[],o}))},T=function(e,t){var a=[];return t.forEach((function(t){e.forEach((function(e){var r=e.id,n=e.item;t===r&&a.push(n)}))})),a};function F(){F=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(){var t=Object(S.a)(F().mark((function t(a,r){var n,o,i,c,l,s,u,d,f,p,g,b,y,E,x,w;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],o={},!(e.length>0)){t.next=5;break}return e.forEach((function(e){n.push(D.a.get("/api/".concat(e)))})),t.next=5,Promise.all(n).then((function(e){return e.map((function(e){return P.a.camelizeKeys(e.data)}))})).then((function(t){t.forEach((function(t,a){var r=e[a].replace("getFiles/","").replace("lookUpTable/","").replace("logs/","");r=P.a.camelize(r),Object.assign(o,Object(m.a)({},r,t))}))})).catch((function(e){var t;console.log(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data),o=Object(v.a)(Object(v.a)({},o),{},{sessionExpired:!0})}));case 5:if(["acessibilidade","equipamentos"].every((function(e){return o.hasOwnProperty(e)}))&&(l=(c=o).acessibilidade,s=c.equipamentos,u=o.veiculos||(null===(i=r().data)||void 0===i?void 0:i.veiculos),d=_(u,s,l),o.veiculos=d),o.veiculos&&o.veiculos.length&&e.includes("laudos")){f=o.laudos||[],p=Object(A.a)(o.veiculos);try{for(p.s();!(g=p.n()).done;){b=g.value,y=Object(A.a)(f);try{for(y.s();!(E=y.n()).done;)x=E.value,b.veiculoId===x.veiculoId&&(b.numeroLaudo=x.id,b.empresaLaudo=x.empresaLaudo,b.vencimentoLaudo=x.validade)}catch(O){y.e(O)}finally{y.f()}}}catch(O){p.e(O)}finally{p.f()}}o.socios&&Array.isArray(o.socios)&&((w=Object(h.a)(o.socios)).forEach((function(e){if(e.empresas&&"string"===typeof e.empresas)if(e.empresas.match("object"))console.log(e);else try{e.empresas=JSON.parse(e.empresas)}catch(t){console.log("invalid socio id"+e.socioId+t.message)}})),o.socios=w),a({type:"GET_DATA",payload:o});case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},M=function(e,t){return function(a,r){var n=P.a.camelizeKeys(e);console.log("\ud83d\ude80 ~ file: dataActions.js ~ line 73 ~ insertData ~ data",n);var o={collection:t,data:n},i=r().data.seguradoras;if("socios"===t&&n.forEach((function(e){if(e.empresas&&"string"===typeof e.empresas)if(e.empresas.match("object"))console.log(e);else try{e.empresas=JSON.parse(e.empresas)}catch(t){console.log("invalid socio id"+e.socioId+t.message)}})),i){if("veiculos"===t&&n[0]){var c,s,u=r().data,d=u.acessibilidade,f=u.equipamentos,p=[],m=[];(null===(c=n[0])||void 0===c?void 0:c.equipamentosId)&&n[0].equipamentosId.forEach((function(e){f.forEach((function(t){var a=t.id,r=t.item;e.toString()===a.toString()&&p.push(r)}))})),(null===(s=n[0])||void 0===s?void 0:s.acessibilidadeId)&&n[0].acessibilidadeId.forEach((function(e){d.forEach((function(t){var a=t.id,r=t.item;e.toString()===a.toString()&&m.push(r)}))})),n[0].equipamentos=p,n[0].acessibilidade=m}if("seguros"===t&&n[0]&&n[0].placas&&1===n[0].placas.length){var h=i.find((function(e){return e.id===n[0].seguradoraId})),v=n[0],g=[],b=[],y=r().data.veiculos,E=y.map((function(e){return e.apolice===v.apolice&&(e.seguradora=h.seguradora,e.dataEmissao=v.dataEmissao,e.vencimento=v.vencimento),e}));y.forEach((function(e){e.apolice===v.apolice&&(g.push(e.placa),b.push(e.veiculoId))})),v.placas=g,v.veiculos=b,v=[v];var x={data:E,collection:"veiculos"};Object(l.b)((function(){a({type:"INSERT_DATA",payload:{data:v,collection:"seguros"}}),a({type:"UPDATE_COLLECTION",payload:x})}))}else a({type:"INSERT_DATA",payload:o})}else a({type:"INSERT_DATA",payload:o})}},q=function(e,t,a){return function(r,n){var o=P.a.camelizeKeys(e);a=P.a.camelize(a);var i=n().data,c=i.equipamentos,l=i.acessibilidade;"veiculos"===t&&c&&l&&(o=_(o,c,l)),r({type:"UPDATE_DATA",payload:{collection:t,data:o,id:a}})}},R=function(e,t,a,r){return function(n,o){var i=o().data[a];if(e&&e[0]&&t){var c=i.filter((function(t){return e.some((function(e){return e===t[r]}))}));c.forEach((function(e){var a=Object.assign({},e.metadata,t);e.metadata=a})),n({type:"UPDATE_DATA",payload:{collection:a,data:c,id:r}})}}},V=function(e,t){return function(a){var r={data:e=P.a.camelizeKeys(e),collection:t};"socios"===t&&e.forEach((function(e){if(e.empresas&&"string"===typeof e.empresas)if(e.empresas.match("object"))console.log(e);else try{e.empresas=JSON.parse(e.empresas)}catch(t){console.log("invalid socio id"+e.socioId+t.message)}})),a({type:"UPDATE_COLLECTION",payload:r})}},G=function(e,t,a){return function(r){t=P.a.camelize(t),r({type:"DELETE_ONE",payload:{id:e,tablePK:t,collection:a}})}},B=function(){return n.a.createElement("div",{className:"loading"},n.a.createElement("img",{src:"/images/loading.gif",alt:"",height:"60px",width:"60px"}),n.a.createElement("p",null," Carregando... "))},U=a(3),Y=a(157),H=a(408),J=a(787),W=a(409),K=a(810),$=a(407),X=["className","message","onClose","variant"],Z=Object($.a)((function(e){return{success:{backgroundColor:Y.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:H.a[700]},message:{display:"flex",alignItems:"center"}}}));function Q(e){var t=Z(),a=e.className,r=e.message,o=(e.onClose,e.variant),i=Object(O.a)(e,X);return n.a.createElement(J.a,Object.assign({className:Object(U.a)(t[o],a),"aria-describedby":"client-snackbar",message:r&&"string"===typeof r&&n.a.createElement("span",{id:"client-snackbar",className:t.message},n.a.createElement(W.a,null,"error"===e.variant?"close":"warning"===e.variant?"error_outlined":"check"),"    ",r)},i))}function ee(e){return n.a.createElement("div",null,n.a.createElement(K.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.open,autoHideDuration:1500,onClose:e.close},n.a.createElement(Q,{variant:e.status||"success",message:e.msg})))}function te(e,t){var a=new Date;a.setTime(a.getTime()+36e5),a=a.toUTCString(),document.cookie="".concat(e,"=").concat(t,"; expires=").concat(a,"; path=/")}function ae(e){var t=new Date;t.setTime(10),document.cookie="".concat(e,"=; expires=").concat(t.toUTCString(),"; path=/")}function re(e){for(var t=e+"=",a=document.cookie.split(";"),r=0;r<a.length;r++){for(var n=a[r];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return""}function ne(){ne=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var oe=function(e){return function(t){t({type:"LOG_USER",payload:e})}},ie=function(e){return function(t){t({type:"LOG_USER",payload:e})}},ce=function(){return function(){var e=Object(S.a)(ne().mark((function e(t){return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/auth/logout",{method:"GET",credentials:"same-origin"}).then((function(e){ae("loggedIn")})).catch((function(e){return console.log(e)}));case 2:t({type:"LOG_USER_OUT"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},le=function(e,t){if(e&&t){var a=[],r="Os seguintes campos s\xe3o de preenchimento obrigat\xf3rio: ";return e.forEach((function(e){var n=t[e.field];(null===e||void 0===e?void 0:e.disabled)||e.notRequired||n&&""!==n||(r+="".concat(e.label,", "),a.push(e.field))})),r=r.substr(0,r.length-2),a.length?{openAlertDialog:!0,alertType:"inputError",customMsg:r,customMessage:r,customTitle:"Preenchimento obrigat\xf3rio."}:null}},se=a(19),ue=a.n(se),de=function(e,t){var a=document.querySelectorAll("p"),r=document.querySelectorAll("input"),n=[],o=[],i="Favor verificar o preenchimento dos seguintes campos: ";return a&&a.forEach((function(e){if("Valor inv\xe1lido"===e.textContent||"\u2718"===e.textContent){var t=e.parentNode.querySelectorAll("label");n.push(t[0])}})),r&&!t&&r.forEach((function(e){if("date"===e.type&&"dataJunta"!==e.name&&!ue()(e.value,"YYYY-MM-DD",!0).isValid()){var t=e.parentNode.previousSibling;n.push(t)}})),n[0]?(n.forEach((function(e){return o.push(e.textContent)})),o.forEach((function(e){return i+=e+", "})),i=i.replace("(kg)","").replace("(cm)","").slice(0,-2)+".",e?{openAlertDialog:!0,alertType:"inputError",customTitle:"Preenchimento Inv\xe1lido,",customMsg:i,customMessage:i,errors:o}:o):null},fe=function(e,t){var a;if(e)return(!t.errorHandler||!t.errorHandler(e))&&(!(!e||!t.errorHandler||t.errorHandler(e))||((null===(a=e)||void 0===a?void 0:a.length)<(null===t||void 0===t?void 0:t.minLength)||("number"===t.type?e>t.max||e<t.min:("string"!==typeof e&&(e=e.toString()),!!t.pattern&&null===e.match(t.pattern)))))},pe=function(e,t){var a,r;if(e)return t.errorHandler&&t.errorHandler(e)?"\u2713":e&&t.errorHandler&&!t.errorHandler(e)||(null===(a=e)||void 0===a?void 0:a.length)<(null===t||void 0===t?void 0:t.minLength)?"\u2718":(null===(r=e)||void 0===r?void 0:r.length)>=(null===t||void 0===t?void 0:t.minLength)?"\u2713":("string"!==typeof e&&(e=e.toString()),e>t.max||e<t.min?"Valor inv\xe1lido":null===e.match(t.pattern)?"\u2718":t.pattern&&null!==e.match(t.pattern)?"\u2713":" ")},me=[{collection:"equipamentos",field:"item",label:"Equipamentos",name:"equipamentosId",table:"equipamentos"},{collection:"acessibilidade",field:"item",label:"Itens de acessibilidade",name:"acessibilidadeId",table:"acessibilidade"},{collection:"marcaCarroceria",field:"marca",label:"Marcas de Carroceria",name:"marcaCarroceria",table:"marca_carroceria"},{collection:"carrocerias",field:"modelo",label:"Modelos de Carroceria",name:"modeloCarroceria",table:"modelo_carroceria"},{collection:"marcaChassi",field:"marca",label:"Marcas de Chassi",name:"marcaChassi",table:"marca_chassi"},{collection:"modelosChassi",field:"modeloChassi",label:"Modelos de Chassi",name:"modeloChassi",table:"modelo_chassi"},{collection:"seguradoras",field:"seguradora",label:"Seguradoras",name:"seguradora",table:"seguradoras"},{collection:"empresasLaudo",field:"empresa",label:"Empresas certificadas INMETRO",name:"empresa",table:"empresa_laudo"},{label:"Motivos para baixa do ve\xedculo"},{collection:"laudos",table:"laudos"}],he=a(546),ve="localhost"===window.location.hostname?{env:"development",webSocketHost:"ws://localhost:3001/"}:{env:"production",webSocketHost:"wss://www.cadti.mg.gov.br:80/",options:{secure:!0}},ge=ve.webSocketHost,be=ve.options,ye=function(e){var t,a=e.insertData,r=e.updateData,n=(e.updateCollection,e.deleteOne),o=e.updateDocs,i=e.user,c=e.editUser;return t||(t=he({url:ge,options:be})),t.on("connect",(function(){return t.emit("userDetails",i)})),t.on("insertElements",(function(e){var t=e.data,r=e.collection;return a(t,r)})),t.on("addElements",(function(e){var t=e.insertedObjects,r=e.table,n=me.find((function(e){return e.table===r})).collection;a(t,n)})),t.on("updateAny",(function(e){var t=e.data,a=e.collection,n=e.primaryKey;return r(t,a,n)})),t.on("updateDocs",(function(e){var t=e.ids,a=e.metadata,r=e.collection,n=e.primaryKey;return o(t,a,r,n)})),t.on("updateUser",(function(e){return c(e)})),t.on("deleteOne",(function(e){var t=e.id,a=e.tablePK,r=e.collection;console.log({id:t,tablePK:a,collection:r}),n(t,a,r)})),t.on("insertFiles",(function(e){var t=e.insertedObjects,r=e.collection;a(t,r)})),t},Ee=["user","editUser"];function xe(){xe=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var we=function(e,t){var a=[];["logs","parametros","avisos"].forEach((function(t){e.includes(t)||e.push(t)})),a=e.map((function(e){return e.replace("getFiles/","").replace("lookUpTable/","")}));var r=function(r){Object(k.a)(i,r);var o=Object(C.a)(i);function i(){var e;Object(j.a)(this,i);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=o.call.apply(o,[this].concat(a))).state={confirmToast:!1},e.quitFn=function(t){t.ctrlKey&&17===t.keyCode&&e.props.logUserOut()},e.getUser=Object(S.a)(xe().mark((function t(){var a,r;return xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.a.get("/api/users/getUser");case 2:a=t.sent,(r=null===a||void 0===a?void 0:a.data)&&e.props.logUser(r);case 5:case"end":return t.stop()}}),t)}))),e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e}return Object(L.a)(i,[{key:"componentDidMount",value:function(){var t=Object(S.a)(xe().mark((function t(){var a,r,n,o,i,c,l=this;return xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(document.addEventListener("keypress",(function(e){return l.quitFn(e)})),a=this.props.redux,r=[],e.forEach((function(e){var t=e.replace("getFiles/","").replace("lookUpTable/","").replace("logs/","");a[t]&&a[t][0]||r.push(e)})),!r[0]){t.next=7;break}return t.next=7,this.props.getData(r);case 7:n=this.props,o=n.user,i=n.editUser,c=Object(O.a)(n,Ee),this.socket=ye(Object(v.a)(Object(v.a)({},c),{},{user:o,editUser:i}));case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e;document.removeEventListener("keypress",this.quitFn),(null===(e=this.socket)||void 0===e?void 0:e.connected)&&(this.socket.off(),this.socket.disconnect(),this.socket=void 0)}},{key:"render",value:function(){var e=this;return re("loggedIn").length>0&&!this.props.redux.sessionExpired?(this.props.user.name||this.getUser(),0!==(a=a.map((function(e){return P.a.camelize(e)}))).length&&a.every((function(t){return e.props.redux.hasOwnProperty(t)}))?n.a.createElement(t,Object.assign({},this.props,{checkBlankInputs:le,checkInputErrors:de})):n.a.createElement(B,null)):(setTimeout((function(){e.props.history instanceof Array&&e.props.history.push("/"),e.props.logUserOut()}),1200),n.a.createElement(ee,{open:!0,close:this.toast,msg:"Sess\xe3o expirada.",status:"error"}))}}]),i}(n.a.Component);return Object(l.c)((function(e){return{redux:Object(v.a)({},e.data),user:e.user}}),(function(e){return Object(c.b)({getData:z,insertData:M,updateData:q,updateCollection:V,deleteOne:G,updateDocs:R,logUser:oe,editUser:ie,logUserOut:ce},e)}))(r)},Oe=(a(575),[{title:"Ve\xedculos",date:"07/Nov",description:"Cadastre e altere os dados do ve\xedculo ou solicite sua baixa",link:"/veiculos",imageUrl:"/images/vehicles.jpg"},{title:"Empresas",date:"07/Nov",description:"Cadastre e gerencie dados de empresas, s\xf3cios e procuradores",link:"/empresas",imageUrl:"/images/empresas12.jpg"},{title:"Consultas",date:"03/Dez",description:"Consulte e gerencie dados de ve\xedculos, seguros e empresas",link:"/consultas",imageUrl:"/images/consultas2.jpg"},{title:"Relat\xf3rios",date:"03/Dez",description:"Acompanhe a situa\xe7\xe3o dos ve\xedculos por meio de gr\xe1ficos e tabelas",link:"/relatorios",imageUrl:"/images/relatorios.jpg"}]),Se={nomeSistema:"Sistema de Cadastro do Transporte Intermunicipal de Minas Gerais",siglaSistema:"CadTI - MG"};var je=we(["logs","parametros","avisos"],(function(e){var t=e.redux.parametros[0].nomes;t&&(Se.nomeSistema=null===t||void 0===t?void 0:t.sistema,Se.siglaSistema=null===t||void 0===t?void 0:t.siglaSistema);var a=Se.nomeSistema,r=Se.siglaSistema;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{minHeight:"83vh",width:"100%",height:"auto"}},n.a.createElement("main",{className:"homeMainPost"},n.a.createElement("h1",null,r),n.a.createElement("h2",null,a)),n.a.createElement("section",{className:"homeCardsContainer"},Oe.map((function(e,t){var a=e.link,r=e.title,o=e.description,i=e.imageUrl;return n.a.createElement("div",{key:t,className:"homeCard"},n.a.createElement(x.b,{to:a,style:{textDecoration:"none"}},n.a.createElement("div",{className:"homeCard"},n.a.createElement("div",{className:"homeCardText"},n.a.createElement("h6",{className:"homeCardText",style:{fontWeight:500}},r),n.a.createElement("p",{className:"homeCardText"},o)),n.a.createElement("div",{className:"homeImage"},n.a.createElement("img",{src:i,alt:r,className:"homeImage"})))))})))))})),Le=a(165),ke=a.n(Le),Ce=[{title:"Cadastro de Ve\xedculos",description:"Cadastrar um novo ve\xedculo no sistema",imageUrl:"/images/add_new.jpg",link:"/cadastro"},{title:"Altera\xe7\xe3o de dados",description:"Alterar dados de um ve\xedculo",link:"/altDados",imageUrl:"/images/pen.png"},{title:"Seguros",description:"Cadastro e atualiza\xe7\xe3o de seguro",link:"/seguros",imageUrl:"/images/car_insurance2.png"},{title:"Compartilhamento",description:"Gerenciar compartilhamento do ve\xedculo",link:"/compartilhamento",imageUrl:"/images/shareVehicle2.png"},{title:"Laudos",description:"Laudos de seguran\xe7a veicular",link:"/laudos",imageUrl:"/images/laudos.png"},{title:"Baixa",description:"Baixa de ve\xedculos",link:"/baixaVeiculo",imageUrl:"/images/remove_doc.png"},{title:"Configura\xe7\xf5es",description:"Chassi, carrocerias, seguradoras, etc",link:"/config",imageUrl:"/images/config2.jpg"}],Ne=ke.a.jumbotron,Pe=ke.a.card,Ie=ke.a.card__image,De=ke.a.card__container,Ae=ke.a.card__text;var _e=we([],(function(e){var t=e.match,a=e.user;return n.a.createElement("div",null,n.a.createElement("section",{className:Ne},n.a.createElement("h1",null,"Ve\xedculos"),n.a.createElement("p",null,"Selecione uma das op\xe7\xf5es abaixo.")),n.a.createElement("section",{className:Pe},Ce.map((function(e,r){var o=e.title,i=e.link,c=e.imageUrl,l=e.description;return"admin"!==(null===a||void 0===a?void 0:a.role)&&"/config"===i?null:n.a.createElement(x.b,{to:t.url+i,key:r,className:De},n.a.createElement("span",{className:Ie}," ",n.a.createElement("img",{src:c,alt:o})," "),n.a.createElement("div",{className:Ae},n.a.createElement("h3",null,o),n.a.createElement("p",null," ",l)))}))))})),Te=a(84),Fe=function(e,t){var a,r,n=t.veiculos,o=t.empresas,i=t.vehicleDocs,c=t.equipamentos,l=t.acessibilidade,s=null===e||void 0===e?void 0:e.history,u=n.find((function(t){return t.veiculoId===e.veiculoId})),d=JSON.parse(JSON.stringify(u)),f=o.find((function(t){return t.razaoSocial===(null===e||void 0===e?void 0:e.empresa)})),p=null===f||void 0===f?void 0:f.razaoSocial,m=p,h=Object(v.a)({},u)||null;if(Array.isArray(s)&&(r=null===(a=s.reverse().find((function(e){return e.hasOwnProperty("alteracoes")})))||void 0===a?void 0:a.alteracoes),r){Object.keys(r).forEach((function(e){return h[e]=r[e]}));var g=r,b=g.equipamentosId,y=g.acessibilidadeId;b&&(h.equipamentos=T(c,b)),y&&(h.acessibilidade=T(l,y))}var E,x=[],w=[],O={};s.filter((function(e){return e.files})).map((function(e){return e.files})).forEach((function(e){e.forEach((function(e){return x.push(e)}))})),E=i.filter((function(e){return-1!==x.indexOf(e.id)}));var S=[];return E.forEach((function(e){var t=e.metadata.fieldName;S.includes(t)?O[t].push(e):(S.push(t),O[t]=[e])})),Object.keys(O).forEach((function(e){var t;t=O[e].reduce((function(e,t){return new Date(e.uploadDate)>new Date(t.uploadDate)?e:t})),w.push(t),t=[]})),Object(v.a)(Object(v.a)({},h),{},{originalVehicle:d,delegatario:m,razaoSocial:p,selectedEmpresa:f,demand:e,demandFiles:w,alteracoes:r,getUpdatedValues:ze})};function ze(e,t){return Object.keys(t).forEach((function(a){t[a]&&e[a]&&("equipamentosId"!==a&&"acessibilidadeId"!==a||t[a].sort((function(e,t){return e-t})),t[a].toString()===e[a].toString()&&delete t[a]),""!==t[a]&&"null"!==t[a]&&t[a]||delete t[a]})),t}function Me(){Me=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var qe=function(e){if(e[0].size>3145728)return alert("Arquivo excedeu o limite permitido (3MB)"),!0},Re=function(e,t,a){var r=new FormData;if(e&&e[0]){if(qe(e))return;return a.forEach((function(e){for(var a in console.log(e.name),t)a.match(e.name)&&t[e.name]&&r.set(e.name,t[e.name])})),{form:r}}},Ve=function(){var e=Object(S.a)(Me().mark((function e(t){var a,r,n,o,i,c,l,s,u,d,f,p,m=arguments;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.length>1&&void 0!==m[1]?m[1]:{},o=m.length>2?m[2]:void 0,i=m.length>3?m[3]:void 0,!(t instanceof FormData)){e.next=13;break}s=new FormData,n.tempFile=!o,console.log(n),s.append("metadata",JSON.stringify(n)),u=Object(A.a)(t);try{for(u.s();!(d=u.n()).done;)f=d.value,s.set(f[0],f[1]),console.log("\ud83d\ude80 ~ file: handleFiles.js ~ line 49 ~ postFilesReturnIds ~ pair[0], pair[1]",f[0],f[1])}catch(h){u.e(h)}finally{u.f()}return e.next=12,D.a.post("/api/".concat(i),s);case 12:c=e.sent;case 13:if(!(null===(a=c)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.file)){e.next=19;break}return p=c.data.file,l=p.map((function(e){return e.id})),e.abrupt("return",l);case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(S.a)(Me().mark((function e(t,a){var r,n,o,i,c,l,s;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.files,n=t.demandFiles,o={tempFile:!1},(null===t||void 0===t?void 0:t.metadata)instanceof Object&&(o=Object.assign(t.metadata,o)),n&&n[0])i=n.map((function(e){return e.id}));else if(r instanceof FormData){c=Object(A.a)(r);try{for(s=function(){var e=l.value;n.forEach((function(t,a){var r;e[0]===(null===t||void 0===t||null===(r=t.metadata)||void 0===r?void 0:r.fieldName)&&n.splice(a,1)}))},c.s();!(l=c.n()).done;)s()}catch(u){c.e(u)}finally{c.f()}i=n.map((function(e){return e.id}))}return e.next=6,D.a.put("/api/updateFilesMetadata",{ids:i,collection:a,metadata:o}).then((function(e){return console.log(e.data)}));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Be=function(e,t){var a=new FormData;if(t instanceof FormData&&t.has(e)){var r,n=Object(A.a)(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;a.set(o[0],o[1])}}catch(c){n.e(c)}finally{n.f()}a.delete(e);var i=Object(m.a)({fileToRemove:e,form:a},e,void 0);return Array.from(t.keys(),(function(e){return e})).length<=1&&(t.has("veiculoId")||t.has("empresaId"))?Object(m.a)({fileToRemove:void 0,form:void 0},e,void 0):i}},Ue={collection:"logs",docs:"vehicleDocs",primaryKey:"veiculoId"},Ye=Ue.collection,He=Ue.docs,Je=Ue.primaryKey,We=[{subject:"Cadastro de ve\xedculo",path:"/solicitacoes/cadastro",requestAction:"Cadastro de ve\xedculo solicitado",responseAction:"Pend\xeancias para o cadastro do ve\xedculo",concludedAction:"Ve\xedculo cadastrado",collection:Ye,docs:He,primaryKey:Je},{subject:"Reativa\xe7\xe3o de ve\xedculo",path:"/solicitacoes/cadastro",requestAction:"Reativa\xe7\xe3o de ve\xedculo solicitada",responseAction:"Pend\xeancias para a reativa\xe7\xe3o do ve\xedculo",concludedAction:"Ve\xedculo reativado",collection:Ye,docs:He,primaryKey:Je},{subject:"Altera\xe7\xe3o de dados do ve\xedculo",path:"/solicitacoes/altDados",requestAction:"Altera\xe7\xe3o de dados de ve\xedculo solicitada",responseAction:"Pend\xeancias para a altera\xe7\xe3o de dados veicular",concludedAction:"Dados do ve\xedculo alterados",collection:Ye,docs:He,primaryKey:Je},Object(v.a)(Object(v.a)({},Ue),{},{subject:"Cadastro/altera\xe7\xe3o de seguro",path:"/solicitacoes/seguros",requestAction:"Cadastro de seguro solicitado",responseAction:"Pend\xeancias para o cadastro do seguro",concludedAction:"Seguro cadastrado",primaryKey:"id",collection:Ye,docs:He}),Object(v.a)(Object(v.a)({},Ue),{},{subject:"Compartilhamento de ve\xedculo",path:"/solicitacoes/compartilhamento",requestAction:"Compartilhamento de seguro solicitado",concludedAction:"Compartilhamento de ve\xedculo realizado.",primaryKey:"id",collection:Ye,docs:He}),Object(v.a)(Object(v.a)({},Ue),{},{subject:"Cadastro de laudo de seguran\xe7a veicular",collection:"logs",path:"/solicitacoes/laudos",requestAction:"Cadastro do laudo solicitado",responseAction:"Pend\xeancias para o cadastro do laudo",concludedAction:"Laudo veicular cadastrado"}),{subject:"Baixa de ve\xedculo",path:"/solicitacoes/baixaVeiculo",requestAction:"Baixa de ve\xedculo solicitada",collection:Ye,docs:He,primaryKey:Je},{subject:"Configura\xe7\xf5es de Ve\xedculo",collection:"logs",path:"/veiculos/config"},{subject:"Consultas",path:"/consultas"},{subject:"Cadastro de empresa",collection:"empresaLogs",path:"/empresas/cadastro"},{subject:"Altera\xe7\xe3o no quadro/dados de s\xf3cios",requestAction:"Altera\xe7\xe3o no quadro/dados de s\xf3cios solicitada",concludedAction:"Altera\xe7\xe3o de s\xf3cios cadastrada",path:"/solicitacoes/socios",docs:"empresaDocs",primaryKey:"empresaId",collection:Ye},{subject:"Altera\xe7\xe3o estatut\xe1ria",requestAction:"Altera\xe7\xe3o estatut\xe1ria solicitada",responseAction:"Pend\xeancias para a altera\xe7\xe3o estatut\xe1ria",concludedAction:"Altera\xe7\xe3o estatut\xe1ria cadastrada",path:"/solicitacoes/altContrato",docs:"empresaDocs",primaryKey:"empresaId",collection:Ye},{subject:"Cadastro de procura\xe7\xf5es/procuradores",collection:Ye,path:"/solicitacoes/procuradores",docs:"empresaDocs",primaryKey:"empresaId",requestAction:"Cadastro de procura\xe7\xe3o solicitado",responseAction:"Procura\xe7\xe3o indeferida",concludedAction:"Procura\xe7\xe3o cadastrada"}],Ke=["metadata","approved","demandFiles"];function $e(){$e=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}function Xe(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(S.a)($e().mark((function e(t){var a,r,n,o,i,c,l,s,u,d,f,p,m,h,v,g,b,y,E,x,w,S,j,L,k;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=window.location.pathname,c=(null===(a=Vc.getState())||void 0===a||null===(r=a.user)||void 0===r?void 0:r.name)||"Usu\xe1rio n\xe3o identificado",l=t.empresaId,(s=JSON.parse(JSON.stringify(We))).forEach((function(e,t){return e.path=We[t].path.replace("/veiculos","").replace("/solicitacoes","").replace("/empresas","")})),u="logs",d=null===t||void 0===t?void 0:t.historyLength,f={user:c,createdAt:new Date},p=s.find((function(e){return i.match(e.path)})),m=JSON.parse(JSON.stringify(t)),t.subject&&t.subject.match("Reativa\xe7\xe3o")&&(p=s.find((function(e){return e.subject===t.subject}))),h="vehicleDocs",v="vehicleUpload",t.veiculoId||(h="empresaDocs",v="empresaUpload"),g=Object.assign(t.history,f),m.history=g||{},(d||0===d)&&(d%2===0||0===d?((null===t||void 0===t||null===(b=t.history)||void 0===b?void 0:b.action)||(m.history.action=null===(y=p)||void 0===y?void 0:y.requestAction),m.status="Aguardando an\xe1lise"):((null===t||void 0===t||null===(E=t.history)||void 0===E?void 0:E.action)||(m.history.action=null===(x=p)||void 0===x?void 0:x.responseAction),m.status="Pend\xeancias")),(null===t||void 0===t?void 0:t.id)&&m.veiculoId&&delete m.veiculoId,delete m.historyLength,t.id&&!t.subject||(m.subject=(null===t||void 0===t?void 0:t.subject)||(null===(n=p)||void 0===n?void 0:n.subject)),!t.declined){e.next=20;break}return m.history.action="Solicita\xe7\xe3o indeferida",m.status="Solicita\xe7\xe3o indeferida",m.completed=!0,w=D.a.post("/api/logs",{log:m,collection:u,codigoEmpresa:l}),e.abrupt("return",w);case 20:return t.approved&&!t.declined&&(m.history.action=(null===(S=p)||void 0===S?void 0:S.concludedAction)||"Solicita\xe7\xe3o conclu\xedda",m.status="Solicita\xe7\xe3o conclu\xedda",m.completed=!0,Ge(t,h)),e.next=23,Ve(null===t||void 0===t||null===(o=t.history)||void 0===o?void 0:o.files,null===t||void 0===t?void 0:t.metadata,null===m||void 0===m?void 0:m.completed,v);case 23:return(j=e.sent)&&(m.history.files=j),m.metadata,m.approved,m.demandFiles,L=Object(O.a)(m,Ke),s=JSON.parse(JSON.stringify(We)),p=s.find((function(e){return i.match(e.path)})),k=D.a.post("/api/logs",{log:L,collection:u,codigoEmpresa:l}),e.abrupt("return",k);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qe=a(14);function et(e){var t=e.collection,a=void 0===t?[]:t,r=e.field,o=e.itemProp,i=e.value;return(null===i||void 0===i?void 0:i.length)>2&&"string"!==typeof a?(o||(o=r),n.a.createElement("datalist",{id:r,autoComplete:"off"},a.map((function(e,t){return n.a.createElement("option",{key:t},e[o])})))):null}a(581);var tt=Object(l.c)((function(e){return{user:e.user,redux:e.data}}))((function(e){var t=Object(r.useState)(!0),a=Object(Qe.a)(t,2),o=a[0],i=a[1],c=e.empresas,l=e.compartilhados,s=e.handleInput,u=e.handleBlur,d=e.shared,f=e.headerTitle,p=e.data,m=p.razaoSocial,h=p.compartilhado,v=p.activeStep,g=p.demand,b=c.filter((function(e){return"Desativada"!==e.situacao})),y=1===b.length,E=[{title:"Selecione a Via\xe7\xe3o",name:"razaoSocial",field:"razaoSocial",value:m}];return d&&E.push({title:"Empresa autorizada a compartilhar",field:"compartilhado",name:"compartilhado",itemProp:"razaoSocial",value:h}),Object(r.useEffect)((function(){g||v>0||y?i(!1):0===v&&i(!0);var e=document.getElementsByName("razaoSocial");o&&e[0]&&e[0].focus()}),[g,v,o,y]),n.a.createElement("div",{className:e.hasOwnProperty("shared")?"flex center":"paper flex center",style:{flexDirection:0===v?"row":"column",width:"100%",marginBottom:0}},!o&&n.a.createElement("div",{className:"selectedEmpresa",style:{padding:d&&0===v&&"0 30px 33px 0"}},f||(null===g||void 0===g?void 0:g.empresa)||m||""),e.hasOwnProperty("shared")&&0!==v&&h&&n.a.createElement("div",{className:"compartilhadoHeader"},"Compartilhado por ",h),(!v||0===v)&&o&&E.map((function(e,t){var a=e.title,r=e.field,o=e.name,i=e.itemProp,c=e.value;return(y&&1===t||!y)&&n.a.createElement("div",{className:"flexColumn",key:t},n.a.createElement("h4",{style:{margin:"5px 0",textAlign:"center"}},a),n.a.createElement("input",{list:r,name:o,className:"selectEmpresa",value:c||"",onChange:s,onBlur:u,autoComplete:"off"}),n.a.createElement(et,{collection:"compartilhado"===r?l:b,field:r,itemProp:i,value:c}))})))})),at=a(423),rt=a(422),nt=Object($.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"1px",marginBottom:"1px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},select:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"2px",marginBottom:"2px",background:"#fafafa",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},helperText:{margin:"2px 0",fontSize:"0.7rem"}}}));function ot(e){var t=e.handleInput,a=e.handleBlur,o=e.form,i=e.data,c=e.empresas,l=e.compartilhados,s=e.seguros,u=e.seguradoras,d=e.selectOptions,f=e.disableAll,p=e.style,m=void 0===p?{}:p,h=e.disableSome,g=void 0===h?[]:h,b={compartilhados:l,empresas:c,seguros:s,seguradoras:u},y=nt(),E=y.helperText,x=function(e){var t,a=i[e.field];if(a)return(!e.errorHandler||!e.errorHandler(a))&&(!(!a||!e.errorHandler||e.errorHandler(a))||((null===(t=a)||void 0===t?void 0:t.length)<(null===e||void 0===e?void 0:e.minLength)||("number"===e.type?a>e.max||a<e.min:("string"!==typeof a&&(a=a.toString()),!!e.pattern&&null===a.match(e.pattern)))))},w=function(e){var t,a,r=i[e.field];return r?e.errorHandler&&e.errorHandler(r)?"\u2713":r&&e.errorHandler&&!e.errorHandler(r)||(null===(t=r)||void 0===t?void 0:t.length)<(null===e||void 0===e?void 0:e.minLength)?"\u2718":(null===(a=r)||void 0===a?void 0:a.length)>=(null===e||void 0===e?void 0:e.minLength)?"\u2713":("string"!==typeof r&&(r=r.toString()),r>e.max||r<e.min?"Valor inv\xe1lido":null===r.match(e.pattern)?"\u2718":e.pattern&&null!==r.match(e.pattern)?"\u2713":" "):" "};return n.a.createElement("div",{className:"flex center",style:Object(v.a)({},m)},o.map((function(e,o){return n.a.createElement(r.Fragment,{key:o},n.a.createElement(rt.a,{name:e.field,label:e.label,margin:e.margin,className:y.textField,onChange:t,onBlur:a,type:e.type||"",error:x(e),helperText:w(e),FormHelperTextProps:{className:E},select:e.select||!1,value:i[e.field]||"",disabled:e.disabled||f||g.includes(e.field)||!1,InputLabelProps:{className:y.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"}},inputProps:{style:{background:e.disabled&&i.disable?"#fff":"#fafafa",fontSize:"0.85rem",textAlign:"center",color:"#000",width:e.width||300,height:"7px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"},value:"".concat(i[e.field]||""),list:e.field||e.itemProp||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||"",autoComplete:"off"},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1,SelectProps:{style:{background:e.disabled&&i.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#555",fontWeight:400,width:325,height:"44px"}}},!0===e.select?d?d.map((function(e,t){return n.a.createElement(at.a,{key:t,value:e},e)})):e.options.map((function(e,t){return n.a.createElement(at.a,{key:t,value:e},e)})):null),!0===e.autoComplete&&n.a.createElement(et,{field:e.field,collection:i[e.collection]||b[e.collection],itemProp:e.itemProp,value:i[e.field]||""}))})))}function it(e){var t=e.subtitle,a=e.style,r=void 0===a?{}:a;return n.a.createElement("div",{className:"subtitle",style:r},n.a.createElement("i",{className:"material-icons subtitle__helper"},"arrow_forward"),n.a.createElement("span",{className:"subtitle__text"},t))}var ct=a(484),lt=a(425),st=a(426),ut=a(68),dt=a.n(ut),ft=[{field:"cilindros",label:"Cilindros",margin:"normal",type:"number",max:12,step:1},{field:"potencia",label:"Pot\xeancia (cv)",margin:"normal",type:"number",max:600},{field:"eixos",label:"Eixos",margin:"normal",type:"number",max:8},{field:"pneumaticosDianteiro",label:"Pneum\xe1ticos Eixo Dianteiro",margin:"normal",type:"number",max:12},{field:"pneumaticosTraseiro",label:"Pneum\xe1ticos Eixo Traseiro",margin:"normal",type:"number",max:18},{field:"pesoDianteiro",label:"Peso Dianteiro (t)",margin:"normal",type:"number",max:12},{field:"pesoTraseiro",label:"Peso Traseiro (t)",margin:"normal",type:"number",max:15},{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piquesPoltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150},{field:"numeroDae",label:"N\xba Documento Arrecada\xe7\xe3o Estadual",maxLength:40}],pt=[[{field:"placa",label:"Placa",margin:"normal",maxLength:8,pattern:"[a-zA-Z]{3}[-]?[ ]?\\d{4}|[A-Z]{3}[-]?[ ]?[0-9]{1}[A-Z]{1}[0-9]{2}"},{field:"renavam",label:"Renavam",margin:"normal",maxLength:11,pattern:/^(\d{9}|\d{11})$/},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Comercial","Comercial Executivo","Convencional","Convencional Executivo","Leito","Leito e Executivo","Semi-Leito","Semi-Leito Executivo"]},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17},{field:"modeloChassi",label:"Modelo do Chassi",autoComplete:!0,collection:"modelosChassi"},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",max:Number((new Date).getFullYear())},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:9,maxLength:11},{field:"modeloCarroceria",label:"Modelo da Carroceria",itemProp:"modelo",autoComplete:!0,collection:"carrocerias"},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",max:Number((new Date).getFullYear()+1)},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:9,maxLength:11},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Aliena\xe7\xe3o Fiduci\xe1ria","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50}]].concat([ft]);function mt(e){var t=e.close,a=e.title,r=void 0===a?"Fechar":a;return n.a.createElement("div",{style:{position:"absolute",top:"0.4%",right:"0.4%"}},n.a.createElement("div",null,n.a.createElement("i",{className:"material-icons right",title:r,style:{cursor:"pointer",color:"red"},onClick:t},"close")))}a(424);function ht(e){var t,a=e.data,r=e.type,o=e.equipamentos,i=e.handleCheck,c=e.close;return Array.isArray(o)&&(null===(t=o[0])||void 0===t?void 0:t.item)&&(o=o.sort((function(e,t){return e.item.localeCompare(t.item)}))),n.a.createElement("div",{className:"popUpWindow",style:{right:"25%",left:"25%"}},n.a.createElement("h4",{className:"equipaHeader"},"equipamentos"===r?"Equipamentos":"Itens de Acessibilidade")," ",n.a.createElement("hr",null),n.a.createElement("div",{className:"checkListContainer"},o.map((function(e,t){return n.a.createElement("span",{className:"checkListEquipa",key:t},n.a.createElement(lt.a,{control:n.a.createElement(ct.a,{checked:a[e.item],value:e.item,onChange:function(){return i(e.item,r)}}),label:n.a.createElement("p",{className:"checkListLabel"},e.item)}))}))),n.a.createElement(mt,{close:c}))}a(214);var vt=Object($.a)((function(e){return{button:{marginRight:"15px"}}})),gt=function(e){var t=e.redux,a=e.data,o=e.handleInput,i=e.handleBlur,c=e.handleEquipa,l=e.handleCheck,s=e.closeEquipa,u=e.resetShared,d=e.removePartilha,f=Object(r.useState)(!1),p=Object(Qe.a)(f,2),m=p[0],h=p[1],v=vt().button,g=t.empresas,b=t.compartilhados,y=t.equipamentos,E=t.acessibilidade,x=t.modelosChassi,w=t.carrocerias,O=a.activeStep,S=a.demand,j=a.addEquipa,L=a.subtitle,k=a.selectedEmpresa,C=a.type,N=a.placa,P=a.reactivated,I=pt[O],D=y;"acessibilidade"===C&&(D=E),a.modelosChassi=x,a.carrocerias=w,Object(r.useEffect)((function(){u&&h(!1)}),[u]);var A=L[O];return P&&(A+=" (reativa\xe7\xe3o de ve\xedculo)"),n.a.createElement(n.a.Fragment,null,n.a.createElement("header",{className:0!==O?"flex center":"paper flex center",style:{width:"100%"}},n.a.createElement("section",{className:"flexColumn",style:{marginBottom:"10px"}},n.a.createElement(tt,{data:a,shared:m,empresas:g,compartilhados:b,headerTitle:N&&k&&"Cadastro de ve\xedculo ".concat(N," - ").concat(null===k||void 0===k?void 0:k.razaoSocial),handleBlur:i,handleInput:o})),0===O&&!S&&n.a.createElement("section",{className:"flex center",style:{width:"100%",margin:"-7px 0 -4px 0"}},n.a.createElement(lt.a,{control:n.a.createElement(ct.a,{checked:!0===m,onChange:function(){return m&&d(),void h(!m)},value:m}),label:n.a.createElement("h4",{style:{color:"#2979ff",fontSize:"0.7rem"}},"Ve\xedculo Compartilhado?")}))),k&&n.a.createElement("main",null,O<2&&n.a.createElement("section",{className:"paper",style:{paddingBottom:"25px"}},n.a.createElement(it,{subtitle:A}),n.a.createElement(ot,{form:I,data:a,handleBlur:i,handleInput:o})),0===O&&n.a.createElement("section",{className:"flex center",style:{marginTop:"15px"}},n.a.createElement(st.a,{variant:"outlined",size:"small",color:"primary",className:v,onClick:function(){return c("equipamentos")}},n.a.createElement(dt.a,null),"Equipamentos"),n.a.createElement(st.a,{variant:"outlined",size:"small",color:"primary",className:v,onClick:function(){return c("acessibilidade")}},n.a.createElement(dt.a,null),"Acessibilidade")),j&&n.a.createElement(ht,{equipamentos:D,close:s,handleCheck:l,data:a})))},bt=a(509),yt=a(494),Et=a.n(yt),xt=a(493),wt=a.n(xt);function Ot(e){var t=e.name,a=e.removeFile;return n.a.createElement("div",{style:{position:"absolute",top:"0.4%",right:"0.4%"}},n.a.createElement("div",null,n.a.createElement("i",{className:"material-icons right",title:"Remover arquivo",style:{cursor:"pointer",color:"red"},onClick:function(){return a(t)}},"close")))}function St(e){var t=e.title,a=e.name,o=e.formData,i=e.handleFiles,c=e.dropDisplay,l=e.single,s=e.style,u=e.demandFiles,d=e.fileToRemove,f=e.removeFile,p=Object(r.useState)(),m=Object(Qe.a)(p,2),h=m[0],v=m[1],g=Object(r.useState)(),b=Object(Qe.a)(g,2),y=b[0],E=b[1];return Object(r.useEffect)((function(){u&&u[0]&&u.forEach((function(e){var t=e.filename,r=e.metadata;a===r.fieldName&&(v(t),E(!0))}))}),[u,a]),Object(r.useEffect)((function(){if(o instanceof FormData){var e,t=Object(A.a)(o.entries());try{for(t.s();!(e=t.n()).done;){var r=e.value;a===r[0]&&(v(r[1].name),E(!1),console.log(r[0],r[1]))}}catch(n){t.e(n)}finally{t.f()}}else o||u||v(null)}),[o,a,u,d]),Object(r.useEffect)((function(){if(d===a){var e=null===u||void 0===u?void 0:u.find((function(e){var t;return(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.fieldName)===d}));d&&e?(v(e.filename),E(!0)):d&&d===a&&v(void 0)}}),[u,d,i,a]),n.a.createElement("div",{style:s||null},n.a.createElement("div",{style:{position:"relative",marginRight:"8px"}},t?n.a.createElement("p",{className:"fileInput"},t||""):n.a.createElement("br",null),h&&!y&&n.a.createElement(Ot,{removeFile:f,name:a})),n.a.createElement(bt.a,{onDrop:function(e){return i(e,a)}},(function(e){var t=e.getRootProps,a=e.getInputProps;return n.a.createElement("div",Object.assign({style:y?{backgroundColor:"#aaa"}:{},className:h?"dropBox fileAttached":l?"dropBox":"multipleDropBox"},t()),n.a.createElement("input",a()),h?n.a.createElement(r.Fragment,null,n.a.createElement("div",null,n.a.createElement(wt.a,{className:"icon"}),h),l&&n.a.createElement("span",null,"(clique ou arraste outro arquivo para alterar)")):n.a.createElement("div",null," ",n.a.createElement(Et.a,{className:"icon"}),n.a.createElement("span",null,"  ",c)))})))}var jt=a(812),Lt=[{title:"CRLV do Ve\xedculo",name:"crlv"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"Laudo de Pesagem",name:"pesagem"},{title:"Nota Fiscal Carroceria",name:"nfCarroceria"},{title:"Nota Fiscal Chassi",name:"nfChassi"},{title:"Layout do Ve\xedculo",name:"layout"},{title:"Contrato",name:"contrato"},{title:"Outros Anexos",name:"outrosAnexos"}],kt=[{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"Laudo de Pesagem",name:"pesagem"},{title:"CRLV com nova placa",name:"newPlateDoc"},{title:"Layout do Ve\xedculo",name:"layout"},{title:"Outros Anexos",name:"outrosAnexos"}],Ct=Object($.a)((function(e){return{root:{flexGrow:"1",margin:"5px",padding:"8px"},sendButton:{margin:"3% 0 3% 0",backgroundColor:"teal",float:"right"},text:{textAlign:"left",margin:e.spacing(2),fontSize:"0.9rem",fontWeight:"500",color:"#333"},item:{margin:"0 0 18px 0",padding:"0 5px"}}}));function Nt(e){var t,a=e.handleFiles,o=e.parentComponent,i=e.dropDisplay,c=e.formData,l=e.insuranceExists,s=e.demandFiles,u=e.removeFile,d=e.fileToRemove,f=Ct(),p=f.root,m=f.item;return"cadastro"===o&&(t=Lt),"altDados"===o&&(t=kt),n.a.createElement("div",{className:"paper",style:{color:"#555"}},n.a.createElement(it,{subtitle:"Anexe os documentos solicitados nos campos abaixo"}),n.a.createElement(jt.a,{container:!0,className:p},t.map((function(e,t){var o=e.title,f=e.name;return"apoliceDoc"===f&&l?null:n.a.createElement(r.Fragment,{key:t},n.a.createElement(jt.a,{item:!0,xs:10,md:4,className:m},n.a.createElement(St,{title:o,name:f,formData:c,dropDisplay:i,handleFiles:a,demandFiles:s,removeFile:u,fileToRemove:d})))}))))}var Pt=a(267),It=a.n(Pt),Dt=a(266),At=a.n(Dt),_t=function(e,t,a,r){r&&"apoliceDoc"===r&&(a="empresaDocs"),D()({url:"/api/mongoDownload/?collection=".concat(a,"&id=").concat(e),method:"GET",responseType:"blob"}).then((function(e){var a=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=a,r.setAttribute("download",t),document.body.appendChild(r),r.click()})).catch((function(e){console.log(e)}))},Tt={display:"flex",justifyContent:"center",width:"100%",alignContent:"center",flexWrap:"wrap"},Ft={textAlign:"center",alignItems:"flex-start",height:"40px",border:"1px #ccc solid",padding:"7px 8px 0 8px",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px"},zt={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},Mt={verticalAlign:"middle",padding:"0 0% 0 2%"};function qt(e){var t=e.form,a=e.files,r=e.demandFiles,o=e.collection,i=e.style,c=void 0===i?{}:i,l=[];if(r&&r.forEach((function(e){t.forEach((function(t){var a,r=t.name,n=t.title;(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.fieldName)===r&&l.push({id:e.id,label:n,fieldName:r,fileName:e.filename,storage:"server"})}))})),a){var s,u=Object(A.a)(a.entries());try{var d=function(){var e=s.value;t.forEach((function(t){var a=t.name,r=t.title;if(a===e[0]&&e[1]&&e[1].name){var n=l.findIndex((function(e){return(null===e||void 0===e?void 0:e.fieldName)===a}));-1!==n?l[n]={label:r,fieldName:a,fileName:e[1].name,storage:"local"}:l.push({label:r,fieldName:a,fileName:e[1].name,storage:"local"})}}))};for(u.s();!(s=u.n()).done;)d()}catch(f){u.e(f)}finally{u.f()}}return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:Tt},l.map((function(e,t){return n.a.createElement("div",{style:Object(v.a)(Object(v.a)({},Ft),c),key:t},n.a.createElement(At.a,{style:Mt}),n.a.createElement("span",{style:{verticalAlign:"middle"}}," "," ",e.label),n.a.createElement(It.a,{style:zt,onClick:function(){return"local"===e.storage?function(e,t){var r=a.get(e),n=window.URL.createObjectURL(r),o=document.createElement("a");o.href=n,r&&("application/pdf"===r.type||r.type.match("image/"))?(o.setAttribute("rel","noopener"),o.setAttribute("target","_blank"),o.setAttribute("title",t)):o.setAttribute("download",t),document.body.appendChild(o),o.click()}(e.fieldName,e.fileName):_t(e.id,e.fileName,o,e.fieldName)}}))}))))}function Rt(e){var t=e.length,a=e.title,r=e.labels,o=e.fields,i=e.values,c=e.style,l=e.docs,s=e.alteredElements,u=void 0===s?[]:s;return n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"tHeader",style:c,colSpan:t},a)),n.a.createElement("tr",null,r.map((function(e,t){return n.a.createElement("th",{key:t,style:c},e)})))),n.a.createElement("tbody",null,n.a.createElement("tr",null,i.map((function(e,t){return n.a.createElement("td",{className:"review",key:t,style:Object(v.a)(Object(v.a)({},c),{},{color:u.includes(o[t])?"red":"#000"}),onClick:function(){return l&&l.id?_t(l.id,l.filename,"vehicleDocs",l.metadata.fieldName):null}},(a=e,ue()(a,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?ue()(a,ue.a.ISO_8601,!0).format("DD/MM/YYYY"):a));var a})))))}var Vt=a(163),Gt=a(123),Bt=a.n(Gt),Ut=Object($.a)((function(e){return{paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 5px 0",height:"auto"}}}));function Yt(e){var t,a,o=e.data,i=e.parentComponent,c=e.form,l=e.filesForm,s=e.files,u=Ut().paper,d=o.acessibilidade,f=o.equipamentos,p=o.alteracoes,h=o.demand,v=o.demandFiles,g=o.numeroDae,b=null===o||void 0===o?void 0:o.originalVehicle,y=g||(null===h||void 0===h?void 0:h.history)instanceof Array&&(null===h||void 0===h||null===(t=h.history.reverse().find((function(e){return e.numeroDae})))||void 0===t?void 0:t.numeroDae),E=[],x={},w=[],O=[],S=[];return c.forEach((function(e){e.forEach((function(e){o.hasOwnProperty([e.field])&&(Object.assign(x,Object(m.a)({},e.field,o[e.field])),w.push(e))})),E.push(x),O.push(w),x={},w=[]})),"cadastro"===i&&(a=[{subtitle:"Detalhes do ve\xedculo",form:O[0]||[],data:E[0]},{subtitle:"Detalhes do seguro",form:O[1]||[],data:E[1]},{subtitle:"Informa\xe7\xf5es sobre a vistoria",form:O[2]||[],data:E[2]}]),"altDados"===i&&(a=[{subtitle:"Detalhes do ve\xedculo",form:O[0],data:E[0]},{subtitle:"Informa\xe7\xf5es sobre a vistoria",form:O[1],data:E[1]}]),p&&"object"===typeof p&&(S=Object.keys(p)),b&&Object.keys(b).forEach((function(e){o[e]&&b[e]&&(o[e]===b[e]||S.includes(e)||S.push(e))})),n.a.createElement(n.a.Fragment,null,n.a.createElement(Vt.a,{className:u},n.a.createElement("main",{className:"divTable"},a.map((function(e,t){var a=e.subtitle,o=e.form,i=e.data;return o&&i&&n.a.createElement(r.Fragment,{key:t},n.a.createElement(Rt,{length:(null===o||void 0===o?void 0:o.length)||1,title:a,labels:o.map((function(e){return e.label})),fields:o.map((function(e){return e.field})),values:Object.values(i),alteredElements:S}))}))),f&&f[0]&&n.a.createElement("section",{style:{margin:"0 0 13px 20px"}},n.a.createElement("p",{style:{fontWeight:500,color:"#555"}}," Equipamentos "),n.a.createElement("p",null,f&&f.map((function(e,t){return n.a.createElement("span",{className:"smallFont",key:t},t!==f.length-1?e+", ":e)})))),d&&d[0]&&n.a.createElement("section",{style:{margin:"0 0 13px 20px"}},n.a.createElement("p",{style:{fontWeight:500,color:"#555"}}," Itens de acessibilidade "),n.a.createElement("p",null,d.map((function(e,t){return n.a.createElement("span",{className:"smallFont",key:t},t!==d.length-1?e+", ":e)})))),(s||v)&&n.a.createElement("div",null,n.a.createElement("p",{style:{margin:"0 0 13px 11px",fontWeight:"500",color:"#555"}},n.a.createElement(Bt.a,{style:{verticalAlign:"middle",padding:"0 0 0 8px"}})," Documentos"),n.a.createElement(qt,{demand:h,collection:"vehicleDocs",demandFiles:v,form:l,files:s}),y&&n.a.createElement("span",{className:"smallFont addMargin"},"N\xba Documento Arrecada\xe7\xe3o Estadual: ",y))))}var Ht=a(831),Jt=a(495),Wt=a.n(Jt);function Kt(e){var t=e.links,a=e.text,r=e.demand;return r&&(t=["Solicita\xe7\xf5es","/solicitacoes"],a="solicita\xe7\xe3o n\xba ".concat(null===r||void 0===r?void 0:r.numero)),n.a.createElement(jt.a,{style:{marginTop:"1%"}},n.a.createElement(Ht.a,{separator:"\u203a","aria-label":"breadcrumb"},n.a.createElement(x.b,{to:"/",style:{}},n.a.createElement(Wt.a,{style:{verticalAlign:"middle",marginRight:"5px",paddingBottom:"3px"}}),n.a.createElement("span",{style:{fontSize:"0.8rem"}},"P\xe1gina inicial")),n.a.createElement(x.b,{color:"primary",to:t[1],style:{fontSize:"0.8rem"}},t[0]),n.a.createElement("span",{style:{fontSize:"0.8rem"}},a)))}var $t=Object($.a)((function(e){return{button:{margin:e.spacing(1),float:"right"},backButton:{margin:e.spacing(1),float:"left",color:"#333",backgroundColor:"#eee"},textField:{marginTop:"20px",width:"100%"}}}));function Xt(e){var t,a=e.activeStep,o=e.setActiveStep,i=e.lastStep,c=e.handleSubmit,l=e.disabled,s=e.demand,u=e.uniqueStep,d=e.declineButtonLabel,f=e.setShowPendencias,p=e.showPendencias,m=e.handleInput,h=e.info,v=e.obs,g=e.addObs,b=e.buttonLabel,y=$t(),E=y.backButton,x=y.button,w=y.textField;return(null===s||void 0===s?void 0:s.status.match("Pend\xeancias"))&&(t="empresa"),(null===s||void 0===s?void 0:s.status.match("Aguardando"))&&(t="seinfra"),Object(r.useEffect)((function(){function e(e){37===e.keyCode&&e.ctrlKey&&0!==a&&o("back"),39===e.keyCode&&e.ctrlKey&&a!==i&&o("next"),13===e.keyCode&&e.ctrlKey&&c()}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}})),n.a.createElement("div",{style:{width:"100%"}},a<i?n.a.createElement(n.a.Fragment,null,n.a.createElement(st.a,{variant:"contained",className:E,title:0!==a?"Ctrl + \u2190":null,onClick:function(){return o("back")},disabled:0===a},"Voltar"),n.a.createElement(st.a,{variant:"contained",color:"primary",title:l?null:"Ctrl + \u2192",className:x,onClick:function(){return o("next")},disabled:l},"Avan\xe7ar")):n.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},"seinfra"!==t||p||g?n.a.createElement(rt.a,{name:g?"obs":"info",className:w,value:g?v:h,label:s&&"empresa"!==t?s&&u?"Motivos para o indeferimento":p?"Pend\xeancias/irregularidades para a aprova\xe7\xe3o":"Observa\xe7\xf5es":"Observa\xe7\xf5es/informa\xe7\xf5es complementares",type:"text",onChange:m,InputLabelProps:{shrink:!0,style:{fontWeight:600,marginBottom:"5%"}},inputProps:{style:{paddingBottom:"2%"},maxLength:600},multiline:!0,rows:3,variant:"outlined"}):null,n.a.createElement("div",{style:{display:"flex",width:"100%"}},a===i&&!u&&n.a.createElement(st.a,{variant:"contained",className:E,title:0!==a?"Ctrl + \u2190":null,onClick:function(){return o("back")},disabled:0===a},"Voltar"),n.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%"}},s&&"empresa"!==t?n.a.createElement(n.a.Fragment,null,n.a.createElement(st.a,{variant:"outlined",color:"secondary",className:x,onClick:function(){return f()}},p?"Cancelar":d||"Registrar pendencias"),n.a.createElement(st.a,{variant:"contained",color:p?"secondary":"primary",className:x,onClick:function(){return c(!p)}},p?"Indeferir":"Aprovar")):n.a.createElement(st.a,{variant:"contained",color:"primary",className:x,onClick:function(){return c()}},b||"Enviar solicita\xe7\xe3o")))))}var Zt=a(813),Qt=a(814),ea=a(815);function ta(e){var t=e.activeStep,a=e.steps;return n.a.createElement("div",{className:"paper",style:{padding:"15px",margin:"10px 0"}},n.a.createElement(Zt.a,{activeStep:t},a.map((function(e,t){var a={};return n.a.createElement(Qt.a,Object.assign({key:e},{}),n.a.createElement(ea.a,a,e))}))))}var aa=function(e,t){if(/\d/.test(e)){var a=new Date(e).getDate()+"/"+(new Date(e).getMonth()+1)+"/"+new Date(e).getFullYear();return t&&(a+=", "+new Date(e).getHours()+":"+(new Date(e).getMinutes()<10?"0"+new Date(e).getMinutes():new Date(e).getMinutes())+"h"),a.toString()}return e},ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace(/\D/g,"");return t=(t=(t=(t=(t/100).toFixed(2)+"").replace(".",",")).replace(/(\d)(\d{3})(\d{3}),/g,"$1.$2.$3,")).replace(/(\d)(\d{3}),/g,"$1.$2,")};var na=a(816),oa=a(820),ia=a(818),ca=a(819),la=a(817);function sa(e){var t=e.open,a=e.alertType,r=e.close,o=e.confirm,i=e.customTitle,c=e.customMessage,l=e.tab,s=function(e){var t="";if((l||0===l)&&(t=["a empresa","o s\xf3cio","a procura\xe7\xe3o","o ve\xedculo","o seguro"][l]),i&&c)return{title:i,message:c};switch(e){case"plateNotFound":return{title:"Placa n\xe3o encontrada",message:'A placa informada n\xe3o corresponde a nenhum ve\xedculo da frota da via\xe7\xe3o selecionada. Para cadastrar um novo ve\xedculo, selecione a op\xe7\xe3o Ve\xedculos => "Cadastro de Ve\xedculo" no menu acima.'};case"invalidPlate":return{title:"Placa inv\xe1lida",message:"Certifique-se de que a placa informada \xe9 uma placa v\xe1lida, com tr\xeas letras seguidas de 4 n\xfameros (ex: AAA-0000)"};case"plateExists":return{title:"Placa j\xe1 cadastrada!",message:"A placa informada j\xe1 est\xe1 cadastrada. Para atualizar seguro, alterar dados ou solicitar baixa, utilize as op\xe7\xf5es acima. "};case"invalidModel":return{title:"Modelo n\xe3o cadastrado.",message:c};case"inputError":return{title:"Preenchimento inv\xe1lido.",message:c};case"fieldsMissing":return{title:"Favor preencher todos os campos.",message:"Os campos acima s\xe3o de preenchimento obrigat\xf3rio. Certifique-se de ter preenchido todos eles."};case"invalidInsurance":return{title:"Favor verificar os dados do seguro.",message:"As informa\xe7\xf5es referentes ao seguro do ve\xedculo s\xe3o obrigat\xf3rias. Certifique-se de ter informado todas elas."};case"filesNotFound":return{title:"Arquivos n\xe3o encontrados",message:"N\xe3o h\xe1 nenhum documento aprovado no sistema para ".concat(t," selecionad").concat(t.charAt(0),".\n          Caso haja uma solicita\xe7\xe3o em aberto para ").concat(t,', acesse a op\xe7\xe3o "Solicita\xe7\xf5es" no menu superior para ter acesso aos arquivos.')};case"empresaNotFound":return{title:"Empresa n\xe3o encontrada.",message:"A empresa informada n\xe3o est\xe1 registrada no sistema. Para cadastrar uma nova empresa, utilize a op\xe7\xe3o Empresas -> Cadastrar."};case"seguradoraNotFound":return{title:"Seguradora n\xe3o encontrada.",message:"A seguradora informada n\xe3o est\xe1 registrada no sistema. Favor verificar o nome da seguradora."};case"alreadyExists":return{title:"CPF j\xe1 cadastrado.",message:"O CPF informado corresponde a um s\xf3cio j\xe1 cadastrado. \n          Para remover ou editar as informa\xe7\xf5es dos s\xf3cios, utilize a respectiva op\xe7\xe3o abaixo."};case"numberNotValid":return{title:"N\xfamero inv\xe1lido.",message:"O n\xfamero digitado n\xe3o \xe9 v\xe1lido."};case"overShared":return{title:"Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",message:"A participa\xe7\xe3o societ\xe1ria informada excede a 100%."};case"subShared":return{title:"Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",message:"A participa\xe7\xe3o societ\xe1ria informada n\xe3o soma 100%. Favor informar todos os s\xf3cios com suas respectivas participa\xe7\xf5es."};case"veiculoPendente":return{title:"Pend\xeancias encontradas para este ve\xedculo.",message:"Verifique se h\xe1 alguma aprova\xe7\xe3o pendente quanto ao cadastro, seguro, transfer\xeancia ou altera\xe7\xe3o de dados do ve\xedculo."};case"seguroVencido":return{title:"Pend\xeancias encontradas para o seguro deste ve\xedculo.",message:"Para regularizar o seguro deste ve\xedculo, acesse a op\xe7\xe3o Ve\xedculos=>Seguros no menu acima."};case"contratoVencido":return{title:"Contrato expirado.",message:"O contrato de concess\xe3o com o delegat\xe1rio selecionado est\xe1 expirado."};default:return{title:null,message:null}}}(a),u=s.title,d=s.message;return u&&d?n.a.createElement("div",null,n.a.createElement(na.a,{open:t,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(la.a,{id:"alert-dialog-title"},u),n.a.createElement(ia.a,null,n.a.createElement(ca.a,{id:"alert-dialog-description"},d)),n.a.createElement(oa.a,null,n.a.createElement(st.a,{onClick:r,color:"primary"},o?"Cancelar":"Fechar"),o&&n.a.createElement(st.a,{onClick:r,color:"primary",autoFocus:!0},"Confirmar")))):null}var ua=function(e,t,a){var r,n;return"leitoEExecutivo"===(e=P.a.camelize(e))&&(e="leitoExecutivo"),a[e]&&t&&""!==t&&(t=Number(t),r=(n=a[e])<=t),!r&&(n?'A dist\xe2ncia m\xednima para a utiliza\xe7\xe3o "'.concat(e,'" \xe9 de ').concat(n,' cent\xedmetros. Altere a dist\xe2ncia ou clique em "voltar" para alterar a utiliza\xe7\xe3o.'):void 0)},da=[{field:"veiculoId",label:"N\xfamero"},{field:"placa",label:"Placa"},{field:"renavam",label:"RENAVAM"},{field:"utilizacao",label:"Utiliza\xe7\xe3o"},{field:"codigoEmpresa",label:"C\xf3digo"},{field:"empresa",label:"Delegat\xe1rio"},{field:"dataRegistro",label:"Data de Registro"},{field:"situacao",label:"Situa\xe7\xe3o"},{field:"motivoBaixa",label:"Motivo da Baixa"},{field:"dataBaixa",label:"Data baixa"},{field:"nChassi",label:"N\xfamero chassi"},{field:"marcaChassi",label:"Marca chassi"},{field:"modeloChassi",label:"Modelo chassi"},{field:"anoChassi",label:"Ano chassi"},{field:"valorChassi",label:"Valor Chassi"},{field:"marcaCarroceria",label:"Marca carroceria"},{field:"modeloCarroceria",label:"Modelo carroceria"},{field:"anoCarroceria",label:"Ano carroceria"},{field:"indicadorIdade",label:"Indicador de Idade"},{field:"valorCarroceria",label:"Valor carroceria"},{field:"dominio",label:"Leasing"},{field:"delegatarioCompartilhado",label:"Empresas autorizadas a compartilhar"},{field:"cores",label:"Cores"},{field:"seguradora",label:"Seguradora"},{field:"apolice",label:"Ap\xf3lice"},{field:"dataEmissao",label:"Data Inicio"},{field:"vencimento",label:"Data Fim"},{field:"empresaLaudo",label:"Empresa Laudo"},{field:"numeroLaudo",label:"N\xfamero Laudo"},{field:"validade",label:"Validade Laudo"},{field:"cilindros",label:"Cilindros"},{field:"potencia",label:"Pot\xeancia"},{field:"eixos",label:"Eixos"},{field:"pneumaticosDianteiros",label:"Pneum\xe1ticos Dianteiros"},{field:"pneumaticosTraseiros",label:"Pneum\xe1ticos Traseiros"},{field:"pesoDianteiro",label:"Peso Dianteiro"},{field:"pesoTraseiro",label:"Peso Traseiro"},{field:"pbt",label:"PBT"},{field:"poltronas",label:"Poltronas"},{field:"piquesPoltrona",label:"Piques Poltrona"},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima"},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima"},{field:"equipamentos",label:"Equipamentos"},{field:"acessibilidade",label:"Acessibilidade"},{field:"sipro",label:"SIPRO"},{field:"obs",label:"Observa\xe7\xe3o"}],fa=function(e){var t,a=e.props.redux.modelosChassi,r=e.state.modeloChassi;if(r){var n=null===(t=a.find((function(e){return e.modeloChassi===r})))||void 0===t?void 0:t.cmt;console.log("\ud83d\ude80 ~ file: CadVeiculo.jsx ~ line 190 ~ VeiculosContainer ~ cmt",n),e.setState({cmt:n})}},pa=function(e){if(e)return"0"!==(e=e.toString().replace(".",",").replace(",000","")).slice(-1)||","!==e.charAt(1)&&","!==e.charAt(2)||(e=e.slice(0,e.length-1)),"0"!==e.slice(-1)||","!==e.charAt(1)&&","!==e.charAt(2)||(e=e.slice(0,e.length-1)),console.log(e),e},ma=function(e,t){var a=e.state,r=a.poltronas,n=a.pesoDianteiro,o=a.pesoTraseiro,i=a.cmt,c=a.modeloChassi;o=o||0;var l=.08*+(r=r||0)+(+((n=n||0)&&parseFloat(n.replace(",",".")).toFixed(3))+ +(o&&parseFloat(o.replace(",",".")).toFixed(3)));if((l=isNaN(l)?void 0:l.toFixed(3))&&i)if(+i>=l)l=Number(pa(l).replace(",",".")),e.setState({pbt:l});else{var s=pa(l),u=i&&i.toString().replace(".",","),d="O n\xfamero de poltronas e os pesos dianteiro e traseiro informados formam um peso bruto total de ".concat(s,"t, superior \xe0 \n                Carga M\xe1xima de tra\xe7\xe3o permitida: modelo ").concat(c," -> ").concat(u,"t.");e.setState(Object(m.a)({openAlertDialog:!0,customTitle:"Peso total bruto superior ao permitido (CMT) para o modelo de chassi informado.",customMessage:d},t,0))}},ha=["delegatarioCompartilhado","modeloChassi","modeloCarroceria","apolice","numeroDae"];function va(){va=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var ga=we(["veiculos","empresas","compartilhados","modelosChassi","carrocerias","equipamentos","acessibilidade","getFiles/vehicleDocs","parametros"],function(e){Object(k.a)(a,e);var t=Object(C.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).state={activeStep:0,steps:["Dados do Ve\xedculo","Vistoria e laudos","Documentos","Revis\xe3o"],subtitle:["Informe os dados do ve\xedculo.","Preencha os campos abaixo conforme a vistoria realizada"],razaoSocial:"",frota:[],delegatarioCompartilhado:"",toastMsg:"Ve\xedculo cadastrado!",confirmToast:!1,addEquipa:!1,openAlertDialog:!1,dropDisplay:"Clique ou arraste para anexar"},e.setActiveStep=function(){var t=Object(S.a)(va().mark((function t(a){var r,n,o,i,c,l,s,u;return va().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.state.activeStep){t.next=7;break}if(!e.state.frota.filter((function(t){return t.placa===e.state.placa}))[0]){t.next=7;break}return t.next=5,e.setState({placa:""});case 5:return e.setState({alertType:"plateExists",openAlertDialog:!0}),t.abrupt("return",null);case 7:if(r=e.props.redux.parametros[0]&&e.props.redux.parametros[0],n=r.inputValidation,"next"!==a||!n){t.next=16;break}if(o=e.props,i=o.checkBlankInputs,c=o.checkInputErrors,l=c("sendState"),s=i(pt[e.state.activeStep],e.state),!l){t.next=13;break}return e.setState(Object(v.a)(Object(v.a)({},e.state),l)),t.abrupt("return");case 13:if(!s){t.next=16;break}return e.setState(Object(v.a)(Object(v.a)({},e.state),s)),t.abrupt("return");case 16:u=e.state.activeStep,"next"===a&&e.setState({activeStep:u+1}),"back"===a&&e.setState({activeStep:u-1}),"reset"===a&&e.setState({activeStep:0});case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleInput=function(){var t=Object(S.a)(va().mark((function t(a){var r,n,o,i,c,l,s,u,d;return va().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props.redux,n=r.veiculos,o=r.empresas,i=a.target.name,c=a.target.value,e.setState(Object(m.a)({},i,c)),t.t0=i,t.next="razaoSocial"===t.t0?6:"placa"===t.t0?18:"utilizacao"===t.t0?23:"valorChassi"===t.t0?25:"valorCarroceria"===t.t0?27:29;break;case 6:if(!(l=o.find((function(e){return e.razaoSocial===c})))){t.next=16;break}return s=l.razaoSocial,u=l.codigoEmpresa,t.next=11,e.setState({selectedEmpresa:l,razaoSocial:s,codigoEmpresa:u});case 11:c!==l.razaoSocial&&e.setState({selectedEmpresa:void 0}),d=n.filter((function(t){return t.empresa===e.state.razaoSocial})),e.setState({frota:d}),t.next=17;break;case 16:e.setState({selectedEmpresa:void 0,frota:[],placa:void 0});case 17:return t.abrupt("break",30);case 18:if("string"!==typeof c){t.next=22;break}return c=c.toLocaleUpperCase(),t.next=22,e.setState(Object(m.a)({},i,c));case 22:return t.abrupt("break",30);case 23:return e.setState({distanciaMinima:void 0,distanciaMaxima:void 0}),t.abrupt("break",30);case 25:case 27:return e.setState(Object(m.a)({},i,ra(c))),t.abrupt("break",30);case 29:case 30:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.checkValid=function(){var t=Object(S.a)(va().mark((function t(a,r,n,o,i,c,l){var s,u,d,f,p,h;return va().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((u=n.find((function(e){return e[i].toLowerCase()===r.toLowerCase()})))||!r||""===r){t.next=7;break}return t.next=4,e.setState((d={},Object(m.a)(d,a,""),Object(m.a)(d,o,""),d));case 4:return e.setState({alertType:"invalidModel",openAlertDialog:!0,customTitle:"Modelo inv\xe1lido.",customMessage:"O modelo de ".concat(l," n\xe3o est\xe1 cadastrado no sistema.")}),document.getElementsByName(a)[0].focus(),t.abrupt("return");case 7:if(""===r&&e.setState((s={},Object(m.a)(s,a,""),Object(m.a)(s,o,""),s)),!u){t.next=13;break}if(p=u[i],h=u[c],""===r){t.next=13;break}return t.next=13,e.setState((f={},Object(m.a)(f,a,p),Object(m.a)(f,o,h),f));case 13:case"end":return t.stop()}}),t)})));return function(e,a,r,n,o,i,c){return t.apply(this,arguments)}}(),e.handleBlur=function(){var t=Object(S.a)(va().mark((function t(a){var r,n,o,i,c,l,s,u,d,f,p,m,h,v,g,b,y,E,x,w,O,S,j,L,k,C,N,P,I,D;return va().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props.redux,n=r.empresas,o=r.modelosChassi,i=r.carrocerias,c=r.parametros,l=c[0],s=l.distanciaPoltronas,u=l.idadeBaixa,d=u.idadeMaxCad,f=u.difIdade,p=u.idadeBaixaAut,m=e.state,h=m.anoCarroceria,v=m.anoChassi,g=m.utilizacao,b=m.distanciaMinima,y=m.distanciaMaxima,E=m.situacao,x=a.target.name,w=Number(h),O=Number(v),S=(new Date).getFullYear(),j=a.target.value,C=S-d,E&&E.match("Reativa\xe7\xe3o")&&(C=S-p),t.t0=x,t.next="modeloChassi"===t.t0?6:"modeloCarroceria"===t.t0?11:"delegatarioCompartilhado"===t.t0?13:"anoChassi"===t.t0?15:"anoCarroceria"===t.t0?20:"distanciaMinima"===t.t0?25:"distanciaMaxima"===t.t0?29:"pesoDianteiro"===t.t0?33:"pesoTraseiro"===t.t0?35:"poltronas"===t.t0?37:39;break;case 6:return t.next=8,e.checkValid(x,j,o,"modeloChassiId","modeloChassi","id","chassi");case 8:return fa(Object(Te.a)(e)),e.setState({pesoDianteiro:void 0,pesoTraseiro:void 0}),t.abrupt("break",40);case 11:return e.checkValid(x,j,i,"modeloCarroceriaId","modelo","id","carroceria"),t.abrupt("break",40);case 13:return e.checkValid(x,j,n,"compartilhadoId","razaoSocial","codigoEmpresa"),t.abrupt("break",40);case 15:return L="Ano de chassi inv\xe1lido.",O&&O<C-1&&(k="O ano de fabrica\xe7\xe3o do chassi informado \xe9 anterior \xe0 idade m\xe1xima permitida para cadastro."),w&&O&&(w<O||w>O+f)&&(k="O ano de chassi \xe9 incompat\xedvel com o ano da carroceria informado."),k&&e.setState({anoChassi:"",openAlertDialog:!0,customTitle:L,customMessage:k}),t.abrupt("break",40);case 20:return L="Ano de carroceria inv\xe1lido.",w&&w<C&&(k="O ano de fabrica\xe7\xe3o do carroceria informado \xe9 anterior \xe0 idade m\xe1xima permitida."),w&&O&&(w<O||w>O+f)&&(k="O ano de fabrica\xe7\xe3o carroceria \xe9 incompat\xedvel com o ano do chassi informado."),k&&e.setState({anoCarroceria:"",openAlertDialog:!0,customTitle:L,customMessage:k}),t.abrupt("break",40);case 25:return g&&(N=ua(g,b,s)),b&&+b>+y&&(N="A Dist\xe2ncia m\xednima n\xe3o pode ser superior \xe0 dist\xe2ncia m\xe1xima."),N&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xednima inv\xe1lida.",customMessage:N,distanciaMinima:""}),t.abrupt("break",40);case 29:return g&&(P=ua(g,y,s)),y&&+y<+b&&(P="A Dist\xe2ncia m\xe1xima n\xe3o pode ser inferior \xe0 dist\xe2ncia m\xednima."),P&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xe1xima inv\xe1lida.",customMessage:P,distanciaMaxima:""}),t.abrupt("break",40);case 33:case 35:case 37:return ma(Object(Te.a)(e),x),t.abrupt("break",40);case 39:case 40:if("placa"!==x||"string"===typeof e.state.frota){t.next=52;break}if(7!==j.length){t.next=46;break}return I=j.replace(/(\w{3})/,"$1-"),t.next=45,e.setState({placa:I,reactivated:!1});case 45:j=I;case 46:if(8!==j.length){t.next=51;break}return D=j.replace(" ","-"),t.next=50,e.setState({placa:D,reactivated:!1});case 50:j=D;case 51:e.checkPlateConflict(j);case 52:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.checkPlateConflict=function(){var t=Object(S.a)(va().mark((function t(a){var r,n,o,i,c,l,s;return va().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.a.get("/api/checkVehicleExistence?placa=".concat(a));case 2:if(r=t.sent,n=null===r||void 0===r?void 0:r.data,o=null===n||void 0===n?void 0:n.vehicleFound,!n||e.state.demand){t.next=22;break}if("existing"!==(l=n.status)){t.next=14;break}return(null===o||void 0===o?void 0:o.situacao.match(/Cadastro|Reativa\xe7\xe3o/g))?(i="Solicita\xe7\xe3o aberta.",c="J\xe1 existe uma solicita\xe7\xe3o de cadastro ou reativa\xe7\xe3o para a placa informada. Para acompanhar, acesse 'Solicita\xe7\xf5es' e filtre pela placa do ve\xedculo. "):(i="Ve\xedculo j\xe1 cadastrado.",c="A placa informada corresponde a um ve\xedculo j\xe1 cadastrado. Para alterar o cadastro, v\xe1 para Ve\xedculos -> 'Altera\xe7\xe3o de dados'."),e.setState({customTitle:i,customMessage:c,openAlertDialog:!0,placa:null,reactivated:!1}),a="",t.abrupt("return");case 14:if("Reativado"!==o["Situa\xe7\xe3o"]){t.next=21;break}return t.delegateYield(va().mark((function t(){var a,r,n;return va().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n in a={},r=function(e){da.forEach((function(t){var r=t.field,n=t.label;e===n&&["renavam","nChassi","anoChassi","anoCarroceria"].includes(r)&&(a[r]=o[e])}))},o)r(n);return a.situacao="Reativa\xe7\xe3o solicitada",t.next=6,e.setState(Object(v.a)(Object(v.a)({},a),{},{reactivated:!0}));case 6:return t.abrupt("return",{v:void 0});case 7:case"end":return t.stop()}}),t)}))(),"t0",16);case 16:if("object"!==typeof(s=t.t0)){t.next=19;break}return t.abrupt("return",s.v);case 19:t.next=22;break;case 21:"discharged"===l&&(i="Ve\xedculo baixado.",c="A placa informada corresponde a um ve\xedculo baixado. Para reativar seu cadastro, v\xe1 para Ve\xedculos -> Baixa -> 'Gerenciar Ve\xedculos Baixados'.",e.setState({customTitle:i,customMessage:c,openAlertDialog:!0,placa:null,reactivated:!1}),a="");case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleEquipa=function(){var t=Object(S.a)(va().mark((function t(a){var r,n,o;return va().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.redux[a],n=[],o=[],t.next=4,e.setState({type:a});case 4:!1===e.state.addEquipa&&(e.state[a]&&(o=e.state[a]),r.forEach((function(e){var t=e.item;o.forEach((function(e){e.toLowerCase()===t.toLowerCase()&&n.push(t)}))})),n.forEach((function(t){return e.setState(Object(m.a)({},t,!0))}))),e.setState({addEquipa:!e.state.addEquipa});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleCheck=function(){var t=Object(S.a)(va().mark((function t(a){var r,n,o,i,c,l;return va().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.type,o=e.props.redux[n]){t.next=3;break}return t.abrupt("return");case 3:return i=[],c=[],"equipamentos"===n&&(l="equipamentosId"),"acessibilidade"===n&&(l="acessibilidadeId"),t.next=8,e.setState(Object(v.a)(Object(v.a)({},e.state),{},Object(m.a)({},a,!e.state[a])));case 8:o.forEach((function(t){var a=t.id,r=t.item;!0===e.state[r]&&(i.push(r),c.push(a))})),i[0]?e.setState((r={},Object(m.a)(r,n,i),Object(m.a)(r,l,c),r)):"equipamentos"===n?e.setState(Object(m.a)({equipamentos:[]},l,[])):"acessibilidade"===n&&e.setState(Object(m.a)({acessibilidade:[]},l,[]));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleCadastro=function(){var t=Object(S.a)(va().mark((function t(a){var r,n,o,i,c,l,s,u,d,f,p,h,v,g,b,y,E,x,w,S,j,L,k,C,N,I,A,_,T,F;return va().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(I in n=e.state,o=n.equipamentosId,i=n.acessibilidadeId,c=n.pbt,l=n.compartilhadoId,s=n.modeloChassiId,u=n.originalVehicle,d=n.getUpdatedValues,f=n.modeloCarroceriaId,p=n.selectedEmpresa,h=n.showPendencias,v=n.obs,g=n.form,b=n.demand,y=n.demandFiles,E=n.reactivated,x=p.codigoEmpresa,w=null===b||void 0===b?void 0:b.veiculoId,S=(null===b||void 0===b||null===(r=b.history)||void 0===r?void 0:r.length)||0,L="Cadastro solicitado",k={},pt.forEach((function(t){t.forEach((function(t){for(var a in e.state)a===t.field&&""!==e.state[a]&&Object.assign(k,Object(m.a)({},a,e.state[a]))}))})),k.delegatarioCompartilhado,k.modeloChassi,k.modeloCarroceria,k.apolice,C=k.numeroDae,N=Object(O.a)(k,ha),Object.assign(N,{codigoEmpresa:x,situacao:L,pbt:c,modeloChassiId:s,modeloCarroceriaId:f,obs:v,equipamentosId:o,acessibilidadeId:i,apolice:"Seguro n\xe3o cadastrado"}),N)""===N[I]&&delete N[I];if(console.log(N),N.compartilhadoId=l&&l,b&&u&&(N=d(u,N)),A=P.a.decamelizeKeys(N),w){t.next=16;break}return t.next=14,D.a.post("/api/veiculos",A).then((function(e){j=e.data})).catch((function(e){return console.log(e)}));case 14:t.next=21;break;case 16:return b&&a&&!h&&(L="Seguro n\xe3o cadastrado"),A.veiculo_id=w,A.situacao=L,t.next=21,D.a.put("/api/veiculos",A);case 21:"string"===typeof(_=e.state.info)&&C&&(_+="\n\n N\xba Documento Arrecada\xe7\xe3o Estadual: ".concat(C)),T={empresaId:null===p||void 0===p?void 0:p.codigoEmpresa,veiculoId:j,history:{info:_,numeroDae:C,files:g},metadata:{veiculoId:j},demandFiles:y,historyLength:S,approved:a},b&&(T.id=null===b||void 0===b?void 0:b.id),E&&(T.subject="Reativa\xe7\xe3o de ve\xedculo"),Xe(T).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),a?e.toast():(F="Solicita\xe7\xe3o de cadastro enviada.",b&&b.status.match("Aguardando")&&(F="Pend\xeancias para o cadastro registradas."),e.toast(F)),b?setTimeout((function(){e.props.history.push("/solicitacoes")}),1500):e.resetState();case 29:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleFiles=function(){var t=Object(S.a)(va().mark((function t(a,r){var n;return va().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a||!a[0]){t.next=5;break}return t.next=3,e.setState(Object(m.a)({},r,a[0]));case 3:n=Re(a,e.state,Lt),e.setState(Object(v.a)(Object(v.a)({},n),{},{fileToRemove:null}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.removeFile=function(){var t=Object(S.a)(va().mark((function t(a){var r,n;return va().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.state.form,n=Be(a,r),e.setState(Object(v.a)(Object(v.a)({},e.state),n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.resetState=function(){var t,a=e.props.redux,r=a.empresas,n=a.veiculos,o=a.equipamentos,i=a.acessibilidade,c=o.concat(i),l={},s={};pt.forEach((function(t){return t.forEach((function(t){return e.setState(Object(m.a)({},t.field,""))}))})),Lt.forEach((function(e){var t=e.name;Object.assign(l,Object(m.a)({},t,void 0))})),c.forEach((function(t){return e.setState(Object(m.a)({},t.item,!1))})),r&&1===r.length&&(s={selectedEmpresa:r[0],razaoSocial:null===(t=r[0])||void 0===t?void 0:t.razaoSocial,frota:n}),e.setState(Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)({},l),{acessibilidade:[],acessibilidadeId:[],equipamentos:[],equipamentosId:[]}),c),{},{form:void 0,info:void 0,activeStep:0},s))},e.closeEquipa=function(){return e.setState({addEquipa:!1})},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.removePartilha=function(){return e.setState({compartilhado:void 0})},e.toast=function(t){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:t||e.state.toastMsg})},e.escFunction=function(t){27===t.keyCode&&e.state.addEquipa&&e.closeEquipa()},e}return Object(L.a)(a,[{key:"componentDidMount",value:function(){var e=Object(S.a)(va().mark((function e(){var t,a,r,n,o,i,c,l,s,u,d,f,p,h,g,b,y;return va().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.props.redux,i=o.equipamentos,c=o.acessibilidade,l=o.empresas,s=o.veiculos,u=null===(t=this.props)||void 0===t||null===(a=t.location)||void 0===a||null===(r=a.state)||void 0===r?void 0:r.demand,l&&1===l.length&&this.setState({selectedEmpresa:l[0],razaoSocial:null===(n=l[0])||void 0===n?void 0:n.razaoSocial,frota:s}),u&&(f=!1,h=Fe(u,o),g=(null===u||void 0===u?void 0:u.history)&&(null===(d=u.history.reverse().find((function(e){return e.hasOwnProperty("numeroDae")})))||void 0===d?void 0:d.numeroDae),console.log("\ud83d\ude80 ~ file: CadVeiculo.jsx ~ line 75 ~ VeiculosContainer ~ componentDidMount ~ demandState",h),u.status.match("Pend\xeancias")&&(p=!0,h.obs=void 0),h.situacao.match("Reativa\xe7\xe3o")&&(f=!0),this.setState(Object(v.a)(Object(v.a)({},h),{},{numeroDae:g,activeStep:3,reactivated:f,existingPendencias:p}))),b={},y={},i.forEach((function(e){return Object.assign(b,Object(m.a)({},null===e||void 0===e?void 0:e.item,!1))})),c.forEach((function(e){return Object.assign(y,Object(m.a)({},null===e||void 0===e?void 0:e.item,!1))})),e.next=8,this.setState(Object(v.a)(Object(v.a)({},b),y));case 8:document.addEventListener("keydown",this.escFunction,!1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({}),document.removeEventListener("keydown",this.escFunction,!1)}},{key:"render",value:function(){var e=this.state,t=e.confirmToast,a=e.toastMsg,o=e.activeStep,i=e.openAlertDialog,c=e.alertType,l=e.steps,s=e.selectedEmpresa,u=e.dropDisplay,d=e.form,f=e.demand,p=e.placa,m=e.demandFiles,h=e.showPendencias,v=e.info,g=e.resetShared,b=e.customMessage,y=e.customTitle,E=e.obs,x=e.existingPendencias,w=this.props.redux;return n.a.createElement(r.Fragment,null,n.a.createElement(Kt,{links:["Ve\xedculos","/veiculos"],text:"Cadastro de ve\xedculo",demand:f,selectedEmpresa:s}),n.a.createElement(ta,{activeStep:o,steps:l,setActiveStep:this.setActiveStep}),n.a.createElement(gt,{data:this.state,redux:w,handleInput:this.handleInput,handleBlur:this.handleBlur,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck,closeEquipa:this.closeEquipa,match:this.props.match,resetShared:g,removePartilha:this.removePartilha}),2===o&&n.a.createElement(Nt,{parentComponent:"cadastro",dropDisplay:u,formData:d,handleFiles:this.handleFiles,demandFiles:m,fileToRemove:this.state.fileToRemove,removeFile:this.removeFile}),3===o&&n.a.createElement(Yt,{parentComponent:"cadastro",data:this.state,files:this.state.form,filesForm:Lt,form:pt}),s&&n.a.createElement(Xt,{activeStep:o,lastStep:l.length-1,setActiveStep:this.setActiveStep,demand:f,setShowPendencias:this.setShowPendencias,showPendencias:h,info:v,handleSubmit:this.handleCadastro,handleInput:this.handleInput,addObs:f&&!x&&!h,obs:E,disabled:"string"!==typeof p||""===p}),n.a.createElement(ee,{open:t,close:this.toast,msg:a}),i&&n.a.createElement(sa,{open:i,close:this.toggleDialog,alertType:c,customMessage:b,customTitle:y}))}}]),a}(r.PureComponent)),ba=function(e,t){var a=window.location.pathname;We.forEach((function(e,t){return e.path=We[t].path.replace("/veiculos","").replace("/solicitacoes","").replace("/empresas","")}));var r=We.find((function(e){return a.match(null===e||void 0===e?void 0:e.path)})),n=null===r||void 0===r?void 0:r.subject,o=null===r||void 0===r?void 0:r.primaryKey,i=t.find((function(t){return t.subject===n&&t[o]==e&&!1===t.completed}));return i||!1},ya=[[{field:"placa",label:"Placa",autoComplete:!0,collection:"frota"},{field:"compartilhado",label:"Delegat\xe1rio Compartilhado",disabled:!0,notRequired:!0},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Comercial","Comercial Executivo","Convencional","Convencional Executivo","Leito","Leito e Executivo","Semi-Leito","Semi-Leito Executivo"]},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Aliena\xe7\xe3o Fiduci\xe1ria","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50},{field:"renavam",label:"Renavam",margin:"normal",disabled:!0},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17,disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",disabled:!0},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",disabled:!0},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",disabled:!0},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",disabled:!0},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,disabled:!0}]].concat([[{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piquesPoltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150},{field:"eixos",label:"Eixos",margin:"normal",type:"number",max:8},{field:"pneumaticosDianteiro",label:"Pneum\xe1ticos Eixo Dianteiro",margin:"normal",type:"number",max:12},{field:"pneumaticosTraseiro",label:"Pneum\xe1ticos Eixo Traseiro",margin:"normal",type:"number",max:18},{field:"pesoDianteiro",label:"Peso Dianteiro (t)",margin:"normal",type:"number",max:15},{field:"pesoTraseiro",label:"Peso Traseiro (t)",margin:"normal",type:"number",max:18},{field:"cilindros",label:"Cilindros",margin:"normal",type:"number",max:12,step:1,disabled:!0},{field:"potencia",label:"Pot\xeancia (cv)",margin:"normal",type:"number",max:600,disabled:!0},{field:"numeroDae",label:"N\xba Documento Arrecada\xe7\xe3o Estadual",maxLength:40}]]).concat([[]]).concat([[]]),Ea=Object($.a)((function(e){return{button:{marginRight:"15px"}}})),xa=function(e){var t=e.handleInput,a=e.handleBlur,r=e.data,o=e.handleCheck,i=e.handleEquipa,c=e.altPlacaOption,l=e.showAltPlaca,s=e.empresas,u=e.compartilhados,d=e.equipamentos,f=e.acessibilidade,p=e.close,m=r.activeStep,h=r.subtitle,v=r.placa,g=r.selectedEmpresa,b=r.addEquipa,y=r.demand,E=r.type,x=Ea().button,w=ya[m],O=d;return"acessibilidade"===E&&(O=f),n.a.createElement("div",{className:"flex center"},n.a.createElement("header",{className:"flex center",style:{marginBottom:"10px",width:"100%"}},n.a.createElement(tt,{data:r,empresas:s,compartilhados:u,headerTitle:g&&"Altera\xe7\xe3o de dados ".concat(v||""," - ").concat(null===g||void 0===g?void 0:g.razaoSocial),handleInput:t,handleBlur:a})),g&&n.a.createElement("main",null,m<2&&n.a.createElement("section",{className:"paper"},n.a.createElement(it,{subtitle:h[m]}),n.a.createElement(ot,{form:w,data:r,empresas:s,compartilhados:u,handleBlur:a,handleInput:t,disableSome:y?["placa","delegatario"]:["delegatario"]})),0===m&&n.a.createElement("section",{className:"flex center"},n.a.createElement(st.a,{variant:"outlined",size:"small",color:"primary",className:x,onClick:function(){return i("equipamentos")}},n.a.createElement(dt.a,null),"Equipamentos"),n.a.createElement(st.a,{variant:"outlined",size:"small",color:"primary",className:x,onClick:function(){return i("acessibilidade")}},n.a.createElement(dt.a,null),"Acessibilidade")),c&&v.match("[a-zA-Z]{3}[-]?\\d{4}")&&n.a.createElement("div",{className:"addNewDiv"},n.a.createElement("span",{onClick:function(){return l()}}," \u2192 Clique aqui para alterar a placa para o formato Mercosul.")),b&&n.a.createElement(ht,{type:E,equipamentos:O,close:p,handleCheck:o,data:r})))};function wa(e){var t=e.open,a=e.close,r=e.title,o=e.header,i=e.inputNames,c=e.inputLabels,l=e.fileInputName,s=e.confirm,u=e.handleInput,d=e.handleFiles,f=e.values,p=e.formData,m=e.dropDisplay,h=e.type,v=void 0===h?"text":h,g=!0,b=function(e,t){if("newPlate"===e)return t.length<9&&t.match("[a-zA-Z]{3}?[-]\\d{1}\\w{1}\\d{2}")?(g=!1,!1):(g=!0,!0)};return n.a.createElement(na.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title"},n.a.createElement(la.a,{id:"form-dialog-title"},r),n.a.createElement(ia.a,null,n.a.createElement(ca.a,null,o),n.a.createElement("br",null),i.map((function(e,t){return n.a.createElement(rt.a,{key:t,autoFocus:"newPlate"===e&&!0,name:e,label:c[t],onChange:u,values:f[t],type:v,error:b(e,f[t]),fullWidth:!0,InputLabelProps:{shrink:!0}})})),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(St,{title:"Anexar arquivo",name:l,formData:p,dropDisplay:m,handleFiles:d})),n.a.createElement(oa.a,null,n.a.createElement(st.a,{onClick:a,color:"primary"},"Cancelar"),n.a.createElement(st.a,{onClick:s,color:"primary",disabled:g},"Confirmar")))}var Oa=["delegatario","compartilhado"];function Sa(){Sa=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var ja=we(["veiculos","empresas","compartilhados","equipamentos","acessibilidade","getFiles/vehicleDocs","parametros"],function(e){Object(k.a)(a,e);var t=Object(C.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).state={stepTitles:["Informe a placa para alterar os dados abaixo ou mantenha as informa\xe7\xf5es atuais e clique em avan\xe7ar","Altere os dados desejados abaixo e clique em avan\xe7ar","Anexe os documentos solicitados","Revis\xe3o das informa\xe7\xf5es e deferimento"],steps:["Alterar dados do Ve\xedculo","Alterar dados adicionais","Documentos","Revis\xe3o"],subtitle:["Informe os dados do ve\xedculo.","Informa\xe7\xf5es adicionais","Anexe os arquivos solicitados","Revis\xe3o"],empresas:[],razaoSocial:"",compartilhadoId:"",frota:[],toastMsg:"Dados atualizados!",confirmToast:!1,activeStep:0,files:[],openAlertDialog:!1,altPlaca:!1,newPlate:"",placa:"",addEquipa:!1,dropDisplay:"Clique ou arraste para anexar",showPendencias:!1},e.setActiveStep=function(){var t=Object(S.a)(Sa().mark((function t(a){var r,n,o,i,c,l,s,u;return Sa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.redux.parametros[0]&&e.props.redux.parametros[0],n=r.inputValidation,"next"!==a||!n){t.next=9;break}if(o=e.props,i=o.checkBlankInputs,c=o.checkInputErrors,l=c("sendState"),s=i(ya[e.state.activeStep],e.state),!l){t.next=6;break}return e.setState(Object(v.a)(Object(v.a)({},e.state),l)),t.abrupt("return");case 6:if(!s){t.next=9;break}return e.setState(Object(v.a)(Object(v.a)({},e.state),s)),t.abrupt("return");case 9:u=e.state.activeStep,"next"===a&&e.setState({activeStep:u+1}),"back"===a&&e.setState({activeStep:u-1}),"reset"===a&&e.setState({activeStep:0});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleInput=function(){var t=Object(S.a)(Sa().mark((function t(a){var r,n,o,i,c,l,s,u,d,f;return Sa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.redux,n=r.veiculos,o=r.empresas,i=r.equipamentos,c=a.target,l=c.name,s=c.value,"razaoSocial"!==l){t.next=13;break}if(!(u=o.find((function(e){return e.razaoSocial===s})))){t.next=11;break}return t.next=6,e.setState({razaoSocial:u.razaoSocial,selectedEmpresa:u});case 6:s!==u.razaoSocial&&e.setState({selectedEmpresa:void 0}),d=n.filter((function(t){return t.empresa===e.state.razaoSocial})),e.setState({frota:d}),t.next=13;break;case 11:e.setState({selectedEmpresa:void 0,frota:[]}),e.reset();case 13:"placa"===l&&e.state.frota&&(e.state.frota.find((function(e){return e.placa===s}))||i.forEach((function(t){return e.setState(Object(m.a)({},t,!1))}))),"utilizacao"===l&&e.setState({distanciaMinima:void 0,distanciaMaxima:void 0}),"newPlate"===l?"string"===typeof(f=s)&&((f=f.replace(/[a-z]/g,(function(e){return e.toUpperCase()}))).match("[A-Z]{3}[0-9]{1}[A-Z]{1}[0-9]{2}")&&(f=f.replace(/(\w{3})/,"$1-")),e.setState(Object(v.a)(Object(v.a)({},e.state),{},{newPlate:f}))):e.setState(Object(m.a)({},l,s));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getId=function(){var t=Object(S.a)(Sa().mark((function t(a,r,n,o,i,c){var l,s,u,d,f,p;return Sa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=n.filter((function(e){return e[i].toLowerCase().match(r.toLowerCase())})),""===r&&e.setState((l={},Object(m.a)(l,a,""),Object(m.a)(l,o,""),l)),!s[0]){t.next=10;break}if(u=s[0][i],d=s[0][c],""===r){t.next=8;break}return t.next=8,e.setState((f={},Object(m.a)(f,a,u),Object(m.a)(f,o,d),f));case 8:t.next=14;break;case 10:return t.next=12,e.setState((p={},Object(m.a)(p,a,""),Object(m.a)(p,o,""),p));case 12:e.setState({openAlertDialog:!0,alertType:"empresaNotFound"}),document.getElementsByName(a)[0].focus();case 14:case"end":return t.stop()}}),t)})));return function(e,a,r,n,o,i){return t.apply(this,arguments)}}(),e.capitalize=function(e,t){if(t&&"string"===typeof t)return"utilizacao"===e&&("RODOVIARIO"===t&&(t="Convencional"),"EXECUTIVO"===t&&(t="Convencional Executivo"),"URBANO"===t&&(t="Comercial"),"URBANO EXECUTIVO"===t&&(t="Comercial Executivo"),"SEMI LEITO"===t&&(t="Semi-Leito"),"SEMI LEITO - EXECUTIVO"===t&&(t="Semi-Leito Executivo"),"LEITO"===t&&(t="Leito"),"LEITO E EXECUTIVO"===t&&(t="Leito e Executivo")),"dominio"===e&&"Sim"===t&&(t="Leasing"),"dominio"===e&&"N\xe3o"===t&&(t="Ve\xedculo pr\xf3prio"),t},e.handleBlur=function(){var t=Object(S.a)(Sa().mark((function t(a){var r,n,o,i,c,l,s,u,d,f,p,h,g,b,y,E,x,w,O,S,j,L,k,C,N,P,I,D,A;return Sa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props.redux,n=r.empresas,o=r.compartilhados,i=r.logs,c=r.equipamentos,l=r.acessibilidade,s=r.parametros,u=s[0].distanciaPoltronas,d=e.state,f=d.frota,p=d.demand,h=d.utilizacao,g=d.distanciaMinima,b=d.distanciaMaxima,y=a.target.name,E=a.target.value,(x=de())?e.setState({errors:x}):e.setState({errors:void 0}),t.t0=y,t.next="compartilhado"===t.t0?7:"delegatario"===t.t0?9:"distanciaMinima"===t.t0?12:"distanciaMaxima"===t.t0?16:"pesoDianteiro"===t.t0?20:"pesoTraseiro"===t.t0?22:"poltronas"===t.t0?24:26;break;case 7:return e.getId(y,E,o,"compartilhadoId","razaoSocial","codigoEmpresa"),t.abrupt("break",27);case 9:return t.next=11,e.getId(y,E,n,"codigoEmpresa","razaoSocial","codigoEmpresa");case 11:return t.abrupt("break",27);case 12:return h&&(w=ua(h,g,u)),g&&b&&+g>+b&&(w="A Dist\xe2ncia m\xednima n\xe3o pode ser superior \xe0 dist\xe2ncia m\xe1xima."),w&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xednima inv\xe1lida.",customMessage:w,distanciaMinima:""}),t.abrupt("break",27);case 16:return h&&(O=ua(h,b,u)),b&&g&&+b<+g&&(O="A Dist\xe2ncia m\xe1xima n\xe3o pode ser inferior \xe0 dist\xe2ncia m\xednima."),O&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xe1xima inv\xe1lida.",customMessage:O,distanciaMaxima:""}),t.abrupt("break",27);case 20:case 22:case 24:return ma(Object(Te.a)(e),y),t.abrupt("break",27);case 26:case 27:if(!("placa"===y&&E.length>2&&Array.isArray(e.state.frota))){t.next=47;break}if(!(S=e.state.frota.find((function(e){return"string"===typeof E?e.placa.toLowerCase().match(E.toLowerCase()):e.placa.match(E)})))||"object"!==typeof S){t.next=46;break}return k=e.capitalize("utilizacao",null===(j=S)||void 0===j?void 0:j.utilizacao)||null,C=e.capitalize("dominio",null===(L=S)||void 0===L?void 0:L.dominio)||null,N={},c.concat(l).forEach((function(e){var t=e.item;return Object.assign(N,Object(m.a)({},t,!1))})),S=Object.assign({},S,{utilizacao:k,dominio:C}),P=Object.freeze(S),t.next=37,e.setState(Object(v.a)(Object(v.a)(Object(v.a)({},N),S),{},{originalVehicle:P,disable:!0}));case 37:if(void 0!==S&&S.hasOwnProperty("empresa")&&e.setState({delegatario:S.empresa}),p){t.next=46;break}if("Solicita\xe7\xe3o j\xe1 cadastrada",D="J\xe1 existe uma demanda aberta para o ve\xedculo de placa ".concat(S.placa,'. Para acess\xe1-la, clique em "Solicita\xe7\xf5es" no menu superior.'),!ba(null===(I=S)||void 0===I?void 0:I.veiculoId,i)){t.next=46;break}return t.next=44,e.setState({customTitle:"Solicita\xe7\xe3o j\xe1 cadastrada",customMessage:D,openAlertDialog:!0,delegatario:""});case 44:return e.reset(),t.abrupt("return");case 46:""===e.state.placa||S||(A={},f[0]&&Object.keys(f[0]).forEach((function(e){return A[e]=""})),e.setState({alertType:"plateNotFound",openAlertDialog:!0}),e.setState(Object(v.a)(Object(v.a)({},A),{},{disable:!1})));case 47:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleEquipa=function(t){var a=e.props.redux[t],r=[],n=[];!1===e.state.addEquipa&&(e.state[t]&&(n=e.state[t]),a.forEach((function(e){var t=e.item;n.forEach((function(e){e.toLowerCase()===t.toLowerCase()&&r.push(t)}))})),r.forEach((function(t){return e.setState(Object(m.a)({},t,!0))})),console.log(e.state)),e.setState({addEquipa:!e.state.addEquipa,type:t})},e.handleCheck=function(){var t=Object(S.a)(Sa().mark((function t(a,r){var n,o,i,c,l;return Sa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.props.redux[r]){t.next=3;break}return t.abrupt("return");case 3:return i=[],c=[],"equipamentos"===r&&(l="equipamentosId"),"acessibilidade"===r&&(l="acessibilidadeId"),t.next=8,e.setState(Object(v.a)(Object(v.a)({},e.state),{},Object(m.a)({},a,!e.state[a])));case 8:o.forEach((function(t){var a=t.id,r=t.item;!0===e.state[r]&&(i.push(r),c.push(a))})),i[0]?e.setState((n={},Object(m.a)(n,r,i),Object(m.a)(n,l,c),n)):"equipamentos"===r?e.setState(Object(m.a)({equipamentos:[]},l,[])):"acessibilidade"===r&&e.setState(Object(m.a)({acessibilidade:[]},l,[]));case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.showAltPlaca=function(){e.setState({altPlaca:!0,title:"Altera\xe7\xe3o de placa",header:"Para alterar a placa do ve\xedculo para o padr\xe3o Mercosul, digite a placa no campo abaixo e anexe o CRLV atualizado do ve\xedculo."})},e.updatePlate=function(){e.setState({placa:e.state.newPlate}),e.toggleDialog()},e.handleSubmit=function(){var t=Object(S.a)(Sa().mark((function t(a){var r,n,o,i,c,l,s,u,d,f,p,h,v,g,b,y,E,x,w,S,j,L,k,C,N,I;return Sa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,o=n.veiculoId,i=n.pbt,c=n.codigoEmpresa,l=n.originalVehicle,s=n.showPendencias,u=n.getUpdatedValues,d=n.numeroDae,f=n.compartilhadoId,p=n.newPlate,h=n.selectedEmpresa,v=n.equipamentosId,g=n.acessibilidadeId,b=n.demand,y=n.form,E=n.demandFiles,x=(null===b||void 0===b||null===(r=b.history)||void 0===r?void 0:r.length)||0,w={},ya.forEach((function(t){t.forEach((function(t){for(var a in e.state)a!==t.field||t.disabled||e.state[a]&&Object.assign(w,Object(m.a)({},a,e.state[a]))}))})),w=Object.assign(w,{compartilhadoId:f,pbt:i,equipamentosId:v,acessibilidadeId:g}),b&&u&&(w=u(l,w)),(S=w).delegatario,S.compartilhado,delete(j=Object(O.a)(S,Oa)).numeroDae,p&&""!==p&&(j.placa=p),e.state.compartilhado&&""!==e.state.compartilhado||!(null===l||void 0===l?void 0:l.compartilhadoId)||(j.compartilhadoId="NULL"),void 0!==a||0!==Object.keys(j).length){t.next=12;break}return e.setState({openAlertDialog:!0,customTitle:"Nenhuma altera\xe7\xe3o",customMessage:"N\xe3o foi realizada nenhuma altera\xe7\xe3o na solicita\xe7\xe3o aberta. Para prosseguir, altere algum dos campos ou adicione uma justificativa."}),t.abrupt("return");case 12:if("string"===typeof(L=e.state.info)&&(L+="\n\n N\xba Documento Arrecada\xe7\xe3o Estadual: ".concat(d)),k={alteracoes:j,info:L,numeroDae:d,files:y},C={empresaId:null===h||void 0===h?void 0:h.codigoEmpresa,veiculoId:o,history:k,demandFiles:E,metadata:{veiculoId:o},historyLength:x,approved:a},b&&(C.id=null===b||void 0===b?void 0:b.id),Xe(C).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),!b||!a||s){t.next=25;break}return(N=P.a.decamelizeKeys(j)).codigo_empresa=c,N.veiculo_id=o,h.codigoEmpresa!==c&&(N.apolice="Seguro n\xe3o cadastrado"),console.log("\ud83d\ude80 ~ file: AltDados.jsx ~ line 450 ~ AltDados ~ handleSubmit= ~ requestObject",N),t.next=25,D.a.put("/api/veiculos",N);case 25:a?e.toast():(I="Solicita\xe7\xe3o de altera\xe7\xe3o de dados enviada.",b&&b.status.match("Aguardando")&&(I="Pend\xeancias para a altera\xe7\xe3o de dados registradas."),e.toast(I)),b?setTimeout((function(){e.props.history.push("/solicitacoes")}),1500):setTimeout((function(){e.reset()}),1200);case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleFiles=function(){var t=Object(S.a)(Sa().mark((function t(a,r){var n;return Sa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a||!a[0]){t.next=5;break}return t.next=3,e.setState(Object(m.a)({},r,a[0]));case 3:n=Re(a,e.state,kt),e.setState(Object(v.a)(Object(v.a)({},n),{},{fileToRemove:null}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.removeFile=function(){var t=Object(S.a)(Sa().mark((function t(a){var r,n;return Sa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.state.form,n=Be(a,r),e.setState(Object(v.a)(Object(v.a)({},e.state),n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({altPlaca:!e.state.altPlaca})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.closeEquipa=function(){return e.setState({addEquipa:!1})},e.toast=function(t){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:t||e.state.toastMsg})},e.reset=function(){var t,a=e.props.redux,r=a.empresas,n=a.veiculos,o=a.equipamentos,i=a.acessibilidade,c=o.concat(i),l={},s={};ya.forEach((function(t){return t.forEach((function(t){return e.setState(Object(m.a)({},t.field,""))}))})),kt.forEach((function(e){var t=e.name;Object.assign(l,Object(m.a)({},t,void 0))})),c.forEach((function(t){return e.setState(Object(m.a)({},t.item,!1))})),r&&1===r.length&&(s={selectedEmpresa:r[0],razaoSocial:null===(t=r[0])||void 0===t?void 0:t.razaoSocial,frota:n}),e.setState(Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)({},l),{acessibilidade:[],acessibilidadeId:[],equipamentos:[],equipamentosId:[]}),c),{},{form:void 0,info:void 0,activeStep:0},s))},e.escFunction=function(t){27===t.keyCode&&e.state.addEquipa&&e.closeEquipa()},e}return Object(L.a)(a,[{key:"componentDidMount",value:function(){var e=Object(S.a)(Sa().mark((function e(){var t,a,r,n,o,i,c,l,s,u,d,f,p,h,g,b,y,E,x;return Sa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.props.redux,i=o.equipamentos,c=o.acessibilidade,l=o.empresas,s=o.veiculos,u=null===(t=this.props)||void 0===t||null===(a=t.location)||void 0===a||null===(r=a.state)||void 0===r?void 0:r.demand,l&&1===l.length&&this.setState({selectedEmpresa:l[0],razaoSocial:null===(n=l[0])||void 0===n?void 0:n.razaoSocial,frota:s}),u&&(f=Fe(u,o),p=f.originalVehicle,h=f.getUpdatedValues,g=f.alteracoes,b=f.compartilhadoId,y=(null===u||void 0===u?void 0:u.history)&&(null===(d=u.history.reverse().find((function(e){return e.hasOwnProperty("numeroDae")})))||void 0===d?void 0:d.numeroDae),h(p,g),"NULL"===b&&(f.compartilhado=""),this.setState(Object(v.a)(Object(v.a)({},f),{},{numeroDae:y,activeStep:3}))),E={},x={},i.forEach((function(e){return Object.assign(E,Object(m.a)({},null===e||void 0===e?void 0:e.item,!1))})),c.forEach((function(e){return Object.assign(x,Object(m.a)({},null===e||void 0===e?void 0:e.item,!1))})),e.next=8,this.setState(Object(v.a)(Object(v.a)({},E),x));case 8:document.addEventListener("keydown",this.escFunction,!1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.props.redux,t=e.empresas,a=e.compartilhados,o=e.equipamentos,i=e.acessibilidade,c=this.state,l=c.confirmToast,s=c.toastMsg,u=c.stepTitles,d=c.activeStep,f=c.steps,p=c.altPlaca,m=c.selectedEmpresa,h=c.openAlertDialog,v=c.alertType,g=c.customTitle,b=c.customMessage,y=c.dropDisplay,E=c.form,x=c.title,w=c.header,O=c.newPlate,S=c.demand,j=c.showPendencias,L=c.info,k=c.demandFiles;return n.a.createElement(r.Fragment,null,n.a.createElement(Kt,{links:["Ve\xedculos","/veiculos"],text:"Altera\xe7\xe3o de dados",demand:S}),n.a.createElement(ta,{activeStep:d,steps:f,stepTitles:u,setActiveStep:this.setActiveStep}),n.a.createElement(xa,{data:this.state,empresas:t,compartilhados:a,equipamentos:o,acessibilidade:i,setActiveStep:this.setActiveStep,altPlacaOption:0===d,handleInput:this.handleInput,handleBlur:this.handleBlur,showAltPlaca:this.showAltPlaca,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck,close:this.closeEquipa}),2===d&&n.a.createElement(Nt,{parentComponent:"altDados",dropDisplay:y,formData:E,handleFiles:this.handleFiles,demandFiles:k,fileToRemove:this.state.fileToRemove,removeFile:this.removeFile}),3===d&&n.a.createElement(Yt,{parentComponent:"altDados",data:this.state,form:ya,files:this.state.form,filesForm:kt}),m&&n.a.createElement(Xt,{activeStep:d,lastStep:f.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep,showPendencias:j,setShowPendencias:this.setShowPendencias,info:L,handleInput:this.handleInput,demand:S}),n.a.createElement(ee,{open:l,close:this.toast,msg:s}),n.a.createElement(wa,{open:p,close:this.toggleDialog,title:x,header:w,inputNames:["newPlate"],inputLabels:["Alterar Placa"],fileInputName:"newPlateDoc",values:[O],handleInput:this.handleInput,handleFiles:this.handleFiles,confirm:this.updatePlate,dropDisplay:y,formData:E}),h&&n.a.createElement(sa,{open:h,close:this.closeAlert,alertType:v,customMessage:b,customTitle:g}))}}]),a}(r.Component)),La=a(486),ka=a(268),Ca=a.n(ka),Na=a(159),Pa=a.n(Na),Ia=[{field:"seguradora",label:"Seguradora",autoComplete:!0,collection:"seguradoras",width:150},{field:"apolice",label:"Ap\xf3lice",autoComplete:!0,collection:"seguros",maxLength:25,width:150},{type:"date",field:"dataEmissao",label:"In\xedcio da vig\xeancia",width:150},{type:"date",field:"vencimento",label:"Vencimento",width:150}],Da=[{title:"Contrato Social",name:"contratoSocial"},{title:"Procura\xe7\xe3o",name:"procuracao"},{title:"Ap\xf3lice",name:"apoliceDoc"},{title:"Altera\xe7\xe3o de contrato social",name:"altContratoDoc"},{title:"CRC",name:"crc"}],Aa=Object($.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"25%",minWidth:310,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"}}}));function _a(e){var t,a=e.empresas,o=e.data,i=e.seguros,c=e.seguradoras,l=e.enableAddPlaca,s=e.handleInput,u=e.handleBlur,d=e.addPlate,f=e.removeFromInsurance,p=e.handleFiles,m=e.handleSubmit,h=e.enableChangeApolice,v=e.showAllPlates,g=e.removeFile,b=e.setShowPendencias,y=o.selectedEmpresa,E=o.placa,x=o.apolice,w=o.addedPlaca,O=o.allVehicles,S=o.frota,j=o.demandFiles,L=o.fileToRemove,k=o.demand,C=o.insurance,N=o.dropDisplay,P=o.apoliceDoc,I=o.showPendencias,D=o.info,A=o.renderedPlacas,_=o.numeroDae;_||(_=(null===k||void 0===k?void 0:k.history)instanceof Array&&(null===k||void 0===k||null===(t=k.history.reverse().find((function(e){return e.numeroDae})))||void 0===t?void 0:t.numeroDae)),o.seguradoras=c;var T=Aa(),F=T.textField,z=i.some((function(e){return e.apolice===x}));return n.a.createElement(r.Fragment,null,n.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},n.a.createElement(Kt,{links:["Ve\xedculos","/veiculos"],text:"Seguros",demand:k}),n.a.createElement(tt,{data:o,empresas:a,handleInput:s,handleBlur:u}),y&&n.a.createElement("section",{className:"paper"},n.a.createElement(it,{subtitle:"Informe os dados do seguro."}),n.a.createElement(ot,{form:Ia,data:o,seguros:i,seguradoras:c,handleBlur:u,handleInput:s}),z&&n.a.createElement("div",{className:"addNewDiv"},n.a.createElement("span",{onClick:function(){return h()}}," \u2192 Clique aqui para adicionar nova ap\xf3lice mantendo as placas abaixo selecionadas."))),y&&l&&n.a.createElement("main",{className:"paper",style:{textAlign:"center",color:"#555"}},n.a.createElement("p",null,"Utilize as op\xe7\xf5es abaixo para filtrar, adicionar ou excluir placas desta ap\xf3lice"),n.a.createElement("section",{className:"flex spaceBetween",style:{paddingTop:"17px"}},n.a.createElement("div",null,n.a.createElement(rt.a,{inputProps:{name:"addedPlaca",list:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Insira a placa",className:F,value:w,onChange:s,onBlur:u}),n.a.createElement(et,{collection:O,field:"placa",value:w}),n.a.createElement(st.a,{size:"small",variant:"contained",className:T.button,style:{margin:"10px 0 10px 0"},onClick:function(){return d(w)}},n.a.createElement(dt.a,null)," Adicionar")),n.a.createElement("div",null,n.a.createElement(rt.a,{inputProps:{name:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Filtrar",className:F,value:E||"",onChange:s,onBlur:u}),n.a.createElement(Pa.a,{style:{marginTop:"18px"}})),k?j[0]&&n.a.createElement("div",{style:{width:"225px",marginTop:"15px"}},n.a.createElement(qt,{demand:k,collection:"empresaDocs",demandFiles:j,form:Da,style:{width:"200px"}})):n.a.createElement(St,{name:"apoliceDoc",formData:P,dropDisplay:N,handleFiles:p,demandFiles:j,removeFile:g,fileToRemove:L,style:{padding:"0 10px",margin:"0 10px",width:"28%",minWidth:"320px"}})),n.a.createElement("section",{className:"flex",style:{margin:"5px 0"}},n.a.createElement(rt.a,{inputProps:{name:"numeroDae"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"N\xba Documento de Arrecada\xe7\xe3o Estadual (DAE)",className:F,value:_||"",onChange:s,onBlur:u})),n.a.createElement("div",{className:"addNewDiv",style:{justifyContent:"flex-start",padding:"10px"}},n.a.createElement("span",{onClick:function(){return v()}},"\u2192 Clique aqui para selecionar placas")),(null===C||void 0===C?void 0:C.placas)&&(null===C||void 0===C?void 0:C.placas[0])?n.a.createElement("div",{style:{marginTop:"15px"}},"Placas vinculadas a ap\xf3lice ",C.apolice):n.a.createElement("div",{style:{marginTop:"30px"}}),C&&C.placas&&x&&x.length>2&&A&&A[0]&&n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{style:{fontSize:"0.7rem",marginBottom:"10px",marginTop:"3px",color:"#787b6e"}},"Selecionado",A.length>1?"s":""," ",A.length," ve\xedculo",A.length>1?"s":""," de ",null===S||void 0===S?void 0:S.length),n.a.createElement("div",{className:"placasChipContainer"},A.map((function(e,t){var a=e.placa,r=e.compartilhado,o=e.outsider,i=e.irregular,c=e.delCompartilhado,l=e.owner;return n.a.createElement("div",{onMouseOver:function(e){return function(e,t){var a=e.compartilhado,r=e.outsider,n=e.irregular,o=e.delCompartilhado,i=e.owner;t.target.title="Ve\xedculo pr\xf3prio",a&&(t.target.title="Ve\xedculo pr\xf3prio. Compartilhado por: ".concat(o)),r&&(t.target.title="Autorizado compartilhamento. Propriet\xe1rio: ".concat(i)),n&&(t.target.title="N\xc3O autorizado compartilhamento! Propriet\xe1rio: ".concat(i))}({compartilhado:r,outsider:o,irregular:i,delCompartilhado:c,owner:l},e)},key:t},n.a.createElement(La.a,{key:t,label:a,onDelete:function(){return f(a)},className:r?"chip-compartilhado":o?"chip-outsider":i?"chip-irregular":"chip",variant:"outlined"}))})))))),x&&(C||l)&&!k?n.a.createElement("div",{style:{minHeight:"60px",position:"flex"}},n.a.createElement(st.a,{size:"small",color:"primary",className:"saveButton",variant:"contained",onClick:function(){return m()}},"Salvar ",n.a.createElement("span",null,"\xa0\xa0 ")," ",n.a.createElement(Ca.a,null))):y&&k?n.a.createElement(Xt,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:k,setShowPendencias:b,showPendencias:I,info:D,handleSubmit:m,handleInput:s}):null)}var Ta=function(e){var t=e.items,a=e.title,r=e.data,o=e.close,i=e.selectAll,c=e.handleCheck,l=e.selectAllPlates;return n.a.createElement("div",{className:"popUpWindow row"},n.a.createElement("h6",null,a," Clique em \"X\" ou pressione 'esc' para voltar"),n.a.createElement("div",{style:{margin:"10px 0",fontSize:"0.8rem"}},n.a.createElement("input",{id:"all",type:"checkbox",checked:!0===i,onChange:function(){return l()}}),n.a.createElement("label",{htmlFor:"all"},i?"Desmarcar todas selecionadas":"Selecionar todas")),n.a.createElement("main",{className:"checkListContainer"},t.map((function(e,t){return n.a.createElement("div",{className:"checkListItem",key:t},n.a.createElement("input",{id:t,type:"checkbox",checked:!0===r[e],onChange:function(){return c(e)}}),n.a.createElement("label",{htmlFor:t},e))}))),n.a.createElement(mt,{close:o}))};function Fa(e){var t=e.open,a=e.close,r=e.title,o=e.helperMessage,i=e.marca,c=e.marcas,l=e.selectMarca,s=e.newElement,u=e.handleInput,d=e.addNewElement;return n.a.createElement("div",null,n.a.createElement(na.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title"},n.a.createElement(la.a,{id:"form-dialog-title"},r),n.a.createElement(ia.a,null,n.a.createElement(ca.a,null,o),n.a.createElement("div",{className:"editFields"},c&&n.a.createElement("div",{className:"configMarca"},n.a.createElement(rt.a,{onChange:l,value:i,label:"Selecione uma marca",select:!0,InputLabelProps:{shrink:!0},SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},c.map((function(e,t){var a=e.marca;return n.a.createElement(at.a,{key:t,value:a},a)})))),n.a.createElement("div",{className:"configField"},n.a.createElement(rt.a,{autoFocus:!0,margin:"dense",name:"newElement",label:"Inserir",type:"text",onChange:u,value:s,fullWidth:!0}))),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null)),n.a.createElement(oa.a,null,n.a.createElement(st.a,{onClick:a,color:"primary"},"Cancelar"),n.a.createElement(st.a,{onClick:function(){return d()},color:"primary"},"Confirmar"))))}var za=function(e,t,a){var r,n={name:"nomeSocio",id:"socioId"};document.location.pathname.match("procurador")&&(n={name:"nomeProcurador",id:"procuradorId"});var o,i,c,l,s=t.empresas,u=t.empresaDocs,d=n,f=d.name,p=d.id,m=(null===e||void 0===e?void 0:e.history)||[],h=null===m||void 0===m?void 0:m.length,v=s.find((function(t){return t.codigoEmpresa===(null===e||void 0===e?void 0:e.empresaId)})),g=null===v||void 0===v?void 0:v.razaoSocial,b=[],y=[];(m[0]&&(o=m[h-1]),o)&&(b=(null===(c=o)||void 0===c?void 0:c.newMembers)||[],y=(null===(l=o)||void 0===l?void 0:l.oldMembers)||[]);var E=(null===(r=m.reverse().find((function(e){return e.files})))||void 0===r?void 0:r.files)||[];E[0]&&(i=u.find((function(e){return e.id===E[0]}))),y[0]&&a.forEach((function(e){y.forEach((function(t){e[p]===t[p]&&Object.keys(t).forEach((function(a){e[a]=t[a]}))}))}));var x=a.concat(b).sort((function(e,t){return e[f].localeCompare(t[f])}));return{razaoSocial:g,selectedEmpresa:v,demand:e,latestDoc:i,newMembers:b,oldMembers:y,getUpdatedValues:Ma,filteredSocios:x}};function Ma(e,t){return Object.keys(t).forEach((function(a){t[a]&&e[a]&&("equipamentosId"!==a&&"acessibilidadeId"!==a||t[a].sort((function(e,t){return e-t})),t[a].toString()===e[a].toString()&&delete t[a]),""!==t[a]&&"null"!==t[a]&&t[a]||delete t[a]})),t}var qa=["latestDoc","newMembers","oldMembers","filteredSocios"];function Ra(){Ra=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Va=we(["veiculos","empresas","seguradoras","seguros","getFiles/empresaDocs"],function(e){Object(k.a)(a,e);var t=Object(C.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).state={addedPlaca:"",razaoSocial:"",seguradora:"",deletedVehicles:[],toastMsg:"Seguro atualizado!",confirmToast:!1,dropDisplay:"Clique ou arraste para anexar a ap\xf3lice",showAllPlates:!1,showPendencias:!1,selectAll:!1},e.filterInsurances=Object(S.a)(Ra().mark((function t(){var a,r,n,o,i,c,l,s,u;return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.redux.seguros,r=e.state.selectedEmpresa,n=r.codigoEmpresa,o=a.filter((function(e){return e.codigoEmpresa===n})),t.next=6,D.a.get("/api/allVehicles?codigoEmpresa=".concat(n));case 6:i=t.sent,c=P.a.camelizeKeys(null===i||void 0===i?void 0:i.data)||[],l=c.map((function(e){return e.placa})).sort(),s=c.filter((function(e){return e.codigoEmpresa===n})),u=s.map((function(e){return e.placa})),e.setState({seguros:o,allVehicles:c,frota:s,ownedPlacas:u,allPlates:l});case 12:case"end":return t.stop()}}),t)}))),e.checkExistence=function(){var t=Object(S.a)(Ra().mark((function t(a){var r,n,o,i,c,l,s,u,d,f,p,m;return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=JSON.parse(JSON.stringify(e.props.redux.seguros)),n=e.state,o=n.selectedEmpresa,i=n.demand,c=o.codigoEmpresa,l=Object(h.a)(r.filter((function(e){return e.codigoEmpresa===c}))),s=Object(v.a)({},l.find((function(e){return e.apolice===a}))),i&&e.state.insurance&&(s=e.state.insurance),!(Object.keys(s).length>0)){t.next=11;break}return u=ue()(s.dataEmissao).format("YYYY-MM-DD"),d=ue()(s.vencimento).format("YYYY-MM-DD"),p=(f=s).seguradora,m=f.seguradoraId,t.next=8,e.setState({seguradora:p,seguradoraId:m,dataEmissao:u,vencimento:d,insurance:s});case 8:return t.abrupt("return");case 11:e.setState({dataEmissao:"",vencimento:"",deletedVehicles:[],insurance:{}});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderPlacas=function(t){var a=e.state,r=a.allVehicles,n=a.insurance,o=a.ownedPlacas;if(n){t||(t=n.placas);var i=[];t&&(t.forEach((function(t){var a=r.find((function(e){return e.placa===t}));if(a){var n=a.placa,c=a.empresa,l=a.compartilhado,s={placa:n,owner:c,delCompartilhado:l};o.includes(n)?s.compartilhado=!!l:l?Object.assign(s,{outsider:!0}):Object.assign(s,{irregular:!0}),i.push(s)}else e.setState({renderedPlacas:i})})),e.setState({renderedPlacas:i}))}},e.handleInput=function(){var t=Object(S.a)(Ra().mark((function t(a){var r,n,o,i,c,l,s,u,d,f,p,h,v,g,b,y,E,x,w,O,S,j;return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.target.value,n=a.target.name,o=e.props.redux,i=o.empresas,c=o.seguradoras,l=e.state,s=l.selectedEmpresa,u=l.allVehicles,d=l.insurance,f=l.apolice,p=l.dataEmissao,h=l.vencimento,v=l.newInsurance,g=l.seguradora,e.setState(Object(m.a)({},n,r)),t.t0=n,t.next="razaoSocial"===t.t0?6:"apolice"===t.t0?17:"seguradora"===t.t0?22:"placa"===t.t0?25:"addedPlaca"===t.t0?28:31;break;case 6:if(!(b=i.find((function(e){return e.razaoSocial===r})))){t.next=14;break}return t.next=10,e.setState({razaoSocial:b.razaoSocial,selectedEmpresa:b});case 10:r!==b.razaoSocial&&e.setState({selectedEmpresa:void 0}),e.filterInsurances(),t.next=16;break;case 14:e.setState({selectedEmpresa:void 0,frota:[]}),e.clearFields();case 16:return t.abrupt("break",32);case 17:return u||e.filterInsurances(),t.next=20,e.checkExistence(r);case 20:return e.renderPlacas(),t.abrupt("break",32);case 22:return(y=c.find((function(e){return e.seguradora===r})))&&e.setState({seguradoraId:y.id}),t.abrupt("break",32);case 25:return E=[],(null===d||void 0===d?void 0:d.placas)&&(d.placas[0]&&null!==d.placas[0]&&(E=d.placas.sort()),void 0!==r&&r.length>2&&E[0]&&(E="string"===typeof r?d.placas.filter((function(e){return e.toLowerCase().match(r.toLowerCase())})).sort():d.placas.filter((function(e){return e.match(r)})).sort()),e.renderPlacas(E)),t.abrupt("break",32);case 28:return(x=u.find((function(e){return e.placa===r})))&&e.setState({vehicleFound:x}),t.abrupt("break",32);case 31:case 32:if(w=["seguradora","apolice","dataEmissao","vencimento"].every((function(t){return e.state[t]&&""!==e.state[t]})),"razaoSocial"===n||v||!w||d){t.next=40;break}return(S=c.find((function(t){return t.seguradora===e.state.seguradora})))&&(O=S.id),j={empresa:s.razaoSocial,codigoEmpresa:s.codigoEmpresa,apolice:f,seguradora:g,seguradoraId:O,dataEmissao:p,vencimento:h,placas:[],veiculos:[]},t.next=40,e.setState({insurance:j,seguradoraId:O});case 40:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleBlur=function(t){var a=e.props.redux,r=a.seguradoras,n=a.seguros,o=e.state,i=o.seguradora,c=o.selectedEmpresa,l=t.target.name,s=null===c||void 0===c?void 0:c.codigoEmpresa;if("seguradora"===l){var u=[],d=r.find((function(e){return e.seguradora.toLowerCase().match(i.toLowerCase())}));d&&i.length>2&&e.setState({seguradora:d.seguradora,seguradoraId:d.id}),!d&&i.length>2&&e.setState({openAlertDialog:!0,alertType:"seguradoraNotFound",seguradora:void 0}),c&&!i?(u=n.filter((function(e){return e.codigoEmpresa===s})),e.setState({seguros:u})):c||""===i?c&&""!==i&&(u=n.filter((function(e){return e.codigoEmpresa===s})).filter((function(e){return e.seguradora===i})),e.setState({seguros:u})):(u=n.filter((function(e){return e.seguradora===i})),e.setState({seguros:u}))}if("dataEmissao"===l||"vencimento"===l){var f=de();f?e.setState({errors:f}):e.setState({errors:void 0})}},e.showAllPlates=function(){var t=e.state,a=t.insurance,r=t.allPlates,n=[],o={};(null===a||void 0===a?void 0:a.placas)&&(n=a.placas),r.forEach((function(e){return Object.assign(o,Object(m.a)({},e,!1))})),n.forEach((function(e){return Object.assign(o,Object(m.a)({},e,!0))})),e.setState({allPlatesObj:o,insuredPlates:n,showAllPlates:!e.state.showAllPlates})},e.handleCheck=function(){var t=Object(S.a)(Ra().mark((function t(a){var r;return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=Object(v.a)({},e.state.allPlatesObj))[a]=!r[a],!0===r[a]?e.addPlate(a):e.removeFromInsurance(a),e.setState({allPlatesObj:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.selectAllPlates=function(){var t=e.state,a=t.allPlates,r=t.selectAll,n={};a&&a.forEach((function(t){r?(n[t]=!1,e.removeFromInsurance(t)):(n[t]=!0,e.addPlate(t,!0))})),e.setState({selectAll:!r,allPlatesObj:n})},e.addPlate=function(){var t=Object(S.a)(Ra().mark((function t(a,r){var n,o,i,c,l,s,u,d,f;return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,o=n.apolice,i=n.allVehicles,c=n.deletedVehicles,l=n.insurance,s=i.find((function(e){return e.placa===a})),a&&""!==a){t.next=3;break}return t.abrupt("return");case 3:if(void 0!==s&&!1!==s.hasOwnProperty("veiculoId")){t.next=8;break}return e.setState({openAlertDialog:!0,alertType:"plateNotFound"}),t.abrupt("return",null);case 8:if(!(l&&l.placas&&s.placa)||r){t.next=13;break}if(!l.placas.find((function(e){return e===s.placa}))){t.next=13;break}return e.setState({openAlertDialog:!0,alertType:"plateExists"}),t.abrupt("return",null);case 13:o&&l&&(u=Object(v.a)({},l),d=s.veiculoId,u.placas&&u.placas[0]||(u.placas=[]),u.veiculos&&u.veiculos[0]||(u.veiculos=[]),u.placas.includes(a)||u.placas.push(a),u.veiculos.includes(d)||u.veiculos.push(d),c.includes(d)&&(f=c.indexOf(d),c.splice(f,1)),e.renderPlacas(null===u||void 0===u?void 0:u.placas),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 374 ~ Seguro ~ addPlate= ~ update",u),e.setState({insurance:u,addedPlaca:"",deletedVehicles:c}));case 14:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.removeFromInsurance=function(){var t=Object(S.a)(Ra().mark((function t(a){var r,n,o,i,c,l,s,u,d,f,p,m,g,b,y,E;return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state,n=r.apolice,o=r.allVehicles,i=o.find((function(e){return e.placa===a})),c=i.veiculoId,l=i.placa,s=Object(v.a)({},e.state.insurance),u=Object(h.a)(e.state.deletedVehicles),d=[],f=[],(m=e.props.redux.seguros.find((function(e){return e.apolice===n})))&&m.placas&&(p=m.placas.includes(l)),p&&(g=s.veiculos,b=g.indexOf(c),u.includes(g[b])||(u.push(g[b]),e.setState({deletedVehicles:u}))),s.placas&&(d=s.placas),s.veiculos&&(f=s.veiculos),y=d.indexOf(l),E=f.indexOf(c),s.placas.splice(y,1),s.veiculos.splice(E,1),t.next=12,e.setState({insurance:s});case 12:e.renderPlacas();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleSubmit=function(){var t=Object(S.a)(Ra().mark((function t(a){var r,n,o,i,c,l,s,u,d,f,p,m,h,g,b,y,E;return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state,n=r.insurance,o=r.deletedVehicles,i=r.seguradoraId,c=r.apolice,l=r.numeroDae,s=r.selectedEmpresa,u=r.demand,d=r.apoliceDoc,f=r.info,p=r.dataEmissao,m=r.vencimento,h=s.codigoEmpresa,g=n.veiculos,!e.checkForErrors(n)){t.next=3;break}return t.abrupt("return");case 3:if(b=e.setInsuranceStatus({apolice:c,seguradoraId:i,codigoEmpresa:h,dataEmissao:p,vencimento:m}),y=P.a.decamelizeKeys(b),u){t.next=10;break}return E={empresaId:null===s||void 0===s?void 0:s.codigoEmpresa,history:Object(v.a)(Object(v.a)({},P.a.camelizeKeys(y)),{},{seguradora:e.state.seguradora,vehicleIds:g,info:l?"N\xba Documento Arrecada\xe7\xe3o Estadual: ".concat(l):"N\xfamero do DAE n\xe3o informado",numeroDae:l,files:d,deletedVehicles:o}),demandFiles:e.state.demandFiles,metadata:{fieldName:"apoliceDoc",apolice:c,empresaId:null===s||void 0===s?void 0:s.codigoEmpresa},historyLength:0,approved:a},t.next=8,Xe(E);case 8:return e.confirmAndResetState("Solicita\xe7\xe3o de cadastro de seguro enviada"),t.abrupt("return");case 10:a?e.approveInsurance(y):(Xe({id:u.id,history:{info:f},declined:!0}),e.confirmAndResetState("Solicita\xe7\xe3o indeferida!"));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.approveInsurance=function(){var t=Object(S.a)(Ra().mark((function t(a){var r,n,o,i,c,l,s,u,d,f,p,m,h,g,b,y,E;return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.redux.seguros,n=e.state,o=n.apolice,i=n.vencimento,c=n.dataEmissao,l=n.seguradoraId,s=n.insurance,u=n.demand,d=n.demandFiles,f=u.history[0].deletedVehicles,p=s.veiculos||u.history[0].vehicleIds,m={table:"veiculos",column:"apolice",value:o,tablePK:"veiculo_id",ids:p,deletedVehicles:f},h=r.find((function(e){return e.apolice===o})),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 542 ~ Seguro ~ insuranceExists",h),!h){t.next=15;break}return g=ue()(h.dataEmissao).isSame(ue()(c)),b=ue()(h.vencimento).isSame(ue()(i)),y=JSON.stringify(p)===JSON.stringify(h.veiculos),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 548 ~ Seguro ~ JSON.stringify(insuranceExists.veiculos)",JSON.stringify(h.veiculos)),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 548 ~ Seguro ~  JSON.stringify(vehicleIds)",JSON.stringify(p)),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 548 ~ Seguro ~ vExists",y),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 551 ~ Seguro ~ de && v ",g&&b),t.abrupt("return");case 14:"Vigente"===a.situacao&&(E=P.a.decamelizeKeys({id:null===h||void 0===h?void 0:h.id,seguradoraId:l,situacao:a.situacao,dataEmissao:c,vencimento:i}),D.a.put("/api/seguros",{update:E,vehicleIds:p,deletedVehicleIds:f}));case 15:if("Aguardando in\xedcio da vig\xeancia"!==a.situacao){t.next=20;break}return a.veiculos=p,console.log(Object(v.a)({},a)),t.next=20,D.a.post("/api/upcomingInsurances",Object(v.a)({},a));case 20:if("Vigente"!==a.situacao||h){t.next=23;break}return t.next=23,D.a.post("/api/seguros",a).then((function(e){200===e.status&&console.log(e.status,"cadSeguroOk")}));case 23:return t.next=25,D.a.put("/api/updateInsurances",m).then((function(t){console.log(t.data),e.setState({dontUpdateProps:!0})}));case 25:Xe({id:u.id,demandFiles:d,history:{},metadata:{},approved:!0}),e.confirmAndResetState();case 28:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.confirmAndResetState=function(t){var a=e.state.demand;e.toast(t),e.clearFields(),a&&setTimeout((function(){e.props.history.push("/solicitacoes")}),1500)},e.handleFiles=function(){var t=Object(S.a)(Ra().mark((function t(a){var r;return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!qe(a)){t.next=2;break}return t.abrupt("return");case 2:return(r=new FormData).append("apoliceDoc",a[0]),t.next=6,e.setState({apoliceDoc:r,fileToRemove:null});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeFile=function(){var t=Object(S.a)(Ra().mark((function t(a){var r,n;return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.state.apoliceDoc,n=Be(a,r),e.setState(Object(v.a)(Object(v.a)({},e.state),n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addNewElement=function(){return e.setState({apolice:e.state.newElement,openAddDialog:!1})},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({openAddDialog:!e.state.openAddDialog})},e.toast=function(t){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:t||e.state.toastMsg})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.clearFields=Object(S.a)(Ra().mark((function t(){var a,r,n,o,i,c;return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.redux,n=r.empresas,o=r.veiculos,i={seguradora:"",insurance:void 0,apolice:"",dataEmissao:"",vencimento:"",apoliceDoc:null,deletedVehicles:[],dropDisplay:"Clique ou arraste para anexar a ap\xf3lice"},c={selectedEmpresa:n[0],razaoSocial:null===(a=n[0])||void 0===a?void 0:a.razaoSocial,frota:o},!n||1!==n.length){t.next=7;break}return t.next=4,e.setState(Object(v.a)(Object(v.a)({},i),c));case 4:e.filterInsurances(),t.next=8;break;case 7:n&&e.setState(Object(v.a)({},i));case 8:case"end":return t.stop()}}),t)}))),e.escFunction=function(t){27===t.keyCode&&(e.state.openAddDialog&&e.toggleDialog(),e.state.showAllPlates&&e.setState({showAllPlates:!1}))},e}return Object(L.a)(a,[{key:"componentDidMount",value:function(){var e=Object(S.a)(Ra().mark((function e(){var t,a,r,n,o,i,c,l,s,u,d,f,p,m,h;return Ra().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.redux,o=null===(t=this.props)||void 0===t||null===(a=t.location)||void 0===a||null===(r=a.state)||void 0===r?void 0:r.demand,i=n.empresas,c=n.veiculos,!i||1!==i.length){e.next=5;break}return e.next=4,this.setState({selectedEmpresa:i[0],razaoSocial:null===(l=i[0])||void 0===l?void 0:l.razaoSocial,frota:c});case 4:this.filterInsurances();case 5:if(!o){e.next=17;break}return s=za(o,n,[]),u=s.latestDoc,s.newMembers,s.oldMembers,s.filteredSocios,d=Object(O.a)(s,qa),f=null===o||void 0===o?void 0:o.history[0],p={},Ia.forEach((function(e){var t=e.field;f.hasOwnProperty(t)&&(p[t]=f[t])})),m=n.veiculos.filter((function(e){return f.vehicleIds.some((function(t){return t===e.veiculoId}))})),p.placas=m.map((function(e){return e.placa})),p.veiculos=m.map((function(e){return e.veiculoId})),h=null===f||void 0===f?void 0:f.seguradoraId,e.next=14,this.setState(Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)({},this.state),d),p),{},{insurance:p,demand:o,seguradoraId:h,demandFiles:[u]}));case 14:return e.next=16,this.filterInsurances();case 16:this.renderPlacas();case 17:document.addEventListener("keydown",this.escFunction,!1);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkForErrors",value:function(e){var t=this.state,a=t.errors,r=t.seguradora;return a&&a[0]?(this.setState(Object(v.a)(Object(v.a)({},this.state),de("setState"))),!0):r&&""!==r?(null===e||void 0===e?void 0:e.veiculos)&&e.veiculos[0]?void 0:(this.setState({openAlertDialog:!0,customTitle:"Nenhum ve\xedculo inserido",customMsg:'N\xe3o foi inserido nenhum ve\xedculo para o seguro informado. Para inserir, digite a placa no campo "Insira a placa" ou clique para selecionar a(s) placa(s) do(s) ve\xedculo(s) coberto(s) por esse seguro.'}),!0):(this.setState({openAlertDialog:!0,alertType:"seguradoraNotFound",seguradora:void 0}),!0)}},{key:"setInsuranceStatus",value:function(e){var t=e.dataEmissao,a=e.vencimento,r=ue()(t,"YYYY-MM-DD",!0),n=ue()(a,"YYYY-MM-DD",!0),o=r.isValid(),i=n.isValid(),c=n.isSameOrBefore(r,"day"),l=n.isBefore(ue()(),"day"),s=r.isAfter(ue()(),"day"),u=r.isSameOrBefore(ue()(),"day");if(c)alert("A data de vencimento informada \xe9 anterior ao in\xedcio da vig\xeancia.");else{if(!l)return s&&(e.situacao="Aguardando in\xedcio da vig\xeancia"),u&&(e.situacao="Vigente"),o&&(e.dataEmissao=t),i&&(e.vencimento=a),e;alert("O seguro informado est\xe1 vencido.")}}},{key:"render",value:function(){var e=this,t=this.state,a=t.openAlertDialog,o=t.alertType,i=t.openAddDialog,c=t.showAllPlates,l=t.allPlates,s=t.allPlatesObj,u=t.selectAll,d=t.customTitle,f=t.customMsg,p=this.props.redux,m=p.empresas,h=p.seguradoras,v=p.seguros,g=Ia.every((function(t){return e.state.hasOwnProperty(t.field)&&""!==e.state[t.field]}));return n.a.createElement(r.Fragment,null,n.a.createElement(_a,{data:this.state,empresas:m,seguros:v,seguradoras:h,enableAddPlaca:g,handleInput:this.handleInput,handleBlur:this.handleBlur,addPlate:this.addPlate,removeFromInsurance:this.removeFromInsurance,enableChangeApolice:this.toggleDialog,handleFiles:this.handleFiles,handleSubmit:this.handleSubmit,showAllPlates:this.showAllPlates,setShowPendencias:this.setShowPendencias,removeFile:this.removeFile}),i&&n.a.createElement(Fa,{open:i,close:this.toggleDialog,title:"Alterar n\xfamero da ap\xf3lice",helperMessage:"Informe o n\xfamero atualizado da ap\xf3lice.",handleInput:this.handleInput,addNewElement:this.addNewElement}),c&&n.a.createElement(Ta,{items:l,close:this.showAllPlates,title:"Selecione as placas para adicionar \xe0 ap\xf3lice.",handleCheck:this.handleCheck,data:s,selectAll:u,selectAllPlates:this.selectAllPlates}),a&&n.a.createElement(sa,{open:a,close:this.closeAlert,alertType:o,customTitle:d,customMessage:f}),n.a.createElement(ee,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}))}}]),a}(r.Component));function Ga(e){var t,a,o=e.open,i=e.type,c=e.close,l=e.confirm,s=e.element,u=e.id,d=e.index;e.customTitle,e.customMessage;return console.log("\ud83d\ude80 ~ file: ConfirmDialog.jsx ~ line 11 ~ ConfirmDialog ~ id",u),"delete"===i&&(t="Confirmar exclus\xe3o",a="Tem certeza que deseja excluir esse registro?",s&&(a=a.replace("?",": "))),"deactivateEmpresa"===i&&(t="Desativar empresa",a="Tem certeza que deseja desativar a empresa ".concat(s,"?")),t&&a?n.a.createElement("div",null,n.a.createElement(na.a,{open:o,onClose:c,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(la.a,{id:"alert-dialog-title"},t),n.a.createElement(ia.a,null,n.a.createElement(ca.a,{id:"alert-dialog-description"},s?n.a.createElement(r.Fragment,null,a,n.a.createElement("strong",null,"  ",s,"    "),"?"):a)),n.a.createElement(oa.a,null,n.a.createElement(st.a,{onClick:c,autoFocus:!0}," Cancelar "),n.a.createElement(st.a,{onClick:function(){return l(u||d)},color:"primary"}," Confirmar ")))):null}var Ba=[{field:"id",label:"N\xfamero do laudo",maxLength:30},{field:"validade",label:"Data de validade",type:"date"},{field:"empresaLaudo",label:"Empresa emissora",select:!0}],Ua=function(e){var t=e.veiculoId,a=e.city,r=e.placa,o=e.onClick,i=e.style;return n.a.createElement("div",{id:t,onClick:o,style:i,className:"placaContainer"},n.a.createElement("div",{className:"placaCity"},a),n.a.createElement("div",{className:"placaCode"},r))},Ya=a(124),Ha=a.n(Ya);function Ja(e){var t=e.table,a=e.docsCollection,r=e.length,o=e.title,i=e.style,c=e.idIndex,l=void 0===c?0:c,s=e.clickable,u=e.openInfo,d=e.filePK,f=e.deleteIconProperties,p=void 0===f?{}:f,m=e.deleteFunction,h=t.tableHeaders,g=t.arrayOfRows,b=t.docs;return n.a.createElement("table",{className:"showDetailsTable"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"tHeader",style:i,colSpan:r},o)),n.a.createElement("tr",null,h.map((function(e,t){return n.a.createElement("th",{key:t,style:i},e)})))),n.a.createElement("tbody",null,g.map((function(e,t){return n.a.createElement("tr",{key:t,className:s?"clickable":"",onClick:function(){return s?u(t):void 0}},e.map((function(t,r){var o,c;return n.a.createElement("td",{key:r,style:Object(v.a)(Object(v.a)({},i),{},{width:"numeroSei"===t.field&&"200px"}),className:"link"===t.type&&t.fileId?"link2":"review",onClick:function(){var r;return t.field===d&&t.fileId?function(e){var t=b.find((function(t){return t.id===e}));e&&t&&_t(t.id,t.filename,a,t.metadata.fieldName)}(t.fileId):"delete"===(null===t||void 0===t?void 0:t.action)?m(null===(r=e[l])||void 0===r?void 0:r.value):null}},"date"===t.type?(c=t.value,ue()(c,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?ue()(c,ue.a.ISO_8601,!0).format("DD/MM/YYYY"):c):"delete"===(null===t||void 0===t?void 0:t.action)&&(null===(o=e[l])||void 0===o?void 0:o.value)?n.a.createElement(Ha.a,p):t.value)})))}))))}var Wa=a(248),Ka=a(6),$a=Object(Ka.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return n.a.createElement(Wa.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"}},e))})),Xa=function(e){var t=e.anchorEl,a=e.handleClose,r=e.menuOptions;return n.a.createElement(n.a.Fragment,null,n.a.createElement($a,{id:"simple-menu",anchorEl:t,keepMounted:!0,open:Boolean(t),onClose:a},r.map((function(e,t){var a=e.title,r=e.onClick;return n.a.createElement(at.a,{key:t,onClick:r},a)}))))},Za=a(282),Qa=a.n(Za),er=a(160),tr=a.n(er),ar=n.a.memo((function(e){var t=e.empresas,a=e.razaoSocial,r=e.selectedEmpresa,o=e.filteredVehicles,i=e.selectedVehicle,c=e.stateInputs,l=e.selectOptions,s=e.table,u=e.anchorEl,d=e.laudoDoc,f=e.dropDisplay,p=e.functions,m=e.demand,h=e.demandFiles,g=e.showPendencias,b=e.info,y=e.fileToRemove,E=null===i||void 0===i?void 0:i.placa,x=p.handleInput,w=p.clickOnPlate,O=p.showDetails,S=p.handleFiles,j=p.handleSubmit,L=p.closeMenu,k=p.clear,C=p.removeFile,N=p.deleteLaudo,P=p.setShowPendencias,I=function(e){if(!(e&&e[0]&&e[0].validade))return{backgroundColor:"rgb(136, 13, 13)"};var t=e[0].validade;return ue()(t,ue.a.ISO_8601).isValid()&&ue()(t).isAfter(ue()().toDate())?{backgroundColor:"rgb(13, 136, 13)"}:ue()(t,ue.a.ISO_8601).isValid()&&ue()(t).isBefore(ue()().toDate())?{backgroundColor:"rgb(197, 128, 0)"}:void 0};return n.a.createElement(n.a.Fragment,null,n.a.createElement(Kt,{links:["Ve\xedculos","/veiculos"],text:"Laudos",demand:m,selectedEmpresa:r}),n.a.createElement("div",{style:m?{marginTop:"15px"}:{}},n.a.createElement(tt,{empresas:t,data:{razaoSocial:a,demand:m},headerTitle:E&&r&&"Cadastro de laudo veicular ".concat(E," - ").concat(null===r||void 0===r?void 0:r.razaoSocial),handleInput:x})),r&&!Array.isArray(r)&&n.a.createElement(n.a.Fragment,null,!m&&n.a.createElement("header",{className:"flex",style:{marginBottom:"15px",justifyContent:"space-between"}},i?n.a.createElement(Ua,{veiculoId:i.veiculoId,onClick:w,style:Object(v.a)(Object(v.a)({},I(i.laudos)),{},{marginLeft:0}),city:r.cidade,placa:i.placa}):n.a.createElement(it,{subtitle:"Selecione o ve\xedculo para atualizar consultar ou inserir o laudo de seguran\xe7a veicular.",style:{marginTop:"25px"}}),n.a.createElement("div",null,n.a.createElement(rt.a,{inputProps:{name:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Filtrar",onChange:x}),n.a.createElement(Pa.a,{style:{marginTop:"10px"}}))),i&&n.a.createElement(n.a.Fragment,null,n.a.createElement("main",{className:"paper",style:m?{marginTop:"15px"}:{}},n.a.createElement(it,{subtitle:m?"Verifique as informa\xe7\xf5es abaixo, confira com o laudo anexo e escolha uma das op\xe7\xf5es abaixo.":"Para inserir novo laudo, informe o n\xfamero, a data de vencimento, a empresa que emitiu e anexe o documento referente ao laudo."}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(ot,{form:Ba,data:c,handleInput:x,selectOptions:l}),m?h&&n.a.createElement(qt,{demand:m,collection:"vehicleDocs",demandFiles:h,form:[{title:"Laudo veicular",name:"laudoDoc"}]}):n.a.createElement(St,{name:"laudoDoc",formData:d,dropDisplay:f,handleFiles:S,removeFile:C,fileToRemove:y,single:!0,style:{width:"400px",margin:"15px auto 0 auto"}})),n.a.createElement("section",null,r&&!m?n.a.createElement(st.a,{size:"small",color:"primary",className:"saveButton",variant:"contained",onClick:function(){return j()}},"Cadastrar Laudo"):r&&m?n.a.createElement(Xt,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:m,setShowPendencias:function(){return P(!g)},showPendencias:g,info:b,handleSubmit:j,handleInput:x}):null)),n.a.createElement("section",null,n.a.createElement("h4",null,i?null:n.a.createElement("div",{className:"flex",style:{justifyContent:"space-between"}},n.a.createElement("div",null,"Exibindo ".concat(o.length," ve\xedculos com mais de 15 anos.")),n.a.createElement("div",{className:"flex placasCaption",style:{fontSize:"0.8rem"}},n.a.createElement("span",null,n.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(13, 136, 13)"}},n.a.createElement(Qa.a,null))," Laudo vigente"),n.a.createElement("span",null,n.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(197, 128, 0)"}},n.a.createElement(Qa.a,null))," Laudo vencido                                            "),n.a.createElement("span",null,n.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(136, 13, 13)"}},n.a.createElement(Qa.a,null))," Nenhum Laudo cadastrado"))))),!i&&n.a.createElement("section",{className:"center flex paper"},o.map((function(e,t){return n.a.createElement(Ua,{key:t,veiculoId:e.veiculoId,onClick:w,style:I(e.laudos),city:r.cidade,placa:e.placa})}))),n.a.createElement(Xa,{anchorEl:u,handleClose:L,menuOptions:[{title:"Detalhes",onClick:O}]})),i&&i.laudos&&!m&&n.a.createElement(n.a.Fragment,null,"object"===typeof s?n.a.createElement("div",{className:"paper",style:{marginTop:"52px",width:"100%",padding:"0",borderRadius:"5px",overflow:"hidden"}},n.a.createElement(Ja,{length:s.tableHeaders.length,title:"Laudos vinculados ao ve\xedculo placa ".concat(i.placa),table:s,style:{textAlign:"center",padding:"8px 0"},deleteIconProperties:{color:"secondary",title:"Apagar Laudo",style:{cursor:"pointer"}},deleteFunction:N,idIndex:1,filePK:"laudoDoc",docsCollection:"vehicleDocs"})):n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("p",null,s)),n.a.createElement("div",{className:"voltarDiv",onClick:k},n.a.createElement(tr.a,{size:"small"}),n.a.createElement("span",{style:{padding:"2px 0 0 2px",marginLeft:"2px",fontSize:"1rem"}},"Voltar"))))}));var rr={field:"codigoEmpresa",label:"C\xf3digo da Empresa"},nr={field:"razaoSocial",label:"Empresa",width:"340px"},or={field:"createdAt",label:"Data do registro no sistema",type:"date",width:"190px"},ir={field:"cnpj",label:"CNPJ",maxLength:18,errorHandler:function(e){return function(e){if(""===(e=e.replace(/[^\d]+/g,"")))return!1;if(14!==e.length)return!1;if("00000000000000"===e||"11111111111111"===e||"22222222222222"===e||"33333333333333"===e||"44444444444444"===e||"55555555555555"===e||"66666666666666"===e||"77777777777777"===e||"88888888888888"===e||"99999999999999"===e)return!1;for(var t=e.length-2,a=e.substring(0,t),r=e.substring(t),n=0,o=t-7,i=t;i>=1;i--)n+=a.charAt(t-i)*o--,o<2&&(o=9);if((n%11<2?0:11-n%11).toString()!==r.charAt(0))return!1;t+=1,a=e.substring(0,t),n=0,o=t-7;for(var c=t;c>=1;c--)n+=a.charAt(t-c)*o--,o<2&&(o=9);return(n%11<2?0:11-n%11).toString()===r.charAt(1)}(e)}},cr={field:"cpfSocio",label:"CPF",maxLength:14,width:190,errorHandler:function(e){return function(e){if(e){var t,a;if(t=0,"00000000000"===e)return!1;for(var r=1;r<=9;r++)t+=parseInt(e.substring(r-1,r))*(11-r);if(10!==(a=10*t%11)&&11!==a||(a=0),a!==parseInt(e.substring(9,10)))return!1;t=0;for(var n=1;n<=10;n++)t+=parseInt(e.substring(n-1,n))*(12-n);return 10!==(a=10*t%11)&&11!==a||(a=0),a===parseInt(e.substring(10,11))}}((t=e)?t.replace(/(\.|\/|-)/g,""):void 0);var t}},lr={label:"Telefone",maxLength:15,pattern:"((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))"},sr={label:"E-mail",type:"email",maxLength:60,pattern:"[a-zA-Z0-9]@[a-zA-Z0-9]{1,20}?[.]([a-zA-Z0-9])"},ur=[{field:"razaoSocial",width:"540px"},{field:"rua",width:"540px"},{field:"situacao",label:"Situa\xe7\xe3o"},Object(v.a)({},rr),Object(v.a)(Object(v.a)({},or),{},{width:"150px"}),{field:"frota",label:"Tamanho da Frota"}],dr=[Object(v.a)({},nr),Object(v.a)({},or)],fr=[Object(v.a)(Object(v.a)({},nr),{},{field:"empresa",width:"540px"}),Object(v.a)({},rr),Object(v.a)(Object(v.a)({},or),{},{width:"150px"}),Object(v.a)({},{field:"placas",label:"Ve\xedculos cadastrados",width:"340px"}),{field:"segurados",label:"N\xfamero de ve\xedculos segurados"}],pr=[{field:"codigoEmpresa",label:"C\xf3digo do Delegat\xe1rio"},{field:"empresa",label:"Delegat\xe1rio"},{field:"dataRegistro",label:"Data do registro no sistema",type:"date"},{field:"cmt",label:"CMT (t)"},{field:"pbt",label:"Peso Bruto Total"},{field:"situacao",label:"Situa\xe7\xe3o"},{field:"indicadorIdade",label:"Indicador de idade"},{field:"equipamentos",label:"Equipamentos"},{field:"marcaChassi",label:"Marca do Chassi"},{field:"marcaCarroceria",label:"Marca da Carroceria"},{field:"sipro",label:"SEI"},{field:"compartilhado",label:"Compartilhado por"},{field:"codigoCompartilhado",label:"C\xf3digo Del. Compartilhado"},{field:"empresaLaudo",label:"Empresa Laudo"},{field:"numeroLaudo",label:"N\xfamero do Laudo"},{field:"vencimentoLaudo",label:"Validade do Laudo",type:"date"},{field:"acessibilidade",label:"Itens de Acessibilidade"},{field:"obs",label:"Observa\xe7\xf5es"}],mr=[[{field:"placa",label:"Placa",margin:"normal",maxLength:8,pattern:"[a-zA-Z]{3}[-]?[ ]?\\d{4}|[A-Z]{3}[-]?[ ]?[0-9]{1}[A-Z]{1}[0-9]{2}"},{field:"renavam",label:"Renavam",margin:"normal",maxLength:11,pattern:/^(\d{9}|\d{11})$/},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Comercial","Comercial Executivo","Convencional","Convencional Executivo","Leito","Leito e Executivo","Semi-Leito","Semi-Leito Executivo"]},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17},{field:"modeloChassi",label:"Modelo do Chassi",autoComplete:!0,collection:"modelosChassi"},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",max:Number((new Date).getFullYear()),min:Number((new Date).getFullYear())-10},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",datalist:"modelo",autoComplete:!0,collection:"carrocerias"},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",max:Number((new Date).getFullYear()+1),min:Number((new Date).getFullYear())-10},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Aliena\xe7\xe3o Fiduci\xe1ria","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50}]].concat([Ia]).concat([ft]),hr=[{field:"razaoSocial",label:"Raz\xe3o Social"},Object(v.a)(Object(v.a)({},ir),{},{maxLength:18,pattern:"[0-9]{2}.?[0-9]{3}.?[0-9]{3}/?[0-9]{4}-?[0-9]{2}"}),{field:"inscricaoEstadual",label:"Inscri\xe7\xe3o Estadual",maxLength:13,pattern:"\\d{13}"},Object(v.a)(Object(v.a)({},lr),{},{field:"telefone",label:"Telefone"}),Object(v.a)(Object(v.a)({},sr),{},{field:"email",label:"E-mail"}),{field:"cep",label:"CEP",maxLength:10},{field:"rua",label:"Rua",maxLength:100},{field:"numero",label:"N\xfamero",type:"number",max:32e3},{field:"complemento",label:"Complemento",maxLength:20,notRequired:!0},{field:"bairro",label:"Bairro",maxLength:40},{field:"cidade",label:"Cidade",maxLength:60},{field:"uf",label:"Estado",maxLength:2,pattern:"[A-Z]{2}"},{field:"numeroContrato",label:"N\xfamero do Contrato Social"},{field:"vencimentoContrato",label:"Vencimento do Cadastro - CRC",type:"date"}],vr=[{field:"nomeSocio",label:"Nome do S\xf3cio",maxLength:90,width:195},Object(v.a)(Object(v.a)({},cr),{},{width:195,disabled:!1}),Object(v.a)(Object(v.a)({},lr),{},{field:"telSocio",width:195}),Object(v.a)(Object(v.a)({},sr),{},{field:"emailSocio",width:195}),{field:"share",label:"Participa\xe7\xe3o Societ\xe1ria (%)",type:"number",max:100,width:195}],gr=[{field:"nomeProcurador",label:"Nome do Procurador",maxLength:90,width:220},Object(v.a)(Object(v.a)({},cr),{},{field:"cpfProcurador",width:220}),Object(v.a)(Object(v.a)({},lr),{},{field:"telProcurador",width:220}),Object(v.a)(Object(v.a)({},sr),{},{field:"emailProcurador",width:220}),{field:"createdAt",label:"Data de inclus\xe3o no sistema",type:"date",width:220}],br=["codigoEmpresa","razaoSocial","situacao","createdAt","vencimentoContrato","numeroContrato","cnpj","inscricaoEstadual","rua","numero","complemento","bairro","cidade","estado","cep","telefone","email","frota"],yr=["nomeSocio","cpfSocio","razaoSocial","share","createdAt","emailSocio","telSocio"],Er=["nomeProcurador","cpfProcurador","emailProcurador","telProcurador","codigoEmpresa","razaoSocial","createdAt","procuradorId"],xr=["id","apolice","seguradoraId","dataEmissao","vencimento","createdAt","situacao","seguradora","codigoEmpresa","empresa","segurados","placas","veiculos"],wr=["veiculoId","placa","renavam","dataRegistro","situacao","utilizacao","codigoEmpresa","empresa","dominio","apolice","seguradora","dataEmissao","vencimento","cilindros","potencia","nChassi","anoChassi","valorChassi","modeloChassiId","anoCarroceria","valorCarroceria","modeloCarroceriaId","poltronas","piquesPoltrona","distanciaMinima","distanciaMaxima","eixos","pneumaticosDianteiro","pneumaticosTraseiro","pesoDianteiro","pesoTraseiro","pbt","cores","compartilhadoId","equipamentosId","acessibilidadeId","sipro","indicadorIdade","marcaChassi","modeloChassi","cmt","marcaCarroceria","empresa","compartilhado","codigoCompartilhado","numeroLaudo","empresaLaudo","vencimentoLaudo","equipamentos","acessibilidade","obs"],Or=function(e,t){var a;if("empresas"===e)a=br;else if("socios"===e||"s\xf3cios"===e)a=yr;else if("procuradores"===e)a=Er;else if("ve\xedculos"===e&&t[0].veiculoId)a=wr;else{if("seguros"!==e)return t;a=xr}var r=[];return t.forEach((function(e){var t={};a.forEach((function(a){t[a]||(t[a]=e[a])})),r.push(t),t={}})),r},Sr=["veiculoId","laudoId","tableData","modeloChassiId","modeloCarroceriaId","vencimentoContrato","delegatarioCompartilhado","acessibilidadeId","equipamentosId","compartilhadoId"],jr=function(e,t){if(t){delete t.tableData;var a,r=[],n=Lr(e);0===e&&(a="empresas"),1===e&&(a="socios"),2===e&&(a="procuradores"),3===e&&(a="ve\xedculos"),4===e&&(a="seguros");var o=Or(a,[t]);return t=o[0]?o[0]:t,Object.keys(t).forEach((function(a){if(3===e){var o=t,i=(o.veiculoId,o.laudoId,o.tableData,o.modeloChassiId,o.modeloCarroceriaId,o.vencimentoContrato,o.delegatarioCompartilhado,o.acessibilidadeId,o.equipamentosId,o.compartilhadoId,Object(O.a)(o,Sr));t=i}n.forEach((function(e){var n=e.field,o=e.label,i=e.type,c=e.width;e.fullWidth;if(a===n){var l={};Object.assign(l,{field:n,label:o,value:t[a]}),i&&Object.assign(l,{type:i}),c&&Object.assign(l,{width:c}),r.push(l),l={}}}))})),Object.keys(t).forEach((function(a){r.find((function(e){return e.field===a}))||3!==e||r.push({field:a,label:a,value:t[a]})})),r}};function Lr(e){var t;switch(e){case 0:return t=function(e,t){var a,r=[],n=Object(h.a)(t);return e.forEach((function(e){n.forEach((function(t,o){e.field===t.field?(a=Object.assign({},e,t),n.splice(o,1),r.push(a)):r.find((function(t){return t.field===e.field}))||r.push(e)}))})),r=r.concat(n)}(hr,ur);case 1:return t=vr.concat(dr);case 2:return t=gr;case 3:var a=[];return mr.forEach((function(e){a.push.apply(a,Object(h.a)(e))})),t=a.concat.apply(a,Object(h.a)(pr));case 4:return t=Ia.concat(fr);default:return t}}var kr=[{field:"nomeProcurador",title:"Nome"},{field:"cpfProcurador",title:"CPF"},{field:"emailProcurador",title:"E-mail"},{field:"telProcurador",title:"Telefone"},{field:"vencimento",title:"Validade da procura\xe7\xe3o",type:"date",format:function(e){return e||"Prazo indeterminado"}},{field:"fileId",title:"Baixar Procura\xe7\xe3o",type:"link"}],Cr=[{field:"numeroAlteracao",label:"N\xfamero da altera\xe7\xe3o"},{field:"numeroRegistro",label:"Registro na junta comercial"},{field:"numeroSei",label:"N\xfamero do registro SEI"},{field:"createdAt",label:"Registro no CadTI",type:"date",format:function(e){return e||"Nenhuma data informada"}},{field:"dataJunta",label:"Data de Registro na Junta Comercial",type:"date",format:function(e){return e||"Nenhuma data informada"}},{field:"fileId",label:"Baixar altera\xe7\xe3o contratual",value:"Clique para baixar o arquivo",type:"link"}],Nr=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{htmlFor:e.id,className:"obs__label"},e.label),n.a.createElement("textarea",Object.assign({className:"obs__textArea",cols:"30",disabled:!1!==e.disabled},e)))},Pr=[{field:"razaoSocial",title:"Empresa",maxLength:90,width:220},{field:"codigoEmpresa",title:"C\xf3digo da empresa",width:220},{field:"status",title:"Status",width:220},{field:"vencimento",title:"Validade da procura\xe7\xe3o",type:"date",format:function(e){return e||"Prazo indeterminado"}},{field:"fileId",title:"Baixar Procura\xe7\xe3o",type:"link"}];function Ir(){Ir=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}function Dr(e){var t=e.data,a=e.tab,o=e.title,i=e.header,c=e.close,l=e.empresas,s=e.procuracoes,u=e.procuradores,d=e.empresaDocs,f=e.altContrato,p=Object(r.useState)(),m=Object(Qe.a)(p,2),h=m[0],g=m[1],b=Object(r.useState)(),y=Object(Qe.a)(b,2),E=y[0],x=y[1],w=Object(r.useState)([]),O=Object(Qe.a)(w,2),j=O[0],L=O[1],k=jr(a,t)||[],C=k.find((function(e){return"obs"===e.field})),N=k.find((function(e){return"equipamentos"===e.field})),P=k.find((function(e){return"acessibilidade"===e.field}));Object(r.useEffect)((function(){var e,r,n,o=null===(e=k.find((function(e){return"razaoSocial"===e.field})))||void 0===e?void 0:e.value,i=null===(r=l.find((function(e){return e.razaoSocial===o})))||void 0===r?void 0:r.codigoEmpresa,c=s.filter((function(e){return e.codigoEmpresa===i})),f=d.filter((function(e){var t,a;return"procuracao"===(null===(t=e.metadata)||void 0===t?void 0:t.fieldName)&&(null===(a=e.metadata)||void 0===a?void 0:a.empresaId)===i})),p=[],m=[],h=[],b=[];if(function(e){0===e&&(u.forEach((function(e){c.forEach((function(t){if(t.procuradores.some((function(t){return t===e.procuradorId}))){var a=Object(v.a)(Object(v.a)({},e),{},{vencimento:t.vencimento}),r=d.find((function(e){return e.metadata.procuracaoId===t.procuracaoId}));r&&(a.fileId=null===r||void 0===r?void 0:r.id),p.push(a)}}))})),p.forEach((function(e){kr.forEach((function(t){var a=t.field;if(m.some((function(e){return e===t.title}))||m.push(t.title),e.hasOwnProperty(a)&&!b.some((function(e){return e.hasOwnProperty(a)}))){if(n="fileId"===a&&e.fileId?Object(v.a)(Object(v.a)({},t),{},{value:"Clique para baixar a procura\xe7\xe3o",fileId:e.fileId}):Object(v.a)(Object(v.a)({},t),{},{value:e[a]}),t.format){var r=t.format(e[a]);n=Object(v.a)(Object(v.a)({},t),{},{value:r})}b.push(n)}})),h.push(b),b=[]})),p[0]&&g({mainTitle:"Procuradores cadastrados para ".concat(null===t||void 0===t?void 0:t.razaoSocial),tableHeaders:m,arrayOfRows:h,docs:f}),I())}(a),2===a){var y,E=null===t||void 0===t?void 0:t.procuradorId,x=s.filter((function(e){return e.procuradores.includes(E)}));x.forEach((function(e){var t;y=d.find((function(t){var a=t.metadata;return(null===a||void 0===a?void 0:a.procuracaoId)===e.procuracaoId})),e.fileId=null===(t=y)||void 0===t?void 0:t.id})),x.forEach((function(e){Pr.forEach((function(t){var a=t.field;if(m.some((function(e){return e===t.title}))||m.push(t.title),e.hasOwnProperty(a)&&!b.some((function(e){return e.hasOwnProperty(a)}))){if(n="fileId"===a&&e.fileId?Object(v.a)(Object(v.a)({},t),{},{value:"Clique para baixar a procura\xe7\xe3o",fileId:e.fileId}):Object(v.a)(Object(v.a)({},t),{},{value:e[a]}),t.format){var r=t.format(e[a]);n=Object(v.a)(Object(v.a)({},t),{},{value:r})}b.push(n)}})),h.push(b),b=[]})),x[0]&&g({mainTitle:"Procura\xe7\xf5es cadastrados para ".concat(null===t||void 0===t?void 0:t.nomeProcurador),tableHeaders:m,arrayOfRows:h,docs:d})}}),[a,f]);var I=function(){var e=Object(S.a)(Ir().mark((function e(){var a,r,n,o,i,c;return Ir().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f&&(a=f.filter((function(e){return e.codigoEmpresa===t.codigoEmpresa})),r=d.filter((function(e){var a;return"altContratoDoc"===(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.fieldName)&&(null===e||void 0===e?void 0:e.metadata.empresaId)===t.codigoEmpresa})),n=[],o=[],i=[],c={},a.forEach((function(e){Cr.forEach((function(t){var a=t.field;if(n.includes(t.label)||n.push(t.label),"fileId"===a||!i.some((function(e){return e.hasOwnProperty(a)}))){if("fileId"===a){var o,l=r.find((function(t){return t.metadata.numeroAlteracao===e.numeroAlteracao}));l=null===(o=l)||void 0===o?void 0:o.id,c=l?Object(v.a)(Object(v.a)({},t),{},{value:null===t||void 0===t?void 0:t.value,fileId:l}):Object(v.a)(Object(v.a)({},t),{},{value:"-"})}else c=Object(v.a)(Object(v.a)({},t),{},{value:e[a]||"-"});if(t.format){var s=t.format(e[a])||"-";c=Object(v.a)(Object(v.a)({},t),{},{value:s})}i.push(c)}})),o.push(i),i=[]})),console.log("\ud83d\ude80 ~ file: ShowDetails.jsx ~ line 198 ~ setAltContrato ~     arrayOfRows",o),a[0]&&x({mainTitle:"Altera\xe7\xf5es do contrato social - ".concat(null===t||void 0===t?void 0:t.razaoSocial),tableHeaders:n,arrayOfRows:o,docs:r}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=[];h&&e.push(h),E&&e.unshift(E),e[0]&&L(e)}),[h,E]),n.a.createElement("div",{className:"popUpWindow",style:{left:"20%",right:"20%"}},n.a.createElement("h4",{className:"equipaHeader"},o," ",t[i])," ",n.a.createElement("hr",null),n.a.createElement("main",{className:"checkListContainer",style:{justifyContent:"flex-start"}},k.map((function(e,t){var a=e.field,r=e.label,o=e.value,i=e.type,c=e.width;return"obs"!==a&&"equipamentos"!==a&&"acessibilidade"!==a&&n.a.createElement("div",{className:"showDetailsItem",style:{width:c||150},key:t},n.a.createElement(rt.a,{name:a,label:r,value:r.match("Peso ")?pa(o):"date"!==i?o||"":ue()(o,!0).isValid()?o&&ue()(o).format("DD/MM/YYYY"):"",InputLabelProps:{shrink:!0,style:{fontSize:"0.9rem",fontWeight:500}},inputProps:{style:{fontSize:"0.7rem",width:c||150,fontColor:"#bbb",textAlign:"center"}},variant:"outlined"}))}))),j[0]&&j.map((function(e,t){return n.a.createElement("section",{key:t},n.a.createElement("hr",{style:{margin:"12px 0"}}),n.a.createElement(Ja,{length:e.tableHeaders.length,title:e.mainTitle,table:e,style:{textAlign:"center",padding:"8px 0"},idIndex:1,filePK:"fileId",docsCollection:"empresaDocs"}))})),3===a&&n.a.createElement("footer",{className:"flexColumn"},(null===N||void 0===N?void 0:N.value)&&n.a.createElement(Nr,{label:"Equipamentos:",name:"equipamentos",id:"equipamentos",defaultValue:null===N||void 0===N?void 0:N.value,rows:"2"}),(null===P||void 0===P?void 0:P.value)&&n.a.createElement(Nr,{label:"Itens de acessibilidade:",name:"acessibilidade",id:"acessibilidade",defaultValue:null===P||void 0===P?void 0:P.value,rows:"2"}),(null===C||void 0===C?void 0:C.value)&&n.a.createElement(Nr,{label:"Observa\xe7\xf5es:",name:"obs",id:"obs",defaultValue:null===C||void 0===C?void 0:C.value,rows:"6"})),n.a.createElement(mt,{close:c}))}var Ar=[{field:"empresaLaudo",title:"Empresa Emissora"},{field:"id",title:"N\xfamero do Laudo"},{field:"createdAt",title:"Registro no sistema",type:"date"},{field:"validade",title:"Data de validade",type:"date"},{field:"laudoDoc",title:"Laudo",type:"link"},{field:"delete",title:"Remover",action:"delete",deleteFile:!0}],_r=["title"],Tr=["empresaLaudo"];function Fr(){Fr=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var zr=1,Mr=we(["veiculos","empresas","empresasLaudo","laudos","getFiles/vehicleDocs"],(function(e){var t,a,o,i=e.user,c=e.redux,l=c.veiculos,s=c.empresas,u=c.empresasLaudo,d=c.laudos,f=c.vehicleDocs,p=c.logs,g=null===e||void 0===e||null===(t=e.location)||void 0===t||null===(a=t.state)||void 0===a?void 0:a.demand,b=Object.freeze({dropDisplay:"Clique ou arraste o arquivo para anexar o laudo",stateInputs:{id:void 0,validade:"",empresaLaudo:""}}),y=Object(r.useState)(""),E=Object(Qe.a)(y,2),x=E[0],w=E[1],j=Object(r.useState)(),L=Object(Qe.a)(j,2),k=L[0],C=L[1],N=Object(r.useState)(),P=Object(Qe.a)(N,2),I=P[0],A=P[1],_=Object(r.useState)([]),T=Object(Qe.a)(_,2),F=T[0],z=T[1],M=Object(r.useState)(!1),q=Object(Qe.a)(M,2),R=q[0],V=q[1],G=Object(r.useState)(),B=Object(Qe.a)(G,2),U=B[0],Y=B[1],H=Object(r.useState)(null),J=Object(Qe.a)(H,2),W=J[0],K=J[1],$=Object(r.useState)(b.dropDisplay),X=Object(Qe.a)($,2),Z=X[0],Q=X[1],te=Object(r.useState)(),ae=Object(Qe.a)(te,2),re=ae[0],ne=ae[1],oe=Object(r.useState)(Object(v.a)({},b.stateInputs)),ie=Object(Qe.a)(oe,2),ce=ie[0],le=ie[1],se=Object(r.useState)(!1),ue=Object(Qe.a)(se,2),fe=ue[0],pe=ue[1],me=Object(r.useState)("Laudo enviado para aprova\xe7\xe3o."),he=Object(Qe.a)(me,2),ve=he[0],ge=he[1],be=Object(r.useState)(),ye=Object(Qe.a)(be,2),Ee=ye[0],xe=ye[1],we=Object(r.useState)(),Oe=Object(Qe.a)(we,2),Se=Oe[0],je=Oe[1],Le=Object(r.useState)(),ke=Object(Qe.a)(Le,2),Ce=ke[0],Ne=ke[1],Pe=Object(r.useState)(!1),Ie=Object(Qe.a)(Pe,2),De=Ie[0],Ae=Ie[1],_e=Object(r.useState)({open:!1,type:"inputError",msg:""}),Te=Object(Qe.a)(_e,2),ze=Te[0],Me=Te[1],Re=Object(r.useState)({open:!1,type:"delete",element:void 0}),Ve=Object(Qe.a)(Re,2),Ge=Ve[0],Be=Ve[1];s&&1===s.length&&1===zr&&(zr++,C(s[0]),w(null===(o=s[0])||void 0===o?void 0:o.razaoSocial));if(Object(r.useEffect)((function(){document.addEventListener("keydown",(function(e){27===e.keyCode&&V(!1),K(null)}))}),[]),g&&1===zr){zr++;var Ue=g.history,Ye={},He=Fe(g,e.redux),Je=He.selectedEmpresa,We=He.demandFiles,Ke=He.originalVehicle;Object.entries(Ue[0]).forEach((function(e){var t=Object(Qe.a)(e,2),a=t[0],r=t[1];ce.hasOwnProperty(a)&&(Ye[a]=r)})),C(Je),w(Je.razaoSocial),le(Ye),je(We),Y(Ke)}Object(r.useEffect)((function(){!function(){if(k&&""!==k){var e=(new Date).getFullYear(),t=l.filter((function(e){return e.empresa===k.razaoSocial})).filter((function(t){return e-t.anoCarroceria>15&&null!==t.anoCarroceria})).sort((function(e,t){return e.placa.localeCompare(t.placa)})),a=[];if(t.forEach((function(e){var t=d.filter((function(t){return t.veiculoId===e.veiculoId}));a.push(Object(v.a)(Object(v.a)({},e),{},{laudos:t}))})),A(a),z(a),U&&(null===a||void 0===a?void 0:a.length)>0){var r,n,o=a.find((function(e){return e.veiculoId===U.veiculoId}));if((null===o||void 0===o||null===(r=o.laudos)||void 0===r?void 0:r.length)===(null===U||void 0===U||null===(n=U.laudos)||void 0===n?void 0:n.length))return;Y(o)}}else A(),z([]),C()}()}),[k,l,d,U]);var $e=Object(r.useCallback)((function(e){var t=e.target.name,a=e.target.value;if("razaoSocial"!==t){if("placa"===t&&I[0]){if("string"===typeof a&&(a=a.toLocaleUpperCase()),a&&""!==a){var r,n=I.filter((function(e){return e.placa.match(a)}));return 1===n.length&&(r=n[0]),z(n),void Y(r)}z(I)}le(Object(v.a)(Object(v.a)({},ce),{},Object(m.a)({},t,a)))}else{w(a);var o=s.find((function(e){return e.razaoSocial===a}));C(o)}}),[w,s,I,ce]),Ze=function(){var e=Object(S.a)(Fr().mark((function e(t){var a,r,n;return Fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.currentTarget.id,!ba(a,p)){e.next=4;break}return alert("Solicita\xe7\xe3o de cadastro do laudo j\xe1 realizada para este ve\xedculo."),e.abrupt("return");case 4:U?(t.persist(),K(t.target)):((r=t.currentTarget.id)&&(n=I.find((function(e){return e.veiculoId.toString()===r}))),Y(n),z([n]));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){if(U&&!g)if(U.laudos&&U.laudos[0]){var e=null===U||void 0===U?void 0:U.laudos,t=f.filter((function(e){return"laudoDoc"===e.metadata.fieldName})),a=[],r=[],n=[],o=Object(h.a)(Ar);"empresa"===i.role&&o.pop(),e.forEach((function(e){o.forEach((function(a){var o,i=t.find((function(t){var a;return(null===t||void 0===t||null===(a=t.metadata)||void 0===a?void 0:a.laudoId)==(null===e||void 0===e?void 0:e.id)}));i&&(o=i.id),r.includes(a.title)||r.push(a.title);a.title;var c=Object(O.a)(a,_r);"laudoDoc"===a.field?n.push(Object(v.a)(Object(v.a)({},c),{},{value:e[a.field],fileId:o})):n.push(Object(v.a)(Object(v.a)({},c),{},{value:e[a.field]}))})),n[4].fileId?n[4].value="Clique para visualizar o laudo":n[4].value="Nenhum arquivo encontrado",a.push(n),n=[]})),o=Object(h.a)(Ar),xe({tableHeaders:r,arrayOfRows:a,docs:t})}else xe("Nenhum laudo cadastrado para o ve\xedculo placa ".concat(U.placa,"."))}),[U,d,f,g,i.role]),Object(r.useEffect)((function(){zr=1}),[]);var et=function(){document.querySelector('[name = "placa"]').value="",z(I),Y()},tt=function(){U?(V(!R),K(null)):(V(!1),Y(void 0),K(null))},at=function(){var t=Object(S.a)(Fr().mark((function t(a){var r,n,o,i,c,l,s,f,p,m;return Fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===k||void 0===k?void 0:k.codigoEmpresa,n=null===U||void 0===U?void 0:U.veiculoId,o=ce.empresaLaudo,i=Object(O.a)(ce,Tr),c=de()||[],!(l=d.find((function(e){return e.id===ce.id})))){t.next=7;break}return Me(Object(v.a)(Object(v.a)({},ze),{},{open:!0,msg:"O laudo informado j\xe1 existe no sistema. Laudo n\xba "+l.id.toString()})),it(),t.abrupt("return");case 7:if(Object.keys(ce).forEach((function(e){if("validade"!==e&&(!ce[e]||""===ce[e])){var t,a=null===(t=Ba.find((function(t){return t.field===e})))||void 0===t?void 0:t.label;c.push(a)}})),!c[0]){t.next=12;break}return Me(Object(v.a)(Object(v.a)({},ze),{},{open:!0,msg:"Favor verificar o preenchimento dos seguintes campos: "+c.toString()})),it(),t.abrupt("return");case 12:if(void 0!==a){t.next=21;break}return s=Object(v.a)({},ce),f={empresaId:r,veiculoId:n,history:s,historyLength:0,metadata:{fieldName:"laudoDoc",veiculoId:n}},re&&(f.history.files=re),Xe(f).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})),it("all fields, reset state please!"),rt("laudoDoc"),nt(),setTimeout((function(){et()}),1200),t.abrupt("return");case 21:if(!1===a&&(Xe({id:g.id,empresaId:r,history:{info:null===ce||void 0===ce?void 0:ce.info},declined:!0}).then((function(e){return console.log(e)})),ge("Solicita\xe7\xe3o indeferida!"),nt(),setTimeout((function(){e.history.push("/solicitacoes")}),1500)),!0!==a){t.next=35;break}return(p=u.find((function(e){return e.empresa===o})))&&(i.empresa_id=p.id),i.veiculo_id=n,i.codigo_empresa=r,t.next=29,D.a.post("/api/laudos",i).then((function(e){var t;m=null===e||void 0===e||null===(t=e.data[0])||void 0===t?void 0:t.id,console.log(e.data)})).catch((function(e){return console.log(e)}));case 29:Xe({id:g.id,veiculoId:n,demandFiles:Se,history:{},metadata:{laudoId:m,tempFile:"false"},approved:a}).then((function(e){return console.log(e.data)})),setTimeout((function(){e.history.push("/solicitacoes")}),1500),ge("Laudo aprovado!"),nt(),it("Clear all Of It!!!");case 35:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var rt=function(){var e=Object(S.a)(Fr().mark((function e(t){return Fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ne(t),ne(void 0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(){return pe(!fe)},ot=function(){return Be(Object(v.a)(Object(v.a)({},Ge),{},{open:!1}))},it=function(e){e&&le(Object(v.a)({},b.stateInputs)),ne(),Q(b.dropDisplay)},ct=e.redux.empresasLaudo.map((function(e){return e.empresa}));return n.a.createElement(r.Fragment,null,n.a.createElement(ar,{empresas:s,razaoSocial:x,selectedEmpresa:k,filteredVehicles:F,selectedVehicle:U,anchorEl:W,stateInputs:ce,selectOptions:ct,dropDisplay:Z,laudoDoc:re,table:Ee,demand:g,demandFiles:Se,showPendencias:De,fileToRemove:Ce,functions:{handleInput:$e,clickOnPlate:Ze,showDetails:tt,handleFiles:function(e,t){if(!qe(e)&&e&&e[0]){var a=new FormData;a.append("fieldName","laudoDoc"),a.append("laudoId",ce.id),a.append("veiculoId",U.veiculoId),a.append(t,e[0]),ne(a),Ne(void 0)}},handleSubmit:at,closeMenu:function(){return K(null)},clear:et,removeFile:rt,setShowPendencias:Ae,deleteLaudo:function(e){Be(Object(v.a)(Object(v.a)({},Ge),{},{open:!0,element:"laudo n\xba ".concat(e),laudoId:e}))}}}),R&&n.a.createElement(Dr,{close:tt,data:Object(v.a)(Object(v.a)({},U),{},{tableData:""}),tab:3,title:"Ve\xedculo",header:"- informa\xe7\xf5es"}),Ge.open&&n.a.createElement(Ga,Object.assign({},Ge,{close:ot,confirm:function(e){var t=U.veiculoId,a=k.codigoEmpresa;if(e){ot(),D.a.delete("/api/delete?table=laudos&tablePK=id&id=".concat(e,"&veiculoId=").concat(t,"&codigoEmpresa=").concat(a)).then((function(e){var t=e.data;return console.log(t)}));var r=f.find((function(t){return"laudoDoc"===t.metadata.fieldName&&t.metadata.laudoId===e.toString()}));r&&D.a.delete("/api/deleteFile?collection=vehicleDocs&id=".concat(null===r||void 0===r?void 0:r.id,"&codigoEmpresa=").concat(a)).then((function(e){var t=e.data;return console.log(t)}))}},id:Ge.laudoId})),ze.open&&n.a.createElement(sa,{open:ze.open,close:function(){return Me(Object(v.a)(Object(v.a)({},ze),{},{open:!ze.open}))},alertType:ze.type,customMessage:ze.msg}),n.a.createElement(ee,{open:fe,close:nt,msg:ve}))})),qr=Object(r.createContext)(null);function Rr(e){var t=e.motivosBaixa,a=e.selectMotivo,r=e.selectedMotivo,o=e.demand;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"flexColumn"},!o&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",null,"Selecione o motivo da baixa"),n.a.createElement(rt.a,{className:"config__selector",onChange:a,name:"selectedOption",value:r||"",select:!0,placeholder:"Clique para selecionar...",SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},t.map((function(e,t){return n.a.createElement(at.a,{key:t,value:e},e)}))))))}var Vr=a(830),Gr=a(427),Br=a(335),Ur=(a(582),[{value:"baixar",label:"Baixar ve\xedculo"},{value:"gerenciar",label:"Gerenciar ve\xedculos baixados"}]);function Yr(e){e.empresas;var t=e.selectOption;e.parametros,e.demand,e.checked,e.delegaTransf,e.justificativa,e.pendencias,e.handleInput,e.handleBlur,e.handleCheck,e.handleSubmit;return n.a.createElement("div",{className:"flex center"},n.a.createElement("div",{className:"flexColumn "},n.a.createElement("h3",{className:"radio__title"},"Selecione uma das op\xe7\xf5es abaixo"),n.a.createElement(Br.a,{component:"fieldset"},n.a.createElement(Gr.a,{"aria-label":"position",name:"position",onChange:t,row:!0,style:{width:"auto"},className:"radio"},Ur.map((function(e,t){var a=e.value,r=e.label;return n.a.createElement(lt.a,{key:t,className:"radio",value:a,label:n.a.createElement("span",{className:"radio__legend"}," ",r," "),control:n.a.createElement(Vr.a,{color:"primary",size:"small"})})}))))))}var Hr=function(e){var t=e.action,a=e.color,r=e.onClick,o=e.disabled,i=function(){return null},c="";return"save"===t&&(i=function(){return n.a.createElement(Ca.a,null)},c="Salvar"),n.a.createElement(st.a,{size:"small",color:a||"primary",className:"saveButton",variant:"contained",onClick:function(){return r()},disabled:o},e.label||c," ",n.a.createElement("span",null,"\xa0\xa0 ")," ",i())},Jr=function(e){var t=e.data,a=e.user,r=e.handleInput,o=e.searchDischarged,i=e.downloadXls,c=e.reactivateVehicle,l=a.role,s=t.placaBaixada,u=t.dischargedFound,d=t.notFound,f=t.reactivate,p=t.selectedOption,m=JSON.parse(JSON.stringify(da)),h=m.find((function(e){return"Observa\xe7\xe3o"===e.label})),v=m.indexOf(h);return m.splice(v,1),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"flex center paper"},n.a.createElement("header",{className:"searchDischarged__header"},n.a.createElement("div",{className:"searchDischarged"},n.a.createElement("div",null,n.a.createElement("form",{onSubmit:o},n.a.createElement(rt.a,{type:"text",name:"placaBaixada",label:"Pesquisar pela placa do ve\xedculo",value:s||"",onChange:r,placeholder:"Digite a placa",InputLabelProps:{style:{fontSize:"0.7rem"}},InputProps:{style:{width:"250px",marginRight:"10px",fontSize:"0.9rem",textAlign:"center"}}})),n.a.createElement("span",{action:"search",onClick:o,style:{marginTop:"18px"}},n.a.createElement(Pa.a,{className:"pointer"}))),"empresa"!==l&&n.a.createElement("div",{className:"downloadXls",onClick:i},n.a.createElement("img",{className:"downloadXls__icon",src:"baixar"===p?"":"/images/excel.png",alt:"Fazer o download do arquivo xlsx",title:"Arquivo xlsx com todos os ve\xedculos baixados"})))),u&&n.a.createElement(n.a.Fragment,null,n.a.createElement("section",{className:"dischargedContainer"},m.map((function(e,t){var a=e.label;return n.a.createElement(rt.a,{label:a,key:t,value:u[a],disabled:!0,InputLabelProps:{style:{fontSize:"0.7rem"},shrink:!0},InputProps:{style:{width:"250px",margin:"8px 10px 0 0",fontSize:"0.7rem",color:"Situa\xe7\xe3o"===a&&"Reativado"===u[a]?"red":"#444"}}})}))),n.a.createElement("section",{className:"obs"},n.a.createElement("label",{htmlFor:"obs",className:"obs__label"},"Observa\xe7\xf5es:"),n.a.createElement("textarea",{name:"obs",id:"obs",className:"obs__textArea",defaultValue:u["Observa\xe7\xe3o"],cols:"30",rows:"6"})),f&&n.a.createElement("footer",{className:"reactivate"},n.a.createElement(Hr,{action:"save",label:"Reativar",onClick:function(){return c()}})))),d&&n.a.createElement("h3",null,"Ve\xedculo n\xe3o encontrado."))},Wr=a(496),Kr=a.n(Wr),$r=[{field:"placa",label:"Placa",datalist:"placa",autoComplete:!0,collection:"frota",maxLength:8},{field:"renavam",label:"Renavam"},{field:"nChassi",label:"N\xfamero do Chassi",maxLength:17},{field:"utilizacao",label:"Utiliza\xe7\xe3o",disabled:!0},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",disabled:!0},{field:"marcaChassi",label:"Marca do Chassi",disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",disabled:!0},{field:"marcaCarroceria",label:"Marca da Carroceria",disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",disabled:!0},{type:"number",field:"indicadorIdade",label:"Indicador de idade",disabled:!0}],Xr=function(e){var t=e.user,a=e.selectOption,o=e.handleInput,i=e.handleBlur,c=e.handleCheck,l=e.handleSubmit,s=e.selectMotivo,u=e.data,d=e.empresas,f=e.motivosBaixa,p=e.searchDischarged,m=e.downloadXls,h=e.reactivateVehicle,v=e.setShowPendencias,g=u.selectedEmpresa,b=u.selectedOption,y=u.checked,E=u.delegaTransf,x=u.justificativa,w=u.selectedMotivo,O=u.demand,S=u.info,j=u.motivo,L=u.showPendencias;return n.a.createElement(r.Fragment,null,n.a.createElement(Kt,{links:["Ve\xedculos","/veiculos"],text:"Baixa de ve\xedculo",demand:O}),n.a.createElement(tt,{data:u,empresas:d,handleInput:o,handleBlur:i}),n.a.createElement("div",{className:"flexColumn"},g&&n.a.createElement(n.a.Fragment,null,!O&&n.a.createElement(Yr,{demand:O,checked:y,delegaTransf:E,justificativa:x,empresas:d,selectOption:a,handleInput:o,handleBlur:i,handleCheck:c,handleSubmit:l}),"baixar"===b?n.a.createElement("div",{className:"flex"},n.a.createElement("section",{className:"paper"},n.a.createElement("h3",{style:{marginBottom:"7px"}},O?"Solicita\xe7\xe3o n\xba".concat(null===O||void 0===O?void 0:O.numero," - ").concat(null===O||void 0===O?void 0:O.subject):"Informe os dados para a baixa"),O&&n.a.createElement("h4",null,j),O&&n.a.createElement("h4",null,"Situa\xe7\xe3o: ",null===O||void 0===O?void 0:O.status),n.a.createElement(ot,{form:$r,data:u,handleBlur:i,handleInput:o,disableAll:!!O})),n.a.createElement(Rr,{demand:O,selectedOption:b,motivosBaixa:f,selectMotivo:s,selectedMotivo:w,info:S,empresas:d,handleInput:o,handleBlur:i,handleSubmit:l,setShowPendencias:v,showPendencias:L})):"gerenciar"===b?n.a.createElement(Jr,{data:u,user:t,handleInput:o,searchDischarged:p,downloadXls:m,reactivateVehicle:h}):null,O||"baixar"!==b?O?n.a.createElement(Xt,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:O,setShowPendencias:v,showPendencias:L,info:S,handleSubmit:l,handleInput:o}):null:n.a.createElement("div",{className:"flexEnd"},n.a.createElement(st.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"10px 0 10px 0"},onClick:function(){return l()}},"Confirmar ",n.a.createElement("span",null,"\xa0\xa0 ")," ",n.a.createElement(Kr.a,null))))))};function Zr(){Zr=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Qr=function(e){Object(k.a)(a,e);var t=Object(C.a)(a);function a(){var e;Object(j.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={empresas:[],razaoSocial:"",frota:[],placa:"",form:{},check:"",delegaTransf:"",toastMsg:"Solicita\xe7\xe3o de Baixa Enviada",confirmToast:!1,openDialog:!1,showPendencias:!1},e.selectOption=function(t){return e.setState({selectedOption:t.target.value})},e.selectMotivo=function(t){return e.setState({selectedMotivo:t.target.value})},e.handleInput=function(){var t=Object(S.a)(Zr().mark((function t(a){var r,n,o,i,c,l,s,u;return Zr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.target,n=r.name,o=r.value,i=e.props.redux,c=i.veiculos,l=i.empresas,e.setState(Object(m.a)({},n,o)),!("razaoSocial"===n&&o.length>2)){t.next=15;break}if(!(s=l.find((function(e){return e.razaoSocial===o})))){t.next=12;break}return t.next=7,e.setState({razaoSocial:s.razaoSocial,selectedEmpresa:s});case 7:o!==s.razaoSocial&&e.setState({selectedEmpresa:void 0}),u=c.filter((function(t){return t.empresa===e.state.razaoSocial})),e.setState({frota:u}),t.next=15;break;case 12:return t.next=14,e.setState({selectedEmpresa:void 0,frota:[]});case 14:e.reset();case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleBlur=function(){var t=Object(S.a)(Zr().mark((function t(a){var r,n,o,i,c,l,s,u,d,f,p,m,h,g,b;return Zr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.redux,n=r.empresas,o=r.logs,i=e.state,c=i.frota,l=i.demand,s=a.target.name,u=a.target.value,"delegaTransf"!==s){t.next=14;break}if(!(u.length>0)){t.next=14;break}if(!(d=n.find((function(e){return e.razaoSocial===u})))){t.next=13;break}return f=d.razaoSocial,p=d.codigoEmpresa,t.next=9,e.setState({delegaTransf:f,delegaTransfId:p,disableSubmit:!0});case 9:console.log(e.state),t.next=14;break;case 13:e.setState({openAlertDialog:!0,alertType:"empresaNotFound",delegaTransf:""});case 14:if("placa"!==s||"string"===typeof c){t.next=29;break}if(u&&""!==u||e.setState({disableSubmit:!0}),u.length>2&&(m=c.find((function(e){return"string"===typeof u?e.placa.toLowerCase().match(u.toLowerCase()):e.placa.match(u)}))),!m){t.next=28;break}if(l){t.next=24;break}if("Solicita\xe7\xe3o j\xe1 cadastrada",g="J\xe1 existe uma demanda aberta para o ve\xedculo de placa ".concat(m.placa,'. Para acess\xe1-la, clique em "Solicita\xe7\xf5es" no menu superior.'),!ba(null===(h=m)||void 0===h?void 0:h.veiculoId,o)){t.next=24;break}return e.setState({customTitle:"Solicita\xe7\xe3o j\xe1 cadastrada",customMessage:g,openAlertDialog:!0,delegatario:"",placa:void 0}),t.abrupt("return");case 24:return t.next=26,e.setState(Object(v.a)(Object(v.a)({},m),{},{selectedVehicle:m}));case 26:t.next=29;break;case 28:""!==e.state.placa&&(b={},c[0]&&Object.keys(c[0]).forEach((function(e){return b[e]=""})),e.setState({alertType:"plateNotFound",openAlertDialog:!0,disableSubmit:!0}),e.setState(Object(v.a)({},b)));case 29:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleSubmit=function(){var t=Object(S.a)(Zr().mark((function t(a){var r,n,o,i,c,l,s,u,d,f,p,m,h,g,b,y,E,x,w,O;return Zr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.redux,n=r.empresas,o=r.veiculos,i=e.state,c=i.selectedEmpresa,l=i.veiculoId,s=i.selectedMotivo,u=i.demand,d=i.selectedVehicle,f=i.info,p=i.motivo,m=d.dataEmissao,h=d.vencimento,g=d.dataRegistro,b=c.codigoEmpresa,y={empresaId:b,veiculoId:l,history:{info:s?"Motivo da baixa: ".concat(s):p},historyLength:0,approved:a},u&&(y.id=null===u||void 0===u?void 0:u.id),!1!==a){t.next=8;break}return y.declined=!0,y.history.info=f,t.next=8,e.setState({toastMsg:"Baixa de ve\xedculo indeferida."});case 8:if(Xe(y).then((function(e){return console.log(e.data)})),!a){t.next=19;break}return"veiculos","veiculo_id",E={},da.forEach((function(e){var t=e.field,a=e.label;d[t]&&(E[a]=d[t].toString())})),x="string"===typeof p&&p.replace("Motivo da baixa: ",""),Object.assign(E,{"Situa\xe7\xe3o":"Baixado","Data de Registro":new Date(g).toLocaleDateString(),"Data baixa":(new Date).toLocaleDateString(),"Data Inicio":new Date(m).toLocaleDateString(),"Data Fim":new Date(h).toLocaleDateString(),"Motivo da Baixa":x,"Observa\xe7\xe3o":"".concat(p)}),D.a.patch("/api/baixaVeiculo",E),t.next=17,D.a.delete("/api/delete?table=".concat("veiculos","&tablePK=").concat("veiculo_id","&id=").concat(l,"&codigoEmpresa=").concat(b)).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 17:return t.next=19,e.setState({toastMsg:"Baixa realizada com sucesso."});case 19:if(e.toast(),!n||1!==n.length){t.next=26;break}return O={selectedEmpresa:n[0],razaoSocial:null===(w=n[0])||void 0===w?void 0:w.razaoSocial,frota:o},t.next=24,e.setState(Object(v.a)(Object(v.a)({},O),{},{selectedMotivo:void 0}));case 24:t.next=28;break;case 26:return t.next=28,e.setState({selectedEmpresa:void 0,frota:[],razaoSocial:"",selectedMotivo:void 0});case 28:e.reset(),u&&setTimeout((function(){e.props.history.push("/solicitacoes")}),1500);case 30:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.searchDischarged=function(){var t=Object(S.a)(Zr().mark((function t(a){var r,n,o,i,c,l,s,u,d,f,p;return Zr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state.placaBaixada,o=e.props.redux.parametros,i=null===(r=o[0])||void 0===r?void 0:r.idadeBaixa,c=i.idadeBaixaAut,t.next=7,D.a.get("/api/getOldVehicles?placa=".concat(n));case 7:l=t.sent,(s=null===l||void 0===l?void 0:l.data)[0]?(u=s[0],d=(new Date).getFullYear(),f=+u["Ano carroceria"],p=!0,(d-f>c||"Reativado"===u["Situa\xe7\xe3o"])&&(p=!1),e.setState({dischargedFound:s[0],notFound:!1,reactivate:p})):e.setState({notFound:!0,dischargedFound:void 0});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.reactivateVehicle=function(){var t=e.state.dischargedFound,a={placa:null===t||void 0===t?void 0:t.Placa,"Situa\xe7\xe3o":"Reativado"},r="O ve\xedculo de placa ".concat(null===t||void 0===t?void 0:t.Placa," poder\xe1 ser recadastrado no sistema acessando as op\xe7\xf5es Ve\xedculos -> Cadastro de Ve\xedculos.");D.a.patch("/api/reactivateVehicle",a).then((function(t){200===t.status&&e.setState({customMessage:r,customTitle:"Ve\xedculo reativado.",openAlertDialog:!0,placaBaixada:"",dischargedFound:void 0}),console.log(t.data)}))},e.reset=function(){$r.forEach((function(t){return e.setState(Object(m.a)({},t.field,""))})),e.setState({delegaTransf:"",check:"",justificativa:"",checked:!1,demand:void 0})},e.downloadXls=function(){e.setState({loading:!0}),D()({url:"/api/oldVehiclesXls",method:"GET",responseType:"blob",onDownloadProgress:function(e){Math.round(e.loaded)}}).then((function(t){var a=t.headers["content-disposition"],r=a.indexOf("=")+1,n=a.slice(r),o=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=o,i.setAttribute("download",n),document.body.appendChild(i),i.click(),e.setState({loading:!1})})).catch((function(e){console.log(e)}))},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.handleCheck=function(t){return e.setState({checked:t.target.value})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(t){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:t||e.state.toastMsg})},e}return Object(L.a)(a,[{key:"componentDidMount",value:function(){var e=Object(S.a)(Zr().mark((function e(){var t,a,r,n,o,i,c,l,s,u,d,f,p,m,h,g,b,y;return Zr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.props.redux,i=o.empresas,c=o.veiculos,i&&1===i.length&&this.setState({selectedEmpresa:i[0],razaoSocial:null===(t=i[0])||void 0===t?void 0:t.razaoSocial,frota:c}),!(l=null===(a=this.props)||void 0===a||null===(r=a.location)||void 0===r||null===(n=r.state)||void 0===n?void 0:n.demand)){e.next=7;break}return u=this.props.redux,d=u.empresas,f=u.veiculos,p=l.empresa,m=l.veiculo,h=d.find((function(e){return e.razaoSocial===p})),g=f.filter((function(e){return e.placa===m})),b=g.find((function(e){return e.placa===m})),y=null===l||void 0===l||null===(s=l.history[0])||void 0===s?void 0:s.info,e.next=7,this.setState(Object(v.a)(Object(v.a)({razaoSocial:p,selectedEmpresa:h,placa:m,frota:g},b),{},{selectedVehicle:b,demand:l,selectedOption:"baixar",motivo:y}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.user,t=this.props.redux,a=t.empresas,o=t.parametros[0].motivosBaixa,i=this.state,c=i.delegaTransf,l=i.confirmToast,s=i.toastMsg,u=i.checked,d=i.openAlertDialog,f=i.customTitle,p=i.customMessage,m=i.alertType,h=i.loading;return n.a.createElement(r.Fragment,null,n.a.createElement(Xr,{data:this.state,empresas:a,user:e,motivosBaixa:o,checked:u,selectOption:this.selectOption,selectMotivo:this.selectMotivo,delegaTransf:c,handleInput:this.handleInput,handleBlur:this.handleBlur,handleCheck:this.handleCheck,handleSubmit:this.handleSubmit,searchDischarged:this.searchDischarged,downloadXls:this.downloadXls,reactivateVehicle:this.reactivateVehicle,setShowPendencias:this.setShowPendencias}),d&&n.a.createElement(sa,{open:d,close:this.closeAlert,alertType:m,customTitle:f,customMessage:p}),n.a.createElement(ee,{open:l,close:this.toast,msg:s}),h&&n.a.createElement(B,null))}}]),a}(r.Component);Qr.contextType=qr;var en=we(["veiculos","empresas","parametros","equipamentos","acessibilidade"],Qr),tn=a(161),an=a.n(tn),rn=(a(583),a(271)),nn=a.n(rn),on=a(270),cn=a.n(on),ln=function(e){var t=e.data,a=e.handleInput,r=e.plusOne,o=e.removeOne;console.log("\ud83d\ude80 ~ file: SimpleParams.jsx ~ line 8 ~ SimpleParams ~ data",t);var i=Object(h.a)(null===t||void 0===t?void 0:t.newState)||[];return n.a.createElement(n.a.Fragment,null,n.a.createElement("header",null,n.a.createElement("h4",{className:"singleParams__title"},"Clique nos campos abaixo para editar e/ou adicione novos.")),i.map((function(e,t){return n.a.createElement("section",{className:"singleParams__container",key:t},n.a.createElement("div",{className:"singleParams__rowContainer"},n.a.createElement(rt.a,{name:t.toString(),value:i[t],onChange:a,variant:"filled",InputProps:{style:{margin:"8px 0"}},inputProps:{style:{width:"300px",textAlign:"center",fontSize:"10pt",height:"30px",padding:"5px 0"}}}),n.a.createElement("div",{className:"singleParams__deleteIcon",title:"Remover",onClick:function(){return o(t)}},n.a.createElement(cn.a,null))))})),n.a.createElement("div",{className:"addIcon"},n.a.createElement("div",{className:"addIcon__container",onClick:function(){return r()}},n.a.createElement("span",{className:"addIcon__text"},"Adicionar"),n.a.createElement(nn.a,{className:"addIcon__icon"}))))};function sn(e){var t=e.title,a=e.checked,r=e.toggleChecked;return n.a.createElement(n.a.Fragment,null,n.a.createElement(lt.a,{style:{marginTop:"20px"},control:n.a.createElement(ct.a,{checked:!0===a,onChange:function(){return r(!a)},value:a}),label:n.a.createElement("p",{style:{color:"#2979ff",fontSize:"0.7rem",float:"right"}},t)}))}a(584);var un=function(e){var t=e.data,a=e.selectOption,r=e.handleInput,o=e.handleSubmit,i=e.plusOne,c=e.removeOne,l=e.outsider,s=e.toggleChecked,u=t.tab,d=t.options,f=t.selectedOption,p=t.form,m=t.modified;return n.a.createElement(n.a.Fragment,null,!l&&n.a.createElement("header",{className:"selectHeader"},n.a.createElement(Kt,{links:["Par\xe2metros","/parametros"],text:"Altera\xe7\xe3o de par\xe2metros do sistema"}),n.a.createElement("h4",{className:"parametrosTitle"},"Altera\xe7\xe3o de par\xe2metros do sistema"),n.a.createElement(rt.a,{className:"config__selector",onChange:a,name:"selectedOption",value:f||"",select:!0,label:!f&&"Selecione uma das op\xe7\xf5es...",SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},d.map((function(e,t){return n.a.createElement(at.a,{key:t,value:e},e)})))),p&&3!==u&&5!==u&&n.a.createElement("main",{className:"configForm"},n.a.createElement(ot,{form:p,data:t,handleInput:r,style:{width:"100%",flexDirection:"column"}})),(3===u||6===u)&&n.a.createElement(ln,{form:p,data:t,plusOne:i,removeOne:c,handleInput:r,style:{width:"100%",flexDirection:"column"}}),5===u&&n.a.createElement("div",{className:"flex center"},n.a.createElement(sn,{title:"Habilitar valida\xe7\xe3o de campos",checked:t.inputValidation,toggleChecked:s})),f&&n.a.createElement("div",{style:{minHeight:"60px",position:"flex"}},n.a.createElement(Hr,{action:"save",onClick:o,disabled:!m})))},dn={variant:"outlined",pattern:/^[0-9]*$/,maxLength:2},fn=dn.variant,pn=[{field:"comercial",label:"Comercial"},{field:"comercialExecutivo",label:"Comercial Executivo"},{field:"convencional",label:"Convencional"},{field:"convencionalExecutivo",label:"Convencional Executivo"},{field:"leito",label:"Leito"},{field:"leitoExecutivo",label:"Leito e Executivo"},{field:"semiLeito",label:"Semi-Leito"},{field:"semiLeitoExecutivo",label:"Semi-Leito Executivo"}],mn=[Object(v.a)({field:"idadeMaxCad",label:"Idade m\xe1xima para cadastro (anos)"},dn),Object(v.a)(Object(v.a)({field:"difIdade",label:"Diferen\xe7a toler\xe1vel de idade da carroceria e chassi (anos)"},dn),{},{maxLength:1}),Object(v.a)({field:"idadeBaixaAut",label:"Idade para baixa autom\xe1tica (anos)"},dn),{field:"diaBaixaAut",label:"Dia para baixa autom\xe1tica (dd/mm)",maxLength:5,pattern:/^(0[1-9]|[12][0-9]|30(?!\/02)|31(?!\/(0[2469]|11)))\/(0[1-9]|1[0-2])$/,variant:fn},Object(v.a)(Object(v.a)({field:"prazoAvisoBaixa",label:"Prazo para aviso de baixa (dias)"},dn),{},{maxLength:3})],hn=[{field:"motivoBaixa",label:"Inserir novo motivo"}],vn=[{field:"secretaria",label:"Nome da Secretaria"},{field:"subsecretaria",label:"Nome da Subsecretaria"},{field:"superintendencia",label:"Nome da Superintendencia"},{field:"diretoria",label:"Nome da diretoria"},{field:"sistema",label:"Nome do sistema"},{field:"siglaSecretaria",label:"Sigla da Secretaria"},{field:"siglaSistema",label:"Sigla do Sistema"}],gn=[{field:"prazoAlertaLaudo",label:"Prazos para aviso de vencimento do Laudo (dias)",pattern:/^\d+(?:,\s*\d{1,3})*$/,maxLength:50},{field:"prazoAlertaProcuracao",label:"Prazos para aviso de vencimento da Procura\xe7\xe3o (dias)",pattern:/^\d+(?:,\s*\d{1,3})*$/,maxLength:50},{field:"prazoAlertaSeguro",label:"Prazos para aviso de vencimento do Seguro (dias)",pattern:/^\d+(?:,\s*\d{1,3})*$/,maxLength:50}],bn=[{field:"adminEmails",label:"Editar e-mails para envio de alertas di\xe1rios"}];function yn(){yn=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var En=we(["parametros"],(function(e){var t=Object(r.useState)({options:["Idade e prazos para baixa","Dist\xe2ncia m\xednima entre poltronas","Nomenclaturas","Motivos para baixa do ve\xedculo","Prazos para avisos autom\xe1ticos do sistema","Valida\xe7\xe3o de campos","Emails para notifica\xe7\xe3o autom\xe1tica"],params:["idadeBaixa","distanciaPoltronas","nomes","motivosBaixa","prazosAlerta","inputValidation","adminEmails"],forms:[mn,pn,vn,hn,gn,bn]}),a=Object(Qe.a)(t,2),o=a[0],i=a[1],c=o.toastMsg,l=o.toastStatus,s=o.confirmToast,u=e.outsider;Object(r.useEffect)((function(){if(u){var t,a=e.redux.parametros,r=a[0].motivosBaixa;r&&"object"===typeof r&&(null===(t=a[0])||void 0===t?void 0:t.id)&&(r.id=a[0].id),i(Object(v.a)(Object(v.a)({},o),{},{form:hn,tab:3,initState:r,newState:r,selectedOption:"Motivos para baixa do ve\xedculo"}))}return function(){}}),[u]);var d=Object(r.useCallback)((function(t){var a,r,n,c=t.target,l=c.name,s=c.value,u=e.redux.parametros,d=o.options,f=o.forms,p=o.params,h=d.indexOf(s),g=f[h],b=u[0][p[h]];b&&b instanceof Object&&(null===(a=u[0])||void 0===a?void 0:a.id)?b.id=u[0].id:"boolean"===typeof b&&(b={id:u[0].id,inputValidation:b}),i(3===h||6===h?Object(v.a)(Object(v.a)({},o),{},(r={initState:b,newState:b},Object(m.a)(r,l,s),Object(m.a)(r,"tab",h),Object(m.a)(r,"form",g),Object(m.a)(r,"modified",!1),r)):Object(v.a)(Object(v.a)(Object(v.a)({},o),b),{},(n={initState:b},Object(m.a)(n,l,s),Object(m.a)(n,"tab",h),Object(m.a)(n,"form",g),Object(m.a)(n,"newState",void 0),Object(m.a)(n,"modified",!1),n)))}),[e.redux,o]),f=function(){var e=Object(S.a)(yn().mark((function e(t){var a,r,n,c,l,s,u;return yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=o.tab,r=t.target,n=r.name,c=r.value,3===a||6===a?((s=Object(h.a)(o.newState))[n]=c,l=p(null,null,s),i(Object(v.a)(Object(v.a)({},o),{},{newState:s,modified:l}))):(l=p(n,c),i(Object(v.a)(Object(v.a)({},o),{},(u={},Object(m.a)(u,n,c),Object(m.a)(u,"modified",l),u))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e,t,a){var r,n,i,c=o.initState,l=!1;return a?i=c.toString()!==a.toString():(Object.keys(c).forEach((function(t){t!==e&&o[t].toString()!==c[t].toString()&&(r=!0)})),n=c[e]&&c[e].toString()!==t),(n||r||i)&&(l=!0),l},g=function(e,t){return i(Object(v.a)(Object(v.a)({},o),{},{confirmToast:!o.confirmToast,toastMsg:e,toastStatus:t}))};return n.a.createElement(n.a.Fragment,null,n.a.createElement(un,{data:o,selectOption:d,plusOne:function(){var e=Object(h.a)(o.initState);o.newState&&(e=Object(h.a)(o.newState)),e[e.length]="",i(Object(v.a)(Object(v.a)({},o),{},{newState:e}))},removeOne:function(e){var t=o.initState,a=o.newState,r=Object(h.a)(t);a&&(r=Object(h.a)(a)),r.splice(e,1);var n=p(null,null,r);i(Object(v.a)(Object(v.a)({},o),{},{newState:r,modified:n}))},handleInput:f,handleSubmit:function(){var e,t=o.tab,a=o.forms,r=o.params,n=o.initState,c=o.newState,l=o.inputValidation,s=n.id,u=a[t],d=u&&u.map((function(e){return e.field})),f=r[t],p={};if(3===t||6===t)c.forEach((function(e,t){""===e&&c.splice(t,1)})),i(Object(v.a)(Object(v.a)({},o),{},{newState:c})),p=c;else if(4===t){var h,b=Object(A.a)(u);try{for(b.s();!(h=b.n()).done;){var y=h.value,E=o[y.field];Array.isArray(E)||(E=E.split(",")),E=E.map((function(e){return Number(e)})),Object.assign(p,Object(m.a)({},y.field,E))}}catch(x){b.e(x)}finally{b.f()}if(de())return void alert("Os prazos devem ser informados em n\xfameros de dias e separados por v\xedrgula. Favor verificar o preenchimento.")}else 5===t?p=l:d.forEach((function(e){return Object.assign(p,Object(m.a)({},e,o[e]))}));D.a.patch("/api/parametros",(e={},Object(m.a)(e,f,p),Object(m.a)(e,"id",s),e)).then((function(e){200===e.status&&(g(e.data),setTimeout((function(){i(5===t?Object(v.a)(Object(v.a)({},o),{},{initState:{id:s,inputValidation:l},modified:!1}):Object(v.a)(Object(v.a)({},o),{},{initState:p,modified:!1}))}),1200))})).catch((function(e){return console.log(e)}))},outsider:e.outsider,toggleChecked:function(){var e=!(null===o||void 0===o?void 0:o.inputValidation),t=e!==o.initState.inputValidation;i(Object(v.a)(Object(v.a)({},o),{},{inputValidation:e,modified:t}))}}),n.a.createElement(ee,{open:s,close:g,msg:c,status:l}))}));function xn(e){var t=e.collections,a=e.collection,o=e.data,i=e.staticData,c=e.editMotivosBaixa,l=e.selectCollection,s=e.handleChange,u=e.enableEdit,d=e.confirmDelete,f=(e.handleSubmit,e.openAddDialog);return n.a.createElement(r.Fragment,null,n.a.createElement(Kt,{links:["Ve\xedculos","/veiculos"],text:"Alterar configura\xe7\xf5es de ve\xedculos"}),n.a.createElement("center",null,n.a.createElement("h4",null,"Selecione uma das op\xe7\xf5es abaixo.")),n.a.createElement("header",{className:"selectHeader"},n.a.createElement(rt.a,{className:"config__selector",onChange:l,value:a,select:!0,SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},t.map((function(e,t){return n.a.createElement(at.a,{key:t,value:e},e)})))),i&&a&&!c&&n.a.createElement("div",{className:"divHeader"},n.a.createElement(st.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"10px 0 10px 0"},onClick:function(){return f()}},n.a.createElement(dt.a,null)," Adicionar")),c?n.a.createElement(En,{form:hn,tab:3,outsider:!0}):n.a.createElement("div",{className:"container"},o&&i&&o.map((function(e,t){return n.a.createElement("div",{className:"divCell",key:t},n.a.createElement(rt.a,{value:e.edit?e[i.field]:e[i.field]+" ("+e.count+")",onChange:s,name:e.field,type:"text",inputProps:{autoCorrect:"off",spellCheck:!1,style:{fontSize:"0.8rem",color:!0===e.edit?"#000":"#999"}},className:"config__textField",disabled:!1===e.edit}),n.a.createElement("button",{component:"span",className:"configVehicleIcon",title:"Editar",onClick:function(){return u(t)},display:"none"},n.a.createElement(an.a,{className:"confIcon",color:"primary"})),n.a.createElement("button",{className:"configVehicleIcon",title:"Remover",onClick:function(){return d(t)}},n.a.createElement(Ha.a,{className:"confIcon",color:"secondary"})))}))))}function wn(){wn=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var On=we(["seguradoras","lookUpTable/marca_chassi","modelosChassi","lookUpTable/marca_carroceria","carrocerias","equipamentos","veiculos","acessibilidade","empresasLaudo"],function(e){Object(k.a)(a,e);var t=Object(C.a)(a);function a(){var e;Object(j.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={collection:"",marca:"",options:[],openAddDialog:!1,confirmToast:!1,toastMsg:"Dados atualizados!",confirmDialogProps:{open:!1}},e.addCounter=function(e,t,a){var r=t.name,n=t.field,o=t.label;return a.forEach((function(t){var a=e.filter((function(e){return!e.hasOwnProperty(r)||"Itens de acessibilidade"!==o&&"Equipamentos"!==o?e[r]===t[n]:e[r].find((function(e){return e===t.id}))})).length;Object.assign(t,{count:a})})),a=a.sort((function(e,t){return e[n].localeCompare(t[n])}))},e.selectCollection=function(){var t=Object(S.a)(wn().mark((function t(a){var r,n,o,i,c,l,s;return wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Motivos para baixa do ve\xedculo"!==(r=a.target.value)){t.next=4;break}return e.setState({editMotivosBaixa:!0,collection:r}),t.abrupt("return");case 4:return n=e.props.redux,o=n.veiculos,i=n.marcaChassi,c=n.marcaCarroceria,l=me.find((function(e){return e.label===r})),s=JSON.parse(JSON.stringify(e.props.redux[l.collection])),(s=e.addCounter(o,l,s)).forEach((function(e){return e.edit=!1})),e.setState({marcas:void 0,marca:""}),"modelosChassi"===l.collection&&e.setState({marcas:i}),"carrocerias"===l.collection&&e.setState({marcas:c}),t.next=13,e.setState({collection:r,data:s,staticData:l,editMotivosBaixa:void 0});case 13:case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.enableEdit=function(){var t=Object(S.a)(wn().mark((function t(a){var r,n,o,i,c,l,s,u,d,f,p,m,h,v,g,b,y,E;return wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(E=function(){return(E=Object(S.a)(wn().mark((function e(){return wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.forEach((function(e){return e.edit=!1})),p[a].edit=!0,e.next=4,this.setState({data:p,editIndex:a});case 4:s.focus();case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},y=function(){return E.apply(this,arguments)},i=JSON.parse(JSON.stringify(e.props.redux)),c=document.querySelectorAll(".divCell"),l=c[a].childNodes[0],s=l.querySelectorAll("input")[0],u=e.state,d=u.updatedObj,f=u.staticData,p=JSON.parse(JSON.stringify(e.state.data)),m=p[a],h=null===(r=e.state)||void 0===r||null===(n=r.staticData)||void 0===n?void 0:n.field,void 0===(null===m||void 0===m?void 0:m.edit)&&(m.edit=!1),v=i[f.collection].find((function(e){return e.id===m.id?Object.freeze(e):{}})),g=p[a][h]===v[h],b=p.some((function(e,t){return t!==a&&!0===e.edit&&(o=p.indexOf(e),e)}))){t.next=18;break}if(!1!==m.edit){t.next=14;break}return p[a].edit=!0,t.next=11,e.setState({data:p});case 11:s.focus(),t.next=17;break;case 14:p[a].edit=!1,d&&!g&&e.handleSubmit(d),e.setState({data:p,editIndex:void 0});case 17:return t.abrupt("return");case 18:b&&!m.edit&&(y.call(Object(Te.a)(e)),v=i[f.collection].find((function(e){var t;return e.id===(null===(t=p[o])||void 0===t?void 0:t.id)})),g=p[o][h]===v[h],d&&!g&&e.handleSubmit(d));case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.selectMarca=function(t){var a,r=t.target.value,n=e.state.staticData.collection,o=e.props.redux,i=o.marcaChassi,c=o.marcaCarroceria;"modelosChassi"===n&&(a=i),"carrocerias"===n&&(a=c);var l=a.find((function(e){return e.marca===r})).id;e.setState({marca:r,marcaId:l})},e.handleChange=function(){var t=Object(S.a)(wn().mark((function t(a){var r,n,o,i,c,l,s,u,d;return wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.target.value,n=e.state,o=n.staticData,i=n.data,c=o.field,l=i.find((function(e){return!0===e.edit})),s=i.indexOf(l),l[c]=r,(u=Object(h.a)(e.state.data))[s]=l,d=Object(m.a)({id:null===l||void 0===l?void 0:l.id},c,r),e.setState({data:u,updatedObj:d});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleInput=function(t){var a=t.target.value;e.setState({newElement:a})},e.addNewElement=Object(S.a)(wn().mark((function t(){var a,r,n,o,i,c,l,s,u,d;return wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,r=a.staticData,n=a.newElement,o=a.marcaId,i=r.table,c=r.field,l=r.collection,s=e.props.redux.veiculos,u=Object(m.a)({},c,n),o&&(u.marcaId=o),u=P.a.decamelizeKeys(u),console.log("\ud83d\ude80 ~ file: Config.jsx ~ line 205 ~ VehicleConfig ~ addNewElement= ~ requestElement",u),t.next=7,D.a.post("/api/addElement",{table:i,requestElement:u});case 7:d=e.props.redux[l],d=e.addCounter(s,r,d),e.setState({openAddDialog:!1,data:d,marcaId:void 0});case 10:case"end":return t.stop()}}),t)}))),e.confirmDelete=function(t){var a=e.state,r=a.data,n=a.staticData.field,o=r[t][n],i={open:!0,type:"delete",element:"".concat(o),index:t};e.setState({confirmDialogProps:i})},e.removeItem=function(){var t=Object(S.a)(wn().mark((function t(a){var r,n,o,i,c,l,s;return wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.closeConfirmDialog(),n=Object(h.a)(e.state.data),!((null===(r=n[a])||void 0===r?void 0:r.count)>0)){t.next=6;break}return alert("O item selecionado n\xe3o pode ser apagado por haver v\xednculo com um ou mais ve\xedculos cadastrados no sistema."),t.abrupt("return");case 6:if(o=e.state.staticData,i=o.collection,c=o.table,l=n[a].id,s=e.props.redux[i],!s.find((function(e){return e.id===l}))){t.next=10;break}return t.next=10,D.a.delete("/api/delete?table=".concat(c,"&tablePK=id&id=").concat(l)).catch((function(e){return console.log(e)}));case 10:n.splice(a,1),e.setState({data:n});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleSubmit=function(){var t=Object(S.a)(wn().mark((function t(a){var r,n,o;return wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.staticData,n=r.table,o=P.a.decamelizeKeys(a),t.next=3,D.a.put("/api/editElements",{table:n,tablePK:"id",update:o}).catch((function(e){return console.log(e)}));case 3:e.setState({updatedObj:void 0});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.closeConfirmDialog=function(){var t=Object(v.a)({},e.state.confirmDialogProps);t.open=!1,e.setState({confirmDialogProps:t})},e.toggleDialog=function(){return e.setState({openAddDialog:!e.state.openAddDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e}return Object(L.a)(a,[{key:"componentDidMount",value:function(){var e=[];me.forEach((function(t){e.push(t.label)})),this.setState({options:e})}},{key:"componentDidUpdate",value:function(e){var t=JSON.parse(JSON.stringify(this.props.redux)),a=t.veiculos,r=this.state,n=r.staticData,o=r.data,i=r.editIndex;if(!n||!o)return null;var c=n.collection;if(JSON.stringify(e.redux[c])!==JSON.stringify(t[c])){var l=this.addCounter(a,n,t[c]);(i||0===i)&&(l[i].edit=!0),this.setState({data:l})}}},{key:"render",value:function(){var e=this.state,t=e.options,a=e.collection,o=e.data,i=e.staticData,c=e.openAddDialog,l=e.marca,s=e.marcas,u=e.editMotivosBaixa,d=e.confirmToast,f=e.toastMsg,p=e.confirmDialogProps;return n.a.createElement(r.Fragment,null,n.a.createElement(xn,{collections:t,collection:a,data:o,staticData:i,selectCollection:this.selectCollection,enableEdit:this.enableEdit,handleChange:this.handleChange,handleSubmit:this.handleSubmit,openAddDialog:this.toggleDialog,confirmDelete:this.confirmDelete,editMotivosBaixa:u}),c&&n.a.createElement(Fa,{open:c,close:this.toggleDialog,title:i.label,helperMessage:'Para adicionar, insira o nome no campo abaixo e clique em "Confirmar".',marca:l,marcas:s,selectMarca:this.selectMarca,handleInput:this.handleInput,addNewElement:this.addNewElement}),p.open&&n.a.createElement(Ga,Object.assign({},p,{close:this.closeConfirmDialog,confirm:this.removeItem})),n.a.createElement(ee,{open:d,close:this.toast,msg:f}))}}]),a}(r.PureComponent)),Sn=a(118),jn=a.n(Sn),Ln=[{field:"placa",title:"Placa"},{field:"empresa",title:"Delegat\xe1rio"},{field:"seguradora",title:"Seguradora"},{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"vencimento",title:"Vencimento Seguro",render:function(e){return aa(e.vencimento)}},{field:"situacao",title:"Situa\xe7\xe3o"},{field:"compartilhado",title:"Compartilhado por"},{field:"indicadorIdade",title:"Indicador de idade",render:function(e){var t=e.indicadorIdade,a=" anos";if(t||0===t)return-1===t&&(t=0),1!==t&&0!==t||(a=" ano"),t.toString()+a}}],kn=[{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"seguradora",title:"Seguradora"},{field:"empresa",title:"Segurado"},{field:"situacao",title:"Situa\xe7\xe3o"},{field:"segurados",title:"N\xfamero de ve\xedculos"},{field:"dataEmissao",title:"In\xedcio da vig\xeancia",filtering:!1,render:function(e){return aa(e.dataEmissao)}},{field:"vencimento",title:"Vencimento",filtering:!1,render:function(e){return aa(e.vencimento)}}],Cn=[[{field:"codigoEmpresa",title:"C\xf3digo da Empresa"},{field:"razaoSocial",title:"Raz\xe3o Social"},{field:"vencimentoContrato",title:"Vencimento do Cadastro",filtering:!1,render:function(e){return aa(e.vencimentoContrato)}},{field:"cnpj",title:"CNPJ"},{field:"situacao",title:"Situa\xe7\xe3o"},{field:"frota",title:"Tamanho da frota"}]].concat([[{field:"nomeSocio",title:"Nome"},{field:"cpfSocio",title:"CPF"},{field:"nomeEmpresas",title:"Delegat\xe1rio(s)"},{field:"emailSocio",title:"E-mail"},{field:"telSocio",title:"Telefone"},{field:"share",title:"Participa\xe7\xe3o Societ\xe1ria (%)",filtering:!1}]]).concat([[{field:"nomeProcurador",title:"Nome"},{field:"cpfProcurador",title:"CPF"},{field:"emailProcurador",title:"E-mail"},{field:"telProcurador",title:"Telefone"},{field:"createdAt",title:"Data de inclus\xe3o no sistema",type:"date"},{field:"nomeEmpresas",title:"Empresas"}]]).concat([Ln]).concat([kn]),Nn=a(501),Pn=a(343),In=function(e,t){var a,r=JSON.parse(JSON.stringify(e)),n=[],o=Object(A.a)(r);try{var i=function(){var e=a.value,r=e.procuradorId,o=t.filter((function(e){return e.procuradores.includes(r)}));o.length&&o.forEach((function(t){var a=t.codigoEmpresa,r=t.razaoSocial,o=t.vencimento,i=e.nomeProcurador,c=e.cpfProcurador,l=e.emailProcurador,s=e.telProcurador,u=e.createdAt;n.push({"Nome do Procurador":i,CPF:c,"E-mail":l,Telefone:s,"Raz\xe3o Social":r,"C\xf3digo da Empresa":a,"Data de inclus\xe3o no sistema":aa(u),"Validade da Procura\xe7\xe3o":o?aa(o):"Prazo indeterminado"})}))};for(o.s();!(a=o.n()).done;)i()}catch(c){o.e(c)}finally{o.f()}return n};var Dn=function(e,t,a,r){var n=Or(e,a)||a,o=e,i=function(e,t,a){var r=JSON.parse(JSON.stringify(t));if(Array.isArray(r)){var n,o=Object(A.a)(r);try{var i=function(){var t=n.value;Object.entries(t).forEach((function(a){var r=Object(Qe.a)(a,2),n=r[0],o=r[1],i=e.find((function(e){return e.field===n}));if("procuradorId"!==n){if(!i)return void delete t[n];var c=null===i||void 0===i?void 0:i.label;o=function(e){return e instanceof Array&&(e=e.toString()),ue()(e,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()&&(e=ue()(e).format("DD/MM/YYYY")),e}(o),t[c]=o,delete t[n]}}))};for(o.s();!(n=o.n()).done;)i()}catch(c){o.e(c)}finally{o.f()}return r}}(t,n);"procuradores"===e&&(i=In(n,r));var c=Pn.utils.json_to_sheet(i),l=function(e){var t=Object.keys(e[0]).length,a=new Array(t);return e.forEach((function(e){Object.values(e).forEach((function(e,t){var r=e?e.toString().length:2;a[t]?a[t]+=r:a[t]=r}))})),a.map((function(t){var a=Math.ceil(t/e.length)+2;return a<7?7:a}))}(i);c["!cols"]=l.map((function(e){return{wch:e}}));var s={Sheets:{data:c},SheetNames:["data"]},u=Pn.write(s,{bookType:"xlsx",type:"array"}),d=new Blob([u],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Nn.saveAs(d,o+".xlsx")},An=a(487),_n=["ActionsComponent","onChangePage","onChangeRowsPerPage"],Tn=["onPageChange"];function Fn(e){var t=e.ActionsComponent,a=e.onChangePage,r=e.onChangeRowsPerPage,o=Object(O.a)(e,_n);return n.a.createElement(An.a,Object.assign({},o,{onPageChange:a,onRowsPerPageChange:r,ActionsComponent:function(e){var a=e.onPageChange,r=Object(O.a)(e,Tn);return n.a.createElement(t,Object.assign({},r,{onChangePage:a}))}}))}function zn(){zn=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Mn=function(e){var t=e.tab,a=e.collection,r=void 0===a?[]:a,o=e.user,i=e.procuracoes,c=e.showDetails,l=e.showFiles,s=e.showCertificate,u=e.confirmDeactivate,d=e.del,f=["codigoEmpresa","socioId","procuradorId","veiculoId","apolice"][t],p=["empresas","s\xf3cios","procuradores","ve\xedculos","seguros"],m=Lr(t);return n.a.createElement("div",{style:{margin:"10px 0"},className:"noPrint"},n.a.createElement(jn.a,{title:"Pesquisar dados de ".concat(p[t]),columns:Cn[t],data:r,style:{fontFamily:"Segoe UI",fontSize:"14px"},options:{filtering:!0,exportFileName:p[t],exportButton:!0,exportCsv:function(e,a){Dn(p[t],m,a,i)},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:20,rowStyle:{fontSize:"0.5rem"}},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Registro n\xe3o encontrado.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportCSVName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},actions:[{icon:"info",iconProps:{color:"primary"},tooltip:"Mais informa\xe7\xf5es",onClick:function(e,t){return c(e,t)}},{icon:"file_copy_outline",iconProps:{color:"secondary"},tooltip:"Ver arquivos",onClick:function(e,t){return l(t[f])}},{icon:"class_outlined",iconProps:{color:"action"},tooltip:"Emitir certificado",hidden:3!==t,onClick:function(e,t){return s(t)}},{icon:"cancel",iconProps:{color:"disabled"},tooltip:"Desativar empresa",hidden:0!==t||"empresa"===o.role,onClick:function(e,t){return u(t)}}],editable:{isDeleteHidden:function(e){return"empresa"===o.role||0===t},onRowDelete:function(){var e=Object(S.a)(zn().mark((function e(t){return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},components:{Pagination:Fn}}))},qn=a(827),Rn=a(430),Vn=a(91),Gn=a(828),Bn=a(825);a(460);function Un(){Un=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Yn=Object($.a)((function(e){return{toolbarTitle:{flex:1},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto",backgroundColor:"#0398c1",color:"white"},toolbarLink:{padding:"12px 55px 13px 55px",flexShrink:0}}})),Hn=[{title:"P\xe1gina Inicial",link:"/"},{title:"Consultas",link:"/consultas"},{title:"Ve\xedculos",link:"/veiculos"},{title:"Empresas",link:"/empresas"},{title:"Relat\xf3rios",link:"/relatorios"},{title:"Solicita\xe7\xf5es ",link:"/solicitacoes"},{title:"Editar Conta",link:"/editAccount",icon:"person"},{title:"Avisos",link:"/avisos",icon:"notifications"}],Jn=[{title:"Alterar par\xe2metros do sistema",link:"/parametros",icon:"settings"},{title:"Gest\xe3o de usu\xe1rios",link:"/users",icon:"group"}],Wn=Object(Ka.a)((function(e){return{badge:{right:-8,top:-1,padding:"0 4px"}}}))(Bn.a),Kn=Object(Ka.a)((function(e){return{badge:{right:-2,top:2.5,padding:"0"}}}))(Bn.a);var $n=Object(l.c)((function(e){var t,a,r;return{logs:null===(t=e.data)||void 0===t?void 0:t.logs,parametros:null===(a=e.data)||void 0===a?void 0:a.parametros,avisos:null===(r=e.data)||void 0===r?void 0:r.avisos,user:e.user}}),(function(e){return Object(c.b)({logUserOut:ce},e)}))(Object(w.g)((function(e){var t=null===e||void 0===e?void 0:e.logs,a=e.parametros,o=e.avisos,i=e.location.pathname,c=e.user,l=localStorage.getItem("demand"),s=Yn(),u=s.toolbarTitle,d=s.toolbarSecondary,f=s.toolbarLink,p=Object(r.useState)(document.location.pathname),m=Object(Qe.a)(p,2),h=m[0],v=m[1],g=Object(r.useState)(),b=Object(Qe.a)(g,2),y=b[0],E=b[1],w=Object(r.useState)(),O=Object(Qe.a)(w,2),j=O[0],L=O[1];Object(r.useEffect)((function(){if(t&&Array.isArray(t)){var e=t.filter((function(e){return!1===(null===e||void 0===e?void 0:e.completed)})).length;E(e)}v(i)}),[i,y,t]),Object(r.useEffect)((function(){if(Array.isArray(o)){var e=c.messagesRead,t=o.filter((function(t){return!e||!e.includes(null===t||void 0===t?void 0:t.id)})).length;L(t)}}),[L,o,c]);var k=function(e){var t,a=null===(t=document.querySelector("a[href='/solicitacoes']"))||void 0===t?void 0:t.style,r="",n="";return"/solicitacoes"===h||l?a&&(a["background-color"]="#11a7d2",a["border-bottom"]="1.5px solid #ccc"):h.match(e)&&"/"!==e&&(r="#11a7d2",n="1.5px solid #ccc",a&&(a["background-color"]="",a["border-bottom"]="")),{bgColor:r,borderB:n,borderT:"",fontW:"400"}},C="",N="";if(a&&a[0]){var P=a[0].nomes;C=P.secretaria,N=P.siglaSecretaria}var I=function(){var t=Object(S.a)(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.logUserOut(null===c||void 0===c?void 0:c.socketId));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,n.a.createElement(qn.a,null),n.a.createElement(Rn.a,null,n.a.createElement(Vn.a,{component:"h2",variant:"h6",color:"inherit",align:"center",noWrap:!0,className:u},N," - ",C),n.a.createElement(st.a,{variant:"outlined",size:"small",onClick:function(){return I()}},"Sair")),n.a.createElement(Rn.a,{component:"nav",variant:"dense",className:d},Hn.map((function(e,t){var a=e.link,r=e.title;return!e.icon&&n.a.createElement(Gn.a,{component:x.b,to:a,key:t,color:"inherit",noWrap:!0,variant:"body2",href:"",style:{fontFamily:"Segoe UI, Tahoma, Geneva, Verdana, sans-serif",fontSize:"15px",backgroundColor:k(a).bgColor,borderBottom:k(a).borderB,fontWeight:k(a).fontW,borderTop:k(a).borderT},className:f,onClick:function(){return v(a)}},"Solicita\xe7\xf5es "===r?n.a.createElement(Wn,{badgeContent:y,color:"secondary",overlap:"rectangular"},n.a.createElement("span",null,r)):r)})),"admin"===c.role?Jn.map((function(e,t){var a=e.title,r=e.link,o=e.icon;return n.a.createElement(Gn.a,{component:x.b,to:r,key:t},n.a.createElement("span",{className:"material-icons adminLink",style:{color:"white",cursor:"pointer"},title:a},o))})):n.a.createElement(Gn.a,{component:x.b,to:Hn[6].link},n.a.createElement("span",{className:"material-icons iconHeaderLink",style:{color:"white",cursor:"pointer"},title:Hn[6].title},Hn[6].icon)),n.a.createElement(Gn.a,{component:x.b,to:Hn[7].link},n.a.createElement(Kn,{badgeContent:j,color:"secondary",overlap:"rectangular"},n.a.createElement("span",{className:"material-icons avisosLink",style:{color:"white",cursor:"pointer"},title:Hn[7].title},Hn[7].icon)))))}))),Xn=function(){return null},Zn=a(829),Qn=a(822),eo=function(e){var t=e.items,a=e.tab,r=e.changeTab;return n.a.createElement("div",{className:"tabMenu"},n.a.createElement(Zn.a,{value:a,indicatorColor:"primary",textColor:"primary",centered:!0,onChange:r},t.map((function(e,t){return n.a.createElement(Qn.a,{key:t,label:e})}))))},to=[[{field:"empresa",label:"Delegat\xe1rio",width:"95mm",left:"50mm"},{field:"codigoEmpresa",label:"C\xf3digo do Delegat\xe1rio",width:"18mm"},{field:"dataExpedicaoCRV",label:"Data de emiss\xe3o",width:"20mm",value:ue()().format("DD/MM/YYYY")},{field:"vencimento",label:"Validade do CRV",type:"date",width:"20mm"}]],ao=[[{field:"placa",label:"Placa",width:"25mm",left:"8mm"},{field:"renavam",label:"Renavam",width:"42mm",left:"14mm"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",width:"35mm",left:"11mm"},{field:"nChassi",label:"N\xfamero do Chassi",width:"50mm",left:"15mm"}]],ro=[[{field:"poltronas",label:"Poltronas",width:"16mm",left:"2mm"},{field:"piquesPoltrona",label:"Piques poltrona",width:"19mm"},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)"},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)"},{field:"eixos",label:"Eixos",width:"12mm",left:"2mm"},{field:"pneumaticosDianteiro",label:"Pneum\xe1ticos Dianteiro"},{field:"pneumaticosTraseiro",label:"Pneum\xe1ticos Traseiro"},{field:"potencia",label:"Pot\xeancia (cv)",width:"15mm"}],[{field:"marcaChassi",label:"Marca do Chassi",width:"40mm",left:"4mm"},{field:"modeloChassi",label:"Modelo do Chassi",width:"40mm",left:"3mm"},{field:"anoChassi",label:"Ano do chassi"},{field:"marcaCarroceria",label:"Marca da Carroceria",width:"40mm",left:"2mm"},{field:"modeloCarroceria",label:"Modelo da Carroceria",width:"40mm",left:"1mm"},{field:"anoCarroceria",label:"Ano da carroceria"}]],no=[[{field:"seguradora",label:"Seguradora",width:"75mm",left:"27.5mm"},{field:"apolice",label:"Ap\xf3lice",width:"35mm",left:"11mm"},{type:"date",field:"dataEmissao",label:"In\xedcio de vig\xeancia",width:"25mm"},{type:"date",field:"vencimento",label:"Vencimento",width:"25mm",left:"5mm"}]],oo=[[{field:"numeroLaudo",label:"N\xfamero do Laudo",width:"45mm",left:"10mm"},{field:"empresaLaudo",label:"Empresa Respons\xe1vel",width:"80mm",left:"26mm"},{field:"vencimentoLaudo",label:"Vencimento",type:"date",width:"35mm",left:"9mm"}]],io=[[{field:"cmt",label:"PBT / CMT Legal (t)",width:"27mm",left:"2mm",format:function(e){return pa(e)}},{field:"pesoDianteiro",label:"Peso Dianteiro (t)",width:"27mm",left:"3.5mm",format:function(e){return pa(e)}},{field:"pesoTraseiro",label:"Peso Traseiro (t)",width:"27mm",left:"3.5mm",format:function(e){return pa(e)}},{field:"pbt",label:"Peso Bruto Total (t)",width:"30mm",left:"4mm",format:function(e){return pa(e)}},{field:"pesoPassageiros",label:"Passag/Bagagem (t)",width:"30mm",left:"3mm",format:function(e){return pa(e)}}]],co=[[{field:"dataRegistro",label:"Data de Registro",type:"date",width:"30mm",left:"4mm"},{field:"cores",label:"Cores",width:"65mm",left:"15mm"},{field:"compartilhado",label:"Empresa autorizada a compartilhar",width:"90mm",left:"11mm"}]],lo=a(502),so=a.n(lo),uo=(a(675),function(e){var t=e.nomes,a=t.secretaria,r=t.subsecretaria,o=t.superintendencia;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"certHeader__container"},n.a.createElement("div",{className:"certHeader__brasao"},n.a.createElement("img",{src:"/images/brasao.png",alt:"Bras\xe3o de Minas Gerais",className:"certHeader__img"})),n.a.createElement("div",{className:"certHeader__text"},n.a.createElement("p",null,a),n.a.createElement("p",null,r),n.a.createElement("p",null,o),n.a.createElement("h2",null,"Certificado de Registro e Seguro"))))}),fo=Object($.a)((function(e){return{textField:{paddingRight:"25px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"}}})),po=function(e){var t=e.vehicle,a=e.nomes,o=e.checkMulti,i=e.redirect,c=e.delega,l=e.carac,s=e.dadosVeiculo,u=e.seg,d=e.vistoria,f=e.peso,p=e.info,m=fo().textField,h=t.acessibilidade,v=t.equipamentos,g=t.obs,b=[{title:"Delegat\xe1rio",form:c},{title:"Dados do Ve\xedculo",form:s},{title:"Caracter\xedsticas do Ve\xedculo",form:l},{title:"Seguro",form:u},{title:"Vistoria",form:d},{title:"Pesagem",form:f},{title:"Informa\xe7\xf5es gerais",form:p},{title:"Observa\xe7\xf5es",form:g}];return n.a.createElement(r.Fragment,null,n.a.createElement("div",{id:"pdfPage",className:"A4"},n.a.createElement("header",{className:"header"},n.a.createElement(uo,{nomes:a})),b.map((function(e,t){var a=e.title,r=e.form;return"Observa\xe7\xf5es"!==a&&n.a.createElement("section",{className:"Delegat\xe1rio"!==a?"box":"firstBox",key:t},"Delegat\xe1rio"!==a&&n.a.createElement("span",{className:"boxTitle"},a),r.map((function(e,t){return n.a.createElement("div",{key:t,className:"Delegat\xe1rio"!==a?"divLine":"firstDivLine",style:{marginTop:0===t?"7mm":"3mm"}},e.map((function(e,t){return n.a.createElement(rt.a,{disabled:!0,key:t,name:e.field,label:e.label,className:m,multiline:!!("equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50),rows:e.value&&e.value.length<86?"2":e.value&&e.value.length<140?"3":"4",variant:"equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50?"outlined":"standard",value:"date"===e.type?ue()(e.value,!0).isValid()?e.value&&ue()(e.value).format("DD/MM/YYYY"):"":"dataExpedicao"===e.field?ue()().format("DD-MM-YYYY"):e.format?e.format(e.value):e.value||"",inputProps:{className:o(e.field),style:{width:e.width||"18mm",fontSize:"2.7mm",padding:"0 0 1px 0",margin:"0",flex:"1",color:"#000"}},InputProps:{style:{padding:"equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50?"1mm":""}},InputLabelProps:{shrink:!0,style:{fontSize:"13px",textAlign:"center !important",left:e.left||"0",color:"#000"}}})})))})))})),n.a.createElement("div",{className:"box"},n.a.createElement("span",{className:"boxTitle"},"Equipamentos / Itens de acessibilidade"),(v||h)&&n.a.createElement("div",{className:"divLine flex",style:{overflow:"unset"}},v.map((function(e,t){return h[0]||t!==v.length-1?n.a.createElement("span",{className:"equipa"},e,",\xa0"):n.a.createElement("span",{className:"equipa"},e,".")})),h.map((function(e,t){return t!==h.length-1?n.a.createElement("span",{className:"equipa",key:t},"".concat(e,", ")):n.a.createElement("span",{className:"equipa",key:t},"".concat(e,"."))})))),g&&n.a.createElement("div",{className:"flexColumn"},n.a.createElement(Nr,{label:"Observa\xe7\xf5es:",name:"obs",id:"obs",defaultValue:g,rows:"7",style:{color:"#000",fontSize:"0.55 rem",padding:"5px",overflow:"hidden"}})),n.a.createElement("footer",{className:"certFooter"},n.a.createElement("h1",{className:"certFooter__title"},"PORTE OBRIGAT\xd3RIO"),n.a.createElement("p",{className:"certFooter__text"},"Este certificado pode ser verificado em ",n.a.createElement("span",{className:"link",onClick:function(){return i()}}," https://www.cadti.mg.gov.br ")))),n.a.createElement("button",{title:"Imprimir / salvar PDF",className:"noprint printButton",onClick:function(){return window.print()}},n.a.createElement(so.a,{style:{cursor:"pointer",color:"rgb(161, 161, 180)",fontSize:"40pt"}})))};function mo(){mo=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}function ho(){var e=Object(r.useState)({}),t=Object(Qe.a)(e,2),a=t[0],o=t[1],i=Object(r.useState)({}),c=Object(Qe.a)(i,2),l=c[0],s=c[1];Object(r.useEffect)((function(){function e(){return(e=Object(S.a)(mo().mark((function e(){var t,a;return mo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("vehicle")),a=JSON.parse(localStorage.getItem("nomes")),document.querySelectorAll(".MuiToolbar-root").forEach((function(e){return e.style.display="none"})),e.next=5,o(t);case 5:if(!a){e.next=8;break}return e.next=8,s(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),localStorage.removeItem("vehicle")}),[]);var u=[ro,ao,to,no,oo,io,co],d={};if(a){var f=a.poltronas,p=a.pesoDianteiro,m=80*f/1e3;a.pesoPassageiros=m,a.pesoDianteiro=+p,u.forEach((function(e){Object.entries(a).forEach((function(t){var a=Object(Qe.a)(t,2),r=a[0],n=a[1];e.forEach((function(t,a){t.forEach((function(t,o){t.field===r&&(d=Object.assign(t,{value:n}),e[a][o]=d,d={})}))}))}))}))}if(!a){var h=window.location.origin;return window.location.replace(h),null}return n.a.createElement(po,{vehicle:a,nomes:l,checkMulti:function(e){return"equipamentosId"===e||"equipamentosId"===e?void 0:"certificate"},redirect:function(){document.querySelectorAll(".MuiToolbar-root").forEach((function(e){return e.style.display="none"}));var e=window.location.origin;window.location.href=e},delega:to,carac:ro,dadosVeiculo:ao,seg:no,vistoria:oo,peso:io,info:co})}var vo=function(e){return e>1024&&e<1048576?Math.round(e/1024)+" KB":e>=1048576&&e<1073741824?(e/1024/1024).toFixed(2)+" MB":e+" bytes"},go={marginBottom:0,display:"grid",grid:"50px / 4% 40% 25% 25%",width:"99%",margin:"auto",padding:"10px 0 0 0",justifyItems:"auto"},bo=function(e){var t=e.filesCollection,a=e.close,r=e.typeId,o=e.empresas,i=e.filesIds,c=e.razaoSocial,l=[],s="empresaDocs",u=Object(h.a)(Da);switch(r){case"veiculoId":s="vehicleDocs",(u=Object(h.a)(Lt)).find((function(e){return"transferenciaDoc"===e.name}))||u.push({title:"Documento de Transfer\xeancia",name:"transferenciaDoc"}),u.find((function(e){return"newPlateDoc"===e.name}))||u.push({title:"CRLV com nova placa",name:"newPlateDoc"}),u.find((function(e){return"apoliceDoc"===e.name}))||u.push({title:"Ap\xf3lice de seguro",name:"apoliceDoc"}),u.find((function(e){return"laudoDoc"===e.name}))||u.push({title:"Laudo de seguran\xe7a veicular",name:"laudoDoc"}),u.find((function(e){return"contratoCompartilhamento"===e.name}))||u.push({title:"Contrato de Compartilhamento",name:"contratoCompartilhamento"})}i&&(t=t.filter((function(e){return-1!==i.indexOf(e.id)}))),t&&t[0]&&t.forEach((function(e){u.forEach((function(t){e.metadata&&t.name===e.metadata.fieldName&&l.push(Object(v.a)(Object(v.a)({},e),{},{label:t.title}))}))}));return l[0]?n.a.createElement("div",{className:i?"":"popUpWindow"},n.a.createElement("h5",null,n.a.createElement("img",{alt:"",src:"/images/folderIcon2.jpg",style:{paddingLeft:"20px",marginRight:"20px"}})," Arquivos"),n.a.createElement("hr",{style:{marginBottom:"5px"}}),n.a.createElement("div",{style:go},n.a.createElement("div",null,n.a.createElement("img",{alt:"",src:"/images/multipleFiles2.png",height:"50%"})),["Arquivo","Data de Upload","Tamanho"].map((function(e,t){return n.a.createElement("div",{key:t},n.a.createElement("span",{style:{fontSize:"1.2em",fontWeight:500}},e))}))),n.a.createElement("hr",{style:{margin:"0 0 20px 0"}}),l.map((function(e,t){return n.a.createElement("div",{key:t},n.a.createElement("div",{style:go},n.a.createElement("div",{className:"col s1"},n.a.createElement("img",{alt:"",src:"/images/genericFile.png"})),n.a.createElement("div",{className:"col s11"},n.a.createElement("span",{style:{textDecoration:"underline",cursor:"pointer",color:"blue"},onClick:function(){return _t(e.id,e.filename,s,e.metadata.fieldName)}},function(e){var t=e.metadata,a=e.label;switch(t.fieldName){case"procuracao":if(c)return a+" - "+c;var r=o.find((function(e){return e.codigoEmpresa===Number(t.empresaId)}));return a+" - "+(null===r||void 0===r?void 0:r.razaoSocial)||"";case"apoliceDoc":return t.apolice?a+" n\xfamero "+t.apolice:a;case"altContratoDoc":return t.numeroAlteracao?"".concat(t.numeroAlteracao,"\xaa ")+a:a;default:return a}}(e))),n.a.createElement("div",{className:"col s3"},aa(e.uploadDate,!0)),n.a.createElement("div",{className:"col s3"},vo(e.length))))})),n.a.createElement(mt,{close:a})):null},yo=new MutationObserver((function(e,t){e.forEach((function(e){e.addedNodes.forEach((function(e){if(e.nodeType===Node.ELEMENT_NODE){var t=e;t.classList.contains("MuiPopover-root")&&Array.from(t.getElementsByClassName("MuiMenuItem-root")).forEach((function(e){"Export as PDF"===e.textContent&&e.remove()}))}}))}))})),Eo=function(e){return e?yo.disconnect():yo.observe(document.body,{childList:!0})},xo=function(e,t,a){var r;return e.forEach((function(e){if(e.empresas instanceof Array){var n=e.empresas;1===a&&(n=e.empresas.map((function(e){return null===e||void 0===e?void 0:e.codigoEmpresa}))),(r=t.filter((function(e){return n.includes(e.codigoEmpresa)})).map((function(e){return e.razaoSocial})).toString().replace(",",", "))&&(e.nomeEmpresas=r)}})),e};function wo(){wo=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Oo={top:"5%",left:"10%",right:"10%"},So=function(e){Object(k.a)(a,e);var t=Object(C.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).state={tab:0,items:["Empresas","S\xf3cios","Procuradores","Ve\xedculos","Seguros"],tablePKs:["codigo_empresa","socio_id","procurador_id","veiculo_id","id"],dbTables:["empresas","socios","procuradores","veiculos","seguros"],options:["empresas","socios","procuradores","veiculos","seguros"],detailsTitle:["Empresa","S\xf3cio","Procurador","Placa","Ap\xf3lice"],detailsHeader:["razaoSocial","nomeSocio","nomeProcurador","placa","apolice"],empresas:[],seguros:[],razaoSocial:"",showDetails:!1,showFiles:!1,openDialog:!1,filesCollection:[],elementDetails:"",vehicleDocs:[],showCertificate:!1},e.changeTab=function(t,a){e.setState((function(e){return{tab:a}}))},e.showDetails=function(t,a){var r,n=e.props.redux,o=e.state,i=o.options,c=o.tab,l=o.tablePKs.map((function(e){return P.a.camelize(e)}));a&&(r=n[i[c]].find((function(e){return e[l[c]]===a[l[c]]}))),a&&r?e.setState((function(e){return{showDetails:!e.showDetails,elementDetails:r}})):e.setState((function(e){return{showDetails:!e.showDetails,elementDetails:void 0}}))},e.closeFiles=function(){e.setState({showFiles:!e.state.showFiles})},e.showFiles=function(t){var a,r,n=e.state.tab,o=e.props.redux,i=o.veiculos,c=o.socios,l=o.empresaDocs,s=o.vehicleDocs;switch(n){case 0:a=l.filter((function(e){var a;return e.metadata.empresaId===t&&!1===(null===(a=e.metadata)||void 0===a?void 0:a.tempFile)})),r="empresaId";break;case 1:a=l.filter((function(e){return e.metadata.empresaId===t}));var u=c.find((function(e){return e.socioId===t}));if(u){var d=[];(a=l.filter((function(e){return u.empresas.some((function(t){return t.codigoEmpresa===e.metadata.empresaId&&"crc"!==e.metadata.fieldName}))}))).forEach((function(e){e.metadata.socios&&e.metadata.socios.includes(t)&&d.push(e)})),a=d}break;case 2:r="procuracaoId";var f=[];l.forEach((function(e){var a,r;"procuracao"===(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.fieldName)&&((null===e||void 0===e||null===(r=e.metadata)||void 0===r?void 0:r.procuradores)&&e.metadata.procuradores.forEach((function(a){a===t&&f.push(e)})))})),a=f;break;case 3:r="veiculoId",a=s.filter((function(e){return e.metadata.veiculoId===t}));var p=i.find((function(e){return e.veiculoId===t}));if(p){var m=l.find((function(e){var t,a;return(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.apolice)===(null===p||void 0===p||null===(a=p.apolice)||void 0===a?void 0:a.toString())}));m&&a.push(m)}break;case 4:a=l.filter((function(e){return e.metadata.apolice===t}))}a=a.filter((function(e){var t;return!1===(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.tempFile)})),console.log(a),a[0]?(a=a.sort((function(e,t){return new Date(e.uploadDate)-new Date(t.uploadDate)})).reverse(),e.setState({filesCollection:a,showFiles:!0,typeId:r,selectedElement:t})):(e.setState({alertType:"filesNotFound",openAlertDialog:!0,subject:r}),e.setState({filesCollection:[]}))},e.confirmDeactivate=function(t){"Desativada"!==t.situacao?e.setState({openConfirmDialog:!0,confirmType:"deactivateEmpresa",element:(null===t||void 0===t?void 0:t.razaoSocial)||"",empresaToDeactivate:null===t||void 0===t?void 0:t.codigoEmpresa}):alert("A empresa ".concat(t.razaoSocial," j\xe1 foi desativada."))},e.deleteHandler=function(t){var a=e.state,r=a.dbTables,n=a.tablePKs,o=a.tab,i=r[o],c=n[o],l=P.a.camelize(c),s=t.codigoEmpresa;if("socios"!==i&&"procuradores"!==i||(s=JSON.stringify(null===t||void 0===t?void 0:t.empresas)),0===o){var u={table:i,tablePK:"codigo_empresa",update:{codigo_empresa:s=t,situacao:"Desativada"}};D.a.put("/api/editElements",u),e.closeConfirmDialog()}else D.a.delete("/api/delete?table=".concat(i,"&tablePK=").concat(c,"&id=").concat(t[l],"&codigoEmpresa=").concat(s,"&cpf_socio=").concat(t.cpfSocio,"&cpf_procurador=").concat(t.cpfProcurador)).then((function(e){return console.log(e.data)}))},e.showCertificate=function(){var t=Object(S.a)(wo().mark((function t(a){var r,n,o,i,c,l,s,u;return wo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.redux.parametros,n=a.anoCarroceria,o=a.situacao,i=a.vencimento,c=ue()(i).isBefore(),l=(new Date).getFullYear(),!(l-n>=16)){t.next=7;break}if(ue()(a.vencimentoLaudo).isAfter(ue()())){t.next=7;break}return t.next=6,e.setState({openAlertDialog:!0,customTitle:"Certificado de seguran\xe7a veicular pendente.",customMessage:"O laudo de seguran\xe7a veicular n\xe3o est\xe1 registrado no sistema ou se encontra vencido. Para regularizar, acesse Ve\xedculos -> Laudos."});case 6:return t.abrupt("return");case 7:if("Ativo"===o){t.next=11;break}return t.next=10,e.setState({alertType:"veiculoPendente",openAlertDialog:!0});case 10:return t.abrupt("return");case 11:if(!c){t.next=15;break}return t.next=14,e.setState({alertType:"seguroVencido",openAlertDialog:!0});case 14:return t.abrupt("return");case 15:s=window.location.origin+"/crv",localStorage.setItem("vehicle",JSON.stringify(a)),r&&r[0]&&(u=r[0].nomes,localStorage.setItem("nomes",JSON.stringify(u))),window.open(s,"noopener");case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.closeCertificate=function(){return e.setState({showCertificate:!e.state.showCertificate})},e.closeConfirmDialog=function(){return e.setState({openConfirmDialog:!1})},e.escFunction=function(t){27===t.keyCode&&(e.state.showDetails&&e.showDetails(),e.state.showFiles&&e.closeFiles(),e.state.showCertificate&&e.closeCertificate())},e}return Object(L.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1),Eo()}},{key:"componentWillUnmount",value:function(){console.log("\ud83d\ude80 ~ file: Consultas.jsx:63 ~ ConsultasContainer ~ componentWillUnmount ~ true",!0),Eo(!0),this.setState({})}},{key:"render",value:function(){var e,t=this.state,a=t.tab,o=t.options,i=t.items,c=t.showDetails,l=t.elementDetails,s=t.showFiles,u=t.selectedElement,d=t.filesCollection,f=t.typeId,p=t.tablePKs,m=t.showCertificate,v=t.certified,g=t.detailsTitle,b=t.detailsHeader,y=t.openAlertDialog,E=t.openConfirmDialog,x=t.alertType,w=t.confirmType,O=t.customTitle,S=t.customMessage,j=this.props,L=j.redux,k=j.user,C=L.empresas,N=L.procuracoes,I=L.procuradores,D=L.empresaDocs,A=L.altContrato,_=p.map((function(e){return P.a.camelize(e)})),T=Object(h.a)(this.props.redux[o[a]]);return 1!==a&&2!==a||(T=xo(T,C,a)),l&&c&&(e=T.find((function(e){return e[_[a]]===l[_[a]]}))),n.a.createElement(r.Fragment,null,n.a.createElement(eo,{items:i,tab:a,changeTab:this.changeTab}),n.a.createElement(Mn,{tab:a,items:i,collection:T,empresas:C,procuracoes:N,user:k,showDetails:this.showDetails,showFiles:this.showFiles,del:this.deleteHandler,showCertificate:this.showCertificate,confirmDeactivate:this.confirmDeactivate}),c&&n.a.createElement(Dr,{close:this.showDetails,data:e||l,tab:a,title:g[a],header:b[a],empresas:C,procuracoes:N,procuradores:I,empresaDocs:D,altContrato:A}),m&&n.a.createElement(ho,{vehicle:v}),s&&n.a.createElement(bo,{tab:a,elementId:u,filesCollection:d,close:this.closeFiles,format:Oo,typeId:f,empresas:C,empresaDocs:D}),y&&n.a.createElement(sa,{open:y,close:this.closeAlert,alertType:x,tab:a,customMessage:S,customTitle:O}),E&&n.a.createElement(Ga,{open:E,close:this.closeConfirmDialog,confirm:this.deleteHandler,element:this.state.element,type:w,id:this.state.empresaToDeactivate}))}}]),a}(r.Component),jo=Object(l.c)(null,{updateCollection:V})(we(["veiculos","empresas","socios","procuradores","seguros","seguradoras","procuracoes","getFiles/vehicleDocs","getFiles/empresaDocs","equipamentos","acessibilidade","laudos","altContrato","parametros"],So)),Lo=[{title:"Contrato Social",name:"contratoSocial"},{title:"CRC",name:"crc"}],ko=function(e){var t=e.handleInput,a=e.handleBlur,r=e.data,o=e.handleFiles,i=e.removeFile,c=r.activeStep,l=r.stepTitles,s=r.form,u=r.fileToRemove;return n.a.createElement("div",{className:"flex paper"},n.a.createElement(it,{subtitle:l[c]}),n.a.createElement("main",null,n.a.createElement(ot,{form:hr,data:r,handleBlur:a,handleInput:t}),n.a.createElement("div",{className:"flex center"},Lo.map((function(e,t){var a=e.name,r=e.title;return n.a.createElement(St,{key:t,name:a,formData:s,dropDisplay:"Clique ou arraste para anexar o ".concat(r),handleFiles:o,removeFile:i,fileToRemove:u,style:{width:"25%",marginRight:0===t?"12px":0}})})))))},Co=[{field:"nomeSocio",label:"Nome do S\xf3cio",maxLength:90,width:195,disabled:!0},Object(v.a)(Object(v.a)({},cr),{},{width:195,disabled:!0}),Object(v.a)(Object(v.a)({},lr),{},{field:"telSocio",width:195}),Object(v.a)(Object(v.a)({},sr),{},{field:"emailSocio",width:195}),{field:"share",label:"Participa\xe7\xe3o Societ\xe1ria (%)",type:"number",width:195}],No=Object($.a)((function(e){return{list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#999",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"}}})),Po=function(e){var t=e.socios,a=e.empresas,o=e.handleInput,i=e.handleBlur,c=e.data,l=e.addSocio,s=e.enableEdit,u=e.handleEdit,d=e.removeSocio,f=c.activeStep,p=c.stepTitles,m=c.filteredSocios,h=c.selectedEmpresa,v=No(),g=v.iconButton,b=v.list,y=!0,E=Co;return p&&(y=!1,E=vr),n.a.createElement(n.a.Fragment,null,n.a.createElement("main",{className:"flex center"},y&&n.a.createElement("header",{style:{marginBottom:"10px",width:"100%"}},n.a.createElement(tt,{data:c,empresas:a,handleInput:o,handleBlur:i})),!h&&y||!y?p&&n.a.createElement("section",{className:"flex center paper"},n.a.createElement(it,{subtitle:p[f]}),n.a.createElement("div",{className:"flex center",style:{padding:"10px 0",width:"100%"}},n.a.createElement(ot,{form:E,data:c,handleBlur:i,handleInput:o})),n.a.createElement("div",{style:{margin:"5px 0 7px 84.58%",width:"100%"}},n.a.createElement(st.a,{color:"primary",variant:"outlined",size:"small",onClick:l},n.a.createElement(dt.a,null)," Adicionar s\xf3cio"))):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"flexColumn",style:{alignItems:"center"}},n.a.createElement("h6",{style:{fontSize:"14px"}},"Altera\xe7\xe3o de informa\xe7\xf5es dos s\xf3cios"),n.a.createElement("p",{style:{fontSize:"12px",color:"#555"}}," Clique no l\xe1pis \xe0 direita do s\xf3cio para editar e clique novamente para salvar."),n.a.createElement("p",{style:{fontSize:"12px",color:"#555",marginTop:0}}," Para alterar a participa\xe7\xe3o societ\xe1ria, nome e CPF, v\xe1 para EMPRESAS \u2013 ALTERA\xc7\xc3O CADASTRAL")))),h&&0===m.length&&n.a.createElement("section",null,n.a.createElement("p",null,"Nenhum s\xf3cio cadastrado para ",h.razaoSocial)),(null===t||void 0===t?void 0:t.length)>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement("section",{className:"flexColumn center paper"},n.a.createElement("p",null," S\xf3cios cadastrados"),t.map((function(e,t){return n.a.createElement("div",{key:t},E.map((function(t,a){return n.a.createElement(r.Fragment,{key:a+1e3},n.a.createElement(rt.a,{value:e[t.field]||"",name:t.field,label:t.label,className:b,onChange:u,error:e.edit?fe(e[t.field],t):null,helperText:e.edit?pe(e[t.field],t):null,type:null===t||void 0===t?void 0:t.type,disabled:!!("share"===t.field&&y||t.disabled)||!e.edit,InputLabelProps:{shrink:!0,style:{fontWeight:600,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",color:"#888"}},inputProps:{style:{fontSize:"13px",color:!0===e.edit?"#000":"new"===e.status?"green":"modified"===e.status?"#FF2500":"deleted"===e.status?"red":"#888",textDecoration:"deleted"!==e.status||e.edit?"":"line-through"}}}))})),n.a.createElement(st.a,{component:"span",className:g,title:"editar",onClick:function(){return s(t)}},n.a.createElement(an.a,null)),!y&&n.a.createElement(st.a,{className:g,color:"deleted"===e.status?"primary":"secondary",title:"deleted"===e.status?"Desfazer exclus\xe3o":"Remover",onClick:function(){return d(t)}},"deleted"===e.status?n.a.createElement("i",{className:"material-icons"},"undo"):n.a.createElement(Ha.a,null)))})))))},Io=Object($.a)((function(e){return{paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 5px 0",height:"auto"}}}));function Do(e){var t,a=e.data,o=e.empresasForm,i=e.sociosForm,c=e.filesForm,l=e.files,s=a.socios,u=Io().paper,d=[],f={},p=[];return o.forEach((function(e){a.hasOwnProperty([e.field])&&(Object.assign(f,Object(m.a)({},e.field,a[e.field])),p.push(e))})),d.push(f),t=[{subtitle:"Detalhes da empresa",form:p,data:d},{subtitle:"Informa\xe7\xf5es sobre os s\xf3cios",form:i,data:s}],n.a.createElement(n.a.Fragment,null,n.a.createElement(Vt.a,{className:u},n.a.createElement("div",{className:"divTable"},t.map((function(e,t){var a=e.subtitle,o=e.form,i=e.data;return n.a.createElement(r.Fragment,{key:t},n.a.createElement("table",{style:1===t?{tableLayout:"fixed"}:{}},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"tHeader",colSpan:o.length},a)),n.a.createElement("tr",null,o.map((function(e,t){return n.a.createElement("th",{key:t},e.label)})))),n.a.createElement("tbody",null,0===t&&n.a.createElement("tr",null,i.map((function(e,t){return Object.values(e).map((function(e,t){return n.a.createElement("td",{className:"review",key:t},e)}))}))),0!==t&&i.map((function(e,t){return n.a.createElement("tr",{key:t},Object.values(e).map((function(e,t){return n.a.createElement("td",{className:"review",key:t},e)})))})))))}))),n.a.createElement("h3",{style:{margin:"30px 0 0 25px"}}," ",n.a.createElement(Bt.a,{style:{verticalAlign:"middle",padding:"0 0 0 8px"}})," Documentos "),l&&n.a.createElement(qt,{form:c,files:l})))}function Ao(e,t){return e.match("cnpj")?function(e){var t=function(e){return e.keyCode};document.addEventListener("keypress",t);var a,r=e.toString();return a=(r=(r=(r=r.replace(".","")).replace("/","")).replace("-","")).length+1,14!==t&&(3===a&&(e=r.substr(0,2)+"."),6===a&&(e=r.substr(0,2)+"."+r.substr(2,5)+"."),10===a&&(e=r.substr(0,2)+"."+r.substr(2,3)+"."+r.substr(6,3)+"/"),15===a&&(e=r.substr(0,2)+"."+r.substr(2,3)+"."+r.substr(6,3)+"/"+r.substr(9,4)+"-"+r.substr(13,2))),e}(t):e.match("cpf")?function(e){if(e)return e=e.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")}(t):e.match("tel")?function(e){if(e)return 13===(e=e.replace(/(?!\d)./g,"").replace(/(\d{2})/,"($1) ")).length&&(e=e.replace(/(\d{4})(\d)/,"$1-$2")),14===e.length&&(e=e.replace(/(\d{5})(\d)/,"$1-$2")),e}(t):e.match("share")?function(e){if(e)return e.length>=5&&(e=e.slice(0,5)),e}(t):t}function _o(){_o=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var To=we(["empresas"],function(e){Object(k.a)(a,e);var t=Object(C.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).state={activeStep:0,stepTitles:["Preencha os dados da empresa","Informa\xe7\xf5es sobre os s\xf3cios","Revis\xe3o"],steps:["Dados da Empresa","S\xf3cios","Revis\xe3o"],razaoSocial:"",toastMsg:"Empresa cadastrada!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,addedSocios:[0],totalShare:0,socios:[],showFiles:!1},e.setActiveStep=function(){var t=Object(S.a)(_o().mark((function t(a){var r;return _o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.state.activeStep,"next"===a&&e.setState({activeStep:r+1}),"back"===a&&e.setState({activeStep:r-1}),"reset"===a&&e.setState({activeStep:0});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleInput=function(t){var a=t.target,r=a.name,n=Ao(r,a.value);e.setState(Object(m.a)({},r,n))},e.addSocio=Object(S.a)(_o().mark((function t(){var a,r,n,o;return _o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state.socios,r={},n=0,o=0,vr.forEach((function(t){""!==e.state[t.field]&&void 0!==e.state[t.field]||(n+=1)})),100!==n){t.next=7;break}return e.setState({alertType:"fieldsMissing",openAlertDialog:!0}),t.abrupt("return",null);case 7:if(vr.forEach((function(t){Object.assign(r,Object(m.a)({},t.field,e.state[t.field]))})),a.push(r),a.forEach((function(e){o+=Number(e.share)})),!(o>100)){t.next=15;break}a.pop(),e.setState({alertType:"overShared",openAlertDialog:!0}),t.next=19;break;case 15:return t.next=17,e.setState({socios:a,totalShare:o});case 17:vr.forEach((function(t){e.setState(Object(m.a)({},t.field,""))})),document.getElementsByName("nomeSocio")[0].focus();case 19:case"end":return t.stop()}}),t)}))),e.enableEdit=function(t){var a=e.state.socios;!0===a[t].edit?a[t].edit=!1:(a.forEach((function(e){return e.edit=!1})),a[t].edit=!0),e.setState({socios:a})},e.handleEdit=function(t){var a=t.target.name,r=e.state.socios,n=t.target.value;"share"===a&&(n=n.replace(",","."));var o=r.filter((function(e){return!0===e.edit}))[0],i=r.indexOf(o);o[a]=n;var c=r;c[i]=o,e.setState({filteredSocios:c})},e.removeSocio=function(t){var a=e.state.socios;a.splice(t,1),e.setState({socios:a})},e.getId=function(){var t=Object(S.a)(_o().mark((function t(a,r,n,o,i,c,l){var s,u,d,f,p,h;return _o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=n.filter((function(e){return e[i].toLowerCase().match(r.toLowerCase())})),""===r&&e.setState((s={},Object(m.a)(s,a,""),Object(m.a)(s,o,""),s)),!u[0]){t.next=10;break}if(d=u[0][i],f=u[0][c],""===r){t.next=8;break}return t.next=8,e.setState((p={},Object(m.a)(p,a,d),Object(m.a)(p,o,f),p));case 8:t.next=14;break;case 10:return t.next=12,e.setState((h={},Object(m.a)(h,a,""),Object(m.a)(h,o,""),h));case 12:alert(l+" n\xe3o cadastrado"),document.getElementsByName(a)[0].focus();case 14:case"end":return t.stop()}}),t)})));return function(e,a,r,n,o,i,c){return t.apply(this,arguments)}}(),e.handleBlur=function(){var t=Object(S.a)(_o().mark((function t(a){var r,n,o,i,c,l;return _o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.target.name,n=a.target.value,(o=de())?e.setState({errors:o}):e.setState({errors:void 0}),t.t0=r,t.next="cnpj"===t.t0?7:"share"===t.t0?13:"numero"===t.t0?16:21;break;case 7:return t.next=9,D.a.get("/api/checkIfExists?table=empresas&column=cnpj&value=".concat(n));case 9:return i=t.sent,(null===i||void 0===i?void 0:i.data)&&("Empresa j\xe1 cadastrada.","O CNPJ informado corresponde a uma empresa j\xe1 est\xe1 cadastrada no sistema. Para alterar os dados da empresa, v\xe1 para Empresas -> Altera\xe7\xe3o de dados.",e.setState({cnpj:"",customTitle:"Empresa j\xe1 cadastrada.",customMsg:"O CNPJ informado corresponde a uma empresa j\xe1 est\xe1 cadastrada no sistema. Para alterar os dados da empresa, v\xe1 para Empresas -> Altera\xe7\xe3o de dados.",openAlertDialog:!0})),t.abrupt("break",22);case 13:return(n=n.replace(",","."))>100?e.setState({alertType:"overShared",openAlertDialog:!0}):(l=Number(e.state.totalShare)+Number(n),e.setState((c={},Object(m.a)(c,r,n),Object(m.a)(c,"totalShare",l),c))),t.abrupt("break",22);case 16:if(!n||n.match(/^\d+$/)){t.next=20;break}return t.next=19,e.setState({numero:""});case 19:e.setState({alertType:"numberNotValid",openAlertDialog:!0});case 20:case 21:return t.abrupt("break",22);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleSubmit=Object(S.a)(_o().mark((function t(){var a,r,n,o,i,c,l;return _o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,r=a.socios,n=a.form,o={},hr.forEach((function(t){e.state.hasOwnProperty([t.field])&&Object.assign(o,Object(m.a)({},t.field,e.state[t.field]))})),r&&r[0]||(console.log("Warning: No socios were registered!!!"),r=void 0),o.situacao="Ativo",o=P.a.decamelizeKeys(o),r=P.a.decamelizeKeys(r),t.next=8,D.a.post("/api/empresas",{empresa:o,socios:r});case 8:l=t.sent,i=l.data.codigo_empresa,c=l.data.socio_ids,e.submitFile(i,c,n),e.toast(),e.resetState();case 14:case"end":return t.stop()}}),t)}))),e.handleFiles=function(){var t=Object(S.a)(_o().mark((function t(a,r){var n;return _o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a||!a[0]){t.next=5;break}return t.next=3,e.setState(Object(m.a)({},r,a[0]));case 3:n=Re(a,e.state,Lo),e.setState(Object(v.a)(Object(v.a)({},n),{},{fileToRemove:null}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.submitFile=function(){var t=Object(S.a)(_o().mark((function t(a,r){var n,o,i,c,l,s;return _o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.form,o={empresaId:a,socios:r,tempFile:!1},!(n instanceof FormData)){t.next=24;break}i=new FormData,c=Object(A.a)(n),t.prev=4,c.s();case 6:if((l=c.n()).done){t.next=16;break}return s=l.value,o.fieldName=s[0],i.append("metadata",JSON.stringify(o)),i.set(s[0],s[1]),t.next=13,D.a.post("/api/empresaUpload",i).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 13:i=new FormData;case 14:t.next=6;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(4),c.e(t.t0);case 21:return t.prev=21,c.f(),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[4,18,21,24]])})));return function(e,a){return t.apply(this,arguments)}}(),e.removeFile=function(t){var a=e.state.form,r=Be(t,a);e.setState(Object(v.a)(Object(v.a)({},e.state),r))},e.resetState=function(){var t={},a={},r={};hr.forEach((function(a){Object.keys(a).forEach((function(r){"field"===r&&e.state[a[r]]&&Object.assign(t,Object(m.a)({},a[r],void 0))}))})),vr.forEach((function(t){Object.keys(t).forEach((function(r){"field"===r&&e.state[t[r]]&&Object.assign(a,Object(m.a)({},t[r],void 0))}))})),Lo.forEach((function(e){var t=e.name;Object.assign(r,Object(m.a)({},t,void 0))})),e.setState(Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)({},t),a),r),{},{activeStep:0,razaoSocial:"",files:[],fileNames:[],addedSocios:[0],totalShare:0,socios:[],form:void 0,showFiles:!1}))},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.showFiles=function(){return e.setState({showFiles:!0})},e.closeFiles=function(){return e.setState({showFiles:!e.state.showFiles})},e.escFunction=function(t){27===t.keyCode&&e.state.addEquipa&&e.handleEquipa()},e}return Object(L.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1),document.querySelector("input[name='razaoSocial']").style.width="300px"}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,t=e.socios,a=e.activeStep,o=e.confirmToast,i=e.toastMsg,c=e.steps,l=e.openAlertDialog,s=e.alertType,u=e.form,d=e.customMsg,f=e.customTitle;return n.a.createElement(r.Fragment,null,n.a.createElement(Kt,{links:["Empresas","/empresas"],text:"Cadastro de empresas"}),n.a.createElement(ta,{activeStep:a,steps:c,setActiveStep:this.setActiveStep}),0===a?n.a.createElement(ko,{data:this.state,handleInput:this.handleInput,handleBlur:this.handleBlur,handleFiles:this.handleFiles,removeFile:this.removeFile}):1===a?n.a.createElement(Po,{data:this.state,socios:t,handleInput:this.handleInput,handleBlur:this.handleBlur,addSocio:this.addSocio,removeSocio:this.removeSocio,handleFiles:this.handleFiles,enableEdit:this.enableEdit,handleEdit:this.handleEdit}):2===a&&n.a.createElement(Do,{data:this.state,files:u,filesForm:Lo,empresasForm:hr,sociosForm:vr}),n.a.createElement(Xt,{activeStep:a,lastStep:c.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep,buttonLabel:"Cadastrar empresa"}),n.a.createElement(ee,{open:o,close:this.toast,msg:i}),l&&n.a.createElement(sa,{open:l,close:this.closeAlert,alertType:s,customMessage:d,customTitle:f}))}}]),a}(r.Component)),Fo=(a(676),[{title:"Cadastrar",description:"Cadastrar uma nova empresa no sistema.",imageUrl:"/images/addCompany21.png",link:"/empresas/cadastro"},{title:"Altera\xe7\xe3o Cadastral",description:"Altera\xe7\xe3o de dados da empresa ou contrato social",link:"/altContrato",imageUrl:"/images/pen2.png"},{title:"S\xf3cios",description:"Visualizar ou editar dados dos s\xf3cios",link:"/empresas/socios",imageUrl:"/images/socios3.png"},{title:"Procura\xe7\xf5es",description:"Cadastrar procura\xe7\xf5es e procuradores",link:"/empresas/procuradores",imageUrl:"/images/procuradores31.png"}]),zo=we([],(function(e){var t=e.user,a=null===t||void 0===t?void 0:t.role;return n.a.createElement(n.a.Fragment,null,n.a.createElement("section",{className:"jumbo"},n.a.createElement("div",null,n.a.createElement("h1",{className:"jumbo__title"},"Empresas"),n.a.createElement("p",{className:"jumbo__description"},"Selecione uma das op\xe7\xf5es abaixo."))),n.a.createElement("main",{className:"cardContainer",style:{width:"empresa"!==a?"100%":"90%",marginLeft:"empresa"!==a?"0":"5%"}},Fo.map((function(e,t){var r=e.link,o=e.title,i=e.description,c=e.imageUrl;return"empresa"===a&&"/empresas/cadastro"===r?null:n.a.createElement(x.b,{to:r,style:{textDecoration:"none"},key:t},n.a.createElement("div",{className:"cardE"},n.a.createElement("div",{className:"cardE__text"},n.a.createElement("h3",null,o),n.a.createElement("p",null,i)),n.a.createElement("figure",{className:"cardE__image"},n.a.createElement("img",{src:c,alt:""}))))}))))})),Mo=a(503),qo=a.n(Mo),Ro=[{field:"nomeProcurador",label:"Nome do Procurador",maxLength:90,width:220},Object(v.a)(Object(v.a)({},cr),{},{field:"cpfProcurador",width:220}),Object(v.a)(Object(v.a)({},lr),{},{field:"telProcurador",width:220}),Object(v.a)(Object(v.a)({},sr),{},{field:"emailProcurador",width:220})],Vo=a(456),Go=a(434),Bo=a(429),Uo=a(452),Yo=a(435),Ho=Object(Ka.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000",fontWeight:600,fontSize:14},body:{fontSize:14}}}))(Bo.a),Jo=Object(Ka.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000"},body:{fontSize:13}}}))(Bo.a),Wo=Object(Ka.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}}))(Yo.a),Ko=Object($.a)((function(e){return{root:{flexGrow:"1",padding:"1%",textAlign:"center"},title:{marginTop:"2%",fontColor:"#000",fontSize:"0.9rem",backgroundColor:"#B2DCEA",textAlign:"center"},input:{textAlign:"center"},paper:{color:e.palette.text.secondary,margin:e.spacing(2),width:"100%",padding:"2% 0 1% 0",height:"auto"},table:{marginBottom:e.spacing(2),overflowX:"auto"}}}));function $o(e){var t=e.procuracao,a=e.procuradores,r=Ko(),o=r.title,i=r.table,c=[];return t.procuradores.forEach((function(e){var t=a.find((function(t){return t.procuradorId===e}));c.push(t)})),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{width:"100%",align:"left"}},n.a.createElement(Vn.a,{className:o}," Procuradores cadastrados ")),n.a.createElement(Vo.a,{className:i},n.a.createElement(Uo.a,null,n.a.createElement(Wo,null,Ro.map((function(e,t){return n.a.createElement(Ho,{key:t},e.label)})))),c.map((function(e,t){return e?n.a.createElement(Go.a,{key:t},n.a.createElement(Yo.a,null,Ro.map((function(t,a){return n.a.createElement(Jo,{key:a},e[t.field])})))):null}))))}var Xo={textAlign:"center",alignItems:"flex-start",justify:"space-between",lineHeight:"40px",border:"1px #ccc solid",padding:"0 1%",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px",width:180},Zo={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},Qo={verticalAlign:"middle",padding:"0 0% 0 2%"},ei=Object($.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},addButton:{padding:"5px 10px 5px 8px",height:"40px",margin:"5px",float:"right",fontSize:"0.8rem"}}})),ti=function(e){var t=e.redux,a=e.data,o=e.handleInput,i=e.addProc,c=e.removeProc,l=e.handleFiles,s=e.getFile,u=e.plusOne,d=e.minusOne,f=e.checkExpires,p=e.setShowPendencias,m=e.removeFile,h=a.dropDisplay,g=a.selectedEmpresa,b=a.procsToAdd,y=a.selectedDocs,E=a.procuracao,x=a.expires,w=a.demand,O=a.showPendencias,S=a.info,j=a.demandFiles,L=a.fileToRemove,k=t.empresas,C=t.procuradores,N=ei(),P=N.addButton,I=N.textField,D=function(e,t){var r=a[e.field+t];return(!e.errorHandler||!e.errorHandler(r))&&(!(!r||!e.errorHandler||e.errorHandler(r))||(e.pattern&&r?null===r.match(e.pattern):r>e.max||r<e.min||(null===r||void 0===r?void 0:r.length)<(null===e||void 0===e?void 0:e.minLength)))},A=function(e,t){var r=a[e.field+t];return e.errorHandler&&e.errorHandler(r)?"\u2713":r&&e.errorHandler&&!e.errorHandler(r)?"\u2718":r>e.max||r<e.min?"Valor inv\xe1lido":r&&null===r.match(e.pattern)?"\u2718":e.pattern&&r&&null!==r.match(e.pattern)?"\u2713":(null===r||void 0===r?void 0:r.length)<(null===e||void 0===e?void 0:e.minLength)?"\u2718":(null===r||void 0===r?void 0:r.length)>=(null===e||void 0===e?void 0:e.minLength)?"\u2713":void 0};return n.a.createElement("div",{className:"flex"},n.a.createElement("header",{className:"flex center",style:{marginBottom:"10px",width:"100%"}},n.a.createElement(tt,{data:a,empresas:k,handleInput:o})),g&&n.a.createElement("section",{className:"paper flexColumn",style:{position:"relative",width:"100%"}},n.a.createElement("div",{className:"flexColumn",style:{alignItems:"center"}},n.a.createElement("h6",null," Cadastrar nova procura\xe7\xe3o "),n.a.createElement("h4",{style:{fontWeight:400,fontSize:"0.9em"}},' Se a procura\xe7\xe3o abranger mais de um procurador, clique em "+" para adicionar e anexe apenas 1 vez.')),b.map((function(e,t){return n.a.createElement("div",{className:"flex",key:t},Ro.map((function(e,i){return n.a.createElement(r.Fragment,{key:i},n.a.createElement(rt.a,{name:e.field+t,label:e.label,margin:"normal",className:I,onChange:function(e){return o(e)},type:e.type||"",error:D(e,t),helperText:A(e,t),select:e.select||!1,value:a[e.field+t]||"",disabled:e.disabled||!1,InputLabelProps:{className:I,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888"}},inputProps:{style:{background:e.disabled&&a.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#000",width:e.width||150,height:"7px"},value:"".concat(a[e.field+t]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1}),t===b.length-1&&3===i&&n.a.createElement(n.a.Fragment,null,n.a.createElement(nn.a,{onClick:function(){return u()},style:{verticalAlign:"middle",position:"absolute",bottom:"112px",right:t>0?"40px":"68px",color:"#009688",fontSize:30,cursor:"pointer",zIndex:1}}),t>0&&n.a.createElement(qo.a,{onClick:function(){return d()},style:{verticalAlign:"middle",position:"absolute",bottom:"112px",right:"70px",color:"red",fontSize:30,cursor:"pointer",zIndex:1}})))})))})),n.a.createElement("div",{className:"flex",style:{alignItems:"center",padding:"0 20px",width:"100%",margin:"12px 0 6px 0"}},n.a.createElement("div",{style:{width:"50%"}},w?n.a.createElement("div",{className:"flex"},n.a.createElement(qt,{demand:w,collection:"empresaDocs",demandFiles:j,form:Da,style:{minWidth:"220px"}})):n.a.createElement(St,{name:"procuracao",formData:E,dropDisplay:h,handleFiles:l,demandFiles:j,removeFile:m,fileToRemove:L})),n.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"50%",paddingTop:"8px"}},n.a.createElement("div",{style:{marginTop:"12px"}},n.a.createElement(lt.a,{control:n.a.createElement(ct.a,{checked:!0===x,onChange:function(){return f()},value:x}),label:n.a.createElement("span",{style:{color:"#2979ff",fontSize:"0.8em",float:"right"}},"Procura\xe7\xe3o por prazo determinado?")})),n.a.createElement(rt.a,{name:"vencimento",label:"Vencimento",margin:"normal",className:I,onChange:function(e){return o(e)},type:"date",helper:"se indeterminado, deixar em branco",value:a.vencimento||"",disabled:!1===x,InputLabelProps:{className:I,shrink:!0,style:{fontSize:"0.8rem",color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:"#fafafa",fontSize:"0.8rem",textAlign:"center",color:"#000",height:"9px"}},variant:"filled"})))),n.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%"}},g&&!w?n.a.createElement(st.a,{className:P,size:"small",color:"secondary",variant:"contained",onClick:function(){return i()}},n.a.createElement(dt.a,null),"Cadastrar procura\xe7\xe3o"):g&&w?n.a.createElement(Xt,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:w,setShowPendencias:p,showPendencias:O,info:S,handleSubmit:i,handleInput:o}):null),n.a.createElement("section",{className:"flexColumn",style:{width:"100%",paddingRight:"0"}},!g||y[0]||w?g&&y[0]&&n.a.createElement("h2",{style:{margin:"25px 0 0 15px"}},"Procura\xe7\xf5es cadastradas"):n.a.createElement("div",{className:"flex paper"},"Nenhum procurador cadastrado para ",g.razaoSocial),y.length>0&&y.map((function(e,t){return n.a.createElement("div",{key:.01*t,className:"flexColumn paper",style:{padding:"10px 15px 20px 15px"}},n.a.createElement("h5",null,"Procura\xe7\xe3o ",e.vencimento?"com vencimento em "+((a=e.vencimento)?ue()(a).format("DD-MM-YYYY"):""):"por prazo indeterminado"),n.a.createElement($o,{procuradores:C,procuracao:e}),n.a.createElement("div",{className:"flex center",style:{position:"relative"}},n.a.createElement("span",{style:Xo},n.a.createElement(At.a,{style:Qo}),n.a.createElement("span",{style:{verticalAlign:"middle"}}," "," Baixar arquivo"),n.a.createElement(It.a,{style:Zo,onClick:function(){return s(e.procuracaoId)}})),n.a.createElement("span",{style:Object(v.a)(Object(v.a)({},Xo),{},{width:90,backgroundColor:"white",border:0,position:"absolute",right:0})},n.a.createElement(cn.a,{color:"secondary",style:Zo,onClick:function(){return c(e)}}),"Apagar")));var a}))))},ai=["latestDoc"];function ri(){ri=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var ni=we(["empresas","procuradores","procuracoes","getFiles/empresaDocs"],function(e){Object(k.a)(a,e);var t=Object(C.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).state={empresas:[],razaoSocial:"",toastMsg:"Procura\xe7\xe3o cadastrada!",confirmToast:!1,fileNames:[],openDialog:!1,expires:!1,filteredProc:[],dropDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",procuradores:[],procsToAdd:[1],procuracoesArray:[],selectedDocs:[],showPendencias:!1},e.handleInput=function(){var t=Object(S.a)(ri().mark((function t(a){var r,n,o,i,c,l,s,u,d,f,p;return ri().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.target.name,n=e.props.redux.empresas,o=Object(h.a)(e.props.redux.procuradores),i=JSON.parse(JSON.stringify(e.props.redux.procuracoes)),c=a.target.value,l=Ao(r,c),e.setState(Object(m.a)({},r,l)),"razaoSocial"!==r||!Array.isArray(o)){t.next=14;break}if(!(s=n.find((function(e){return e.razaoSocial===c})))){t.next=13;break}return u=i.filter((function(e){return e.codigoEmpresa===s.codigoEmpresa})),t.next=10,e.setState({selectedEmpresa:s,selectedDocs:u,razaoSocial:s.razaoSocial});case 10:c!==s.razaoSocial&&e.setState({selectedEmpresa:void 0,selectedDocs:[]}),t.next=14;break;case 13:e.setState({selectedEmpresa:void 0,selectedDocs:[]});case 14:r.match("cpfProcurador")&&(d=o.find((function(e){return e.cpfProcurador===c})))&&(f=r.charAt(r.length-1),Object.keys(e.state).forEach((function(t){t!==r&&e.state[t]===c&&(alert("Este CPF j\xe1 foi informado."),e.setState(Object(m.a)({},r,"")),p=!0)})),p||Ro.forEach((function(t){var a=t.field,r=a+f;e.setState(Object(m.a)({},r,d[a]))})));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addProc=function(){var t=Object(S.a)(ri().mark((function t(a){var r,n,o,i,c,l,s,u,d,f,p,v,g,b,y,E,x;return ri().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.state,n=r.selectedEmpresa,o=r.demand,i=r.procuracao,c=r.vencimento,l=r.expires,s=r.info,u=n.codigoEmpresa,d=Object(h.a)(e.state.procsToAdd),f=[],p={},d.forEach((function(t,a){Ro.forEach((function(t){Object.assign(p,Object(m.a)({},t.field,e.state[t.field+a]))}));var r=0;Object.values(p).forEach((function(e){e&&(r+=1)})),r>0&&f.push(p),r=0,p={},Ro.forEach((function(t){e.setState(Object(m.a)({},t.field+a,""))}))})),v=[],g=[],b=ri().mark((function e(){var t,a,r;return ri().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E[y],e.next=3,D.a.get("/api/procuradores?cpf_procurador=".concat(t.cpfProcurador));case 3:a=e.sent,(null===(r=P.a.camelizeKeys(null===a||void 0===a?void 0:a.data[0]))||void 0===r?void 0:r.procuradorId)?(t.empresas=r.empresas,(0===t.empresas[0]&&1===t.empresas.length||!t.empresas)&&(t.empresas=[u]),t.empresas&&t.empresas[0]&&!t.empresas.includes(u)&&t.empresas.push(u),Object.keys(t).forEach((function(e){t[e]===r[e]&&"empresas"!==e&&"cpfProcurador"!==e&&delete t[e]})),t.procuradorId=r.procuradorId,g.push(t)):v.push(t);case 6:case"end":return e.stop()}}),e)})),y=0,E=f;case 6:if(!(y<E.length)){t.next=11;break}return t.delegateYield(b(),"t0",8);case 8:y++,t.next=6;break;case 11:void 0===a&&(x={status:"Aguardando aprova\xe7\xe3o",empresaId:u,history:{files:i,newMembers:v,oldMembers:g,vencimento:c,expires:l},metadata:{fieldName:"procuracao",empresaId:u}},Object.entries(x).forEach((function(e){var t=Object(Qe.a)(e,2),a=t[0];t[1]||delete x[a]})),x.approved=a,x.historyLength=0,Xe(x).then((function(e){return console.log(e)})),e.setState({toastMsg:"Solicita\xe7\xe3o de cadastro enviada",confirmToast:!0})),!1===a&&(Xe({id:o.id,empresaId:u,history:{info:s},declined:!0}).then((function(e){return console.log(e)})),e.setState({toastMsg:"Solicita\xe7\xe3o indeferida!",confirmToast:!0}),setTimeout((function(){e.props.history.push("/solicitacoes")}),1500)),!0===a&&(v=P.a.decamelizeKeys(v),g=P.a.decamelizeKeys(g),e.approveProc(v,g));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.approveProc=function(){var t=Object(S.a)(ri().mark((function t(a,r){var n,o,i,c,l,s,u,d,f,p,m;return ri().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,o=n.selectedEmpresa,i=n.demandFiles,c=n.vencimento,l=n.demand,s=o.codigoEmpresa,u=r.map((function(e){return e.procurador_id})),!(a.length>0)){t.next=6;break}return a.forEach((function(e){return e.empresas=[s]})),a=P.a.decamelizeKeys(a),t.next=6,D.a.post("/api/procuradores",{codigoEmpresa:s,procuradores:a}).then((function(e){e.data.forEach((function(e){return u.push(e.procurador_id)}))}));case 6:return d={procuradores:r,codigoEmpresa:s,updateUserPermission:!0},r&&r[0]&&(d.keys.push("empresas"),r.forEach((function(e){var t=e.empresas;t&&t[0]&&(t.includes(s)||e.empresas.push(s),e.empresas=t.toString())})),D.a.put("/api/procuradores",d).then((function(e){return console.log(e)}))),f={codigo_empresa:s,vencimento:c,status:"vigente",procuradores:u},Object.entries(f).forEach((function(e){var t=Object(Qe.a)(e,2),a=t[0],r=t[1];r&&""!==r||delete f[a]})),t.next=12,D.a.post("/api/procuracoes",f);case 12:p=t.sent,f.procuracaoId=p,m={id:l.id,demandFiles:i,history:{},approved:!0},i&&(m.metadata={fieldName:"procuracao",empresaId:o.codigoEmpresa,procuracaoId:p,procuradores:u}),Xe(m).then((function(e){return console.log(e)})),e.toast(),l&&setTimeout((function(){e.props.history.push("/solicitacoes")}),1500),e.resetState();case 20:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.removeProc=function(){var t=Object(S.a)(ri().mark((function t(a){var r,n,o,i,c,l,s,u,d,f;return ri().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.procuracaoId,n=a.procuradores,o=a.codigoEmpresa,i=e.props.redux.procuradores,c=e.props.redux.procuracoes,l=e.props.redux.empresaDocs.find((function(e){return Number(e.metadata.procuracaoId)===r})),!n[0]){t.next=12;break}if(s=c.filter((function(e){return e.codigoEmpresa===o&&e.procuracaoId!==r})),u=new Set,s.forEach((function(e){return e.procuradores.forEach((function(e){return u.add(e)}))})),(d=i.filter((function(e){return n.includes(e.procuradorId)&&!u.has(e.procuradorId)}))).forEach((function(e){var t=e.empresas||[];t=t.filter((function(e){return e!==o})),e.empresas=t,0===t.length&&(e.empresas=[0])})),!d[0]){t.next=12;break}return d=P.a.decamelizeKeys(d),f={codigoEmpresa:o,procuradores:d,updateUserPermission:!1},D.a.put("/api/procuradores",f).then((function(e){return console.log(e)})),t.next=12,D.a.patch("/api/removeEmpresa",{cpfsToRemove:d,codigoEmpresa:o}).then((function(e){return console.log(e)}));case 12:return t.next=14,D.a.delete("/api/procuracoes?id=".concat(r)).then((function(e){return console.log(e.data)}));case 14:l&&l.hasOwnProperty("id")&&D.a.delete("/api/deleteFile?collection=empresaDocs&id=".concat(l.id)).then((function(e){var t=e.data;return console.log(t)}));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleFiles=function(t){if(!qe(t)){var a=new FormData;a.append("procuracao",t[0]),e.setState({procuracao:a,fileToRemove:null})}},e.removeFile=function(){var t=Object(S.a)(ri().mark((function t(a){var r,n;return ri().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.state.procuracao,n=Be(a,r),e.setState(Object(v.a)(Object(v.a)({},e.state),n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getFile=function(t){var a=e.props.redux.empresaDocs.find((function(e){return Number(e.metadata.procuracaoId)===t}));if(a){var r=a.id,n=a.filename;_t(r,n,"empresaDocs")}else e.setState({alertType:"filesNotFound",openAlertDialog:!0})},e.plusOne=function(){var t=Object(h.a)(e.state.procsToAdd);t.push(1),e.setState({procsToAdd:t})},e.minusOne=function(){var t=Object(h.a)(e.state.procsToAdd);t.pop(),e.setState({procsToAdd:t})},e.checkExpires=function(){!0===e.state.expires&&e.setState({vencimento:""}),e.setState({expires:!e.state.expires})},e.resetState=function(){var t=e.state.procsToAdd,a=Ro.map((function(e){return e.field})),r={};t.forEach((function(t,n){a.forEach((function(t){e.state.hasOwnProperty(t+n)&&(r[t+n]=void 0)}))})),e.removeFile("procuracao"),e.setState(Object(v.a)(Object(v.a)({},r),{},{dropDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",procsToAdd:[1],vencimento:void 0,procuracao:void 0,expires:!1}))},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.escFunction=function(t){27===t.keyCode&&e.state.openDialog&&e.toggleDialog()},e}return Object(L.a)(a,[{key:"componentDidMount",value:function(){var e=Object(S.a)(ri().mark((function e(){var t,a,r,n,o,i,c,l,s,u,d,f,p,h,g,b,y,E,x,w,S=this;return ri().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.props.redux,o=n.empresas,i=null===(t=this.props)||void 0===t||null===(a=t.location)||void 0===a||null===(r=a.state)||void 0===r?void 0:r.demand,c=JSON.parse(JSON.stringify(this.props.redux.procuracoes)),o&&1===o.length&&(l=o[0],s=c.filter((function(e){return e.codigoEmpresa===l.codigoEmpresa})),this.setState({selectedEmpresa:l,razaoSocial:null===l||void 0===l?void 0:l.razaoSocial,selectedDocs:s})),i&&(u=JSON.parse(JSON.stringify(n.procuradores)),d=za(i,n,u),f=d.latestDoc,p=Object(O.a)(d,ai),h=i.history,g=h[0],b=g.vencimento,y=g.expires,E=h[0].newMembers||[],x=h[0].oldMembers||[],console.log(d),w=[],x[0]&&x.forEach((function(e){u.forEach((function(t){Object.keys(t).forEach((function(a){(null===e||void 0===e?void 0:e.procuradorId)!==(null===t||void 0===t?void 0:t.procuradorId)||e[a]||(e[a]=t[a])}))}))})),(E[0]||x[0])&&E.concat(x).forEach((function(e,t){w.push(t),Ro.forEach((function(a){var r=a.field;S.setState(Object(m.a)({},r+t,e[r]))}))})),this.setState({vencimento:b,expires:y,procsToAdd:w}),this.setState(Object(v.a)(Object(v.a)({},p),{},{demandFiles:[f]}))),document.addEventListener("keydown",this.escFunction,!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var t=this.state.selectedEmpresa,a=this.props.redux.procuracoes;if(t){var r,n=(null===(r=this.state)||void 0===r?void 0:r.selectedEmpresa).codigoEmpresa,o=JSON.parse(JSON.stringify(a));if(JSON.stringify(e.redux.procuracoes)!==JSON.stringify(o)){var i=o.filter((function(e){return e.codigoEmpresa===n}));this.setState({selectedDocs:i})}}}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,t=e.openAlertDialog,a=e.alertType,r=e.demand;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Kt,{links:["Empresas","/empresas"],text:"Cadastro de procura\xe7\xf5es",demand:r}),n.a.createElement(ti,{data:this.state,redux:this.props.redux,handleInput:this.handleInput,removeProc:this.removeProc,handleFiles:this.handleFiles,removeFile:this.removeFile,addProc:this.addProc,handleSubmit:this.handleSubmit,plusOne:this.plusOne,minusOne:this.minusOne,getFile:this.getFile,checkExpires:this.checkExpires,setShowPendencias:this.setShowPendencias}),n.a.createElement(ee,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}),t&&n.a.createElement(sa,{open:t,close:this.closeAlert,alertType:a,customMessage:this.state.customMsg}))}}]),a}(r.Component));function oi(){oi=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var ii=we(["empresas","socios","getFiles/empresaDocs"],function(e){Object(k.a)(a,e);var t=Object(C.a)(a);function a(){var e;Object(j.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={razaoSocial:"",toastMsg:"Dados atualizados!",confirmToast:!1,openDialog:!1,dialogTitle:"",addedSocios:[0],filteredSocios:[]},e.handleInput=function(t){var a=e.props.redux,r=a.empresas,n=a.socios,o=t.target.name,i=t.target.value,c=Ao(o,i);if(e.setState(Object(m.a)({},o,c)),"razaoSocial"===o){var l=r.find((function(e){return e.razaoSocial===i}));if(l){var s=JSON.parse(JSON.stringify(n)).filter((function(e){return e.empresas&&e.empresas[0]&&e.empresas.some((function(e){return e.codigoEmpresa===l.codigoEmpresa}))}));e.setState({razaoSocial:l.razaoSocial,selectedEmpresa:l,filteredSocios:s}),i!==l.razaoSocial&&e.setState({selectedEmpresa:void 0})}else e.setState({selectedEmpresa:void 0,filteredSocios:[]})}},e.enableEdit=function(t){var a=e.state.filteredSocios,r=a[t];!0===r.edit?(e.handleSubmit(t),r.edit=!1,a[t]=r):(a.forEach((function(e){return e.edit=!1})),a[t].edit=!0),e.setState({filteredSocios:a})},e.handleEdit=function(t){var a=t.target.name,r=t.target.value;r=Ao(a,r);var n=e.state.filteredSocios.filter((function(e){return!0===e.edit}))[0],o=e.state.filteredSocios.indexOf(n);n[a]=r;var i=e.state.filteredSocios;i[o]=n,e.setState({filteredSocios:i})},e.handleSubmit=function(){var t=Object(S.a)(oi().mark((function t(a){var r,n,o,i,c,l,s,u;return oi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state,n=r.filteredSocios,o=r.selectedEmpresa,i=o.codigoEmpresa,"socios",c=["telSocio","emailSocio"],l=n[a],s={socioId:l.socioId},c.forEach((function(e){l[e]&&(s[e]=l[e])})),u=[P.a.decamelizeKeys(s)],t.next=6,D.a.put("/api/socios",{socios:u,table:"socios",keys:c,codigoEmpresa:i}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(t){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:t||e.state.toastMsg})},e}return Object(L.a)(a,[{key:"componentDidMount",value:function(){var e,t=this.props.redux,a=t.socios,r=t.empresas,n=JSON.parse(JSON.stringify(a));r&&1===r.length?this.setState({selectedEmpresa:r[0],razaoSocial:null===(e=r[0])||void 0===e?void 0:e.razaoSocial,filteredSocios:a,originalSocios:n}):this.setState({originalSocios:n})}},{key:"render",value:function(){var e=this.state,t=e.filteredSocios,a=e.openAlertDialog,r=e.alertType,o=e.confirmToast,i=e.toastMsg,c=this.props.redux.empresas;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Kt,{links:["Empresas","/empresas"],text:"Altera\xe7\xe3o de dados dos s\xf3cios"}),n.a.createElement(Po,{data:this.state,socios:t,empresas:c,handleInput:this.handleInput,enableEdit:this.enableEdit,handleEdit:this.handleEdit}),n.a.createElement(ee,{open:o,close:this.toast,msg:i}),a&&n.a.createElement(sa,{open:a,close:this.closeAlert,alertType:r}))}}]),a}(r.Component)),ci=a(195),li=a.n(ci),si={title:{text:"Ve\xedculos por ano de fabrica\xe7\xe3o",align:"center",marginTop:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:500,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}},legend:{show:!1},chart:{id:"veiculos_ano_fabricacao"},xaxis:{labels:{style:{fontSize:"9px",fontWeight:400,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}}},dataLabels:{enabled:!1},plotOptions:{bar:{horizontal:!1}}},ui={title:{text:"Percentual de ve\xedculos por ano de fabrica\xe7\xe3o",align:"center",marginTop:10,marginBottom:20,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"13px",fontWeight:500,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}},plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0,fontSize:"20px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif ",fontWeight:600,color:"#373d3f",offsetY:-10},value:{show:!0,fontSize:"15px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,color:"#373d3f",offsetY:16,formatter:function(e){return e}},total:{show:!0,showAlways:!0,label:"Total:",fontSize:"20px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:600,color:"#373d3f"}}}}},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},di=(a(678),function(e){var t=e.empresas,a=e.razaoSocial,r=e.selectedEmpresa,o=e.selectedVehicles,i=e.labels,c=e.values,l=e.tableLabels,s=e.tableData,u=e.mediaIdades,d=e.moda,f=e.handleInput,p=e.segurosVencidos,m=e.segurosVigentes,h=e.oldVehicles,g=e.veiculosNovos;return n.a.createElement("main",{className:"relatorios"},n.a.createElement(tt,{empresas:t,data:{razaoSocial:a},handleInput:f}),o&&0!==o.length?n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",{style:{width:"100%",textAlign:"center"}},r?r.razaoSocial:"Exibindo todos os ve\xedculos"," - M\xe9dia de idade da frota: ",u," anos. Moda do ano de fabrica\xe7\xe3o: ",d,"."),n.a.createElement(Vt.a,null,n.a.createElement("section",{className:"rowContainer"},n.a.createElement(li.a,{options:Object(v.a)(Object(v.a)({},si),{},{xaxis:Object(v.a)(Object(v.a)({},si.xaxis),{},{categories:i})}),series:[{name:"Ve\xedculos",data:c}],type:"bar",width:"600"}),n.a.createElement(li.a,{options:Object(v.a)(Object(v.a)({},ui),{},{labels:i,colors:["#ff7c43","#ffa600","#FF9800","#f95d6a","#f44336","#2E93fA","#3333ff","#66DA26","#669999","#E91E63","#d45087","#a05195","#665191","#2f4b7c","#003f5c"]}),series:c,type:"donut",width:"480"}))),n.a.createElement(Vt.a,null,n.a.createElement("section",null,n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"tHeader",style:{color:"#fff",backgroundColor:"rgb(84, 110, 122, 0.7)"},colSpan:l.length},"Ve\xedculos por ano - ",r?r.razaoSocial:"Exibindo todos os ve\xedculos","  ")),n.a.createElement("tr",null,l.map((function(e,t){return n.a.createElement("th",{key:e},e)})))),n.a.createElement("tbody",null,s.map((function(e,t){return n.a.createElement("tr",{key:t},e.map((function(e,t){return n.a.createElement("td",{className:"review relatorioTD",key:t},e)})))})))))),n.a.createElement("section",{className:"rowContainer"},n.a.createElement(li.a,{options:{title:Object(v.a)(Object(v.a)({},ui.title),{},{text:"Seguros vencidos: ".concat(p," / vigentes: ").concat(m)}),labels:["Seguros vencidos","Seguros vigentes"],colors:["#FF9800","#3333ff"]},series:[Number(p),Number(m)],type:"pie",width:"400"}),n.a.createElement(li.a,{options:{title:Object(v.a)(Object(v.a)({},ui.title),{},{text:"Idade superior a 15 anos: ".concat(h," / inferior 15 anos: ").concat(g)}),labels:["Ve\xedculos com mais de 15 anos","Ve\xedculos com menos de 15 anos"],colors:["#f44336","#2E93fA"]},series:[Number(h),Number(g)],type:"pie",width:"420",height:"220"}))):n.a.createElement("p",null,"Nenhum ve\xedculo cadastrado para ",null===r||void 0===r?void 0:r.razaoSocial))}),fi=function(e){var t=Object(h.a)(e);if(t.shift(),t[0])return t.reduce((function(e,t){return e+t}))},pi=function(e){return e.filter((function(e){return!e.vencimento||ue()(e.vencimento).isValid()&&ue()(e.vencimento).isBefore(ue()(),"day")&&e.veiculoId&&e})).length},mi=we(["veiculos","empresas"],(function(e){var t,a,o=e.redux,i=o.veiculos,c=o.empresas,l=Object(r.useState)(""),s=Object(Qe.a)(l,2),u=s[0],d=s[1],f=Object(r.useState)(void 0),p=Object(Qe.a)(f,2),m=p[0],v=p[1],g=Object(r.useState)(""),b=Object(Qe.a)(g,2),y=b[0],E=b[1],x=Object(r.useState)(""),w=Object(Qe.a)(x,2),O=w[0],S=w[1],j=Object(r.useState)(""),L=Object(Qe.a)(j,2),k=L[0],C=L[1];m&&""!==m?(t=m.codigoEmpresa,a=i.filter((function(e){return e.codigoEmpresa===t}))):a=i;var N=a.map((function(e){return e.anoCarroceria})).filter((function(e){return null!==e})).sort(),P=N.reduce((function(e,t){return e+t/N.length}),0);P=((new Date).getFullYear()-P).toFixed(2);var I={};N.forEach((function(e){void 0===I[e]&&(I[e]=0),I[e]+=1}));var D=Object.keys(I),A=Object(h.a)(D.sort((function(e,t){return e-t}))),_=Object.values(I),T={},F=[],z={};A.forEach((function(e){a.forEach((function(t){var a;t.anoCarroceria&&t.anoCarroceria.toString()===e&&(F.push({veiculoId:t.veiculoId,poltronas:t.poltronas}),T[e]?(a=T[e]).push.apply(a,Object(h.a)(F)):T[e]=F,F=[])})),z[e]=T[e],T={}}));var M=0,q=["Capacidade Total"],R=[],V=["Capacidade M\xe9dia"];Object.keys(z).forEach((function(e){z[e].forEach((function(e){M+=e.poltronas})),q.push(M),V.push((M/z[e].length).toFixed(2));var t=q.reduce((function(e,t){return e+t}),0);R.push(t),M=0})),q.push(fi(q));var G=["Ano"],B=["N\xba de Ve\xedculos"];G.push.apply(G,Object(h.a)(A).concat(["Total"])),B.push.apply(B,_),B.push(fi(B)),V.push(function(e){var t=e.map((function(e){return Number(e)}));if(t.shift(),t[0])return(t.reduce((function(e,t){return e+t}))/t.length).toFixed(2)}(V));var U=[B,V,q],Y=D.sort((function(e,t){return I[e]-I[t]}));Y=Y[Y.length-1];var H=(new Date).getFullYear();Object(r.useEffect)((function(){var e=(new Date).getFullYear(),t=pi(a),r=a.filter((function(t){return e-t.anoCarroceria>14&&null!==t.anoCarroceria})).length;E(t),S(a.length-t),C(r)}),[a]);var J,W,K,$=[];return u.length>2&&m?($=pi(a),W=a.filter((function(e){return H-e.anoCarroceria>14&&null!==e.anoCarroceria})).length,J=a.length-$,K=a.length-W):($=y,J=O,W=k,K=a.length-k),n.a.createElement(di,{empresas:c,razaoSocial:u,labels:A,values:_,tableLabels:G,tableData:U,selectedEmpresa:m,selectedVehicles:a,mediaIdades:P,moda:Y,handleInput:function(e){var t,a=e.target.value;d(a),a.length>2?(t=c.find((function(e){return e.razaoSocial===a})))&&v(t):v("")},segurosVencidos:$,segurosVigentes:J,oldVehicles:W,veiculosNovos:K})})),hi=a(504),vi=a.n(hi),gi=a(505),bi=a.n(gi);function yi(e){var t,a=e.tableData,r=e.staticFields,o=e.title,i=e.tableStyle,c=e.style,l=e.completed,s=e.showInfo,u=e.showFiles,d=e.setShowFiles,f=e.filesCollection,p=e.primaryKey,m=e.close,h=e.filesIds,g=e.razaoSocial;console.log(a[0].numeroDae||void 0);var b=[],y=[],E=[];if(a.forEach((function(e,t){r.forEach((function(a){b.includes(a.title)||b.push(a.title),"info"===a.field?E.push(Object(v.a)(Object(v.a)({},a),{},{index:t,files:null===e||void 0===e?void 0:e.files})):"files"===a.field?E.push(Object(v.a)(Object(v.a)({},a),{},{files:null===e||void 0===e?void 0:e.files})):a.action?E.push(Object(v.a)(Object(v.a)({},a),{},{id:null===e||void 0===e?void 0:e.id})):E.push(Object(v.a)(Object(v.a)({},a),{},{value:e[a.field]}))})),y.push(E),E=[]})),l){var x=b.indexOf("Analisar solicita\xe7\xe3o");b[x]="Conclu\xedda"}var w=(null===(t=y[0])||void 0===t?void 0:t.length)||"";return u?n.a.createElement(n.a.Fragment,null,n.a.createElement(bo,{filesCollection:f,close:m,typeId:p,filesIds:h,razaoSocial:g}),n.a.createElement("footer",null,n.a.createElement("div",{className:"voltarDiv",style:{padding:"0px",margin:"30px 0 0 0",position:"absolute",bottom:"1%",zIndex:"10"}},n.a.createElement(st.a,{variant:"outlined",color:"primary",onClick:function(){return d(!1)}},n.a.createElement(tr.a,{size:"tiny"}),n.a.createElement("span",{style:{padding:"2px 0 0 2px",marginLeft:"2px",fontSize:".85rem"}},"Voltar"))))):n.a.createElement("table",{style:i||void 0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"tHeader",style:c,colSpan:w},o)),n.a.createElement("tr",null,b.map((function(e,t){return n.a.createElement("th",{key:t,style:c},e)})))),n.a.createElement("tbody",null,y.map((function(e,t){return n.a.createElement("tr",{key:t},e.map((function(e,t){return n.a.createElement("td",{key:t,style:(null===e||void 0===e?void 0:e.style)?e.style:c,className:"link"===e.type&&e.laudoDocId?"link2":"review",title:a[0].numeroDae||void 0},"date"===e.type?(r=e.value,ue()(r,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?ue()(r,ue.a.ISO_8601,!0).format("DD/MM/YYYY, HH:mm[h]"):r):(null===e||void 0===e?void 0:e.action)?function(e,t,r){var o,i=!(null===(o=a[t])||void 0===o?void 0:o.info);switch(e){case"info":return n.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start"}},n.a.createElement("span",{className:"button",style:i?{cursor:"default"}:{},component:"span",title:i?"Nenhuma informa\xe7\xe3o adicional":"Ver informa\xe7\xf5es adicionais",onClick:function(){return s(t)}},n.a.createElement(vi.a,{color:i?"disabled":"primary"})),r?n.a.createElement("span",{className:"button",component:"span",title:"Ver arquivos",onClick:function(){d(r)}},n.a.createElement(Bt.a,null)):n.a.createElement("span",{style:{padding:"2px 10px 0 17px"}}," - "));case"completed":return n.a.createElement(bi.a,{style:{color:"green"}});default:return}}(e.action,null===e||void 0===e?void 0:e.index,null===e||void 0===e?void 0:e.files):e.value);var r})))}))))}var Ei=[{field:"action",title:"Movimenta\xe7\xe3o"},{field:"user",title:"Usu\xe1rio"},{field:"createdAt",title:"Registro no sistema",type:"date"},{field:"info",title:"Informa\xe7\xf5es adicionais",action:"info",style:{textAlign:"center"}}];function xi(e){var t=e.solicitacao,a=e.showInfo,r=e.historyLog,o=e.setHistoryLog,i=e.close,c=e.vehicleDocs,l=e.empresaDocs,s=e.showFiles,u=e.setShowFiles,d=e.filesIds,f=t.history,p=ue()(null===r||void 0===r?void 0:r.createdAt).format("DD/MM/YYYY, HH:mm[h]"),m={};return m=t.hasOwnProperty("veiculoId")?{primaryKey:"veiculoId",filesCollection:c}:{primaryKey:"empresaId",filesCollection:l},n.a.createElement("main",{className:"popUpWindow",sytle:{width:"90%"}},r?n.a.createElement(n.a.Fragment,null,n.a.createElement("header",{className:"infoLogHeader"},n.a.createElement("h3",null,"Informa\xe7\xf5es adicionais"),n.a.createElement("hr",null),n.a.createElement("div",{className:"floatRight"},"Inserido por ",null===r||void 0===r?void 0:r.user," ",p?"\xe0s "+p:"")),n.a.createElement("section",null,n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",{style:{whiteSpace:"pre-line"}},r.info)),n.a.createElement("footer",null,n.a.createElement("div",{className:"voltarDiv",style:{padding:"0px",margin:"30px 0 0 0",position:"absolute",bottom:"1%"}},n.a.createElement(st.a,{variant:"outlined",color:"primary",onClick:function(){return o(!1)}},n.a.createElement(tr.a,{size:"tiny"}),n.a.createElement("span",{style:{padding:"2px 0 0 2px",marginLeft:"2px",fontSize:".85rem"}},"Voltar"))))):n.a.createElement(yi,Object.assign({},m,{tableData:f,staticFields:Ei,length:Ei.length,title:"Solicita\xe7\xe3o n\xba ".concat(null===t||void 0===t?void 0:t.numero),id:t.id,razaoSocial:null===t||void 0===t?void 0:t.empresa,showInfo:a,style:{padding:"9px 4px"},tableStyle:{marginTop:"23px"},showFiles:s,setShowFiles:u,close:i,filesIds:d})),n.a.createElement(mt,{close:i}))}function wi(e){var t=e.completed,a=e.showCompleted;return n.a.createElement("header",{style:{display:"flex",justifyContent:"flex-end",height:"50px",paddingBotom:"10px"}},n.a.createElement(lt.a,{style:{marginTop:"20px"},control:n.a.createElement(ct.a,{checked:!0===t,onChange:function(){return a(!t)},value:t}),label:n.a.createElement("p",{style:{color:"#2979ff",fontSize:"0.7rem",float:"right"}}," Mostrar solicita\xe7\xf5es conclu\xeddas")}))}var Oi=[{field:"numero",title:"N\xfamero",label:"N\xfamero"},{field:"subject",title:"Solicita\xe7\xe3o",label:"Solicita\xe7\xe3o"},{field:"empresa",title:"Empresa",label:"Empresa"},{field:"veiculo",title:"Ve\xedculo",label:"Ve\xedculo"},{field:"status",title:"Situa\xe7\xe3o",label:"Situa\xe7\xe3o"},{field:"updatedAt",title:"\xdaltima Atualiza\xe7\xe3o",label:"\xdaltima Atualiza\xe7\xe3o",type:"date"}],Si=function(e){var t=e.rowData,a=e.user,r=t.status,n=a.role;return!(!r.match("indeferida")&&!r.match("conclu\xedda"))||(!("empresa"!==n||!r.match("Pend\xeancias"))||!("empresa"===n||!r.match("Aguardando")))},ji=function(e){var t=e.tableData,a=e.title,r=e.showDetails,o=e.assessDemand,i=e.completed,c=(e.showInfo,e.user),l=JSON.parse(JSON.stringify(t));return l.forEach((function(e){return delete e.history})),n.a.createElement("div",{style:{margin:"10px 0"},className:"noPrint"},n.a.createElement(jn.a,{title:a,columns:Oi,data:l,style:{fontFamily:"Segoe UI",fontSize:"14px"},options:{filtering:!0,exportButton:!0,exportFileName:"Solicita\xe7\xf5es",exportCsv:function(e,t){return Dn("Solicita\xe7\xf5es",Oi,t)},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:10},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Nenhuma solicita\xe7\xe3o aberta no momento.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportCSVName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},actions:[{icon:"history_icon",iconProps:{color:"primary"},tooltip:"Ver hist\xf3rico",onClick:function(e,t){return r(t.id)}},function(e){return Si({rowData:e,user:c})&&{icon:i?"Solicita\xe7\xe3o indeferida"===(null===e||void 0===e?void 0:e.status)?"clear":"done_icon":"assignment_turned_in_outlined",iconProps:{className:i?"":"assessDemandButton",color:"Solicita\xe7\xe3o indeferida"===(null===e||void 0===e?void 0:e.status)?"secondary":i?"action":"disabled"},tooltip:(null===e||void 0===e?void 0:e.status.match("Aguardando"))?"Analisar solicita\xe7\xe3o":(null===e||void 0===e?void 0:e.status.match("Pend\xeancias"))?"Abrir solicita\xe7\xe3o":"Solicita\xe7\xe3o indeferida"===(null===e||void 0===e?void 0:e.status)?"Indeferida":"Conclu\xedda",onClick:function(e,t){return i?null:o(t.id)}}}],components:{Pagination:Fn}}))},Li=["__v"];function ki(){ki=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Ci=we(["veiculos","empresas","logs","getFiles/vehicleDocs","getFiles/empresaDocs"],(function(e){var t=e.redux,a=t.veiculos,o=t.empresas,i=t.vehicleDocs,c=t.empresaDocs,l=e.user,s=Object(r.useState)([]),u=Object(Qe.a)(s,2),d=u[0],f=u[1],p=Object(r.useState)(!1),m=Object(Qe.a)(p,2),g=m[0],b=m[1],y=Object(r.useState)(),E=Object(Qe.a)(y,2),x=E[0],w=E[1],j=Object(r.useState)(!1),L=Object(Qe.a)(j,2),k=L[0],C=L[1],N=Object(r.useState)(),P=Object(Qe.a)(N,2),I=P[0],D=P[1],A=Object(r.useState)({openAlertDialog:!1,customMessage:"",customTitle:""}),_=Object(Qe.a)(A,2),T=_[0],F=_[1],z=Object(r.useState)(!1),M=Object(Qe.a)(z,2),q=M[0],R=M[1],V=Object(r.useState)(),G=Object(Qe.a)(V,2),B=G[0],U=G[1],Y=T.openAlertDialog,H=T.customTitle,J=T.customMessage;Object(r.useEffect)((function(){return Eo(),function(){return Eo(!0)}}),[]),Object(r.useEffect)((function(){function e(e){27===e.keyCode&&(q||I||b(),q?R(!1):I&&D())}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[I,q]),Object(r.useEffect)((function(){function t(){return(t=Object(S.a)(ki().mark((function t(){var r,n;return ki().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Object(h.a)(e.redux.logs),n=r.map((function(e){var t,r;e.empresa=null===(t=o.find((function(t){return t.codigoEmpresa===e.empresaId})))||void 0===t?void 0:t.razaoSocial,e.veiculo=null===(r=a.find((function(t){return t.veiculoId===e.veiculoId})))||void 0===r?void 0:r.placa;e.__v;return Object(O.a)(e,Li)})),n=k?n.filter((function(e){return!0===e.completed})):n.filter((function(e){return!1===e.completed})),f(n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[a,o,k,e.redux.logs]);var W=function(){var t=Object(S.a)(ki().mark((function t(a){var r,n,o;return ki().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=d.find((function(e){return e.id===a})),w(n),(o=null===(r=We.find((function(e){return null===n||void 0===n?void 0:n.subject.match(e.subject)})))||void 0===r?void 0:r.path).match("/solicitacoes")||(o="/solicitacoes"+o),e.history.push({pathname:o,state:{demand:n}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),K=function(){var e=Object(S.a)(ki().mark((function e(t){var a;return ki().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!1),R(!1),a=d.find((function(e){return e.id===t})),e.next=5,w(a);case 5:b(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,n.a.createElement(wi,{completed:k,showCompleted:C}),n.a.createElement(ji,{tableData:d,title:k?"Solicita\xe7\xf5es conclu\xeddas":"Solicita\xe7\xf5es em andamento",user:l,showDetails:K,assessDemand:W,completed:k,style:{textAlign:"center"}}),g&&n.a.createElement(xi,{solicitacao:x,close:function(){b(!1),R(!1)},showInfo:function(e){if(x&&(null===x||void 0===x?void 0:x.history)){var t=null===x||void 0===x?void 0:x.history[e];if(!(null===t||void 0===t?void 0:t.info))return;D(t)}},historyLog:I,setHistoryLog:D,vehicleDocs:i,empresaDocs:c,setShowFiles:function(e){e?(R(!0),U(e)):R(!1)},showFiles:q,filesIds:B}),Y&&n.a.createElement(sa,{open:Y,close:function(){return F(Object(v.a)(Object(v.a)({},T),{},{openAlertDialog:!Y}))},customMessage:J,customTitle:H}))})),Ni=[{field:"numeroAlteracao",label:"N\xfamero da altera\xe7\xe3o",maxLength:3,pattern:"^\\d{1,3}$",width:"240px"},{field:"numeroRegistro",label:"Registro na junta comercial",maxLength:40,width:"240px"},{field:"numeroSei",label:"N\xfamero do registro SEI (se houver)",maxLength:30,notRequired:!0,width:"240px"},{field:"dataJunta",label:"Data de registro na Junta Comercial",type:"date",notRequired:!0,width:"240px"},{field:"vencimentoContrato",label:"Vencimento do Cadastro - CRC",type:"date"}],Pi=a(506),Ii=a.n(Pi);a(679);function Di(e){var t=e.data,a=e.forms,o=e.filesForm,i=e.files,c=e.demandFiles,l=t.filteredSocios,s=t.selectedEmpresa,u=["Dados da empresa","Informa\xe7\xf5es sobre a altera\xe7\xe3o do contrato social"],d=t.alteredFields||[];if(!d.length)for(var f in s)t[f]!==s[f]&&""!==t[f]&&d.push(f);return a.forEach((function(e){e.forEach((function(e){Object.entries(t).forEach((function(t){var a=Object(Qe.a)(t,2),r=a[0],n=a[1];e.field===r&&("date"===e.type?n&&ue()(n,!0).isValid()&&(e.value=ue()(n).format("DD/MM/YYYY")):e.value=n)}))}))})),n.a.createElement(n.a.Fragment,null,n.a.createElement("section",{className:"flex"},n.a.createElement("div",{className:"divTable"},a.map((function(e,t){return n.a.createElement(r.Fragment,{key:t},n.a.createElement("table",{style:1===t?{tableLayout:"fixed"}:{}},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"tHeader",colSpan:e.length},u[t])),n.a.createElement("tr",null,e.map((function(e,t){var a=e.label;return n.a.createElement("th",{key:t},a)})))),n.a.createElement("tbody",null,n.a.createElement("tr",null,e.map((function(e,t){var a=e.field,r=e.value;return n.a.createElement("td",{className:"review",key:t,style:{color:d.includes(a)?"red":"#000"}},r)}))))))})))),n.a.createElement("section",{className:"socios_docs_container"},l&&l[0]&&l.some((function(e){return e.status}))&&n.a.createElement("section",{title:"S\xf3cios",className:"flexColumn socios__review__container"},n.a.createElement("h3",{className:"review__subtitle"},n.a.createElement(Ii.a,{className:"socios__review__icon"}),"S\xf3cios"),l.map((function(e,t){var a=e.nomeSocio,r=e.status,o=e.outsider;return n.a.createElement("div",{key:t,className:"flex socios__review__div",style:{color:o||"new"===r?"green":"modified"===r?"orange":"deleted"===r?"red":""}},n.a.createElement("span",{className:"socios__review__prop"},a,o||"new"===r?"(inclu\xeddo)":"modified"===r?"(modificado)":"deleted"===r?"(exclu\xeddo)":""))}))),(i||c)&&n.a.createElement("section",{title:"Documentos",className:"flex docs"},n.a.createElement("h3",{className:"review__subtitle"},n.a.createElement(Bt.a,{className:"docs__icon"})," Documentos"),n.a.createElement(qt,{demandFiles:c,form:o,files:i,collection:"empresaDocs"}))))}var Ai=Object($.a)((function(e){return{list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#999",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"}}})),_i=function(e){var t=e.handleInput,a=e.handleBlur,o=e.data,i=e.addSocio,c=e.enableEdit,l=e.handleEdit,s=e.removeSocio,u=o.selectedEmpresa,d=o.subtitles,f=o.activeStep,p=o.filteredSocios,m=Ai(),h=m.iconButton,v=m.list;return n.a.createElement(n.a.Fragment,null,u&&n.a.createElement("section",{className:"flex paper"},n.a.createElement(it,{subtitle:d[f]}),n.a.createElement("div",{className:"flex center"},n.a.createElement("div",{style:{padding:"10px 0",width:"100%"}},n.a.createElement(ot,{form:vr,data:o,handleBlur:a,handleInput:t})),n.a.createElement("div",{style:{margin:"5px 0 7px 84.58%",width:"100%"}},n.a.createElement(st.a,{color:"primary",variant:"outlined",size:"small",onClick:i},n.a.createElement(dt.a,null)," Adicionar s\xf3cio")))),u&&0===p.length&&n.a.createElement("section",null,n.a.createElement("p",null,"Nenhum s\xf3cio cadastrado para ",u.razaoSocial)),(null===p||void 0===p?void 0:p.length)>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement("section",{className:"flex center paper"},n.a.createElement("p",null," S\xf3cios cadastrados"),p.map((function(e,t){return n.a.createElement("div",{key:t},vr.map((function(t,a){return n.a.createElement(r.Fragment,{key:a+1e3},n.a.createElement(rt.a,{value:e[t.field]||"",name:t.field,label:t.label,className:v,disabled:!e.edit,onChange:l,error:e.edit?fe(e[t.field],t):null,helperText:e.edit?pe(e[t.field],t):null,type:null===t||void 0===t?void 0:t.type,InputLabelProps:{shrink:!0,style:{fontWeight:600,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",color:"#888"}},inputProps:{style:{fontSize:"13px",color:!0===e.edit?"#000":"new"===e.status||e.outsider?"green":"modified"===e.status?"#FF2500":"deleted"===e.status?"red":"#888",textDecoration:"deleted"!==e.status||e.edit?"":"line-through"}}}))})),n.a.createElement(st.a,{disabled:"deleted"===e.status,component:"span",className:h,title:"editar",onClick:function(){return c(t)}},n.a.createElement(an.a,null)),n.a.createElement(st.a,{className:h,color:"deleted"===e.status?"primary":"secondary",title:"deleted"===e.status?"Desfazer exclus\xe3o":"Remover",onClick:function(){return s(t)}},"deleted"===e.status?n.a.createElement("i",{className:"material-icons"},"undo"):n.a.createElement(Ha.a,null)))})))))},Ti=[{title:"Altera\xe7\xe3o do contrato social",name:"altContratoDoc"},{title:"CRC",name:"crc"}],Fi=function(e){var t=e.empresas,a=e.data,r=e.setActiveStep,o=e.enableEdit,i=e.handleEdit,c=e.addSocio,l=e.removeSocio,s=e.handleInput,u=e.handleBlur,d=e.handleSubmit,f=e.handleFiles,p=e.removeFile,m=e.setShowPendencias,h=JSON.parse(JSON.stringify(hr)).filter((function(e){return"numeroContrato"!==e.field&&"vencimentoContrato"!==e.field})).map((function(e){return"razaoSocial"!==e.field||a.demand||(e.field="razaoSocialEdit"),e})),v=a.selectedEmpresa,g=a.demand,b=a.demandFiles,y=a.activeStep,E=a.stepTitles,x=a.subtitles,w=a.form,O=a.fileToRemove,S=a.info,j=a.showPendencias,L="Altera\xe7\xe3o de contrato social - ".concat(null===v||void 0===v?void 0:v.razaoSocial),k=[h,Ni];return n.a.createElement("main",null,n.a.createElement("header",null,n.a.createElement(Kt,{links:["Empresas","/empresas"],text:"Altera\xe7\xe3o de dados e contrato social",demand:g,selectedEmpresa:v}),n.a.createElement("section",null,n.a.createElement(ta,{activeStep:y,steps:E,setActiveStep:r})),n.a.createElement("div",{className:"flex center"},n.a.createElement(tt,{empresas:t,data:a,headerTitle:L,handleInput:s}))),v instanceof Object&&n.a.createElement(n.a.Fragment,null,2!==y?n.a.createElement("section",{className:"flex paper"},n.a.createElement(it,{subtitle:x[y]}),y<2?n.a.createElement(n.a.Fragment,null,n.a.createElement(ot,{form:k[y],data:a,handleInput:s,style:{width:"100%"}}),n.a.createElement("div",{className:"flex center",style:{width:"100%"}},1===y&&Ti.map((function(e,t){var a=e.name,r=e.title;return n.a.createElement(St,{key:t,name:a,formData:w,dropDisplay:"Clique ou arraste para anexar o ".concat(r," "),handleFiles:f,removeFile:p,fileToRemove:O,style:{width:0===t?"380px":"250px",marginRight:0===t?"12px":0}})})))):n.a.createElement(Di,{data:a,forms:k,files:w,demandFiles:b,filesForm:Da})):n.a.createElement("section",null,n.a.createElement(_i,{data:a,handleInput:s,handleBlur:u,addSocio:c,removeSocio:l,handleFiles:f,enableEdit:o,handleEdit:i})),n.a.createElement("footer",null,n.a.createElement(Xt,{demand:g,declineButtonLabel:"Indeferir",setShowPendencias:m,showPendencias:j,info:S,activeStep:y,lastStep:E.length-1,setActiveStep:r,handleInput:s,handleSubmit:d}))))};function zi(){zi=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Mi=["Alterar dados da empresa","Informa\xe7\xf5es sobre altera\xe7\xe3o do contrato social","Informa\xe7\xf5es sobre s\xf3cios","Revis\xe3o"],qi=["Utilize os campos abaixo caso deseje editar os dados da empresa","Informe as altera\xe7\xf5es no contrato social ou CRC e anexe uma c\xf3pia do documento","Adicione ou altere s\xf3cios e suas respectivas participa\xe7\xf5es.","Revise os dados informados."],Ri=we(["empresas","socios","getFiles/empresaDocs"],(function(e){var t=e.redux.empresas,a=Object(h.a)(e.redux.socios),o=Object(r.useState)({razaoSocial:"",activeStep:0,stepTitles:Mi,subtitles:qi,dropDisplay:"Clique ou arraste para anexar a c\xf3pia da altera\xe7\xe3o do contrato social ",demand:void 0,confirmToast:!1,filteredSocios:[],showPendencias:!1,openAlertDialog:!1}),i=Object(Qe.a)(o,2),c=i[0],l=i[1];Object(r.useEffect)((function(){var r,n;if(t&&1===t.length){var o=Object(v.a)({},t[0]),i=null===o||void 0===o?void 0:o.vencimentoContrato;i&&i.length>0&&(o.vencimentoContrato=i.substr(0,10)),l(Object(v.a)(Object(v.a)(Object(v.a)({},c),o),{},{selectedEmpresa:o,filteredSocios:a}))}var s=null===e||void 0===e||null===(r=e.location)||void 0===r||null===(n=r.state)||void 0===n?void 0:n.demand;if(s&&s.history[0]){var u=e.redux.empresaDocs,d=null===s||void 0===s?void 0:s.history[0],f=d.altContrato,p=d.altEmpresa,m=d.socioUpdates,h=d.files,g=t.find((function(e){return e.codigoEmpresa===s.empresaId})),b=[];for(var y in g)p&&p[y]&&p[y]!==g[y]&&b.push(y);var E,x=Object(v.a)(Object(v.a)({},g),p),w=a.filter((function(e){return e.empresas&&e.empresas[0]&&e.empresas.some((function(e){return e.codigoEmpresa===g.codigoEmpresa}))})),O=JSON.parse(JSON.stringify(w));if(m&&m[0]){var S=[];m.forEach((function(e){"new"===e.status||e.outsider?S.push(e):O.forEach((function(t){if(e.socioId===t.socioId){var a=O.findIndex((function(t){return t.socioId===e.socioId}));-1!==a&&(O[a]=e)}}))})),O=O.concat(S).sort((function(e,t){return e.nomeSocio.localeCompare(t.nomeSocio)}))}h&&(E=u.filter((function(e){return h.includes(e.id)}))),l(Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)({},c),f),x),{},{selectedEmpresa:g,demand:s,alteredFields:b,demandFiles:E,filteredSocios:O,activeStep:3}))}return function(){}}),[]),Object(r.useEffect)((function(){if(c.selectedEmpresa){var e=c.selectedEmpresa.codigoEmpresa,t=JSON.parse(JSON.stringify(a.filter((function(t){return t.empresas&&t.empresas[0]&&t.empresas.some((function(t){return t.codigoEmpresa===e}))}))))||[];l(Object(v.a)(Object(v.a)({},c),{},{originalSocios:t}))}}),[c.selectedEmpresa]);var s=function(){var e=Object(S.a)(zi().mark((function e(){var t,a,r,n,o,i,s,u,d,f,p,g,b,y;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.selectedEmpresa,a=t.codigoEmpresa,r=Object(h.a)(c.filteredSocios),n={},o=0,i=0,vr.forEach((function(e){""!==c[e.field]&&void 0!==c[e.field]||(o+=1)})),100!==o){e.next=6;break}return l(Object(v.a)(Object(v.a)({},c),{},{alertType:"fieldsMissing",openAlertDialog:!0})),e.abrupt("return");case 6:return vr.forEach((function(e){Object.assign(n,Object(m.a)({},e.field,c[e.field]))})),e.next=9,D.a.post("/api/checkSocios",{newCpfs:[null===n||void 0===n?void 0:n.cpfSocio]});case 9:if(s=e.sent,u=null===s||void 0===s?void 0:s.data,n.status="new",u[0]&&(d=u[0],f=d.socio_id,p=d.empresas,g={socioId:f,status:"modified",outsider:!0,empresas:p},Object.assign(n,Object(v.a)({},g))),n.share&&(n.share=+n.share),b=n.share,n.empresas&&n.empresas[0]&&n.empresas.push({codigoEmpresa:a,share:b}),(n.empresas&&!n.empresas[0]||!n.empresas)&&(n.empresas=[{codigoEmpresa:a,share:b}]),r.push(n),r.sort((function(e,t){return e.nomeSocio.localeCompare(t.nomeSocio)})),r.forEach((function(e){"deleted"!==(null===e||void 0===e?void 0:e.status)&&(i+=Number(e.share))})),!(i>100)){e.next=25;break}return r.pop(),e.next=24,l(Object(v.a)(Object(v.a)({},c),{},{alertType:"overShared",openAlertDialog:!0}));case 24:return e.abrupt("return");case 25:return y={},vr.forEach((function(e){return y[e.field]=""})),e.next=29,l(Object(v.a)(Object(v.a)(Object(v.a)({},c),y),{},{filteredSocios:r,totalShare:i}));case 29:setTimeout((function(){document.getElementsByName("nomeSocio")[0].focus()}),200);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var t=Object(S.a)(zi().mark((function t(a){var r,n,o,i,l,s,u,m,h,g,y,O,S,j,L,k,C,N,I,A,_,T,F;return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=c.demand,n=c.form,o=c.selectedEmpresa,i=o.codigoEmpresa,l=p(Ni),s=p(hr),u=d(a),m=f({demand:r,altEmpresa:s,altContrato:l,socioUpdates:u,approved:a}),h=[],g="Solicita\xe7\xe3o de altera\xe7\xe3o contratual enviada.",r||l||s||n||u){t.next=5;break}return alert("Nenhuma modifica\xe7\xe3o registrada!"),t.abrupt("return");case 5:if(!r||!a){t.next=26;break}if(r.history[0].altEmpresa&&s&&D.a.put("/api/editElements",{table:"empresas",tablePK:"codigo_empresa",update:P.a.decamelizeKeys(s)}),l&&D.a.post("/api/altContrato",l),!u){t.next=26;break}if(y=u.newSocios,O=u.oldSocios,S=u.cpfsToAdd,j=u.cpfsToRemove,L={table:"socios",tablePK:"socio_id",codigoEmpresa:i,cpfsToAdd:S},!y[0]){t.next=15;break}return t.next=13,D.a.post("/api/socios",{socios:y,codigoEmpresa:i});case 13:k=t.sent,h.push(k.data);case 15:if(!O[0]){t.next=24;break}return console.log("\ud83d\ude80 ~ file: AltContrato.jsx ~ line 442 ~ oldSocios",O),t.next=19,D.a.put("/api/socios",Object(v.a)({socios:O},L));case 19:if(!j[0]){t.next=22;break}return t.next=22,D.a.patch("/api/removeEmpresa",{cpfsToRemove:j,codigoEmpresa:i});case 22:C=O.map((function(e){return e.socio_id})),h=h.concat(C);case 24:h[0]&&(N=w.filter((function(e){return(null===e||void 0===e?void 0:e.socioId)&&!h.includes(e.socioId)&&"deleted"!==(null===e||void 0===e?void 0:e.status)})).map((function(e){return e.socioId})),I=h.concat(N),Object.assign(m,{metadata:{socios:I}})),g="Dados atualizados";case 26:if(!1!==a){t.next=30;break}g="Solicita\xe7\xe3o indeferida.",t.next=36;break;case 30:if(a){t.next=36;break}return T=w.filter((function(e){return(null===e||void 0===e?void 0:e.socioId)&&!h.includes(e.socioId)&&"deleted"!==(null===e||void 0===e?void 0:e.status)})).map((function(e){return e.socioId})),F=h.concat(T),t.next=34,b(i,F);case 34:(A=t.sent)instanceof Array&&(_=A.map((function(e){return e.id})),m.history.files=_);case 36:Xe(m).then((function(e){console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),r?setTimeout((function(){e.history.push("/solicitacoes")}),1500):setTimeout((function(){E()}),900),x(g);case 39:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(e){var t=c.filteredSocios,a=c.selectedEmpresa,r=c.demand,n=a.codigoEmpresa,o=[],i=[],l=[];if(t.forEach((function(e){delete e.edit,delete e.createdAt,delete e.razaoSocial,Object.keys(e).forEach((function(t){e[t]&&""!==e[t]||delete e[t]})),e.status&&o.push(e)})),!o[0])return null;if(o.forEach((function(e){if(e.empresas&&e.empresas[0]&&!e.empresas.some((function(e){return e.codigoEmpresa===n})))e.empresas.push({codigoEmpresa:n,share:null===e||void 0===e?void 0:e.share}),console.log(e,e.empresas);else if(e.empresas&&e.empresas[0]&&e.empresas.some((function(e){return e.codigoEmpresa===n}))){var t=e.empresas.findIndex((function(e){return e.codigoEmpresa===n}));e.empresas[t].share=+e.share,console.log(e,e.empresas)}else e.empresas&&e.empresas[0]||(e.empresas=[{codigoEmpresa:n,share:null===e||void 0===e?void 0:e.share}]);"new"!==e.status&&!0!==e.outsider||l.push({cpf_socio:e.cpfSocio}),e.empresas instanceof Array&&"deleted"===e.status&&(e.empresas=e.empresas.filter((function(e){return e.codigoEmpresa!==n})),i.push({cpf_socio:e.cpfSocio}),e.empresas[0]||(e.empresas=[]))})),!r)return{socioUpdates:o,cpfsToAdd:l,cpfsToRemove:i};if(r&&e){o.forEach((function(e){delete e.outsider,delete e.razaoSocial,delete e.codigoEmpresa,delete e.originalStatus,delete e.nomeEmpresas,e.empresas=JSON.stringify(e.empresas)}));var s=(o=P.a.decamelizeKeys(o)).filter((function(e){return"new"===e.status})),u=o.filter((function(e){return"modified"===e.status||"deleted"===e.status}));return u.forEach((function(e){return delete e.status})),s.forEach((function(e){return delete e.status})),{newSocios:s,oldSocios:u,cpfsToAdd:l,cpfsToRemove:i}}},f=function(e){var t,a=e.demand,r=e.altEmpresa,n=e.altContrato,o=e.approved,i=e.socioUpdates,l=c.selectedEmpresa,s=c.info,u=l.codigoEmpresa;(a||(t={history:Object(v.a)({altContrato:n,info:s,altEmpresa:r},i),empresaId:u,historyLength:0,approved:o},!1===o&&(t.declined=!0)),a&&!1===o)&&(t={id:a.id,empresaId:a.empresaId,history:{info:s},declined:!0});a&&!0===o&&(t={id:a.id,demandFiles:c.demandFiles,history:{},approved:o});return t},p=function(e){var t=c.selectedEmpresa,a=c.demand,r=t.codigoEmpresa,n=t.razaoSocial,o=a&&a.createdAt,i={codigoEmpresa:null===t||void 0===t?void 0:t.codigoEmpresa};e.forEach((function(e){var t=e.field;for(var a in c)a===t&&c[a]&&Object.assign(i,Object(m.a)({},a,c[a]))}));var l=Object.keys(i);return l.length>1?(l.includes("numeroAlteracao")&&a&&(i.createdAt=o,i.codigoEmpresa=r,i.razaoSocial=n),c.razaoSocial&&(i.razaoSocial=c.razaoSocial),c.razaoSocialEdit&&(i.razaoSocial=c.razaoSocialEdit),console.log("\ud83d\ude80 ~ file: AltContrato.jsx ~ line 676 ~ returnObj",i),i):null},g=function(){var e=Object(S.a)(zi().mark((function e(t,a){var r,n,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&t[0]&&(n=Object(v.a)(Object(v.a)({},c),{},Object(m.a)({},a,t[0])),o=Re(t,n,Ti),l(Object(v.a)(Object(v.a)(Object(v.a)({},c),o),{},(r={},Object(m.a)(r,a,t[0]),Object(m.a)(r,"fileToRemove",null),r))));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),b=function(){var e=Object(S.a)(zi().mark((function e(t,a){var r,n,o,i,l,s,u,d,f,p,m;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.form,n=c.numeroAlteracao,o=[],!(r instanceof FormData)){e.next=26;break}i={empresaId:t,tempFile:!0},l=new FormData,s=Object(A.a)(r),e.prev=5,s.s();case 7:if((u=s.n()).done){e.next=17;break}return d=u.value,"altContratoDoc"===(f=d[0])?(p=Object(v.a)(Object(v.a)({},i),{},{fieldName:f,socios:a,numeroAlteracao:n}),l.append("metadata",JSON.stringify(p))):(m=Object(v.a)(Object(v.a)({},i),{},{fieldName:f}),l.append("metadata",JSON.stringify(m))),l.set(f,d[1]),e.next=14,D.a.post("/api/empresaUpload",l).then((function(e){var t,a;console.log(e),(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.file)instanceof Array&&o.push.apply(o,Object(h.a)(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.file))})).catch((function(e){return console.log(e)}));case 14:l=new FormData;case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),s.e(e.t0);case 22:return e.prev=22,s.f(),e.finish(22);case 25:return e.abrupt("return",o);case 26:case"end":return e.stop()}}),e,null,[[5,19,22,25]])})));return function(t,a){return e.apply(this,arguments)}}(),y=function(){var e=Object(S.a)(zi().mark((function e(t){var a,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=c.form,r=Be(t,a),l(Object(v.a)(Object(v.a)({},c),r));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e={},r={};[Ni,vr].forEach((function(t){t.forEach((function(t){var a=t.field;Object.assign(e,Object(m.a)({},a,""))}))})),t&&1===t.length&&(r=Object(v.a)(Object(v.a)({},t[0]),{},{selectedEmpresa:t[0],filteredSocios:a})),l(Object(v.a)(Object(v.a)({},e),{},{activeStep:0,stepTitles:Mi,subtitles:qi,razaoSocial:"",selectedEmpresa:void 0,filteredSocios:[],form:void 0,fileToRemove:void 0},r))},x=function(e){return l(Object(v.a)(Object(v.a)({},c),{},{confirmToast:!c.confirmToast,toastMsg:e}))},w=c.filteredSocios,O=c.confirmToast,j=c.toastMsg,L=c.openAlertDialog,k=c.alertType,C=c.customMessage,N=c.customTitle;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Fi,{empresas:t,data:c,setActiveStep:function(t){var a=c.activeStep,r=(e.redux.parametros[0]&&e.redux.parametros[0]).inputValidation,n=[JSON.parse(JSON.stringify(hr)).filter((function(e){return"numeroContrato"!==e.field&&"vencimentoContrato"!==e.field})).map((function(e){return"razaoSocial"===e.field&&(e.disabled=!0),e})),Ni];if("next"===t&&r){var o=e.checkBlankInputs,i=(0,e.checkInputErrors)("sendState"),s=o(n[a],c);if(i)return void l(Object(v.a)(Object(v.a)({},c),i));if(s)return void l(Object(v.a)(Object(v.a)({},c),s))}"next"===t&&a++,"back"===t&&a--,"reset"===t&&(a=0),l(Object(v.a)(Object(v.a)({},c),{},{activeStep:a}))},handleInput:function(e){var r,n=e.target,o=n.name,i=n.value,s={};if("razaoSocial"===o){var u,d,f=null===(u=s=t.find((function(e){return e.razaoSocial===i})))||void 0===u?void 0:u.vencimentoContrato;if(f&&f.length>0&&(s.vencimentoContrato=f.substr(0,10)),null===(d=s)||void 0===d?void 0:d.codigoEmpresa){r=JSON.parse(JSON.stringify(a.filter((function(e){return e.empresas&&e.empresas[0]&&e.empresas.some((function(e){return e.codigoEmpresa===s.codigoEmpresa}))}))));var p=JSON.parse(JSON.stringify(a));p=p.filter((function(e){return e.empresas&&e.empresas[0]?e.empresas.includes(s.codigoEmpresa):null})),p=r.concat(p);var g,b=new Map,y=Object(A.a)(p);try{for(y.s();!(g=y.n()).done;){var E=g.value;b.set(E.socioId,E)}}catch(w){y.e(w)}finally{y.f()}(r=Object(h.a)(b.values())).forEach((function(e){var t;e.empresas[0]&&(t=e.empresas.find((function(e){return e.share&&e.codigoEmpresa===s.codigoEmpresa}))),t&&t.share&&(e.share=t.share)}))}l(s?Object(v.a)(Object(v.a)(Object(v.a)({},c),s),{},Object(m.a)({selectedEmpresa:s,razaoSocialEdit:s.razaoSocial,filteredSocios:r},o,i)):Object(v.a)(Object(v.a)({},c),{},Object(m.a)({selectedEmpresa:void 0,filteredSocios:void 0},o,i)))}else{var x=Ao(o,i);l(Object(v.a)(Object(v.a)({},c),{},Object(m.a)({},o,x)))}},handleBlur:function(e){var t=e.target,a=t.name,r=t.value,n=c.filteredSocios;("razaoSocialEdit"===a&&l((function(e){return Object(v.a)(Object(v.a)({},e),{},{razaoSocial:r})})),"cpfSocio"===a)&&(n.some((function(e){return e.cpfSocio===r}))&&l(Object(v.a)(Object(v.a)({},c),{},{openAlertDialog:!0,customTitle:"Cpf j\xe1 cadastrado",customMessage:"O cpf informado corresponde a um s\xf3cio j\xe1 cadastrado. Para remover ou editar os dados do s\xf3cio, utilize as op\xe7\xf5es abaixo.",cpfSocio:""})))},handleSubmit:u,handleFiles:g,removeFile:y,socios:w,addSocio:s,removeSocio:function(e){var t=c.filteredSocios,a=c.demand,r=t[e];"new"===(null===r||void 0===r?void 0:r.status)||!a&&r.outsider?(t.splice(e,1),l(Object(v.a)(Object(v.a)({},c),{},{filteredSocios:t}))):((null===r||void 0===r?void 0:r.status)&&"deleted"!==(null===r||void 0===r?void 0:r.status)?(r.originalStatus=r.status,r.status="deleted"):"deleted"===(null===r||void 0===r?void 0:r.status)?r.status=null===r||void 0===r?void 0:r.originalStatus:r.status="deleted",l(Object(v.a)(Object(v.a)({},c),{},{filteredSocios:t})))},enableEdit:function(e){var t=c.filteredSocios;!0===t[e].edit?t[e].edit=!1:(t.forEach((function(e){return e.edit=!1})),t[e].edit=!0),l(Object(v.a)(Object(v.a)({},c),{},{filteredSocios:t}))},handleEdit:function(e){var t=e.target.name,a=c.filteredSocios,r=c.selectedEmpresa.codigoEmpresa,n=e.target.value;"share"===t&&(n=n.replace(",","."));var o=Object(h.a)(a),i=o.find((function(e){return!0===e.edit}));if(i){var s=Ao(t,n);if(i[t]=s,i.status||(i.status="modified"),"share"===t&&!isNaN(+n)){var u=i.empresas,d=u.findIndex((function(e){return e.codigoEmpresa===r}));-1!==d?u[d]=Object(v.a)(Object(v.a)({},u[d]),{},{share:+n}):u[0]?u.push({codigoEmpresa:r,share:+n}):i.empresas=[{codigoEmpresa:r,share:+n}]}l(Object(v.a)(Object(v.a)({},c),{},{filteredSocios:o}))}},setShowPendencias:function(){return l(Object(v.a)(Object(v.a)({},c),{},{showPendencias:!c.showPendencias}))}}),n.a.createElement(ee,{open:O,close:x,msg:j}),L&&n.a.createElement(sa,{open:L,alertType:k,close:function(){return l(Object(v.a)(Object(v.a)({},c),{},{openAlertDialog:!c.openAlertDialog}))},customMessage:C,customTitle:N}))})),Vi=(a(680),{height:60,width:70}),Gi=[Object(v.a)({src:"/images/chromeLogo.png",alt:"Google Chrome",title:"Google Chrome",href:"https://www.google.com/intl/pt-BR/chrome/"},Vi),Object(v.a)({src:"/images/edgeLogo.png",alt:"Microsoft Edge",title:"Microsoft Edge",href:"https://www.microsoft.com/pt-br/edge"},Vi),Object(v.a)({src:"/images/operaLogo.png",alt:"Opera",title:"Opera",height:"1rem",href:"https://www.opera.com/pt-br"},Vi)],Bi=function(){return n.a.createElement("div",{className:"flexColumn"},n.a.createElement("h4",{className:"webBrowsers__title"},"Melhor visualizado nos navegadores"),n.a.createElement("div",{className:"webBrowsers__container"},Gi.map((function(e,t){return n.a.createElement("a",{key:t,href:e.href,target:"_blank",rel:"noopener noreferrer"},n.a.createElement("img",Object.assign({className:"webBrowsers__logo",alt:e.alt},e)))}))))},Ui=["name","label","options","type"],Yi=function(e){var t=e.data,a=e.changeTab,o=e.handleInput,i=e.handleSubmit,c=t.title,l=t.form,s=t.buttonLabel,u=t.tab,d=t.browserNotCompatible;Object(r.useEffect)((function(){setTimeout((function(){var e=document.getElementById("email");e&&e.focus()}),600)}),[]);var f=function(e){var a,r=t[null===e||void 0===e?void 0:e.field];if(r)return(!e.errorHandler||!e.errorHandler(r))&&(!(!r||!e.errorHandler||e.errorHandler(r))||((null===(a=r)||void 0===a?void 0:a.length)<(null===e||void 0===e?void 0:e.minLength)||("string"!==typeof r&&(r=r.toString()),!!e.pattern&&null===r.match(e.pattern))))},p=function(e){var a,r,n=t[e.field];return n?e.errorHandler&&e.errorHandler(n)?"\u2713":n&&e.errorHandler&&!e.errorHandler(n)||(null===(a=n)||void 0===a?void 0:a.length)<(null===e||void 0===e?void 0:e.minLength)?"\u2718":(null===(r=n)||void 0===r?void 0:r.length)>=(null===e||void 0===e?void 0:e.minLength)?"\u2713":("string"!==typeof n&&(n=n.toString()),n>e.max||n<e.min?"Valor inv\xe1lido":null===n.match(e.pattern)?"\u2718":e.pattern&&null!==n.match(e.pattern)?"\u2713":" "):" "};return n.a.createElement("div",{className:"flexColumn login"},n.a.createElement("h2",{className:"login__title"},"CadTI - Cadastro do Transporte Intermunicipal - Seinfra MG"),n.a.createElement("div",{className:"login__form paper"},n.a.createElement("header",null,n.a.createElement("h4",{className:"header2 login__subtitle"},c),2===u&&n.a.createElement("h5",{className:"login__subtitle--forgotPassword"},"Insira o e-mail cadastrado para recuperar a senha.")),n.a.createElement("section",{className:"flexColumn center"},l.map((function(e,a){var r=e.name,i=e.label,c=e.options,l=e.type,s=void 0===l?"text":l,u=Object(O.a)(e,Ui);return n.a.createElement("div",{className:"input",key:a},n.a.createElement(rt.a,{id:r,name:r,label:i,value:t[r]||"",onChange:o,type:s,error:f(u),helperText:p(u),InputProps:{style:{width:"260px"}},InputLabelProps:{style:{fontSize:"10pt",color:"#223"}},select:!!c},c&&c.map((function(e,t){var a=e.optionLabel,r=e.optionValue;return n.a.createElement(at.a,{key:t,value:r},a)}))))})),n.a.createElement(Hr,{label:s,onClick:i})),n.a.createElement("footer",{className:"login__footer"},n.a.createElement("p",{onClick:function(){return a(0===u?1:0)}},0===u?"Ainda n\xe3o \xe9 cadastrado?":"Voltar para a tela de login"),0===u&&n.a.createElement("p",{onClick:function(){return a(2)}},"Esqueceu sua senha?"))),d&&n.a.createElement(Bi,null))},Hi=[{name:"email",label:"E-mail"},{name:"password",label:"Senha",type:"password"}],Ji=[{title:"Fazer login",form:Hi,buttonLabel:"entrar",endPoint:"/auth/login"},{title:"Cadastro de Usu\xe1rio",form:[{name:"name",label:"Nome Completo"},Object(v.a)(Object(v.a)({},cr),{},{name:"cpf",field:"cpf"})].concat(Hi,[{name:"confirmPassword",label:"Confirme sua senha",type:"password"}]),buttonLabel:"Cadastrar",endPoint:"/auth/signUp",toastMsg:"Usu\xe1rio cadastrado."},{title:"Recupera\xe7\xe3o de senha",form:[{name:"email",label:"E-mail"}],buttonLabel:"Recuperar senha",endPoint:"/auth/forgotPassword",toastMsg:"Senha enviada para o e-mail registrado."}],Wi=function(e,t){var a=document.baseURI;return"\n    <p>\n    O usu\xe1rio ".concat(e," foi criado com sucesso no Sistema de Cadastro do Transporte Intermunicipal da Seinfra-MG - CadTI.\n    </p>\n    <p>\n    Para confirmar o endere\xe7o de e-mail e liberar o acesso ao sistema, <a href= ").concat(a,"auth/verifyUser/").concat(t,"> clique aqui </a>.\n    </p>\n    Caso n\xe3o tenha feito o cadastro, favor desconsiderar essa mensagem.")},Ki=["form","endPoint","confirmToast","toastMsg"];function $i(){$i=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Xi=Object(l.c)((function(e){return{redux:Object(v.a)({},e.user)}}),(function(e){return Object(c.b)({logUser:oe},e)}))((function(e){var t=Object(r.useState)(Object(v.a)({tab:0},Ji[0])),a=Object(Qe.a)(t,2),o=a[0],i=a[1],c=o.tab,l=o.endPoint,s=o.toastMsg,u=o.toastStatus,d=o.confirmToast,f=window.navigator.userAgent;Object(r.useEffect)((function(){f.match("Chrome")||i(Object(v.a)(Object(v.a)({},o),{},{browserNotCompatible:!0}))}),[]);var p=function(){var t=Object(S.a)($i().mark((function t(){var a,r,n;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.post(l,o);case 3:return t.next=5,D.a.get("/api/users/getUser");case 5:a=t.sent,r=null===a||void 0===a?void 0:a.data,console.log("\ud83d\ude80 ~ file: UserAuth.jsx:47 ~ login ~ userFound",r),te("loggedIn",!0),e.logUser(r),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),y(null===t.t0||void 0===t.t0||null===(n=t.t0.response)||void 0===n?void 0:n.data,"error");case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),h=function(){var e=Object(S.a)($i().mark((function e(){var t,a,r,n,c,l,s;return $i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.form,t=o.endPoint,o.confirmToast,o.toastMsg,a=Object(O.a)(o,Ki),n=1,a instanceof Object&&(a.role="empresa"),c=a.email,l=a.name,s={to:c,subject:"Confirma\xe7\xe3o de e-mail",vocativo:l},e.next=6,D.a.post(t,a).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.id,r=Wi(c,a);s.message=r,D.a.post("/alerts/mail",s)})).catch((function(e){var t;y(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data,"error"),r=!0}));case 6:r||(n=0,y("Usu\xe1rio cadastrado."),setTimeout((function(){return i(Object(v.a)({tab:n},Ji[n]))}),1250));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(S.a)($i().mark((function e(){var t,a;return $i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.email,a=t,D.a.post(l,{recoveryMail:a}).then((function(e){y(e.data),setTimeout((function(){return i(Object(v.a)({tab:0},Ji[0]))}),1250)})).catch((function(e){var t;y(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data,"error")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){0===c&&p(),1===c&&h(),2===c&&g()};Object(r.useEffect)((function(){var e=function(e){"Enter"===e.key&&b()};return document.addEventListener("keypress",e),function(){return document.removeEventListener("keypress",e)}}));var y=function(e,t){return i(Object(v.a)(Object(v.a)({},o),{},{confirmToast:!o.confirmToast,toastMsg:e,toastStatus:t}))};return n.a.createElement(n.a.Fragment,null,n.a.createElement(Yi,{data:o,handleInput:function(e){var t=e.target,a=t.name,r=Ao(a,t.value);i(Object(v.a)(Object(v.a)({},o),{},Object(m.a)({},a,r)))},handleSubmit:b,changeTab:function(e){return i(Object(v.a)(Object(v.a)({},o),{},{tab:e},Ji[e]))}}),n.a.createElement(ee,{open:d,close:y,msg:s,status:u}))})),Zi=[{field:"name",title:"Nome",label:"Nome"},{field:"cpf",title:"CPF",label:"CPF"},{field:"email",title:"E-mail",label:"E-mail"},{field:"role",name:"role",title:"Perfil",label:"Perfil",lookup:{admin:"Administrador",tecnico:"T\xe9cnico Seinfra",empresa:"Delegat\xe1rio"},editable:"always"}],Qi=function(e){var t=e.collection,a=(e.showDetails,e.addUser),r=e.editUser,o=e.deleteUser;return Array.isArray(t)||(t=[]),t=Array.from(t).sort((function(e,t){return e.name.localeCompare(t.name)})),n.a.createElement("div",{style:{margin:"10px 0"},className:"noPrint"},n.a.createElement(jn.a,{title:"Gerenciar dados de usu\xe1rios",columns:Zi,data:t,style:{fontFamily:"Segoe UI",fontSize:"14px"},options:{filtering:!0,exportButton:!0,exportFileName:"Usu\xe1rios",exportCsv:function(e,t){var a,r=null===(a=Zi.find((function(e){return e.lookup})))||void 0===a?void 0:a.lookup;Object(h.a)(t).forEach((function(e){Object.entries(r).forEach((function(t){var a=Object(Qe.a)(t,2),r=a[0],n=a[1];r===(null===e||void 0===e?void 0:e.role)&&(e.role=n)}))})),Dn("Usu\xe1rios",Zi,t)},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:20,rowStyle:{fontSize:"0.5rem"}},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Registro n\xe3o encontrado.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",addTooltip:"Adicionar novo usu\xe1rio",editTooltip:"Editar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportCSVName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar para xlsx"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},editable:{onRowAdd:function(e){return new Promise((function(t,r){setTimeout((function(){a(e),t()}),1e3)}))},onRowUpdate:function(e,a){return new Promise((function(n,o){setTimeout((function(){Object(h.a)(t)[a.tableData.id]=e,r(e),n()}),500)}))},onRowDelete:function(e){return new Promise((function(t,a){setTimeout((function(){o(e),t()}),1e3)}))}}}))};function ec(){ec=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var tc=we(["users","socios"],(function(e){var t=e.redux,a=t.users,o=t.socios,i=Object(r.useState)({confirmToast:!1}),c=Object(Qe.a)(i,2),l=c[0],s=c[1];Object(r.useEffect)((function(){return Eo(),function(){return Eo(!0)}}),[]);var u=function(){var e=Object(S.a)(ec().mark((function e(t){var a,r;return ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.cpf,(r=o.find((function(e){return e.cpfSocio===a})))&&(t.empresas=[r.codigoEmpresa]),D.a.post("/api/users",t).then((function(e){return console.log(e.data)})).catch((function(e){return f(" Erro!")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=l.confirmToast,f=function(e,t){return s(Object(v.a)(Object(v.a)({},l),{},{confirmToast:!d,toastMsg:e,toastStatus:t}))};return n.a.createElement("div",null,n.a.createElement(Qi,{collection:a,addUser:u,editUser:function(e){D.a.put("/api/users",e).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))},deleteUser:function(e){var t=e.id;D.a.delete("/api/users?id=".concat(t)).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))}}),n.a.createElement(ee,{open:d,close:f,msg:l.toastMsg,status:"warning"}))})),ac=[{field:"name",label:"Nome e sobrenome"},{field:"cpf",label:"CPF",disabled:!0},{field:"email",label:"E-mail",type:"email"},{field:"password",label:"Alterar senha",type:"password"},{field:"confirmPassword",label:"Confirme a nova senha",type:"password"}],rc=(a(681),function(e){var t=e.data,a=e.handleInput,r=e.handleSubmit,o=t.modified;return n.a.createElement("div",{className:"flexColumn center editAccount__container"},n.a.createElement("header",{className:"selectHeader"},n.a.createElement("h4",{className:"parametrosTitle"},"Alterar dados da conta"),n.a.createElement(it,{subtitle:"Caso deseje alterar apenas a senha, insira apenas a senha e a confirma\xe7\xe3o. N\xe3o \xe9 necess\xe1rio informar a senha para alterar os demais dados da conta."})),n.a.createElement("main",{className:"configForm"},n.a.createElement(ot,{form:ac,data:t,handleInput:a,style:{width:"100%",flexDirection:"column"}})),n.a.createElement("div",{style:{minHeight:"60px",position:"flex"}},n.a.createElement(Hr,{action:"save",onClick:r,disabled:!o})))}),nc=Object(l.c)(null,{editUser:ie})(we([],(function(e){var t=e.user,a=Object(r.useState)({initState:{confirmToast:!1},modified:!1}),o=Object(Qe.a)(a,2),i=o[0],c=o[1],l=i.toastMsg,s=i.toastStatus,u=i.confirmToast;Object(r.useEffect)((function(){t instanceof Object&&c(Object(v.a)(Object(v.a)(Object(v.a)({},i),t),{},{initState:t}))}),[]);var d=function(e,t,a){var r,n,o,c,l=i.initState,s=!1;return"confirmPassword"===e&&(s=i.modified),a?c=l.toString()!==a.toString():(Object.keys(l).forEach((function(t){i[t]&&l[t]&&t!==e&&i[t].toString()!==l[t].toString()&&(r=!0)})),n=l[e]&&l[e].toString()!==t,o="password"===e&&i[e]&&""!==t),(n||r||c||o)&&(s=!0),s},f=function(e,t){return c(Object(v.a)(Object(v.a)({},i),{},{confirmToast:!i.confirmToast,toastMsg:e,toastStatus:t}))};return n.a.createElement(n.a.Fragment,null,n.a.createElement(rc,{data:i,handleInput:function(e){var t,a=e.target,r=a.name,n=a.value,o=d(r,n);c(Object(v.a)(Object(v.a)({},i),{},(t={},Object(m.a)(t,r,n),Object(m.a)(t,"modified",o),t)))},handleSubmit:function(){var t=d(null,null,i),a=i.name,r=i.cpf,n=i.email,o=i.password,l=i.confirmPassword,s={name:a,cpf:r,email:n,password:o};o===l?(s.id=i._id,D.a.put("/users/editUser",s).then((function(r){200===r.status&&(f(r.data),e.editUser({name:a,email:n}),setTimeout((function(){c(Object(v.a)(Object(v.a)({},i),{},{initState:i,modified:t,password:void 0,confirmPassword:void 0}))}),1200))})).catch((function(e){return f(e.message,"error")}))):f("Senhas n\xe3o conferem","error")}}),n.a.createElement(ee,{open:u,close:f,msg:l,status:s}))}))),oc=[{field:"placa",label:"Placa",autoComplete:!0,collection:"frota"},{field:"renavam",label:"Renavam",disabled:!0},{field:"nChassi",label:"N\xfamero do Chassi",maxLength:17,disabled:!0},{field:"utilizacao",label:"Utiliza\xe7\xe3o",disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",disabled:!0},{field:"compartilhado",label:"Delegat\xe1rio Compartilhado",itemProp:"razaoSocial",autoComplete:!0,collection:"compartilhados"}],ic=[{title:"Contrato de Compartilhamento",name:"contratoCompartilhamento"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"}],cc=a(344),lc=a.n(cc),sc=function(e){var t=e.data,a=e.redux,r=e.handleInput,o=e.handleFiles,i=e.removeFile,c=e.handleSubmit,l=e.toggleAcceptTerms,s=a.empresas,u=a.compartilhados,d=t.razaoSocial,f=t.selectedEmpresa,p=t.motivoCompartilhamento,m=t.form,h=t.demand,g=t.compartilhamentoRemoved,b=t.termsAccepted,y=t.demandFiles,E=t.fileToRemove,x=oc.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{disabled:!0})})),w=lc.a.termoCiencia__div,O=lc.a.termoCiencia__text;return n.a.createElement(n.a.Fragment,null,n.a.createElement("header",null,n.a.createElement(Kt,{links:["Ve\xedculos","/veiculos"],text:"Gerenciar compartilhamento de Ve\xedculos",demand:h}),n.a.createElement(tt,{empresas:s,data:{razaoSocial:d,demand:h},handleInput:r})),f&&n.a.createElement(n.a.Fragment,null,n.a.createElement("main",{className:"paper",style:{margin:"0.5rem 0"}},n.a.createElement(it,{subtitle:h?"Informa\xe7\xf5es do ve\xedculo e do compartilhamento":"Insira a placa do ve\xedculo para gerenciar seu compartilhamento."}),g&&n.a.createElement("p",{className:"smallFont",style:{color:"red"}},"*Solicita\xe7\xe3o de t\xe9rmino do compartilhamento"),n.a.createElement(ot,{form:h?x:oc,data:t,empresas:s,compartilhados:u,handleInput:r}),n.a.createElement("section",{className:"flexColumn",style:{margin:"0 6rem"}},n.a.createElement(Nr,{label:g?" Motivo do t\xe9rmino do compartilhamento":"Motivo do compartilhamento",name:"motivoCompartilhamento",id:"motivoCompartilhamento",disabled:!1,onChange:r,value:p,rows:"2"})),n.a.createElement("section",{className:"flexColumn"},n.a.createElement("div",{style:{margin:"3rem 0 0 0"}},n.a.createElement(it,{subtitle:h?"Documentos":"Anexe os arquivos solicitados.",style:{margin:0}})),n.a.createElement("div",{className:"flex",style:{margin:"0 0 0 6rem"}},h?n.a.createElement(qt,{demandFiles:y,form:ic,files:m,collection:"vehicleDocs"}):ic.map((function(e,t){var a=e.name,r=e.title;return n.a.createElement(St,{key:t,name:a,formData:m,dropDisplay:"Clique ou arraste para anexar o ".concat(r," "),handleFiles:o,removeFile:i,fileToRemove:E,style:{width:"490px",marginRight:0===t?"12px":0}})})))),n.a.createElement("section",{className:w},n.a.createElement(lt.a,{control:n.a.createElement(ct.a,{checked:!0===b,onChange:function(){return l()},value:b}),label:n.a.createElement("span",{className:O},"Estou ciente de que a utiliza\xe7\xe3o de ve\xedculos de terceiros \xe9 autorizada desde que o ve\xedculo seja cadastrado na Superintend\xeancia de Transporte Intermunicipal, apresentando o Certificado de Registro da SEINFRA vigente,  e com as caracter\xedsticas necess\xe1rias para utiliza\xe7\xe3o naquela linha.")}))),n.a.createElement("footer",null,n.a.createElement(Hr,{label:h?"Aprovar":"Enviar",onClick:function(){return h?c(!0):c()},disabled:!h&&!b}),h&&n.a.createElement(Hr,{label:"Indeferir",color:"secondary",onClick:function(){return c(!1)}}))))};function uc(){uc=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,r=Object.defineProperty||function(e,t,a){e[t]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),c=new j(n||[]);return r(i,"_invoke",{value:x(e,a,c)}),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var d={};function f(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(L([])));g&&g!==t&&a.call(g,o)&&(h=g);var b=m.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var n;r(this,"_invoke",{value:function(r,o){function i(){return new t((function(n,i){!function r(n,o,i,c){var l=u(e[n],e,o);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}(r,o,n,i)}))}return n=n?n.then(i,i):i()}})}function x(e,t,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return k()}for(a.method=n,a.arg=o;;){var i=a.delegate;if(i){var c=w(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var l=u(e,t,a);if("normal"===l.type){if(r=a.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r="completed",a.method="throw",a.arg=l.arg)}}}function w(e,t){var a=t.method,r=e.iterator[a];if(void 0===r)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,r,n,o){void 0===o&&(o=Promise);var i=new E(s(t,a,r,n),o);return e.isGeneratorFunction(a)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(a,r){return i.type="throw",i.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:L(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var dc=we(["veiculos","empresas","compartilhados","getFiles/vehicleDocs"],(function(e){var t,a,o=e.redux,i=o.empresas,c=o.compartilhados,l=o.veiculos,s=o.vehicleDocs,u=Object(r.useState)({confirmToast:!1,compartilhadoAtual:null,termsAccepted:!1}),d=Object(Qe.a)(u,2),f=d[0],p=d[1],h=null===e||void 0===e||null===(t=e.location)||void 0===t||null===(a=t.state)||void 0===a?void 0:a.demand;Object(r.useEffect)((function(){var e;if(i&&1===i.length&&p(Object(v.a)(Object(v.a)({},f),{},{selectedEmpresa:i[0],razaoSocial:null===(e=i[0])||void 0===e?void 0:e.razaoSocial,frota:l})),null===h||void 0===h?void 0:h.history){var t,a=h.empresaId,r=h.veiculoId,n=h.history.length&&h.history[0],o=n.motivoCompartilhamento,c=n.compartilhado,u=n.compartilhadoId,d=n.files,m=n.compartilhamentoRemoved,g=i.find((function(e){return e.codigoEmpresa===a})),b=l.filter((function(e){return e.codigoEmpresa===a})).find((function(e){return e.veiculoId===r}));d&&(t=s.filter((function(e){return d.includes(e.id)}))),p(Object(v.a)(Object(v.a)(Object(v.a)({},f),b),{},{selectedEmpresa:g,demand:h,demandFiles:t,razaoSocial:g.razaoSocial,motivoCompartilhamento:o,compartilhado:c,compartilhadoId:u,compartilhamentoRemoved:m}))}return function(){}}),[i,h]);var g=function(){var e=Object(S.a)(uc().mark((function e(t){var a,r;return uc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=f.form,r=Be(t,a),p(Object(v.a)(Object(v.a)({},f),r));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e={},t={};oc.forEach((function(t){var a=t.field;Object.assign(e,Object(m.a)({},a,void 0))})),i&&1===i.length&&(t=Object(v.a)(Object(v.a)({},i[0]),{},{selectedEmpresa:i[0]})),p(Object(v.a)(Object(v.a)(Object(v.a)({},e),{},{razaoSocial:"",selectedEmpresa:void 0,form:void 0,fileToRemove:void 0},t),{},{motivoCompartilhamento:""}))},y=function(e){return p(Object(v.a)(Object(v.a)({},f),{},{confirmToast:!f.confirmToast,toastMsg:e}))};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement(sc,{redux:e.redux,data:f,handleInput:function(e){var t=e.target,a=t.name,r=t.value;switch(a){case"razaoSocial":var n=i.find((function(e){return e.razaoSocial===r}));if(n){var o=l.filter((function(e){return e.codigoEmpresa===n.codigoEmpresa}));p(Object(v.a)(Object(v.a)({},f),{},Object(m.a)({selectedEmpresa:n,frota:o,razaoSocial:n.razaoSocial},a,r)))}else p(Object(v.a)(Object(v.a)({},f),{},Object(m.a)({},a,r)));break;case"placa":var s=l.find((function(e){return e.placa===r})),u=(null===s||void 0===s?void 0:s.compartilhado)||"";p(s?Object(v.a)(Object(v.a)(Object(v.a)({},f),s),{},Object(m.a)({compartilhadoAtual:u},a,r)):Object(v.a)(Object(v.a)({},f),{},Object(m.a)({compartilhadoAtual:void 0},a,r)));break;case"compartilhado":var d=c.find((function(e){return e.razaoSocial===r&&""!==r}));if(d){var h=d.codigoEmpresa,g=d.razaoSocial;p(Object(v.a)(Object(v.a)({},f),{},Object(m.a)({compartilhadoId:h,compartilhado:g,compartilhamentoRemoved:!1},a,r)))}else if(r)p(Object(v.a)(Object(v.a)({},f),{},Object(m.a)({},a,r)));else{var b=f.compartilhadoAtual&&!r;p(Object(v.a)(Object(v.a)({},f),{},Object(m.a)({compartilhadoId:void 0,compartilhado:void 0,compartilhamentoRemoved:b},a,r)))}break;default:p(Object(v.a)(Object(v.a)({},f),{},Object(m.a)({},a,r)))}},handleFiles:function(e,t){if(e&&e[0]){var a,r=Object(v.a)(Object(v.a)({},f),{},Object(m.a)({},t,e[0])),n=Re(e,r,ic);p(Object(v.a)(Object(v.a)(Object(v.a)({},f),n),{},(a={},Object(m.a)(a,t,e[0]),Object(m.a)(a,"fileToRemove",null),a)))}},removeFile:g,handleSubmit:function(t){var a;if(Xe(function(e){var t,a=e.demand,r=e.approved,n=f.selectedEmpresa,o=f.compartilhadoId,i=f.compartilhado,c=f.motivoCompartilhamento,l=f.info,s=f.form,u=f.veiculoId,d=f.compartilhamentoRemoved,p=n.codigoEmpresa;a||(t={history:{info:"".concat(d?"Motivo do t\xe9rmino do compartilhamento":"Motivo do compartilhamento",": ").concat(c),motivoCompartilhamento:c,files:s,compartilhadoId:o,compartilhado:i,compartilhamentoRemoved:d},metadata:{veiculoId:u},empresaId:p,veiculoId:u,historyLength:0,approved:r},!1===r&&(t.declined=!0));a&&!1===r&&(t={id:a.id,empresaId:a.empresaId,history:{info:l},declined:!0});a&&!0===r&&(t={id:a.id,veiculoId:u,demandFiles:f.demandFiles,history:{},approved:r});return t}({demand:h,approved:t})).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),t){var r=f.compartilhadoId;r||(r="NULL");var n=D.a.create({baseURL:"/api"}),o={table:"veiculos",tablePK:"veiculo_id",id:h.veiculoId,requestObject:{veiculo_id:h.veiculoId,compartilhado_id:r}};n.put("/updateVehicle",o).catch((function(e){return console.log(e)})).then((function(e){return console.log(e)})),a="Compartilhamento de ve\xedculo aprovado."}else!1===t?a="Solicita\xe7\xe3o indeferida.":t||(a="Solicita\xe7\xe3o enviada.");h?setTimeout((function(){e.history.push("/solicitacoes")}),1500):setTimeout((function(){b()}),900),y(a)},toggleAcceptTerms:function(){return p(Object(v.a)(Object(v.a)({},f),{},{termsAccepted:!f.termsAccepted}))}}),n.a.createElement(ee,{open:f.confirmToast,close:y,msg:f.toastMsg})))})),fc=a(507),pc=a.n(fc),mc=function(e){var t=e.size,a=void 0===t?"small":t,r=e.variant,o=void 0===r?"contained":r,i=e.color,c=void 0===i?"primary":i,l=e.style,s=void 0===l?{}:l,u=e.label,d=void 0===u?"add a label":u,f=e.iconName,p=e.onClick;return n.a.createElement(st.a,{size:a,variant:o,color:c,style:Object(v.a)({marginTop:"1rem"},s),onClick:p},f&&n.a.createElement(W.a,null,f),n.a.createElement("span",{style:{margin:"0.1rem 0 0 0.4rem"}},d))},hc=a(19),vc=(a(461),function(e){var t=e.aviso,a=e.close,r=t.message,o=t.vocativo,i=r.intro,c=r.tableData,l=r.tableHeaders,s=r.tip,u=r.tipPath,d=r.footer,f=function(e,t){var a="",r="<tr>";return t.forEach((function(e){r+="<th>".concat(e,"</th>")})),r+="</tr>",e.forEach((function(e,t){a+="<tr>\n\n        ",Object.entries(e).forEach((function(e){var t=Object(Qe.a)(e,2),r=t[0],n=t[1];"vencimento"!==r&&"validade"!==r||(n=hc(n).format("DD/MM/YYYY")),n instanceof Array&&(n=n.join().replace(/,/g,", ")),a+=" <td>".concat(n,"</td> ")})),a+="</tr>\n        "})),r+a}(c,l).replace(/<th>/g,'<th class= "aviso__th">').replace(/<td>/g,'<th class= "aviso__td">');return n.a.createElement("div",{className:"popUpWindow aviso__body",style:{left:"20%",right:"20%"}},n.a.createElement("h3",{className:"aviso__title"},"A/C ",o,":"),n.a.createElement("br",null),n.a.createElement("p",null,i),n.a.createElement("br",null),n.a.createElement("table",{className:"aviso__table",dangerouslySetInnerHTML:{__html:f}}),n.a.createElement("br",null),n.a.createElement("p",null,s,", acesse ",u),d,n.a.createElement(mt,{close:a}))}),gc=a(196),bc=a.n(gc),yc=(a(682),[{field:"from",title:"Remetente",label:"Remetente",render:function(e){return e.from?e.from:"Aviso autom\xe1tico do sistema"}},{field:"vocativo",title:"Destinat\xe1rio",label:"Destinat\xe1rio"},{field:"subject",title:"Assunto",label:"Assunto"},{field:"read",title:"Lida",label:"Status",hidden:!0},{field:"createdAt",title:"Data de cria\xe7\xe3o do aviso",label:"Data de cria\xe7\xe3o do aviso",type:"date",format:function(e){return e||"Nenhuma data informada"}}]),Ec=function(e){var t=e.aviso,a=e.close,r=t.from,o=t.vocativo,i=t.message;return n.a.createElement("div",{className:"popUpWindow aviso__body",style:{left:"20%",right:"20%"}},n.a.createElement("h3",{className:"aviso__title"},"A/C ",o,":"),n.a.createElement("br",null),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:i}}),n.a.createElement("br",null),n.a.createElement("p",null,"Att,",n.a.createElement("br",null),r,"."),n.a.createElement(mt,{close:a}))},xc=bc.a.container,wc=bc.a.tableContainer,Oc=bc.a.avisosHeader,Sc=bc.a.avisosHeaderAdmin,jc=function(e){var t=e.data,a=e.openAviso,r=e.close,o=e.formatDataToExport,i=e.toggleReadMessage,c=e.confirmDelete,l=e.toggleSelect,s=e.showUnreadOnly,u=e.toggleNewAviso,d=e.defaultFrom,f=e.userRole,p=t.avisos,m=t.showAviso,h=t.aviso,g=t.rowsSelected,b=t.allAreUnread,y=t.unreadOnly,E="admin"===f||"tecnico"===f,x=yc;return E||(x=yc&&yc.filter((function(e){return"vocativo"!==e.field}))),n.a.createElement(n.a.Fragment,null,n.a.createElement("header",{className:E?Sc:Oc},E&&n.a.createElement(mc,{variant:"outlined",iconName:"add",label:"novo aviso",className:"none",onClick:u}),n.a.createElement(sn,{title:"Mostrar somente avisos n\xe3o lidos",checked:y,toggleChecked:s})),n.a.createElement("main",{className:xc},n.a.createElement("div",{className:wc},n.a.createElement(jn.a,{title:"Avisos",columns:x,data:p,components:{Row:function(e){var t=Object(v.a)({},e),a=t.data,r=t.actions;console.log("\ud83d\ude80 ~ file: AvisosTemplate.jsx:57 ~ AvisosTemplate ~ data",a);var o=r.find((function(e){return"markAsRead"===e.name}));return!0===a.read?(o.icon="draftsOutlinedIcon",o.iconProps={color:"disabled",zindex:11}):(o.iconProps={color:"primary",zindex:11},o.icon="mailOutlined"),n.a.createElement(Sn.MTableBodyRow,Object.assign({id:"SOME-ROW-ID-HERE"},t))}},onRowClick:a,style:{fontFamily:"Segoe UI",fontSize:"14px"},icons:{Delete:n.a.forwardRef((function(e,t){return n.a.createElement(pc.a,Object.assign({style:{color:"red"}},e,{ref:t}))}))},options:{filtering:!0,selection:!0,selectionProps:{},search:!g,exportFileName:"avisos",exportButton:!0,exportCsv:function(e,t){var a=o(t);Dn("avisos",yc,a)},rowStyle:function(e){return{fontWeight:e.read?400:600}},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:20},onSelectionChange:function(e){return l(e)},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Nenhum aviso encontrado.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",nRowsSelected:"{0} avisos selecionados",exportCSVName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar"},pagination:{labelDisplayedRows:"Resultados por p\xe1gina",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},actions:[{name:"markAsRead",icon:g&&b?"draftsOutlinedIcon":"mailOutlined",tooltip:g&&b?"Marcar como lida":"Marcar como n\xe3o lida",onClick:function(e,t){return i(t)},position:g?"auto":"row"},{name:"remove",icon:"deleteOutline",iconProps:{color:"error"},tooltip:"Apagar aviso",position:g?"auto":"row",onClick:function(e,t){return c(t)}}]}),m?h.from!==d&&h.from?n.a.createElement(Ec,{aviso:h,close:r}):n.a.createElement(vc,{aviso:h,close:r}):null)))},Lc=[{label:"De",field:"from",disabled:!0},{label:"Assunto",field:"subject"}],kc=a(138),Cc=a.n(kc),Nc=function(){return n.a.createElement("svg",{viewBox:"0 0 18 18"},n.a.createElement("polygon",{className:"ql-fill ql-stroke",points:"6 10 4 12 2 10 6 10"}),n.a.createElement("path",{className:"ql-stroke",d:"M8.09,13.91A4.6,4.6,0,0,0,9,14,5,5,0,1,0,4,9"}))},Pc=function(){return n.a.createElement("svg",{viewBox:"0 0 18 18"},n.a.createElement("polygon",{className:"ql-fill ql-stroke",points:"12 10 14 12 16 10 12 10"}),n.a.createElement("path",{className:"ql-stroke",d:"M9.91,13.91A4.6,4.6,0,0,1,9,14a5,5,0,1,1,5-5"}))};var Ic=kc.Quill.import("formats/size");Ic.whitelist=["extra-small","small","medium","large"],kc.Quill.register(Ic,!0);var Dc=kc.Quill.import("formats/font");Dc.whitelist=["arial","comic-sans","courier-new","georgia","helvetica","lucida","roboto","arial","sans-serif"],kc.Quill.register(Dc,!0);var Ac={toolbar:{container:"#toolbar",handlers:{undo:function(){this.quill.history.undo()},redo:function(){this.quill.history.redo()}}},history:{delay:500,maxStack:100,userOnly:!0}},_c=["header","font","size","bold","italic","underline","align","strike","background","list","bullet","indent","link","color"],Tc=function(){return n.a.createElement("div",{id:"toolbar"},n.a.createElement("span",{className:"ql-formats"},n.a.createElement("select",{className:"ql-font"},n.a.createElement("option",{value:"arial"},"Arial"),n.a.createElement("option",{value:"courier-new"},"Courier New"),n.a.createElement("option",{value:"georgia"},"Georgia"),n.a.createElement("option",{value:"helvetica"},"Helvetica"),n.a.createElement("option",{value:"roboto"},"Roboto"),n.a.createElement("option",{value:"sans-serif"},"Sans Serif")),n.a.createElement("select",{className:"ql-size",defaultValue:"medium"},n.a.createElement("option",{value:"small"},"Pequeno"),n.a.createElement("option",{value:"medium"},"M\xe9dio"),n.a.createElement("option",{value:"large"},"Grande")),n.a.createElement("select",{className:"ql-header",defaultValue:"4"},n.a.createElement("option",{value:"2"},"T\xedtulo"),n.a.createElement("option",{value:"3"},"Sub t\xedtulo"),n.a.createElement("option",{value:"4"},"Normal"))),n.a.createElement("span",{className:"ql-formats"},n.a.createElement("button",{className:"ql-bold"}),n.a.createElement("button",{className:"ql-italic"}),n.a.createElement("button",{className:"ql-underline"}),n.a.createElement("button",{className:"ql-strike"})),n.a.createElement("span",{className:"ql-formats"},n.a.createElement("button",{className:"ql-list",value:"ordered"}),n.a.createElement("button",{className:"ql-list",value:"bullet"}),n.a.createElement("button",{className:"ql-indent",value:"-1"}),n.a.createElement("button",{className:"ql-indent",value:"+1"})),n.a.createElement("span",{className:"ql-formats"},n.a.createElement("select",{className:"ql-align"}),n.a.createElement("select",{className:"ql-color"}),n.a.createElement("select",{className:"ql-background"})),n.a.createElement("span",{className:"ql-formats"},n.a.createElement("button",{className:"ql-undo"},n.a.createElement(Nc,null)),n.a.createElement("button",{className:"ql-redo"},n.a.createElement(Pc,null))))},Fc=(a(785),function(e){var t=e.data,a=e.empresas,r=e.handleChange,o=e.toggleNewAviso,i=e.handleSubmit;return n.a.createElement("div",{className:"newAviso__container"},n.a.createElement("header",{className:"newAviso__bar"},n.a.createElement("span",{className:"newAviso__bar__title"},"Novo aviso"),n.a.createElement(mt,{close:o})),n.a.createElement("section",{className:"avisoInputs__container"},Lc.map((function(e,o){var i=e.field,c=e.label,l=e.autoComplete,s=e.collection,u=e.itemProp,d=e.disabled;return n.a.createElement("div",{key:o,className:"avisoInputs__inputDiv"},n.a.createElement(rt.a,{name:i,label:c,onChange:r,className:"fk",value:t[i]||"",disabled:d,InputLabelProps:{style:{fontSize:"0.7rem",fontWeight:400,width:"100%",color:"#888",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"}},inputProps:{style:{background:d&&t.disable?"#fff":"#fafafa",fontSize:"0.85rem",color:"#000",width:"100%",height:"7px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"},list:i||"",autoComplete:"off"},variant:"filled"}),l&&n.a.createElement(et,{field:i,collection:t[s]||a,itemProp:u,value:t[i]||""}))}))),n.a.createElement("section",{className:"textEditor__container"},n.a.createElement("div",{className:"textEditor__wrapper"},n.a.createElement(Tc,null),n.a.createElement(Cc.a,{theme:"snow",className:"textEditor__editor",onChange:r,name:"avisoText",value:t.avisoText||"",modules:Ac,formats:_c}))),n.a.createElement("footer",{className:"newAviso__footer"},n.a.createElement(mc,{label:"enviar",iconName:"send",style:{marginTop:"0.5rem"},onClick:i})))});var zc=Object(l.c)((function(e){var t;return{avisos:null===(t=e.data)||void 0===t?void 0:t.avisos,user:e.user}}),(function(e){return Object(c.b)({deleteOne:G,editUser:ie},e)}))(we(["avisos","empresas"],(function(e){var t,a,o,i,c=e.redux.avisos,l=null===(t=e.redux.parametros[0])||void 0===t||null===(a=t.nomes)||void 0===a?void 0:a.siglaSistema,s=null===e||void 0===e?void 0:e.user,u=s.name,d=s.role,f=(null===e||void 0===e||null===(o=e.user)||void 0===o?void 0:o.messagesRead)||[],p=(null===e||void 0===e||null===(i=e.user)||void 0===i?void 0:i.deletedMessages)||[],g=Object(r.useState)({unreadOnly:!1,showAviso:!1,writeNewAviso:!1,rowsSelected:!1,toast:!1,from:u}),b=Object(Qe.a)(g,2),y=b[0],E=b[1],x=Object(r.useCallback)((function(e){if("Escape"===e.key){if(y.showAviso)return void E(Object(v.a)(Object(v.a)({},y),{},{showAviso:!1}));E(Object(v.a)(Object(v.a)({},y),{},{writeNewAviso:!1}))}}),[y]);Object(r.useEffect)((function(){return document.addEventListener("keydown",x,!1),Eo(),function(){return document.removeEventListener("keydown",x,!1)}}),[x]),Object(r.useEffect)((function(){var e,t=Object(h.a)(c).sort((function(e,t){return new Date(null===t||void 0===t?void 0:t.createdAt)-new Date(null===e||void 0===e?void 0:e.createdAt)})),a=Object(A.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value;Array.isArray(f)&&f.includes(r.id)?r.read=!0:r.read=!1}}catch(i){a.e(i)}finally{a.f()}var n=t.every((function(e){return!1===e.read})),o=y.unreadOnly;n&&E((function(e){return Object(v.a)(Object(v.a)({},e),{},{allAreUnread:!0})})),o&&(t=t.filter((function(e){return!1===e.read}))),E((function(e){return Object(v.a)(Object(v.a)({},e),{},{avisos:t})}))}),[e.redux.avisos,y.unreadOnly,f,c]);var w=function(t){var a;t instanceof Array===!1&&(t=[t]);var r,n=Object(h.a)(y.avisos),o=t.every((function(e){return!1===e.read})),i=t.map((function(e){return e.id}));r=!!o,(null===(a=t)||void 0===a?void 0:a.length)>1&&E(Object(v.a)(Object(v.a)({},y),{},{allAreUnread:o}));var c,l=Object(A.a)(n);try{for(l.s();!(c=l.n()).done;){var s=c.value;i.includes(s.id)&&(s.read=r)}}catch(m){l.e(m)}finally{l.f()}var u=e.user,d=u.id,f=u.cpf,p=n.filter((function(e){return!0===e.read})).map((function(e){return e.id}));D.a.patch("/api/avisos/changeReadStatus",{id:d,cpf:f,messagesRead:p}).catch((function(e){throw alert(null===e||void 0===e?void 0:e.message),new Error(e)})),e.editUser(Object(v.a)(Object(v.a)({},e.user),{},{messagesRead:p}))},O=function(){var t=e.user,a=t._id,r=t.id,n=t.cpf,o=y.idsToDelete,i=[].concat(Object(h.a)(o),Object(h.a)(p));D.a.patch("/api/avisos/deleteUserMessages",{id:r||a,cpf:n,deletedMessages:i});var c,l=Object(A.a)(o);try{for(l.s();!(c=l.n()).done;){var s=c.value;e.deleteOne(s,"id","avisos")}}catch(u){l.e(u)}finally{l.f()}e.editUser(Object(v.a)(Object(v.a)({},e.user),{},{deletedMessages:i})),E(Object(v.a)(Object(v.a)({},y),{},{openConfirmDialog:!1,rowsSelected:!1}))},S=function(){return E(Object(v.a)(Object(v.a)({},y),{},{writeNewAviso:!y.writeNewAviso}))};return n.a.createElement(n.a.Fragment,null,n.a.createElement(jc,{avisos:y.avisos,data:y,userRole:d,defaultFrom:l,formatDataToExport:function(e){return e instanceof Array&&e.forEach((function(e){!0===e.read&&(e.read="Lida"),!1===e.read&&(e.read="N\xe3o lida"),delete e.message})),e},showUnreadOnly:function(){return E(Object(v.a)(Object(v.a)({},y),{},{unreadOnly:!y.unreadOnly}))},openAviso:function(e,t){var a,r=null===t||void 0===t||null===(a=t.tableData)||void 0===a?void 0:a.id,n=y.avisos[r];n&&!(null===n||void 0===n?void 0:n.read)&&w(t),n.from!==l&&n.from||!n.message||"string"!==typeof n.message||(n.message=JSON.parse(n.message)),E(Object(v.a)(Object(v.a)({},y),{},{aviso:n,showAviso:!0}))},toggleReadMessage:w,close:function(){return E(Object(v.a)(Object(v.a)({},y),{},{showAviso:!y.showAviso}))},confirmDelete:function(e){e instanceof Array===!1&&(e=[e]);var t=e.map((function(e){return e.id}));E(Object(v.a)(Object(v.a)({},y),{},{openConfirmDialog:!0,confirmType:"delete",idsToDelete:t}))},deleteAviso:O,toggleSelect:function(e){e.some((function(e){var t;return null===(t=e.tableData)||void 0===t?void 0:t.checked}))?E(Object(v.a)(Object(v.a)({},y),{},{rowsSelected:!0})):E(Object(v.a)(Object(v.a)({},y),{},{rowsSelected:!1}))},toggleNewAviso:S}),y.writeNewAviso&&("admin"===d||"tecnico"===d)&&n.a.createElement(Fc,{empresas:e.redux.empresas,data:y,handleChange:function(e){if("string"===typeof e)E(Object(v.a)(Object(v.a)({},y),{},{avisoText:e}));else{var t=e.target,a=t.name,r=t.value;E(Object(v.a)(Object(v.a)({},y),{},Object(m.a)({},a,r)))}},toggleNewAviso:S,handleSubmit:function(){var t,a=y.to,r=y.subject,n=y.avisoText,o=a,i=e.user;"admin"===i.role&&(t="Administrador do sistema"),"tecnico"===i.role&&(t="Equipe t\xe9cnica");var c={from:t,to:a,vocativo:o,subject:r,message:n};D.a.post("/api/avisos/userAlerts/?type=saveAlert",c).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),E(Object(v.a)(Object(v.a)({},y),{},{writeNewAviso:!1,toast:!0,subject:void 0,avisoText:void 0}))}}),y.openConfirmDialog&&n.a.createElement(Ga,{open:y.openConfirmDialog,close:function(){return E(Object(v.a)(Object(v.a)({},y),{},{openConfirmDialog:!1}))},confirm:O,type:y.confirmType,id:y.idToDelete}),n.a.createElement(ee,{open:y.toast,close:function(){return E(Object(v.a)(Object(v.a)({},y),{},{toast:!y.toast}))},msg:"Aviso criado com sucesso."}))}))),Mc=function(e){var t=e.user;return n.a.createElement(w.d,null,n.a.createElement(w.b,{exact:!0,path:"/",component:je}),n.a.createElement(w.b,{path:"/veiculos",exact:!0,component:_e}),n.a.createElement(w.b,{path:"/veiculos/cadastro",exact:!0,component:ga}),n.a.createElement(w.b,{path:"/veiculos/altDados",exact:!0,component:ja}),n.a.createElement(w.b,{path:"/veiculos/seguros",exact:!0,component:Va}),n.a.createElement(w.b,{path:"/veiculos/compartilhamento",exact:!0,component:dc}),n.a.createElement(w.b,{path:"/veiculos/laudos",exact:!0,component:Mr}),n.a.createElement(w.b,{path:"/veiculos/baixaVeiculo",exact:!0,component:en}),n.a.createElement(w.b,{path:"/veiculos/config",exact:!0,component:On}),n.a.createElement(w.b,{path:"/consultas",component:jo}),n.a.createElement(w.b,{path:"/empresas",exact:!0,component:zo}),n.a.createElement(w.b,{path:"/altContrato",exact:!0,component:Ri}),n.a.createElement(w.b,{path:"/empresas/cadastro",component:To}),n.a.createElement(w.b,{path:"/empresas/socios",component:ii}),n.a.createElement(w.b,{path:"/empresas/procuradores",component:ni}),n.a.createElement(w.b,{path:"/relatorios",component:mi}),n.a.createElement(w.b,{path:"/crv",component:ho}),n.a.createElement(w.b,{path:"/solicitacoes",exact:!0,component:Ci}),n.a.createElement(w.b,{path:"/solicitacoes/cadastro",exact:!0,component:ga}),n.a.createElement(w.b,{path:"/solicitacoes/altDados",exact:!0,component:ja}),n.a.createElement(w.b,{path:"/solicitacoes/seguros",exact:!0,component:Va}),n.a.createElement(w.b,{path:"/solicitacoes/compartilhamento",exact:!0,component:dc}),n.a.createElement(w.b,{path:"/solicitacoes/baixaVeiculo",exact:!0,component:en}),n.a.createElement(w.b,{path:"/solicitacoes/laudos",exact:!0,component:Mr}),n.a.createElement(w.b,{path:"/solicitacoes/altContrato",exact:!0,component:Ri}),n.a.createElement(w.b,{path:"/solicitacoes/socios",exact:!0,component:ii}),n.a.createElement(w.b,{path:"/solicitacoes/procuradores",exact:!0,component:ni}),n.a.createElement(w.b,{path:"/userAuth",exact:!0,component:Xi}),n.a.createElement(w.b,{path:"/editAccount",exact:!0,component:nc}),n.a.createElement(w.b,{path:"/avisos",exact:!0,component:zc}),n.a.createElement(w.b,{path:"/parametros"},"admin"===t.role?n.a.createElement(En,null):n.a.createElement(w.a,{to:"/"})),n.a.createElement(w.b,{path:"/users"},"admin"===t.role?n.a.createElement(tc,null):n.a.createElement(w.a,{to:"/"})))},qc=a(826);var Rc=Object(l.c)((function(e){return Object(v.a)({},e)}))((function(e){var t=re("loggedIn").length>0,a=e.user;return t?n.a.createElement("div",{className:"app"},n.a.createElement(qc.a,{maxWidth:"lg",style:{minHeight:"100vh"}},n.a.createElement(x.a,null,n.a.createElement($n,null),n.a.createElement(Mc,{user:a})),n.a.createElement(Xn,null))):n.a.createElement(Xi,null)})),Vc=Object(c.a)(u.a,f.a,p.a)(c.e)(E,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var Gc=function(){return n.a.createElement(l.a,{store:Vc},n.a.createElement(Rc,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(Gc,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[517,1,2]]]);
//# sourceMappingURL=main.3d778e69.chunk.js.map