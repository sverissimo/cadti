(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{126:function(e,a,t){},246:function(e,a){},316:function(e,a,t){e.exports=t(474)},329:function(e,a,t){},332:function(e,a,t){},379:function(e,a){},382:function(e,a,t){},384:function(e,a){},385:function(e,a){},474:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(21),i=t.n(o),l=t(53),s=t(49),c=t(55),d=t(278),u=t.n(d),p=t(279),m=t.n(p),f=t(280),g=t(10),h=t(23),b=t(14),v={},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,a=arguments.length>1?arguments[1]:void 0,t=a.type,r=a.payload;switch(t){case"GET_DATA":return Object(b.a)({},e,{},r);case"INSERT_DATA":var n=r.collection,o=r.data;if(e[n]&&o){var i=Object(h.a)(e[n]);return o.forEach((function(e){i.unshift(e)})),Object(b.a)({},e,Object(g.a)({},n,i))}return e;case"UPDATE_DATA":var l=r.collection,s=r.data,c=r.id;if(e[l]&&s){var d=e[l].map((function(e){return s.forEach((function(a){e[c]===a[c]&&(e=a)})),e}));return console.log(Object(g.a)({},l,d)),Object(b.a)({},e,Object(g.a)({},l,d))}return e;case"UPDATE_COLLECTION":var u=r.data,p=r.collection;return console.log(r),Object(b.a)({},e,Object(g.a)({},p,u));case"REMOVE_FROM_INSURANCE":var m=r.apolice,f=r.placaIndex,x=r.vehicleIndex;if(e.seguros){var E=Object(h.a)(e.seguros),S=E.find((function(e){return e.apolice===m})),y=E.findIndex((function(e){return e.apolice===m}));return S.placas.splice(f,1),S.veiculos.splice(x,1),E[y]=S,console.log(E),Object(b.a)({},e,{seguros:E})}return e;case"DELETE_ONE":var w=r.tablePK,k=r.collection;if(e[k]){var C=r.id,O=Object(h.a)(e[k]);console.log(C,k),"seguros"===k||k.match("Docs")||(C=Number(C)),console.log(C);var j=O.find((function(e){return e[w]===C})),I=O.findIndex((function(e){return e===j}));return O.splice(I,1),Object(b.a)({},e,Object(g.a)({},k,O))}return e;case"SET_COLOR":return Object(b.a)({},e,{setColor:a.payload});case"LOADING":return Object(b.a)({},e,{loading:a.payload});default:return e}},E=Object(s.c)({data:x}),S=t(281),y=t(58),w=t(512),k=t(217),C=t(218),O=t(104),j=t(199),I=t(513),D=t(158),A=t.n(D),N=(t(329),Object(S.a)((function(e){return{toolbar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbarTitle:{flex:1},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto",backgroundColor:"#0398c1",color:"white",borderBottom:"solid 3px #fff"},toolbarLink:{padding:e.spacing(1),flexShrink:0},mainFeaturedPost:{position:"relative",backgroundColor:e.palette.grey[800],color:e.palette.common.white,marginBottom:e.spacing(4),backgroundImage:"/images/bus_wallpaper.jpg",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},overlay:{position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"rgba(0,0,0,.3)"},mainFeaturedPostContent:Object(g.a)({position:"relative",padding:e.spacing(3)},e.breakpoints.up("md"),{padding:e.spacing(6),paddingRight:0}),mainGrid:{marginTop:e.spacing(3)},card:{display:"flex"},cardDetails:{flex:1},cardMedia:{width:160},markdown:Object(b.a)({},e.typography.body2,{padding:e.spacing(3,0)}),sidebarAboutBox:{padding:e.spacing(2),backgroundColor:e.palette.grey[200]},sidebarSection:{marginTop:e.spacing(3)},footer:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(6,0)}}}))),z=[{title:"P\xe1gina Inicial",link:"/"},{title:"Certid\xf5es",link:"/certidoes"},{title:"Consultas",link:"/consultas"},{title:"Ve\xedculos",link:"/veiculos"},{title:"Empresas",link:"/empresasHome"},{title:"Fale Conosco",link:"/faleConosco"}],F=function(){var e=Object(r.useState)(document.location.pathname),a=Object(y.a)(e,2),t=a[0],o=a[1],i=N();return n.a.createElement(n.a.Fragment,null,n.a.createElement(w.a,null),n.a.createElement(k.a,{className:i.toolbar},n.a.createElement(C.a,{size:"small"},"Criar usu\xe1rio"),n.a.createElement(O.a,{component:"h2",variant:"h6",color:"inherit",align:"center",noWrap:!0,className:i.toolbarTitle},"Seinfra - Subsecretaria de Transportes e Mobilidade - MG"),n.a.createElement(j.a,null,n.a.createElement(A.a,null)),n.a.createElement(C.a,{variant:"outlined",size:"small"},"Fazer login")),n.a.createElement(k.a,{component:"nav",variant:"dense",className:i.toolbarSecondary},z.map((function(e,a){return n.a.createElement(I.a,{component:l.b,to:e.link,key:a,color:"inherit",noWrap:!0,variant:"body2",href:"",className:i.toolbarLink,onClick:function(){return o(e.link)}},t===e.link?n.a.createElement("strong",null," ",e.title," "):e.title)}))))},P=function(){return null},T=t(132),L=t(531),B=t(514),q=function(e){var a=e.items,t=e.tab,r=e.changeTab;return n.a.createElement(T.a,{style:{backgroundColor:"#e1f5fe"}},n.a.createElement(L.a,{value:t,indicatorColor:"primary",textColor:"primary",centered:!0,onChange:r},a.map((function(e,a){return n.a.createElement(B.a,{key:a,label:e})}))))},M=t(530),R=t(515),V=t(517),W=t(518),_=t(516),U=t(519),Y=t(270),K=(t(332),Object(S.a)((function(e){return{card:{display:"flex",fontSize:"0.5rem"},cardDetails:{flex:1,fontSize:"0.5rem"},cardMedia:{width:"120px",height:"180px"},footer:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(6,0)}}}))),H=[{title:"Ve\xedculos",date:"07/Nov",description:"Cadastre e altere os dados do ve\xedculo ou solicite sua baixa",link:"/veiculos",imageUrl:"/images/vehicles.jpg"},{title:"Empresas",date:"07/Nov",description:"Cadastre e gerencie dados de empresas, s\xf3cios e procuradores",link:"/empresasHome",imageUrl:"/images/empresas12.jpg"},{title:"Consultas",date:"03/Dez",description:"Consulte e gerencie dados de ve\xedculos, seguros e empresas",link:"/consultas",imageUrl:"/images/consultas2.jpg"}],G=function(){var e=K();return n.a.createElement(n.a.Fragment,null,n.a.createElement(w.a,null),n.a.createElement("div",{style:{minHeight:"83vh",width:"100%",height:"auto"}},n.a.createElement("main",{className:"homeMainPost"},n.a.createElement("h1",null,"SisMob - MG"),n.a.createElement("h2",null,"Sistema de Gest\xe3o da Mobilidade do Estado de Minas Gerais")),n.a.createElement(R.a,{container:!0,spacing:4,className:e.cardGrid},H.map((function(a){return n.a.createElement(R.a,{item:!0,key:a.title,xs:12,md:4},n.a.createElement(_.a,{component:"span"},n.a.createElement(l.b,{to:a.link,style:{textDecoration:"none"}},n.a.createElement(V.a,{className:e.card},n.a.createElement("div",{className:e.cardDetails},n.a.createElement(W.a,null,n.a.createElement(O.a,{component:"h3",variant:"h6"},a.title),n.a.createElement("br",null),n.a.createElement(O.a,{variant:"body2",paragraph:!0},a.description),n.a.createElement(O.a,{variant:"body2",color:"primary"},"Clique aqui para ",a.title))),n.a.createElement(Y.a,{xsDown:!0},n.a.createElement(U.a,{className:e.cardMedia,component:"img",src:a.imageUrl,title:a.title}))))))})))))},Z=(t(126),[{title:"Cadastro de Ve\xedculos",date:"07/Nov",description:"Cadastrar um novo ve\xedculo no sistema.",imageUrl:"/images/add_new.jpg",link:"/cadastro"},{title:"Altera\xe7\xe3o de dados",date:"07/Nov",description:"Alterar dados de um ve\xedculo",link:"/altDados",imageUrl:"/images/pen.png"},{title:"Seguros",date:"07/Nov",description:"Atualizar seguros e ap\xf3lices",link:"/altSeguro",imageUrl:"/images/car_insurance2.png"},{title:"Baixa",date:"07/Nov",description:"Baixa de ve\xedculos",link:"/baixaVeiculo",imageUrl:"/images/remove_doc.png"}]);function $(e){var a=e.match;return n.a.createElement("div",null,n.a.createElement("div",{className:"jumbotron"},n.a.createElement("h1",null,"Ve\xedculos"),n.a.createElement("p",null,"Selecione uma das op\xe7\xf5es abaixo.")),n.a.createElement("section",{className:"cardSection"},Z.map((function(e,t){var r=e.title,o=e.link,i=e.imageUrl,s=e.description;return n.a.createElement(l.b,{to:a.url+o,key:t,className:"card"},n.a.createElement("span",{className:"cardImage"}," ",n.a.createElement("img",{src:i,alt:"tst"})," "),n.a.createElement("div",{className:"cardText"},n.a.createElement("h3",null,r),n.a.createElement("p",null," ",s)))}))))}var J,X=t(78),Q=t(7),ee=t.n(Q),ae=t(31),te=t(32),re=t(34),ne=t(33),oe=t(35),ie=t(18),le=t.n(ie),se=t(22),ce=t.n(se),de=t(63),ue=t.n(de),pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(a,t){var r,n;return ee.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=[],n={},!(e.length>0)){t.next=5;break}return e.forEach((function(e){r.push(le.a.get("/api/".concat(e)))})),t.next=5,ee.a.awrap(Promise.all(r).then((function(e){return e.map((function(e){return ce.a.camelizeKeys(e.data)}))})).then((function(a){a.forEach((function(a,t){var r=e[t];r.includes("getFiles")&&(r=e[t].replace("getFiles/","")),Object.assign(n,Object(g.a)({},r,a))}))})));case 5:a({type:"GET_DATA",payload:n});case 6:case"end":return t.stop()}}))}},me=function(e,a){return function(t,r){var n=ce.a.camelizeKeys(e),o={collection:a,data:n},i=r().data.seguradoras;if(!i)return console.log(o),void t({type:"INSERT_DATA",payload:o});if("seguros"===a&&n[0].placas&&1===n[0].placas.length){var l=i.find((function(e){return e.id===n[0].seguradoraId})),s=n[0],d=[],u=[],p=r().data.veiculos,m=p.map((function(e){return e.apolice===s.apolice&&(e.seguradora=l.seguradora,e.dataEmissao=s.dataEmissao,e.vencimento=s.vencimento),e}));p.forEach((function(e){e.apolice===s.apolice&&(d.push(e.placa),u.push(e.veiculoId))})),s.placas=d,s.veiculos=u,s=[s];var f={data:m,collection:"veiculos"};Object(c.b)((function(){t({type:"INSERT_DATA",payload:{data:s,collection:"seguros"}}),t({type:"UPDATE_COLLECTION",payload:f})}))}else t({type:"INSERT_DATA",payload:o})}},fe=function(e,a,t){return function(r){var n=ce.a.camelizeKeys(e);r({type:"UPDATE_DATA",payload:{collection:a,data:n,id:t}})}},ge=function(e,a){return function(t){t({type:"UPDATE_COLLECTION",payload:{data:e=ce.a.camelizeKeys(e),collection:a}})}},he=function(e,a,t){return function(r){a=ce.a.camelize(a),r({type:"DELETE_ONE",payload:{id:e,tablePK:a,collection:t}})}},be=function(){return n.a.createElement("div",{style:{position:"fixed",top:"45%",right:"15%",left:"15%",height:"50%",marginBottom:"25px",marginTop:"25px",textAlign:"center",zIndex:1}},n.a.createElement("img",{src:"/images/loading.gif",alt:"",height:"60px",width:"60px"}),n.a.createElement("p",null," Carregando... "))},ve=t(350),xe=function(e,a){var t=[];t=e.map((function(e){return e.replace("getFiles/","")}));var r=function(r){function o(){return Object(ae.a)(this,o),Object(re.a)(this,Object(ne.a)(o).apply(this,arguments))}return Object(oe.a)(o,r),Object(te.a)(o,[{key:"componentDidMount",value:function(){var a,t,r=this;return ee.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=this.props.redux,t=[],e.forEach((function(e){var r=e.replace("getFiles/","");a[r]&&a[r][0]||t.push(e)})),!t[0]){n.next=6;break}return n.next=6,ee.a.awrap(this.props.getData(t));case 6:J||(J=ve()),J.on("insertVehicle",(function(e){r.props.insertData(e,"veiculos")})),J.on("insertInsurance",(function(e){r.props.insertData(e,"seguros")})),J.on("insertEmpresa",(function(e){r.props.insertData(e,"empresas")})),J.on("insertSocios",(function(e){r.props.insertData(e,"socios")})),J.on("insertProcuradores",(function(e){r.props.insertData(e,"procuradores")})),J.on("updateVehicle",(function(e){r.props.updateData(e,"veiculos","veiculoId")})),J.on("updateInsurance",(function(e){r.props.updateCollection(e,"seguros")})),J.on("updateSocios",(function(e){r.props.updateCollection(e,"socios")})),J.on("deleteOne",(function(e){var a=e.id,t=e.tablePK,n=e.collection;r.props.deleteOne(a,t,n)})),J.on("insertFiles",(function(e){var a=e.insertedObjects,t=e.collection;console.log(e),r.props.insertData(a,t)}));case 17:case"end":return n.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){J||(J=ve(":3001"));["insertVehicle","insertInsurance","insertEmpresa","insertSocios","insertFiles","insertProcuradores","updateVehicle","updateInsurance","updateSocios","deleteOne"].forEach((function(e){return J.off(e)}))}},{key:"render",value:function(){var e=this;return 0!==t.length&&t.every((function(a){return e.props.redux.hasOwnProperty(a)}))?n.a.createElement(a,this.props):n.a.createElement(be,null)}}]),o}(n.a.Component);return Object(c.c)((function(e){return{redux:Object(b.a)({},e.data)}}),(function(e){return Object(s.b)({getData:pe,insertData:me,updateData:fe,updateCollection:ge,deleteOne:he},e)}))(r)},Ee=function(e){var a=document.querySelectorAll("p"),t=document.querySelectorAll("input"),r=[],n=[],o="Favor verificar o preenchimento dos seguintes campos: ";return a&&a.forEach((function(e){if("Valor inv\xe1lido"===e.textContent||"\u2718"===e.textContent){var a=e.parentNode.querySelectorAll("label");r.push(a[0])}})),t&&t.forEach((function(e){if("date"===e.type&&!ue()(e.value,"YYYY-MM-DD",!0).isValid()){var a=e.parentNode.previousSibling;r.push(a)}})),r[0]?(r.forEach((function(e){return n.push(e.textContent)})),n.forEach((function(e){return o+=e+", "})),o=o.replace("(kg)","").replace("(cm)","").slice(0,-2)+".",e?{openAlertDialog:!0,alertType:"inputError",customMsg:o}:n):null},Se=t(274);function ye(e){var a=e.collection,t=e.datalist;return e.value.length>2&&"string"!==typeof a?n.a.createElement("datalist",{id:t},a.map((function(e,a){return n.a.createElement("option",{key:a},e[t])}))):null}var we=t(273),ke=Object(S.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"2px",marginBottom:"2px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},select:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"2px",marginBottom:"2px",background:"#fafafa",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},helperText:{margin:"2px 0",fontSize:"0.7rem"}}}));function Ce(e){var a=e.handleInput,t=e.handleBlur,o=e.form,i=e.data,l=ke(),s=l.helperText,c=function(e){var a=i[e.field];return"number"===e.type?a>e.max||a<e.min:(a&&"string"!==typeof a&&(a=a.toString()),!(!e.pattern||!a)&&null===i[e.field].match(e.pattern))},d=function(e){var a=i[e.field];return a&&"string"!==typeof a&&(a=a.toString()),a>e.max||a<e.min?"Valor inv\xe1lido":a&&null===a.match(e.pattern)?"\u2718":e.pattern&&a&&null!==a.match(e.pattern)?"\u2713":" "};return o.map((function(e,o){return n.a.createElement(r.Fragment,{key:o},n.a.createElement(we.a,{name:e.field,label:e.label,margin:e.margin,className:l.textField,onChange:a,onBlur:t,type:e.type||"",error:c(e),helperText:d(e),FormHelperTextProps:{className:s},select:e.select||!1,value:i[e.field]||"",disabled:e.disabled||!1,InputLabelProps:{className:l.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888"}},inputProps:{style:{background:e.disabled&&i.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#000",width:e.width||300,height:"7px"},value:"".concat(i[e.field]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1,SelectProps:{style:{background:e.disabled&&i.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#555",fontWeight:400,width:325,height:"44px"}}},!0===e.select&&e.options.map((function(e,a){return n.a.createElement(Se.a,{key:a,value:e},e)}))),!0===e.autoComplete&&n.a.createElement(ye,{collection:i[e.collection],datalist:e.datalist,value:i[e.field]||""}))}))}var Oe=t(272),je=t(243),Ie=t(61),De=t.n(Ie),Ae=[{field:"seguradora",label:"Seguradora",margin:"normal",autoComplete:!0,datalist:"seguradora",collection:"seguradoras"},{field:"apolice",label:"Ap\xf3lice",margin:"normal",autoComplete:!0,datalist:"apolice",collection:"seguros",maxLength:25},{type:"date",field:"dataEmissao",label:"Data de Emiss\xe3o",margin:"normal"},{type:"date",field:"vencimento",label:"Vencimento",margin:"normal"}],Ne=[[{field:"placa",label:"Placa",margin:"normal",maxLength:8,pattern:"[a-zA-Z]{3}[-]?\\d{4}"},{field:"renavam",label:"Renavam",margin:"normal",maxLength:11,pattern:"\\d{11}"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Convencional","Executivo","Leito","Semi-Leito","Urbano"]},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",datalist:"modeloChassi",autoComplete:!0,collection:"modelosChassi"},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",max:Number((new Date).getFullYear()),min:Number((new Date).getFullYear())-10},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,pattern:"\\d{5,14}",min:5e4,maxLength:14},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",datalist:"modelo",autoComplete:!0,collection:"carrocerias"},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",max:Number((new Date).getFullYear()+1),min:Number((new Date).getFullYear())-10},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,pattern:"\\d{5,14}",min:5e4,maxLength:14},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50}]].concat([Ae]).concat([[{field:"cilindros",label:"Cilindros",margin:"normal",type:"number",max:12,step:1},{field:"potencia",label:"Pot\xeancia (cv)",margin:"normal",type:"number",max:600},{field:"eixos",label:"Eixos",margin:"normal",type:"number",max:8},{field:"pneumaticos",label:"Pneum\xe1ticos",margin:"normal",type:"number",max:20},{field:"peso_dianteiro",label:"Peso Dianteiro (kg)",margin:"normal",type:"number",max:12e3},{field:"peso_traseiro",label:"Peso Traseiro (kg)",margin:"normal",type:"number",max:15e3},{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piques_poltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distancia_minima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distancia_maxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150}]]).concat([[]]).concat([[]]),ze=Object(S.a)((function(e){return{item:{color:"#000",fontSize:"0.8rem",textAlign:"left"}}}));function Fe(e){var a=e.data,t=e.equipamentos,r=e.handleCheck,o=ze().item;return n.a.createElement(R.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},t.map((function(e,t){return n.a.createElement(R.a,{item:!0,xs:12,md:4,key:t,className:o},n.a.createElement(je.a,{control:n.a.createElement(Oe.a,{checked:a[e.item],value:e.item,onChange:function(){return r(e.item)}}),label:n.a.createElement(O.a,{className:o},e.item)}))})))}function Pe(e){var a=e.close,t=e.children,r=e.title,o=e.format;return n.a.createElement("div",null,n.a.createElement("div",{style:{position:"fixed",height:"80vh",top:o?o.top:"10%",right:o?o.right:"33%",left:o?o.left:"33%",padding:"5px 0px 7px 20px",borderRadius:"15px",border:"1px solid #aaa",backgroundColor:"white",zIndex:10,boxShadow:"2px",overflowY:"auto"}},n.a.createElement("div",{className:"row"},n.a.createElement("div",null,n.a.createElement("h5",null,r))),t,n.a.createElement("div",{style:{position:"absolute",top:"0.4%",right:"0.4%"}},n.a.createElement("div",null,n.a.createElement("i",{className:"material-icons right",title:"Fechar",style:{cursor:"pointer",color:"red"},onClick:a},"close")))))}var Te=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:"6px"},title:{color:"#000",fontWeight:400,fontSize:"0.9rem",textAlign:"center"},selectEmpresa:{marginLeft:e.spacing(1),marginRight:e.spacing(1),minWidth:350,fontColor:"#bbb"},formHolder:{width:900},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)}}})),Le=function(e){var a=e.empresas,t=e.equipamentos,o=e.data,i=e.handleInput,l=e.handleBlur,s=e.handleEquipa,c=e.handleCheck,d=o.razaoSocial,u=o.activeStep,p=o.addEquipa,m=o.delegatarioCompartilhado,f=o.subtitle,g=o.selectedEmpresa,h=Te(),b=h.paper,v=h.container,x=h.title,E=h.selectEmpresa,S=h.button,w=h.formHolder,k=Object(r.useState)(!1),j=Object(y.a)(k,2),I=j[0],D=j[1],A=Ne[u];return n.a.createElement(R.a,{container:!0,direction:"row",className:v,justify:"center"},n.a.createElement(R.a,null,n.a.createElement(T.a,{className:b,style:{padding:"0 2% 0 2%"}},n.a.createElement(R.a,{container:!0,justify:"center"},0===u?n.a.createElement(R.a,{item:!0,xs:I?4:12,style:{marginBottom:"15px"}},n.a.createElement(O.a,{className:x}," Selecione a Via\xe7\xe3o"),n.a.createElement(we.a,{inputProps:{list:"razaoSocial",name:"razaoSocial",style:{textAlign:"center",fontSize:"0.8rem"}},className:E,value:d,onChange:i,onBlur:l}),n.a.createElement(ye,{collection:a,datalist:"razaoSocial",value:d})):n.a.createElement("div",{className:"formTitle"},"Cadastro de Ve\xedculo - ",d),0===u&&I&&n.a.createElement(R.a,{item:!0,xs:4,style:{marginLeft:"30px"}},n.a.createElement(O.a,{className:x}," Empresa autorizada a compartilhar"),n.a.createElement(we.a,{inputProps:{list:"razaoSocial",name:"delegatarioCompartilhado",style:{textAlign:"center",fontSize:"0.8rem"}},className:E,value:m,onChange:i,onBlur:l}),n.a.createElement(ye,{collection:a,datalist:"razaoSocial",value:m}))),0===u&&n.a.createElement(R.a,{item:!0,xs:12},n.a.createElement(je.a,{control:n.a.createElement(Oe.a,{checked:!0===I,onChange:function(){return D(!I)},value:I}),label:n.a.createElement(O.a,{style:{color:"#2979ff",fontSize:"0.7rem",float:"right"}},"Ve\xedculo Compartilhado?")}))),g?n.a.createElement(R.a,{item:!0,xs:12},u<3&&n.a.createElement(T.a,{className:b},n.a.createElement("div",{className:"formSubtitle"}," ",f[u]),n.a.createElement(Ce,{form:A,data:o,handleBlur:l,handleInput:i}),0===u&&n.a.createElement(R.a,{container:!0,justify:"center"},n.a.createElement(C.a,{variant:"outlined",size:"small",color:"primary",className:S,onClick:s},n.a.createElement(De.a,null),"Equipamentos")),p&&n.a.createElement(Pe,{close:s,title:"Equipamentos"},n.a.createElement(Fe,{equipamentos:t,close:s,handleCheck:c,data:o})))):n.a.createElement(R.a,{container:!0,justify:"center"},n.a.createElement("div",{className:w}))))},Be=t(77),qe=t(162),Me=t.n(qe),Re=t(75),Ve=t.n(Re);function We(e){var a=e.title,t=e.name,o=e.formData,i=e.handleFiles,l=e.dropDisplay,s=Object(r.useState)(),c=Object(y.a)(s,2),d=c[0],u=c[1];return Object(r.useEffect)((function(){if(o&&"object"===typeof o){var e=!0,a=!1,r=void 0;try{for(var n,i=o.entries()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var l=n.value;t===l[0]&&u(l[1].name)}}catch(s){a=!0,r=s}finally{try{e||null==i.return||i.return()}finally{if(a)throw r}}}}),[o,t]),n.a.createElement(n.a.Fragment,null,a&&n.a.createElement("p",{className:"fileInput"},a),n.a.createElement(Be.a,{onDrop:function(e){return i(e,t)}},(function(e){var a=e.getRootProps,t=e.getInputProps;return n.a.createElement("div",Object.assign({className:d?"dropBox fileAttached":"multipleDropBox"},a()),n.a.createElement("input",t()),d?n.a.createElement("div",null," ",n.a.createElement(Ve.a,{className:"icon"}),"  ",d," "):n.a.createElement("div",null," ",n.a.createElement(Me.a,{className:"icon"})," ",n.a.createElement("span",null,"  ",l)," "))})))}var _e=[{title:"CRLV do Ve\xedculo",name:"crlv"},{title:"Ap\xf3lice do Seguro",name:"apoliceDoc"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"DAE Quitada",name:"dae"},{title:"Laudo de Pesagem",name:"pesagem"},{title:"Laudo de Vistoria INMETRO",name:"inmetro"}],Ue=[{title:"Documento de Transfer\xeancia",name:"transferenciaDoc"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"DAE Quitada",name:"dae"},{title:"Laudo de Pesagem",name:"pesagem"},{title:"CRLV com nova placa",name:"newPlateDoc"}],Ye=Object(S.a)((function(e){return{root:{flexGrow:"1",margin:"5px",padding:"8px"},paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 14px 0",height:"auto",minHeight:"350px"},sendButton:{margin:"3% 0 3% 0",backgroundColor:"teal",float:"right"},text:{textAlign:"left",margin:e.spacing(2),fontSize:"0.9rem",fontWeight:"500",color:"#333"},item:{marginTop:"10px",padding:"0 5px"}}}));function Ke(e){var a,t=e.handleFiles,o=e.parentComponent,i=e.dropDisplay,l=e.formData,s=Ye(),c=s.root,d=s.paper,u=s.item;return"cadastro"===o&&(a=_e),"altDados"===o&&(a=Ue),n.a.createElement("div",null,n.a.createElement(T.a,{className:d},n.a.createElement("div",{className:"formSubtitle"}," Anexe os documentos solicitados nos campos abaixo "),n.a.createElement(R.a,{container:!0,className:c},a.map((function(e,a){var o=e.title,s=e.name;return n.a.createElement(r.Fragment,{key:a},n.a.createElement(R.a,{item:!0,xs:10,md:4,className:u},n.a.createElement(We,{title:o,name:s,formData:l,dropDisplay:i,handleFiles:t})))})))))}var He=t(120),Ge=t.n(He),Ze=t(119),$e=t.n(Ze),Je={display:"flex",justifyContent:"center",width:"100%",alignContent:"center",flexWrap:"wrap"},Xe={textAlign:"center",alignItems:"flex-start",height:"40px",border:"1px #ccc solid",padding:"7px 8px 0 8px",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px"},Qe={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},ea={verticalAlign:"middle",padding:"0 0% 0 2%"};function aa(e){var a=e.form,t=e.files,r=[];if(t){var o=!0,i=!1,l=void 0;try{for(var s,c=function(){var e=s.value;a.forEach((function(a){var t=a.name,n=a.title;t===e[0]&&r.push({label:n,fieldName:t,fileName:e[1].name})}))},d=t.entries()[Symbol.iterator]();!(o=(s=d.next()).done);o=!0)c()}catch(u){i=!0,l=u}finally{try{o||null==d.return||d.return()}finally{if(i)throw l}}}return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:Je},r.map((function(e,a){return n.a.createElement("div",{style:Xe,key:a},n.a.createElement($e.a,{style:ea}),n.a.createElement("span",{style:{verticalAlign:"middle"}}," "," ",e.label),n.a.createElement(Ge.a,{style:Qe,onClick:function(){return function(e,a){var r=t.get(e),n=window.URL.createObjectURL(r),o=document.createElement("a");o.href=n,r&&("application/pdf"===r.type||r.type.match("image/"))?(o.setAttribute("rel","noopener"),o.setAttribute("target","_blank"),o.setAttribute("title",a)):o.setAttribute("download",a),document.body.appendChild(o),o.click()}(e.fieldName,e.fileName)}}))}))))}var ta=t(163),ra=t.n(ta),na=Object(S.a)((function(e){return{paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 5px 0",height:"auto"}}}));function oa(e){var a,t=e.data,o=e.parentComponent,i=e.form,l=e.filesForm,s=e.files,c=na().paper,d=[],u={},p=[],m=[];return i.forEach((function(e){e.forEach((function(e){t.hasOwnProperty([e.field])&&(Object.assign(u,Object(g.a)({},e.field,t[e.field])),p.push(e))})),d.push(u),m.push(p),u={},p=[]})),"cadastro"===o&&(a=[{subtitle:"Detalhes do ve\xedculo",form:m[0],data:d[0]},{subtitle:"Detalhes do seguro",form:m[1],data:d[1]},{subtitle:"Informa\xe7\xf5es sobre a vistoria",form:m[2],data:d[2]}]),"altDados"===o&&(a=[{subtitle:"Detalhes do ve\xedculo",form:m[0],data:d[0]},{subtitle:"Informa\xe7\xf5es sobre a vistoria",form:m[1],data:d[1]}]),n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{className:c},n.a.createElement("div",{className:"divTable"},a.map((function(e,a){var t=e.subtitle,o=e.form,i=e.data;return n.a.createElement(r.Fragment,{key:a},n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"tHeader",colSpan:o.length},t)),n.a.createElement("tr",null,o.map((function(e,a){return n.a.createElement("th",{key:a},e.label)})))),n.a.createElement("tbody",null,n.a.createElement("tr",null,Object.values(i).map((function(e,a){return n.a.createElement("td",{className:"review",key:a},e)}))))))}))),n.a.createElement("div",{style:{margin:"30px 0 0 25px"}},n.a.createElement("h3",null," Equipamentos "),n.a.createElement("p",null,Array.isArray(t.equipamentosId)&&t.equipamentosId&&t.equipamentosId.map((function(e,a){return n.a.createElement("span",{style:{fontFamily:"Segoe UI, Tahoma, Geneva, Verdana",fontSize:"12px"},key:a},a!==t.equipamentosId.length?e+", ":e)})))),n.a.createElement("h3",{style:{margin:"30px 0 0 25px"}}," ",n.a.createElement(ra.a,{style:{verticalAlign:"middle",padding:"0 0 0 8px"}})," Documentos "),s&&n.a.createElement(aa,{form:l,files:s})))}var ia=t(533),la=t(286),sa=t.n(la);function ca(e){var a=e.links,t=e.text;return n.a.createElement(R.a,{style:{marginTop:"1%",paddingLeft:"1%"}},n.a.createElement(ia.a,{separator:"\u203a","aria-label":"breadcrumb"},n.a.createElement(l.b,{to:"/",style:{}},n.a.createElement(sa.a,{style:{verticalAlign:"middle",marginRight:"5px",paddingBottom:"3px"}}),n.a.createElement("span",{style:{fontSize:"0.8rem"}},"P\xe1gina inicial")),n.a.createElement(l.b,{color:"primary",to:a[1],style:{fontSize:"0.8rem"}},a[0]),n.a.createElement("span",{style:{fontSize:"0.8rem"}},t)))}var da=Object(S.a)((function(e){return{button:{margin:e.spacing(1),float:"right"},backButton:{margin:e.spacing(1),float:"left",color:"#333",backgroundColor:"#eee"}}}));function ua(e){var a=e.activeStep,t=e.setActiveStep,r=e.lastStep,o=e.handleSubmit,i=e.disabled,l=da(),s=l.backButton,c=l.button;return n.a.createElement("div",null,n.a.createElement(C.a,{variant:"contained",className:s,onClick:function(){return t("back")},disabled:0===a},"Voltar"),a<r?n.a.createElement(C.a,{variant:"contained",color:"primary",className:c,onClick:function(){return t("next")},disabled:i},"Avan\xe7ar"):n.a.createElement(C.a,{variant:"contained",color:"primary",className:c,onClick:function(){return o()}},"Aprovar"))}var pa=t(539),ma=t(523),fa=t(534),ga=Object(S.a)((function(e){return{root:{width:"100%",marginTop:"1%"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),padding:"1% 0 0 3%",fontWeight:500}}}));function ha(e){var a=e.activeStep,t=e.steps,r=ga();return n.a.createElement("div",{className:r.root},n.a.createElement(pa.a,{activeStep:a},t.map((function(e,a){return n.a.createElement(ma.a,Object.assign({key:e},{}),n.a.createElement(fa.a,{},e))}))))}var ba=t(2),va=t(179),xa=t(178),Ea=t(524),Sa=t(244),ya=t(540),wa=Object(S.a)((function(e){return{success:{backgroundColor:va.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:xa.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function ka(e){var a=wa(),t=e.className,o=e.message,i=(e.onClose,e.variant),l=Object(X.a)(e,["className","message","onClose","variant"]);return n.a.createElement(Ea.a,Object.assign({className:Object(ba.a)(a[i],t),"aria-describedby":"client-snackbar",message:n.a.createElement(r.Fragment,null,n.a.createElement("span",{id:"client-snackbar",className:a.message},n.a.createElement(Sa.a,null,"check"),"    ",o))},l))}function Ca(e){return n.a.createElement("div",null,n.a.createElement(ya.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.open,autoHideDuration:2e3,onClose:e.close},n.a.createElement(ka,{variant:"success",message:e.msg})))}var Oa=t(535),ja=t(528),Ia=t(526),Da=t(527),Aa=t(525);function Na(e){var a=e.open,t=e.alertType,r=e.close,o=e.confirm,i=(e.customTitle,e.customMessage),l=void 0===i?"":i,s=function(e){if("object"===typeof e)return{title:"Empresa j\xe1 cadastrada",message:"A empresa ".concat(e.razaoSocial," j\xe1 est\xe1 cadastrada no sistema com o CNPJ ").concat(e.cnpj,".")};switch(e){case"plateNotFound":return{title:"Placa n\xe3o encontrada",message:'A placa informada n\xe3o corresponde a nenhum ve\xedculo da frota da via\xe7\xe3o selecionada. Para cadastrar um novo ve\xedculo, selecione a op\xe7\xe3o Ve\xedculos => "Cadastro de Ve\xedculo" no menu acima.'};case"invalidPlate":return{title:"Placa inv\xe1lida",message:"Certifique-se de que a placa informada \xe9 uma placa v\xe1lida, com tr\xeas letras seguidas de 4 n\xfameros (ex: AAA-0000)"};case"plateExists":return{title:"Placa j\xe1 cadastrada!",message:"A placa informada j\xe1 est\xe1 cadastrada. Para atualizar seguro, alterar dados ou solicitar baixa, utilize as op\xe7\xf5es acima. "};case"invalidModel":return{title:"Modelo n\xe3o cadastrado.",message:l};case"inputError":return{title:"Preenchimento inv\xe1lido.",message:l};case"fieldsMissing":return{title:"Favor preencher todos os campos.",message:"Os campos acima s\xe3o de preenchimento obrigat\xf3rio. Certifique-se de ter preenchido todos eles."};case"invalidInsurance":return{title:"Favor verificar os dados do seguro.",message:"As informa\xe7\xf5es referentes ao seguro do ve\xedculo s\xe3o obrigat\xf3rias. Certifique-se de ter informado todas elas."};case"filesNotFound":return{title:"Arquivos n\xe3o encontrados",message:"N\xe3o h\xe1 nenhum arquivo anexado no sistema para a ".concat("Procura\xe7\xe3o"," selecionada. \n          Ao cadastrar ou atualizar a ").concat("Procura\xe7\xe3o",", certifique-se de anexar o arquivo correspondente.")};case"empresaNotFound":return{title:"Empresa n\xe3o encontrada.",message:"A empresa informada n\xe3o est\xe1 registrada no sistema. Para cadastrar uma nova empresa, utilize a op\xe7\xe3o Empresas -> Cadastrar."};case"seguradoraNotFound":return{title:"Seguradora n\xe3o encontrada.",message:"A seguradora informada n\xe3o est\xe1 registrada no sistema. Favor verificar o nome da seguradora."};case"alreadyExists":return{title:"CPF j\xe1 cadastrado.",message:"O CPF informado corresponde a um s\xf3cio j\xe1 cadastrado. \n          Para remover ou editar as informa\xe7\xf5es dos s\xf3cios, utilize a respectiva op\xe7\xe3o abaixo."};case"numberNotValid":return{title:"N\xfamero inv\xe1lido.",message:"O n\xfamero digitado n\xe3o \xe9 v\xe1lido."};case"overShared":return{title:"Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",message:"A participa\xe7\xe3o societ\xe1ria informada excede a 100%."};case"subShared":return{title:"Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",message:"A participa\xe7\xe3o societ\xe1ria informada n\xe3o soma 100%. Favor informar todos os s\xf3cios com suas respectivas participa\xe7\xf5es."};default:return null}}(t),c=s.title,d=s.message;return c&&d?n.a.createElement("div",null,n.a.createElement(Oa.a,{open:a,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(Aa.a,{id:"alert-dialog-title"},c),n.a.createElement(Ia.a,null,n.a.createElement(Da.a,{id:"alert-dialog-description"},d)),n.a.createElement(ja.a,null,n.a.createElement(C.a,{onClick:r,color:"primary"},o?"Cancelar":"Fechar"),o&&n.a.createElement(C.a,{onClick:r,color:"primary",autoFocus:!0},"Confirmar")))):null}var za=xe(["veiculos","empresas","modelosChassi","carrocerias","seguradoras","seguros","equipamentos"],function(e){function a(){var e;return Object(ae.a)(this,a),(e=Object(re.a)(this,Object(ne.a)(a).call(this))).state={activeStep:0,steps:["Dados do Ve\xedculo","Dados do seguro","Vistoria e laudos","Documentos","Revis\xe3o"],subtitle:["Informe os dados do Ve\xedculo","Informe os dados do Seguro","Preencha os campos abaixo conforme a vistoria realizada"],razaoSocial:"",frota:[],delegatarioCompartilhado:"",toastMsg:"Ve\xedculo cadastrado!",confirmToast:!1,files:[],fileNames:[],insuranceExists:!1,addEquipa:!1,openAlertDialog:!1,dropDisplay:"Clique ou arraste para anexar"},e.setActiveStep=function(a){var t,r,n,o;return ee.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(0!==e.state.activeStep){i.next=7;break}if(!e.state.frota.filter((function(a){return a.placa===e.state.placa}))[0]){i.next=7;break}return i.next=5,ee.a.awrap(e.setState({placa:""}));case 5:return e.setState({alertType:"plateExists",openAlertDialog:!0}),i.abrupt("return",null);case 7:if(!(t=e.state.errors)||!t[0]){i.next=12;break}return i.next=11,ee.a.awrap(e.setState(Object(b.a)({},e.state,{},Ee("setState"))));case 11:return i.abrupt("return");case 12:r=[],n=e.state.equipamentos,o=e.state.activeStep,"next"===a&&e.setState({activeStep:o+1}),"back"===a&&e.setState({activeStep:o-1}),"reset"===a&&e.setState({activeStep:0}),1===o&&(n.forEach((function(a){!0===e.state[a]&&r.push(a)})),r[0]?e.setState({equipamentosId:r}):e.setState({equipamentosId:[]}));case 19:case"end":return i.stop()}}))},e.handleInput=function(a){var t,r,n,o,i,l,s,c,d,u,p,m,f,v,x,E,S,y,w,k,C,O,j,I,D,A;return ee.a.async((function(N){for(;;)switch(N.prev=N.next){case 0:t=e.props.redux,r=t.veiculos,n=t.empresas,o=e.state,i=o.allInsurances,l=o.apolice,s=o.seguradora,c=o.dataEmissao,d=o.vencimento,u=a.target.name,p=a.target.value,e.setState(Object(g.a)({},u,p)),N.t0=u,N.next="razaoSocial"===N.t0?6:"placa"===N.t0?20:"apolice"===N.t0?25:40;break;case 6:if(e.setState(Object(g.a)({},u,p)),!(m=n.find((function(e){return e.razaoSocial===p})))){N.next=18;break}return f=m.razaoSocial,v=m.delegatarioId,N.next=12,ee.a.awrap(e.setState({selectedEmpresa:m,razaoSocial:f,delegatarioId:v}));case 12:p!==m.razaoSocial&&e.setState({selectedEmpresa:void 0}),x=r.filter((function(a){return a.empresa===e.state.razaoSocial})),E=i.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:x,seguros:E}),N.next=19;break;case 18:e.setState({selectedEmpresa:void 0,frota:[],placa:void 0,apolice:void 0});case 19:return N.abrupt("break",41);case 20:if("string"!==typeof p){N.next=24;break}return p=p.toLocaleUpperCase(),N.next=24,ee.a.awrap(e.setState(Object(g.a)({},u,p)));case 24:return N.abrupt("break",41);case 25:if(S=e.props.redux.seguros,y=e.state.selectedEmpresa,w=Object(h.a)(S.filter((function(e){return e.delegatarioId===y.delegatarioId}))),C=Object(b.a)({},w.find((function(e){return e[u]===p}))),O=Object(b.a)({},w.find((function(a){return a[u]===p&&a.apolice===e.state.apolice}))),"apolice"===u&&(k=C),"seguradora"===u&&(k=O),!(k&&k.dataEmissao&&k.vencimento)){N.next=34;break}return j=ue()(k.dataEmissao).format("YYYY-MM-DD"),I=k.vencimento.toString().slice(0,10),D=k.seguradora,N.next=33,ee.a.awrap(e.setState({seguradora:D,dataEmissao:j,vencimento:I,insuranceExists:k}));case 33:return N.abrupt("return");case 34:if(0!==Object.keys(k).length){N.next=39;break}return A={},Object.assign(A,{empresa:y.razaoSocial,delegatarioId:y.delegatarioId,apolice:l,seguradora:s,dataEmissao:c,vencimento:d,placas:[],veiculos:[]}),N.next=39,ee.a.awrap(e.setState({newInsurance:A,insuranceExists:!1,dataEmissao:"",vencimento:""}));case 39:return N.abrupt("break",41);case 40:case 41:case"end":return N.stop()}}))},e.getId=function(a,t,r,n,o,i,l){var s,c,d,u,p,m;return ee.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:if(c=r.filter((function(e){return e[o].toLowerCase().match(t.toLowerCase())})),""===t&&e.setState((s={},Object(g.a)(s,a,""),Object(g.a)(s,n,""),s)),!c[0]){f.next=10;break}if(d=c[0][o],u=c[0][i],""===t){f.next=8;break}return f.next=8,ee.a.awrap(e.setState((p={},Object(g.a)(p,a,d),Object(g.a)(p,n,u),p)));case 8:f.next=14;break;case 10:return f.next=12,ee.a.awrap(e.setState((m={},Object(g.a)(m,a,""),Object(g.a)(m,n,""),m)));case 12:e.setState({alertType:"invalidModel",openAlertDialog:!0,customMsg:"O modelo de ".concat(l," n\xe3o est\xe1 cadastrado no sistema.")}),document.getElementsByName(a)[0].focus();case 14:case"end":return f.stop()}}))},e.handleBlur=function(a){var t,r,n,o,i,l,s,c,d,u,p,m;return ee.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:t=e.props.redux.empresas,r=e.state,n=r.frota,o=r.modelosChassi,i=r.carrocerias,l=r.seguradoras,s=r.allInsurances,c=a.target.name,d=a.target.value,(u=Ee())?e.setState({errors:u}):e.setState({errors:void 0}),f.t0=c,f.next="modeloChassi"===f.t0?7:"modeloCarroceria"===f.t0?9:"delegatarioCompartilhado"===f.t0?11:"seguradora"===f.t0?13:20;break;case 7:return e.getId(c,d,o,"modeloChassiId","modeloChassi","id","chassi"),f.abrupt("break",21);case 9:return e.getId(c,d,i,"modeloCarroceriaId","modelo","id","carroceria"),f.abrupt("break",21);case 11:return e.getId(c,d,t,"compartilhadoId","razaoSocial","delegatarioId"),f.abrupt("break",21);case 13:return f.next=15,ee.a.awrap(e.getId(c,d,l,"seguradoraId","seguradora","id","Seguradora"));case 15:return p=[],e.state.delegatarioId&&""===e.state.seguradora&&(p=s.filter((function(a){return a.delegatarioId===e.state.delegatarioId})),e.setState({seguros:p})),e.state.delegatarioId||""===e.state.seguradora||(p=s.filter((function(a){return a.seguradora===e.state.seguradora})),e.setState({seguros:p})),e.state.delegatarioId&&""!==e.state.seguradora&&(p=s.filter((function(a){return a.delegatarioId===e.state.delegatarioId})).filter((function(a){return a.seguradora===e.state.seguradora})),e.setState({seguros:p})),f.abrupt("break",21);case 20:case 21:if("placa"!==c||"string"===typeof e.state.frota){f.next=34;break}if(7!==d.length){f.next=27;break}return m=d.replace(/(\w{3})/,"$1-"),f.next=26,ee.a.awrap(e.setState({placa:m}));case 26:d=m;case 27:if(!n.find((function(e){return e.placa===d}))){f.next=34;break}return f.next=31,ee.a.awrap(e.setState({placa:null}));case 31:d="",e.setState({alertType:"plateExists",openAlertDialog:!0}),document.getElementsByName("placa")[0].focus();case 34:case"end":return f.stop()}}))},e.handleCadastro=function(){var a,t,r,n,o,i,l,s,c,d,u,p,m,f,h,b,v,x,E,S,y,w,k,C;return ee.a.async((function(O){for(;;)switch(O.prev=O.next){case 0:if(a=e.state,t=a.anoCarroceria,r=a.equipamentosId,n=a.peso_dianteiro,o=a.peso_traseiro,i=a.poltronas,l=a.delegatarioId,s=a.compartilhadoId,c=a.seguros,d=a.modeloChassiId,u=a.modeloCarroceriaId,p=a.seguradoraId,"Ativo",m=t,f=93*Number(i)+(Number(n)+Number(o)),isNaN(f)&&(f=void 0),h={},Ne.forEach((function(a){a.forEach((function(a){for(var t in e.state)t===a.field&&Object.assign(h,Object(g.a)({},t,e.state[t]))}))})),b=h.dataEmissao,v=h.vencimento,h.delegatarioCompartilhado,h.modeloChassi,h.modeloCarroceria,h.seguradora,x=Object(X.a)(h,["dataEmissao","vencimento","delegatarioCompartilhado","modeloChassi","modeloCarroceria","seguradora"]),E={apolice:h.apolice,seguradoraId:p,delegatarioId:l},S=ue()(b,"YYYY-MM-DD",!0).isValid(),y=ue()(v,"YYYY-MM-DD",!0).isValid(),S&&(E.dataEmissao=b),y&&(E.vencimento=v),Object.assign(x,{delegatarioId:l,situacao:"Ativo",indicadorIdade:m,pbt:f,equipamentosId:r,modeloChassiId:d,modeloCarroceriaId:u}),x.delegatarioCompartilhado=s,Object.keys(x).forEach((function(e){""===x[e]&&delete x[e]})),Object.keys(E).forEach((function(e){""===E[e]&&delete E[e]})),w=ce.a.decamelizeKeys(x),k=ce.a.decamelizeKeys(E),!(C=c.filter((function(e){return e.apolice===k.apolice})))[0]){O.next=23;break}return O.next=19,ee.a.awrap(le.a.post("/api/cadastroVeiculo",w).then((function(a){var t=a.data;e.submitFiles(t)})).catch((function(e){return console.log(e)})));case 19:e.resetState(),e.toast(),O.next=33;break;case 23:if(C[0]||void 0===k.apolice||!(k.apolice.length>2)||void 0===k.seguradora_id){O.next=32;break}return O.next=26,ee.a.awrap(le.a.post("/api/cadastroVeiculo",w).then((function(a){console.log(a);var t=a.data;e.submitFiles(t)})).catch((function(e){return console.log(e)})));case 26:return O.next=28,ee.a.awrap(le.a.post("/api/cadSeguro",k).then((function(e){return console.log(e.data)})));case 28:e.resetState(),e.toast(),O.next=33;break;case 32:e.setState({alertType:"invalidInsurance",openAlertDialog:!0});case 33:case"end":return O.stop()}}))},e.handleFiles=function(a,t){var r,n;return ee.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!a||!a[0]){o.next=8;break}if(r=new FormData,n=e.state.fileNames,!(a&&a.length>0)){o.next=8;break}return n.push(Object(g.a)({},t,a[0].name)),o.next=6,ee.a.awrap(e.setState(Object(g.a)({filesNames:n},t,a[0])));case 6:_e.forEach((function(a){var t=a.name;for(var n in e.state)n.match(t)&&r.append(t,e.state[t])})),e.setState({form:r});case 8:case"end":return o.stop()}}))},e.submitFiles=function(a){var t,r,n,o,i,l,s;return ee.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=new FormData,!a||!e.state.form){c.next=22;break}for(t.append("veiculoId",a),r=!0,n=!1,o=void 0,c.prev=6,i=e.state.form.entries()[Symbol.iterator]();!(r=(l=i.next()).done);r=!0)(s=l.value)[0]&&s[1]?t.append(s[0],s[1]):t=null;c.next=14;break;case 10:c.prev=10,c.t0=c.catch(6),n=!0,o=c.t0;case 14:c.prev=14,c.prev=15,r||null==i.return||i.return();case 17:if(c.prev=17,!n){c.next=20;break}throw o;case 20:return c.finish(17);case 21:return c.finish(14);case 22:if(!t){c.next=25;break}return c.next=25,ee.a.awrap(le.a.post("/api/mongoUpload",t).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})));case 25:case"end":return c.stop()}}),null,null,[[6,10,14,22],[15,,17,21]])},e.showFiles=function(a){var t=e.state.files.filter((function(e){return e.metadata.veiculoId===a.toString()}));t[0]?e.setState({filesCollection:t,showFiles:!0,selectedVehicle:a}):(e.setState({alertType:"filesNotFound",openAlertDialog:!0}),e.setState({filesCollection:[]}))},e.resetState=function(){var a={};Ne.forEach((function(t){t.forEach((function(t){Object.keys(t).forEach((function(r){"field"===r&&e.state[t[r]]&&Object.assign(a,Object(g.a)({},t[r],void 0))}))}))})),e.setState(Object(b.a)({},a,{activeStep:0,razaoSocial:"",selectedEmpresa:void 0,frota:[],delegatarioCompartilhado:"",files:[],fileNames:[],insuranceExists:!1,form:void 0}))},e.handleCheck=function(a){return e.setState(Object(b.a)({},e.state,Object(g.a)({},a,!e.state[a])))},e.handleEquipa=function(){return e.setState({addEquipa:!e.state.addEquipa})},e.toggleDialog=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.handleEquipa()},e}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentDidMount",value:function(){var e,a,t,r,n,o;return ee.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e=this.props.redux,a=e.modelosChassi,t=e.carrocerias,r=e.seguradoras,n={},!e||!e.equipamentos){i.next=7;break}return e.equipamentos.forEach((function(e){return Object.assign(n,Object(g.a)({},e.item,!1))})),o=Object.keys(n),i.next=7,ee.a.awrap(this.setState(Object(b.a)({modelosChassi:a,carrocerias:t,seguradoras:r,equipamentos:o},n,{allInsurances:this.props.redux.seguros})));case 7:document.addEventListener("keydown",this.escFunction,!1);case 8:case"end":return i.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.confirmToast,t=e.toastMsg,o=e.activeStep,i=e.openAlertDialog,l=e.alertType,s=e.steps,c=e.selectedEmpresa,d=e.placa,u=e.dropDisplay,p=e.form,m=this.props.redux,f=m.empresas,g=m.equipamentos;return n.a.createElement(r.Fragment,null,n.a.createElement(ca,{links:["Ve\xedculos","/veiculos"],text:"Cadastro de ve\xedculo"}),n.a.createElement(ha,{activeStep:o,steps:s,setActiveStep:this.setActiveStep}),n.a.createElement(Le,{data:this.state,empresas:f,equipamentos:g,handleInput:this.handleInput,handleBlur:this.handleBlur,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck,match:this.props.match}),3===o&&n.a.createElement(Ke,{parentComponent:"cadastro",handleFiles:this.handleFiles,dropDisplay:u,formData:p}),4===o&&n.a.createElement(oa,{parentComponent:"cadastro",files:this.state.form,filesForm:_e,data:this.state,form:Ne}),c&&n.a.createElement(ua,{activeStep:o,lastStep:s.length-1,handleSubmit:this.handleCadastro,setActiveStep:this.setActiveStep,disabled:"string"!==typeof d||""===d}),n.a.createElement(Ca,{open:a,close:this.toast,msg:t}),i&&n.a.createElement(Na,{open:i,close:this.toggleDialog,alertType:l,customMessage:this.state.customMsg}))}}]),a}(r.PureComponent)),Fa=[[{field:"placa",label:"Placa",margin:"normal",datalist:"placa",autoComplete:!0,collection:"frota"},{field:"delegatario",label:"Delegat\xe1rio",margin:"normal",datalist:"razaoSocial",autoComplete:!0,collection:"empresas"},{field:"compartilhado",label:"Delegat\xe1rio Compartilhado",margin:"normal",datalist:"razaoSocial",autoComplete:!0,collection:"empresas"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Convencional","Executivo","Leito","Semi-Leito","Urbano"]},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50},{field:"renavam",label:"Renavam",margin:"normal",disabled:!0},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17,disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",disabled:!0},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",disabled:!0},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",disabled:!0},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",disabled:!0},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,disabled:!0}]].concat([[{field:"pesoDianteiro",label:"Peso Dianteiro (kg)",margin:"normal",type:"number",max:12e3},{field:"pesoTraseiro",label:"Peso Traseiro (kg)",margin:"normal",type:"number",max:15e3},{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piquesPoltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150}]]).concat([[]]).concat([[]]),Pa=(t(382),Object(S.a)((function(e){return{paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1),minWidth:"700px"}}})));function Ta(e){var a=e.empresas,t=e.handleInput,r=e.handleBlur,o=e.data.razaoSocial,i=Pa().paper;return n.a.createElement("div",{className:"selectEmpresa"},n.a.createElement(T.a,{className:i,style:{padding:"0 2% 0 2%"}},n.a.createElement("div",{className:"item"},n.a.createElement("h3",null,"  Selecione a Via\xe7\xe3o "),n.a.createElement("input",{list:"razaoSocial",name:"razaoSocial",className:"selectEmpresa",value:o,onChange:t,onBlur:r}),n.a.createElement(ye,{style:{textAlign:"center",width:"500px"},collection:a,datalist:"razaoSocial",value:o}))))}var La=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1)},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)}}})),Ba=function(e){var a=e.handleInput,t=e.handleBlur,o=e.data,i=e.handleCheck,l=e.handleEquipa,s=e.altPlacaOption,c=e.showAltPlaca,d=e.empresas,u=e.equipamentos,p=o.activeStep,m=o.subtitle,f=o.placa,g=o.justificativa,h=o.selectedEmpresa,b=o.addEquipa,v=La(),x=v.paper,E=v.container,S=Fa[p];return n.a.createElement(r.Fragment,null,n.a.createElement(R.a,{container:!0,direction:"row",className:E,justify:"center"},0===p&&n.a.createElement(Ta,{data:o,empresas:d,handleInput:a,handleBlur:t}),h?n.a.createElement(R.a,{item:!0,xs:12},p<3&&n.a.createElement(T.a,{className:x},n.a.createElement("h3",{className:"formSubtitle"}," ",m[p]+(f&&0!==p?" - placa "+f:"")),n.a.createElement(Ce,{form:S,data:o,handleBlur:t,handleInput:a})),0===p&&n.a.createElement(R.a,{container:!0,justify:"center"},n.a.createElement(C.a,{variant:"outlined",size:"small",color:"primary",className:v.button,onClick:l},n.a.createElement(De.a,null),"Equipamentos")),s&&f.match("[a-zA-Z]{3}[-]?\\d{4}")&&n.a.createElement(R.a,{item:!0,xs:12},n.a.createElement(O.a,{style:{color:"#2979ff",fontWeight:500,fontSize:"0.75rem",padding:"2% 0 1% 70%",cursor:"pointer"},onClick:function(){return c()}},"\u2192 Clique aqui para alterar a placa para o formato Mercosul.")),b&&n.a.createElement(Pe,{close:l,title:"Equipamentos"},n.a.createElement(Fe,{equipamentos:u,close:l,handleCheck:i,data:o}))):n.a.createElement(R.a,{container:!0,justify:"center"},n.a.createElement("div",{className:v.formHolder}))),1===p&&n.a.createElement(R.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},n.a.createElement(R.a,null,n.a.createElement(we.a,{name:"justificativa",value:g,label:"Justificativa",type:"text",onChange:a,InputLabelProps:{shrink:!0,style:{fontWeight:600,marginBottom:"5%"}},inputProps:{style:{paddingBottom:"2%",width:"900px"}},multiline:!0,rows:4,variant:"outlined"}))))};function qa(e){var a=e.open,t=e.close,r=e.handleInput,o=e.handleFiles,i=e.updatePlate,l=e.newPlate,s=e.formData,c=e.dropDisplay,d=function(e){return!(e.length<9&&e.match("[a-zA-Z]{3}?[-]\\d{1}\\w{1}\\d{2}"))};return n.a.createElement("div",null,n.a.createElement(Oa.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-title"},n.a.createElement(Aa.a,{id:"form-dialog-title"},"Alterar Placa"),n.a.createElement(Ia.a,null,n.a.createElement(Da.a,null,"Para alterar a placa do ve\xedculo para o padr\xe3op Mercosul, digite a placa no campo abaixo e anexe o CRLV atualizado do ve\xedculo."),n.a.createElement(we.a,{autoFocus:!0,margin:"dense",name:"newPlate",label:"Nova placa",type:"text",onChange:r,value:l,error:d(l),fullWidth:!0}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(We,{title:"Nova placa",name:"newPlateDoc",formData:s,dropDisplay:c,handleFiles:o})),n.a.createElement(ja.a,null,n.a.createElement(C.a,{onClick:t,color:"primary"},"Cancelar"),n.a.createElement(C.a,{onClick:i,color:"primary",disabled:d(l)},"Confirmar"))))}var Ma=xe(["veiculos","empresas","equipamentos"],function(e){function a(){var e;return Object(ae.a)(this,a),(e=Object(re.a)(this,Object(ne.a)(a).call(this))).state={stepTitles:["Informe a placa para alterar os dados abaixo ou mantenha as informa\xe7\xf5es atuais e clique em avan\xe7ar","Altere os dados desejados abaixo e clique em avan\xe7ar","Anexe os documentos solicitados","Revis\xe3o das informa\xe7\xf5es e deferimento"],steps:["Alterar dados do Ve\xedculo","Alterar dados adicionais","Documentos","Revis\xe3o"],subtitle:["Dados do Ve\xedculo","Informa\xe7\xf5es adicionais","Anexe os arquivos solicitados","Revis\xe3o"],empresas:[],razaoSocial:"",delegatarioCompartilhado:"",frota:[],toastMsg:"Dados atualizados!",confirmToast:!1,activeStep:0,files:[],fileNames:[],openAlertDialog:!1,altPlaca:!1,newPlate:"",placa:"",addEquipa:!1,dropDisplay:"Clique ou arraste para anexar"},e.setActiveStep=function(a){var t,r;return ee.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=e.state.errors)||!t[0]){n.next=4;break}return e.setState(Object(b.a)({},e.state,{},Ee("setState"))),n.abrupt("return");case 4:r=e.state.activeStep,"next"===a&&e.setState({activeStep:r+1}),"back"===a&&e.setState({activeStep:r-1}),"reset"===a&&e.setState({activeStep:0});case 8:case"end":return n.stop()}}))},e.handleInput=function(a){var t,r,n,o,i,l,s,c,d;return ee.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e.props.redux,r=t.veiculos,n=t.empresas,o=a.target,i=o.name,l=o.value,"razaoSocial"!==i){u.next=13;break}if(!(s=n.find((function(e){return e.razaoSocial===l})))){u.next=11;break}return u.next=6,ee.a.awrap(e.setState({razaoSocial:s.razaoSocial,selectedEmpresa:s}));case 6:l!==s.razaoSocial&&e.setState({selectedEmpresa:void 0}),c=r.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:c}),u.next=13;break;case 11:e.setState({selectedEmpresa:void 0,frota:[]}),e.reset();case 13:"placa"===i&&e.state.frota&&(e.state.frota.find((function(e){return e.placa===l}))||e.state.equipamentos.forEach((function(a){return e.setState(Object(g.a)({},a,!1))}))),"newPlate"===i?"string"===typeof(d=l)&&((d=d.replace(/[a-z]/g,(function(e){return e.toUpperCase()}))).match("[A-Z]{3}[0-9]{1}[A-Z]{1}[0-9]{2}")&&(d=d.replace(/(\w{3})/,"$1-")),e.setState(Object(b.a)({},e.state,{newPlate:d}))):e.setState(Object(g.a)({},i,l));case 15:case"end":return u.stop()}}))},e.getId=function(a,t,r,n,o,i){var l,s,c,d,u,p;return ee.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(s=r.filter((function(e){return e[o].toLowerCase().match(t.toLowerCase())})),""===t&&e.setState((l={},Object(g.a)(l,a,""),Object(g.a)(l,n,""),l)),!s[0]){m.next=10;break}if(c=s[0][o],d=s[0][i],""===t){m.next=8;break}return m.next=8,ee.a.awrap(e.setState((u={},Object(g.a)(u,a,c),Object(g.a)(u,n,d),u)));case 8:m.next=14;break;case 10:return m.next=12,ee.a.awrap(e.setState((p={},Object(g.a)(p,a,""),Object(g.a)(p,n,""),p)));case 12:e.setState({openAlertDialog:!0,alertType:"empresaNotFound"}),document.getElementsByName(a)[0].focus();case 14:case"end":return m.stop()}}))},e.capitalize=function(e,a){if(a&&"string"===typeof a)return"utilizacao"===e&&("RODOVIARIO"===a&&(a="CONVENCIONAL"),"SEMI LEITO - EXECUTIVO"===a&&(a="Semi-Leito"),"Semi-Leito"!==a&&(a=a.charAt(0)+a.slice(1).toLowerCase())),"dominio"===e&&"Sim"===a&&(a="Ve\xedculo pr\xf3prio"),"dominio"===e&&"N\xe3o"===a&&(a="Possuidor"),a},e.handleBlur=function(a){var t,r,n,o,i,l,s,c,d,u,p;return ee.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:t=e.props.redux.empresas,r=e.state,n=r.frota,o=r.equipamentos,i=a.target.name,l=a.target.value,s=[],(c=Ee())?e.setState({errors:c}):e.setState({errors:void 0}),m.t0=i,m.next="compartilhado"===m.t0?7:"delegatario"===m.t0?9:12;break;case 7:return e.getId(i,l,t,"delegatarioCompartilhado","razaoSocial","delegatarioId"),m.abrupt("break",13);case 9:return m.next=11,ee.a.awrap(e.getId(i,l,t,"delegatarioId","razaoSocial","delegatarioId"));case 11:return m.abrupt("break",13);case 12:case 13:if(!("placa"===i&&l.length>2&&Array.isArray(e.state.frota))){m.next=24;break}return(d=e.state.frota.find((function(e){return"string"===typeof l?e.placa.toLowerCase().match(l.toLowerCase()):e.placa.match(l)})))&&d.equipamentosId&&(u=d.equipamentosId,o.forEach((function(e){u.toLowerCase().match(e.toLowerCase())&&s.push(e)})),s.forEach((function(a){return e.setState(Object(g.a)({},a,!0))}))),d&&d.utilizacao&&(d.utilizacao=e.capitalize("utilizacao",d.utilizacao)),d&&d.dominio&&(d.dominio=e.capitalize("dominio",d.dominio)),m.next=20,ee.a.awrap(e.setState(Object(b.a)({},d,{equipamentosId:s,disable:!0})));case 20:void 0!==d&&d.hasOwnProperty("empresa")&&e.setState({delegatario:d.empresa}),p={},n[0]&&Object.keys(n[0]).forEach((function(e){return p[e]=""})),""===e.state.placa||d||(e.setState({alertType:"plateNotFound",openAlertDialog:!0}),e.setState(Object(b.a)({},p,{disable:!1})));case 24:case"end":return m.stop()}}))},e.showAltPlaca=function(){e.setState({altPlaca:!0,title:"Altera\xe7\xe3o de placa",message:"Para alterar a placa para o novo padr\xe3o Mercosul, informe a nova placa no campo abaixo."})},e.updatePlate=function(){e.setState({placa:e.state.newPlate}),e.toggleDialog()},e.handleSubmit=function(){var a,t,r,n,o,i,l,s,c,d,u,p;return ee.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return a=e.state,t=a.poltronas,r=a.pesoDianteiro,n=a.pesoTraseiro,o=a.delegatarioId,i=a.delegatarioCompartilhado,l=a.equipamentosId,s=a.newPlate,c={},Fa.forEach((function(a){a.forEach((function(a){for(var t in e.state)t!==a.field||a.disabled||e.state[t]&&Object.assign(c,Object(g.a)({},t,e.state[t]))}))})),d=93*Number(t)+(Number(r)+Number(n)),isNaN(d)&&(d=void 0),c=Object.assign(c,{delegatarioId:o,delegatarioCompartilhado:i,pbt:d,equipamentosId:l}),c=ce.a.decamelizeKeys(c),Object.keys(c).forEach((function(e){""!==c[e]&&"null"!==c[e]&&c[e]||delete c[e]})),(u=c).placa,u.delegatario,u.compartilhado,p=Object(X.a)(u,["placa","delegatario","compartilhado"]),s&&""!==s&&(p.placa=s),"veiculo","veiculo_id",m.next=13,ee.a.awrap(le.a.put("/api/updateVehicle",{requestObject:p,table:"veiculo",tablePK:"veiculo_id",id:e.state.veiculoId}));case 13:return m.next=15,ee.a.awrap(e.submitFiles());case 15:e.setState({activeStep:0,razaoSocial:"",selectedEmpresa:void 0}),e.reset(),e.setState({}),e.toast();case 19:case"end":return m.stop()}}))},e.handleFiles=function(a,t){var r,n;return ee.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!a||!a[0]){o.next=10;break}if((r=new FormData).append("veiculoId",e.state.veiculoId),n=e.state.fileNames,!(a&&a.length>0)){o.next=10;break}return n.push(Object(g.a)({},t,a[0].name)),o.next=8,ee.a.awrap(e.setState(Object(g.a)({filesNames:n},t,a[0])));case 8:Ue.forEach((function(a){var t=a.name;for(var n in e.state)n.match(t)&&r.append(t,e.state[t])})),e.setState({form:r});case 10:case"end":return o.stop()}}))},e.submitFiles=function(){var a=e.state.form;le.a.post("/api/mongoUpload",a).then((function(e){return console.log("uploaded")})).catch((function(e){return console.log(e)}))},e.handleCheck=function(a){var t,r;return ee.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.state.equipamentos,r=[],n.next=4,ee.a.awrap(e.setState(Object(b.a)({},e.state,Object(g.a)({},a,!e.state[a]))));case 4:t.forEach((function(a){!0===e.state[a]&&r.push(a)})),r[0]?e.setState({equipamentosId:r}):e.setState({equipamentosId:[]});case 6:case"end":return n.stop()}}))},e.handleEquipa=function(){return e.setState({addEquipa:!e.state.addEquipa})},e.toggleDialog=function(){return e.setState({altPlaca:!e.state.altPlaca})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.reset=function(){Fa.forEach((function(a){return a.forEach((function(a){return e.setState(Object(g.a)({},a.field,""))}))})),e.setState({form:void 0})},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.handleEquipa()},e}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentDidMount",value:function(){var e,a,t;return ee.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=this.props.redux,a={},!e||!e.equipamentos){r.next=7;break}return e.equipamentos.forEach((function(e){return Object.assign(a,Object(g.a)({},e.item,!1))})),t=Object.keys(a),r.next=7,ee.a.awrap(this.setState(Object(b.a)({equipamentos:t},a)));case 7:document.addEventListener("keydown",this.escFunction,!1);case 8:case"end":return r.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.confirmToast,t=e.toastMsg,o=e.stepTitles,i=e.activeStep,l=e.steps,s=e.altPlaca,c=e.selectedEmpresa,d=e.openAlertDialog,u=e.alertType,p=e.dropDisplay,m=e.form,f=this.props.redux,g=f.empresas,h=f.equipamentos;return n.a.createElement(r.Fragment,null,n.a.createElement(ca,{links:["Ve\xedculos","/veiculos"],text:"Altera\xe7\xe3o de dados"}),n.a.createElement(ha,{activeStep:i,steps:l,stepTitles:o,setActiveStep:this.setActiveStep}),i<2&&n.a.createElement(Ba,{data:this.state,empresas:g,equipamentos:h,setActiveStep:this.setActiveStep,altPlacaOption:0===i,handleInput:this.handleInput,handleBlur:this.handleBlur,showAltPlaca:this.showAltPlaca,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck}),2===i&&n.a.createElement(Ke,{parentComponent:"altDados",handleFiles:this.handleFiles,dropDisplay:p,formData:m}),3===i&&n.a.createElement(oa,{parentComponent:"altDados",files:this.state.form,filesForm:Ue,data:this.state,form:Fa}),c&&n.a.createElement(ua,{activeStep:i,lastStep:l.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep}),n.a.createElement(Ca,{open:a,close:this.toast,msg:t}),n.a.createElement(qa,{open:s,close:this.toggleDialog,newPlate:this.state.newPlate,handleInput:this.handleInput,handleFiles:this.handleFiles,updatePlate:this.updatePlate,dropDisplay:p,formData:m}),d&&n.a.createElement(Na,{open:d,close:this.closeAlert,alertType:u,customMessage:this.state.customMsg}))}}]),a}(r.Component)),Ra=t(275),Va=t(164),Wa=t.n(Va),_a=[{field:"seguradora",label:"Seguradora",autoComplete:!0,datalist:"seguradora",collection:"seguradoras",maxLength:80},{field:"apolice",label:"Ap\xf3lice",autoComplete:!0,datalist:"apolice",collection:"seguros",maxLength:25},{type:"date",field:"dataEmissao",label:"Data de Emiss\xe3o"},{type:"date",field:"vencimento",label:"Vencimento"}],Ua=Object(S.a)((function(e){return{paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},title:{color:"#000",fontWeight:400,fontSize:"0.9rem",textAlign:"center",marginBottom:"20px"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},chip:{margin:e.spacing(.5)}}}));function Ya(e){var a,t=e.empresas,o=e.data,i=e.enableAddPlaca,l=e.handleInput,s=e.handleBlur,c=e.addPlate,d=e.deleteInsurance,u=e.handleFiles,p=e.handleSubmit,m=o.selectedEmpresa,f=o.placa,g=o.apolice,h=o.addedPlaca,b=o.frota,v=o.insuranceExists,x=o.newInsurance,E=o.dropDisplay,S=o.seguroFile,y=Ua(),w=y.paper,k=y.textField,O=y.chip,j=[];return v.hasOwnProperty("placas")?a=v:x&&x.placas&&(a=x),a&&(a.placas[0]&&null!==a.placas[0]&&(j=a.placas.sort()),void 0!==f&&f.length>2&&j[0]&&(j="string"===typeof f?a.placas.filter((function(e){return e.toLowerCase().match(f.toLowerCase())})).sort():a.placas.filter((function(e){return e.match(f)})).sort())),n.a.createElement(r.Fragment,null,n.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},n.a.createElement(ca,{links:["Ve\xedculos","/veiculos"],text:"Seguros"}),n.a.createElement(Ta,{data:o,empresas:t,handleInput:l,handleBlur:s}),m&&n.a.createElement(T.a,{className:w},n.a.createElement("h3",{className:"formSubtitle"},"Informe os dados do seguro."),n.a.createElement(Ce,{form:_a,data:o,handleBlur:s,handleInput:l})),m&&(a||i)&&n.a.createElement(T.a,{className:w},n.a.createElement("p",null,"Utilize as op\xe7\xf5es abaixo para filtrar, adicionar ou excluir placas desta ap\xf3lice"),n.a.createElement("div",{className:"addSeguro"},n.a.createElement("div",null,n.a.createElement(we.a,{inputProps:{name:"addedPlaca",list:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Insira a placa",className:k,value:h,onChange:l,onBlur:s}),n.a.createElement(ye,{collection:b,datalist:"placa",value:h}),n.a.createElement(C.a,{size:"small",variant:"contained",className:y.button,style:{margin:"10px 0 10px 0"},onClick:function(){return c(h)}},n.a.createElement(De.a,null)," Adicionar")),n.a.createElement("div",null,n.a.createElement(we.a,{inputProps:{name:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Filtrar",className:k,value:f||"",onChange:l,onBlur:s}),n.a.createElement(A.a,{style:{marginTop:"18px"}})),n.a.createElement(Be.a,{onDrop:u},(function(e){var a=e.getRootProps,t=e.getInputProps;return n.a.createElement("div",Object.assign({className:S?"dropBox fileAttached":"dropBox"},a()),n.a.createElement("input",t()),E.match("Clique ou")?n.a.createElement("div",null," ",n.a.createElement(Me.a,{className:"icon"})," ",n.a.createElement("span",null,"  ",E)," "):n.a.createElement("div",null," ",n.a.createElement(Ve.a,{className:"icon"}),"  ",E," ",n.a.createElement("br",null)," (clique ou arraste outro arquivo para alterar)"))}))),a&&a.placas[0]?n.a.createElement("div",{style:{margin:"15px"}},"Placas vinculadas a ap\xf3lice ",a.apolice):n.a.createElement("div",{style:{marginTop:"30px"}}),a&&g&&g.length>2&&j[0]&&j.map((function(e,a){return n.a.createElement(Ra.a,{key:a,label:e,onDelete:function(){return d(e)},className:O,color:"primary",variant:"outlined"})})))),g&&(a||i)&&n.a.createElement("div",{style:{minHeight:"60px",position:"flex"}},n.a.createElement(C.a,{size:"small",color:"primary",className:"saveButton",variant:"contained",onClick:function(){return p()},disabled:!j[0]||!S},"Salvar ",n.a.createElement("span",null,"\xa0\xa0 ")," ",n.a.createElement(Wa.a,null))))}var Ka=function(e){function a(){var e,t;Object(ae.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=Object(re.a)(this,(e=Object(ne.a)(a)).call.apply(e,[this].concat(n)))).state={addedPlaca:"",insuranceExists:{},razaoSocial:"",seguradora:"",newPlates:[],newVehicles:[],toastMsg:"Seguro atualizado!",confirmToast:!1,dropDisplay:"Clique ou arraste para anexar a ap\xf3lice"},t.checkExistance=function(e,a){var r,n,o,i,l,s,c,d,u,p,m,f,g,v,x,E,S;return ee.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:if(r=t.props.redux,n=r.seguros,o=r.veiculos,i=t.state,l=i.selectedEmpresa,s=i.newInsurance,c=Object(h.a)(n.filter((function(e){return e.delegatarioId===l.delegatarioId}))),d=o.filter((function(e){return e.delegatarioId===l.delegatarioId})),p=Object(b.a)({},c.find((function(t){return t[e]===a}))),m=Object(b.a)({},c.find((function(r){return r[e]===a&&r.apolice===t.state.apolice}))),f=[],g=[],v=[],"apolice"===e&&(u=p,f=d.filter((function(e){return e.apolice===a})),s&&s.apolice&&s.apolice!==a&&t.setState({newInsurance:!1,dataEmissao:"",vencimento:""})),"seguradora"===e&&(u=m,f=d.filter((function(e){return e.apolice===t.state.apolice}))),!(u&&u.dataEmissao&&u.vencimento)){y.next=12;break}return f.forEach((function(e){g.push(e.placa),v.push(e.veiculoId)})),u.placas=g,u.veiculos=v,x=ue()(u.dataEmissao).format("YYYY-MM-DD"),E=u.vencimento.toString().slice(0,10),S=u.seguradora,y.next=11,ee.a.awrap(t.setState({seguradora:S,dataEmissao:x,vencimento:E,insuranceExists:u}));case 11:return y.abrupt("return");case 12:0===Object.keys(u).length&&t.setState({insuranceExists:!1,dataEmissao:"",vencimento:""});case 13:case"end":return y.stop()}}))},t.handleInput=function(e){var a,r,n,o,i,l,s,c,d,u,p,m,f,h,b,v,x,E,S,y,w,k,C,O,j;return ee.a.async((function(I){for(;;)switch(I.prev=I.next){case 0:a=e.target.value,r=e.target.name,n=t.props.redux,o=n.veiculos,i=n.empresas,l=n.seguradoras,s=t.state,c=s.allInsurances,d=s.selectedEmpresa,u=s.frota,p=s.insuranceExists,m=s.apolice,f=s.dataEmissao,h=s.vencimento,b=s.newInsurance,v=s.seguradora,t.setState(Object(g.a)({},r,a)),I.t0=r,I.next="razaoSocial"===I.t0?6:"apolice"===I.t0?18:"seguradora"===I.t0?20:"addedPlaca"===I.t0?24:27;break;case 6:if(!(x=i.find((function(e){return e.razaoSocial===a})))){I.next=15;break}return I.next=10,ee.a.awrap(t.setState({razaoSocial:x.razaoSocial,selectedEmpresa:x}));case 10:a!==x.razaoSocial&&t.setState({selectedEmpresa:void 0}),E=o.filter((function(e){return e.empresa===t.state.razaoSocial})),S=c.filter((function(e){return e.empresa===t.state.razaoSocial})),t.setState({frota:E,seguros:S}),I.next=17;break;case 15:t.setState({selectedEmpresa:void 0,frota:[]}),t.clearFields();case 17:return I.abrupt("break",28);case 18:return t.checkExistance("apolice",a),I.abrupt("break",28);case 20:return t.checkExistance(r,a),(y=l.find((function(e){return e.seguradora===a})))&&t.setState({seguradoraId:y.id}),I.abrupt("break",28);case 24:return(w=u.find((function(e){return e.placa===a})))&&t.setState({vehicleFound:w}),I.abrupt("break",28);case 27:case 28:if(k=["seguradora","apolice","dataEmissao","vencimento"].every((function(e){return t.state[e]&&""!==t.state[e]})),"razaoSocial"===r||b||!k||0!==Object.keys(p).length){I.next=37;break}return C={},(j=l.find((function(e){return e.seguradora===t.state.seguradora})))&&(O=j.id),Object.assign(C,{empresa:d.razaoSocial,delegatarioId:d.delegatarioId,apolice:m,seguradora:v,seguradoraId:O,dataEmissao:f,vencimento:h,placas:[],veiculos:[]}),I.next=37,ee.a.awrap(t.setState({newInsurance:C,seguradoraId:O}));case 37:case"end":return I.stop()}}))},t.handleBlur=function(e){var a=t.props.redux.seguradoras,r=t.state,n=r.seguradora,o=r.allInsurances,i=r.selectedEmpresa,l=e.target.name;if("seguradora"===l){var s=[],c=a.find((function(e){return e.seguradora.toLowerCase().match(n.toLowerCase())}));c&&n.length>2&&t.setState({seguradora:c.seguradora}),!c&&n.length>2&&t.setState({openAlertDialog:!0,alertType:"seguradoraNotFound",seguradora:void 0}),i&&!n?(s=o.filter((function(e){return e.empresa===i.razaoSocial})),t.setState({seguros:s})):i||""===n?i&&""!==n&&(s=o.filter((function(e){return e.empresa===i.razaoSocial})).filter((function(e){return e.seguradora===n})),t.setState({seguros:s})):(s=o.filter((function(e){return e.seguradora===n})),t.setState({seguros:s}))}if("dataEmissao"===l||"vencimento"===l){var d=Ee();d?t.setState({errors:d}):t.setState({errors:void 0})}},t.addPlate=function(e){var a,r,n,o,i,l,s,c,d,u;return ee.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(a=t.state,r=a.vehicleFound,n=a.apolice,o=t.state,i=o.insuranceExists,l=o.newInsurance,e&&""!==e){p.next=4;break}return p.abrupt("return");case 4:if(void 0!==r&&!1!==r.hasOwnProperty("veiculoId")){p.next=9;break}return t.setState({openAlertDialog:!0,alertType:"plateNotFound"}),p.abrupt("return",null);case 9:if(void 0===i||!i.hasOwnProperty("placas")||!r.hasOwnProperty("placa")){p.next=14;break}if(void 0===i.placas.find((function(e){return e===r.placa}))){p.next=14;break}return t.setState({openAlertDialog:!0,alertType:"plateExists"}),p.abrupt("return",null);case 14:if(!n){p.next=33;break}if(i.placas||i.veiculos){p.next=23;break}return(s=Object(b.a)({},l)).placas.push(e),s.veiculos.push(r.veiculoId),p.next=21,ee.a.awrap(t.setState({newInsurance:s,newPlates:[].concat(Object(h.a)(t.state.newPlates),[e]),newVehicles:[].concat(Object(h.a)(t.state.newVehicles),[r.veiculoId])}));case 21:p.next=31;break;case 23:return c=Object(b.a)({},i),d=c.placas,u=c.veiculos,d.push(e),u.push(r.veiculoId),c.placas=d,c.veiculos=u,p.next=31,ee.a.awrap(t.setState({insuranceExists:c,newPlates:[].concat(Object(h.a)(t.state.newPlates),[e]),newVehicles:[].concat(Object(h.a)(t.state.newVehicles),[r.veiculoId])}));case 31:document.getElementsByName("addedPlaca")[0]&&document.getElementsByName("addedPlaca")[0].focus(),t.setState({addedPlaca:""});case 33:case"end":return p.stop()}}))},t.deleteInsurance=function(e){var a,r,n,o,i,l,s,c,d,u,p,m,f,g;return ee.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,ee.a.awrap(t.setState({vehicleFound:t.state.frota.find((function(a){return a.placa===e}))}));case 2:if(a=t.state,r=a.vehicleFound,n=a.apolice,o=Object(b.a)({},t.state.insuranceExists),i=o.placas,l=o.veiculos,!(s=Object(b.a)({},t.state.newInsurance))||!s.apolice){v.next=12;break}return c=Object(h.a)(s.placas),d=Object(h.a)(s.veiculos),u=c.indexOf(e),p=d.indexOf(r.veiculoId),s.placas.splice(u,1),s.veiculos.splice(p,1),v.next=11,ee.a.awrap(t.setState({newInsurance:s}));case 11:return v.abrupt("return");case 12:return m={table:"veiculo",column:"apolice",value:"Seguro n\xe3o cadastrado",tablePK:"veiculo_id",ids:[r.veiculoId]},v.next=15,ee.a.awrap(le.a.put("/api/updateInsurances",m));case 15:return f=i.indexOf(e),g=l.indexOf(r.veiculoId),v.next=18,ee.a.awrap(t.props.removeInsurance(n,f,g));case 18:return o.placas.splice(f,1),o.veiculos.splice(g,1),v.next=22,ee.a.awrap(t.setState({insuranceExists:o}));case 22:return v.abrupt("return");case 23:case"end":return v.stop()}}))},t.handleSubmit=function(){var e,a,r,n,o,i,l,s,c,d,u,p,m,f,g,v,x;return ee.a.async((function(E){for(;;)switch(E.prev=E.next){case 0:if(e=t.state,a=e.seguradora,r=e.insuranceExists,n=e.apolice,o=e.newVehicles,i=e.errors,l=Object(h.a)(t.state.frota),!i||!i[0]){E.next=5;break}return t.setState(Object(b.a)({},t.state,{},Ee("setState"))),E.abrupt("return");case 5:if(a&&""!==a){E.next=8;break}return t.setState({openAlertDialog:!0,alertType:"seguradoraNotFound",seguradora:void 0}),E.abrupt("return");case 8:if(r){E.next=16;break}return s=t.state,c=s.seguradoraId,d=s.apolice,u=s.dataEmissao,p=s.vencimento,m=s.selectedEmpresa,f={apolice:d,seguradora_id:c,delegatario_id:m.delegatarioId},g=ue()(u,"YYYY-MM-DD",!0).isValid(),v=ue()(p,"YYYY-MM-DD",!0).isValid(),g&&(f.data_emissao=u),v&&(f.vencimento=p),E.next=16,ee.a.awrap(le.a.post("/api/cadSeguro",f));case 16:return x={table:"veiculo",column:"apolice",value:n,tablePK:"veiculo_id",ids:o},E.next=19,ee.a.awrap(le.a.put("/api/updateInsurances",x).then((function(e){return console.log(e.data)})));case 19:l=l.map((function(e){return o.forEach((function(a){return e.veiculoId===a?(e.apolice=n,e):e})),e})),t.toast(),t.submitFiles(),t.clearFields(),t.setState({newPlates:[],newVehicles:[],frota:l});case 24:case"end":return E.stop()}}))},t.handleFiles=function(e){var a;return ee.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return(a=new FormData).append("seguro",e[0]),r.next=4,ee.a.awrap(t.setState({dropDisplay:e[0].name,seguroFile:a}));case 4:case"end":return r.stop()}}))},t.submitFiles=function(){var e,a,r,n,o,i,l,s,c,d;return ee.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(e=t.state,a=e.apolice,r=e.selectedEmpresa,n=new FormData,!t.state.seguroFile){u.next=28;break}for(n.append("fieldName","seguro"),n.append("apolice",a),n.append("empresaId",r.delegatarioId),o=!0,i=!1,l=void 0,u.prev=9,s=t.state.seguroFile.entries()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0)d=c.value,n.append(d[0],d[1]);u.next=17;break;case 13:u.prev=13,u.t0=u.catch(9),i=!0,l=u.t0;case 17:u.prev=17,u.prev=18,o||null==s.return||s.return();case 20:if(u.prev=20,!i){u.next=23;break}throw l;case 23:return u.finish(20);case 24:return u.finish(17);case 25:return u.next=27,ee.a.awrap(le.a.post("/api/empresaUpload",n).then((function(e){return console.log(e.data)})));case 27:t.toast();case 28:case"end":return u.stop()}}),null,null,[[9,13,17,25],[18,,20,24]])},t.toast=function(){return t.setState({confirmToast:!t.state.confirmToast})},t.closeAlert=function(){return t.setState({openAlertDialog:!t.state.openAlertDialog})},t.clearFields=function(){t.setState({insuranceExists:"",seguradora:"",newInsurance:"",apolice:"",dataEmissao:"",vencimento:"",seguroFile:null,dropDisplay:"Clique ou arraste para anexar a ap\xf3lice"})},t}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentDidMount",value:function(){this.setState({seguradoras:this.props.redux.seguradoras,allInsurances:this.props.redux.seguros})}},{key:"render",value:function(){var e=this,a=this.state,t=a.openAlertDialog,o=a.alertType,i=this.props.redux.empresas,l=Ae.every((function(a){return e.state.hasOwnProperty(a.field)&&""!==e.state[a.field]}));return n.a.createElement(r.Fragment,null,n.a.createElement(Ya,{data:this.state,empresas:i,enableAddPlaca:l,handleInput:this.handleInput,handleBlur:this.handleBlur,addPlate:this.addPlate,deleteInsurance:this.deleteInsurance,handleFiles:this.handleFiles,handleSubmit:this.handleSubmit}),t&&n.a.createElement(Na,{open:t,close:this.closeAlert,alertType:o,customMessage:this.state.customMsg}),n.a.createElement(Ca,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}))}}]),a}(r.Component),Ha=Object(c.c)(null,{removeInsurance:function(e,a,t){return function(r){r({type:"REMOVE_FROM_INSURANCE",payload:{apolice:e,placaIndex:a,vehicleIndex:t}})}}})(xe(["veiculos","empresas","seguradoras","seguros"],Ka)),Ga=[{field:"placa",label:"Placa",datalist:"placa",autoComplete:!0,collection:"frota",maxLength:8},{field:"renavam",label:"Renavam"},{field:"nChassi",label:"N\xfamero do Chassi",maxLength:17},{field:"delegatario",label:"Delegat\xe1rio",disabled:!0},{field:"utilizacao",label:"Utiliza\xe7\xe3o",disabled:!0},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",disabled:!0},{field:"marcaChassi",label:"Marca do Chassi",disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",disabled:!0},{field:"marcaCarroceria",label:"Marca da Carroceria",disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",disabled:!0},{type:"number",field:"indicadorIdade",label:"Ano",disabled:!0}],Za=t(537),$a=t(532),Ja=t(541),Xa=t(241),Qa=t(483),et=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1)},formHolder:{width:900},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)}}})),at=function(e){var a=e.handleInput,t=e.handleBlur,o=e.handleCheck,i=e.handleSubmit,l=e.data,s=e.empresas,c=l.razaoSocial,d=l.frota,u=l.checked,p=l.delegaTransf,m=l.justificativa,f=et(),g=f.paper,h=f.container,b=f.formHolder;return n.a.createElement(r.Fragment,null,n.a.createElement(ca,{links:["Ve\xedculos","/veiculos"],text:"Baixa de ve\xedculo"}),n.a.createElement(Ta,{data:l,empresas:s,handleInput:a,handleBlur:t}),n.a.createElement(R.a,{container:!0,direction:"row",className:h,justify:"center"},c&&d[0]&&n.a.createElement(R.a,{item:!0,xs:12},n.a.createElement(T.a,{className:g},n.a.createElement(O.a,{className:"formSubtitle"},"Informe os dados para a baixa"),n.a.createElement(Ce,{form:Ga,data:l,handleBlur:t,handleInput:a})),n.a.createElement(R.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{width:"venda"===u||"outro"===u?"1200px":"600px",marginTop:"25px"}},n.a.createElement(R.a,{item:!0,xs:u?6:12},n.a.createElement(Xa.a,{component:"fieldset"},n.a.createElement(Qa.a,{component:"legend"},"Motivo da baixa"),n.a.createElement(Ja.a,{"aria-label":"position",name:"position",onChange:o,row:!0,style:{width:"auto"},className:"radio"},n.a.createElement(je.a,{className:"radio",value:"venda",control:n.a.createElement($a.a,{color:"primary"}),label:n.a.createElement("span",{style:{fontSize:"0.8rem"}},"Venda para outra empresa do sistema"),labelPlacement:"start"}),n.a.createElement(je.a,{value:"outro",control:n.a.createElement($a.a,{color:"primary"}),label:n.a.createElement("span",{style:{fontSize:"0.8rem"}},"Outro"),labelPlacement:"start"})))),"venda"===u?n.a.createElement(R.a,{item:!0,xs:6},n.a.createElement(we.a,{inputProps:{list:"razaoSocial",name:"delegaTransf"},value:p,onChange:a,onBlur:t,label:"Informe o delegat\xe1rio para o qual foi transferido o ve\xedculo.",fullWidth:!0}),n.a.createElement(ye,{collection:s,datalist:"razaoSocial",value:p})):"outro"===u&&n.a.createElement(R.a,{item:!0,xs:6},n.a.createElement(we.a,{name:"justificativa",value:m,label:"Justificativa",type:"text",onChange:a,InputLabelProps:{shrink:!0},multiline:!0,rows:3,variant:"outlined",fullWidth:!0}))),n.a.createElement(R.a,{container:!0,direction:"row",justify:"flex-end",style:{width:"1200px"}},n.a.createElement(R.a,{item:!0,xs:11,style:{width:"1000px"}}),n.a.createElement(R.a,{item:!0,xs:1,style:{align:"right"}},n.a.createElement(C.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"10px 0 10px 0"},onClick:function(){return i()}},"Confirmar ",n.a.createElement("span",null,"\xa0\xa0 ")," ",n.a.createElement(Za.a,null))))),!c&&!d[0]&&n.a.createElement(R.a,{container:!0,justify:"center"},n.a.createElement("div",{className:b}))))},tt=xe(["veiculos","empresas"],function(e){function a(){var e,t;Object(ae.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=Object(re.a)(this,(e=Object(ne.a)(a)).call.apply(e,[this].concat(n)))).state={empresas:[],razaoSocial:"",frota:[],placa:"",form:{},check:"",delegaTransf:"",toastMsg:"Baixa realizada com sucesso!",confirmToast:!1,openDialog:!1},t.handleInput=function(e){var a,r,n,o,i,l,s,c;return ee.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(a=e.target,r=a.name,n=a.value,o=t.props.redux,i=o.veiculos,l=o.empresas,t.setState(Object(g.a)({},r,n)),"razaoSocial"!==r){d.next=15;break}if(!(s=l.find((function(e){return e.razaoSocial===n})))){d.next=12;break}return d.next=7,ee.a.awrap(t.setState({razaoSocial:s.razaoSocial,selectedEmpresa:s}));case 7:n!==s.razaoSocial&&t.setState({selectedEmpresa:void 0}),c=i.filter((function(e){return e.empresa===t.state.razaoSocial})),t.setState({frota:c}),d.next=15;break;case 12:return d.next=14,ee.a.awrap(t.setState({selectedEmpresa:void 0,frota:[]}));case 14:t.reset();case 15:case"end":return d.stop()}}))},t.handleBlur=function(e){var a,r,n,o,i,l,s;return ee.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(a=t.props.redux.empresas,r=t.state.frota,n=e.target.name,o=e.target.value,"delegaTransf"!==n){c.next=12;break}if(!(o.length>0)){c.next=12;break}if(!(i=a.find((function(e){return e.razaoSocial===o})))){c.next=11;break}return c.next=8,ee.a.awrap(t.setState({delegatarioId:i.delegatarioId,delegaTransf:i.razaoSocial,disableSubmit:!0}));case 8:c.next=12;break;case 11:t.setState({openAlertDialog:!0,alertType:"empresaNotFound",delegaTransf:""});case 12:if("placa"!==n||"string"===typeof r){c.next=19;break}if(""===o&&t.setState({disableSubmit:!0}),!(o.length>0)){c.next=19;break}return o.length>2&&(l=r.find((function(e){return"string"===typeof o?e.placa.toLowerCase().match(o.toLowerCase()):e.placa.match(o)}))),c.next=18,ee.a.awrap(t.setState(Object(b.a)({},l)));case 18:l||(s={},r[0]&&Object.keys(r[0]).forEach((function(e){return s[e]=""})),t.setState({alertType:"plateNotFound",openAlertDialog:!0,disableSubmit:!0}),t.setState(Object(b.a)({},s)));case 19:case"end":return c.stop()}}))},t.handleSubmit=function(){var e,a,r,n,o,i,l;return ee.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e=t.state,a=e.checked,r=e.delegatarioId,n=["selectedEmpresa","placa","delegatarioId"],"venda"===a&&(n.push("delegaTransf"),i=n.every((function(e){return t.state.hasOwnProperty(e)&&""!==t.state[e]})),o={delegatarioId:r,situacao:"pendente"}),"outro"===a&&(n.push("justificativa"),i=n.every((function(e){return t.state.hasOwnProperty(e)&&""!==t.state[e]})),o={situacao:"exclu\xeddo"}),i){s.next=8;break}return s.next=7,ee.a.awrap(t.setState({openAlertDialog:!0,alertType:"fieldsMissing"}));case 7:return s.abrupt("return",null);case 8:return o.apolice="Seguro n\xe3o cadastrado",l=ce.a.decamelizeKeys(o),"veiculo","veiculo_id",s.next=13,ee.a.awrap(le.a.put("/api/updateVehicle",{requestObject:l,table:"veiculo",tablePK:"veiculo_id",id:t.state.veiculoId}).then((function(){return t.toast()})).catch((function(e){return console.log(e)})));case 13:return s.next=15,ee.a.awrap(t.setState({selectedEmpresa:void 0,frota:[],razaoSocial:""}));case 15:t.reset();case 16:case"end":return s.stop()}}))},t.handleCheck=function(e){return t.setState({checked:e.target.value})},t.reset=function(){Ga.forEach((function(e){return t.setState(Object(g.a)({},e.field,""))})),t.setState({delegaTransf:"",check:"",justificativa:"",checked:!1})},t.closeAlert=function(){return t.setState({openAlertDialog:!t.state.openAlertDialog})},t.toast=function(){return t.setState({confirmToast:!t.state.confirmToast})},t}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.delegaTransf,t=e.confirmToast,o=e.toastMsg,i=e.checked,l=e.openAlertDialog,s=e.alertType;return n.a.createElement(r.Fragment,null,n.a.createElement(at,{data:this.state,empresas:this.props.redux.empresas,checked:i,delegaTransf:a,handleInput:this.handleInput,handleBlur:this.handleBlur,handleCheck:this.handleCheck,handleSubmit:this.handleSubmit}),l&&n.a.createElement(Na,{open:l,close:this.closeAlert,alertType:s}),n.a.createElement(Ca,{open:t,close:this.toast,msg:o}))}}]),a}(r.Component)),rt=t(287),nt=t(204),ot=t(288),it=t.n(ot),lt=function(e,a){if(/\d/.test(e)){var t=new Date(e).getDate()+"/"+(new Date(e).getMonth()+1)+"/"+new Date(e).getFullYear();return a&&(t+=", "+new Date(e).getHours()+":"+(new Date(e).getMinutes()<10?"0"+new Date(e).getMinutes():new Date(e).getMinutes())+"h"),t.toString()}return e},st=[{field:"placa",title:"Placa"},{field:"modeloCarroceria",title:"Modelo da Carroceria"},{field:"empresa",title:"Delegat\xe1rio"},{field:"seguradora",title:"Seguradora"},{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"vencimento",title:"Vencimento Seguro",render:function(e){return lt(e.vencimento)}},{field:"indicadorIdade",title:"Ano de Fabrica\xe7\xe3o",filtering:!1}],ct=[{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"seguradora",title:"Seguradora"},{field:"empresa",title:"Segurado"},{field:"segurados",title:"N\xfamero de ve\xedculos"},{field:"vencimento",title:"Vencimento",filtering:!1,render:function(e){return lt(e.vencimento)}}],dt=[[{field:"razaoSocial",title:"Raz\xe3o Social"},{field:"delegatarioStatus",title:"Situa\xe7\xe3o"},{field:"vencimentoContrato",title:"Data de Vencimento",filtering:!1,render:function(e){return lt(e.vencimentoContrato)}},{field:"cidade",title:"Munic\xedpio"},{field:"telefone",title:"Telefone"},{field:"frota",title:"Tamanho da frota"}]].concat([[{field:"nomeSocio",title:"Nome"},{field:"cpfSocio",title:"CPF"},{field:"razaoSocial",title:"Delegat\xe1rio(s)"},{field:"emailSocio",title:"E-mail"},{field:"share",title:"Participa\xe7\xe3o Societ\xe1ria (%)",filtering:!1}]]).concat([[{field:"nomeProcurador",title:"Nome"},{field:"cpfProcurador",title:"CPF"},{field:"emailProcurador",title:"E-mail"},{field:"telProcurador",title:"Telefone"}]]).concat([st]).concat([ct]),ut=Object(S.a)((function(e){return{paper:{padding:"40px",textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(2)}}})),pt=function(e){var a=e.tab,t=e.collection,r=e.showDetails,o=e.showFiles,i=e.del,l=ut().paper,s=["delegatarioId","socioId","procuradorId","veiculoId","apolice"][a],c=["empresas","s\xf3cios","procuradores","ve\xedculos","seguros"];return Array.isArray(t)||(t=[]),n.a.createElement(R.a,{item:!0,xs:12},n.a.createElement(T.a,{className:l},n.a.createElement(it.a,{title:"Pesquisar dados de ".concat(c[a]),columns:dt[a],data:t,options:{filtering:!0,exportButton:!0,exportFileName:c[a],exportCsv:function(e,t){!function(e,a){var t={Sheets:{data:nt.utils.json_to_sheet(e)},SheetNames:["data"]},r=nt.write(t,{bookType:"xlsx",type:"array"}),n=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});rt.saveAs(n,a+".xlsx")}(t,c[a])},actionsColumnIndex:-1,searchFieldStyle:{color:"#024"},headerStyle:{backgroundColor:"#FAFAFC",height:"5px",maxHeight:"8px"},emptyRowsWhenPaging:!1,pageSize:10},localization:{body:{emptyDataSourceMessage:"Registro n\xe3o encontrado.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},actions:[{icon:"info",iconProps:{color:"primary"},tooltip:"Mais informa\xe7\xf5es",onClick:function(e,a){return r(e,a)}},{icon:"file_copy_outline",iconProps:{color:"secondary"},tooltip:"Ver arquivos",onClick:function(e,a){return o(a[s])}}],editable:{onRowDelete:function(e){return ee.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ee.a.awrap(i(e));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))}}}),n.a.createElement("div",null)))},mt=Object(S.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"9%",width:150,fontSize:"0.6rem",fontColor:"#bbb",textAlign:"center"}}}));function ft(e){var a=e.data,t=e.tab,r=mt().textField,o=(a.veiculoId,a.laudoId,a.tableData,a.modeloChassiId,a.modeloCarroceriaId,a.delegatarioId,Object(X.a)(a,["veiculoId","laudoId","tableData","modeloChassiId","modeloCarroceriaId","delegatarioId"]));3===t&&(o.dataRegistro=lt(a.dataRegistro),o.dataEmissao=lt(a.dataEmissao),o.vencimento=lt(a.vencimento));var i,l=[];return Object.entries(o).forEach((function(e){var a=Object(y.a)(e,2),t=a[0],r=a[1];void 0===(i=Ne[0].find((function(e){return e.field===t})))&&(i=Ne[1].find((function(e){return e.field===t}))),void 0===i&&(i=Ne[2].find((function(e){return e.field===t}))),void 0!==i?i=l.push([i.label,r]):l.push([t,r])})),n.a.createElement(R.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"baseline"},l.map((function(e,a){return n.a.createElement(R.a,{key:a,item:!0,xs:6,sm:4,md:3,lg:2},n.a.createElement(we.a,{className:r,label:e[0],value:e[1]||"",InputLabelProps:{shrink:!0,style:{fontSize:"0.9rem",fontWeight:500}},inputProps:{style:{fontSize:"0.7rem"}},variant:"outlined"}))})))}var gt=function(e){return e>1024&&e<1048576?Math.round(e/1024)+" KB":e>=1048576&&e<1073741824?(e/1024/1024).toFixed(2)+" MB":e+" bytes"},ht=function(e,a,t,r){r&&"seguro"===r&&(t="empresaDocs"),le()({url:"/api/mongoDownload/?collection=".concat(t,"&id=").concat(e),method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=t,r.setAttribute("download",a),document.body.appendChild(r),r.click()})).catch((function(e){console.log(e)}))},bt=[{title:"Contrato Social",name:"contratoSocial"},{title:"Procura\xe7\xe3o",name:"procuracao"},{title:"Ap\xf3lice",name:"seguro"}],vt={marginBottom:0,display:"grid",grid:"50px / 4% 40% 25% 25%",width:"99%",margin:"auto",padding:"10px 0 0 0",justifyItems:"auto"},xt=function(e){var a=e.filesCollection,t=e.close,r=e.format,o=e.typeId,i=e.empresas,l=[],s="empresaDocs",c=bt;switch(o){case"veiculoId":s="vehicleDocs",0===(c=_e).filter((function(e){return"transferenciaDoc"===e.name})).length&&c.push({title:"Documento de Transfer\xeancia",name:"transferenciaDoc"}),0===c.filter((function(e){return"newPlateDoc"===e.name})).length&&c.push({title:"CRLV com nova placa",name:"newPlateDoc"}),0===c.filter((function(e){return"seguro"===e.name})).length&&c.push({title:"Ap\xf3lice de seguro",name:"seguro"})}a&&a[0]&&a.forEach((function(e){c.forEach((function(a){a.name===e.metadata.fieldName&&l.push(Object(b.a)({},e,{label:a.title}))}))}));return l[0]?n.a.createElement(Pe,{title:"Arquivos",close:t,format:r},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"row"},n.a.createElement("h5",null,n.a.createElement("img",{alt:"",src:"/images/folderIcon2.jpg",style:{paddingLeft:"20px",marginRight:"20px"}}))),n.a.createElement("hr",{style:{marginBottom:"5px"}}),n.a.createElement("div",{style:vt},n.a.createElement("div",null,n.a.createElement("img",{alt:"",src:"/images/multipleFiles2.png",height:"50%"})),n.a.createElement("div",null,n.a.createElement("span",{style:{fontSize:"1.2em",fontWeight:500}},"Arquivo")),n.a.createElement("div",null,n.a.createElement("span",{style:{fontSize:"1.2em",fontWeight:500}},"Data de Upload")),n.a.createElement("div",null,n.a.createElement("span",{style:{fontSize:"1.2em",fontWeight:500}},"Tamanho"))),n.a.createElement("hr",{style:{margin:"0 0 20px 0"}}),l.map((function(e,a){return n.a.createElement("div",{key:a},n.a.createElement("div",{style:vt},n.a.createElement("div",{className:"col s1"},n.a.createElement("img",{alt:"",src:"/images/genericFile.png"})),n.a.createElement("div",{className:"col s11"},n.a.createElement("span",{style:{textDecoration:"underline",cursor:"pointer",color:"blue"},onClick:function(){return ht(e.id,e.filename,s,e.metadata.fieldName)}},e.label+function(e){var a=e.metadata;switch(a.fieldName){case"procuracao":return" - "+i.find((function(e){return e.delegatarioId===Number(a.empresaId)})).razaoSocial;case"seguro":return" n\xfamero "+a.apolice;default:return""}}(e))),n.a.createElement("div",{className:"col s3"},lt(e.uploadDate,!0)),n.a.createElement("div",{className:"col s3"},gt(e.length))))})))):null},Et={top:"5%",left:"10%",right:"10%"},St=function(e){function a(){var e;return Object(ae.a)(this,a),(e=Object(re.a)(this,Object(ne.a)(a).call(this))).state={tab:0,items:["Empresas","S\xf3cios","Procuradores","Ve\xedculos","Seguros"],tablePKs:["delegatario_id","socio_id","procurador_id","veiculo_id","apolice"],dbTables:["delegatario","socios","procurador","veiculo","seguro"],options:["empresas","socios","procuradores","veiculos","seguros"],empresas:[],seguros:[],razaoSocial:"",showDetails:!1,showFiles:!1,openDialog:!1,filesCollection:[],elementDetails:"",vehicleDocs:[]},e.changeTab=function(a,t){return ee.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ee.a.awrap(e.setState({tab:t}));case 2:return a.abrupt("return");case 3:case"end":return a.stop()}}))},e.showDetails=function(a,t){var r,n,o,i,l,s,c;return ee.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.props.redux,n=e.state,o=n.options,i=n.tab,l=n.tablePKs,s=l.map((function(e){return ce.a.camelize(e)})),t&&(c=r[o[i]].find((function(e){return e[s[i]]===t[s[i]]}))),void 0===t||!c){a.next=8;break}return a.next=5,ee.a.awrap(e.setState({showDetails:!e.state.showDetails,elementDetails:c}));case 5:a.next=9;break;case 8:e.setState({showDetails:!e.state.showDetails,elementDetails:void 0});case 9:case"end":return a.stop()}}))},e.closeFiles=function(){e.setState({showFiles:!e.state.showFiles})},e.showFiles=function(a){var t=e.state.tab,r=e.props.redux,n=r.veiculos,o=r.socios,i=r.empresaDocs,l=r.vehicleDocs,s=i.filter((function(e){return e.metadata.empresaId===a.toString()})),c="empresaId";switch(t){case 1:s=i.filter((function(e){return e.metadata.empresaId===a.toString()}));var d=o.find((function(e){return e.socioId===a}));if(d){var u=[];s=i.filter((function(e){return e.metadata.empresaId===d.delegatarioId.toString()})).filter((function(e){return"contratoSocial"===e.metadata.fieldName})).forEach((function(e){e.metadata.socios&&e.metadata.socios.includes(a)&&u.push(e)})),s=u,console.log(s)}break;case 2:c="procuracaoId";var p=[];i.forEach((function(e){"procuracao"===e.metadata.fieldName&&e.metadata.procuradores.forEach((function(t){t===a&&p.push(e)}))})),s=p;break;case 3:c="veiculoId",s=l.filter((function(e){return e.metadata.veiculoId===a.toString()}));var m=n.find((function(e){return e.veiculoId===a}));if(m){var f=i.find((function(e){return e.metadata.apolice===m.apolice.toString()}));s.push(f)}break;case 4:s=i.filter((function(e){return e.metadata.apolice===a.toString()}))}s[0]?e.setState({filesCollection:s,showFiles:!0,typeId:c,selectedElement:a}):(e.setState({alertType:"filesNotFound",openAlertDialog:!0}),e.setState({filesCollection:[]}))},e.deleteHandler=function(a){var t=e.state,r=t.dbTables,n=t.tablePKs,o=t.tab,i=r[o],l=n[o],s=ce.a.camelize(l);le.a.delete("/api/delete?table=".concat(i,"&tablePK=").concat(l,"&id=").concat(a[s])).then((function(e){return console.log(e.data)}))},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.escFunction=function(a){27===a.keyCode&&(e.state.showDetails&&e.showDetails(),e.state.showFiles&&e.closeFiles())},e}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentDidMount",value:function(){return ee.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:document.addEventListener("keydown",this.escFunction,!1);case 1:case"end":return e.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e,a=this.state,t=a.tab,o=a.options,i=a.items,l=a.showDetails,s=a.elementDetails,c=a.showFiles,d=a.selectedElement,u=a.filesCollection,p=a.openAlertDialog,m=a.alertType,f=a.typeId,g=a.tablePKs,h=this.props.redux,b=h.empresas,v=g.map((function(e){return ce.a.camelize(e)}));return s&&l&&(e=h[o[t]].find((function(e){return e[v[t]]===s[v[t]]}))),n.a.createElement(r.Fragment,null,n.a.createElement(q,{items:i,tab:t,changeTab:this.changeTab}),n.a.createElement(pt,{tab:t,items:i,collection:this.props.redux[o[t]],showDetails:this.showDetails,showFiles:this.showFiles,del:this.deleteHandler}),l&&n.a.createElement(Pe,{close:this.showDetails,title:"Informa\xe7\xf5es sobre o ve\xedculo",format:Et},n.a.createElement(ft,{data:e||s,tab:t})),c&&n.a.createElement(xt,{tab:t,elementId:d,filesCollection:u,close:this.closeFiles,format:Et,typeId:f,empresas:b}),p&&n.a.createElement(Na,{open:p,close:this.closeAlert,alertType:m}))}}]),a}(r.Component),yt=Object(c.c)(null,{updateCollection:ge})(xe(["veiculos","empresas","socios","procuradores","seguros","seguradoras","getFiles/vehicleDocs","getFiles/empresaDocs"],St)),wt=[{field:"razaoSocial",label:"Raz\xe3o Social",maxLength:90},{field:"cnpj",label:"CNPJ",maxLength:18,pattern:/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/},{field:"inscricaoEstadual",label:"Inscri\xe7\xe3o Estadual",maxLength:13,pattern:"\\d{13}"},{field:"telefone",label:"Telefone",maxLength:20,pattern:"((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))"},{field:"email",label:"E-mail",type:"email",maxLength:60},{field:"cep",label:"CEP",maxLength:10},{field:"numero",label:"N\xfamero",type:"number",max:32e3},{field:"complemento",label:"Complemento",maxLength:20},{field:"rua",label:"Rua",maxLength:100},{field:"bairro",label:"Bairro",maxLength:40},{field:"cidade",label:"Cidade",maxLength:60},{field:"uf",label:"Estado",maxLength:2,pattern:"[A-Z]{2}"}],kt=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1),height:"auto"},title:{color:"#000",fontWeight:500,textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300,fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},dropBox:{margin:"2% 0"},dropBoxItem:{margin:"12px 0",border:"1px solid #ccc",borderRadius:"3%",height:"50px",padding:"17px",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#4169E1",backgroundColor:"#fafafa"},dropBoxItem2:{margin:"12px 0",border:"1px solid #ccc",borderRadius:"3%",height:"50px",padding:"0 1% 0 1%",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#00000",backgroundColor:"#fafafa"}}})),Ct=function(e){var a=e.handleInput,t=e.handleBlur,r=e.data,o=e.handleFiles,i=r.activeStep,l=r.stepTitles,s=r.dropDisplay,c=kt(),d=c.paper,u=c.container,p=c.title,m=c.dropBox,f=c.dropBoxItem,g=c.dropBoxItem2,h=wt;return n.a.createElement(R.a,{container:!0,direction:"row",className:u,justify:"center"},n.a.createElement(R.a,null,n.a.createElement(R.a,{item:!0,xs:12},n.a.createElement(T.a,{className:d},n.a.createElement(O.a,{className:p}," ",l[i]),n.a.createElement(Ce,{form:h,data:r,handleBlur:t,handleInput:a}),n.a.createElement(Be.a,{onDrop:o},(function(e){var a=e.getRootProps,t=e.getInputProps;return n.a.createElement(R.a,Object.assign({container:!0,justify:"center",alignItems:"center",className:m,direction:"row"},a()),n.a.createElement("input",t()),s.match("Clique ou")?n.a.createElement(R.a,{item:!0,xs:6,className:f}," ",s," "):n.a.createElement(R.a,{item:!0,xs:6,className:g}," ",n.a.createElement(Ve.a,null),"  ",s," ",n.a.createElement("br",null)," (clique ou arraste outro arquivo para alterar)"))}))))))},Ot=t(172),jt=t.n(Ot),It=t(173),Dt=t.n(It),At=[{field:"nomeSocio",label:"Nome do S\xf3cio",maxLength:90,width:190},{field:"cpfSocio",label:"CPF",maxLength:11,pattern:"\\d{11}",width:190},{field:"telSocio",label:"Telefone",maxLength:16,pattern:"((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))",width:190},{field:"emailSocio",label:"E-mail",maxLength:60,width:190},{field:"share",label:"Participa\xe7\xe3o Societ\xe1ria (%)",maxLength:5,type:"number",max:100,width:190}],Nt=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1)},title:{color:"#000",fontWeight:500,textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#bbb",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"},addButton:{marginBottom:"1%",padding:"1% 0"}}})),zt=function(e){var a=e.handleInput,t=e.handleBlur,o=e.data,i=e.addSocio,l=e.removeSocio,s=(e.handleFiles,e.enableEdit),c=e.handleEdit,d=o.activeStep,u=o.stepTitles,p=o.socios,m=Nt(),f=m.paper,g=m.container,h=m.title,b=m.iconButton,v=m.list,x=m.addButton,E=function(e){var a=o[e.field];return e.pattern&&a?null===a.match(e.pattern):a>e.max||a<e.min},S=function(e){var a=o[e.field];return a>e.max||a<e.min?"Valor inv\xe1lido":a&&null===a.match(e.pattern)?"\u2718":e.pattern&&a&&null!==a.match(e.pattern)?"\u2713":void 0};return n.a.createElement(R.a,{container:!0,direction:"row",className:g,justify:"center"},n.a.createElement(R.a,null,n.a.createElement(R.a,{item:!0,xs:12},n.a.createElement(T.a,{className:f},n.a.createElement(O.a,{className:h}," ",u[d]),At.map((function(e,i){return n.a.createElement(r.Fragment,{key:i},n.a.createElement(we.a,{name:e.field,label:e.label,margin:"normal",className:m.textField,onChange:a,onBlur:t,type:e.type||"",error:E(e),helperText:S(e),select:e.select||!1,value:o[e.field]||"",disabled:e.disabled||!1,InputLabelProps:{className:m.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.75rem",fontWeight:400,color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:e.disabled&&o.disable?"#fff":"#fafafa",height:"7px"},value:"".concat(o[e.field]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1},!0===e.select&&e.options.map((function(e,a){return n.a.createElement(Se.a,{key:a,value:e},e)}))))})),n.a.createElement(C.a,{color:"primary",className:x,onClick:i},n.a.createElement(De.a,null)," Adicionar s\xf3cio"))),p.length>0&&n.a.createElement(R.a,{container:!0,direction:"row",className:g,justify:"center",alignItems:"center"},n.a.createElement(R.a,{item:!0,xs:12},n.a.createElement(T.a,{className:f},n.a.createElement("p",{className:h},1===d?"S\xf3cios":"Procuradores"," cadastrados"),p.map((function(e,a){return n.a.createElement(R.a,{key:a},At.map((function(a,t){return n.a.createElement(r.Fragment,{key:t+1e3},n.a.createElement(we.a,{value:e[a.field]||"",name:a.field,label:a.label,className:v,disabled:"cpfSocio"===a.field||!e.edit,onChange:c,InputLabelProps:{shrink:!0,style:{fontWeight:600}}}))})),n.a.createElement(C.a,{component:"span",className:b,title:"editar",onClick:function(){return s(a)}},n.a.createElement(jt.a,null)),n.a.createElement(C.a,{className:b,color:"secondary",title:"Remover",onClick:function(){return l(a)}},n.a.createElement(Dt.a,null)))})))))))},Ft={display:"flex",justifyContent:"center",width:"100%",alignContent:"center",flexWrap:"wrap"},Pt={textAlign:"center",alignItems:"flex-start",lineHeight:"40px",border:"1px #ccc solid",padding:"0 1%",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px"},Tt={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},Lt={verticalAlign:"middle",padding:"0 0% 0 2%"};function Bt(e){var a,t=e.data.contratoSocial;t&&(a=t.get("contratoSocial")||new FormData);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:Ft},t&&n.a.createElement("div",{style:Pt},n.a.createElement($e.a,{style:Lt})," "," Contrato Social",n.a.createElement(Ge.a,{style:Tt,onClick:function(){return function(e,t){var r;"contratoSocial"===e&&(r=a);var n=window.URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.setAttribute("download",t),document.body.appendChild(o),o.click()}("contratoSocial",a.name)}}))))}var qt=t(5),Mt=t(267),Rt=t(249),Vt=t(248),Wt=t(265),_t=t(250),Ut=Object(qt.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000",fontWeight:600},body:{fontSize:14}}}))(Vt.a),Yt=Object(qt.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000"},body:{fontSize:12}}}))(Vt.a),Kt=Object(qt.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}}))(_t.a),Ht=Object(S.a)((function(e){return{root:{flexGrow:"1",padding:"1%",textAlign:"center"},title:{marginTop:"2%",fontColor:"#000",fontWeight:500,backgroundColor:"#B2DCEA"},input:{textAlign:"center"},paper:{color:e.palette.text.secondary,margin:e.spacing(2),width:"100%",padding:"2% 0 1% 0",height:"auto"},table:{marginBottom:e.spacing(2),overflowX:"auto"}}}));function Gt(e){var a=e.data,t=Ht(),o=t.title,i=t.paper,l=t.root,s=t.table,c=a.socios,d={};wt.forEach((function(e){a.hasOwnProperty([e.field])&&Object.assign(d,Object(g.a)({},e.field,a[e.field]))}));var u=[{subtitle:"Detalhes da Empresa",form:wt,data:d=[d]},{subtitle:"S\xf3cios",form:At,data:c}];return n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{className:i},n.a.createElement(R.a,{container:!0,direction:"row",className:l},u.map((function(e,a){var t=e.subtitle,i=e.form,l=e.data;return n.a.createElement(r.Fragment,{key:a},n.a.createElement("div",{style:{width:"100%",align:"left"}},n.a.createElement(O.a,{className:o}," ",t," ")),n.a.createElement("br",null),n.a.createElement(Mt.a,{className:s},n.a.createElement(Wt.a,null,n.a.createElement(Kt,null,i.map((function(e,a){return n.a.createElement(Ut,{key:a},e.label)})))),l.map((function(e,a){return n.a.createElement(Rt.a,{key:a},n.a.createElement(_t.a,null,i.map((function(a,t){return n.a.createElement(Yt,{key:t},e[a.field])}))))}))))})),n.a.createElement("h3",null," ",n.a.createElement(ra.a,{style:{verticalAlign:"middle",padding:"0 0 0 4%"}})," Documentos "),n.a.createElement(Bt,{data:a}))))}var Zt=xe(["empresas"],function(e){function a(){var e;return Object(ae.a)(this,a),(e=Object(re.a)(this,Object(ne.a)(a).call(this))).state={activeStep:0,stepTitles:["Preencha os dados da empresa","Informa\xe7\xf5es sobre os s\xf3cios","Revis\xe3o"],steps:["Dados da Empresa","S\xf3cios","Revis\xe3o"],razaoSocial:"",toastMsg:"Empresa cadastrada!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,addedSocios:[0],totalShare:0,socios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",showFiles:!1},e.setActiveStep=function(a){var t,r;return ee.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.state.activeStep,"next"===a&&e.setState({activeStep:t+1}),"back"===a&&e.setState({activeStep:t-1}),"reset"===a&&e.setState({activeStep:0}),!(r=e.state.errors)||!r[0]){n.next=9;break}return n.next=8,ee.a.awrap(e.setState(Object(b.a)({},e.state,{},Ee("setState"))));case 8:return n.abrupt("return");case 9:case"end":return n.stop()}}))},e.handleInput=function(a){var t,r,n;return ee.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:t=a.target,r=t.name,n=t.value,e.setState(Object(g.a)({},r,n));case 2:case"end":return o.stop()}}))},e.addSocio=function(){var a,t,r,n;return ee.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=e.state.socios,t={},r=0,n=0,At.forEach((function(a){""!==e.state[a.field]&&void 0!==e.state[a.field]||(r+=1)})),100!==r){o.next=7;break}return e.setState({alertType:"fieldsMissing",openAlertDialog:!0}),o.abrupt("return",null);case 7:if(At.forEach((function(a){Object.assign(t,Object(g.a)({},a.field,e.state[a.field]))})),a.push(t),a.forEach((function(e){n+=Number(e.share)})),!(n>100)){o.next=15;break}a.pop(),e.setState({alertType:"overShared",openAlertDialog:!0}),o.next=19;break;case 15:return o.next=17,ee.a.awrap(e.setState({socios:a,totalShare:n}));case 17:At.forEach((function(a){e.setState(Object(g.a)({},a.field,""))})),document.getElementsByName("nomeSocio")[0].focus();case 19:case"end":return o.stop()}}))},e.enableEdit=function(a){var t=e.state.socios;!0===t[a].edit?t[a].edit=!1:(t.forEach((function(e){return e.edit=!1})),t[a].edit=!0),e.setState({socios:t})},e.handleEdit=function(a){var t=a.target.name,r=e.state.socios,n=a.target.value;"share"===t&&(n=n.replace(",","."));var o=r.filter((function(e){return!0===e.edit}))[0],i=r.indexOf(o);o[t]=n;var l=r;l[i]=o,e.setState({filteredSocios:l})},e.removeSocio=function(a){var t=e.state.socios;t.splice(a,1),e.setState({socios:t})},e.getId=function(a,t,r,n,o,i,l){var s,c,d,u,p,m;return ee.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:if(c=r.filter((function(e){return e[o].toLowerCase().match(t.toLowerCase())})),""===t&&e.setState((s={},Object(g.a)(s,a,""),Object(g.a)(s,n,""),s)),!c[0]){f.next=10;break}if(d=c[0][o],u=c[0][i],""===t){f.next=8;break}return f.next=8,ee.a.awrap(e.setState((p={},Object(g.a)(p,a,d),Object(g.a)(p,n,u),p)));case 8:f.next=14;break;case 10:return f.next=12,ee.a.awrap(e.setState((m={},Object(g.a)(m,a,""),Object(g.a)(m,n,""),m)));case 12:alert(l+" n\xe3o cadastrado"),document.getElementsByName(a)[0].focus();case 14:case"end":return f.stop()}}))},e.handleBlur=function(a){var t,r,n,o,i,l,s;return ee.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:t=e.props.redux.empresas,r=a.target.name,n=a.target.value,(o=Ee())?e.setState({errors:o}):e.setState({errors:void 0}),c.t0=r,c.next="cnpj"===c.t0?8:"share"===c.t0?11:"numero"===c.t0?14:19;break;case 8:return(i=t.filter((function(e){return e.cnpj===n})))[0]&&(e.setState({cnpj:""}),e.setState({alertType:i[0],openAlertDialog:!0})),c.abrupt("break",20);case 11:return(n=n.replace(",","."))>100?e.setState({alertType:"overShared",openAlertDialog:!0}):(s=Number(e.state.totalShare)+Number(n),e.setState((l={},Object(g.a)(l,r,n),Object(g.a)(l,"totalShare",s),l))),c.abrupt("break",20);case 14:if(!n||n.match(/^\d+$/)){c.next=18;break}return c.next=17,ee.a.awrap(e.setState({numero:""}));case 17:e.setState({alertType:"numberNotValid",openAlertDialog:!0});case 18:case 19:return c.abrupt("break",20);case 20:case"end":return c.stop()}}))},e.handleFiles=function(a){var t=new FormData;t.append("contratoSocial",a[0]),e.setState({dropDisplay:a[0].name,contratoSocial:t})},e.handleSubmit=function(){var a,t,r,n,o,i,l,s,c,d,u,p;return ee.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return a=e.state,t=a.socios,r=a.contratoSocial,n={},o=new FormData,wt.forEach((function(a){e.state.hasOwnProperty([a.field])&&Object.assign(n,Object(g.a)({},a.field,e.state[a.field]))})),n.delegatarioStatus="Ativo",Object.entries(n).forEach((function(e){var a=Object(y.a)(e,2),t=a[0],r=a[1];r&&""!==r||delete n[t]})),t.forEach((function(e){delete e.edit,Object.entries(e).forEach((function(e){var a=Object(y.a)(e,2),r=a[0],n=a[1];n&&""!==n||delete t[r]}))})),n=ce.a.decamelizeKeys(n),t=ce.a.decamelizeKeys(t),m.next=9,ee.a.awrap(le.a.post("/api/empresaFullCad",{empresa:n,socios:t}).then((function(e){i=e.data})));case 9:if(!r){m.next=33;break}for(o.append("fieldName","contratoSocial"),o.append("empresaId",i),l=!0,s=!1,c=void 0,m.prev=15,d=r.entries()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0)p=u.value,o.append(p[0],p[1]);m.next=23;break;case 19:m.prev=19,m.t0=m.catch(15),s=!0,c=m.t0;case 23:m.prev=23,m.prev=24,l||null==d.return||d.return();case 26:if(m.prev=26,!s){m.next=29;break}throw c;case 29:return m.finish(26);case 30:return m.finish(23);case 31:return m.next=33,ee.a.awrap(le.a.post("/api/empresaUpload",o).then((function(e){return console.log("file ok.")})));case 33:e.toast(),e.resetState();case 35:case"end":return m.stop()}}),null,null,[[15,19,23,31],[24,,26,30]])},e.resetState=function(){var a={},t={};wt.forEach((function(t){Object.keys(t).forEach((function(r){"field"===r&&e.state[t[r]]&&Object.assign(a,Object(g.a)({},t[r],void 0))}))})),At.forEach((function(a){Object.keys(a).forEach((function(r){"field"===r&&e.state[a[r]]&&Object.assign(t,Object(g.a)({},a[r],void 0))}))})),e.setState(Object(b.a)({},a,{},t,{activeStep:0,razaoSocial:"",files:[],fileNames:[],addedSocios:[0],totalShare:0,socios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",showFiles:!1}))},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.showFiles=function(){return e.setState({showFiles:!0})},e.closeFiles=function(){return e.setState({showFiles:!e.state.showFiles})},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.handleEquipa()},e}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.activeStep,t=e.confirmToast,o=e.toastMsg,i=e.steps,l=e.openAlertDialog,s=e.alertType;return n.a.createElement(r.Fragment,null,n.a.createElement(ca,{links:["Empresas","/empresasHome"],text:"Cadastro de empresas"}),n.a.createElement(ha,{activeStep:a,steps:i,setActiveStep:this.setActiveStep}),0===a?n.a.createElement(Ct,{data:this.state,handleInput:this.handleInput,handleBlur:this.handleBlur,handleFiles:this.handleFiles}):1===a?n.a.createElement(zt,{data:this.state,handleInput:this.handleInput,handleBlur:this.handleBlur,addSocio:this.addSocio,removeSocio:this.removeSocio,handleFiles:this.handleFiles,enableEdit:this.enableEdit,handleEdit:this.handleEdit}):n.a.createElement(Gt,{data:this.state,showFiles:this.showFiles}),n.a.createElement(ua,{activeStep:a,lastStep:i.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep}),n.a.createElement(Ca,{open:t,close:this.toast,msg:o}),l&&n.a.createElement(Na,{open:l,close:this.closeAlert,alertType:s,customMessage:this.state.customMsg}))}}]),a}(r.Component)),$t=Object(S.a)((function(e){return{toolbar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbarTitle:{flex:1},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto"},toolbarLink:{padding:e.spacing(1),flexShrink:0},mainFeaturedPost:{position:"relative",backgroundColor:e.palette.grey[100],color:e.palette.common.white,marginBottom:e.spacing(4),backgroundImage:"/images/empresaBg2.jpg",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},overlay:{position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"rgba(0,0,0,.1)"},mainFeaturedPostContent:Object(g.a)({position:"relative",padding:e.spacing(3)},e.breakpoints.up("md"),{padding:e.spacing(6),paddingRight:0}),mainGrid:{marginTop:e.spacing(3)},card:{display:"flex"},cardDetails:{flex:1},cardMedia:{width:"120px",height:"180px"},markdown:Object(b.a)({},e.typography.body2,{padding:e.spacing(3,0)}),sidebarAboutBox:{padding:e.spacing(2),backgroundColor:e.palette.grey[200]},sidebarSection:{marginTop:e.spacing(3)},footer:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(6,0)}}})),Jt=[{title:"Cadastrar",date:"07/Nov",description:"Cadastrar uma nova empresa no sistema.",imageUrl:"/images/addCompany21.png",link:"/empresas"},{title:"S\xf3cios",date:"07/Nov",description:"Gerenciar s\xf3cios e altera\xe7\xf5es de contrato social",link:"/socios",imageUrl:"/images/socios3.png"},{title:"Procuradores",date:"07/Nov",description:"Alterar rela\xe7\xe3o de procuradores e procura\xe7\xf5es",link:"/procuradores",imageUrl:"/images/procuradores31.png"}],Xt=function(){var e=$t();return n.a.createElement(n.a.Fragment,null,n.a.createElement(w.a,null),n.a.createElement("div",{style:{minHeight:"83vh",height:"auto"}},n.a.createElement("main",null,n.a.createElement(T.a,{className:e.mainFeaturedPost},n.a.createElement("div",{style:{height:"90px",width:"100%"}},n.a.createElement("img",{src:"/images/empresasBg2.jpg",alt:"Empresas",width:"100%",height:"280px"})),n.a.createElement("div",{className:e.overlay}),n.a.createElement(R.a,{container:!0},n.a.createElement(R.a,{item:!0,md:4},n.a.createElement("div",{className:e.mainFeaturedPostContent},n.a.createElement(O.a,{component:"h1",variant:"h4",gutterBottom:!0},"Empresas"),n.a.createElement(O.a,{variant:"body1",paragraph:!0},"Selecione uma das op\xe7\xf5es abaixo."))))),n.a.createElement(R.a,{container:!0,spacing:4,className:e.cardGrid},Jt.map((function(a){return n.a.createElement(R.a,{item:!0,key:a.title,xs:12,md:4},n.a.createElement(l.b,{to:a.link,style:{textDecoration:"none"}},n.a.createElement(_.a,{component:"span"},n.a.createElement(V.a,{className:e.card},n.a.createElement("div",{className:e.cardDetails},n.a.createElement(W.a,null,n.a.createElement(O.a,{component:"h2",variant:"h6"},a.title),n.a.createElement("br",null),n.a.createElement(O.a,{variant:"body2",paragraph:!0},a.description),n.a.createElement(O.a,{variant:"body2",color:"primary"},a.title))),n.a.createElement(Y.a,{xsDown:!0},n.a.createElement(U.a,{className:e.cardMedia,component:"img",src:a.imageUrl,title:a.title}))))))}))))))},Qt=t(293),er=t.n(Qt),ar=t(294),tr=t.n(ar),rr=t(295),nr=t.n(rr),or=[{field:"nomeProcurador",label:"Nome do Procurador",maxLength:90,width:320},{field:"cpfProcurador",label:"CPF",maxLength:11,pattern:"\\d{11}"},{field:"telProcurador",label:"Telefone",type:"tel",maxLength:20,pattern:"((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))"},{field:"emailProcurador",label:"E-mail",type:"email",maxLength:60,pattern:"[a-zA-Z0-9]@([a-zA-Z0-9])?[.]([a-zA-Z0-9])",width:320}],ir=Object(qt.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000",fontWeight:600,fontSize:14},body:{fontSize:14}}}))(Vt.a),lr=Object(qt.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000"},body:{fontSize:13}}}))(Vt.a),sr=Object(qt.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}}))(_t.a),cr=Object(S.a)((function(e){return{root:{flexGrow:"1",padding:"1%",textAlign:"center"},title:{marginTop:"2%",fontColor:"#000",fontSize:"0.9rem",backgroundColor:"#B2DCEA",textAlign:"center"},input:{textAlign:"center"},paper:{color:e.palette.text.secondary,margin:e.spacing(2),width:"100%",padding:"2% 0 1% 0",height:"auto"},table:{marginBottom:e.spacing(2),overflowX:"auto"}}}));function dr(e){var a=e.procuracao,t=e.procuradores,r=cr(),o=r.title,i=r.table,l=[];return a.procuradores.forEach((function(e){var a=t.find((function(a){return a.procuradorId===e}));l.push(a)})),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{width:"100%",align:"left"}},n.a.createElement(O.a,{className:o}," Procuradores cadastrados ")),n.a.createElement(Mt.a,{className:i},n.a.createElement(Wt.a,null,n.a.createElement(sr,null,or.map((function(e,a){return n.a.createElement(ir,{key:a},e.label)})))),l.map((function(e,a){return e?n.a.createElement(Rt.a,{key:a},n.a.createElement(_t.a,null,or.map((function(a,t){return n.a.createElement(lr,{key:t},e[a.field])})))):null}))))}var ur={display:"flex",justifyContent:"center",width:"100%",alignContent:"center",flexWrap:"wrap",position:"relative"},pr={textAlign:"center",alignItems:"flex-start",justify:"space-between",lineHeight:"40px",border:"1px #ccc solid",padding:"0 1%",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px",width:180},mr={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},fr={verticalAlign:"middle",padding:"0 0% 0 2%"},gr=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1),height:"auto",backgroundColor:"#fafafa"},containerList:{display:"flex",flexWrap:"wrap",padding:e.spacing(2),height:"auto"},title:{color:"#000",textAlign:"center",fontSize:"1.1rem"},selector:{width:"380px",fontSize:"0.8rem",margin:"10px 0",textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},input:{textAlign:"center"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},paper2:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1),position:"relative"},list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#bbb",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"},addButton:{padding:"5px 10px 5px 8px",height:"40px",margin:"5px",float:"right",fontSize:"0.8rem"},dropBox:{margin:"30px 0 15px 0"},dropBoxItem:{border:"1px solid #ccc",borderRadius:"3%",height:"60px",padding:"10px 15px 0 15px",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#4169E1",backgroundColor:"#fafafa"},dropBoxItem2:{margin:"1% 0",border:"1px solid #ccc",borderRadius:"3%",height:"60px",padding:"0 1% 0 1%",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",color:"black"}}})),hr=function(e){var a=e.handleInput,t=e.redux,o=e.data,i=e.addProc,l=e.removeProc,s=e.handleFiles,c=e.getFile,d=e.plusOne,u=e.minusOne,p=o.procDisplay,m=o.selectedEmpresa,f=o.procsToAdd,g=o.selectedDocs,h=t.empresas,v=t.procuradores,x=gr(),E=x.paper,S=x.container,y=x.title,w=x.dropBox,k=x.dropBoxItem,j=x.dropBoxItem2,I=x.addButton,D=x.paper2,A=x.containerList,N=function(e){var a=o[e.field];return e.pattern&&a?null===a.match(e.pattern):a>e.max||a<e.min},z=function(e){var a=o[e.field];return a>e.max||a<e.min?"Valor inv\xe1lido":a&&null===a.match(e.pattern)?"\u2718":e.pattern&&a&&null!==a.match(e.pattern)?"\u2713":void 0};return n.a.createElement(R.a,{container:!0,direction:"row",className:S,justify:"flex-start"},n.a.createElement(Ta,{data:o,empresas:h,handleInput:a}),m&&n.a.createElement(T.a,{className:D},n.a.createElement(O.a,{className:y}," Cadastrar nova procura\xe7\xe3o "),n.a.createElement("h4",{style:{fontWeight:400,fontSize:"0.9em"}},' Se a procura\xe7\xe3o abranger mais de um procurador, clique em "+" para adicionar e anexe apenas 1 vez.'),f.map((function(e,t){return n.a.createElement(R.a,{item:!0,xs:12,key:t,style:{float:"left"}},or.map((function(e,i){return n.a.createElement(r.Fragment,{key:i},n.a.createElement(we.a,{name:e.field+t,label:e.label,margin:"normal",className:x.textField,onChange:function(e){return a(e)},type:e.type||"",error:N(e),helperText:z(e),select:e.select||!1,value:o[e.field+t]||"",disabled:e.disabled||!1,InputLabelProps:{className:x.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888"}},inputProps:{style:{background:e.disabled&&o.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#000",width:e.width||150,height:"7px"},value:"".concat(o[e.field+t]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1}),t===f.length-1&&3===i&&n.a.createElement(n.a.Fragment,null,n.a.createElement(er.a,{onClick:function(){return d()},style:{verticalAlign:"middle",position:"absolute",bottom:"136px",right:t>0?"15px":"35px",color:"#009688",fontSize:30,cursor:"pointer",zIndex:1}}),t>0&&n.a.createElement(tr.a,{onClick:function(){return u()},style:{verticalAlign:"middle",position:"absolute",bottom:"136px",right:"45px",color:"red",fontSize:30,cursor:"pointer",zIndex:1}})))})))})),n.a.createElement(R.a,{container:!0,style:{position:"relative"}},n.a.createElement(R.a,{item:!0,xs:6},n.a.createElement(Be.a,{onDrop:s},(function(e){var a=e.getRootProps,t=e.getInputProps;return n.a.createElement(R.a,Object.assign({container:!0,justify:"center",alignItems:"center",className:w,direction:"row"},a()),n.a.createElement("input",t()),p.match("Clique ou")?n.a.createElement(R.a,{item:!0,xs:6,className:k}," ",p," "):n.a.createElement(R.a,{item:!0,xs:6,className:j}," ",n.a.createElement(Ve.a,null),"  ",p," ",n.a.createElement("br",null)," (clique ou arraste outro arquivo para alterar)"))}))),n.a.createElement(R.a,{item:!0,xs:6,className:w},n.a.createElement(we.a,{name:"vencimento",label:"Vencimento",margin:"normal",className:x.textField,onChange:function(e){return a(e)},type:"date",helper:"se indeterminado, deixar em branco",value:o.vencimento||"",InputLabelProps:{className:x.textField,shrink:!0,style:{fontSize:"0.8rem",color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:"#fafafa",fontSize:"0.8rem",textAlign:"center",color:"#000",height:"9px"}},variant:"filled"})))),n.a.createElement(R.a,{container:!0,direction:"row",justify:"flex-start",style:{width:"1200px"}},n.a.createElement(R.a,{item:!0,xs:9,style:{width:"1000px"}}),n.a.createElement(R.a,{item:!0,xs:3,style:{align:"right"}},m&&n.a.createElement(C.a,{className:I,size:"small",color:"secondary",variant:"contained",onClick:i},n.a.createElement(De.a,null),"Cadastrar procura\xe7\xe3o"))),m&&g[0]&&n.a.createElement("h2",{style:{margin:"25px 0 0 15px"}},"Procura\xe7\xf5es cadastradas"),m&&!g[0]&&n.a.createElement(R.a,{item:!0,xs:12},n.a.createElement(T.a,{className:E},"Nenhum procurador cadastrado para ",m.razaoSocial)),g.length>0&&g.map((function(e,a){return n.a.createElement(R.a,{container:!0,key:.01*a,direction:"row",className:A,justify:"center",alignItems:"flex-start"},n.a.createElement(R.a,{item:!0,xs:12},n.a.createElement(T.a,{style:{padding:"10px 15px 20px 15px"}},n.a.createElement("p",{className:y},"Procura\xe7\xe3o ",e.vencimento?"com vencimento em "+((t=e.vencimento)?ue()(t).format("DD-MM-YYYY"):""):"por prazo indeterminado"),n.a.createElement(dr,{procuradores:v,procuracao:e}),n.a.createElement("div",{style:ur},n.a.createElement("span",{style:pr},n.a.createElement($e.a,{style:fr}),n.a.createElement("span",{style:{verticalAlign:"middle"}}," "," Baixar arquivo"),n.a.createElement(Ge.a,{style:mr,onClick:function(){return c(e.procuracaoId)}})),n.a.createElement("span",{style:Object(b.a)({},pr,{width:90,backgroundColor:"white",border:0,position:"absolute",right:0})},n.a.createElement(nr.a,{color:"secondary",style:mr,onClick:function(){return l(e)}}),"Apagar")))));var t})))},br={top:"15%",left:"10%",right:"10%",bottom:"15%"},vr=xe(["empresas","procuradores","procuracoes"],function(e){function a(){var e;return Object(ae.a)(this,a),(e=Object(re.a)(this,Object(ne.a)(a).call(this))).state={empresas:[],razaoSocial:"",toastMsg:"Dados atualizados!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,addedSocios:[0],totalShare:0,filteredProc:[],procDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",showFiles:!1,procuradores:[],procsToAdd:[1],procuracoesArray:[],selectedDocs:[]},e.handleInput=function(a){var t,r,n,o,i,l,s;return ee.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=a.target.name,r=a.target.value,n=Object(h.a)(e.props.redux.procuracoes),o=[],i=[],l=Object(h.a)(e.props.redux.procuradores),e.setState(Object(b.a)({},e.state,Object(g.a)({},t,r))),"razaoSocial"!==t||!Array.isArray(l)){c.next=16;break}if((n=n.filter((function(e){return e.razaoSocial===r})))[0]&&n.forEach((function(e){e.procuradores.forEach((function(e){var a=l.find((function(a){return a.procuradorId===e}));a&&o.push(a)})),i.push(o),o=[]})),e.setState({procuracoesArray:i,selectedDocs:n}),!(s=e.props.redux.empresas.find((function(e){return e.razaoSocial===r})))){c.next=15;break}return c.next=12,ee.a.awrap(e.setState({razaoSocial:s.razaoSocial,selectedEmpresa:s}));case 12:r!==s.razaoSocial&&e.setState({selectedEmpresa:void 0}),c.next=16;break;case 15:e.setState({selectedEmpresa:void 0});case 16:case"end":return c.stop()}}))},e.addProc=function(){var a,t,r,n,o,i,l,s,c,d,u,p,m,f,b,v,x,E,S,w,k,C;return ee.a.async((function(O){for(;;)switch(O.prev=O.next){case 0:if(a=e.state,t=a.selectedEmpresa,r=a.procFiles,n=a.vencimento,o=Object(h.a)(e.props.redux.procuradores),i=Object(h.a)(e.state.procsToAdd),l=Object(h.a)(e.state.selectedDocs),s=Object(h.a)(e.state.files),c=[],d={},i.forEach((function(a,t){or.forEach((function(a){Object.assign(d,Object(g.a)({},a.field,e.state[a.field+t]))}));var r=0;Object.values(d).forEach((function(e){e&&(r+=1)})),r>0&&c.push(d),r=0,d={},or.forEach((function(a){e.setState(Object(g.a)({},a.field+t,""))}))})),p=[],m=[],f=new FormData,c.forEach((function(e){(u=o.filter((function(a){return a.cpfProcurador===e.cpfProcurador}))).length>0&&u[0].hasOwnProperty("procuradorId")?m.push(u[0].procuradorId):p.push(e)})),!(p.length>0)){O.next=11;break}return p=ce.a.decamelizeKeys(p),O.next=9,ee.a.awrap(le.a.post("/api/cadProcuradores",{procuradores:p,table:"procurador",tablePK:"procurador_id"}).then((function(e){e.data.forEach((function(e){return m.push(e.procurador_id)}))})));case 9:return O.next=11,ee.a.awrap(le.a.get("/api/procuradores").then((function(a){var t=ce.a.camelizeKeys(a.data);e.setState({procuradores:t})})));case 11:return b={delegatario_id:t.delegatarioId,vencimento:n,status:"vigente",procuradores:m},Object.entries(b).forEach((function(e){var a=Object(y.a)(e,2),t=a[0],r=a[1];r&&""!==r||delete b[t]})),O.next=15,ee.a.awrap(le.a.post("/api/cadProcuracao",b).then((function(e){v=e.data[0].procuracao_id})));case 15:if(b.procuracaoId=v,!r){O.next=44;break}for(f.append("fieldName","procuracao"),f.append("empresaId",t.delegatarioId),f.append("procuracaoId",v),f.append("procuradores",m),x=!0,E=!1,S=void 0,O.prev=24,w=r.entries()[Symbol.iterator]();!(x=(k=w.next()).done);x=!0)C=k.value,f.append(C[0],C[1]);O.next=32;break;case 28:O.prev=28,O.t0=O.catch(24),E=!0,S=O.t0;case 32:O.prev=32,O.prev=33,x||null==w.return||w.return();case 35:if(O.prev=35,!E){O.next=38;break}throw S;case 38:return O.finish(35);case 39:return O.finish(32);case 40:return O.next=42,ee.a.awrap(le.a.post("/api/empresaUpload",f).then((function(e){return console.log(e.data)})));case 42:return O.next=44,ee.a.awrap(le.a.get("/api/getOneFile?collection=empresaDocs&id=".concat(v)).then((function(e){e.data[0]&&s.push(e.data[0])})));case 44:l.reverse(),l.push(b),l.reverse(),e.setState({selectedDocs:l,files:s,procDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",procsToAdd:[1],vencimento:"",procFiles:void 0}),e.toast();case 49:case"end":return O.stop()}}),null,null,[[24,28,32,40],[33,,35,39]])},e.removeProc=function(a){var t,r,n,o,i;return ee.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.state.files,r=a.procuracaoId,n=t.find((function(e){return Number(e.metadata.procuracaoId)===r})),o=Object(h.a)(e.state.selectedDocs),l.next=4,ee.a.awrap(le.a.delete("/api/delete?table=procuracao&tablePK=procuracao_id&id=".concat(r)).then((function(e){console.log(e.data)})));case 4:n&&n.hasOwnProperty("_id")&&le.a.get("/api/deleteFile/".concat(n._id)),i=o.indexOf(a),o.splice(i,1),e.setState({selectedDocs:o});case 8:case"end":return l.stop()}}))},e.handleFiles=function(a){var t=new FormData;t.append("procFile",a[0]),e.setState({procFiles:t,procDisplay:a[0].name})},e.getFile=function(a){var t=e.state.files.find((function(e){return Number(e.metadata.procuracaoId)===a}));if(t){var r=t._id,n=t.filename;ht(r,n,"empresaDocs")}else e.setState({alertType:"filesNotFound",openAlertDialog:!0})},e.showFiles=function(a){var t=e.state.files.filter((function(e){return e.metadata.cpfProcurador===a.toString()}));t[0]?e.setState({filesCollection:t,showFiles:!0,selectedElement:a}):(console.log("filesNotFound"),e.setState({filesCollection:[]}))},e.plusOne=function(){var a=Object(h.a)(e.state.procsToAdd);a.push(1),e.setState({procsToAdd:a})},e.minusOne=function(){var a=Object(h.a)(e.state.procsToAdd);a.pop(),e.setState({procsToAdd:a})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.escFunction=function(a){27===a.keyCode&&e.state.openDialog&&e.toggleDialog()},e}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentDidMount",value:function(){var e=this;le.a.get("/api/getFiles/empresaDocs?fieldName=procuracao").then((function(a){return e.setState({files:a.data})})),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.showFiles,t=e.selectedElement,r=e.filesCollection,o=e.openAlertDialog,i=e.alertType;return n.a.createElement(n.a.Fragment,null,n.a.createElement(ca,{links:["Empresas","/empresasHome"],text:"Altera\xe7\xe3o de procuradores"}),n.a.createElement(hr,{data:this.state,redux:this.props.redux,handleInput:this.handleInput,removeProc:this.removeProc,handleFiles:this.handleFiles,addProc:this.addProc,handleSubmit:this.handleSubmit,showFiles:this.showFiles,plusOne:this.plusOne,minusOne:this.minusOne,getFile:this.getFile}),a&&n.a.createElement(xt,{elementId:t,typeId:"procuracao",filesCollection:r,format:br,close:this.closeFiles}),n.a.createElement(Ca,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}),o&&n.a.createElement(Na,{open:o,close:this.closeAlert,alertType:i,customMessage:this.state.customMsg}))}}]),a}(r.Component)),xr=Object(S.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",padding:e.spacing(1)},title:{color:"#000",fontWeight:500,textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},formHolder:{width:900},helperText:{marginTop:"4px"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,margin:e.spacing(1)},list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#bbb",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"},addButton:{marginBottom:"1%",padding:"1% 0"},dropBox:{margin:"1% 0"},dropBoxItem:{margin:"12px 0",border:"1px solid #ccc",borderRadius:"3%",height:"50px",padding:"17px",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#4169E1",backgroundColor:"#fafafa"},dropBoxItem2:{margin:"12px 0",border:"1px solid #ccc",borderRadius:"3%",height:"50px",padding:"0 1% 0 1%",cursor:"pointer",zIndex:"1",boxShadow:"inset 3px -3px -3px 0px black",fontSize:"0.75rem",color:"#00000",backgroundColor:"#fafafa"}}}));function Er(e){var a=e.empresas,t=e.data,o=e.removeSocio,i=e.handleBlur,l=e.handleInput,s=e.addSocio,c=e.handleFiles,d=e.enableEdit,u=e.handleEdit,p=e.handleSubmit,m=t.dropDisplay,f=t.filteredSocios,g=t.selectedEmpresa,h=xr(),b=h.paper,v=h.container,x=h.title,E=h.iconButton,S=h.dropBox,y=h.dropBoxItem,w=h.dropBoxItem2,k=h.list,O=h.addButton,j=function(e){var a=t[e.field];return e.pattern&&a?null===a.match(e.pattern):a>e.max||a<e.min},I=function(e){var a=t[e.field];return a>e.max||a<e.min?"Valor inv\xe1lido":a&&null===a.match(e.pattern)?"\u2718":e.pattern&&a&&null!==a.match(e.pattern)?"\u2713":" "};return n.a.createElement(R.a,{container:!0,direction:"row",className:v,justify:"center"},n.a.createElement(Ta,{data:t,empresas:a,handleInput:l,handleBlur:i}),n.a.createElement(R.a,{item:!0,xs:12},n.a.createElement(T.a,{className:b},At.map((function(e,a){return n.a.createElement(r.Fragment,{key:a},n.a.createElement(we.a,{name:e.field,label:e.label,margin:"normal",className:h.textField,onChange:l,onBlur:i,type:e.type||"",error:j(e),helperText:I(e),FormHelperTextProps:{className:h.helperText},select:e.select||!1,value:t[e.field]||"",disabled:e.disabled,InputLabelProps:{className:h.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:e.disabled&&t.disable?"#fff":"#fafafa",height:"7px"},value:"".concat(t[e.field]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},variant:e.variant||"filled"}))})),n.a.createElement(C.a,{color:"primary",className:O,onClick:s},n.a.createElement(De.a,null)," Adicionar s\xf3cio"))),g&&0===f.length&&n.a.createElement(R.a,{item:!0,xs:12},n.a.createElement(T.a,{className:b},"Nenhum s\xf3cio cadastrado para ",g.razaoSocial)),f.length>0&&g&&n.a.createElement(R.a,{container:!0,direction:"row",className:v,justify:"center",alignItems:"center"},n.a.createElement(R.a,{item:!0,xs:12},n.a.createElement(T.a,{className:b},n.a.createElement("p",{className:x},"S\xf3cios cadastrados"),f.map((function(e,a){return n.a.createElement(R.a,{key:a},At.map((function(a,t){return n.a.createElement(r.Fragment,{key:t+1e3},n.a.createElement(we.a,{value:e[a.field]||"",name:a.field,label:a.label,className:k,disabled:"cpfSocio"===a.field||!e.edit,onChange:u,InputLabelProps:{shrink:!0,style:{fontWeight:600}},inputProps:{style:{fontSize:"0.8rem"}}}))})),n.a.createElement(C.a,{component:"span",className:E,title:"editar",onClick:function(){return d(a)}},n.a.createElement(jt.a,null)),n.a.createElement(C.a,{className:E,color:"secondary",title:"Remover",onClick:function(){return o(a)}},n.a.createElement(Dt.a,null)))}))),n.a.createElement(Be.a,{onDrop:c},(function(e){var a=e.getRootProps,t=e.getInputProps;return n.a.createElement(R.a,Object.assign({container:!0,justify:"center",alignItems:"center",className:S,direction:"row"},a()),n.a.createElement("input",t()),m.match("Clique ou")?n.a.createElement(R.a,{item:!0,xs:6,className:y}," ",m," "):n.a.createElement(R.a,{item:!0,xs:6,className:w}," ",n.a.createElement(Ve.a,null),"  ",m," ",n.a.createElement("br",null)," (clique ou arraste outro arquivo para alterar)"))})),n.a.createElement(R.a,{container:!0,direction:"row",justify:"flex-end",style:{width:"1200px"}},n.a.createElement(R.a,{item:!0,xs:10,style:{width:"1000px"}}),n.a.createElement(R.a,{item:!0,xs:1,style:{align:"right"}},n.a.createElement(C.a,{size:"small",color:"primary",variant:"contained",style:{margin:"0px 0 10px 0"},onClick:function(){return p()}},"Salvar ",n.a.createElement("span",null,"\xa0\xa0 ")," ",n.a.createElement(Wa.a,null)))))))}var Sr=xe(["empresas","socios"],function(e){function a(){var e,t;Object(ae.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=Object(re.a)(this,(e=Object(ne.a)(a)).call.apply(e,[this].concat(n)))).state={razaoSocial:"",toastMsg:"Dados atualizados!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,dialogTitle:"",addedSocios:[0],totalShare:0,filteredSocios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",showFiles:!1},t.handleInput=function(e){var a,r,n,o,i,l,s;return ee.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(a=t.props.redux,r=a.empresas,n=a.socios,o=e.target.name,i=e.target.value,t.setState(Object(b.a)({},t.state,Object(g.a)({},o,i))),"razaoSocial"!==o){c.next=13;break}if(l=Object(h.a)(n.filter((function(e){return e.razaoSocial===i}))),s=r.find((function(e){return e.razaoSocial===i})),l.length>0?t.setState({filteredSocios:l,selectedEmpresa:s}):t.setState({filteredSocios:[]}),!s){c.next=12;break}return c.next=9,ee.a.awrap(t.setState({razaoSocial:s.razaoSocial,selectedEmpresa:s}));case 9:i!==s.razaoSocial&&t.setState({selectedEmpresa:void 0}),c.next=13;break;case 12:t.setState({selectedEmpresa:void 0});case 13:case"end":return c.stop()}}))},t.handleBlur=function(e){var a,r,n,o;return ee.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:a=t.state.filteredSocios,r=e.target.name,n=e.target.value,i.t0=r,i.next="cpfSocio"===i.t0?6:"share"===i.t0?9:26;break;case 6:return a.find((function(e){return e.cpfSocio===n}))&&(t.setState({alertType:"alreadyExists",openAlertDialog:!0}),t.setState({cpfSocio:""})),i.abrupt("break",27);case 9:if(!n){i.next=25;break}if(!((n=n.replace(",","."))>100)){i.next=16;break}return i.next=14,ee.a.awrap(t.setState({share:""}));case 14:n="",t.setState({alertType:"numberNotValid",openAlertDialog:!0});case 16:if("0"===n||"00"===n||Number(n)){i.next=22;break}return i.next=19,ee.a.awrap(t.setState({share:""}));case 19:t.setState({alertType:"numberNotValid",openAlertDialog:!0}),i.next=25;break;case 22:o=a.map((function(e){return Number(e.share)})).reduce((function(e,a){return e+a})),o+=Number(n),t.setState({totalShare:o,share:n});case 25:case 26:return i.abrupt("break",27);case 27:case"end":return i.stop()}}))},t.addSocio=function(){var e,a;return ee.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=t.state.filteredSocios,a={},!(t.state.totalShare>100)){r.next=4;break}return t.setState({openAlertDialog:!0,alertType:"overShared"}),r.abrupt("return",null);case 4:return At.forEach((function(e){Object.assign(a,Object(g.a)({},e.field,t.state[e.field]))})),e.unshift(a),r.next=8,ee.a.awrap(t.setState({filteredSocios:e}));case 8:At.forEach((function(e){t.setState(Object(g.a)({},e.field,""))})),document.getElementsByName("nomeSocio")[0].focus();case 10:case"end":return r.stop()}}))},t.removeSocio=function(e){var a,r,n;return ee.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=Object(h.a)(t.state.filteredSocios),r=a[e].socioId,n=t.props.redux.socios,!n.find((function(e){return e.socioId===r}))){o.next=5;break}return o.next=5,ee.a.awrap(le.a.delete("/api/delete?table=socios&tablePK=socio_id&id=".concat(r)).catch((function(e){return console.log(e)})));case 5:a.splice(e,1),t.setState({filteredSocios:a});case 7:case"end":return o.stop()}}))},t.enableEdit=function(e){var a=t.state.filteredSocios;!0===a[e].edit?a[e].edit=!1:(a.forEach((function(e){return e.edit=!1})),a[e].edit=!0),t.setState({filteredSocios:a})},t.handleEdit=function(e){var a=e.target.name,r=e.target.value;"share"===a&&(r=r.replace(",","."));var n=t.state.filteredSocios.filter((function(e){return!0===e.edit}))[0],o=t.state.filteredSocios.indexOf(n);n[a]=r;var i=t.state.filteredSocios;i[o]=n,t.setState({filteredSocios:i})},t.handleSubmit=function(){var e,a,r,n,o,i,l,s,c,d,u,p,m,f,h,b,v,x,E,S,y,w;return ee.a.async((function(k){for(;;)switch(k.prev=k.next){case 0:if(e=t.state,a=e.selectedEmpresa,r=e.contratoSocial,n=e.filteredSocios,o=t.props.redux.socios,!(n.map((function(e){return Number(e.share)})).reduce((function(e,a){return e+a}))>100)){k.next=5;break}return t.setState({openAlertDialog:!0,alertType:"overShared"}),k.abrupt("return",null);case 5:if(i=[],l=[],s=new FormData,(c=At.map((function(e){return ce.a.decamelize(e.field)}))).splice(1,1),n.forEach((function(e){var t=e,r=(t.razaoSocial,t.createdAt,t.edit,Object(X.a)(t,["razaoSocial","createdAt","edit"]));if((e=r).delegatarioId=a.delegatarioId,e.hasOwnProperty("socioId"))i.push(e),delete i.socioId;else{var n=o.find((function(a){return a.cpfSocio===e.cpfSocio}));n?(e.socioId=n.socioId,i.push(e)):l.push(e)}})),d="socios",u="socio_id",p=[],m={},f=ce.a.camelizeKeys(t.state.originals),i.forEach((function(e){f.forEach((function(a){e.socioId===a.socioId&&(Object.keys(e).forEach((function(t){e[t]===a[t]&&"socioId"!==t||Object.assign(m,Object(g.a)({},t,e[t]))})),Object.keys(m).length>1&&p.push(m),m={})}))})),i=ce.a.decamelizeKeys(p),l=ce.a.decamelizeKeys(l),h=n.filter((function(e){return void 0!==e.socioId})).map((function(e){return e.socioId})),k.prev=15,!(i.length>0)){k.next=19;break}return k.next=19,ee.a.awrap(le.a.put("/api/editSocios",{requestArray:i,table:d,tablePK:u,keys:c}).then((function(e){return console.log(e.data)})));case 19:if(!(l.length>0)){k.next=22;break}return k.next=22,ee.a.awrap(le.a.post("/api/cadSocios",{socios:l,table:d,tablePK:u}).then((function(e){return e.data.forEach((function(e){return h.push(e.socio_id)}))})));case 22:if(!r){k.next=46;break}for(s.append("empresaId",a.delegatarioId),s.append("socios",h),b=!0,v=!1,x=void 0,k.prev=28,E=r.entries()[Symbol.iterator]();!(b=(S=E.next()).done);b=!0)y=S.value,s.append(y[0],y[1]);k.next=36;break;case 32:k.prev=32,k.t0=k.catch(28),v=!0,x=k.t0;case 36:k.prev=36,k.prev=37,b||null==E.return||E.return();case 39:if(k.prev=39,!v){k.next=42;break}throw x;case 42:return k.finish(39);case 43:return k.finish(36);case 44:return k.next=46,ee.a.awrap(le.a.post("/api/empresaUpload",s).then((function(e){return console.log(e.data)})));case 46:k.next=51;break;case 48:k.prev=48,k.t1=k.catch(15),console.log(k.t1);case 51:i=[],p=[],m={},l=[],t.toast(),w=ce.a.decamelizeKeys(t.props.redux.socios),t.setState({razaoSocial:"",selectedEmpresa:void 0,filteredSocios:[],dropDisplay:"Clique ou arraste para anexar o contrato social atualizado da empresa",contratoSocial:void 0,originals:w});case 58:case"end":return k.stop()}}),null,null,[[15,48],[28,32,36,44],[37,,39,43]])},t.handleFiles=function(e){var a=new FormData;a.append("contratoSocial",e[0]),t.setState({dropDisplay:e[0].name,contratoSocial:a})},t.toggleDialog=function(){return t.setState({openDialog:!t.state.openDialog})},t.closeAlert=function(){return t.setState({openAlertDialog:!t.state.openAlertDialog})},t.toast=function(){return t.setState({confirmToast:!t.state.confirmToast})},t}return Object(oe.a)(a,e),Object(te.a)(a,[{key:"componentDidMount",value:function(){var e=ce.a.decamelizeKeys(this.props.redux.socios);this.setState({originals:e})}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.openAlertDialog,t=e.alertType,r=this.props.redux.empresas;return n.a.createElement(n.a.Fragment,null,n.a.createElement(ca,{links:["Empresas","/empresasHome"],text:"Altera\xe7\xe3o do quadro societ\xe1rio"}),n.a.createElement(Er,{data:this.state,empresas:r,handleInput:this.handleInput,handleBlur:this.handleBlur,addSocio:this.addSocio,removeSocio:this.removeSocio,enableEdit:this.enableEdit,handleEdit:this.handleEdit,handleFiles:this.handleFiles,handleSubmit:this.handleSubmit}),n.a.createElement(Ca,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}),a&&n.a.createElement(Na,{open:a,close:this.closeAlert,alertType:t}))}}]),a}(r.Component)),yr=t(95);function wr(){return n.a.createElement("div",{style:{height:"60vh",width:"100%",margin:"15% 35%"}},n.a.createElement("img",{src:"/images/underConstruction.png",alt:"P\xe1gina em constru\xe7\xe3o"}))}var kr=function(e){return n.a.createElement(yr.c,null,n.a.createElement(yr.a,{exact:!0,path:"/",component:G}),n.a.createElement(yr.a,{path:"/certidoes",component:wr}),n.a.createElement(yr.a,{path:"/veiculos",exact:!0,component:$}),n.a.createElement(yr.a,{path:"/veiculos/cadastro",exact:!0,component:za}),n.a.createElement(yr.a,{path:"/veiculos/altDados",exact:!0,component:Ma}),n.a.createElement(yr.a,{path:"/veiculos/altSeguro",exact:!0,component:Ha}),n.a.createElement(yr.a,{path:"/veiculos/baixaVeiculo",exact:!0,component:tt}),n.a.createElement(yr.a,{path:"/consultas",component:yt}),n.a.createElement(yr.a,{path:"/empresas",component:Zt}),n.a.createElement(yr.a,{path:"/empresasHome",component:Xt}),n.a.createElement(yr.a,{path:"/socios",component:Sr}),n.a.createElement(yr.a,{path:"/procuradores",component:vr}),n.a.createElement(yr.a,{path:"/faleConosco",component:wr}))};var Cr=function(){var e=Object(S.a)((function(e){return{root:{flexGrow:1,backgroundColor:"#fbfbfb"}}}))().root,a=Object(s.a)(u.a,m.a,f.a)(s.e);return n.a.createElement(c.a,{store:a(E)},n.a.createElement("div",{className:e},n.a.createElement(M.a,{maxWidth:"lg",style:{minHeight:"100vh"}},n.a.createElement(l.a,null,n.a.createElement(F,null),n.a.createElement(kr,null)),n.a.createElement(P,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(Cr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[316,1,2]]]);