(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{157:function(e,a,t){e.exports={jumbotron:"veiculosHome_jumbotron__3NqZq",card:"veiculosHome_card__dn84Q",card__container:"veiculosHome_card__container__3mnvT",card__image:"veiculosHome_card__image___Ethh",card__text:"veiculosHome_card__text__2qLQG"}},195:function(e,a,t){},296:function(e,a,t){e.exports={termoCiencia__div:"compartilhamento_termoCiencia__div__17vbm",termoCiencia__text:"compartilhamento_termoCiencia__text__1d2i0"}},375:function(e,a,t){},401:function(e,a){},402:function(e,a,t){},436:function(e,a,t){e.exports=t(562)},488:function(e,a){},491:function(e,a,t){},493:function(e,a,t){},494:function(e,a,t){},495:function(e,a,t){},496:function(e,a,t){},553:function(e,a){},554:function(e,a){},555:function(e,a,t){},556:function(e,a,t){},558:function(e,a,t){},559:function(e,a,t){},560:function(e,a,t){},561:function(e,a,t){},562:function(e,a,t){"use strict";t.r(a);var o=t(0),n=t.n(o),r=t(25),i=t.n(r),l=t(52),c=t(40),s=t(412),d=t.n(s),u=t(413),m=t.n(u),p=t(414),f=t(8),v=t(22),h=t(2),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,o=a.payload;switch(t){case"GET_DATA":return Object(h.a)(Object(h.a)({},e),o);case"INSERT_DATA":var n=o.collection,r=o.data;if(e[n]&&r){var i=Object(v.a)(e[n]);return r.forEach((function(e){n.match("logs")?i.push(e):i.unshift(e)})),Object(h.a)(Object(h.a)({},e),{},Object(f.a)({},n,i))}return e;case"UPDATE_DATA":var l=o.collection,c=o.data,s=o.id;if(e[l]&&c){var d=e[l].map((function(e){return c.forEach((function(a){e[s]!==a[s]&&e[s].toString()!==a[s].toString()||(e=a)})),e}));return Object(h.a)(Object(h.a)({},e),{},Object(f.a)({},l,d))}return e;case"UPDATE_COLLECTION":var u=o.data,m=o.collection;return Object(h.a)(Object(h.a)({},e),{},Object(f.a)({},m,u));case"REMOVE_FROM_INSURANCE":var p=o.apolice,b=o.placaIndex,g=o.vehicleIndex;if(e.seguros){var E=Object(v.a)(e.seguros),x=E.find((function(e){return e.apolice===p})),S=E.findIndex((function(e){return e.apolice===p}));return x.placas.splice(b,1),x.veiculos.splice(g,1),E[S]=x,Object(h.a)(Object(h.a)({},e),{},{seguros:E})}return e;case"DELETE_ONE":var O=o.tablePK,y=o.collection;if(e[y]){var j=o.id,C=Object(v.a)(e[y]);if(!j)return;y.match("Docs")||"users"===y||(j=Number(j)),"laudos"===y&&(j=j.toString());var w=C.find((function(e){return e[O]===j})),k=C.findIndex((function(e){return e[O]===w[O]}));if(-1===k)return;return C.splice(k,1),Object(h.a)(Object(h.a)({},e),{},Object(f.a)({},y,C))}return e;case"SET_COLOR":return Object(h.a)(Object(h.a)({},e),{},{setColor:a.payload});case"LOADING":return Object(h.a)(Object(h.a)({},e),{},{loading:a.payload});default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,o=a.payload;switch(t){case"LOG_USER":return Object(h.a)(Object(h.a)({},e),o);case"LOG_USER_OUT":return Object(h.a)(Object(h.a)({},e),{},{user:o});default:return e}},E=Object(l.c)({data:b,user:g}),x=function(e,a){return"LOG_USER_OUT"===a.type&&(e={data:{},user:{}}),E(e,a)},S=t(64),O=t(39),y=t(7),j=t.n(y),C=t(9),w=t(46),k=t(47),D=t(49),I=t(48),N=t(24),A=t.n(N),P=t(13),T=t.n(P),F=function(e,a,t){var o=[],n=[];return e.map((function(e){(null===e||void 0===e?void 0:e.equipamentosId)||(e.equipamentosId=[]),(null===e||void 0===e?void 0:e.acessibilidadeId)||(e.acessibilidadeId=[]),e.equipamentosId.forEach((function(e){a.forEach((function(a){var t=a.id,n=a.item;t===e&&o.push(n)}))})),e.acessibilidadeId.forEach((function(e){t.forEach((function(a){var t=a.id,o=a.item;t===e&&n.push(o)}))}));var r=Object(h.a)(Object(h.a)({},e),{},{equipamentos:o,acessibilidade:n});return o=[],n=[],r}))},z=function(e,a){var t=[];return a.forEach((function(a){e.forEach((function(e){var o=e.id,n=e.item;a===o&&t.push(n)}))})),t},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(){var a=Object(C.a)(j.a.mark((function a(t,o){var n,r,i,l,c,s,d,u,m,p;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=[],r={},!(e.length>0)){a.next=5;break}return e.forEach((function(e){n.push(T.a.get("/api/".concat(e)))})),a.next=5,Promise.all(n).then((function(e){return e.map((function(e){return A.a.camelizeKeys(e.data)}))})).then((function(a){a.forEach((function(a,t){var o=e[t].replace("getFiles/","").replace("lookUpTable/","").replace("logs/","");o=A.a.camelize(o),Object.assign(r,Object(f.a)({},o,a))}))})).catch((function(e){var a;console.log(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data),r=Object(h.a)(Object(h.a)({},r),{},{sessionExpired:!0})}));case 5:["acessibilidade","equipamentos"].every((function(e){return r.hasOwnProperty(e)}))&&(s=(c=r).acessibilidade,d=c.equipamentos,u=r.veiculos||r.allVehicleFields||(null===(i=o().data)||void 0===i?void 0:i.veiculos)||(null===(l=o().data)||void 0===l?void 0:l.allVehicleFields),m=F(u,d,s),r.veiculos=m),r.socios&&Array.isArray(r.socios)&&((p=Object(v.a)(r.socios)).forEach((function(e){if(e.empresas&&"string"===typeof e.empresas)if(e.empresas.match("object"))console.log(e);else try{e.empresas=JSON.parse(e.empresas)}catch(a){console.log("invalid socio id"+e.socioId+a.message)}})),r.socios=p),t({type:"GET_DATA",payload:r});case 8:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},M=function(e,a){return function(t,o){var n=A.a.camelizeKeys(e);console.log("\ud83d\ude80 ~ file: dataActions.js ~ line 73 ~ insertData ~ data",n);var r={collection:a,data:n},i=o().data.seguradoras;if("socios"===a&&n.forEach((function(e){if(e.empresas&&"string"===typeof e.empresas)if(e.empresas.match("object"))console.log(e);else try{e.empresas=JSON.parse(e.empresas)}catch(a){console.log("invalid socio id"+e.socioId+a.message)}})),i){if("veiculos"===a&&n[0]){var l,s,d=o().data,u=d.acessibilidade,m=d.equipamentos,p=[],f=[];(null===(l=n[0])||void 0===l?void 0:l.equipamentosId)&&n[0].equipamentosId.forEach((function(e){m.forEach((function(a){var t=a.id,o=a.item;e.toString()===t.toString()&&p.push(o)}))})),(null===(s=n[0])||void 0===s?void 0:s.acessibilidadeId)&&n[0].acessibilidadeId.forEach((function(e){u.forEach((function(a){var t=a.id,o=a.item;e.toString()===t.toString()&&f.push(o)}))})),n[0].equipamentos=p,n[0].acessibilidade=f}if("seguros"===a&&n[0]&&n[0].placas&&1===n[0].placas.length){var v=i.find((function(e){return e.id===n[0].seguradoraId})),h=n[0],b=[],g=[],E=o().data.veiculos,x=E.map((function(e){return e.apolice===h.apolice&&(e.seguradora=v.seguradora,e.dataEmissao=h.dataEmissao,e.vencimento=h.vencimento),e}));E.forEach((function(e){e.apolice===h.apolice&&(b.push(e.placa),g.push(e.veiculoId))})),h.placas=b,h.veiculos=g,h=[h];var S={data:x,collection:"veiculos"};Object(c.b)((function(){t({type:"INSERT_DATA",payload:{data:h,collection:"seguros"}}),t({type:"UPDATE_COLLECTION",payload:S})}))}else t({type:"INSERT_DATA",payload:r})}else t({type:"INSERT_DATA",payload:r})}},_=function(e,a,t){return function(o,n){var r=A.a.camelizeKeys(e);t=A.a.camelize(t);var i=n().data,l=i.equipamentos,c=i.acessibilidade;"veiculos"===a&&l&&c&&(r=F(r,l,c)),o({type:"UPDATE_DATA",payload:{collection:a,data:r,id:t}})}},q=function(e,a,t,o){return function(n,r){var i=r().data[t];if(e&&e[0]&&a){var l=i.filter((function(a){return e.some((function(e){return e===a[o]}))}));l.forEach((function(e){var t=Object.assign({},e.metadata,a);e.metadata=t})),n({type:"UPDATE_DATA",payload:{collection:t,data:l,id:o}})}}},V=function(e,a){return function(t){var o={data:e=A.a.camelizeKeys(e),collection:a};"socios"===a&&e.forEach((function(e){if(e.empresas&&"string"===typeof e.empresas)if(e.empresas.match("object"))console.log(e);else try{e.empresas=JSON.parse(e.empresas)}catch(a){console.log("invalid socio id"+e.socioId+a.message)}})),t({type:"UPDATE_COLLECTION",payload:o})}},R=function(e,a,t){return function(o){a=A.a.camelize(a),o({type:"DELETE_ONE",payload:{id:e,tablePK:a,collection:t}})}},B=function(){return n.a.createElement("div",{className:"loading"},n.a.createElement("img",{src:"/images/loading.gif",alt:"",height:"60px",width:"60px"}),n.a.createElement("p",null," Carregando... "))},U=[{collection:"equipamentos",field:"item",label:"Equipamentos",name:"equipamentosId",table:"equipamentos"},{collection:"acessibilidade",field:"item",label:"Itens de acessibilidade",name:"acessibilidadeId",table:"acessibilidade"},{collection:"marcaCarroceria",field:"marca",label:"Marcas de Carroceria",name:"marcaCarroceria",table:"marca_carroceria"},{collection:"carrocerias",field:"modelo",label:"Modelos de Carroceria",name:"modeloCarroceria",table:"modelo_carroceria"},{collection:"marcaChassi",field:"marca",label:"Marcas de Chassi",name:"marcaChassi",table:"marca_chassi"},{collection:"modelosChassi",field:"modeloChassi",label:"Modelos de Chassi",name:"modeloChassi",table:"modelo_chassi"},{collection:"seguradoras",field:"seguradora",label:"Seguradoras",name:"seguradora",table:"seguradora"},{collection:"empresasLaudo",field:"empresa",label:"Empresas certificadas INMETRO",name:"empresa",table:"empresa_laudo"},{label:"Motivos para baixa do ve\xedculo"},{collection:"laudos",table:"laudos"}],Y=t(38),H=t(3),J=t(148),K=t(359),W=t(563),$=t(360),G=t(585),X=t(358),Z=Object(X.a)((function(e){return{success:{backgroundColor:J.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:K.a[700]},message:{display:"flex",alignItems:"center"}}}));function Q(e){var a=Z(),t=e.className,o=e.message,r=(e.onClose,e.variant),i=Object(Y.a)(e,["className","message","onClose","variant"]);return n.a.createElement(W.a,Object.assign({className:Object(H.a)(a[r],t),"aria-describedby":"client-snackbar",message:o&&"string"===typeof o&&n.a.createElement("span",{id:"client-snackbar",className:a.message},n.a.createElement($.a,null,"error"===e.variant?"close":"warning"===e.variant?"error_outlined":"check"),"    ",o)},i))}function ee(e){return n.a.createElement("div",null,n.a.createElement(G.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.open,autoHideDuration:1500,onClose:e.close},n.a.createElement(Q,{variant:e.status||"success",message:e.msg})))}function ae(e,a){var t=new Date;t.setTime(t.getTime()+36e5),t=t.toUTCString(),document.cookie="".concat(e,"=").concat(a,"; expires=").concat(t,"; path=/")}function te(e){var a=new Date;a.setTime(10),document.cookie="".concat(e,"=; expires=").concat(a.toUTCString(),"; path=/")}function oe(e){for(var a=e+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){for(var n=t[o];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(a))return n.substring(a.length,n.length)}return""}var ne,re=function(e){return function(a){a({type:"LOG_USER",payload:e})}},ie=function(){return function(){var e=Object(C.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/auth/logout",{method:"GET",credentials:"same-origin"}).then((function(e){te("loggedIn")})).catch((function(e){return console.log(e)}));case 2:a({type:"LOG_USER_OUT"});case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},le=t(467),ce=function(e,a){var t=[];["logs","parametros"].forEach((function(a){e.includes(a)||e.push(a)})),t=e.map((function(e){return e.replace("getFiles/","").replace("lookUpTable/","")}));var o=function(o){Object(D.a)(i,o);var r=Object(I.a)(i);function i(){var e;Object(w.a)(this,i);for(var a=arguments.length,t=new Array(a),o=0;o<a;o++)t[o]=arguments[o];return(e=r.call.apply(r,[this].concat(t))).state={confirmToast:!1},e.quitFn=function(a){a.ctrlKey&&17===a.keyCode&&e.props.logUserOut()},e.getUser=Object(C.a)(j.a.mark((function a(){var t,o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,T.a.get("/getUser");case 2:t=a.sent,(o=null===t||void 0===t?void 0:t.data)&&e.props.logUser(o);case 5:case"end":return a.stop()}}),a)}))),e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e}return Object(k.a)(i,[{key:"componentDidMount",value:function(){var a=Object(C.a)(j.a.mark((function a(){var t,o,n,r=this;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(document.addEventListener("keypress",(function(e){return r.quitFn(e)})),t=this.props.redux,o=[],e.forEach((function(e){var a=e.replace("getFiles/","").replace("lookUpTable/","").replace("logs/","");t[a]&&t[a][0]||o.push(e)})),!o[0]){a.next=7;break}return a.next=7,this.props.getData(o);case 7:ne||(n="localhost"===window.location.hostname?{env:"development",webSocketHost:"ws://localhost:3001"}:{env:"production",webSocketHost:"ws://200.198.42.167"},ne=le(n.webSocketHost)),ne.on("connect",(function(){var e;return ne.emit("userDetails",null===(e=r.props)||void 0===e?void 0:e.user)})),ne.on("insertVehicle",(function(e){return r.props.insertData(e,"veiculos")})),ne.on("insertInsurance",(function(e){return r.props.insertData(e,"seguros")})),ne.on("insertEmpresa",(function(e){return r.props.insertData(e,"empresas")})),ne.on("insertSocios",(function(e){return r.props.insertData(e,"socios")})),ne.on("insertProcuradores",(function(e){return r.props.insertData(e,"procuradores")})),ne.on("insertElements",(function(e){var a=e.insertedObjects,t=e.collection;return r.props.insertData(a,t)})),ne.on("addElements",(function(e){var a=e.insertedObjects,t=e.table,o=U.find((function(e){return e.table===t})).collection;r.props.insertData(a,o)})),ne.on("updateVehicle",(function(e){return r.props.updateData(e,"veiculos","veiculoId")})),ne.on("updateInsurance",(function(e){return r.props.updateCollection(e,"seguros")})),ne.on("updateSocios",(function(e){return r.props.updateCollection(e,"socios")})),ne.on("updateProcuradores",(function(e){var a=e.collection,t=e.data,o=e.primaryKey;return r.props.updateData(t,a,o)})),ne.on("updateLogs",(function(e){return r.props.updateData(e,"logs","id")})),ne.on("updateAny",(function(e){var a=e.updatedObjects,t=e.collection,o=e.primaryKey;return r.props.updateData(a,t,o)})),ne.on("updateDocs",(function(e){var a=e.ids,t=e.metadata,o=e.collection,n=e.primaryKey;return r.props.updateDocs(a,t,o,n)})),ne.on("updateElements",(function(e){var a=e.collection,t=e.updatedCollection;return r.props.updateCollection(t,a)})),ne.on("deleteOne",(function(e){var a=e.id,t=e.tablePK,o=e.collection;console.log({id:a,tablePK:t,collection:o}),r.props.deleteOne(a,t,o)})),ne.on("insertFiles",(function(e){var a=e.insertedObjects,t=e.collection;r.props.insertData(a,t)}));case 26:case"end":return a.stop()}}),a,this)})));return function(){return a.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){document.removeEventListener("keypress",this.quitFn),ne||(ne=le(":3001"));["insertVehicle","insertInsurance","insertEmpresa","insertSocios","insertFiles","addElements","insertElements","insertProcuradores","updateVehicle","updateInsurance","updateSocios","updateLogs","deleteOne","updateDocs","updateAny"].forEach((function(e){return ne.off(e)})),ne.disconnect(),ne=void 0}},{key:"render",value:function(){var e=this;return oe("loggedIn").length>0&&!this.props.redux.sessionExpired?(this.props.user.name||this.getUser(),0!==(t=t.map((function(e){return A.a.camelize(e)}))).length&&t.every((function(a){return e.props.redux.hasOwnProperty(a)}))?n.a.createElement(a,this.props):n.a.createElement(B,null)):(setTimeout((function(){e.props.history.push("/"),e.props.logUserOut()}),1200),n.a.createElement(ee,{open:!0,close:this.toast,msg:"Sess\xe3o expirada.",status:"error"}))}}]),i}(n.a.Component);return Object(c.c)((function(e){return{redux:Object(h.a)({},e.data),user:e.user}}),(function(e){return Object(l.b)({getData:L,insertData:M,updateData:_,updateCollection:V,deleteOne:R,updateDocs:q,logUser:re,logUserOut:ie},e)}))(o)},se=(t(491),[{title:"Ve\xedculos",date:"07/Nov",description:"Cadastre e altere os dados do ve\xedculo ou solicite sua baixa",link:"/veiculos",imageUrl:"/images/vehicles.jpg"},{title:"Empresas",date:"07/Nov",description:"Cadastre e gerencie dados de empresas, s\xf3cios e procuradores",link:"/empresas",imageUrl:"/images/empresas12.jpg"},{title:"Consultas",date:"03/Dez",description:"Consulte e gerencie dados de ve\xedculos, seguros e empresas",link:"/consultas",imageUrl:"/images/consultas2.jpg"},{title:"Relat\xf3rios",date:"03/Dez",description:"Acompanhe a situa\xe7\xe3o dos ve\xedculos por meio de gr\xe1ficos e tabelas",link:"/relatorios",imageUrl:"/images/relatorios.jpg"}]),de={nomeSistema:"Sistema de Cadastro do Transporte Intermunicipal de Minas Gerais",siglaSistema:"CadTI - MG"};var ue=ce(["logs","parametros"],(function(e){var a=e.redux.parametros[0].nomes;a&&(de.nomeSistema=null===a||void 0===a?void 0:a.sistema,de.siglaSistema=null===a||void 0===a?void 0:a.siglaSistema);var t=de.nomeSistema,o=de.siglaSistema;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{minHeight:"83vh",width:"100%",height:"auto"}},n.a.createElement("main",{className:"homeMainPost"},n.a.createElement("h1",null,o),n.a.createElement("h2",null,t)),n.a.createElement("section",{className:"homeCardsContainer"},se.map((function(e,a){var t=e.link,o=e.title,r=e.description,i=e.imageUrl;return n.a.createElement("div",{key:a,className:"homeCard"},n.a.createElement(S.b,{to:t,style:{textDecoration:"none"}},n.a.createElement("div",{className:"homeCard"},n.a.createElement("div",{className:"homeCardText"},n.a.createElement("h6",{className:"homeCardText",style:{fontWeight:500}},o),n.a.createElement("p",{className:"homeCardText"},r)),n.a.createElement("div",{className:"homeImage"},n.a.createElement("img",{src:i,alt:o,className:"homeImage"})))))})))))})),me=t(157),pe=t.n(me),fe=[{title:"Cadastro de Ve\xedculos",description:"Cadastrar um novo ve\xedculo no sistema",imageUrl:"/images/add_new.jpg",link:"/cadastro"},{title:"Altera\xe7\xe3o de dados",description:"Alterar dados de um ve\xedculo",link:"/altDados",imageUrl:"/images/pen.png"},{title:"Seguros",description:"Cadastro e atualiza\xe7\xe3o de seguro",link:"/seguros",imageUrl:"/images/car_insurance2.png"},{title:"Compartilhamento",description:"Gerenciar compartilhamento do ve\xedculo",link:"/compartilhamento",imageUrl:"/images/shareVehicle2.png"},{title:"Laudos",description:"Laudos de seguran\xe7a veicular",link:"/laudos",imageUrl:"/images/laudos.png"},{title:"Baixa",description:"Baixa de ve\xedculos",link:"/baixaVeiculo",imageUrl:"/images/remove_doc.png"},{title:"Configura\xe7\xf5es",description:"Chassi, carrocerias, seguradoras, etc",link:"/config",imageUrl:"/images/config2.jpg"}],ve=pe.a.jumbotron,he=pe.a.card,be=pe.a.card__image,ge=pe.a.card__container,Ee=pe.a.card__text;var xe=ce([],(function(e){var a=e.match,t=e.user;return n.a.createElement("div",null,n.a.createElement("section",{className:ve},n.a.createElement("h1",null,"Ve\xedculos"),n.a.createElement("p",null,"Selecione uma das op\xe7\xf5es abaixo.")),n.a.createElement("section",{className:he},fe.map((function(e,o){var r=e.title,i=e.link,l=e.imageUrl,c=e.description;return"admin"!==(null===t||void 0===t?void 0:t.role)&&"/config"===i?null:n.a.createElement(S.b,{to:a.url+i,key:o,className:ge},n.a.createElement("span",{className:be}," ",n.a.createElement("img",{src:l,alt:r})," "),n.a.createElement("div",{className:Ee},n.a.createElement("h3",null,r),n.a.createElement("p",null," ",c)))}))))})),Se=t(81),Oe=function(e,a){var t,o,n=a.veiculos,r=a.empresas,i=a.vehicleDocs,l=a.equipamentos,c=a.acessibilidade,s=null===e||void 0===e?void 0:e.history,d=n.find((function(a){return a.veiculoId===e.veiculoId})),u=JSON.parse(JSON.stringify(d)),m=r.find((function(a){return a.razaoSocial===(null===e||void 0===e?void 0:e.empresa)})),p=null===m||void 0===m?void 0:m.razaoSocial,f=p,v=Object(h.a)({},d)||null;if(Array.isArray(s)&&(o=null===(t=s.reverse().find((function(e){return e.hasOwnProperty("alteracoes")})))||void 0===t?void 0:t.alteracoes),o){Object.keys(o).forEach((function(e){return v[e]=o[e]}));var b=o,g=b.equipamentosId,E=b.acessibilidadeId;g&&(v.equipamentos=z(l,g)),E&&(v.acessibilidade=z(c,E))}var x,S=[],O=[],y={};s.filter((function(e){return e.files})).map((function(e){return e.files})).forEach((function(e){e.forEach((function(e){return S.push(e)}))})),x=i.filter((function(e){return-1!==S.indexOf(e.id)}));var j=[];return x.forEach((function(e){var a=e.metadata.fieldName;j.includes(a)?y[a].push(e):(j.push(a),y[a]=[e])})),Object.keys(y).forEach((function(e){var a;a=y[e].reduce((function(e,a){return new Date(e.uploadDate)>new Date(a.uploadDate)?e:a})),O.push(a),a=[]})),Object(h.a)(Object(h.a)({},v),{},{originalVehicle:u,delegatario:f,razaoSocial:p,selectedEmpresa:m,demand:e,demandFiles:O,alteracoes:o,getUpdatedValues:ye})};function ye(e,a){return Object.keys(a).forEach((function(t){a[t]&&e[t]&&("equipamentosId"!==t&&"acessibilidadeId"!==t||a[t].sort((function(e,a){return e-a})),a[t].toString()===e[t].toString()&&delete a[t]),""!==a[t]&&"null"!==a[t]&&a[t]||delete a[t]})),a}var je=t(80),Ce=function(e){if(e[0].size>3145728)return alert("Arquivo excedeu o limite permitido (3MB)"),!0},we=function(e,a,t){var o=new FormData;if(e&&e[0]){if(Ce(e))return;return t.forEach((function(e){for(var t in console.log(e.name),a)t.match(e.name)&&a[e.name]&&o.set(e.name,a[e.name])})),{form:o}}},ke=function(){var e=Object(C.a)(j.a.mark((function e(a){var t,o,n,r,i,l,c,s,d,u,m,p,f=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>1&&void 0!==f[1]?f[1]:{},r=f.length>2?f[2]:void 0,i=f.length>3?f[3]:void 0,!(a instanceof FormData)){e.next=13;break}s=new FormData,n.tempFile=!r,console.log(n),s.append("metadata",JSON.stringify(n)),d=Object(je.a)(a);try{for(d.s();!(u=d.n()).done;)m=u.value,s.set(m[0],m[1]),console.log("\ud83d\ude80 ~ file: handleFiles.js ~ line 49 ~ postFilesReturnIds ~ pair[0], pair[1]",m[0],m[1])}catch(v){d.e(v)}finally{d.f()}return e.next=12,T.a.post("/api/".concat(i),s);case 12:l=e.sent;case 13:if(!(null===(t=l)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.file)){e.next=19;break}return p=l.data.file,c=p.map((function(e){return e.id})),e.abrupt("return",c);case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),De=function(){var e=Object(C.a)(j.a.mark((function e(a,t){var o,n,r,i,l,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.files,n=a.demandFiles,r={tempFile:!1},(null===a||void 0===a?void 0:a.metadata)instanceof Object&&(r=Object.assign(a.metadata,r)),n&&n[0])i=n.map((function(e){return e.id}));else if(o instanceof FormData){l=Object(je.a)(o);try{for(s=function(){var e=c.value;n.forEach((function(a,t){var o;e[0]===(null===a||void 0===a||null===(o=a.metadata)||void 0===o?void 0:o.fieldName)&&n.splice(t,1)}))},l.s();!(c=l.n()).done;)s()}catch(d){l.e(d)}finally{l.f()}i=n.map((function(e){return e.id}))}return e.next=6,T.a.put("/api/updateFilesMetadata",{ids:i,collection:t,metadata:r}).then((function(e){return console.log(e.data)}));case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Ie=function(e,a){var t=new FormData;if(a instanceof FormData&&a.has(e)){var o,n=Object(je.a)(a);try{for(n.s();!(o=n.n()).done;){var r=o.value;t.set(r[0],r[1])}}catch(l){n.e(l)}finally{n.f()}t.delete(e);var i=Object(f.a)({fileToRemove:e,form:t},e,void 0);return Array.from(a.keys(),(function(e){return e})).length<=1&&(a.has("veiculoId")||a.has("empresaId"))?Object(f.a)({fileToRemove:void 0,form:void 0},e,void 0):i}},Ne=t(18),Ae=t.n(Ne),Pe=function(e,a){var t=document.querySelectorAll("p"),o=document.querySelectorAll("input"),n=[],r=[],i="Favor verificar o preenchimento dos seguintes campos: ";return t&&t.forEach((function(e){if("Valor inv\xe1lido"===e.textContent||"\u2718"===e.textContent){var a=e.parentNode.querySelectorAll("label");n.push(a[0])}})),o&&!a&&o.forEach((function(e){if("date"===e.type&&!Ae()(e.value,"YYYY-MM-DD",!0).isValid()){var a=e.parentNode.previousSibling;n.push(a)}})),n[0]?(n.forEach((function(e){return r.push(e.textContent)})),r.forEach((function(e){return i+=e+", "})),i=i.replace("(kg)","").replace("(cm)","").slice(0,-2)+".",e?{openAlertDialog:!0,alertType:"inputError",customMsg:i,errors:r}:r):null},Te=function(e,a){var t;if(e)return(!a.errorHandler||!a.errorHandler(e))&&(!(!e||!a.errorHandler||a.errorHandler(e))||((null===(t=e)||void 0===t?void 0:t.length)<(null===a||void 0===a?void 0:a.minLength)||("number"===a.type?e>a.max||e<a.min:("string"!==typeof e&&(e=e.toString()),!!a.pattern&&null===e.match(a.pattern)))))},Fe=function(e,a){var t,o;if(e)return a.errorHandler&&a.errorHandler(e)?"\u2713":e&&a.errorHandler&&!a.errorHandler(e)||(null===(t=e)||void 0===t?void 0:t.length)<(null===a||void 0===a?void 0:a.minLength)?"\u2718":(null===(o=e)||void 0===o?void 0:o.length)>=(null===a||void 0===a?void 0:a.minLength)?"\u2713":("string"!==typeof e&&(e=e.toString()),e>a.max||e<a.min?"Valor inv\xe1lido":null===e.match(a.pattern)?"\u2718":a.pattern&&null!==e.match(a.pattern)?"\u2713":" ")},ze={collection:"logs",docs:"vehicleDocs",primaryKey:"veiculoId"},Le=ze.collection,Me=ze.docs,_e=ze.primaryKey,qe=[{subject:"Cadastro de ve\xedculo",path:"/solicitacoes/cadastro",requestAction:"Cadastro de ve\xedculo solicitado",responseAction:"Pend\xeancias para o cadastro do ve\xedculo",concludedAction:"Ve\xedculo cadastrado",collection:Le,docs:Me,primaryKey:_e},{subject:"Reativa\xe7\xe3o de ve\xedculo",path:"/solicitacoes/cadastro",requestAction:"Reativa\xe7\xe3o de ve\xedculo solicitada",responseAction:"Pend\xeancias para a reativa\xe7\xe3o do ve\xedculo",concludedAction:"Ve\xedculo reativado",collection:Le,docs:Me,primaryKey:_e},{subject:"Altera\xe7\xe3o de dados do ve\xedculo",path:"/solicitacoes/altDados",requestAction:"Altera\xe7\xe3o de dados de ve\xedculo solicitada",responseAction:"Pend\xeancias para a altera\xe7\xe3o de dados veicular",concludedAction:"Dados do ve\xedculo alterados",collection:Le,docs:Me,primaryKey:_e},Object(h.a)(Object(h.a)({},ze),{},{subject:"Cadastro/altera\xe7\xe3o de seguro",path:"/solicitacoes/seguros",requestAction:"Cadastro de seguro solicitado",responseAction:"Pend\xeancias para o cadastro do seguro",concludedAction:"Seguro cadastrado",primaryKey:"id",collection:Le,docs:Me}),Object(h.a)(Object(h.a)({},ze),{},{subject:"Compartilhamento de ve\xedculo",path:"/solicitacoes/compartilhamento",requestAction:"Compartilhamento de seguro solicitado",concludedAction:"Compartilhamento de ve\xedculo realizado.",primaryKey:"id",collection:Le,docs:Me}),Object(h.a)(Object(h.a)({},ze),{},{subject:"Cadastro de laudo de seguran\xe7a veicular",collection:"logs",path:"/solicitacoes/laudos",requestAction:"Cadastro do laudo solicitado",responseAction:"Pend\xeancias para o cadastro do laudo",concludedAction:"Laudo veicular cadastrado"}),{subject:"Baixa de ve\xedculo",path:"/solicitacoes/baixaVeiculo",requestAction:"Baixa de ve\xedculo solicitada",collection:Le,docs:Me,primaryKey:_e},{subject:"Configura\xe7\xf5es de Ve\xedculo",collection:"logs",path:"/veiculos/config"},{subject:"Consultas",path:"/consultas"},{subject:"Cadastro de empresa",collection:"empresaLogs",path:"/empresas/cadastro"},{subject:"Altera\xe7\xe3o no quadro/dados de s\xf3cios",requestAction:"Altera\xe7\xe3o no quadro/dados de s\xf3cios solicitada",concludedAction:"Altera\xe7\xe3o de s\xf3cios cadastrada",path:"/solicitacoes/socios",docs:"empresaDocs",primaryKey:"empresaId",collection:Le},{subject:"Altera\xe7\xe3o estatut\xe1ria",requestAction:"Altera\xe7\xe3o estatut\xe1ria solicitada",responseAction:"Pend\xeancias para a altera\xe7\xe3o estatut\xe1ria",concludedAction:"Altera\xe7\xe3o estatut\xe1ria cadastrada",path:"/solicitacoes/altContrato",docs:"empresaDocs",primaryKey:"empresaId",collection:Le},{subject:"Cadastro de procura\xe7\xf5es/procuradores",collection:Le,path:"/solicitacoes/procuradores",docs:"empresaDocs",primaryKey:"empresaId",requestAction:"Cadastro de procura\xe7\xe3o solicitado",responseAction:"Procura\xe7\xe3o indeferida",concludedAction:"Procura\xe7\xe3o cadastrada"}];function Ve(e){return Re.apply(this,arguments)}function Re(){return(Re=Object(C.a)(j.a.mark((function e(a){var t,o,n,r,i,l,c,s,d,u,m,p,f,v,h,b,g,E,x,S,O,y,C,w,k;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=window.location.pathname,l=(null===(t=fi.getState())||void 0===t||null===(o=t.user)||void 0===o?void 0:o.name)||"Usu\xe1rio n\xe3o identificado",c=a.empresaId,(s=JSON.parse(JSON.stringify(qe))).forEach((function(e,a){return e.path=qe[a].path.replace("/veiculos","").replace("/solicitacoes","").replace("/empresas","")})),d="logs",u=null===a||void 0===a?void 0:a.historyLength,m={user:l,createdAt:new Date},p=s.find((function(e){return i.match(e.path)})),f=JSON.parse(JSON.stringify(a)),a.subject&&a.subject.match("Reativa\xe7\xe3o")&&(p=s.find((function(e){return e.subject===a.subject}))),v="vehicleDocs",h="vehicleUpload",a.veiculoId||(v="empresaDocs",h="empresaUpload"),b=Object.assign(a.history,m),f.history=b||{},(u||0===u)&&(u%2===0||0===u?((null===a||void 0===a||null===(g=a.history)||void 0===g?void 0:g.action)||(f.history.action=null===(E=p)||void 0===E?void 0:E.requestAction),f.status="Aguardando an\xe1lise"):((null===a||void 0===a||null===(x=a.history)||void 0===x?void 0:x.action)||(f.history.action=null===(S=p)||void 0===S?void 0:S.responseAction),f.status="Pend\xeancias")),(null===a||void 0===a?void 0:a.id)&&f.veiculoId&&delete f.veiculoId,delete f.historyLength,a.id&&!a.subject||(f.subject=(null===a||void 0===a?void 0:a.subject)||(null===(n=p)||void 0===n?void 0:n.subject)),!a.declined){e.next=20;break}return f.history.action="Solicita\xe7\xe3o indeferida",f.status="Solicita\xe7\xe3o indeferida",f.completed=!0,O=T.a.post("/api/logs",{log:f,collection:d,codigoEmpresa:c}),e.abrupt("return",O);case 20:return a.approved&&!a.declined&&(f.history.action=(null===(y=p)||void 0===y?void 0:y.concludedAction)||"Solicita\xe7\xe3o conclu\xedda",f.status="Solicita\xe7\xe3o conclu\xedda",f.completed=!0,De(a,v)),e.next=23,ke(null===a||void 0===a||null===(r=a.history)||void 0===r?void 0:r.files,null===a||void 0===a?void 0:a.metadata,null===f||void 0===f?void 0:f.completed,h);case 23:return(C=e.sent)&&(f.history.files=C),f.metadata,f.approved,f.demandFiles,w=Object(Y.a)(f,["metadata","approved","demandFiles"]),s=JSON.parse(JSON.stringify(qe)),p=s.find((function(e){return i.match(e.path)})),k=T.a.post("/api/logs",{log:w,collection:d,codigoEmpresa:c}),e.abrupt("return",k);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Be=t(14);function Ue(e){var a=e.collection,t=void 0===a?[]:a,o=e.field,r=e.itemProp,i=e.value;return(null===i||void 0===i?void 0:i.length)>2&&"string"!==typeof t?(r||(r=o),n.a.createElement("datalist",{id:o,autoComplete:"off"},t.map((function(e,a){return n.a.createElement("option",{key:a},e[r])})))):null}t(493);var Ye=Object(c.c)((function(e){return{user:e.user,redux:e.data}}))((function(e){var a=Object(o.useState)(!0),t=Object(Be.a)(a,2),r=t[0],i=t[1],l=e.empresas,c=e.compartilhados,s=e.handleInput,d=e.handleBlur,u=e.shared,m=e.headerTitle,p=e.data,f=p.razaoSocial,v=p.compartilhado,h=p.activeStep,b=p.demand,g=l.filter((function(e){return"Desativada"!==e.situacao})),E=1===g.length,x=[{title:"Selecione a Via\xe7\xe3o",name:"razaoSocial",field:"razaoSocial",value:f}];return u&&x.push({title:"Empresa autorizada a compartilhar",field:"compartilhado",name:"compartilhado",itemProp:"razaoSocial",value:v}),Object(o.useEffect)((function(){b||h>0||E?i(!1):0===h&&i(!0);var e=document.getElementsByName("razaoSocial");r&&e[0]&&e[0].focus()}),[b,h,r,E]),n.a.createElement("div",{className:e.hasOwnProperty("shared")?"flex center":"paper flex center",style:{flexDirection:0===h?"row":"column",width:"100%",marginBottom:0}},!r&&n.a.createElement("div",{className:"selectedEmpresa",style:{padding:u&&0===h&&"0 30px 33px 0"}},m||(null===b||void 0===b?void 0:b.empresa)||f||""),e.hasOwnProperty("shared")&&0!==h&&v&&n.a.createElement("div",{className:"compartilhadoHeader"},"Compartilhado por ",v),(!h||0===h)&&r&&x.map((function(e,a){var t=e.title,o=e.field,r=e.name,i=e.itemProp,l=e.value;return(E&&1===a||!E)&&n.a.createElement("div",{className:"flexColumn",key:a},n.a.createElement("h4",{style:{margin:"5px 0",textAlign:"center"}},t),n.a.createElement("input",{list:o,name:r,className:"selectEmpresa",value:l||"",onChange:s,onBlur:d,autoComplete:"off"}),n.a.createElement(Ue,{collection:"compartilhado"===o?c:g,field:o,itemProp:i,value:l}))})))})),He=t(374),Je=t(373),Ke=Object(X.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"1px",marginBottom:"1px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},select:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"2px",marginBottom:"2px",background:"#fafafa",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},helperText:{margin:"2px 0",fontSize:"0.7rem"}}}));function We(e){var a=e.handleInput,t=e.handleBlur,r=e.form,i=e.data,l=e.empresas,c=e.compartilhados,s=e.seguros,d=e.seguradoras,u=e.selectOptions,m=e.disableAll,p=e.style,f=void 0===p?{}:p,v=e.disableSome,b=void 0===v?[]:v,g={compartilhados:c,empresas:l,seguros:s,seguradoras:d},E=Ke(),x=E.helperText,S=function(e){var a,t=i[e.field];if(t)return(!e.errorHandler||!e.errorHandler(t))&&(!(!t||!e.errorHandler||e.errorHandler(t))||((null===(a=t)||void 0===a?void 0:a.length)<(null===e||void 0===e?void 0:e.minLength)||("number"===e.type?t>e.max||t<e.min:("string"!==typeof t&&(t=t.toString()),!!e.pattern&&null===t.match(e.pattern)))))},O=function(e){var a,t,o=i[e.field];return o?e.errorHandler&&e.errorHandler(o)?"\u2713":o&&e.errorHandler&&!e.errorHandler(o)||(null===(a=o)||void 0===a?void 0:a.length)<(null===e||void 0===e?void 0:e.minLength)?"\u2718":(null===(t=o)||void 0===t?void 0:t.length)>=(null===e||void 0===e?void 0:e.minLength)?"\u2713":("string"!==typeof o&&(o=o.toString()),o>e.max||o<e.min?"Valor inv\xe1lido":null===o.match(e.pattern)?"\u2718":e.pattern&&null!==o.match(e.pattern)?"\u2713":" "):" "};return n.a.createElement("div",{className:"flex center",style:Object(h.a)({},f)},r.map((function(e,r){return n.a.createElement(o.Fragment,{key:r},n.a.createElement(Je.a,{name:e.field,label:e.label,margin:e.margin,className:E.textField,onChange:a,onBlur:t,type:e.type||"",error:S(e),helperText:O(e),FormHelperTextProps:{className:x},select:e.select||!1,value:i[e.field]||"",disabled:e.disabled||m||b.includes(e.field)||!1,InputLabelProps:{className:E.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"}},inputProps:{style:{background:e.disabled&&i.disable?"#fff":"#fafafa",fontSize:"0.85rem",textAlign:"center",color:"#000",width:e.width||300,height:"7px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"},value:"".concat(i[e.field]||""),list:e.field||e.itemProp||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||"",autoComplete:"off"},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1,SelectProps:{style:{background:e.disabled&&i.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#555",fontWeight:400,width:325,height:"44px"}}},!0===e.select?u?u.map((function(e,a){return n.a.createElement(He.a,{key:a,value:e},e)})):e.options.map((function(e,a){return n.a.createElement(He.a,{key:a,value:e},e)})):null),!0===e.autoComplete&&n.a.createElement(Ue,{field:e.field,collection:i[e.collection]||g[e.collection],itemProp:e.itemProp,value:i[e.field]||""}))})))}function $e(e){var a=e.subtitle,t=e.style,o=void 0===t?{}:t;return n.a.createElement("div",{className:"subtitle",style:o},n.a.createElement("i",{className:"material-icons subtitle__helper"},"arrow_forward"),n.a.createElement("span",{className:"subtitle__text"},a))}var Ge=t(405),Xe=t(376),Ze=t(377),Qe=t(63),ea=t.n(Qe),aa=[{field:"cilindros",label:"Cilindros",margin:"normal",type:"number",max:12,step:1},{field:"potencia",label:"Pot\xeancia (cv)",margin:"normal",type:"number",max:600},{field:"eixos",label:"Eixos",margin:"normal",type:"number",max:8},{field:"pneumaticosDianteiro",label:"Pneum\xe1ticos Eixo Dianteiro",margin:"normal",type:"number",max:12},{field:"pneumaticosTraseiro",label:"Pneum\xe1ticos Eixo Traseiro",margin:"normal",type:"number",max:18},{field:"pesoDianteiro",label:"Peso Dianteiro (t)",margin:"normal",type:"number",max:12},{field:"pesoTraseiro",label:"Peso Traseiro (t)",margin:"normal",type:"number",max:15},{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piquesPoltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150},{field:"numeroDae",label:"N\xba Documento Arrecada\xe7\xe3o Estadual",maxLength:40}],ta=[[{field:"placa",label:"Placa",margin:"normal",maxLength:8,pattern:"[a-zA-Z]{3}[-]?[ ]?\\d{4}|[A-Z]{3}[-]?[ ]?[0-9]{1}[A-Z]{1}[0-9]{2}"},{field:"renavam",label:"Renavam",margin:"normal",maxLength:11,pattern:/^(\d{9}|\d{11})$/},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Comercial","Comercial Executivo","Convencional","Convencional Executivo","Leito","Leito e Executivo","Semi-Leito","Semi-Leito Executivo"]},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17},{field:"modeloChassi",label:"Modelo do Chassi",autoComplete:!0,collection:"modelosChassi"},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",max:Number((new Date).getFullYear())},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"modeloCarroceria",label:"Modelo da Carroceria",itemProp:"modelo",autoComplete:!0,collection:"carrocerias"},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",max:Number((new Date).getFullYear()+1)},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Aliena\xe7\xe3o Fiduci\xe1ria","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50}]].concat([aa]);function oa(e){var a=e.close,t=e.title,o=void 0===t?"Fechar":t;return n.a.createElement("div",{style:{position:"absolute",top:"0.4%",right:"0.4%"}},n.a.createElement("div",null,n.a.createElement("i",{className:"material-icons right",title:o,style:{cursor:"pointer",color:"red"},onClick:a},"close")))}t(375);function na(e){var a,t=e.data,o=e.type,r=e.equipamentos,i=e.handleCheck,l=e.close;return Array.isArray(r)&&(null===(a=r[0])||void 0===a?void 0:a.item)&&(r=r.sort((function(e,a){return e.item.localeCompare(a.item)}))),n.a.createElement("div",{className:"popUpWindow",style:{right:"25%",left:"25%"}},n.a.createElement("h4",{className:"equipaHeader"},"equipamentos"===o?"Equipamentos":"Itens de Acessibilidade")," ",n.a.createElement("hr",null),n.a.createElement("div",{className:"checkListContainer"},r.map((function(e,a){return n.a.createElement("span",{className:"checkListEquipa",key:a},n.a.createElement(Xe.a,{control:n.a.createElement(Ge.a,{checked:t[e.item],value:e.item,onChange:function(){return i(e.item,o)}}),label:n.a.createElement("p",{className:"checkListLabel"},e.item)}))}))),n.a.createElement(oa,{close:l}))}t(195);var ra=Object(X.a)((function(e){return{button:{marginRight:"15px"}}})),ia=function(e){var a=e.redux,t=e.data,r=e.handleInput,i=e.handleBlur,l=e.handleEquipa,c=e.handleCheck,s=e.closeEquipa,d=e.resetShared,u=e.removePartilha,m=Object(o.useState)(!1),p=Object(Be.a)(m,2),f=p[0],v=p[1],h=ra().button,b=a.empresas,g=a.compartilhados,E=a.equipamentos,x=a.acessibilidade,S=a.modelosChassi,O=a.carrocerias,y=t.activeStep,j=t.demand,C=t.addEquipa,w=t.subtitle,k=t.selectedEmpresa,D=t.type,I=t.placa,N=t.reactivated,A=ta[y],P=E;"acessibilidade"===D&&(P=x),t.modelosChassi=S,t.carrocerias=O,Object(o.useEffect)((function(){d&&v(!1)}),[d]);var T=w[y];return N&&(T+=" (reativa\xe7\xe3o de ve\xedculo)"),n.a.createElement(n.a.Fragment,null,n.a.createElement("header",{className:0!==y?"flex center":"paper flex center",style:{width:"100%"}},n.a.createElement("section",{className:"flexColumn",style:{marginBottom:"10px"}},n.a.createElement(Ye,{data:t,shared:f,empresas:b,compartilhados:g,headerTitle:I&&k&&"Cadastro de ve\xedculo ".concat(I," - ").concat(null===k||void 0===k?void 0:k.razaoSocial),handleBlur:i,handleInput:r})),0===y&&!j&&n.a.createElement("section",{className:"flex center",style:{width:"100%",margin:"-7px 0 -4px 0"}},n.a.createElement(Xe.a,{control:n.a.createElement(Ge.a,{checked:!0===f,onChange:function(){return f&&u(),void v(!f)},value:f}),label:n.a.createElement("h4",{style:{color:"#2979ff",fontSize:"0.7rem"}},"Ve\xedculo Compartilhado?")}))),k&&n.a.createElement("main",null,y<2&&n.a.createElement("section",{className:"paper",style:{paddingBottom:"25px"}},n.a.createElement($e,{subtitle:T}),n.a.createElement(We,{form:A,data:t,handleBlur:i,handleInput:r})),0===y&&n.a.createElement("section",{className:"flex center",style:{marginTop:"15px"}},n.a.createElement(Ze.a,{variant:"outlined",size:"small",color:"primary",className:h,onClick:function(){return l("equipamentos")}},n.a.createElement(ea.a,null),"Equipamentos"),n.a.createElement(Ze.a,{variant:"outlined",size:"small",color:"primary",className:h,onClick:function(){return l("acessibilidade")}},n.a.createElement(ea.a,null),"Acessibilidade")),C&&n.a.createElement(na,{equipamentos:P,close:s,handleCheck:c,data:t})))},la=t(428),ca=t(418),sa=t.n(ca),da=t(417),ua=t.n(da);function ma(e){var a=e.name,t=e.removeFile;return n.a.createElement("div",{style:{position:"absolute",top:"0.4%",right:"0.4%"}},n.a.createElement("div",null,n.a.createElement("i",{className:"material-icons right",title:"Remover arquivo",style:{cursor:"pointer",color:"red"},onClick:function(){return t(a)}},"close")))}function pa(e){var a=e.title,t=e.name,r=e.formData,i=e.handleFiles,l=e.dropDisplay,c=e.single,s=e.style,d=e.demandFiles,u=e.fileToRemove,m=e.removeFile,p=Object(o.useState)(),f=Object(Be.a)(p,2),v=f[0],h=f[1],b=Object(o.useState)(),g=Object(Be.a)(b,2),E=g[0],x=g[1];return Object(o.useEffect)((function(){d&&d[0]&&d.forEach((function(e){var a=e.filename,o=e.metadata;t===o.fieldName&&(h(a),x(!0))}))}),[d,t]),Object(o.useEffect)((function(){if(r instanceof FormData){var e,a=Object(je.a)(r.entries());try{for(a.s();!(e=a.n()).done;){var o=e.value;t===o[0]&&(h(o[1].name),x(!1),console.log(o[0],o[1]))}}catch(n){a.e(n)}finally{a.f()}}else r||d||h(null)}),[r,t,d,u]),Object(o.useEffect)((function(){if(u===t){var e=null===d||void 0===d?void 0:d.find((function(e){var a;return(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.fieldName)===u}));u&&e?(h(e.filename),x(!0)):u&&u===t&&h(void 0)}}),[d,u,i,t]),n.a.createElement("div",{style:s||null},n.a.createElement("div",{style:{position:"relative",marginRight:"8px"}},a?n.a.createElement("p",{className:"fileInput"},a||""):n.a.createElement("br",null),v&&!E&&n.a.createElement(ma,{removeFile:m,name:t})),n.a.createElement(la.a,{onDrop:function(e){return i(e,t)}},(function(e){var a=e.getRootProps,t=e.getInputProps;return n.a.createElement("div",Object.assign({style:E?{backgroundColor:"#aaa"}:{},className:v?"dropBox fileAttached":c?"dropBox":"multipleDropBox"},a()),n.a.createElement("input",t()),v?n.a.createElement(o.Fragment,null,n.a.createElement("div",null,n.a.createElement(ua.a,{className:"icon"}),v),c&&n.a.createElement("span",null,"(clique ou arraste outro arquivo para alterar)")):n.a.createElement("div",null," ",n.a.createElement(sa.a,{className:"icon"}),n.a.createElement("span",null,"  ",l)))})))}var fa=t(587),va=[{title:"CRLV do Ve\xedculo",name:"crlv"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"Laudo de Pesagem",name:"pesagem"},{title:"Nota Fiscal Carroceria",name:"nfCarroceria"},{title:"Nota Fiscal Chassi",name:"nfChassi"},{title:"Layout do Ve\xedculo",name:"layout"},{title:"Contrato",name:"contrato"},{title:"Outros Anexos",name:"outrosAnexos"}],ha=[{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"Laudo de Pesagem",name:"pesagem"},{title:"CRLV com nova placa",name:"newPlateDoc"},{title:"Layout do Ve\xedculo",name:"layout"},{title:"Outros Anexos",name:"outrosAnexos"}],ba=Object(X.a)((function(e){return{root:{flexGrow:"1",margin:"5px",padding:"8px"},sendButton:{margin:"3% 0 3% 0",backgroundColor:"teal",float:"right"},text:{textAlign:"left",margin:e.spacing(2),fontSize:"0.9rem",fontWeight:"500",color:"#333"},item:{margin:"0 0 18px 0",padding:"0 5px"}}}));function ga(e){var a,t=e.handleFiles,r=e.parentComponent,i=e.dropDisplay,l=e.formData,c=e.insuranceExists,s=e.demandFiles,d=e.removeFile,u=e.fileToRemove,m=ba(),p=m.root,f=m.item;return"cadastro"===r&&(a=va),"altDados"===r&&(a=ha),n.a.createElement("div",{className:"paper",style:{color:"#555"}},n.a.createElement($e,{subtitle:"Anexe os documentos solicitados nos campos abaixo"}),n.a.createElement(fa.a,{container:!0,className:p},a.map((function(e,a){var r=e.title,m=e.name;return"apoliceDoc"===m&&c?null:n.a.createElement(o.Fragment,{key:a},n.a.createElement(fa.a,{item:!0,xs:10,md:4,className:f},n.a.createElement(pa,{title:r,name:m,formData:l,dropDisplay:i,handleFiles:t,demandFiles:s,removeFile:d,fileToRemove:u})))}))))}var Ea=t(232),xa=t.n(Ea),Sa=t(231),Oa=t.n(Sa),ya=function(e,a,t,o){o&&"apoliceDoc"===o&&(t="empresaDocs"),T()({url:"/api/mongoDownload/?collection=".concat(t,"&id=").concat(e),method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),o=document.createElement("a");o.href=t,o.setAttribute("download",a),document.body.appendChild(o),o.click()})).catch((function(e){console.log(e)}))},ja={display:"flex",justifyContent:"center",width:"100%",alignContent:"center",flexWrap:"wrap"},Ca={textAlign:"center",alignItems:"flex-start",height:"40px",border:"1px #ccc solid",padding:"7px 8px 0 8px",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px"},wa={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},ka={verticalAlign:"middle",padding:"0 0% 0 2%"};function Da(e){var a=e.form,t=e.files,o=e.demandFiles,r=e.collection,i=e.style,l=void 0===i?{}:i,c=[];if(o&&o.forEach((function(e){a.forEach((function(a){var t,o=a.name,n=a.title;(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.fieldName)===o&&c.push({id:e.id,label:n,fieldName:o,fileName:e.filename,storage:"server"})}))})),t){var s,d=Object(je.a)(t.entries());try{var u=function(){var e=s.value;a.forEach((function(a){var t=a.name,o=a.title;if(t===e[0]&&e[1]&&e[1].name){var n=c.findIndex((function(e){return(null===e||void 0===e?void 0:e.fieldName)===t}));-1!==n?c[n]={label:o,fieldName:t,fileName:e[1].name,storage:"local"}:c.push({label:o,fieldName:t,fileName:e[1].name,storage:"local"})}}))};for(d.s();!(s=d.n()).done;)u()}catch(m){d.e(m)}finally{d.f()}}return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:ja},c.map((function(e,a){return n.a.createElement("div",{style:Object(h.a)(Object(h.a)({},Ca),l),key:a},n.a.createElement(Oa.a,{style:ka}),n.a.createElement("span",{style:{verticalAlign:"middle"}}," "," ",e.label),n.a.createElement(xa.a,{style:wa,onClick:function(){return"local"===e.storage?function(e,a){var o=t.get(e),n=window.URL.createObjectURL(o),r=document.createElement("a");r.href=n,o&&("application/pdf"===o.type||o.type.match("image/"))?(r.setAttribute("rel","noopener"),r.setAttribute("target","_blank"),r.setAttribute("title",a)):r.setAttribute("download",a),document.body.appendChild(r),r.click()}(e.fieldName,e.fileName):ya(e.id,e.fileName,r,e.fieldName)}}))}))))}function Ia(e){var a=e.length,t=e.title,o=e.labels,r=e.fields,i=e.values,l=e.style,c=e.docs,s=e.alteredElements,d=void 0===s?[]:s;return n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"tHeader",style:l,colSpan:a},t)),n.a.createElement("tr",null,o.map((function(e,a){return n.a.createElement("th",{key:a,style:l},e)})))),n.a.createElement("tbody",null,n.a.createElement("tr",null,i.map((function(e,a){return n.a.createElement("td",{className:"review",key:a,style:Object(h.a)(Object(h.a)({},l),{},{color:d.includes(r[a])?"red":"#000"}),onClick:function(){return c&&c.id?ya(c.id,c.filename,"vehicleDocs",c.metadata.fieldName):null}},(t=e,Ae()(t,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?Ae()(t,Ae.a.ISO_8601,!0).format("DD/MM/YYYY"):t));var t})))))}var Na=t(155),Aa=t(119),Pa=t.n(Aa),Ta=Object(X.a)((function(e){return{paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 5px 0",height:"auto"}}}));function Fa(e){var a,t,r=e.data,i=e.parentComponent,l=e.form,c=e.filesForm,s=e.files,d=Ta().paper,u=r.acessibilidade,m=r.equipamentos,p=r.alteracoes,v=r.demand,h=r.demandFiles,b=r.numeroDae,g=null===r||void 0===r?void 0:r.originalVehicle,E=b||(null===v||void 0===v?void 0:v.history)instanceof Array&&(null===v||void 0===v||null===(a=v.history.reverse().find((function(e){return e.numeroDae})))||void 0===a?void 0:a.numeroDae),x=[],S={},O=[],y=[],j=[];return l.forEach((function(e){e.forEach((function(e){r.hasOwnProperty([e.field])&&(Object.assign(S,Object(f.a)({},e.field,r[e.field])),O.push(e))})),x.push(S),y.push(O),S={},O=[]})),"cadastro"===i&&(t=[{subtitle:"Detalhes do ve\xedculo",form:y[0]||[],data:x[0]},{subtitle:"Detalhes do seguro",form:y[1]||[],data:x[1]},{subtitle:"Informa\xe7\xf5es sobre a vistoria",form:y[2]||[],data:x[2]}]),"altDados"===i&&(t=[{subtitle:"Detalhes do ve\xedculo",form:y[0],data:x[0]},{subtitle:"Informa\xe7\xf5es sobre a vistoria",form:y[1],data:x[1]}]),p&&"object"===typeof p&&(j=Object.keys(p)),g&&Object.keys(g).forEach((function(e){r[e]&&g[e]&&(r[e]===g[e]||j.includes(e)||j.push(e))})),n.a.createElement(n.a.Fragment,null,n.a.createElement(Na.a,{className:d},n.a.createElement("main",{className:"divTable"},t.map((function(e,a){var t=e.subtitle,r=e.form,i=e.data;return r&&i&&n.a.createElement(o.Fragment,{key:a},n.a.createElement(Ia,{length:(null===r||void 0===r?void 0:r.length)||1,title:t,labels:r.map((function(e){return e.label})),fields:r.map((function(e){return e.field})),values:Object.values(i),alteredElements:j}))}))),m&&m[0]&&n.a.createElement("section",{style:{margin:"0 0 13px 20px"}},n.a.createElement("p",{style:{fontWeight:500,color:"#555"}}," Equipamentos "),n.a.createElement("p",null,m&&m.map((function(e,a){return n.a.createElement("span",{className:"smallFont",key:a},a!==m.length-1?e+", ":e)})))),u&&u[0]&&n.a.createElement("section",{style:{margin:"0 0 13px 20px"}},n.a.createElement("p",{style:{fontWeight:500,color:"#555"}}," Itens de acessibilidade "),n.a.createElement("p",null,u.map((function(e,a){return n.a.createElement("span",{className:"smallFont",key:a},a!==u.length-1?e+", ":e)})))),(s||h)&&n.a.createElement("div",null,n.a.createElement("p",{style:{margin:"0 0 13px 11px",fontWeight:"500",color:"#555"}},n.a.createElement(Pa.a,{style:{verticalAlign:"middle",padding:"0 0 0 8px"}})," Documentos"),n.a.createElement(Da,{demand:v,collection:"vehicleDocs",demandFiles:h,form:c,files:s}),E&&n.a.createElement("span",{className:"smallFont addMargin"},"N\xba Documento Arrecada\xe7\xe3o Estadual: ",E))))}var za=t(606),La=t(419),Ma=t.n(La);function _a(e){var a=e.links,t=e.text,o=e.demand;return o&&(a=["Solicita\xe7\xf5es","/solicitacoes"],t="solicita\xe7\xe3o n\xba ".concat(null===o||void 0===o?void 0:o.numero)),n.a.createElement(fa.a,{style:{marginTop:"1%"}},n.a.createElement(za.a,{separator:"\u203a","aria-label":"breadcrumb"},n.a.createElement(S.b,{to:"/",style:{}},n.a.createElement(Ma.a,{style:{verticalAlign:"middle",marginRight:"5px",paddingBottom:"3px"}}),n.a.createElement("span",{style:{fontSize:"0.8rem"}},"P\xe1gina inicial")),n.a.createElement(S.b,{color:"primary",to:a[1],style:{fontSize:"0.8rem"}},a[0]),n.a.createElement("span",{style:{fontSize:"0.8rem"}},t)))}var qa=Object(X.a)((function(e){return{button:{margin:e.spacing(1),float:"right"},backButton:{margin:e.spacing(1),float:"left",color:"#333",backgroundColor:"#eee"},textField:{marginTop:"20px",width:"100%"}}}));function Va(e){var a,t=e.activeStep,r=e.setActiveStep,i=e.lastStep,l=e.handleSubmit,c=e.disabled,s=e.demand,d=e.uniqueStep,u=e.declineButtonLabel,m=e.setShowPendencias,p=e.showPendencias,f=e.handleInput,v=e.info,h=e.obs,b=e.addObs,g=qa(),E=g.backButton,x=g.button,S=g.textField;return(null===s||void 0===s?void 0:s.status.match("Pend\xeancias"))&&(a="empresa"),(null===s||void 0===s?void 0:s.status.match("Aguardando"))&&(a="seinfra"),Object(o.useEffect)((function(){function e(e){37===e.keyCode&&e.ctrlKey&&0!==t&&r("back"),39===e.keyCode&&e.ctrlKey&&t!==i&&r("next"),13===e.keyCode&&e.ctrlKey&&l()}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}})),n.a.createElement("div",{style:{width:"100%"}},t<i?n.a.createElement(n.a.Fragment,null,n.a.createElement(Ze.a,{variant:"contained",className:E,title:0!==t?"Ctrl + \u2190":null,onClick:function(){return r("back")},disabled:0===t},"Voltar"),n.a.createElement(Ze.a,{variant:"contained",color:"primary",title:c?null:"Ctrl + \u2192",className:x,onClick:function(){return r("next")},disabled:c},"Avan\xe7ar")):n.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},"seinfra"!==a||p||b?n.a.createElement(Je.a,{name:b?"obs":"info",className:S,value:b?h:v,label:s&&"empresa"!==a?s&&d?"Motivos para o indeferimento":p?"Pend\xeancias/irregularidades para a aprova\xe7\xe3o":"Observa\xe7\xf5es":"Observa\xe7\xf5es/informa\xe7\xf5es complementares",type:"text",onChange:f,InputLabelProps:{shrink:!0,style:{fontWeight:600,marginBottom:"5%"}},inputProps:{style:{paddingBottom:"2%"},maxLength:600},multiline:!0,rows:3,variant:"outlined"}):null,n.a.createElement("div",{style:{display:"flex",width:"100%"}},t===i&&!d&&n.a.createElement(Ze.a,{variant:"contained",className:E,title:0!==t?"Ctrl + \u2190":null,onClick:function(){return r("back")},disabled:0===t},"Voltar"),n.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%"}},s&&"empresa"!==a?n.a.createElement(n.a.Fragment,null,n.a.createElement(Ze.a,{variant:"outlined",color:"secondary",className:x,onClick:function(){return m()}},p?"Cancelar":u||"Registrar pendencias"),n.a.createElement(Ze.a,{variant:"contained",color:p?"secondary":"primary",className:x,onClick:function(){return l(!p)}},p?"Indeferir":"Aprovar")):n.a.createElement(Ze.a,{variant:"contained",color:"primary",className:x,onClick:function(){return l()}},"Enviar solicita\xe7\xe3o")))))}var Ra=t(588),Ba=t(589),Ua=t(590);function Ya(e){var a=e.activeStep,t=e.steps;return n.a.createElement("div",{className:"paper",style:{padding:"15px",margin:"10px 0"}},n.a.createElement(Ra.a,{activeStep:a},t.map((function(e,a){var t={};return n.a.createElement(Ba.a,Object.assign({key:e},{}),n.a.createElement(Ua.a,t,e))}))))}var Ha=function(e,a){if(/\d/.test(e)){var t=new Date(e).getDate()+"/"+(new Date(e).getMonth()+1)+"/"+new Date(e).getFullYear();return a&&(t+=", "+new Date(e).getHours()+":"+(new Date(e).getMinutes()<10?"0"+new Date(e).getMinutes():new Date(e).getMinutes())+"h"),t.toString()}return e},Ja=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.replace(/\D/g,"");return a=(a=(a=(a=(a/100).toFixed(2)+"").replace(".",",")).replace(/(\d)(\d{3})(\d{3}),/g,"$1.$2.$3,")).replace(/(\d)(\d{3}),/g,"$1.$2,")};var Ka=t(591),Wa=t(595),$a=t(593),Ga=t(594),Xa=t(592);function Za(e){var a=e.open,t=e.alertType,o=e.close,r=e.confirm,i=e.customTitle,l=e.customMessage,c=e.tab,s=function(e){var a="";if((c||0===c)&&(a=["a empresa","o s\xf3cio","a procura\xe7\xe3o","o ve\xedculo","o seguro"][c]),i&&l)return{title:i,message:l};switch(e){case"plateNotFound":return{title:"Placa n\xe3o encontrada",message:'A placa informada n\xe3o corresponde a nenhum ve\xedculo da frota da via\xe7\xe3o selecionada. Para cadastrar um novo ve\xedculo, selecione a op\xe7\xe3o Ve\xedculos => "Cadastro de Ve\xedculo" no menu acima.'};case"invalidPlate":return{title:"Placa inv\xe1lida",message:"Certifique-se de que a placa informada \xe9 uma placa v\xe1lida, com tr\xeas letras seguidas de 4 n\xfameros (ex: AAA-0000)"};case"plateExists":return{title:"Placa j\xe1 cadastrada!",message:"A placa informada j\xe1 est\xe1 cadastrada. Para atualizar seguro, alterar dados ou solicitar baixa, utilize as op\xe7\xf5es acima. "};case"invalidModel":return{title:"Modelo n\xe3o cadastrado.",message:l};case"inputError":return{title:"Preenchimento inv\xe1lido.",message:l};case"fieldsMissing":return{title:"Favor preencher todos os campos.",message:"Os campos acima s\xe3o de preenchimento obrigat\xf3rio. Certifique-se de ter preenchido todos eles."};case"invalidInsurance":return{title:"Favor verificar os dados do seguro.",message:"As informa\xe7\xf5es referentes ao seguro do ve\xedculo s\xe3o obrigat\xf3rias. Certifique-se de ter informado todas elas."};case"filesNotFound":return{title:"Arquivos n\xe3o encontrados",message:"N\xe3o h\xe1 nenhum documento aprovado no sistema para ".concat(a," selecionad").concat(a.charAt(0),".\n          Caso haja uma solicita\xe7\xe3o em aberto para ").concat(a,', acesse a op\xe7\xe3o "Solicita\xe7\xf5es" no menu superior para ter acesso aos arquivos.')};case"empresaNotFound":return{title:"Empresa n\xe3o encontrada.",message:"A empresa informada n\xe3o est\xe1 registrada no sistema. Para cadastrar uma nova empresa, utilize a op\xe7\xe3o Empresas -> Cadastrar."};case"seguradoraNotFound":return{title:"Seguradora n\xe3o encontrada.",message:"A seguradora informada n\xe3o est\xe1 registrada no sistema. Favor verificar o nome da seguradora."};case"alreadyExists":return{title:"CPF j\xe1 cadastrado.",message:"O CPF informado corresponde a um s\xf3cio j\xe1 cadastrado. \n          Para remover ou editar as informa\xe7\xf5es dos s\xf3cios, utilize a respectiva op\xe7\xe3o abaixo."};case"numberNotValid":return{title:"N\xfamero inv\xe1lido.",message:"O n\xfamero digitado n\xe3o \xe9 v\xe1lido."};case"overShared":return{title:"Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",message:"A participa\xe7\xe3o societ\xe1ria informada excede a 100%."};case"subShared":return{title:"Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",message:"A participa\xe7\xe3o societ\xe1ria informada n\xe3o soma 100%. Favor informar todos os s\xf3cios com suas respectivas participa\xe7\xf5es."};case"veiculoPendente":return{title:"Pend\xeancias encontradas para este ve\xedculo.",message:"Verifique se h\xe1 alguma aprova\xe7\xe3o pendente quanto ao cadastro, seguro, transfer\xeancia ou altera\xe7\xe3o de dados do ve\xedculo."};case"seguroVencido":return{title:"Pend\xeancias encontradas para o seguro deste ve\xedculo.",message:"Para regularizar o seguro deste ve\xedculo, acesse a op\xe7\xe3o Ve\xedculos=>Seguros no menu acima."};case"contratoVencido":return{title:"Contrato expirado.",message:"O contrato de concess\xe3o com o delegat\xe1rio selecionado est\xe1 expirado."};default:return{title:null,message:null}}}(t),d=s.title,u=s.message;return d&&u?n.a.createElement("div",null,n.a.createElement(Ka.a,{open:a,onClose:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(Xa.a,{id:"alert-dialog-title"},d),n.a.createElement($a.a,null,n.a.createElement(Ga.a,{id:"alert-dialog-description"},u)),n.a.createElement(Wa.a,null,n.a.createElement(Ze.a,{onClick:o,color:"primary"},r?"Cancelar":"Fechar"),r&&n.a.createElement(Ze.a,{onClick:o,color:"primary",autoFocus:!0},"Confirmar")))):null}var Qa=function(e,a,t){var o,n;return"leitoEExecutivo"===(e=A.a.camelize(e))&&(e="leitoExecutivo"),t[e]&&a&&""!==a&&(a=Number(a),o=(n=t[e])<=a),!o&&(n?'A dist\xe2ncia m\xednima para a utiliza\xe7\xe3o "'.concat(e,'" \xe9 de ').concat(n,' cent\xedmetros. Altere a dist\xe2ncia ou clique em "voltar" para alterar a utiliza\xe7\xe3o.'):void 0)},et=[{field:"veiculoId",label:"N\xfamero"},{field:"placa",label:"Placa"},{field:"renavam",label:"RENAVAM"},{field:"utilizacao",label:"Utiliza\xe7\xe3o"},{field:"codigoEmpresa",label:"C\xf3digo"},{field:"empresa",label:"Delegat\xe1rio"},{field:"dataRegistro",label:"Data de Registro"},{field:"situacao",label:"Situa\xe7\xe3o"},{field:"motivoBaixa",label:"Motivo da Baixa"},{field:"dataBaixa",label:"Data baixa"},{field:"nChassi",label:"N\xfamero chassi"},{field:"marcaChassi",label:"Marca chassi"},{field:"modeloChassi",label:"Modelo chassi"},{field:"anoChassi",label:"Ano chassi"},{field:"valorChassi",label:"Valor Chassi"},{field:"marcaCarroceria",label:"Marca carroceria"},{field:"modeloCarroceria",label:"Modelo carroceria"},{field:"anoCarroceria",label:"Ano carroceria"},{field:"indicadorIdade",label:"Indicador de Idade"},{field:"valorCarroceria",label:"Valor carroceria"},{field:"dominio",label:"Leasing"},{field:"delegatarioCompartilhado",label:"Empresas autorizadas a compartilhar"},{field:"cores",label:"Cores"},{field:"seguradora",label:"Seguradora"},{field:"apolice",label:"Ap\xf3lice"},{field:"dataEmissao",label:"Data Inicio"},{field:"vencimento",label:"Data Fim"},{field:"empresaLaudo",label:"Empresa Laudo"},{field:"numeroLaudo",label:"N\xfamero Laudo"},{field:"validade",label:"Validade Laudo"},{field:"cilindros",label:"Cilindros"},{field:"potencia",label:"Pot\xeancia"},{field:"eixos",label:"Eixos"},{field:"pneumaticosDianteiros",label:"Pneum\xe1ticos Dianteiros"},{field:"pneumaticosTraseiros",label:"Pneum\xe1ticos Traseiros"},{field:"pesoDianteiro",label:"Peso Dianteiro"},{field:"pesoTraseiro",label:"Peso Traseiro"},{field:"pbt",label:"PBT"},{field:"poltronas",label:"Poltronas"},{field:"piquesPoltrona",label:"Piques Poltrona"},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima"},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima"},{field:"equipamentos",label:"Equipamentos"},{field:"acessibilidade",label:"Acessibilidade"},{field:"sipro",label:"SIPRO"},{field:"obs",label:"Observa\xe7\xe3o"}],at=function(e){var a,t=e.props.redux.modelosChassi,o=e.state.modeloChassi;if(o){var n=null===(a=t.find((function(e){return e.modeloChassi===o})))||void 0===a?void 0:a.cmt;console.log("\ud83d\ude80 ~ file: CadVeiculo.jsx ~ line 190 ~ VeiculosContainer ~ cmt",n),e.setState({cmt:n})}},tt=function(e){if(e)return"0"!==(e=e.toString().replace(".",",").replace(",000","")).slice(-1)||","!==e.charAt(1)&&","!==e.charAt(2)||(e=e.slice(0,e.length-1)),"0"!==e.slice(-1)||","!==e.charAt(1)&&","!==e.charAt(2)||(e=e.slice(0,e.length-1)),console.log(e),e},ot=function(e,a){var t=e.state,o=t.poltronas,n=t.pesoDianteiro,r=t.pesoTraseiro,i=t.cmt,l=t.modeloChassi;r=r||0;var c=.08*+(o=o||0)+(+((n=n||0)&&parseFloat(n.replace(",",".")).toFixed(3))+ +(r&&parseFloat(r.replace(",",".")).toFixed(3)));if(+i>=(c=isNaN(c)?void 0:c.toFixed(3)))c=Number(tt(c).replace(",",".")),e.setState({pbt:c});else{var s=tt(c),d=i&&i.toString().replace(".",","),u="O n\xfamero de poltronas e os pesos dianteiro e traseiro informados formam um peso bruto total de ".concat(s,"t, superior \xe0 \n                Carga M\xe1xima de tra\xe7\xe3o permitida: modelo ").concat(l," -> ").concat(d,"t.");e.setState(Object(f.a)({openAlertDialog:!0,customTitle:"Peso total bruto superior ao permitido (CMT) para o modelo de chassi informado.",customMessage:u},a,0)),setTimeout((function(){document.getElementsByName(a)[0].focus()}),1550)}},nt=ce(["veiculos","empresas","compartilhados","modelosChassi","carrocerias","equipamentos","acessibilidade","getFiles/vehicleDocs","parametros"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(w.a)(this,t),(e=a.call(this)).state={activeStep:0,steps:["Dados do Ve\xedculo","Vistoria e laudos","Documentos","Revis\xe3o"],subtitle:["Informe os dados do ve\xedculo.","Preencha os campos abaixo conforme a vistoria realizada"],razaoSocial:"",frota:[],delegatarioCompartilhado:"",toastMsg:"Ve\xedculo cadastrado!",confirmToast:!1,addEquipa:!1,openAlertDialog:!1,dropDisplay:"Clique ou arraste para anexar"},e.setActiveStep=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==e.state.activeStep){a.next=7;break}if(!e.state.frota.filter((function(a){return a.placa===e.state.placa}))[0]){a.next=7;break}return a.next=5,e.setState({placa:""});case 5:return e.setState({alertType:"plateExists",openAlertDialog:!0}),a.abrupt("return",null);case 7:if(!(o=e.state.errors)||!o[0]){a.next=12;break}return a.next=11,e.setState(Object(h.a)(Object(h.a)({},e.state),Pe("setState")));case 11:return a.abrupt("return");case 12:n=e.state.activeStep,"next"===t&&e.setState({activeStep:n+1}),"back"===t&&e.setState({activeStep:n-1}),"reset"===t&&e.setState({activeStep:0});case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.props.redux,n=o.veiculos,r=o.empresas,i=t.target.name,l=t.target.value,e.setState(Object(f.a)({},i,l)),a.t0=i,a.next="razaoSocial"===a.t0?6:"placa"===a.t0?18:"utilizacao"===a.t0?23:"valorChassi"===a.t0?25:"valorCarroceria"===a.t0?27:29;break;case 6:if(!(c=r.find((function(e){return e.razaoSocial===l})))){a.next=16;break}return s=c.razaoSocial,d=c.codigoEmpresa,a.next=11,e.setState({selectedEmpresa:c,razaoSocial:s,codigoEmpresa:d});case 11:l!==c.razaoSocial&&e.setState({selectedEmpresa:void 0}),u=n.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:u}),a.next=17;break;case 16:e.setState({selectedEmpresa:void 0,frota:[],placa:void 0});case 17:return a.abrupt("break",30);case 18:if("string"!==typeof l){a.next=22;break}return l=l.toLocaleUpperCase(),a.next=22,e.setState(Object(f.a)({},i,l));case 22:return a.abrupt("break",30);case 23:return e.setState({distanciaMinima:void 0,distanciaMaxima:void 0}),a.abrupt("break",30);case 25:case 27:return e.setState(Object(f.a)({},i,Ja(l))),a.abrupt("break",30);case 29:case 30:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.checkValid=function(){var a=Object(C.a)(j.a.mark((function a(t,o,n,r,i,l,c){var s,d,u,m,p,v;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((d=n.find((function(e){return e[i].toLowerCase()===o.toLowerCase()})))||!o||""===o){a.next=7;break}return a.next=4,e.setState((u={},Object(f.a)(u,t,""),Object(f.a)(u,r,""),u));case 4:return e.setState({alertType:"invalidModel",openAlertDialog:!0,customTitle:"Modelo inv\xe1lido.",customMessage:"O modelo de ".concat(c," n\xe3o est\xe1 cadastrado no sistema.")}),document.getElementsByName(t)[0].focus(),a.abrupt("return");case 7:if(""===o&&e.setState((s={},Object(f.a)(s,t,""),Object(f.a)(s,r,""),s)),!d){a.next=13;break}if(p=d[i],v=d[l],""===o){a.next=13;break}return a.next=13,e.setState((m={},Object(f.a)(m,t,p),Object(f.a)(m,r,v),m));case 13:case"end":return a.stop()}}),a)})));return function(e,t,o,n,r,i,l){return a.apply(this,arguments)}}(),e.handleBlur=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m,p,f,v,h,b,g,E,x,S,O,y,C,w,k,D,I,N,A,P,T,F;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.props.redux,n=o.empresas,r=o.modelosChassi,i=o.carrocerias,l=o.parametros,c=l[0],s=c.distanciaPoltronas,d=c.idadeBaixa,u=d.idadeMaxCad,m=d.difIdade,p=d.idadeBaixaAut,f=e.state,v=f.anoCarroceria,h=f.anoChassi,b=f.utilizacao,g=f.distanciaMinima,E=f.distanciaMaxima,x=f.situacao,S=t.target.name,O=Number(v),y=Number(h),C=(new Date).getFullYear(),w=t.target.value,I=C-u,x&&x.match("Reativa\xe7\xe3o")&&(I=C-p),(N=Pe())?e.setState({errors:N}):e.setState({errors:void 0}),a.t0=S,a.next="modeloChassi"===a.t0?8:"modeloCarroceria"===a.t0?13:"delegatarioCompartilhado"===a.t0?15:"anoChassi"===a.t0?17:"anoCarroceria"===a.t0?22:"distanciaMinima"===a.t0?27:"distanciaMaxima"===a.t0?31:"pesoDianteiro"===a.t0?35:"pesoTraseiro"===a.t0?37:"poltronas"===a.t0?39:41;break;case 8:return a.next=10,e.checkValid(S,w,r,"modeloChassiId","modeloChassi","id","chassi");case 10:return at(Object(Se.a)(e)),e.setState({pesoDianteiro:void 0,pesoTraseiro:void 0}),a.abrupt("break",42);case 13:return e.checkValid(S,w,i,"modeloCarroceriaId","modelo","id","carroceria"),a.abrupt("break",42);case 15:return e.checkValid(S,w,n,"compartilhadoId","razaoSocial","codigoEmpresa"),a.abrupt("break",42);case 17:return k="Ano de chassi inv\xe1lido.",y&&y<I-1&&(D="O ano de fabrica\xe7\xe3o do chassi informado \xe9 anterior \xe0 idade m\xe1xima permitida para cadastro."),O&&y&&(O<y||O>y+m)&&(D="O ano de chassi \xe9 incompat\xedvel com o ano da carroceria informado."),D&&e.setState({anoChassi:"",openAlertDialog:!0,customTitle:k,customMessage:D}),a.abrupt("break",42);case 22:return k="Ano de carroceria inv\xe1lido.",O&&O<I&&(D="O ano de fabrica\xe7\xe3o do carroceria informado \xe9 anterior \xe0 idade m\xe1xima permitida."),O&&y&&(O<y||O>y+m)&&(D="O ano de fabrica\xe7\xe3o carroceria \xe9 incompat\xedvel com o ano do chassi informado."),D&&e.setState({anoCarroceria:"",openAlertDialog:!0,customTitle:k,customMessage:D}),a.abrupt("break",42);case 27:return b&&(A=Qa(b,g,s)),g&&+g>+E&&(A="A Dist\xe2ncia m\xednima n\xe3o pode ser superior \xe0 dist\xe2ncia m\xe1xima."),A&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xednima inv\xe1lida.",customMessage:A,distanciaMinima:""}),a.abrupt("break",42);case 31:return b&&(P=Qa(b,E,s)),E&&+E<+g&&(P="A Dist\xe2ncia m\xe1xima n\xe3o pode ser inferior \xe0 dist\xe2ncia m\xednima."),P&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xe1xima inv\xe1lida.",customMessage:P,distanciaMaxima:""}),a.abrupt("break",42);case 35:case 37:case 39:return ot(Object(Se.a)(e),S),a.abrupt("break",42);case 41:case 42:if("placa"!==S||"string"===typeof e.state.frota){a.next=54;break}if(7!==w.length){a.next=48;break}return T=w.replace(/(\w{3})/,"$1-"),a.next=47,e.setState({placa:T,reactivated:!1});case 47:w=T;case 48:if(8!==w.length){a.next=53;break}return F=w.replace(" ","-"),a.next=52,e.setState({placa:F,reactivated:!1});case 52:w=F;case 53:e.checkPlateConflict(w);case 54:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.checkPlateConflict=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,T.a.get("/api/alreadyExists?table=veiculos&column=placa&value=".concat(t));case 2:if(o=a.sent,n=null===o||void 0===o?void 0:o.data,r=null===n||void 0===n?void 0:n.vehicleFound,!n||e.state.demand){a.next=22;break}if("existing"!==(c=n.status)){a.next=14;break}return(null===r||void 0===r?void 0:r.situacao.match(/Cadastro|Reativa\xe7\xe3o/g))?(i="Solicita\xe7\xe3o aberta.",l="J\xe1 existe uma solicita\xe7\xe3o de cadastro ou reativa\xe7\xe3o para a placa informada. Para acompanhar, acesse 'Solicita\xe7\xf5es' e filtre pela placa do ve\xedculo. "):(i="Ve\xedculo j\xe1 cadastrado.",l="A placa informada corresponde a um ve\xedculo j\xe1 cadastrado. Para alterar o cadastro, v\xe1 para Ve\xedculos -> 'Altera\xe7\xe3o de dados'."),e.setState({customTitle:i,customMessage:l,openAlertDialog:!0,placa:null,reactivated:!1}),t="",a.abrupt("return");case 14:if("Reativado"!==r["Situa\xe7\xe3o"]){a.next=21;break}return a.delegateYield(j.a.mark((function a(){var t,o,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(n in t={},o=function(e){et.forEach((function(a){var o=a.field,n=a.label;e===n&&["renavam","nChassi","anoChassi","anoCarroceria"].includes(o)&&(t[o]=r[e])}))},r)o(n);return t.situacao="Reativa\xe7\xe3o solicitada",a.next=6,e.setState(Object(h.a)(Object(h.a)({},t),{},{reactivated:!0}));case 6:return a.abrupt("return",{v:void 0});case 7:case"end":return a.stop()}}),a)}))(),"t0",16);case 16:if("object"!==typeof(s=a.t0)){a.next=19;break}return a.abrupt("return",s.v);case 19:a.next=22;break;case 21:"discharged"===c&&(i="Ve\xedculo baixado.",l="A placa informada corresponde a um ve\xedculo baixado. Para reativar seu cadastro, v\xe1 para Ve\xedculos -> Baixa -> 'Gerenciar Ve\xedculos Baixados'.",e.setState({customTitle:i,customMessage:l,openAlertDialog:!0,placa:null,reactivated:!1}),t="");case 22:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleEquipa=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=e.props.redux[t],n=[],r=[],a.next=4,e.setState({type:t});case 4:!1===e.state.addEquipa&&(e.state[t]&&(r=e.state[t]),o.forEach((function(e){var a=e.item;r.forEach((function(e){e.toLowerCase()===a.toLowerCase()&&n.push(a)}))})),n.forEach((function(a){return e.setState(Object(f.a)({},a,!0))}))),e.setState({addEquipa:!e.state.addEquipa});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleCheck=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state.type,r=e.props.redux[n]){a.next=3;break}return a.abrupt("return");case 3:return i=[],l=[],"equipamentos"===n&&(c="equipamentosId"),"acessibilidade"===n&&(c="acessibilidadeId"),a.next=8,e.setState(Object(h.a)(Object(h.a)({},e.state),{},Object(f.a)({},t,!e.state[t])));case 8:r.forEach((function(a){var t=a.id,o=a.item;!0===e.state[o]&&(i.push(o),l.push(t))})),i[0]?e.setState((o={},Object(f.a)(o,n,i),Object(f.a)(o,c,l),o)):"equipamentos"===n?e.setState(Object(f.a)({equipamentos:[]},c,[])):"acessibilidade"===n&&e.setState(Object(f.a)({acessibilidade:[]},c,[]));case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleCadastro=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m,p,v,b,g,E,x,S,O,y,C,w,k,D,I,N,P,F,z,L,M,_;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(P in n=e.state,r=n.equipamentosId,i=n.acessibilidadeId,l=n.pbt,c=n.compartilhadoId,s=n.modeloChassiId,d=n.originalVehicle,u=n.getUpdatedValues,m=n.modeloCarroceriaId,p=n.selectedEmpresa,v=n.showPendencias,b=n.obs,g=n.form,E=n.demand,x=n.demandFiles,S=n.reactivated,O=p.codigoEmpresa,y=null===E||void 0===E?void 0:E.veiculoId,C=(null===E||void 0===E||null===(o=E.history)||void 0===o?void 0:o.length)||0,k="Cadastro solicitado",D={},ta.forEach((function(a){a.forEach((function(a){for(var t in e.state)t===a.field&&""!==e.state[t]&&Object.assign(D,Object(f.a)({},t,e.state[t]))}))})),D.delegatarioCompartilhado,D.modeloChassi,D.modeloCarroceria,D.apolice,I=D.numeroDae,N=Object(Y.a)(D,["delegatarioCompartilhado","modeloChassi","modeloCarroceria","apolice","numeroDae"]),Object.assign(N,{codigoEmpresa:O,situacao:k,pbt:l,modeloChassiId:s,modeloCarroceriaId:m,obs:b,equipamentosId:r,acessibilidadeId:i,apolice:"Seguro n\xe3o cadastrado"}),N)""===N[P]&&delete N[P];if(console.log(N),N.compartilhadoId=c&&c,E&&d&&(N=u(d,N)),F=A.a.decamelizeKeys(N),y){a.next=16;break}return a.next=14,T.a.post("/api/cadastroVeiculo",F).then((function(e){w=e.data})).catch((function(e){return console.log(e)}));case 14:a.next=21;break;case 16:return w=y,E&&t&&!v&&(k="Seguro n\xe3o cadastrado"),"veiculos","veiculo_id",z=Object(h.a)(Object(h.a)({},F),{},{situacao:k}),a.next=21,T.a.put("/api/updateVehicle",{requestObject:z,table:"veiculos",tablePK:"veiculo_id",id:w,codigoEmpresa:O});case 21:"string"===typeof(L=e.state.info)&&I&&(L+="\n\n N\xba Documento Arrecada\xe7\xe3o Estadual: ".concat(I)),M={empresaId:null===p||void 0===p?void 0:p.codigoEmpresa,veiculoId:w,history:{info:L,numeroDae:I,files:g},metadata:{veiculoId:w},demandFiles:x,historyLength:C,approved:t},E&&(M.id=null===E||void 0===E?void 0:E.id),S&&(M.subject="Reativa\xe7\xe3o de ve\xedculo"),Ve(M).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),t?e.toast():(_="Solicita\xe7\xe3o de cadastro enviada.",E&&E.status.match("Aguardando")&&(_="Pend\xeancias para o cadastro registradas."),e.toast(_)),E?setTimeout((function(){e.props.history.push("/solicitacoes")}),1500):e.resetState();case 29:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleFiles=function(){var a=Object(C.a)(j.a.mark((function a(t,o){var n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t||!t[0]){a.next=5;break}return a.next=3,e.setState(Object(f.a)({},o,t[0]));case 3:n=we(t,e.state,va),e.setState(Object(h.a)(Object(h.a)({},n),{},{fileToRemove:null}));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.removeFile=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.state.form,n=Ie(t,o),e.setState(Object(h.a)(Object(h.a)({},e.state),n));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.resetState=function(){var a,t=e.props.redux,o=t.empresas,n=t.veiculos,r=t.equipamentos,i=t.acessibilidade,l=r.concat(i),c={},s={};ta.forEach((function(a){return a.forEach((function(a){return e.setState(Object(f.a)({},a.field,""))}))})),va.forEach((function(e){var a=e.name;Object.assign(c,Object(f.a)({},a,void 0))})),l.forEach((function(a){return e.setState(Object(f.a)({},a.item,!1))})),o&&1===o.length&&(s={selectedEmpresa:o[0],razaoSocial:null===(a=o[0])||void 0===a?void 0:a.razaoSocial,frota:n}),e.setState(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},c),{acessibilidade:[],acessibilidadeId:[],equipamentos:[],equipamentosId:[]}),l),{},{form:void 0,info:void 0,activeStep:0},s))},e.closeEquipa=function(){return e.setState({addEquipa:!1})},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.removePartilha=function(){return e.setState({compartilhado:void 0})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.closeEquipa()},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(C.a)(j.a.mark((function e(){var a,t,o,n,r,i,l,c,s,d,u,m,p,v,b,g,E;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props.redux,i=r.equipamentos,l=r.acessibilidade,c=r.empresas,s=r.veiculos,d=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(o=t.state)||void 0===o?void 0:o.demand,c&&1===c.length&&this.setState({selectedEmpresa:c[0],razaoSocial:null===(n=c[0])||void 0===n?void 0:n.razaoSocial,frota:s}),d&&(m=!1,v=Oe(d,r),b=(null===d||void 0===d?void 0:d.history)&&(null===(u=d.history.reverse().find((function(e){return e.hasOwnProperty("numeroDae")})))||void 0===u?void 0:u.numeroDae),console.log("\ud83d\ude80 ~ file: CadVeiculo.jsx ~ line 75 ~ VeiculosContainer ~ componentDidMount ~ demandState",v),d.status.match("Pend\xeancias")&&(p=!0,v.obs=void 0),v.situacao.match("Reativa\xe7\xe3o")&&(m=!0),this.setState(Object(h.a)(Object(h.a)({},v),{},{numeroDae:b,activeStep:3,reactivated:m,existingPendencias:p}))),g={},E={},i.forEach((function(e){return Object.assign(g,Object(f.a)({},null===e||void 0===e?void 0:e.item,!1))})),l.forEach((function(e){return Object.assign(E,Object(f.a)({},null===e||void 0===e?void 0:e.item,!1))})),e.next=8,this.setState(Object(h.a)(Object(h.a)({},g),E));case 8:document.addEventListener("keydown",this.escFunction,!1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({}),document.removeEventListener("keydown",this.escFunction,!1)}},{key:"render",value:function(){var e=this.state,a=e.confirmToast,t=e.toastMsg,r=e.activeStep,i=e.openAlertDialog,l=e.alertType,c=e.steps,s=e.selectedEmpresa,d=e.dropDisplay,u=e.form,m=e.demand,p=e.demandFiles,f=e.showPendencias,v=e.info,h=e.resetShared,b=e.customMessage,g=e.customTitle,E=e.obs,x=e.existingPendencias,S=this.props.redux;return n.a.createElement(o.Fragment,null,n.a.createElement(_a,{links:["Ve\xedculos","/veiculos"],text:"Cadastro de ve\xedculo",demand:m,selectedEmpresa:s}),n.a.createElement(Ya,{activeStep:r,steps:c,setActiveStep:this.setActiveStep}),n.a.createElement(ia,{data:this.state,redux:S,handleInput:this.handleInput,handleBlur:this.handleBlur,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck,closeEquipa:this.closeEquipa,match:this.props.match,resetShared:h,removePartilha:this.removePartilha}),2===r&&n.a.createElement(ga,{parentComponent:"cadastro",dropDisplay:d,formData:u,handleFiles:this.handleFiles,demandFiles:p,fileToRemove:this.state.fileToRemove,removeFile:this.removeFile}),3===r&&n.a.createElement(Fa,{parentComponent:"cadastro",data:this.state,files:this.state.form,filesForm:va,form:ta}),s&&n.a.createElement(Va,{activeStep:r,lastStep:c.length-1,setActiveStep:this.setActiveStep,demand:m,setShowPendencias:this.setShowPendencias,showPendencias:f,info:v,handleSubmit:this.handleCadastro,handleInput:this.handleInput,addObs:m&&!x&&!f,obs:E}),n.a.createElement(ee,{open:a,close:this.toast,msg:t}),i&&n.a.createElement(Za,{open:i,close:this.toggleDialog,alertType:l,customMessage:b,customTitle:g}))}}]),t}(o.PureComponent)),rt=function(e,a){var t=window.location.pathname;qe.forEach((function(e,a){return e.path=qe[a].path.replace("/veiculos","").replace("/solicitacoes","").replace("/empresas","")}));var o=qe.find((function(e){return t.match(null===e||void 0===e?void 0:e.path)})),n=null===o||void 0===o?void 0:o.subject,r=null===o||void 0===o?void 0:o.primaryKey,i=a.find((function(a){return a.subject===n&&a[r]==e&&!1===a.completed}));return i||!1},it=[[{field:"placa",label:"Placa",autoComplete:!0,collection:"frota"},{field:"compartilhado",label:"Delegat\xe1rio Compartilhado",disabled:!0},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Comercial","Comercial Executivo","Convencional","Convencional Executivo","Leito","Leito e Executivo","Semi-Leito","Semi-Leito Executivo"]},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Aliena\xe7\xe3o Fiduci\xe1ria","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50},{field:"renavam",label:"Renavam",margin:"normal",disabled:!0},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17,disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",disabled:!0},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",disabled:!0},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",disabled:!0},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",disabled:!0},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,disabled:!0}]].concat([[{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piquesPoltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150},{field:"eixos",label:"Eixos",margin:"normal",type:"number",max:8},{field:"pneumaticosDianteiro",label:"Pneum\xe1ticos Eixo Dianteiro",margin:"normal",type:"number",max:12},{field:"pneumaticosTraseiro",label:"Pneum\xe1ticos Eixo Traseiro",margin:"normal",type:"number",max:18},{field:"pesoDianteiro",label:"Peso Dianteiro (t)",margin:"normal",type:"number",max:15},{field:"pesoTraseiro",label:"Peso Traseiro (t)",margin:"normal",type:"number",max:18},{field:"cilindros",label:"Cilindros",margin:"normal",type:"number",max:12,step:1,disabled:!0},{field:"potencia",label:"Pot\xeancia (cv)",margin:"normal",type:"number",max:600,disabled:!0},{field:"numeroDae",label:"N\xba Documento Arrecada\xe7\xe3o Estadual",maxLength:40}]]).concat([[]]).concat([[]]),lt=Object(X.a)((function(e){return{button:{marginRight:"15px"}}})),ct=function(e){var a=e.handleInput,t=e.handleBlur,o=e.data,r=e.handleCheck,i=e.handleEquipa,l=e.altPlacaOption,c=e.showAltPlaca,s=e.empresas,d=e.compartilhados,u=e.equipamentos,m=e.acessibilidade,p=e.close,f=o.activeStep,v=o.subtitle,h=o.placa,b=o.selectedEmpresa,g=o.addEquipa,E=o.demand,x=o.type,S=lt().button,O=it[f],y=u;return"acessibilidade"===x&&(y=m),n.a.createElement("div",{className:"flex center"},n.a.createElement("header",{className:"flex center",style:{marginBottom:"10px",width:"100%"}},n.a.createElement(Ye,{data:o,empresas:s,compartilhados:d,headerTitle:b&&"Altera\xe7\xe3o de dados ".concat(h||""," - ").concat(null===b||void 0===b?void 0:b.razaoSocial),handleInput:a,handleBlur:t})),b&&n.a.createElement("main",null,f<2&&n.a.createElement("section",{className:"paper"},n.a.createElement($e,{subtitle:v[f]}),n.a.createElement(We,{form:O,data:o,empresas:s,compartilhados:d,handleBlur:t,handleInput:a,disableSome:E?["placa","delegatario"]:["delegatario"]})),0===f&&n.a.createElement("section",{className:"flex center"},n.a.createElement(Ze.a,{variant:"outlined",size:"small",color:"primary",className:S,onClick:function(){return i("equipamentos")}},n.a.createElement(ea.a,null),"Equipamentos"),n.a.createElement(Ze.a,{variant:"outlined",size:"small",color:"primary",className:S,onClick:function(){return i("acessibilidade")}},n.a.createElement(ea.a,null),"Acessibilidade")),l&&h.match("[a-zA-Z]{3}[-]?\\d{4}")&&n.a.createElement("div",{className:"addNewDiv"},n.a.createElement("span",{onClick:function(){return c()}}," \u2192 Clique aqui para alterar a placa para o formato Mercosul.")),g&&n.a.createElement(na,{type:x,equipamentos:y,close:p,handleCheck:r,data:o})))};function st(e){var a=e.open,t=e.close,o=e.title,r=e.header,i=e.inputNames,l=e.inputLabels,c=e.fileInputName,s=e.confirm,d=e.handleInput,u=e.handleFiles,m=e.values,p=e.formData,f=e.dropDisplay,v=e.type,h=void 0===v?"text":v,b=!0,g=function(e,a){if("newPlate"===e)return a.length<9&&a.match("[a-zA-Z]{3}?[-]\\d{1}\\w{1}\\d{2}")?(b=!1,!1):(b=!0,!0)};return n.a.createElement(Ka.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-title"},n.a.createElement(Xa.a,{id:"form-dialog-title"},o),n.a.createElement($a.a,null,n.a.createElement(Ga.a,null,r),n.a.createElement("br",null),i.map((function(e,a){return n.a.createElement(Je.a,{key:a,autoFocus:"newPlate"===e&&!0,name:e,label:l[a],onChange:d,values:m[a],type:h,error:g(e,m[a]),fullWidth:!0,InputLabelProps:{shrink:!0}})})),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(pa,{title:"Anexar arquivo",name:c,formData:p,dropDisplay:f,handleFiles:u})),n.a.createElement(Wa.a,null,n.a.createElement(Ze.a,{onClick:t,color:"primary"},"Cancelar"),n.a.createElement(Ze.a,{onClick:s,color:"primary",disabled:b},"Confirmar")))}var dt=ce(["veiculos","empresas","compartilhados","equipamentos","acessibilidade","getFiles/vehicleDocs","parametros"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(w.a)(this,t),(e=a.call(this)).state={stepTitles:["Informe a placa para alterar os dados abaixo ou mantenha as informa\xe7\xf5es atuais e clique em avan\xe7ar","Altere os dados desejados abaixo e clique em avan\xe7ar","Anexe os documentos solicitados","Revis\xe3o das informa\xe7\xf5es e deferimento"],steps:["Alterar dados do Ve\xedculo","Alterar dados adicionais","Documentos","Revis\xe3o"],subtitle:["Informe os dados do ve\xedculo.","Informa\xe7\xf5es adicionais","Anexe os arquivos solicitados","Revis\xe3o"],empresas:[],razaoSocial:"",compartilhadoId:"",frota:[],toastMsg:"Dados atualizados!",confirmToast:!1,activeStep:0,files:[],openAlertDialog:!1,altPlaca:!1,newPlate:"",placa:"",addEquipa:!1,dropDisplay:"Clique ou arraste para anexar",showPendencias:!1},e.setActiveStep=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(o=e.state.errors)||!o[0]){a.next=4;break}return e.setState(Object(h.a)(Object(h.a)({},e.state),Pe("setState"))),a.abrupt("return");case 4:n=e.state.activeStep,"next"===t&&e.setState({activeStep:n+1}),"back"===t&&e.setState({activeStep:n-1}),"reset"===t&&e.setState({activeStep:0});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.props.redux,n=o.veiculos,r=o.empresas,i=o.equipamentos,l=t.target,c=l.name,s=l.value,"razaoSocial"!==c){a.next=13;break}if(!(d=r.find((function(e){return e.razaoSocial===s})))){a.next=11;break}return a.next=6,e.setState({razaoSocial:d.razaoSocial,selectedEmpresa:d});case 6:s!==d.razaoSocial&&e.setState({selectedEmpresa:void 0}),u=n.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:u}),a.next=13;break;case 11:e.setState({selectedEmpresa:void 0,frota:[]}),e.reset();case 13:"placa"===c&&e.state.frota&&(e.state.frota.find((function(e){return e.placa===s}))||i.forEach((function(a){return e.setState(Object(f.a)({},a,!1))}))),"utilizacao"===c&&e.setState({distanciaMinima:void 0,distanciaMaxima:void 0}),"newPlate"===c?"string"===typeof(m=s)&&((m=m.replace(/[a-z]/g,(function(e){return e.toUpperCase()}))).match("[A-Z]{3}[0-9]{1}[A-Z]{1}[0-9]{2}")&&(m=m.replace(/(\w{3})/,"$1-")),e.setState(Object(h.a)(Object(h.a)({},e.state),{},{newPlate:m}))):e.setState(Object(f.a)({},c,s));case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.getId=function(){var a=Object(C.a)(j.a.mark((function a(t,o,n,r,i,l){var c,s,d,u,m,p;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=n.filter((function(e){return e[i].toLowerCase().match(o.toLowerCase())})),""===o&&e.setState((c={},Object(f.a)(c,t,""),Object(f.a)(c,r,""),c)),!s[0]){a.next=10;break}if(d=s[0][i],u=s[0][l],""===o){a.next=8;break}return a.next=8,e.setState((m={},Object(f.a)(m,t,d),Object(f.a)(m,r,u),m));case 8:a.next=14;break;case 10:return a.next=12,e.setState((p={},Object(f.a)(p,t,""),Object(f.a)(p,r,""),p));case 12:e.setState({openAlertDialog:!0,alertType:"empresaNotFound"}),document.getElementsByName(t)[0].focus();case 14:case"end":return a.stop()}}),a)})));return function(e,t,o,n,r,i){return a.apply(this,arguments)}}(),e.capitalize=function(e,a){if(a&&"string"===typeof a)return"utilizacao"===e&&("RODOVIARIO"===a&&(a="Convencional"),"EXECUTIVO"===a&&(a="Convencional Executivo"),"URBANO"===a&&(a="Comercial"),"URBANO EXECUTIVO"===a&&(a="Comercial Executivo"),"SEMI LEITO"===a&&(a="Semi-Leito"),"SEMI LEITO - EXECUTIVO"===a&&(a="Semi-Leito Executivo"),"LEITO"===a&&(a="Leito"),"LEITO E EXECUTIVO"===a&&(a="Leito e Executivo")),"dominio"===e&&"Sim"===a&&(a="Leasing"),"dominio"===e&&"N\xe3o"===a&&(a="Ve\xedculo pr\xf3prio"),a},e.handleBlur=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m,p,v,b,g,E,x,S,O,y,C,w,k,D,I,N,A,P,T,F;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.props.redux,n=o.empresas,r=o.compartilhados,i=o.logs,l=o.equipamentos,c=o.acessibilidade,s=o.parametros,d=s[0].distanciaPoltronas,u=e.state,m=u.frota,p=u.demand,v=u.utilizacao,b=u.distanciaMinima,g=u.distanciaMaxima,E=t.target.name,x=t.target.value,(S=Pe())?e.setState({errors:S}):e.setState({errors:void 0}),a.t0=E,a.next="compartilhado"===a.t0?7:"delegatario"===a.t0?9:"distanciaMinima"===a.t0?12:"distanciaMaxima"===a.t0?16:"pesoDianteiro"===a.t0?20:"pesoTraseiro"===a.t0?22:"poltronas"===a.t0?24:26;break;case 7:return e.getId(E,x,r,"compartilhadoId","razaoSocial","codigoEmpresa"),a.abrupt("break",27);case 9:return a.next=11,e.getId(E,x,n,"codigoEmpresa","razaoSocial","codigoEmpresa");case 11:return a.abrupt("break",27);case 12:return v&&(O=Qa(v,b,d)),b&&g&&+b>+g&&(O="A Dist\xe2ncia m\xednima n\xe3o pode ser superior \xe0 dist\xe2ncia m\xe1xima."),O&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xednima inv\xe1lida.",customMessage:O,distanciaMinima:""}),a.abrupt("break",27);case 16:return v&&(y=Qa(v,g,d)),g&&b&&+g<+b&&(y="A Dist\xe2ncia m\xe1xima n\xe3o pode ser inferior \xe0 dist\xe2ncia m\xednima."),y&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xe1xima inv\xe1lida.",customMessage:y,distanciaMaxima:""}),a.abrupt("break",27);case 20:case 22:case 24:return ot(Object(Se.a)(e),E),a.abrupt("break",27);case 26:case 27:if(!("placa"===E&&x.length>2&&Array.isArray(e.state.frota))){a.next=47;break}if(!(C=e.state.frota.find((function(e){return"string"===typeof x?e.placa.toLowerCase().match(x.toLowerCase()):e.placa.match(x)})))||"object"!==typeof C){a.next=46;break}return D=e.capitalize("utilizacao",null===(w=C)||void 0===w?void 0:w.utilizacao)||null,I=e.capitalize("dominio",null===(k=C)||void 0===k?void 0:k.dominio)||null,N={},l.concat(c).forEach((function(e){var a=e.item;return Object.assign(N,Object(f.a)({},a,!1))})),C=Object.assign({},C,{utilizacao:D,dominio:I}),A=Object.freeze(C),a.next=37,e.setState(Object(h.a)(Object(h.a)(Object(h.a)({},N),C),{},{originalVehicle:A,disable:!0}));case 37:if(void 0!==C&&C.hasOwnProperty("empresa")&&e.setState({delegatario:C.empresa}),p){a.next=46;break}if("Solicita\xe7\xe3o j\xe1 cadastrada",T="J\xe1 existe uma demanda aberta para o ve\xedculo de placa ".concat(C.placa,'. Para acess\xe1-la, clique em "Solicita\xe7\xf5es" no menu superior.'),!rt(null===(P=C)||void 0===P?void 0:P.veiculoId,i)){a.next=46;break}return a.next=44,e.setState({customTitle:"Solicita\xe7\xe3o j\xe1 cadastrada",customMessage:T,openAlertDialog:!0,delegatario:""});case 44:return e.reset(),a.abrupt("return");case 46:""===e.state.placa||C||(F={},m[0]&&Object.keys(m[0]).forEach((function(e){return F[e]=""})),e.setState({alertType:"plateNotFound",openAlertDialog:!0}),e.setState(Object(h.a)(Object(h.a)({},F),{},{disable:!1})));case 47:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleEquipa=function(a){var t=e.props.redux[a],o=[],n=[];!1===e.state.addEquipa&&(e.state[a]&&(n=e.state[a]),t.forEach((function(e){var a=e.item;n.forEach((function(e){e.toLowerCase()===a.toLowerCase()&&o.push(a)}))})),o.forEach((function(a){return e.setState(Object(f.a)({},a,!0))})),console.log(e.state)),e.setState({addEquipa:!e.state.addEquipa,type:a})},e.handleCheck=function(){var a=Object(C.a)(j.a.mark((function a(t,o){var n,r,i,l,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.props.redux[o]){a.next=3;break}return a.abrupt("return");case 3:return i=[],l=[],"equipamentos"===o&&(c="equipamentosId"),"acessibilidade"===o&&(c="acessibilidadeId"),a.next=8,e.setState(Object(h.a)(Object(h.a)({},e.state),{},Object(f.a)({},t,!e.state[t])));case 8:r.forEach((function(a){var t=a.id,o=a.item;!0===e.state[o]&&(i.push(o),l.push(t))})),i[0]?e.setState((n={},Object(f.a)(n,o,i),Object(f.a)(n,c,l),n)):"equipamentos"===o?e.setState(Object(f.a)({equipamentos:[]},c,[])):"acessibilidade"===o&&e.setState(Object(f.a)({acessibilidade:[]},c,[]));case 10:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.showAltPlaca=function(){e.setState({altPlaca:!0,title:"Altera\xe7\xe3o de placa",header:"Para alterar a placa do ve\xedculo para o padr\xe3o Mercosul, digite a placa no campo abaixo e anexe o CRLV atualizado do ve\xedculo."})},e.updatePlate=function(){e.setState({placa:e.state.newPlate}),e.toggleDialog()},e.handleSubmit=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m,p,v,h,b,g,E,x,S,O,y,C,w,k,D,I,N;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,r=n.veiculoId,i=n.pbt,l=n.codigoEmpresa,c=n.originalVehicle,s=n.showPendencias,d=n.getUpdatedValues,u=n.numeroDae,m=n.compartilhadoId,p=n.newPlate,v=n.selectedEmpresa,h=n.equipamentosId,b=n.acessibilidadeId,g=n.demand,E=n.form,x=n.demandFiles,S=(null===g||void 0===g||null===(o=g.history)||void 0===o?void 0:o.length)||0,O={},it.forEach((function(a){a.forEach((function(a){for(var t in e.state)t!==a.field||a.disabled||e.state[t]&&Object.assign(O,Object(f.a)({},t,e.state[t]))}))})),O=Object.assign(O,{codigoEmpresa:l,compartilhadoId:m,pbt:i,equipamentosId:h,acessibilidadeId:b}),g&&d&&(O=d(c,O)),(y=O).delegatario,y.compartilhado,delete(C=Object(Y.a)(y,["delegatario","compartilhado"])).numeroDae,p&&""!==p&&(C.placa=p),e.state.compartilhado&&""!==e.state.compartilhado||!(null===c||void 0===c?void 0:c.compartilhadoId)||(C.compartilhadoId="NULL"),void 0!==t||0!==Object.keys(C).length){a.next=12;break}return e.setState({openAlertDialog:!0,customTitle:"Nenhuma altera\xe7\xe3o",customMessage:"N\xe3o foi realizada nenhuma altera\xe7\xe3o na solicita\xe7\xe3o aberta. Para prosseguir, altere algum dos campos ou adicione uma justificativa."}),a.abrupt("return");case 12:if("string"===typeof(w=e.state.info)&&(w+="\n\n N\xba Documento Arrecada\xe7\xe3o Estadual: ".concat(u)),k=A.a.decamelizeKeys(C),D={alteracoes:C,info:w,numeroDae:u,files:E},I={empresaId:null===v||void 0===v?void 0:v.codigoEmpresa,veiculoId:r,history:D,demandFiles:x,metadata:{veiculoId:r},historyLength:S,approved:t},g&&(I.id=null===g||void 0===g?void 0:g.id),Ve(I).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),!g||!t||s){a.next=23;break}return v.codigoEmpresa!==l&&(k.apolice="Seguro n\xe3o cadastrado"),"veiculos","veiculo_id",a.next=23,T.a.put("/api/updateVehicle",{requestObject:k,table:"veiculos",tablePK:"veiculo_id",id:r,codigoEmpresa:l});case 23:t?e.toast():(N="Solicita\xe7\xe3o de altera\xe7\xe3o de dados enviada.",g&&g.status.match("Aguardando")&&(N="Pend\xeancias para a altera\xe7\xe3o de dados registradas."),e.toast(N)),g?setTimeout((function(){e.props.history.push("/solicitacoes")}),1500):setTimeout((function(){e.reset()}),1200);case 25:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleFiles=function(){var a=Object(C.a)(j.a.mark((function a(t,o){var n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t||!t[0]){a.next=5;break}return a.next=3,e.setState(Object(f.a)({},o,t[0]));case 3:n=we(t,e.state,ha),e.setState(Object(h.a)(Object(h.a)({},n),{},{fileToRemove:null}));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.removeFile=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.state.form,n=Ie(t,o),e.setState(Object(h.a)(Object(h.a)({},e.state),n));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({altPlaca:!e.state.altPlaca})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.closeEquipa=function(){return e.setState({addEquipa:!1})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e.reset=function(){var a,t=e.props.redux,o=t.empresas,n=t.veiculos,r=t.equipamentos,i=t.acessibilidade,l=r.concat(i),c={},s={};it.forEach((function(a){return a.forEach((function(a){return e.setState(Object(f.a)({},a.field,""))}))})),ha.forEach((function(e){var a=e.name;Object.assign(c,Object(f.a)({},a,void 0))})),l.forEach((function(a){return e.setState(Object(f.a)({},a.item,!1))})),o&&1===o.length&&(s={selectedEmpresa:o[0],razaoSocial:null===(a=o[0])||void 0===a?void 0:a.razaoSocial,frota:n}),e.setState(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},c),{acessibilidade:[],acessibilidadeId:[],equipamentos:[],equipamentosId:[]}),l),{},{form:void 0,info:void 0,activeStep:0},s))},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.closeEquipa()},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(C.a)(j.a.mark((function e(){var a,t,o,n,r,i,l,c,s,d,u,m,p,v,b,g,E,x,S;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props.redux,i=r.equipamentos,l=r.acessibilidade,c=r.empresas,s=r.veiculos,d=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(o=t.state)||void 0===o?void 0:o.demand,c&&1===c.length&&this.setState({selectedEmpresa:c[0],razaoSocial:null===(n=c[0])||void 0===n?void 0:n.razaoSocial,frota:s}),d&&(m=Oe(d,r),p=m.originalVehicle,v=m.getUpdatedValues,b=m.alteracoes,g=m.compartilhadoId,E=(null===d||void 0===d?void 0:d.history)&&(null===(u=d.history.reverse().find((function(e){return e.hasOwnProperty("numeroDae")})))||void 0===u?void 0:u.numeroDae),v(p,b),"NULL"===g&&(m.compartilhado=""),this.setState(Object(h.a)(Object(h.a)({},m),{},{numeroDae:E,activeStep:3}))),x={},S={},i.forEach((function(e){return Object.assign(x,Object(f.a)({},null===e||void 0===e?void 0:e.item,!1))})),l.forEach((function(e){return Object.assign(S,Object(f.a)({},null===e||void 0===e?void 0:e.item,!1))})),e.next=8,this.setState(Object(h.a)(Object(h.a)({},x),S));case 8:document.addEventListener("keydown",this.escFunction,!1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.props.redux,a=e.empresas,t=e.compartilhados,r=e.equipamentos,i=e.acessibilidade,l=this.state,c=l.confirmToast,s=l.toastMsg,d=l.stepTitles,u=l.activeStep,m=l.steps,p=l.altPlaca,f=l.selectedEmpresa,v=l.openAlertDialog,h=l.alertType,b=l.customTitle,g=l.customMessage,E=l.dropDisplay,x=l.form,S=l.title,O=l.header,y=l.newPlate,j=l.demand,C=l.showPendencias,w=l.info,k=l.demandFiles;return n.a.createElement(o.Fragment,null,n.a.createElement(_a,{links:["Ve\xedculos","/veiculos"],text:"Altera\xe7\xe3o de dados",demand:j}),n.a.createElement(Ya,{activeStep:u,steps:m,stepTitles:d,setActiveStep:this.setActiveStep}),n.a.createElement(ct,{data:this.state,empresas:a,compartilhados:t,equipamentos:r,acessibilidade:i,setActiveStep:this.setActiveStep,altPlacaOption:0===u,handleInput:this.handleInput,handleBlur:this.handleBlur,showAltPlaca:this.showAltPlaca,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck,close:this.closeEquipa}),2===u&&n.a.createElement(ga,{parentComponent:"altDados",dropDisplay:E,formData:x,handleFiles:this.handleFiles,demandFiles:k,fileToRemove:this.state.fileToRemove,removeFile:this.removeFile}),3===u&&n.a.createElement(Fa,{parentComponent:"altDados",data:this.state,form:it,files:this.state.form,filesForm:ha}),f&&n.a.createElement(Va,{activeStep:u,lastStep:m.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep,showPendencias:C,setShowPendencias:this.setShowPendencias,info:w,handleInput:this.handleInput,demand:j}),n.a.createElement(ee,{open:c,close:this.toast,msg:s}),n.a.createElement(st,{open:p,close:this.toggleDialog,title:S,header:O,inputNames:["newPlate"],inputLabels:["Alterar Placa"],fileInputName:"newPlateDoc",values:[y],handleInput:this.handleInput,handleFiles:this.handleFiles,confirm:this.updatePlate,dropDisplay:E,formData:x}),v&&n.a.createElement(Za,{open:v,close:this.closeAlert,alertType:h,customMessage:g,customTitle:b}))}}]),t}(o.Component)),ut=t(407),mt=t(233),pt=t.n(mt),ft=t(150),vt=t.n(ft),ht=[{field:"seguradora",label:"Seguradora",autoComplete:!0,collection:"seguradoras",width:150},{field:"apolice",label:"Ap\xf3lice",autoComplete:!0,collection:"seguros",maxLength:25,width:150},{type:"date",field:"dataEmissao",label:"In\xedcio da vig\xeancia",width:150},{type:"date",field:"vencimento",label:"Vencimento",width:150}],bt=[{title:"Contrato Social",name:"contratoSocial"},{title:"Procura\xe7\xe3o",name:"procuracao"},{title:"Ap\xf3lice",name:"apoliceDoc"},{title:"Altera\xe7\xe3o de contrato social",name:"altContratoDoc"},{title:"CRC",name:"crc"}],gt=Object(X.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"25%",minWidth:310,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"}}}));function Et(e){var a,t=e.empresas,r=e.data,i=e.seguros,l=e.seguradoras,c=e.enableAddPlaca,s=e.handleInput,d=e.handleBlur,u=e.addPlate,m=e.removeFromInsurance,p=e.handleFiles,f=e.handleSubmit,v=e.enableChangeApolice,h=e.showAllPlates,b=e.removeFile,g=e.setShowPendencias,E=r.selectedEmpresa,x=r.placa,S=r.apolice,O=r.addedPlaca,y=r.allVehicles,j=r.frota,C=r.demandFiles,w=r.fileToRemove,k=r.demand,D=r.insurance,I=r.dropDisplay,N=r.apoliceDoc,A=r.showPendencias,P=r.info,T=r.renderedPlacas,F=r.numeroDae;F||(F=(null===k||void 0===k?void 0:k.history)instanceof Array&&(null===k||void 0===k||null===(a=k.history.reverse().find((function(e){return e.numeroDae})))||void 0===a?void 0:a.numeroDae)),r.seguradoras=l;var z=gt(),L=z.textField,M=i.some((function(e){return e.apolice===S}));return n.a.createElement(o.Fragment,null,n.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},n.a.createElement(_a,{links:["Ve\xedculos","/veiculos"],text:"Seguros",demand:k}),n.a.createElement(Ye,{data:r,empresas:t,handleInput:s,handleBlur:d}),E&&n.a.createElement("section",{className:"paper"},n.a.createElement($e,{subtitle:"Informe os dados do seguro."}),n.a.createElement(We,{form:ht,data:r,seguros:i,seguradoras:l,handleBlur:d,handleInput:s}),M&&n.a.createElement("div",{className:"addNewDiv"},n.a.createElement("span",{onClick:function(){return v()}}," \u2192 Clique aqui para adicionar nova ap\xf3lice mantendo as placas abaixo selecionadas."))),E&&c&&n.a.createElement("main",{className:"paper",style:{textAlign:"center",color:"#555"}},n.a.createElement("p",null,"Utilize as op\xe7\xf5es abaixo para filtrar, adicionar ou excluir placas desta ap\xf3lice"),n.a.createElement("section",{className:"flex spaceBetween",style:{paddingTop:"17px"}},n.a.createElement("div",null,n.a.createElement(Je.a,{inputProps:{name:"addedPlaca",list:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Insira a placa",className:L,value:O,onChange:s,onBlur:d}),n.a.createElement(Ue,{collection:y,field:"placa",value:O}),n.a.createElement(Ze.a,{size:"small",variant:"contained",className:z.button,style:{margin:"10px 0 10px 0"},onClick:function(){return u(O)}},n.a.createElement(ea.a,null)," Adicionar")),n.a.createElement("div",null,n.a.createElement(Je.a,{inputProps:{name:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Filtrar",className:L,value:x||"",onChange:s,onBlur:d}),n.a.createElement(vt.a,{style:{marginTop:"18px"}})),k?C[0]&&n.a.createElement("div",{style:{width:"225px",marginTop:"15px"}},n.a.createElement(Da,{demand:k,collection:"empresaDocs",demandFiles:C,form:bt,style:{width:"200px"}})):n.a.createElement(pa,{name:"apoliceDoc",formData:N,dropDisplay:I,handleFiles:p,demandFiles:C,removeFile:b,fileToRemove:w,style:{padding:"0 10px",margin:"0 10px",width:"28%",minWidth:"320px"}})),n.a.createElement("section",{className:"flex",style:{margin:"5px 0"}},n.a.createElement(Je.a,{inputProps:{name:"numeroDae"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"N\xba Documento de Arrecada\xe7\xe3o Estadual (DAE)",className:L,value:F||"",onChange:s,onBlur:d})),n.a.createElement("div",{className:"addNewDiv",style:{justifyContent:"flex-start",padding:"10px"}},n.a.createElement("span",{onClick:function(){return h()}},"\u2192 Clique aqui para selecionar placas")),(null===D||void 0===D?void 0:D.placas)&&(null===D||void 0===D?void 0:D.placas[0])?n.a.createElement("div",{style:{marginTop:"15px"}},"Placas vinculadas a ap\xf3lice ",D.apolice):n.a.createElement("div",{style:{marginTop:"30px"}}),D&&D.placas&&S&&S.length>2&&T&&T[0]&&n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{style:{fontSize:"0.7rem",marginBottom:"10px",marginTop:"3px",color:"#787b6e"}},"Selecionado",T.length>1?"s":""," ",T.length," ve\xedculo",T.length>1?"s":""," de ",null===j||void 0===j?void 0:j.length),n.a.createElement("div",{className:"placasChipContainer"},T.map((function(e,a){var t=e.placa,o=e.compartilhado,r=e.outsider,i=e.irregular,l=e.delCompartilhado,c=e.owner;return n.a.createElement("div",{onMouseOver:function(e){return function(e,a){var t=e.compartilhado,o=e.outsider,n=e.irregular,r=e.delCompartilhado,i=e.owner;a.target.title="Ve\xedculo pr\xf3prio",t&&(a.target.title="Ve\xedculo pr\xf3prio. Compartilhado por: ".concat(r)),o&&(a.target.title="Autorizado compartilhamento. Propriet\xe1rio: ".concat(i)),n&&(a.target.title="N\xc3O autorizado compartilhamento! Propriet\xe1rio: ".concat(i))}({compartilhado:o,outsider:r,irregular:i,delCompartilhado:l,owner:c},e)},key:a},n.a.createElement(ut.a,{key:a,label:t,onDelete:function(){return m(t)},className:o?"chip-compartilhado":r?"chip-outsider":i?"chip-irregular":"chip",variant:"outlined"}))})))))),S&&(D||c)&&!k?n.a.createElement("div",{style:{minHeight:"60px",position:"flex"}},n.a.createElement(Ze.a,{size:"small",color:"primary",className:"saveButton",variant:"contained",onClick:function(){return f()}},"Salvar ",n.a.createElement("span",null,"\xa0\xa0 ")," ",n.a.createElement(pt.a,null))):E&&k?n.a.createElement(Va,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:k,setShowPendencias:g,showPendencias:A,info:P,handleSubmit:f,handleInput:s}):null)}var xt=function(e){var a=e.items,t=e.title,o=e.data,r=e.close,i=e.selectAll,l=e.handleCheck,c=e.selectAllPlates;return n.a.createElement("div",{className:"popUpWindow row"},n.a.createElement("h6",null,t," Clique em \"X\" ou pressione 'esc' para voltar"),n.a.createElement("div",{style:{margin:"10px 0",fontSize:"0.8rem"}},n.a.createElement("input",{id:"all",type:"checkbox",checked:!0===i,onChange:function(){return c()}}),n.a.createElement("label",{htmlFor:"all"},i?"Desmarcar todas selecionadas":"Selecionar todas")),n.a.createElement("main",{className:"checkListContainer"},a.map((function(e,a){return n.a.createElement("div",{className:"checkListItem",key:a},n.a.createElement("input",{id:a,type:"checkbox",checked:!0===o[e],onChange:function(){return l(e)}}),n.a.createElement("label",{htmlFor:a},e))}))),n.a.createElement(oa,{close:r}))};function St(e){var a=e.open,t=e.close,o=e.title,r=e.helperMessage,i=e.marca,l=e.marcas,c=e.selectMarca,s=e.newElement,d=e.handleInput,u=e.addNewElement;return n.a.createElement("div",null,n.a.createElement(Ka.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-title"},n.a.createElement(Xa.a,{id:"form-dialog-title"},o),n.a.createElement($a.a,null,n.a.createElement(Ga.a,null,r),n.a.createElement("div",{className:"editFields"},l&&n.a.createElement("div",{className:"configMarca"},n.a.createElement(Je.a,{onChange:c,value:i,label:"Selecione uma marca",select:!0,InputLabelProps:{shrink:!0},SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},l.map((function(e,a){var t=e.marca;return n.a.createElement(He.a,{key:a,value:t},t)})))),n.a.createElement("div",{className:"configField"},n.a.createElement(Je.a,{autoFocus:!0,margin:"dense",name:"newElement",label:"Inserir",type:"text",onChange:d,value:s,fullWidth:!0}))),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null)),n.a.createElement(Wa.a,null,n.a.createElement(Ze.a,{onClick:t,color:"primary"},"Cancelar"),n.a.createElement(Ze.a,{onClick:function(){return u()},color:"primary"},"Confirmar"))))}var Ot=function(e,a,t){var o,n={name:"nomeSocio",id:"socioId"};document.location.pathname.match("procurador")&&(n={name:"nomeProcurador",id:"procuradorId"});var r,i,l,c,s=a.empresas,d=a.empresaDocs,u=n,m=u.name,p=u.id,f=(null===e||void 0===e?void 0:e.history)||[],v=null===f||void 0===f?void 0:f.length,h=s.find((function(a){return a.codigoEmpresa===(null===e||void 0===e?void 0:e.empresaId)})),b=null===h||void 0===h?void 0:h.razaoSocial,g=[],E=[];(f[0]&&(r=f[v-1]),r)&&(g=(null===(l=r)||void 0===l?void 0:l.newMembers)||[],E=(null===(c=r)||void 0===c?void 0:c.oldMembers)||[]);var x=(null===(o=f.reverse().find((function(e){return e.files})))||void 0===o?void 0:o.files)||[];x[0]&&(i=d.find((function(e){return e.id===x[0]}))),E[0]&&t.forEach((function(e){E.forEach((function(a){e[p]===a[p]&&Object.keys(a).forEach((function(t){e[t]=a[t]}))}))}));var S=t.concat(g).sort((function(e,a){return e[m].localeCompare(a[m])}));return{razaoSocial:b,selectedEmpresa:h,demand:e,latestDoc:i,newMembers:g,oldMembers:E,getUpdatedValues:yt,filteredSocios:S}};function yt(e,a){return Object.keys(a).forEach((function(t){a[t]&&e[t]&&("equipamentosId"!==t&&"acessibilidadeId"!==t||a[t].sort((function(e,a){return e-a})),a[t].toString()===e[t].toString()&&delete a[t]),""!==a[t]&&"null"!==a[t]&&a[t]||delete a[t]})),a}var jt=ce(["veiculos","empresas","seguradoras","seguros","getFiles/empresaDocs"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(w.a)(this,t),(e=a.call(this)).state={addedPlaca:"",razaoSocial:"",seguradora:"",deletedVehicles:[],toastMsg:"Seguro atualizado!",confirmToast:!1,dropDisplay:"Clique ou arraste para anexar a ap\xf3lice",showAllPlates:!1,showPendencias:!1,selectAll:!1},e.filterInsurances=Object(C.a)(j.a.mark((function a(){var t,o,n,r,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.props.redux.seguros,o=e.state.selectedEmpresa,n=o.codigoEmpresa,r=t.filter((function(e){return e.codigoEmpresa===n})),a.next=6,T.a.get("/api/allVehicles?codigoEmpresa=".concat(n));case 6:i=a.sent,l=A.a.camelizeKeys(null===i||void 0===i?void 0:i.data)||[],c=l.map((function(e){return e.placa})).sort(),s=l.filter((function(e){return e.codigoEmpresa===n})),d=s.map((function(e){return e.placa})),e.setState({seguros:r,allVehicles:l,frota:s,ownedPlacas:d,allPlates:c});case 12:case"end":return a.stop()}}),a)}))),e.checkExistance=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m,p,f;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=JSON.parse(JSON.stringify(e.props.redux.seguros)),n=e.state,r=n.selectedEmpresa,i=n.demand,l=r.codigoEmpresa,c=Object(v.a)(o.filter((function(e){return e.codigoEmpresa===l}))),s=Object(h.a)({},c.find((function(e){return e.apolice===t}))),i&&e.state.insurance&&(s=e.state.insurance),!(Object.keys(s).length>0)){a.next=11;break}return d=Ae()(s.dataEmissao).format("YYYY-MM-DD"),u=Ae()(s.vencimento).format("YYYY-MM-DD"),p=(m=s).seguradora,f=m.seguradoraId,a.next=8,e.setState({seguradora:p,seguradoraId:f,dataEmissao:d,vencimento:u,insurance:s});case 8:return a.abrupt("return");case 11:e.setState({dataEmissao:"",vencimento:"",deletedVehicles:[],insurance:{}});case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.renderPlacas=function(a){var t=e.state,o=t.allVehicles,n=t.insurance,r=t.ownedPlacas;if(n){a||(a=n.placas),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 133 ~ Seguro ~ placas",a);var i=[];a&&(a.forEach((function(a){var t=o.find((function(e){return e.placa===a}));if(t){var n=t.placa,l=t.empresa,c=t.compartilhado,s={placa:n,owner:l,delCompartilhado:c};r.includes(n)?s.compartilhado=!!c:c?Object.assign(s,{outsider:!0}):Object.assign(s,{irregular:!0}),i.push(s)}else e.setState({renderedPlacas:i})})),e.setState({renderedPlacas:i}))}},e.handleInput=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m,p,v,h,b,g,E,x,S,O,y,C,w;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=t.target.value,n=t.target.name,r=e.props.redux,i=r.empresas,l=r.seguradoras,c=e.state,s=c.selectedEmpresa,d=c.allVehicles,u=c.insurance,m=c.apolice,p=c.dataEmissao,v=c.vencimento,h=c.newInsurance,b=c.seguradora,e.setState(Object(f.a)({},n,o)),a.t0=n,a.next="razaoSocial"===a.t0?6:"apolice"===a.t0?17:"seguradora"===a.t0?22:"placa"===a.t0?25:"addedPlaca"===a.t0?28:31;break;case 6:if(!(g=i.find((function(e){return e.razaoSocial===o})))){a.next=14;break}return a.next=10,e.setState({razaoSocial:g.razaoSocial,selectedEmpresa:g});case 10:o!==g.razaoSocial&&e.setState({selectedEmpresa:void 0}),e.filterInsurances(),a.next=16;break;case 14:e.setState({selectedEmpresa:void 0,frota:[]}),e.clearFields();case 16:return a.abrupt("break",32);case 17:return d||e.filterInsurances(),a.next=20,e.checkExistance(o);case 20:return e.renderPlacas(),a.abrupt("break",32);case 22:return(E=l.find((function(e){return e.seguradora===o})))&&e.setState({seguradoraId:E.id}),a.abrupt("break",32);case 25:return x=[],(null===u||void 0===u?void 0:u.placas)&&(u.placas[0]&&null!==u.placas[0]&&(x=u.placas.sort()),void 0!==o&&o.length>2&&x[0]&&(x="string"===typeof o?u.placas.filter((function(e){return e.toLowerCase().match(o.toLowerCase())})).sort():u.placas.filter((function(e){return e.match(o)})).sort()),e.renderPlacas(x)),a.abrupt("break",32);case 28:return(S=d.find((function(e){return e.placa===o})))&&e.setState({vehicleFound:S}),a.abrupt("break",32);case 31:case 32:if(O=["seguradora","apolice","dataEmissao","vencimento"].every((function(a){return e.state[a]&&""!==e.state[a]})),"razaoSocial"===n||h||!O||u){a.next=40;break}return(C=l.find((function(a){return a.seguradora===e.state.seguradora})))&&(y=C.id),w={empresa:s.razaoSocial,codigoEmpresa:s.codigoEmpresa,apolice:m,seguradora:b,seguradoraId:y,dataEmissao:p,vencimento:v,placas:[],veiculos:[]},a.next=40,e.setState({insurance:w,seguradoraId:y});case 40:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleBlur=function(a){var t=e.props.redux,o=t.seguradoras,n=t.seguros,r=e.state,i=r.seguradora,l=r.selectedEmpresa,c=a.target.name,s=null===l||void 0===l?void 0:l.codigoEmpresa;if("seguradora"===c){var d=[],u=o.find((function(e){return e.seguradora.toLowerCase().match(i.toLowerCase())}));u&&i.length>2&&e.setState({seguradora:u.seguradora,seguradoraId:u.id}),!u&&i.length>2&&e.setState({openAlertDialog:!0,alertType:"seguradoraNotFound",seguradora:void 0}),l&&!i?(d=n.filter((function(e){return e.codigoEmpresa===s})),e.setState({seguros:d})):l||""===i?l&&""!==i&&(d=n.filter((function(e){return e.codigoEmpresa===s})).filter((function(e){return e.seguradora===i})),e.setState({seguros:d})):(d=n.filter((function(e){return e.seguradora===i})),e.setState({seguros:d}))}if("dataEmissao"===c||"vencimento"===c){var m=Pe();m?e.setState({errors:m}):e.setState({errors:void 0})}},e.showAllPlates=function(){var a=e.state,t=a.insurance,o=a.allPlates,n=[],r={};(null===t||void 0===t?void 0:t.placas)&&(n=t.placas),o.forEach((function(e){return Object.assign(r,Object(f.a)({},e,!1))})),n.forEach((function(e){return Object.assign(r,Object(f.a)({},e,!0))})),e.setState({allPlatesObj:r,insuredPlates:n,showAllPlates:!e.state.showAllPlates})},e.handleCheck=function(){var a=Object(C.a)(j.a.mark((function a(t){var o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:(o=Object(h.a)({},e.state.allPlatesObj))[t]=!o[t],!0===o[t]?e.addPlate(t):e.removeFromInsurance(t),e.setState({allPlatesObj:o});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.selectAllPlates=function(){var a=e.state,t=a.allPlates,o=a.selectAll,n={};t&&t.forEach((function(a){o?(n[a]=!1,e.removeFromInsurance(a)):(n[a]=!0,e.addPlate(a,!0))})),e.setState({selectAll:!o,allPlatesObj:n})},e.addPlate=function(){var a=Object(C.a)(j.a.mark((function a(t,o){var n,r,i,l,c,s,d,u,m;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,r=n.apolice,i=n.allVehicles,l=n.deletedVehicles,c=n.insurance,s=i.find((function(e){return e.placa===t})),t&&""!==t){a.next=3;break}return a.abrupt("return");case 3:if(void 0!==s&&!1!==s.hasOwnProperty("veiculoId")){a.next=8;break}return e.setState({openAlertDialog:!0,alertType:"plateNotFound"}),a.abrupt("return",null);case 8:if(!(c&&c.placas&&s.placa)||o){a.next=13;break}if(!c.placas.find((function(e){return e===s.placa}))){a.next=13;break}return e.setState({openAlertDialog:!0,alertType:"plateExists"}),a.abrupt("return",null);case 13:r&&c&&(d=Object(h.a)({},c),u=s.veiculoId,d.placas&&d.placas[0]||(d.placas=[]),d.veiculos&&d.veiculos[0]||(d.veiculos=[]),d.placas.includes(t)||d.placas.push(t),d.veiculos.includes(u)||d.veiculos.push(u),l.includes(u)&&(m=l.indexOf(u),l.splice(m,1)),e.renderPlacas(null===d||void 0===d?void 0:d.placas),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 374 ~ Seguro ~ addPlate= ~ update",d),e.setState({insurance:d,addedPlaca:"",deletedVehicles:l}));case 14:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.removeFromInsurance=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m,p,f,b,g,E,x;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=e.state,n=o.apolice,r=o.allVehicles,i=r.find((function(e){return e.placa===t})),l=i.veiculoId,c=i.placa,s=Object(h.a)({},e.state.insurance),d=Object(v.a)(e.state.deletedVehicles),u=[],m=[],(f=e.props.redux.seguros.find((function(e){return e.apolice===n})))&&f.placas&&(p=f.placas.includes(c)),p&&(b=s.veiculos,g=b.indexOf(l),d.includes(b[g])||(d.push(b[g]),e.setState({deletedVehicles:d}))),s.placas&&(u=s.placas),s.veiculos&&(m=s.veiculos),E=u.indexOf(c),x=m.indexOf(l),s.placas.splice(E,1),s.veiculos.splice(x,1),a.next=12,e.setState({insurance:s});case 12:e.renderPlacas();case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.updateInsurance=function(){var a=e.state,t=a.insurance,o=a.dataEmissao,n=a.vencimento,r=a.seguradoraId,i=t.id,l=t.veiculos,c={},s=!Ae()(o).isSame(Ae()(t.dataEmissao)),d=!Ae()(n).isSame(Ae()(t.vencimento)),u=r!==t.seguradoraId;if(!s&&!d&&u)return null;s&&(c.data_emissao=o),d&&(c.vencimento=n),u&&(c.seguradora_id=r);var m={id:i,columns:Object.keys(c),updates:c,vehicleIds:l};T.a.put("/api/updateInsurance",m).then((function(e){return console.log(e.data)}))},e.handleSubmit=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m,p,f,v,b,g,E,x,S,O,y,C,w,k,D,I,N,P;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.state,n=o.seguradora,r=o.insurance,i=o.errors,l=o.deletedVehicles,c=o.seguradoraId,s=o.apolice,d=o.numeroDae,u=o.dataEmissao,m=o.vencimento,p=o.selectedEmpresa,f=o.demand,v=o.demandFiles,b=o.apoliceDoc,g=o.info,E=[],!i||!i[0]){a.next=5;break}return e.setState(Object(h.a)(Object(h.a)({},e.state),Pe("setState"))),a.abrupt("return");case 5:if(n&&""!==n){a.next=8;break}return e.setState({openAlertDialog:!0,alertType:"seguradoraNotFound",seguradora:void 0}),a.abrupt("return");case 8:if((null===r||void 0===r?void 0:r.veiculos)&&r.veiculos[0]){a.next=11;break}return e.setState({openAlertDialog:!0,customTitle:"Nenhum ve\xedculo inserido",customMsg:'N\xe3o foi inserido nenhum ve\xedculo para o seguro informado. Para inserir, digite a placa no campo "Insira a placa" ou clique para selecionar a(s) placa(s) do(s) ve\xedculo(s) coberto(s) por esse seguro.'}),a.abrupt("return");case 11:if(x={apolice:s,seguradora_id:c,codigo_empresa:p.codigoEmpresa},S=Ae()(u,"YYYY-MM-DD",!0),O=Ae()(m,"YYYY-MM-DD",!0),y=S.isValid(),C=O.isValid(),w=O.isSameOrBefore(S,"day"),k=O.isBefore(Ae()(),"day"),D=S.isAfter(Ae()(),"day"),I=S.isSameOrBefore(Ae()(),"day"),!w){a.next=15;break}return alert("A data de vencimento informada \xe9 anterior ao in\xedcio da vig\xeancia."),a.abrupt("return");case 15:if(!k){a.next=18;break}return alert("O seguro informado est\xe1 vencido."),a.abrupt("return");case 18:if(D&&(x.situacao="Aguardando in\xedcio da vig\xeancia"),I&&(x.situacao="Vigente"),y&&(x.data_emissao=u),C&&(x.vencimento=m),f){a.next=32;break}return r&&(E=r.veiculos),x.codigoEmpresa,(N=Object(Y.a)(x,["codigoEmpresa"])).seguradora=n,N=A.a.camelizeKeys(N),P={empresaId:null===p||void 0===p?void 0:p.codigoEmpresa,history:Object(h.a)(Object(h.a)({},N),{},{vehicleIds:E,info:"N\xba Documento Arrecada\xe7\xe3o Estadual: ".concat(d),numeroDae:d,files:b}),demandFiles:v,metadata:{fieldName:"apoliceDoc",apolice:s,empresaId:null===p||void 0===p?void 0:p.codigoEmpresa},historyLength:0,approved:t},l[0]&&(P.history.deletedVehicles=l),Ve(P),e.confirmAndResetState("Solicita\xe7\xe3o de cadastro de seguro enviada"),a.abrupt("return");case 32:!1===t&&(Ve({id:f.id,history:{info:g},declined:!0}).then((function(e){return console.log(e)})),e.confirmAndResetState("Solicita\xe7\xe3o indeferida!")),!0===t&&e.approveInsurance(x);case 34:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.approveInsurance=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m,p,f,v,b,g,E,x,S,O,y;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.props.redux.seguros,n=e.state,r=n.apolice,i=n.vencimento,l=n.dataEmissao,c=n.seguradoraId,s=n.insurance,d=n.demand,u=n.demandFiles,m=s.veiculos,p={table:"veiculos",column:"apolice",value:r,tablePK:"veiculo_id",ids:m},!(f=o.find((function(e){return e.apolice===r})))){a.next=17;break}if(v=Ae()(f.dataEmissao).isSame(Ae()(l)),b=Ae()(f.vencimento).isSame(Ae()(i)),g=JSON.stringify(m)===JSON.stringify(f.veiculos),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 579 ~ Seguro ~ JSON.stringify(vehicleIds)",f),!(v&&b&&g)){a.next=9;break}return e.setState({openAlertDialog:!0,customTitle:"Seguro existente",customMsg:"O seguro informado j\xe1 existe no sistema. Para cadastrar um novo seguro, altere o n\xfamero da ap\xf3lice, ou as datas de emiss\xe3o e vencimento."}),a.abrupt("return");case 9:if("Vigente"!==t.situacao){a.next=17;break}return x={dataEmissao:l,vencimento:i,seguradoraId:c,situacao:t.situacao},x=A.a.decamelizeKeys(x),S=Object.keys(x),O={id:null===f||void 0===f?void 0:f.id,vehicleIds:m,columns:S,updates:x},a.next=15,T.a.put("/api/updateInsurance",Object(h.a)({},O));case 15:(y=null===d||void 0===d||null===(E=d.history[0])||void 0===E?void 0:E.deletedVehicles)&&(p.deletedVehicles=y);case 17:if("Aguardando in\xedcio da vig\xeancia"!==t.situacao){a.next=22;break}return t.veiculos=m,console.log(Object(h.a)({},t)),a.next=22,T.a.post("/api/cadSeguroMongo",Object(h.a)({},t));case 22:if("Vigente"!==t.situacao||f){a.next=25;break}return a.next=25,T.a.post("/api/cadSeguro",t).then((function(e){200===e.status&&console.log(e.status,"cadSeguroOk")}));case 25:return a.next=27,T.a.put("/api/updateInsurances",p).then((function(a){console.log(a.data),e.setState({dontUpdateProps:!0})}));case 27:Ve({id:d.id,demandFiles:u,history:{},metadata:{},approved:!0}),e.confirmAndResetState();case 30:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.confirmAndResetState=function(a){var t=e.state.demand;e.toast(a),e.clearFields(),t&&setTimeout((function(){e.props.history.push("/solicitacoes")}),1500)},e.handleFiles=function(){var a=Object(C.a)(j.a.mark((function a(t){var o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!Ce(t)){a.next=2;break}return a.abrupt("return");case 2:return(o=new FormData).append("apoliceDoc",t[0]),a.next=6,e.setState({apoliceDoc:o,fileToRemove:null});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.removeFile=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.state.apoliceDoc,n=Ie(t,o),e.setState(Object(h.a)(Object(h.a)({},e.state),n));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.addNewElement=function(){return e.setState({apolice:e.state.newElement,openAddDialog:!1})},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({openAddDialog:!e.state.openAddDialog})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.clearFields=Object(C.a)(j.a.mark((function a(){var t,o,n,r,i,l;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.props.redux,n=o.empresas,r=o.veiculos,i={seguradora:"",insurance:void 0,apolice:"",dataEmissao:"",vencimento:"",apoliceDoc:null,deletedVehicles:[],dropDisplay:"Clique ou arraste para anexar a ap\xf3lice"},l={selectedEmpresa:n[0],razaoSocial:null===(t=n[0])||void 0===t?void 0:t.razaoSocial,frota:r},!n||1!==n.length){a.next=7;break}return a.next=4,e.setState(Object(h.a)(Object(h.a)({},i),l));case 4:e.filterInsurances(),a.next=8;break;case 7:n&&e.setState(Object(h.a)({},i));case 8:case"end":return a.stop()}}),a)}))),e.escFunction=function(a){27===a.keyCode&&(e.state.openAddDialog&&e.toggleDialog(),e.state.showAllPlates&&e.setState({showAllPlates:!1}))},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(C.a)(j.a.mark((function e(){var a,t,o,n,r,i,l,c,s,d,u,m,p,f,v;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.redux,r=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(o=t.state)||void 0===o?void 0:o.demand,i=n.empresas,l=n.veiculos,!i||1!==i.length){e.next=5;break}return e.next=4,this.setState({selectedEmpresa:i[0],razaoSocial:null===(c=i[0])||void 0===c?void 0:c.razaoSocial,frota:l});case 4:this.filterInsurances();case 5:if(!r){e.next=17;break}return s=Ot(r,n,[]),d=s.latestDoc,s.newMembers,s.oldMembers,s.filteredSocios,u=Object(Y.a)(s,["latestDoc","newMembers","oldMembers","filteredSocios"]),m=null===r||void 0===r?void 0:r.history[0],p={},ht.forEach((function(e){var a=e.field;m.hasOwnProperty(a)&&(p[a]=m[a])})),f=n.veiculos.filter((function(e){return m.vehicleIds.some((function(a){return a===e.veiculoId}))})),p.placas=f.map((function(e){return e.placa})),p.veiculos=f.map((function(e){return e.veiculoId})),v=null===m||void 0===m?void 0:m.seguradoraId,e.next=14,this.setState(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},this.state),u),p),{},{insurance:p,demand:r,seguradoraId:v,demandFiles:[d]}));case 14:return e.next=16,this.filterInsurances();case 16:this.renderPlacas();case 17:document.addEventListener("keydown",this.escFunction,!1);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.openAlertDialog,r=a.alertType,i=a.openAddDialog,l=a.showAllPlates,c=a.allPlates,s=a.allPlatesObj,d=a.selectAll,u=a.customTitle,m=a.customMsg,p=this.props.redux,f=p.empresas,v=p.seguradoras,h=p.seguros,b=ht.every((function(a){return e.state.hasOwnProperty(a.field)&&""!==e.state[a.field]}));return n.a.createElement(o.Fragment,null,n.a.createElement(Et,{data:this.state,empresas:f,seguros:h,seguradoras:v,enableAddPlaca:b,handleInput:this.handleInput,handleBlur:this.handleBlur,addPlate:this.addPlate,removeFromInsurance:this.removeFromInsurance,enableChangeApolice:this.toggleDialog,handleFiles:this.handleFiles,handleSubmit:this.handleSubmit,showAllPlates:this.showAllPlates,setShowPendencias:this.setShowPendencias,removeFile:this.removeFile}),i&&n.a.createElement(St,{open:i,close:this.toggleDialog,title:"Alterar n\xfamero da ap\xf3lice",helperMessage:"Informe o n\xfamero atualizado da ap\xf3lice.",handleInput:this.handleInput,addNewElement:this.addNewElement}),l&&n.a.createElement(xt,{items:c,close:this.showAllPlates,title:"Selecione as placas para adicionar \xe0 ap\xf3lice.",handleCheck:this.handleCheck,data:s,selectAll:d,selectAllPlates:this.selectAllPlates}),t&&n.a.createElement(Za,{open:t,close:this.closeAlert,alertType:r,customTitle:u,customMessage:m}),n.a.createElement(ee,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}))}}]),t}(o.Component));function Ct(e){var a,t,r=e.open,i=e.type,l=e.close,c=e.confirm,s=e.element,d=e.id,u=e.index;e.customTitle,e.customMessage;return console.log("\ud83d\ude80 ~ file: ConfirmDialog.jsx ~ line 11 ~ ConfirmDialog ~ id",d),"delete"===i&&(a="Confirmar exclus\xe3o",t="Tem certeza que deseja excluir esse registro?",s&&(t=t.replace("?",": "))),"deactivateEmpresa"===i&&(a="Desativar empresa",t="Tem certeza que deseja desativar a empresa ".concat(s,"?")),a&&t?n.a.createElement("div",null,n.a.createElement(Ka.a,{open:r,onClose:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(Xa.a,{id:"alert-dialog-title"},a),n.a.createElement($a.a,null,n.a.createElement(Ga.a,{id:"alert-dialog-description"},s?n.a.createElement(o.Fragment,null,t,n.a.createElement("strong",null,"  ",s,"    "),"?"):t)),n.a.createElement(Wa.a,null,n.a.createElement(Ze.a,{onClick:l,autoFocus:!0}," Cancelar "),n.a.createElement(Ze.a,{onClick:function(){return c(d||u)},color:"primary"}," Confirmar ")))):null}var wt=[{field:"id",label:"N\xfamero do laudo",maxLength:30},{field:"validade",label:"Data de validade",type:"date"},{field:"empresaLaudo",label:"Empresa emissora",select:!0}],kt=function(e){var a=e.veiculoId,t=e.city,o=e.placa,r=e.onClick,i=e.style;return n.a.createElement("div",{id:a,onClick:r,style:i,className:"placaContainer"},n.a.createElement("div",{className:"placaCity"},t),n.a.createElement("div",{className:"placaCode"},o))},Dt=t(120),It=t.n(Dt);function Nt(e){var a=e.table,t=e.docsCollection,o=e.length,r=e.title,i=e.style,l=e.idIndex,c=void 0===l?0:l,s=e.filePK,d=e.deleteIconProperties,u=void 0===d?{}:d,m=e.deleteFunction,p=a.tableHeaders,f=a.arrayOfRows,v=a.docs;return n.a.createElement("table",{className:"showDetailsTable"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"tHeader",style:i,colSpan:o},r)),n.a.createElement("tr",null,p.map((function(e,a){return n.a.createElement("th",{key:a,style:i},e)})))),n.a.createElement("tbody",null,f.map((function(e,a){return n.a.createElement("tr",{key:a},e.map((function(a,o){var r,l;return n.a.createElement("td",{key:o,style:Object(h.a)(Object(h.a)({},i),{},{width:"numeroSei"===a.field&&"200px"}),className:"link"===a.type&&a.fileId?"link2":"review",onClick:function(){var o;return a.field===s&&a.fileId?function(e){var a=v.find((function(a){return a.id===e}));e&&a&&ya(a.id,a.filename,t,a.metadata.fieldName)}(a.fileId):"delete"===(null===a||void 0===a?void 0:a.action)?m(null===(o=e[c])||void 0===o?void 0:o.value):null}},"date"===a.type?(l=a.value,Ae()(l,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?Ae()(l,Ae.a.ISO_8601,!0).format("DD/MM/YYYY"):l):"delete"===(null===a||void 0===a?void 0:a.action)&&(null===(r=e[c])||void 0===r?void 0:r.value)?n.a.createElement(It.a,u):a.value)})))}))))}var At=t(215),Pt=t(6),Tt=Object(Pt.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return n.a.createElement(At.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"}},e))})),Ft=function(e){var a=e.anchorEl,t=e.handleClose,o=e.menuOptions;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Tt,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:t},o.map((function(e,a){var t=e.title,o=e.onClick;return n.a.createElement(He.a,{key:a,onClick:o},t)}))))},zt=t(247),Lt=t.n(zt),Mt=t(151),_t=t.n(Mt),qt=n.a.memo((function(e){var a=e.empresas,t=e.razaoSocial,o=e.selectedEmpresa,r=e.filteredVehicles,i=e.selectedVehicle,l=e.stateInputs,c=e.selectOptions,s=e.table,d=e.anchorEl,u=e.laudoDoc,m=e.dropDisplay,p=e.functions,f=e.demand,v=e.demandFiles,b=e.showPendencias,g=e.info,E=e.fileToRemove,x=null===i||void 0===i?void 0:i.placa,S=p.handleInput,O=p.clickOnPlate,y=p.showDetails,j=p.handleFiles,C=p.handleSubmit,w=p.closeMenu,k=p.clear,D=p.removeFile,I=p.deleteLaudo,N=p.setShowPendencias,A=function(e){if(!(e&&e[0]&&e[0].validade))return{backgroundColor:"rgb(136, 13, 13)"};var a=e[0].validade;return Ae()(a,Ae.a.ISO_8601).isValid()&&Ae()(a).isAfter(Ae()().toDate())?{backgroundColor:"rgb(13, 136, 13)"}:Ae()(a,Ae.a.ISO_8601).isValid()&&Ae()(a).isBefore(Ae()().toDate())?{backgroundColor:"rgb(197, 128, 0)"}:void 0};return n.a.createElement(n.a.Fragment,null,n.a.createElement(_a,{links:["Ve\xedculos","/veiculos"],text:"Laudos",demand:f,selectedEmpresa:o}),n.a.createElement("div",{style:f?{marginTop:"15px"}:{}},n.a.createElement(Ye,{empresas:a,data:{razaoSocial:t,demand:f},headerTitle:x&&o&&"Cadastro de laudo veicular ".concat(x," - ").concat(null===o||void 0===o?void 0:o.razaoSocial),handleInput:S})),o&&!Array.isArray(o)&&n.a.createElement(n.a.Fragment,null,!f&&n.a.createElement("header",{className:"flex",style:{marginBottom:"15px",justifyContent:"space-between"}},i?n.a.createElement(kt,{veiculoId:i.veiculoId,onClick:O,style:Object(h.a)(Object(h.a)({},A(i.laudos)),{},{marginLeft:0}),city:o.cidade,placa:i.placa}):n.a.createElement($e,{subtitle:"Selecione o ve\xedculo para atualizar consultar ou inserir o laudo de seguran\xe7a veicular.",style:{marginTop:"25px"}}),n.a.createElement("div",null,n.a.createElement(Je.a,{inputProps:{name:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Filtrar",onChange:S}),n.a.createElement(vt.a,{style:{marginTop:"10px"}}))),i&&n.a.createElement(n.a.Fragment,null,n.a.createElement("main",{className:"paper",style:f?{marginTop:"15px"}:{}},n.a.createElement($e,{subtitle:f?"Verifique as informa\xe7\xf5es abaixo, confira com o laudo anexo e escolha uma das op\xe7\xf5es abaixo.":"Para inserir novo laudo, informe o n\xfamero, a data de vencimento, a empresa que emitiu e anexe o documento referente ao laudo."}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(We,{form:wt,data:l,handleInput:S,selectOptions:c}),f?v&&n.a.createElement(Da,{demand:f,collection:"vehicleDocs",demandFiles:v,form:[{title:"Laudo veicular",name:"laudoDoc"}]}):n.a.createElement(pa,{name:"laudoDoc",formData:u,dropDisplay:m,handleFiles:j,removeFile:D,fileToRemove:E,single:!0,style:{width:"400px",margin:"15px auto 0 auto"}})),n.a.createElement("section",null,o&&!f?n.a.createElement(Ze.a,{size:"small",color:"primary",className:"saveButton",variant:"contained",onClick:function(){return C()}},"Cadastrar Laudo"):o&&f?n.a.createElement(Va,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:f,setShowPendencias:function(){return N(!b)},showPendencias:b,info:g,handleSubmit:C,handleInput:S}):null)),n.a.createElement("section",null,n.a.createElement("h4",null,i?null:n.a.createElement("div",{className:"flex",style:{justifyContent:"space-between"}},n.a.createElement("div",null,"Exibindo ".concat(r.length," ve\xedculos com mais de 15 anos.")),n.a.createElement("div",{className:"flex placasCaption",style:{fontSize:"0.8rem"}},n.a.createElement("span",null,n.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(13, 136, 13)"}},n.a.createElement(Lt.a,null))," Laudo vigente"),n.a.createElement("span",null,n.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(197, 128, 0)"}},n.a.createElement(Lt.a,null))," Laudo vencido                                            "),n.a.createElement("span",null,n.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(136, 13, 13)"}},n.a.createElement(Lt.a,null))," Nenhum Laudo cadastrado"))))),!i&&n.a.createElement("section",{className:"center flex paper"},r.map((function(e,a){return n.a.createElement(kt,{key:a,veiculoId:e.veiculoId,onClick:O,style:A(e.laudos),city:o.cidade,placa:e.placa})}))),n.a.createElement(Ft,{anchorEl:d,handleClose:w,menuOptions:[{title:"Detalhes",onClick:y}]})),i&&i.laudos&&!f&&n.a.createElement(n.a.Fragment,null,"object"===typeof s?n.a.createElement("div",{className:"paper",style:{marginTop:"52px",width:"100%",padding:"0",borderRadius:"5px",overflow:"hidden"}},n.a.createElement(Nt,{length:s.tableHeaders.length,title:"Laudos vinculados ao ve\xedculo placa ".concat(i.placa),table:s,style:{textAlign:"center",padding:"8px 0"},deleteIconProperties:{color:"secondary",title:"Apagar Laudo",style:{cursor:"pointer"}},deleteFunction:I,idIndex:1,filePK:"laudoDoc",docsCollection:"vehicleDocs"})):n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("p",null,s)),n.a.createElement("div",{className:"voltarDiv",onClick:k},n.a.createElement(_t.a,{size:"small"}),n.a.createElement("span",{style:{padding:"2px 0 0 2px",marginLeft:"2px",fontSize:"1rem"}},"Voltar"))))}));var Vt={field:"codigoEmpresa",label:"C\xf3digo da Empresa"},Rt={field:"razaoSocial",label:"Empresa",width:"340px"},Bt={field:"createdAt",label:"Data do registro no sistema",type:"date",width:"190px"},Ut={field:"cnpj",label:"CNPJ",maxLength:18,pattern:/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/,errorHandler:function(e){return function(e){if(""===(e=e.replace(/[^\d]+/g,"")))return!1;if(14!==e.length)return!1;if("00000000000000"===e||"11111111111111"===e||"22222222222222"===e||"33333333333333"===e||"44444444444444"===e||"55555555555555"===e||"66666666666666"===e||"77777777777777"===e||"88888888888888"===e||"99999999999999"===e)return!1;for(var a=e.length-2,t=e.substring(0,a),o=e.substring(a),n=0,r=a-7,i=a;i>=1;i--)n+=t.charAt(a-i)*r--,r<2&&(r=9);if((n%11<2?0:11-n%11).toString()!==o.charAt(0))return!1;a+=1,t=e.substring(0,a),n=0,r=a-7;for(var l=a;l>=1;l--)n+=t.charAt(a-l)*r--,r<2&&(r=9);return(n%11<2?0:11-n%11).toString()===o.charAt(1)}(e)}},Yt={field:"cpfSocio",label:"CPF",maxLength:14,width:190,errorHandler:function(e){return function(e){if(e){var a,t;if(a=0,"00000000000"===e)return!1;for(var o=1;o<=9;o++)a+=parseInt(e.substring(o-1,o))*(11-o);if(10!==(t=10*a%11)&&11!==t||(t=0),t!==parseInt(e.substring(9,10)))return!1;a=0;for(var n=1;n<=10;n++)a+=parseInt(e.substring(n-1,n))*(12-n);return 10!==(t=10*a%11)&&11!==t||(t=0),t===parseInt(e.substring(10,11))}}((a=e)?a.replace(/(\.|\/|-)/g,""):void 0);var a}},Ht={label:"Telefone",maxLength:15,pattern:"((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))"},Jt={label:"E-mail",type:"email",maxLength:60,pattern:"[a-zA-Z0-9]@[a-zA-Z0-9]{1,20}?[.]([a-zA-Z0-9])"},Kt=[{field:"razaoSocial",width:"540px"},{field:"rua",width:"540px"},{field:"situacao",label:"Situa\xe7\xe3o"},Object(h.a)({},Vt),Object(h.a)(Object(h.a)({},Bt),{},{width:"150px"}),{field:"frota",label:"Tamanho da Frota"}],Wt=[Object(h.a)({},Rt),Object(h.a)({},Bt)],$t=[Object(h.a)(Object(h.a)({},Rt),{},{field:"empresa",width:"540px"}),Object(h.a)({},Vt),Object(h.a)(Object(h.a)({},Bt),{},{width:"150px"}),Object(h.a)({},{field:"placas",label:"Ve\xedculos cadastrados",width:"340px"}),{field:"segurados",label:"N\xfamero de ve\xedculos segurados"}],Gt=[{field:"codigoEmpresa",label:"C\xf3digo do Delegat\xe1rio"},{field:"empresa",label:"Delegat\xe1rio"},{field:"dataRegistro",label:"Data do registro no sistema",type:"date"},{field:"cmt",label:"CMT (t)"},{field:"pbt",label:"Peso Bruto Total"},{field:"situacao",label:"Situa\xe7\xe3o"},{field:"indicadorIdade",label:"Indicador de idade"},{field:"equipamentos",label:"Equipamentos"},{field:"marcaChassi",label:"Marca do Chassi"},{field:"marcaCarroceria",label:"Marca da Carroceria"},{field:"sipro",label:"SEI"},{field:"compartilhado",label:"Compartilhado por"},{field:"codigoCompartilhado",label:"C\xf3digo Del. Compartilhado"},{field:"empresaLaudo",label:"Empresa Laudo"},{field:"numeroLaudo",label:"N\xfamero do Laudo"},{field:"vencimentoLaudo",label:"Validade do Laudo",type:"date"},{field:"acessibilidade",label:"Itens de Acessibilidade"},{field:"obs",label:"Observa\xe7\xf5es"}],Xt=[[{field:"placa",label:"Placa",margin:"normal",maxLength:8,pattern:"[a-zA-Z]{3}[-]?[ ]?\\d{4}|[A-Z]{3}[-]?[ ]?[0-9]{1}[A-Z]{1}[0-9]{2}"},{field:"renavam",label:"Renavam",margin:"normal",maxLength:11,pattern:/^(\d{9}|\d{11})$/},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Comercial","Comercial Executivo","Convencional","Convencional Executivo","Leito","Leito e Executivo","Semi-Leito","Semi-Leito Executivo"]},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17},{field:"modeloChassi",label:"Modelo do Chassi",autoComplete:!0,collection:"modelosChassi"},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",max:Number((new Date).getFullYear()),min:Number((new Date).getFullYear())-10},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",datalist:"modelo",autoComplete:!0,collection:"carrocerias"},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",max:Number((new Date).getFullYear()+1),min:Number((new Date).getFullYear())-10},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Aliena\xe7\xe3o Fiduci\xe1ria","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50}]].concat([ht]).concat([aa]),Zt=[{field:"razaoSocial",label:"Raz\xe3o Social"},Object(h.a)(Object(h.a)({},Ut),{},{maxLength:18,pattern:/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/}),{field:"inscricaoEstadual",label:"Inscri\xe7\xe3o Estadual",maxLength:13,pattern:"\\d{13}"},Object(h.a)(Object(h.a)({},Ht),{},{field:"telefone",label:"Telefone"}),Object(h.a)(Object(h.a)({},Jt),{},{field:"email",label:"E-mail"}),{field:"cep",label:"CEP",maxLength:10},{field:"rua",label:"Rua",maxLength:100},{field:"numero",label:"N\xfamero",type:"number",max:32e3},{field:"complemento",label:"Complemento",maxLength:20},{field:"bairro",label:"Bairro",maxLength:40},{field:"cidade",label:"Cidade",maxLength:60},{field:"uf",label:"Estado",maxLength:2,pattern:"[A-Z]{2}"},{field:"numeroContrato",label:"N\xfamero do Contrato Social"},{field:"vencimentoContrato",label:"Vencimento do Cadastro - CRC",type:"date"}],Qt=[{field:"nomeSocio",label:"Nome do S\xf3cio",maxLength:90,width:195},Object(h.a)(Object(h.a)({},Yt),{},{width:195,disabled:!1}),Object(h.a)(Object(h.a)({},Ht),{},{field:"telSocio",width:195}),Object(h.a)(Object(h.a)({},Jt),{},{field:"emailSocio",width:195}),{field:"share",label:"Participa\xe7\xe3o Societ\xe1ria (%)",type:"number",max:100,width:195}],eo=[{field:"nomeProcurador",label:"Nome do Procurador",maxLength:90,width:220},Object(h.a)(Object(h.a)({},Yt),{},{field:"cpfProcurador",width:220}),Object(h.a)(Object(h.a)({},Ht),{},{field:"telProcurador",width:220}),Object(h.a)(Object(h.a)({},Jt),{},{field:"emailProcurador",width:220}),{field:"createdAt",label:"Data de inclus\xe3o no sistema",type:"date",width:220}],ao=["id","apolice","seguradoraId","dataEmissao","vencimento","createdAt","situacao","seguradora","codigoEmpresa","empresa","segurados","placas","veiculos"],to=["veiculoId","placa","renavam","dataRegistro","situacao","utilizacao","codigoEmpresa","empresa","dominio","apolice","seguradora","dataEmissao","vencimento","cilindros","potencia","nChassi","anoChassi","valorChassi","modeloChassiId","anoCarroceria","valorCarroceria","modeloCarroceriaId","poltronas","piquesPoltrona","distanciaMinima","distanciaMaxima","eixos","pneumaticosDianteiro","pneumaticosTraseiro","pesoDianteiro","pesoTraseiro","pbt","cores","compartilhadoId","equipamentosId","acessibilidadeId","sipro","indicadorIdade","marcaChassi","modeloChassi","cmt","marcaCarroceria","empresa","compartilhado","codigoCompartilhado","numeroLaudo","empresaLaudo","vencimentoLaudo","equipamentos","acessibilidade","obs"],oo=function(e,a){var t;if("ve\xedculos"===e&&a[0].veiculoId)t=to;else{if("seguros"!==e)return a;t=ao}var o=[];return a.forEach((function(e){var a={};t.forEach((function(t){a[t]||(a[t]=e[t])})),o.push(a),a={}})),o},no=function(e,a){if(a){delete a.tableData;var t,o=[],n=ro(e);3===e&&(t="ve\xedculos"),4===e&&(t="seguros");var r=oo(t,[a]);return a=r[0]?r[0]:a,Object.keys(a).forEach((function(t){if(3===e){var r=a,i=(r.veiculoId,r.laudoId,r.tableData,r.modeloChassiId,r.modeloCarroceriaId,r.vencimentoContrato,r.delegatarioCompartilhado,r.acessibilidadeId,r.equipamentosId,r.compartilhadoId,Object(Y.a)(r,["veiculoId","laudoId","tableData","modeloChassiId","modeloCarroceriaId","vencimentoContrato","delegatarioCompartilhado","acessibilidadeId","equipamentosId","compartilhadoId"]));a=i}n.forEach((function(e){var n=e.field,r=e.label,i=e.type,l=e.width;e.fullWidth;if(t===n){var c={};Object.assign(c,{field:n,label:r,value:a[t]}),i&&Object.assign(c,{type:i}),l&&Object.assign(c,{width:l}),o.push(c),c={}}}))})),Object.keys(a).forEach((function(t){o.find((function(e){return e.field===t}))||3!==e||o.push({field:t,label:t,value:a[t]})})),o}};function ro(e){var a;switch(e){case 0:return a=function(e,a){var t,o=[],n=Object(v.a)(a);return e.forEach((function(e){n.forEach((function(a,r){e.field===a.field?(t=Object.assign({},e,a),n.splice(r,1),o.push(t)):o.find((function(a){return a.field===e.field}))||o.push(e)}))})),o=o.concat(n)}(Zt,Kt);case 1:return a=Qt.concat(Wt);case 2:return a=eo;case 3:var t=[];return Xt.forEach((function(e){t.push.apply(t,Object(v.a)(e))})),a=t.concat.apply(t,Object(v.a)(Gt));case 4:return a=ht.concat($t);default:return a}}var io=[{field:"nomeProcurador",title:"Nome"},{field:"cpfProcurador",title:"CPF"},{field:"emailProcurador",title:"E-mail"},{field:"telProcurador",title:"Telefone"},{field:"vencimento",title:"Validade da procura\xe7\xe3o",type:"date",format:function(e){return e||"Prazo indeterminado"}},{field:"fileId",title:"Baixar Procura\xe7\xe3o",type:"link"}],lo=[{field:"numeroAlteracao",label:"N\xfamero da altera\xe7\xe3o"},{field:"numeroRegistro",label:"Registro na junta comercial"},{field:"numeroSei",label:"N\xfamero do registro SEI"},{field:"createdAt",label:"Registro no CadTI",type:"date",format:function(e){return e||"Nenhuma data informada"}},{field:"dataJunta",label:"Data de Registro na Junta Comercial",type:"date",format:function(e){return e||"Nenhuma data informada"}},{field:"fileId",label:"Baixar altera\xe7\xe3o contratual",value:"Clique para baixar o arquivo",type:"link"}],co=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{htmlFor:e.id,className:"obs__label"},e.label),n.a.createElement("textarea",Object.assign({className:"obs__textArea",cols:"30",disabled:!1!==e.disabled},e)))},so=[{field:"razaoSocial",title:"Empresa",maxLength:90,width:220},{field:"codigoEmpresa",title:"C\xf3digo da empresa",width:220},{field:"status",title:"Status",width:220},{field:"vencimento",title:"Validade da procura\xe7\xe3o",type:"date",format:function(e){return e||"Prazo indeterminado"}},{field:"fileId",title:"Baixar Procura\xe7\xe3o",type:"link"}];function uo(e){var a=e.data,t=e.tab,r=e.title,i=e.header,l=e.close,c=e.empresas,s=e.procuracoes,d=e.procuradores,u=e.empresaDocs,m=e.altContrato,p=Object(o.useState)(),f=Object(Be.a)(p,2),v=f[0],b=f[1],g=Object(o.useState)(),E=Object(Be.a)(g,2),x=E[0],S=E[1],O=Object(o.useState)([]),y=Object(Be.a)(O,2),w=y[0],k=y[1],D=no(t,a)||[],I=D.find((function(e){return"obs"===e.field})),N=D.find((function(e){return"equipamentos"===e.field})),A=D.find((function(e){return"acessibilidade"===e.field}));Object(o.useEffect)((function(){var e,o,n,r=null===(e=D.find((function(e){return"razaoSocial"===e.field})))||void 0===e?void 0:e.value,i=null===(o=c.find((function(e){return e.razaoSocial===r})))||void 0===o?void 0:o.codigoEmpresa,l=s.filter((function(e){return e.codigoEmpresa===i})),m=u.filter((function(e){var a,t;return"procuracao"===(null===(a=e.metadata)||void 0===a?void 0:a.fieldName)&&(null===(t=e.metadata)||void 0===t?void 0:t.empresaId)===i})),p=[],f=[],v=[],g=[];if(function(e){0===e&&(d.forEach((function(e){l.forEach((function(a){if(a.procuradores.some((function(a){return a===e.procuradorId}))){var t=Object(h.a)(Object(h.a)({},e),{},{vencimento:a.vencimento}),o=u.find((function(e){return e.metadata.procuracaoId===a.procuracaoId}));o&&(t.fileId=null===o||void 0===o?void 0:o.id),p.push(t)}}))})),p.forEach((function(e){io.forEach((function(a){var t=a.field;if(f.some((function(e){return e===a.title}))||f.push(a.title),e.hasOwnProperty(t)&&!g.some((function(e){return e.hasOwnProperty(t)}))){if(n="fileId"===t&&e.fileId?Object(h.a)(Object(h.a)({},a),{},{value:"Clique para baixar a procura\xe7\xe3o",fileId:e.fileId}):Object(h.a)(Object(h.a)({},a),{},{value:e[t]}),a.format){var o=a.format(e[t]);n=Object(h.a)(Object(h.a)({},a),{},{value:o})}g.push(n)}})),v.push(g),g=[]})),p[0]&&b({mainTitle:"Procuradores cadastrados para ".concat(null===a||void 0===a?void 0:a.razaoSocial),tableHeaders:f,arrayOfRows:v,docs:m}),P())}(t),2===t){var E,x=null===a||void 0===a?void 0:a.procuradorId,S=s.filter((function(e){return e.procuradores.includes(x)}));S.forEach((function(e){var a;E=u.find((function(a){var t=a.metadata;return(null===t||void 0===t?void 0:t.procuracaoId)===e.procuracaoId})),e.fileId=null===(a=E)||void 0===a?void 0:a.id})),S.forEach((function(e){so.forEach((function(a){var t=a.field;if(f.some((function(e){return e===a.title}))||f.push(a.title),e.hasOwnProperty(t)&&!g.some((function(e){return e.hasOwnProperty(t)}))){if(n="fileId"===t&&e.fileId?Object(h.a)(Object(h.a)({},a),{},{value:"Clique para baixar a procura\xe7\xe3o",fileId:e.fileId}):Object(h.a)(Object(h.a)({},a),{},{value:e[t]}),a.format){var o=a.format(e[t]);n=Object(h.a)(Object(h.a)({},a),{},{value:o})}g.push(n)}})),v.push(g),g=[]})),S[0]&&b({mainTitle:"Procura\xe7\xf5es cadastrados para ".concat(null===a||void 0===a?void 0:a.nomeProcurador),tableHeaders:f,arrayOfRows:v,docs:u})}}),[t,m]);var P=function(){var e=Object(C.a)(j.a.mark((function e(){var t,o,n,r,i,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m&&(t=m.filter((function(e){return e.codigoEmpresa===a.codigoEmpresa})),o=u.filter((function(e){var t;return"altContratoDoc"===(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.fieldName)&&(null===e||void 0===e?void 0:e.metadata.empresaId)===a.codigoEmpresa})),n=[],r=[],i=[],l={},t.forEach((function(e){lo.forEach((function(a){var t=a.field;if(n.includes(a.label)||n.push(a.label),"fileId"===t||!i.some((function(e){return e.hasOwnProperty(t)}))){if("fileId"===t){var r,c=o.find((function(a){return a.metadata.numeroAlteracao===e.numeroAlteracao}));c=null===(r=c)||void 0===r?void 0:r.id,l=c?Object(h.a)(Object(h.a)({},a),{},{value:null===a||void 0===a?void 0:a.value,fileId:c}):Object(h.a)(Object(h.a)({},a),{},{value:"-"})}else l=Object(h.a)(Object(h.a)({},a),{},{value:e[t]||"-"});if(a.format){var s=a.format(e[t])||"-";l=Object(h.a)(Object(h.a)({},a),{},{value:s})}i.push(l)}})),r.push(i),i=[]})),console.log("\ud83d\ude80 ~ file: ShowDetails.jsx ~ line 198 ~ setAltContrato ~     arrayOfRows",r),t[0]&&S({mainTitle:"Altera\xe7\xf5es do contrato social - ".concat(null===a||void 0===a?void 0:a.razaoSocial),tableHeaders:n,arrayOfRows:r,docs:o}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var e=[];v&&e.push(v),x&&e.unshift(x),e[0]&&k(e)}),[v,x]),n.a.createElement("div",{className:"popUpWindow",style:{left:"20%",right:"20%"}},n.a.createElement("h4",{className:"equipaHeader"},r," ",a[i])," ",n.a.createElement("hr",null),n.a.createElement("main",{className:"checkListContainer",style:{justifyContent:"flex-start"}},D.map((function(e,a){var t=e.field,o=e.label,r=e.value,i=e.type,l=e.width;return"obs"!==t&&"equipamentos"!==t&&"acessibilidade"!==t&&n.a.createElement("div",{className:"showDetailsItem",style:{width:l||150},key:a},n.a.createElement(Je.a,{name:t,label:o,value:o.match("Peso ")?tt(r):"date"!==i?r||"":Ae()(r).isValid()?Ae()(r).format("DD/MM/YYYY"):"",InputLabelProps:{shrink:!0,style:{fontSize:"0.9rem",fontWeight:500}},inputProps:{style:{fontSize:"0.7rem",width:l||150,fontColor:"#bbb",textAlign:"center"}},variant:"outlined"}))}))),w[0]&&w.map((function(e,a){return n.a.createElement("section",{key:a},n.a.createElement("hr",{style:{margin:"12px 0"}}),n.a.createElement(Nt,{length:e.tableHeaders.length,title:e.mainTitle,table:e,style:{textAlign:"center",padding:"8px 0"},idIndex:1,filePK:"fileId",docsCollection:"empresaDocs"}))})),3===t&&n.a.createElement("footer",{className:"flexColumn"},(null===N||void 0===N?void 0:N.value)&&n.a.createElement(co,{label:"Equipamentos:",name:"equipamentos",id:"equipamentos",defaultValue:null===N||void 0===N?void 0:N.value,rows:"2"}),(null===A||void 0===A?void 0:A.value)&&n.a.createElement(co,{label:"Itens de acessibilidade:",name:"acessibilidade",id:"acessibilidade",defaultValue:null===A||void 0===A?void 0:A.value,rows:"2"}),(null===I||void 0===I?void 0:I.value)&&n.a.createElement(co,{label:"Observa\xe7\xf5es:",name:"obs",id:"obs",defaultValue:null===I||void 0===I?void 0:I.value,rows:"6"})),n.a.createElement(oa,{close:l}))}var mo=[{field:"empresaLaudo",title:"Empresa Emissora"},{field:"id",title:"N\xfamero do Laudo"},{field:"createdAt",title:"Registro no sistema",type:"date"},{field:"validade",title:"Data de validade",type:"date"},{field:"laudoDoc",title:"Laudo",type:"link"},{field:"delete",title:"Remover",action:"delete",deleteFile:!0}],po=1,fo=ce(["allVehicleFields","empresas","empresasLaudo","laudos","getFiles/vehicleDocs"],(function(e){var a,t,r,i=e.user,l=e.redux,c=l.allVehicleFields,s=l.empresas,d=l.empresasLaudo,u=l.laudos,m=l.vehicleDocs,p=l.logs,b=null===e||void 0===e||null===(a=e.location)||void 0===a||null===(t=a.state)||void 0===t?void 0:t.demand,g=Object.freeze({dropDisplay:"Clique ou arraste o arquivo para anexar o laudo",stateInputs:{id:void 0,validade:"",empresaLaudo:""}}),E=Object(o.useState)(""),x=Object(Be.a)(E,2),S=x[0],O=x[1],y=Object(o.useState)(),w=Object(Be.a)(y,2),k=w[0],D=w[1],I=Object(o.useState)(),N=Object(Be.a)(I,2),A=N[0],P=N[1],F=Object(o.useState)([]),z=Object(Be.a)(F,2),L=z[0],M=z[1],_=Object(o.useState)(!1),q=Object(Be.a)(_,2),V=q[0],R=q[1],B=Object(o.useState)(),U=Object(Be.a)(B,2),H=U[0],J=U[1],K=Object(o.useState)(null),W=Object(Be.a)(K,2),$=W[0],G=W[1],X=Object(o.useState)(g.dropDisplay),Z=Object(Be.a)(X,2),Q=Z[0],ae=Z[1],te=Object(o.useState)(),oe=Object(Be.a)(te,2),ne=oe[0],re=oe[1],ie=Object(o.useState)(Object(h.a)({},g.stateInputs)),le=Object(Be.a)(ie,2),ce=le[0],se=le[1],de=Object(o.useState)(!1),ue=Object(Be.a)(de,2),me=ue[0],pe=ue[1],fe=Object(o.useState)("Laudo enviado para aprova\xe7\xe3o."),ve=Object(Be.a)(fe,2),he=ve[0],be=ve[1],ge=Object(o.useState)(),Ee=Object(Be.a)(ge,2),xe=Ee[0],Se=Ee[1],ye=Object(o.useState)(),je=Object(Be.a)(ye,2),we=je[0],ke=je[1],De=Object(o.useState)(),Ie=Object(Be.a)(De,2),Ne=Ie[0],Ae=Ie[1],Te=Object(o.useState)(!1),Fe=Object(Be.a)(Te,2),ze=Fe[0],Le=Fe[1],Me=Object(o.useState)({open:!1,type:"inputError",msg:""}),_e=Object(Be.a)(Me,2),qe=_e[0],Re=_e[1],Ue=Object(o.useState)({open:!1,type:"delete",element:void 0}),Ye=Object(Be.a)(Ue,2),He=Ye[0],Je=Ye[1];s&&1===s.length&&1===po&&(po++,D(s[0]),O(null===(r=s[0])||void 0===r?void 0:r.razaoSocial));if(Object(o.useEffect)((function(){document.addEventListener("keydown",(function(e){27===e.keyCode&&R(!1),G(null)}))}),[]),b&&1===po){po++;var Ke=b.history,We={},$e=Oe(b,e.redux),Ge=$e.selectedEmpresa,Xe=$e.demandFiles,Ze=$e.originalVehicle;Object.entries(Ke[0]).forEach((function(e){var a=Object(Be.a)(e,2),t=a[0],o=a[1];ce.hasOwnProperty(t)&&(We[t]=o)})),D(Ge),O(Ge.razaoSocial),se(We),ke(Xe),J(Ze)}Object(o.useEffect)((function(){!function(){if(k&&""!==k){var e=(new Date).getFullYear(),a=c.filter((function(e){return e.empresa===k.razaoSocial})).filter((function(a){return e-a.anoCarroceria>15&&null!==a.anoCarroceria})).sort((function(e,a){return e.placa.localeCompare(a.placa)})),t=[];if(a.forEach((function(e){var a=u.filter((function(a){return a.veiculoId===e.veiculoId}));t.push(Object(h.a)(Object(h.a)({},e),{},{laudos:a}))})),P(t),M(t),H&&(null===t||void 0===t?void 0:t.length)>0){var o,n,r=t.find((function(e){return e.veiculoId===H.veiculoId}));if((null===r||void 0===r||null===(o=r.laudos)||void 0===o?void 0:o.length)===(null===H||void 0===H||null===(n=H.laudos)||void 0===n?void 0:n.length))return;J(r)}}else P(),M([]),D()}()}),[k,c,u,H]);var Qe=Object(o.useCallback)((function(e){var a=e.target.name,t=e.target.value;if("razaoSocial"!==a){if("placa"===a&&A[0]){if("string"===typeof t&&(t=t.toLocaleUpperCase()),t&&""!==t){var o,n=A.filter((function(e){return e.placa.match(t)}));return 1===n.length&&(o=n[0]),M(n),void J(o)}M(A)}se(Object(h.a)(Object(h.a)({},ce),{},Object(f.a)({},a,t)))}else{O(t);var r=s.find((function(e){return e.razaoSocial===t}));D(r)}}),[O,s,A,ce]),ea=function(){var e=Object(C.a)(j.a.mark((function e(a){var t,o,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.currentTarget.id,!rt(t,p)){e.next=4;break}return alert("Solicita\xe7\xe3o de cadastro do laudo j\xe1 realizada para este ve\xedculo."),e.abrupt("return");case 4:H?(a.persist(),G(a.target)):((o=a.currentTarget.id)&&(n=A.find((function(e){return e.veiculoId.toString()===o}))),J(n),M([n]));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){if(H&&!b)if(H.laudos&&H.laudos[0]){var e=null===H||void 0===H?void 0:H.laudos,a=m.filter((function(e){return"laudoDoc"===e.metadata.fieldName})),t=[],o=[],n=[],r=Object(v.a)(mo);"empresa"===i.role&&r.pop(),e.forEach((function(e){r.forEach((function(t){var r,i=a.find((function(a){var t;return(null===a||void 0===a||null===(t=a.metadata)||void 0===t?void 0:t.laudoId)==(null===e||void 0===e?void 0:e.id)}));i&&(r=i.id),o.includes(t.title)||o.push(t.title);t.title;var l=Object(Y.a)(t,["title"]);"laudoDoc"===t.field?n.push(Object(h.a)(Object(h.a)({},l),{},{value:e[t.field],fileId:r})):n.push(Object(h.a)(Object(h.a)({},l),{},{value:e[t.field]}))})),n[4].fileId?n[4].value="Clique para visualizar o laudo":n[4].value="Nenhum arquivo encontrado",t.push(n),n=[]})),r=Object(v.a)(mo),Se({tableHeaders:o,arrayOfRows:t,docs:a})}else Se("Nenhum laudo cadastrado para o ve\xedculo placa ".concat(H.placa,"."))}),[H,u,m,b,i.role]),Object(o.useEffect)((function(){po=1}),[]);var aa=function(){document.querySelector('[name = "placa"]').value="",M(A),J()},ta=function(){H?(R(!V),G(null)):(R(!1),J(void 0),G(null))},oa=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,m,p,f,v;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=null===k||void 0===k?void 0:k.codigoEmpresa,n=null===H||void 0===H?void 0:H.veiculoId,r=ce.empresaLaudo,i=Object(Y.a)(ce,["empresaLaudo"]),l=Pe()||[],!(c=u.find((function(e){return e.id===ce.id})))){a.next=7;break}return Re(Object(h.a)(Object(h.a)({},qe),{},{open:!0,msg:"O laudo informado j\xe1 existe no sistema. Laudo n\xba "+c.id.toString()})),la(),a.abrupt("return");case 7:if(Object.keys(ce).forEach((function(e){if("validade"!==e&&(!ce[e]||""===ce[e])){var a,t=null===(a=wt.find((function(a){return a.field===e})))||void 0===a?void 0:a.label;l.push(t)}})),!l[0]){a.next=12;break}return Re(Object(h.a)(Object(h.a)({},qe),{},{open:!0,msg:"Favor verificar o preenchimento dos seguintes campos: "+l.toString()})),la(),a.abrupt("return");case 12:if(void 0!==t){a.next=21;break}return s=Object(h.a)({},ce),m={empresaId:o,veiculoId:n,history:s,historyLength:0,metadata:{fieldName:"laudoDoc",veiculoId:n}},ne&&(m.history.files=ne),Ve(m).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})),la("all fields, reset state please!"),na("laudoDoc"),ra(),setTimeout((function(){aa()}),1200),a.abrupt("return");case 21:if(!1===t&&(Ve({id:b.id,empresaId:o,history:{info:null===ce||void 0===ce?void 0:ce.info},declined:!0}).then((function(e){return console.log(e)})),be("Solicita\xe7\xe3o indeferida!"),ra(),setTimeout((function(){e.history.push("/solicitacoes")}),1500)),!0!==t){a.next=36;break}return(p=d.find((function(e){return e.empresa===r})))&&(i.empresa_id=p.id),i.veiculo_id=n,i.codigo_empresa=o,v={table:"laudos",requestElement:i},a.next=30,T.a.post("/api/addElement",v).then((function(e){var a;f=null===e||void 0===e||null===(a=e.data[0])||void 0===a?void 0:a.id,console.log(e.data)})).catch((function(e){return console.log(e)}));case 30:Ve({id:b.id,veiculoId:n,demandFiles:we,history:{},metadata:{laudoId:f,tempFile:"false"},approved:t}).then((function(e){return console.log(e.data)})),setTimeout((function(){e.history.push("/solicitacoes")}),1500),be("Laudo aprovado!"),ra(),la("Clear all Of It!!!");case 36:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();var na=function(){var e=Object(C.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ae(a),re(void 0);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ra=function(){return pe(!me)},ia=function(){return Je(Object(h.a)(Object(h.a)({},He),{},{open:!1}))},la=function(e){e&&se(Object(h.a)({},g.stateInputs)),re(),ae(g.dropDisplay)},ca=e.redux.empresasLaudo.map((function(e){return e.empresa}));return n.a.createElement(o.Fragment,null,n.a.createElement(qt,{empresas:s,razaoSocial:S,selectedEmpresa:k,filteredVehicles:L,selectedVehicle:H,anchorEl:$,stateInputs:ce,selectOptions:ca,dropDisplay:Q,laudoDoc:ne,table:xe,demand:b,demandFiles:we,showPendencias:ze,fileToRemove:Ne,functions:{handleInput:Qe,clickOnPlate:ea,showDetails:ta,handleFiles:function(e,a){if(!Ce(e)&&e&&e[0]){var t=new FormData;t.append("fieldName","laudoDoc"),t.append("laudoId",ce.id),t.append("veiculoId",H.veiculoId),t.append(a,e[0]),re(t),Ae(void 0)}},handleSubmit:oa,closeMenu:function(){return G(null)},clear:aa,removeFile:na,setShowPendencias:Le,deleteLaudo:function(e){Je(Object(h.a)(Object(h.a)({},He),{},{open:!0,element:"laudo n\xba ".concat(e),laudoId:e}))}}}),V&&n.a.createElement(uo,{close:ta,data:Object(h.a)(Object(h.a)({},H),{},{tableData:""}),tab:3,title:"Ve\xedculo",header:"- informa\xe7\xf5es"}),He.open&&n.a.createElement(Ct,Object.assign({},He,{close:ia,confirm:function(e){var a=H.veiculoId,t=k.codigoEmpresa;if(e){ia(),T.a.delete("/api/delete?table=laudos&tablePK=id&id=".concat(e,"&veiculoId=").concat(a,"&codigoEmpresa=").concat(t)).then((function(e){var a=e.data;return console.log(a)}));var o=m.find((function(a){return"laudoDoc"===a.metadata.fieldName&&a.metadata.laudoId===e.toString()}));o&&T.a.delete("/api/deleteFile?collection=vehicleDocs&id=".concat(null===o||void 0===o?void 0:o.id,"&codigoEmpresa=").concat(t)).then((function(e){var a=e.data;return console.log(a)}))}},id:He.laudoId})),qe.open&&n.a.createElement(Za,{open:qe.open,close:function(){return Re(Object(h.a)(Object(h.a)({},qe),{},{open:!qe.open}))},alertType:qe.type,customMessage:qe.msg}),n.a.createElement(ee,{open:me,close:ra,msg:he}))})),vo=Object(o.createContext)(null);function ho(e){var a=e.motivosBaixa,t=e.selectMotivo,o=e.selectedMotivo,r=e.demand;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"flexColumn"},!r&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",null,"Selecione o motivo da baixa"),n.a.createElement(Je.a,{className:"config__selector",onChange:t,name:"selectedOption",value:o||"",select:!0,placeholder:"Clique para selecionar...",SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},a.map((function(e,a){return n.a.createElement(He.a,{key:a,value:e},e)}))))))}var bo=t(605),go=t(378),Eo=t(286),xo=(t(494),[{value:"baixar",label:"Baixar ve\xedculo"},{value:"gerenciar",label:"Gerenciar ve\xedculos baixados"}]);function So(e){e.empresas;var a=e.selectOption;e.parametros,e.demand,e.checked,e.delegaTransf,e.justificativa,e.pendencias,e.handleInput,e.handleBlur,e.handleCheck,e.handleSubmit;return n.a.createElement("div",{className:"flex center"},n.a.createElement("div",{className:"flexColumn "},n.a.createElement("h3",{className:"radio__title"},"Selecione uma das op\xe7\xf5es abaixo"),n.a.createElement(Eo.a,{component:"fieldset"},n.a.createElement(go.a,{"aria-label":"position",name:"position",onChange:a,row:!0,style:{width:"auto"},className:"radio"},xo.map((function(e,a){var t=e.value,o=e.label;return n.a.createElement(Xe.a,{key:a,className:"radio",value:t,label:n.a.createElement("span",{className:"radio__legend"}," ",o," "),control:n.a.createElement(bo.a,{color:"primary",size:"small"})})}))))))}var Oo=function(e){var a=e.action,t=e.color,o=e.onClick,r=e.disabled,i=function(){return null},l="";return"save"===a&&(i=function(){return n.a.createElement(pt.a,null)},l="Salvar"),n.a.createElement(Ze.a,{size:"small",color:t||"primary",className:"saveButton",variant:"contained",onClick:function(){return o()},disabled:r},e.label||l," ",n.a.createElement("span",null,"\xa0\xa0 ")," ",i())},yo=function(e){var a=e.data,t=e.user,o=e.handleInput,r=e.searchDischarged,i=e.downloadXls,l=e.reactivateVehicle,c=t.role,s=a.placaBaixada,d=a.dischargedFound,u=a.notFound,m=a.reactivate,p=a.selectedOption,f=JSON.parse(JSON.stringify(et)),v=f.find((function(e){return"Observa\xe7\xe3o"===e.label})),h=f.indexOf(v);return f.splice(h,1),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"flex center paper"},n.a.createElement("header",{className:"searchDischarged__header"},n.a.createElement("div",{className:"searchDischarged"},n.a.createElement("div",null,n.a.createElement("form",{onSubmit:r},n.a.createElement(Je.a,{type:"text",name:"placaBaixada",label:"Pesquisar pela placa do ve\xedculo",value:s||"",onChange:o,placeholder:"Digite a placa",InputLabelProps:{style:{fontSize:"0.7rem"}},InputProps:{style:{width:"250px",marginRight:"10px",fontSize:"0.9rem",textAlign:"center"}}})),n.a.createElement("span",{action:"search",onClick:r,style:{marginTop:"18px"}},n.a.createElement(vt.a,{className:"pointer"}))),"empresa"!==c&&n.a.createElement("div",{className:"downloadXls",onClick:i},n.a.createElement("img",{className:"downloadXls__icon",src:"baixar"===p?"":"/images/excel.png",alt:"Fazer o download do arquivo xlsx",title:"Arquivo xlsx com todos os ve\xedculos baixados"})))),d&&n.a.createElement(n.a.Fragment,null,n.a.createElement("section",{className:"dischargedContainer"},f.map((function(e,a){var t=e.label;return n.a.createElement(Je.a,{label:t,key:a,value:d[t],disabled:!0,InputLabelProps:{style:{fontSize:"0.7rem"},shrink:!0},InputProps:{style:{width:"250px",margin:"8px 10px 0 0",fontSize:"0.7rem",color:"Situa\xe7\xe3o"===t&&"Reativado"===d[t]?"red":"#444"}}})}))),n.a.createElement("section",{className:"obs"},n.a.createElement("label",{htmlFor:"obs",className:"obs__label"},"Observa\xe7\xf5es:"),n.a.createElement("textarea",{name:"obs",id:"obs",className:"obs__textArea",defaultValue:d["Observa\xe7\xe3o"],cols:"30",rows:"6"})),m&&n.a.createElement("footer",{className:"reactivate"},n.a.createElement(Oo,{action:"save",label:"Reativar",onClick:function(){return l()}})))),u&&n.a.createElement("h3",null,"Ve\xedculo n\xe3o encontrado."))},jo=t(420),Co=t.n(jo),wo=[{field:"placa",label:"Placa",datalist:"placa",autoComplete:!0,collection:"frota",maxLength:8},{field:"renavam",label:"Renavam"},{field:"nChassi",label:"N\xfamero do Chassi",maxLength:17},{field:"utilizacao",label:"Utiliza\xe7\xe3o",disabled:!0},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",disabled:!0},{field:"marcaChassi",label:"Marca do Chassi",disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",disabled:!0},{field:"marcaCarroceria",label:"Marca da Carroceria",disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",disabled:!0},{type:"number",field:"indicadorIdade",label:"Indicador de idade",disabled:!0}],ko=function(e){var a=e.user,t=e.selectOption,r=e.handleInput,i=e.handleBlur,l=e.handleCheck,c=e.handleSubmit,s=e.selectMotivo,d=e.data,u=e.empresas,m=e.motivosBaixa,p=e.searchDischarged,f=e.downloadXls,v=e.reactivateVehicle,h=e.setShowPendencias,b=d.selectedEmpresa,g=d.selectedOption,E=d.checked,x=d.delegaTransf,S=d.justificativa,O=d.selectedMotivo,y=d.demand,j=d.info,C=d.motivo,w=d.showPendencias;return n.a.createElement(o.Fragment,null,n.a.createElement(_a,{links:["Ve\xedculos","/veiculos"],text:"Baixa de ve\xedculo",demand:y}),n.a.createElement(Ye,{data:d,empresas:u,handleInput:r,handleBlur:i}),n.a.createElement("div",{className:"flexColumn"},b&&n.a.createElement(n.a.Fragment,null,!y&&n.a.createElement(So,{demand:y,checked:E,delegaTransf:x,justificativa:S,empresas:u,selectOption:t,handleInput:r,handleBlur:i,handleCheck:l,handleSubmit:c}),"baixar"===g?n.a.createElement("div",{className:"flex"},n.a.createElement("section",{className:"paper"},n.a.createElement("h3",{style:{marginBottom:"7px"}},y?"Solicita\xe7\xe3o n\xba".concat(null===y||void 0===y?void 0:y.numero," - ").concat(null===y||void 0===y?void 0:y.subject):"Informe os dados para a baixa"),y&&n.a.createElement("h4",null,C),y&&n.a.createElement("h4",null,"Situa\xe7\xe3o: ",null===y||void 0===y?void 0:y.status),n.a.createElement(We,{form:wo,data:d,handleBlur:i,handleInput:r,disableAll:!!y})),n.a.createElement(ho,{demand:y,selectedOption:g,motivosBaixa:m,selectMotivo:s,selectedMotivo:O,info:j,empresas:u,handleInput:r,handleBlur:i,handleSubmit:c,setShowPendencias:h,showPendencias:w})):"gerenciar"===g?n.a.createElement(yo,{data:d,user:a,handleInput:r,searchDischarged:p,downloadXls:f,reactivateVehicle:v}):null,y||"baixar"!==g?y?n.a.createElement(Va,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:y,setShowPendencias:h,showPendencias:w,info:j,handleSubmit:c,handleInput:r}):null:n.a.createElement("div",{className:"flexEnd"},n.a.createElement(Ze.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"10px 0 10px 0"},onClick:function(){return c()}},"Confirmar ",n.a.createElement("span",null,"\xa0\xa0 ")," ",n.a.createElement(Co.a,null))))))},Do=function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;Object(w.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={empresas:[],razaoSocial:"",frota:[],placa:"",form:{},check:"",delegaTransf:"",toastMsg:"Solicita\xe7\xe3o de Baixa Enviada",confirmToast:!1,openDialog:!1,showPendencias:!1},e.selectOption=function(a){return e.setState({selectedOption:a.target.value})},e.selectMotivo=function(a){return e.setState({selectedMotivo:a.target.value})},e.handleInput=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=t.target,n=o.name,r=o.value,i=e.props.redux,l=i.veiculos,c=i.empresas,e.setState(Object(f.a)({},n,r)),!("razaoSocial"===n&&r.length>2)){a.next=15;break}if(!(s=c.find((function(e){return e.razaoSocial===r})))){a.next=12;break}return a.next=7,e.setState({razaoSocial:s.razaoSocial,selectedEmpresa:s});case 7:r!==s.razaoSocial&&e.setState({selectedEmpresa:void 0}),d=l.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:d}),a.next=15;break;case 12:return a.next=14,e.setState({selectedEmpresa:void 0,frota:[]});case 14:e.reset();case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleBlur=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m,p,f,v,b,g;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.props.redux,n=o.empresas,r=o.logs,i=e.state,l=i.frota,c=i.demand,s=t.target.name,d=t.target.value,"delegaTransf"!==s){a.next=14;break}if(!(d.length>0)){a.next=14;break}if(!(u=n.find((function(e){return e.razaoSocial===d})))){a.next=13;break}return m=u.razaoSocial,p=u.codigoEmpresa,a.next=9,e.setState({delegaTransf:m,delegaTransfId:p,disableSubmit:!0});case 9:console.log(e.state),a.next=14;break;case 13:e.setState({openAlertDialog:!0,alertType:"empresaNotFound",delegaTransf:""});case 14:if("placa"!==s||"string"===typeof l){a.next=29;break}if(d&&""!==d||e.setState({disableSubmit:!0}),d.length>2&&(f=l.find((function(e){return"string"===typeof d?e.placa.toLowerCase().match(d.toLowerCase()):e.placa.match(d)}))),!f){a.next=28;break}if(c){a.next=24;break}if("Solicita\xe7\xe3o j\xe1 cadastrada",b="J\xe1 existe uma demanda aberta para o ve\xedculo de placa ".concat(f.placa,'. Para acess\xe1-la, clique em "Solicita\xe7\xf5es" no menu superior.'),!rt(null===(v=f)||void 0===v?void 0:v.veiculoId,r)){a.next=24;break}return e.setState({customTitle:"Solicita\xe7\xe3o j\xe1 cadastrada",customMessage:b,openAlertDialog:!0,delegatario:"",placa:void 0}),a.abrupt("return");case 24:return a.next=26,e.setState(Object(h.a)(Object(h.a)({},f),{},{selectedVehicle:f}));case 26:a.next=29;break;case 28:""!==e.state.placa&&(g={},l[0]&&Object.keys(l[0]).forEach((function(e){return g[e]=""})),e.setState({alertType:"plateNotFound",openAlertDialog:!0,disableSubmit:!0}),e.setState(Object(h.a)({},g)));case 29:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleSubmit=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m,p,f,v,b,g,E,x,S,O,y;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.props.redux,n=o.empresas,r=o.veiculos,i=e.state,l=i.selectedEmpresa,c=i.veiculoId,s=i.selectedMotivo,d=i.demand,u=i.selectedVehicle,m=i.info,p=i.motivo,f=u.dataEmissao,v=u.vencimento,b=u.dataRegistro,g=l.codigoEmpresa,E={empresaId:g,veiculoId:c,history:{info:s?"Motivo da baixa: ".concat(s):p},historyLength:0,approved:t},d&&(E.id=null===d||void 0===d?void 0:d.id),!1!==t){a.next=8;break}return E.declined=!0,E.history.info=m,a.next=8,e.setState({toastMsg:"Baixa de ve\xedculo indeferida."});case 8:if(Ve(E).then((function(e){return console.log(e.data)})),!t){a.next=19;break}return"veiculos","veiculo_id",x={},et.forEach((function(e){var a=e.field,t=e.label;u[a]&&(x[t]=u[a].toString())})),S="string"===typeof p&&p.replace("Motivo da baixa: ",""),Object.assign(x,{"Situa\xe7\xe3o":"Baixado","Data de Registro":new Date(b).toLocaleDateString(),"Data baixa":(new Date).toLocaleDateString(),"Data Inicio":new Date(f).toLocaleDateString(),"Data Fim":new Date(v).toLocaleDateString(),"Motivo da Baixa":S,"Observa\xe7\xe3o":"".concat(p)}),T.a.post("/api/baixaVeiculo",x),a.next=17,T.a.delete("/api/delete?table=".concat("veiculos","&tablePK=").concat("veiculo_id","&id=").concat(c,"&codigoEmpresa=").concat(g)).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 17:return a.next=19,e.setState({toastMsg:"Baixa realizada com sucesso."});case 19:if(e.toast(),!n||1!==n.length){a.next=26;break}return y={selectedEmpresa:n[0],razaoSocial:null===(O=n[0])||void 0===O?void 0:O.razaoSocial,frota:r},a.next=24,e.setState(Object(h.a)(Object(h.a)({},y),{},{selectedMotivo:void 0}));case 24:a.next=28;break;case 26:return a.next=28,e.setState({selectedEmpresa:void 0,frota:[],razaoSocial:"",selectedMotivo:void 0});case 28:e.reset(),d&&setTimeout((function(){e.props.history.push("/solicitacoes")}),1500);case 30:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.searchDischarged=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m,p;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),n=e.state.placaBaixada,r=e.props.redux.parametros,i=null===(o=r[0])||void 0===o?void 0:o.idadeBaixa,l=i.idadeBaixaAut,a.next=7,T.a.get("/api/getOldVehicles?placa=".concat(n));case 7:c=a.sent,(s=null===c||void 0===c?void 0:c.data)[0]?(d=s[0],u=(new Date).getFullYear(),m=+d["Ano carroceria"],p=!0,(u-m>l||"Reativado"===d["Situa\xe7\xe3o"])&&(p=!1),e.setState({dischargedFound:s[0],notFound:!1,reactivate:p})):e.setState({notFound:!0,dischargedFound:void 0});case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.reactivateVehicle=function(){var a=e.state.dischargedFound,t={placa:null===a||void 0===a?void 0:a.Placa,"Situa\xe7\xe3o":"Reativado"},o="O ve\xedculo de placa ".concat(null===a||void 0===a?void 0:a.Placa," poder\xe1 ser recadastrado no sistema acessando as op\xe7\xf5es Ve\xedculos -> Cadastro de Ve\xedculos.");T.a.patch("/api/reactivateVehicle",t).then((function(a){200===a.status&&e.setState({customMessage:o,customTitle:"Ve\xedculo reativado.",openAlertDialog:!0,placaBaixada:"",dischargedFound:void 0}),console.log(a.data)}))},e.reset=function(){wo.forEach((function(a){return e.setState(Object(f.a)({},a.field,""))})),e.setState({delegaTransf:"",check:"",justificativa:"",checked:!1,demand:void 0})},e.downloadXls=function(){e.setState({loading:!0}),T()({url:"/api/oldVehiclesXls",method:"GET",responseType:"blob",onDownloadProgress:function(e){Math.round(e.loaded)}}).then((function(a){var t=a.headers["content-disposition"],o=t.indexOf("=")+1,n=t.slice(o),r=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");i.href=r,i.setAttribute("download",n),document.body.appendChild(i),i.click(),e.setState({loading:!1})})).catch((function(e){console.log(e)}))},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.handleCheck=function(a){return e.setState({checked:a.target.value})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(C.a)(j.a.mark((function e(){var a,t,o,n,r,i,l,c,s,d,u,m,p,f,v,b,g,E;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.redux,i=r.empresas,l=r.veiculos,i&&1===i.length&&this.setState({selectedEmpresa:i[0],razaoSocial:null===(a=i[0])||void 0===a?void 0:a.razaoSocial,frota:l}),!(c=null===(t=this.props)||void 0===t||null===(o=t.location)||void 0===o||null===(n=o.state)||void 0===n?void 0:n.demand)){e.next=7;break}return d=this.props.redux,u=d.empresas,m=d.veiculos,p=c.empresa,f=c.veiculo,v=u.find((function(e){return e.razaoSocial===p})),b=m.filter((function(e){return e.placa===f})),g=b.find((function(e){return e.placa===f})),E=null===c||void 0===c||null===(s=c.history[0])||void 0===s?void 0:s.info,e.next=7,this.setState(Object(h.a)(Object(h.a)({razaoSocial:p,selectedEmpresa:v,placa:f,frota:b},g),{},{selectedVehicle:g,demand:c,selectedOption:"baixar",motivo:E}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.user,a=this.props.redux,t=a.empresas,r=a.parametros[0].motivosBaixa,i=this.state,l=i.delegaTransf,c=i.confirmToast,s=i.toastMsg,d=i.checked,u=i.openAlertDialog,m=i.customTitle,p=i.customMessage,f=i.alertType,v=i.loading;return n.a.createElement(o.Fragment,null,n.a.createElement(ko,{data:this.state,empresas:t,user:e,motivosBaixa:r,checked:d,selectOption:this.selectOption,selectMotivo:this.selectMotivo,delegaTransf:l,handleInput:this.handleInput,handleBlur:this.handleBlur,handleCheck:this.handleCheck,handleSubmit:this.handleSubmit,searchDischarged:this.searchDischarged,downloadXls:this.downloadXls,reactivateVehicle:this.reactivateVehicle,setShowPendencias:this.setShowPendencias}),u&&n.a.createElement(Za,{open:u,close:this.closeAlert,alertType:f,customTitle:m,customMessage:p}),n.a.createElement(ee,{open:c,close:this.toast,msg:s}),v&&n.a.createElement(B,null))}}]),t}(o.Component);Do.contextType=vo;var Io=ce(["veiculos","empresas","parametros","equipamentos","acessibilidade"],Do),No=t(152),Ao=t.n(No),Po=(t(495),t(236)),To=t.n(Po),Fo=t(235),zo=t.n(Fo),Lo=function(e){var a=e.data,t=e.handleInput,o=e.plusOne,r=e.removeOne;console.log("\ud83d\ude80 ~ file: SimpleParams.jsx ~ line 8 ~ SimpleParams ~ data",a);var i=Object(v.a)(null===a||void 0===a?void 0:a.newState)||[];return n.a.createElement(n.a.Fragment,null,n.a.createElement("header",null,n.a.createElement("h4",{className:"singleParams__title"},"Clique nos campos abaixo para editar e/ou adicione novos.")),i.map((function(e,a){return n.a.createElement("section",{className:"singleParams__container",key:a},n.a.createElement("div",{className:"singleParams__rowContainer"},n.a.createElement(Je.a,{name:a.toString(),value:i[a],onChange:t,variant:"filled",InputProps:{style:{margin:"8px 0"}},inputProps:{style:{width:"300px",textAlign:"center",fontSize:"10pt",height:"30px",padding:"5px 0"}}}),n.a.createElement("div",{className:"singleParams__deleteIcon",title:"Remover",onClick:function(){return r(a)}},n.a.createElement(zo.a,null))))})),n.a.createElement("div",{className:"addIcon"},n.a.createElement("div",{className:"addIcon__container",onClick:function(){return o()}},n.a.createElement("span",{className:"addIcon__text"},"Adicionar"),n.a.createElement(To.a,{className:"addIcon__icon"}))))},Mo=(t(496),function(e){var a=e.data,t=e.selectOption,o=e.handleInput,r=e.handleSubmit,i=e.plusOne,l=e.removeOne,c=e.outsider;console.log("\ud83d\ude80 ~ file: ParametrosTemplate.jsx ~ line 12 ~ ParametrosTemplate ~ outsider",c);var s=a.tab,d=a.options,u=a.selectedOption,m=a.form,p=a.modified;return console.log("\ud83d\ude80 ~ file: ParametrosTemplate.jsx ~ line 14 ~ ParametrosTemplate ~ selectedOption",a),n.a.createElement(n.a.Fragment,null,!c&&n.a.createElement("header",{className:"selectHeader"},n.a.createElement(_a,{links:["Par\xe2metros","/parametros"],text:"Alterar par\xe2metros do sistema"}),n.a.createElement("h4",{className:"parametrosTitle"},"Alterar par\xe2metros do sistema - Selecione uma das op\xe7\xf5es abaixo."),n.a.createElement(Je.a,{className:"config__selector",onChange:t,name:"selectedOption",value:u||"",select:!0,placeholder:"Clique para selecionar...",SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},d.map((function(e,a){return n.a.createElement(He.a,{key:a,value:e},e)})))),m&&s<3&&n.a.createElement("main",{className:"configForm"},n.a.createElement(We,{form:m,data:a,handleInput:o,style:{width:"100%",flexDirection:"column"}})),3===s&&n.a.createElement(Lo,{form:m,data:a,plusOne:i,removeOne:l,handleInput:o,style:{width:"100%",flexDirection:"column"}}),u&&n.a.createElement("div",{style:{minHeight:"60px",position:"flex"}},n.a.createElement(Oo,{action:"save",onClick:r,disabled:!p})))}),_o={variant:"outlined",pattern:/^[0-9]*$/,maxLength:2},qo=_o.variant,Vo=[Object(h.a)({field:"idadeMaxCad",label:"Idade m\xe1xima para cadastro (anos)"},_o),Object(h.a)(Object(h.a)({field:"difIdade",label:"Diferen\xe7a toler\xe1vel de idade da carroceria e chassi (anos)"},_o),{},{maxLength:1}),Object(h.a)({field:"idadeBaixaAut",label:"Idade para baixa autom\xe1tica (anos)"},_o),{field:"diaBaixaAut",label:"Dia para baixa autom\xe1tica (dd/mm)",maxLength:5,pattern:/^(0[1-9]|[12][0-9]|30(?!\/02)|31(?!\/(0[2469]|11)))\/(0[1-9]|1[0-2])$/,variant:qo},Object(h.a)(Object(h.a)({field:"prazoAvisoBaixa",label:"Prazo para aviso de baixa (dias)"},_o),{},{maxLength:3})],Ro=[{field:"comercial",label:"Comercial"},{field:"comercialExecutivo",label:"Comercial Executivo"},{field:"convencional",label:"Convencional"},{field:"convencionalExecutivo",label:"Convencional Executivo"},{field:"leito",label:"Leito"},{field:"leitoExecutivo",label:"Leito e Executivo"},{field:"semiLeito",label:"Semi-Leito"},{field:"semiLeitoExecutivo",label:"Semi-Leito Executivo"}],Bo=[{field:"secretaria",label:"Nome da Secretaria"},{field:"subsecretaria",label:"Nome da Subsecretaria"},{field:"superintendencia",label:"Nome da Superintendencia"},{field:"diretoria",label:"Nome da diretoria"},{field:"sistema",label:"Nome do sistema"},{field:"siglaSecretaria",label:"Sigla da Secretaria"},{field:"siglaSistema",label:"Sigla do Sistema"}],Uo=[{field:"motivoBaixa",label:"Inserir novo motivo"}],Yo=ce(["parametros"],(function(e){var a=Object(o.useState)({options:["Idade e prazos para baixa","Dist\xe2ncia m\xednima entre poltronas","Nomenclaturas","Motivos para baixa do ve\xedculo"],params:["idadeBaixa","distanciaPoltronas","nomes","motivosBaixa"],forms:[Vo,Ro,Bo,Uo]}),t=Object(Be.a)(a,2),r=t[0],i=t[1],l=r.toastMsg,c=r.toastStatus,s=r.confirmToast,d=e.outsider;Object(o.useEffect)((function(){if(d){var a,t=e.redux.parametros,o=t[0].motivosBaixa;o&&(null===(a=t[0])||void 0===a?void 0:a.id)&&(o.id=t[0].id),i(Object(h.a)(Object(h.a)({},r),{},{form:Uo,tab:3,initState:o,newState:o,selectedOption:"Motivos para baixa do ve\xedculo"}))}return function(){}}),[d]);var u=Object(o.useCallback)((function(a){var t,o,n,l=a.target,c=l.name,s=l.value,d=e.redux.parametros,u=r.options,m=r.forms,p=r.params,v=u.indexOf(s),b=m[v],g=d[0][p[v]];g&&(null===(t=d[0])||void 0===t?void 0:t.id)&&(g.id=d[0].id),i(3===v?Object(h.a)(Object(h.a)({},r),{},(o={initState:g,newState:g},Object(f.a)(o,c,s),Object(f.a)(o,"tab",v),Object(f.a)(o,"form",b),Object(f.a)(o,"modified",!1),o)):Object(h.a)(Object(h.a)(Object(h.a)({},r),g),{},(n={initState:g},Object(f.a)(n,c,s),Object(f.a)(n,"tab",v),Object(f.a)(n,"form",b),Object(f.a)(n,"newState",void 0),Object(f.a)(n,"modified",!1),n)))}),[e.redux,r]),m=function(){var e=Object(C.a)(j.a.mark((function e(a){var t,o,n,l,c,s,d;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.tab,o=a.target,n=o.name,l=o.value,3===t?((s=Object(v.a)(r.newState))[n]=l,c=p(null,null,s),i(Object(h.a)(Object(h.a)({},r),{},{newState:s,modified:c}))):(c=p(n,l),i(Object(h.a)(Object(h.a)({},r),{},(d={},Object(f.a)(d,n,l),Object(f.a)(d,"modified",c),d))));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),p=function(e,a,t){var o,n,i,l=r.initState,c=!1;return t?i=l.toString()!==t.toString():(Object.keys(l).forEach((function(a){a!==e&&r[a].toString()!==l[a].toString()&&(o=!0)})),n=l[e]&&l[e].toString()!==a),(n||o||i)&&(c=!0),c},b=function(e,a){return i(Object(h.a)(Object(h.a)({},r),{},{confirmToast:!r.confirmToast,toastMsg:e,toastStatus:a}))};return n.a.createElement(n.a.Fragment,null,n.a.createElement(Mo,{data:r,selectOption:u,plusOne:function(){var e=Object(v.a)(r.initState);r.newState&&(e=Object(v.a)(r.newState)),e[e.length]="",i(Object(h.a)(Object(h.a)({},r),{},{newState:e}))},removeOne:function(e){var a=r.initState,t=r.newState,o=Object(v.a)(a);t&&(o=Object(v.a)(t)),o.splice(e,1);var n=p(null,null,o);i(Object(h.a)(Object(h.a)({},r),{},{newState:o,modified:n}))},handleInput:m,handleSubmit:function(){var e,a=r.tab,t=r.forms,o=r.params,n=r.initState,l=r.newState,c=n.id,s=t[a].map((function(e){return e.field})),d=o[a],u={};3===a?(l.forEach((function(e,a){""===e&&l.splice(a,1)})),i(Object(h.a)(Object(h.a)({},r),{},{newState:l})),u=l):s.forEach((function(e){return Object.assign(u,Object(f.a)({},e,r[e]))}));var m=p(null,null,u);T.a.put("/api/parametros",(e={},Object(f.a)(e,d,u),Object(f.a)(e,"id",c),e)).then((function(e){200===e.status&&(b(e.data),setTimeout((function(){i(Object(h.a)(Object(h.a)({},r),{},{initState:u,modified:m}))}),1200))})).catch((function(e){return console.log(e)}))},outsider:e.outsider}),n.a.createElement(ee,{open:s,close:b,msg:l,status:c}))}));function Ho(e){var a=e.collections,t=e.collection,r=e.data,i=e.staticData,l=e.editMotivosBaixa,c=e.selectCollection,s=e.handleChange,d=e.enableEdit,u=e.confirmDelete,m=(e.handleSubmit,e.openAddDialog);return n.a.createElement(o.Fragment,null,n.a.createElement(_a,{links:["Ve\xedculos","/veiculos"],text:"Alterar configura\xe7\xf5es de ve\xedculos"}),n.a.createElement("center",null,n.a.createElement("h4",null,"Selecione uma das op\xe7\xf5es abaixo.")),n.a.createElement("header",{className:"selectHeader"},n.a.createElement(Je.a,{className:"config__selector",onChange:c,value:t,select:!0,SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},a.map((function(e,a){return n.a.createElement(He.a,{key:a,value:e},e)})))),i&&t&&!l&&n.a.createElement("div",{className:"divHeader"},n.a.createElement(Ze.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"10px 0 10px 0"},onClick:function(){return m()}},n.a.createElement(ea.a,null)," Adicionar")),l?n.a.createElement(Yo,{form:Uo,tab:3,outsider:!0}):n.a.createElement("div",{className:"container"},r&&i&&r.map((function(e,a){return n.a.createElement("div",{className:"divCell",key:a},n.a.createElement(Je.a,{value:e.edit?e[i.field]:e[i.field]+" ("+e.count+")",onChange:s,name:e.field,type:"text",inputProps:{autoCorrect:"off",spellCheck:!1,style:{fontSize:"0.8rem",color:!0===e.edit?"#000":"#999"}},className:"config__textField",disabled:!1===e.edit}),n.a.createElement("button",{component:"span",className:"configVehicleIcon",title:"Editar",onClick:function(){return d(a)},display:"none"},n.a.createElement(Ao.a,{className:"confIcon",color:"primary"})),n.a.createElement("button",{className:"configVehicleIcon",title:"Remover",onClick:function(){return u(a)}},n.a.createElement(It.a,{className:"confIcon",color:"secondary"})))}))))}var Jo=ce(["seguradoras","lookUpTable/marca_chassi","modelosChassi","lookUpTable/marca_carroceria","carrocerias","equipamentos","veiculos","acessibilidade","empresasLaudo"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;Object(w.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={collection:"",marca:"",options:[],openAddDialog:!1,confirmToast:!1,toastMsg:"Dados atualizados!",confirmDialogProps:{open:!1}},e.addCounter=function(e,a,t){var o=a.name,n=a.field,r=a.label;return t.forEach((function(a){var t=e.filter((function(e){return!e.hasOwnProperty(o)||"Itens de acessibilidade"!==r&&"Equipamentos"!==r?e[o]===a[n]:e[o].find((function(e){return e===a.id}))})).length;Object.assign(a,{count:t})})),t=t.sort((function(e,a){return e[n].localeCompare(a[n])}))},e.selectCollection=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("Motivos para baixa do ve\xedculo"!==(o=t.target.value)){a.next=4;break}return e.setState({editMotivosBaixa:!0,collection:o}),a.abrupt("return");case 4:return n=e.props.redux,r=n.veiculos,i=n.marcaChassi,l=n.marcaCarroceria,c=U.find((function(e){return e.label===o})),s=JSON.parse(JSON.stringify(e.props.redux[c.collection])),(s=e.addCounter(r,c,s)).forEach((function(e){return e.edit=!1})),e.setState({marcas:void 0,marca:""}),"modelosChassi"===c.collection&&e.setState({marcas:i}),"carrocerias"===c.collection&&e.setState({marcas:l}),a.next=13,e.setState({collection:o,data:s,staticData:c,editMotivosBaixa:void 0});case 13:case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.enableEdit=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m,p,f,v,h,b,g,E,x;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(x=function(){return(x=Object(C.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.forEach((function(e){return e.edit=!1})),p[t].edit=!0,e.next=4,this.setState({data:p,editIndex:t});case 4:s.focus();case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},E=function(){return x.apply(this,arguments)},i=JSON.parse(JSON.stringify(e.props.redux)),l=document.querySelectorAll(".divCell"),c=l[t].childNodes[0],s=c.querySelectorAll("input")[0],d=e.state,u=d.updatedObj,m=d.staticData,p=JSON.parse(JSON.stringify(e.state.data)),f=p[t],v=null===(o=e.state)||void 0===o||null===(n=o.staticData)||void 0===n?void 0:n.field,void 0===(null===f||void 0===f?void 0:f.edit)&&(f.edit=!1),h=i[m.collection].find((function(e){return e.id===f.id?Object.freeze(e):{}})),b=p[t][v]===h[v],g=p.some((function(e,a){return a!==t&&!0===e.edit&&(r=p.indexOf(e),e)}))){a.next=18;break}if(!1!==f.edit){a.next=14;break}return p[t].edit=!0,a.next=11,e.setState({data:p});case 11:s.focus(),a.next=17;break;case 14:p[t].edit=!1,u&&!b&&e.handleSubmit(u),e.setState({data:p,editIndex:void 0});case 17:return a.abrupt("return");case 18:g&&!f.edit&&(E.call(Object(Se.a)(e)),h=i[m.collection].find((function(e){var a;return e.id===(null===(a=p[r])||void 0===a?void 0:a.id)})),b=p[r][v]===h[v],u&&!b&&e.handleSubmit(u));case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.selectMarca=function(a){var t,o=a.target.value,n=e.state.staticData.collection,r=e.props.redux,i=r.marcaChassi,l=r.marcaCarroceria;"modelosChassi"===n&&(t=i),"carrocerias"===n&&(t=l);var c=t.find((function(e){return e.marca===o})).id;e.setState({marca:o,marcaId:c})},e.handleChange=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=t.target.value,n=e.state,r=n.staticData,i=n.data,l=r.field,c=i.find((function(e){return!0===e.edit})),s=i.indexOf(c),c[l]=o,(d=Object(v.a)(e.state.data))[s]=c,u=Object(f.a)({id:null===c||void 0===c?void 0:c.id},l,o),e.setState({data:d,updatedObj:u});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(a){var t=a.target.value;e.setState({newElement:t})},e.addNewElement=Object(C.a)(j.a.mark((function a(){var t,o,n,r,i,l,c,s,d,u;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state,o=t.staticData,n=t.newElement,r=t.marcaId,i=o.table,l=o.field,c=o.collection,s=e.props.redux.veiculos,d=Object(f.a)({},l,n),r&&(d.marcaId=r),d=A.a.decamelizeKeys(d),console.log("\ud83d\ude80 ~ file: Config.jsx ~ line 205 ~ VehicleConfig ~ addNewElement= ~ requestElement",d),a.next=7,T.a.post("/api/addElement",{table:i,requestElement:d});case 7:u=e.props.redux[c],u=e.addCounter(s,o,u),e.setState({openAddDialog:!1,data:u,marcaId:void 0});case 10:case"end":return a.stop()}}),a)}))),e.confirmDelete=function(a){var t=e.state,o=t.data,n=t.staticData.field,r=o[a][n],i={open:!0,type:"delete",element:"".concat(r),index:a};e.setState({confirmDialogProps:i})},e.removeItem=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.closeConfirmDialog(),n=Object(v.a)(e.state.data),!((null===(o=n[t])||void 0===o?void 0:o.count)>0)){a.next=6;break}return alert("O item selecionado n\xe3o pode ser apagado por haver v\xednculo com um ou mais ve\xedculos cadastrados no sistema."),a.abrupt("return");case 6:if(r=e.state.staticData,i=r.collection,l=r.table,c=n[t].id,s=e.props.redux[i],!s.find((function(e){return e.id===c}))){a.next=10;break}return a.next=10,T.a.delete("/api/delete?table=".concat(l,"&tablePK=id&id=").concat(c)).catch((function(e){return console.log(e)}));case 10:n.splice(t,1),e.setState({data:n});case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleSubmit=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=e.state.staticData,n=o.field,r=o.table,"id",i=A.a.decamelize(n),l=[A.a.decamelizeKeys(t)],a.next=3,T.a.put("/api/editElements",{requestArray:l,table:r,tablePK:"id",column:i}).catch((function(e){return console.log(e)}));case 3:e.setState({updatedObj:void 0});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.closeConfirmDialog=function(){var a=Object(h.a)({},e.state.confirmDialogProps);a.open=!1,e.setState({confirmDialogProps:a})},e.toggleDialog=function(){return e.setState({openAddDialog:!e.state.openAddDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=[];U.forEach((function(a){e.push(a.label)})),this.setState({options:e})}},{key:"componentDidUpdate",value:function(e){var a=JSON.parse(JSON.stringify(this.props.redux)),t=a.veiculos,o=this.state,n=o.staticData,r=o.data,i=o.editIndex;if(!n||!r)return null;var l=n.collection;if(JSON.stringify(e.redux[l])!==JSON.stringify(a[l])){var c=this.addCounter(t,n,a[l]);(i||0===i)&&(c[i].edit=!0),this.setState({data:c})}}},{key:"render",value:function(){var e=this.state,a=e.options,t=e.collection,r=e.data,i=e.staticData,l=e.openAddDialog,c=e.marca,s=e.marcas,d=e.editMotivosBaixa,u=e.confirmToast,m=e.toastMsg,p=e.confirmDialogProps;return n.a.createElement(o.Fragment,null,n.a.createElement(Ho,{collections:a,collection:t,data:r,staticData:i,selectCollection:this.selectCollection,enableEdit:this.enableEdit,handleChange:this.handleChange,handleSubmit:this.handleSubmit,openAddDialog:this.toggleDialog,confirmDelete:this.confirmDelete,editMotivosBaixa:d}),l&&n.a.createElement(St,{open:l,close:this.toggleDialog,title:i.label,helperMessage:'Para adicionar, insira o nome no campo abaixo e clique em "Confirmar".',marca:c,marcas:s,selectMarca:this.selectMarca,handleInput:this.handleInput,addNewElement:this.addNewElement}),p.open&&n.a.createElement(Ct,Object.assign({},p,{close:this.closeConfirmDialog,confirm:this.removeItem})),n.a.createElement(ee,{open:u,close:this.toast,msg:m}))}}]),t}(o.PureComponent)),Ko=t(153),Wo=t.n(Ko),$o=[{field:"placa",title:"Placa"},{field:"empresa",title:"Delegat\xe1rio"},{field:"seguradora",title:"Seguradora"},{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"vencimento",title:"Vencimento Seguro",render:function(e){return Ha(e.vencimento)}},{field:"situacao",title:"Situa\xe7\xe3o"},{field:"compartilhado",title:"Compartilhado por"},{field:"indicadorIdade",title:"Indicador de idade",render:function(e){var a=e.indicadorIdade,t=" anos";if(a||0===a)return-1===a&&(a=0),1!==a&&0!==a||(t=" ano"),a.toString()+t}}],Go=[{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"seguradora",title:"Seguradora"},{field:"empresa",title:"Segurado"},{field:"situacao",title:"Situa\xe7\xe3o"},{field:"segurados",title:"N\xfamero de ve\xedculos"},{field:"dataEmissao",title:"In\xedcio da vig\xeancia",filtering:!1,render:function(e){return Ha(e.dataEmissao)}},{field:"vencimento",title:"Vencimento",filtering:!1,render:function(e){return Ha(e.vencimento)}}],Xo=[[{field:"codigoEmpresa",title:"C\xf3digo da Empresa"},{field:"razaoSocial",title:"Raz\xe3o Social"},{field:"vencimentoContrato",title:"Vencimento do Cadastro",filtering:!1,render:function(e){return Ha(e.vencimentoContrato)}},{field:"cnpj",title:"CNPJ"},{field:"situacao",title:"Situa\xe7\xe3o"},{field:"frota",title:"Tamanho da frota"}]].concat([[{field:"nomeSocio",title:"Nome"},{field:"cpfSocio",title:"CPF"},{field:"nomeEmpresas",title:"Delegat\xe1rio(s)"},{field:"emailSocio",title:"E-mail"},{field:"telSocio",title:"Telefone"},{field:"share",title:"Participa\xe7\xe3o Societ\xe1ria (%)",filtering:!1}]]).concat([[{field:"nomeProcurador",title:"Nome"},{field:"cpfProcurador",title:"CPF"},{field:"emailProcurador",title:"E-mail"},{field:"telProcurador",title:"Telefone"},{field:"createdAt",title:"Data de inclus\xe3o no sistema",type:"date"},{field:"nomeEmpresas",title:"Empresas"}]]).concat([$o]).concat([Go]),Zo=t(422),Qo=t(295),en=function(e,a){var t=[];return e.forEach((function(e){var o=e.procuradorId,n=a.filter((function(e){return e.procuradores.includes(o)}));delete e.procuradorId,n.length&&n.forEach((function(a){var o=a.codigoEmpresa,n=a.razaoSocial,r=a.vencimento;t.push(Object(h.a)(Object(h.a)({},e),{},{"C\xf3digo da Empresa":o,"Raz\xe3o Social":n,Vencimento:r?Ha(r):"Prazo indeterminado"}))}))})),t};var an=function(e,a,t,o){var n=e,r=function(e,a,t){var o=JSON.parse(JSON.stringify(a));Array.isArray(o)&&o.forEach((function(a,t){Object.entries(a).forEach((function(t){var o=Object(Be.a)(t,2),n=o[0],r=o[1],i=e.find((function(e){return e.field===n}));if("procuradorId"!==n){if(!i)return void delete a[n];var l=null===i||void 0===i?void 0:i.label;r=function(e){return e instanceof Array&&(e=e.toString()),Ae()(e,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()&&(e=Ae()(e).format("DD/MM/YYYY")),e}(r),a[l]=r,delete a[n]}}))}));return o}(a,oo(e,t)||t);"procuradores"===e&&(r=en(r,o)),console.log("\ud83d\ude80 ~ file: exportToXlsx.js ~ line 19 ~ exportToXlsx ~ formatedData",r);var i=Qo.utils.json_to_sheet(r),l=function(e){var a=Object.keys(e[0]).length,t=new Array(a);return e.forEach((function(e){Object.values(e).forEach((function(e,a){var o=e?e.toString().length:2;t[a]?t[a]+=o:t[a]=o}))})),t.map((function(a){var t=Math.ceil(a/e.length)+2;return t<7?7:t}))}(r);i["!cols"]=l.map((function(e){return{wch:e}}));var c={Sheets:{data:i},SheetNames:["data"]},s=Qo.write(c,{bookType:"xlsx",type:"array"}),d=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Zo.saveAs(d,n+".xlsx")},tn=function(e){var a=e.tab,t=e.collection,o=e.user,r=e.procuracoes,i=e.showDetails,l=e.showFiles,c=e.showCertificate,s=e.confirmDeactivate,d=e.del,u=["codigoEmpresa","socioId","procuradorId","veiculoId","apolice"][a],m=["empresas","s\xf3cios","procuradores","ve\xedculos","seguros"],p=ro(a);return Array.isArray(t)||(t=[]),t=t.map((function(e){return Object(h.a)({},e)})),n.a.createElement("div",{style:{margin:"10px 0"},className:"noPrint"},n.a.createElement(Wo.a,{title:"Pesquisar dados de ".concat(m[a]),columns:Xo[a],data:t,style:{fontFamily:"Segoe UI",fontSize:"14px"},options:{filtering:!0,exportFileName:m[a],exportButton:!0,exportCsv:function(e,t){an(m[a],p,t,r)},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:20,rowStyle:{fontSize:"0.5rem"}},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Registro n\xe3o encontrado.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportCSVName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},actions:[{icon:"info",iconProps:{color:"primary"},tooltip:"Mais informa\xe7\xf5es",onClick:function(e,a){return i(e,a)}},{icon:"file_copy_outline",iconProps:{color:"secondary"},tooltip:"Ver arquivos",onClick:function(e,a){return l(a[u])}},{icon:"class_outlined",iconProps:{color:"action"},tooltip:"Emitir certificado",hidden:3!==a,onClick:function(e,a){return c(a)}},{icon:"cancel",iconProps:{color:"disabled"},tooltip:"Desativar empresa",hidden:0!==a||"empresa"===o.role,onClick:function(e,a){return s(a)}}],editable:{isDeleteHidden:function(e){return"empresa"===o.role||0===a},onRowDelete:function(){var e=Object(C.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}}))},on=t(602),nn=t(381),rn=t(88),ln=t(603),cn=t(600),sn=(t(402),Object(X.a)((function(e){return{toolbarTitle:{flex:1},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto",backgroundColor:"#0398c1",color:"white"},toolbarLink:{padding:"12px 55px 13px 55px",flexShrink:0}}}))),dn=[{title:"P\xe1gina Inicial",link:"/"},{title:"Consultas",link:"/consultas"},{title:"Ve\xedculos",link:"/veiculos"},{title:"Empresas",link:"/empresas"},{title:"Relat\xf3rios",link:"/relatorios"},{title:"Solicita\xe7\xf5es ",link:"/solicitacoes"},{title:"Editar Conta",link:"/editAccount",icon:"person"}],un=[{title:"Alterar par\xe2metros do sistema",link:"/parametros",icon:"settings"},{title:"Gest\xe3o de usu\xe1rios",link:"/users",icon:"group"}],mn=Object(Pt.a)((function(e){return{badge:{right:-8,top:-1,padding:"0 4px"}}}))(cn.a);var pn=Object(c.c)((function(e){var a,t;return{logs:null===(a=e.data)||void 0===a?void 0:a.logs,parametros:null===(t=e.data)||void 0===t?void 0:t.parametros,user:e.user}}),(function(e){return Object(l.b)({logUserOut:ie},e)}))(Object(O.g)((function(e){var a=null===e||void 0===e?void 0:e.logs,t=e.parametros,r=e.location.pathname,i=e.user,l=localStorage.getItem("demand"),c=sn(),s=c.toolbarTitle,d=c.toolbarSecondary,u=c.toolbarLink,m=Object(o.useState)(document.location.pathname),p=Object(Be.a)(m,2),f=p[0],v=p[1],h=Object(o.useState)(),b=Object(Be.a)(h,2),g=b[0],E=b[1];Object(o.useEffect)((function(){if(a&&Array.isArray(a)){var e=a.filter((function(e){return!1===(null===e||void 0===e?void 0:e.completed)})).length;E(e)}v(r)}),[r,g,a]);var x=function(e){var a,t=null===(a=document.querySelector("a[href='/solicitacoes']"))||void 0===a?void 0:a.style,o="",n="";return"/solicitacoes"===f||l?t&&(t["background-color"]="#11a7d2",t["border-bottom"]="1.5px solid #ccc"):f.match(e)&&"/"!==e&&(o="#11a7d2",n="1.5px solid #ccc",t&&(t["background-color"]="",t["border-bottom"]="")),{bgColor:o,borderB:n,borderT:"",fontW:"400"}},O="",y="";if(t&&t[0]){var w=t[0].nomes;O=w.secretaria,y=w.siglaSecretaria}var k=function(){var a=Object(C.a)(j.a.mark((function a(){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",e.logUserOut(null===i||void 0===i?void 0:i.socketId));case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,n.a.createElement(on.a,null),n.a.createElement(nn.a,null,n.a.createElement(rn.a,{component:"h2",variant:"h6",color:"inherit",align:"center",noWrap:!0,className:s},y," - ",O),n.a.createElement(Ze.a,{variant:"outlined",size:"small",onClick:function(){return k()}},"Sair")),n.a.createElement(nn.a,{component:"nav",variant:"dense",className:d},dn.map((function(e,a){var t=e.link,o=e.title;e.icon;return"Editar Conta"===o?null:n.a.createElement(ln.a,{component:S.b,to:t,key:a,color:"inherit",noWrap:!0,variant:"body2",href:"",style:{fontFamily:"Segoe UI, Tahoma, Geneva, Verdana, sans-serif",fontSize:"15px",backgroundColor:x(t).bgColor,borderBottom:x(t).borderB,fontWeight:x(t).fontW,borderTop:x(t).borderT},className:u,onClick:function(){return v(t)}},"Solicita\xe7\xf5es "===o?n.a.createElement(mn,{badgeContent:g,color:"secondary"},n.a.createElement("span",null,o)):o)})),"admin"===i.role?un.map((function(e,a){var t=e.title,o=e.link,r=e.icon;return n.a.createElement(ln.a,{component:S.b,to:o,key:a},n.a.createElement("span",{className:"material-icons adminLink",style:{color:"white",cursor:"pointer"},title:t},r))})):n.a.createElement(ln.a,{component:S.b,to:dn[6].link},n.a.createElement("span",{className:"material-icons iconHeaderLink",style:{color:"white",cursor:"pointer"},title:dn[6].title},dn[6].icon))))}))),fn=function(){return null},vn=t(604),hn=t(597),bn=function(e){var a=e.items,t=e.tab,o=e.changeTab;return n.a.createElement("div",{className:"tabMenu"},n.a.createElement(vn.a,{value:t,indicatorColor:"primary",textColor:"primary",centered:!0,onChange:o},a.map((function(e,a){return n.a.createElement(hn.a,{key:a,label:e})}))))},gn=[[{field:"empresa",label:"Delegat\xe1rio",width:"95mm",left:"50mm"},{field:"codigoEmpresa",label:"C\xf3digo do Delegat\xe1rio",width:"18mm"},{field:"dataExpedicaoCRV",label:"Data de emiss\xe3o",width:"20mm",value:Ae()().format("DD/MM/YYYY")},{field:"vencimento",label:"Validade do CRV",type:"date",width:"20mm"}]],En=[[{field:"placa",label:"Placa",width:"25mm",left:"8mm"},{field:"renavam",label:"Renavam",width:"42mm",left:"14mm"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",width:"35mm",left:"11mm"},{field:"nChassi",label:"N\xfamero do Chassi",width:"50mm",left:"15mm"}]],xn=[[{field:"poltronas",label:"Poltronas",width:"16mm",left:"2mm"},{field:"piquesPoltrona",label:"Piques poltrona",width:"19mm"},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)"},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)"},{field:"eixos",label:"Eixos",width:"12mm",left:"2mm"},{field:"pneumaticosDianteiro",label:"Pneum\xe1ticos Dianteiro"},{field:"pneumaticosTraseiro",label:"Pneum\xe1ticos Traseiro"},{field:"potencia",label:"Pot\xeancia (cv)",width:"15mm"}],[{field:"marcaChassi",label:"Marca do Chassi",width:"40mm",left:"4mm"},{field:"modeloChassi",label:"Modelo do Chassi",width:"40mm",left:"3mm"},{field:"anoChassi",label:"Ano do chassi"},{field:"marcaCarroceria",label:"Marca da Carroceria",width:"40mm",left:"2mm"},{field:"modeloCarroceria",label:"Modelo da Carroceria",width:"40mm",left:"1mm"},{field:"anoCarroceria",label:"Ano da carroceria"}]],Sn=[[{field:"seguradora",label:"Seguradora",width:"75mm",left:"27.5mm"},{field:"apolice",label:"Ap\xf3lice",width:"35mm",left:"11mm"},{type:"date",field:"dataEmissao",label:"In\xedcio de vig\xeancia",width:"25mm"},{type:"date",field:"vencimento",label:"Vencimento",width:"25mm",left:"5mm"}]],On=[[{field:"numeroLaudo",label:"N\xfamero do Laudo",width:"45mm",left:"10mm"},{field:"empresaLaudo",label:"Empresa Respons\xe1vel",width:"80mm",left:"26mm"},{field:"vencimentoLaudo",label:"Vencimento",type:"date",width:"35mm",left:"9mm"}]],yn=[[{field:"cmt",label:"PBT / CMT Legal (t)",width:"27mm",left:"2mm",format:function(e){return tt(e)}},{field:"pesoDianteiro",label:"Peso Dianteiro (t)",width:"27mm",left:"3.5mm",format:function(e){return tt(e)}},{field:"pesoTraseiro",label:"Peso Traseiro (t)",width:"27mm",left:"3.5mm",format:function(e){return tt(e)}},{field:"pbt",label:"Peso Bruto Total (t)",width:"30mm",left:"4mm",format:function(e){return tt(e)}},{field:"pesoPassageiros",label:"Passag/Bagagem (t)",width:"30mm",left:"3mm",format:function(e){return tt(e)}}]],jn=[[{field:"dataRegistro",label:"Data de Registro",type:"date",width:"30mm",left:"4mm"},{field:"cores",label:"Cores",width:"65mm",left:"15mm"},{field:"compartilhado",label:"Empresa autorizada a compartilhar",width:"90mm",left:"11mm"}]],Cn=t(423),wn=t.n(Cn),kn=(t(555),function(e){var a=e.nomes,t=a.secretaria,o=a.subsecretaria,r=a.superintendencia;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"certHeader__container"},n.a.createElement("div",{className:"certHeader__brasao"},n.a.createElement("img",{src:"/images/brasao.png",alt:"Bras\xe3o de Minas Gerais",className:"certHeader__img"})),n.a.createElement("div",{className:"certHeader__text"},n.a.createElement("p",null,t),n.a.createElement("p",null,o),n.a.createElement("p",null,r),n.a.createElement("h2",null,"Certificado de Registro e Seguro"))))}),Dn=Object(X.a)((function(e){return{textField:{paddingRight:"25px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"}}})),In=function(e){var a=e.vehicle,t=e.nomes,r=e.checkMulti,i=e.redirect,l=e.delega,c=e.carac,s=e.dadosVeiculo,d=e.seg,u=e.vistoria,m=e.peso,p=e.info,f=Dn().textField,v=a.acessibilidade,h=a.equipamentos,b=a.obs,g=[{title:"Delegat\xe1rio",form:l},{title:"Dados do Ve\xedculo",form:s},{title:"Caracter\xedsticas do Ve\xedculo",form:c},{title:"Seguro",form:d},{title:"Vistoria",form:u},{title:"Pesagem",form:m},{title:"Informa\xe7\xf5es gerais",form:p},{title:"Observa\xe7\xf5es",form:b}];return n.a.createElement(o.Fragment,null,n.a.createElement("div",{id:"pdfPage",className:"A4"},n.a.createElement("header",{className:"header"},n.a.createElement(kn,{nomes:t})),g.map((function(e,a){var t=e.title,o=e.form;return"Observa\xe7\xf5es"!==t&&n.a.createElement("section",{className:"Delegat\xe1rio"!==t?"box":"firstBox",key:a},"Delegat\xe1rio"!==t&&n.a.createElement("span",{className:"boxTitle"},t),o.map((function(e,a){return n.a.createElement("div",{key:a,className:"Delegat\xe1rio"!==t?"divLine":"firstDivLine",style:{marginTop:0===a?"7mm":"3mm"}},e.map((function(e,a){return n.a.createElement(Je.a,{disabled:!0,key:a,name:e.field,label:e.label,className:f,multiline:!!("equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50),rows:e.value&&e.value.length<86?"2":e.value&&e.value.length<140?"3":"4",variant:"equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50?"outlined":"standard",value:"date"===e.type?Ae()(e.value).isValid()?Ae()(e.value).format("DD/MM/YYYY"):"":"dataExpedicao"===e.field?Ae()().format("DD-MM-YYYY"):e.format?e.format(e.value):e.value||"",inputProps:{className:r(e.field),style:{width:e.width||"18mm",fontSize:"2.7mm",padding:"0 0 1px 0",margin:"0",flex:"1",color:"#000"}},InputProps:{style:{padding:"equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50?"1mm":""}},InputLabelProps:{shrink:!0,style:{fontSize:"13px",textAlign:"center !important",left:e.left||"0",color:"#000"}}})})))})))})),n.a.createElement("div",{className:"box"},n.a.createElement("span",{className:"boxTitle"},"Equipamentos / Itens de acessibilidade"),(h||v)&&n.a.createElement("div",{className:"divLine flex",style:{overflow:"unset"}},h.map((function(e,a){return v[0]||a!==h.length-1?n.a.createElement("span",{className:"equipa"},e,",\xa0"):n.a.createElement("span",{className:"equipa"},e,".")})),v.map((function(e,a){return a!==v.length-1?n.a.createElement("span",{className:"equipa",key:a},"".concat(e,", ")):n.a.createElement("span",{className:"equipa",key:a},"".concat(e,"."))})))),b&&n.a.createElement("div",{className:"flexColumn"},n.a.createElement(co,{label:"Observa\xe7\xf5es:",name:"obs",id:"obs",defaultValue:b,rows:"7",style:{color:"#000",fontSize:"0.55 rem",padding:"5px",overflow:"hidden"}})),n.a.createElement("footer",{className:"certFooter"},n.a.createElement("h1",{className:"certFooter__title"},"PORTE OBRIGAT\xd3RIO"),n.a.createElement("p",{className:"certFooter__text"},"Este certificado pode ser verificado em ",n.a.createElement("span",{className:"link",onClick:function(){return i()}}," http://www.cadti.mg.gov.br ")))),n.a.createElement("button",{title:"Imprimir / salvar PDF",className:"noprint printButton",onClick:function(){return window.print()}},n.a.createElement(wn.a,{style:{cursor:"pointer",color:"rgb(161, 161, 180)",fontSize:"40pt"}})))};function Nn(){var e=Object(o.useState)({}),a=Object(Be.a)(e,2),t=a[0],r=a[1],i=Object(o.useState)({}),l=Object(Be.a)(i,2),c=l[0],s=l[1];Object(o.useEffect)((function(){function e(){return(e=Object(C.a)(j.a.mark((function e(){var a,t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("vehicle")),t=JSON.parse(localStorage.getItem("nomes")),document.querySelectorAll(".MuiToolbar-root").forEach((function(e){return e.style.display="none"})),e.next=5,r(a);case 5:if(!t){e.next=8;break}return e.next=8,s(t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),localStorage.removeItem("vehicle")}),[]);var d=[xn,En,gn,Sn,On,yn,jn],u={};if(t){var m=t.poltronas,p=t.pesoDianteiro,f=80*m/1e3;t.pesoPassageiros=f,t.pesoDianteiro=+p,d.forEach((function(e){Object.entries(t).forEach((function(a){var t=Object(Be.a)(a,2),o=t[0],n=t[1];e.forEach((function(a,t){a.forEach((function(a,r){a.field===o&&(u=Object.assign(a,{value:n}),e[t][r]=u,u={})}))}))}))}))}if(!t){var v=window.location.origin;return window.location.replace(v),null}return n.a.createElement(In,{vehicle:t,nomes:c,checkMulti:function(e){return"equipamentosId"===e||"equipamentosId"===e?void 0:"certificate"},redirect:function(){document.querySelectorAll(".MuiToolbar-root").forEach((function(e){return e.style.display="none"}));var e=window.location.origin;window.location.href=e},delega:gn,carac:xn,dadosVeiculo:En,seg:Sn,vistoria:On,peso:yn,info:jn})}var An=function(e){return e>1024&&e<1048576?Math.round(e/1024)+" KB":e>=1048576&&e<1073741824?(e/1024/1024).toFixed(2)+" MB":e+" bytes"},Pn={marginBottom:0,display:"grid",grid:"50px / 4% 40% 25% 25%",width:"99%",margin:"auto",padding:"10px 0 0 0",justifyItems:"auto"},Tn=function(e){var a=e.filesCollection,t=e.close,o=e.typeId,r=e.empresas,i=e.filesIds,l=e.razaoSocial,c=[],s="empresaDocs",d=Object(v.a)(bt);switch(o){case"veiculoId":s="vehicleDocs",(d=Object(v.a)(va)).find((function(e){return"transferenciaDoc"===e.name}))||d.push({title:"Documento de Transfer\xeancia",name:"transferenciaDoc"}),d.find((function(e){return"newPlateDoc"===e.name}))||d.push({title:"CRLV com nova placa",name:"newPlateDoc"}),d.find((function(e){return"apoliceDoc"===e.name}))||d.push({title:"Ap\xf3lice de seguro",name:"apoliceDoc"}),d.find((function(e){return"laudoDoc"===e.name}))||d.push({title:"Laudo de seguran\xe7a veicular",name:"laudoDoc"}),d.find((function(e){return"contratoCompartilhamento"===e.name}))||d.push({title:"Contrato de Compartilhamento",name:"contratoCompartilhamento"})}i&&(a=a.filter((function(e){return-1!==i.indexOf(e.id)}))),a&&a[0]&&a.forEach((function(e){d.forEach((function(a){e.metadata&&a.name===e.metadata.fieldName&&c.push(Object(h.a)(Object(h.a)({},e),{},{label:a.title}))}))}));return c[0]?n.a.createElement("div",{className:i?"":"popUpWindow"},n.a.createElement("h5",null,n.a.createElement("img",{alt:"",src:"/images/folderIcon2.jpg",style:{paddingLeft:"20px",marginRight:"20px"}})," Arquivos"),n.a.createElement("hr",{style:{marginBottom:"5px"}}),n.a.createElement("div",{style:Pn},n.a.createElement("div",null,n.a.createElement("img",{alt:"",src:"/images/multipleFiles2.png",height:"50%"})),["Arquivo","Data de Upload","Tamanho"].map((function(e,a){return n.a.createElement("div",{key:a},n.a.createElement("span",{style:{fontSize:"1.2em",fontWeight:500}},e))}))),n.a.createElement("hr",{style:{margin:"0 0 20px 0"}}),c.map((function(e,a){return n.a.createElement("div",{key:a},n.a.createElement("div",{style:Pn},n.a.createElement("div",{className:"col s1"},n.a.createElement("img",{alt:"",src:"/images/genericFile.png"})),n.a.createElement("div",{className:"col s11"},n.a.createElement("span",{style:{textDecoration:"underline",cursor:"pointer",color:"blue"},onClick:function(){return ya(e.id,e.filename,s,e.metadata.fieldName)}},function(e){var a=e.metadata,t=e.label;switch(a.fieldName){case"procuracao":if(l)return t+" - "+l;var o=r.find((function(e){return e.codigoEmpresa===Number(a.empresaId)}));return t+" - "+(null===o||void 0===o?void 0:o.razaoSocial)||"";case"apoliceDoc":return a.apolice?t+" n\xfamero "+a.apolice:t;case"altContratoDoc":return a.numeroAlteracao?"".concat(a.numeroAlteracao,"\xaa ")+t:t;default:return t}}(e))),n.a.createElement("div",{className:"col s3"},Ha(e.uploadDate,!0)),n.a.createElement("div",{className:"col s3"},An(e.length))))})),n.a.createElement(oa,{close:t})):null},Fn=new MutationObserver((function(e,a){e.forEach((function(e){e.addedNodes.forEach((function(e){if(e.nodeType===Node.ELEMENT_NODE){var a=e;a.classList.contains("MuiPopover-root")&&Array.from(a.getElementsByClassName("MuiMenuItem-root")).forEach((function(e){"Export as PDF"===e.textContent&&e.remove()}))}}))}))})),zn=function(e){return e?Fn.disconnect():Fn.observe(document.body,{childList:!0})},Ln=function(e,a,t){var o;return e.forEach((function(e){if(e.empresas instanceof Array){var n=e.empresas;1===t&&(n=e.empresas.map((function(e){return null===e||void 0===e?void 0:e.codigoEmpresa}))),(o=a.filter((function(e){return n.includes(e.codigoEmpresa)})).map((function(e){return e.razaoSocial})).toString().replace(",",", "))&&(e.nomeEmpresas=o)}})),e},Mn={top:"5%",left:"10%",right:"10%"},_n=function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(w.a)(this,t),(e=a.call(this)).state={tab:0,items:["Empresas","S\xf3cios","Procuradores","Ve\xedculos","Seguros"],tablePKs:["codigo_empresa","socio_id","procurador_id","veiculo_id","id"],dbTables:["empresas","socios","procuradores","veiculos","seguros"],options:["empresas","socios","procuradores","veiculos","seguros"],detailsTitle:["Empresa","S\xf3cio","Procurador","Placa","Ap\xf3lice"],detailsHeader:["razaoSocial","nomeSocio","nomeProcurador","placa","apolice"],empresas:[],seguros:[],razaoSocial:"",showDetails:!1,showFiles:!1,openDialog:!1,filesCollection:[],elementDetails:"",vehicleDocs:[],showCertificate:!1},e.changeTab=function(){var a=Object(C.a)(j.a.mark((function a(t,o){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.setState({tab:o});case 2:return a.abrupt("return");case 3:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.showDetails=function(){var a=Object(C.a)(j.a.mark((function a(t,o){var n,r,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.props.redux,r=e.state,i=r.options,l=r.tab,c=r.tablePKs,s=c.map((function(e){return A.a.camelize(e)})),o&&(d=n[i[l]].find((function(e){return e[s[l]]===o[s[l]]}))),void 0===o||!d){a.next=8;break}return a.next=5,e.setState({showDetails:!e.state.showDetails,elementDetails:d});case 5:a.next=9;break;case 8:e.setState({showDetails:!e.state.showDetails,elementDetails:void 0});case 9:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.closeFiles=function(){e.setState({showFiles:!e.state.showFiles})},e.showFiles=function(a){var t,o,n=e.state.tab,r=e.props.redux,i=r.allVehicleFields,l=r.socios,c=r.empresaDocs,s=r.vehicleDocs;switch(n){case 0:t=c.filter((function(e){var t;return e.metadata.empresaId===a&&!1===(null===(t=e.metadata)||void 0===t?void 0:t.tempFile)})),o="empresaId";break;case 1:t=c.filter((function(e){return e.metadata.empresaId===a}));var d=l.find((function(e){return e.socioId===a}));if(d){var u=[];t=c.filter((function(e){return d.empresas.some((function(a){return a.codigoEmpresa===e.metadata.empresaId&&"crc"!==e.metadata.fieldName}))})),console.log("\ud83d\ude80 ~ file: Consultas.jsx ~ line 114 ~ ConsultasContainer ~ selectedFiles",t),t.forEach((function(e){e.metadata.socios&&e.metadata.socios.includes(a)&&(console.log("\ud83d\ude80 ~ file: Consultas.jsx ~ line 129 ~ ConsultasContainer ~ id",a),u.push(e))})),t=u}break;case 2:o="procuracaoId";var m=[];c.forEach((function(e){var t,o;"procuracao"===(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.fieldName)&&((null===e||void 0===e||null===(o=e.metadata)||void 0===o?void 0:o.procuradores)&&e.metadata.procuradores.forEach((function(t){t===a&&m.push(e)})))})),t=m;break;case 3:o="veiculoId",t=s.filter((function(e){return e.metadata.veiculoId===a}));var p=i.find((function(e){return e.veiculoId===a}));if(p){var f=c.find((function(e){var a,t;return(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.apolice)===(null===p||void 0===p||null===(t=p.apolice)||void 0===t?void 0:t.toString())}));f&&t.push(f)}break;case 4:t=c.filter((function(e){return e.metadata.apolice===a}))}t=t.filter((function(e){var a;return!1===(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.tempFile)})),console.log(t),t[0]?(t=t.sort((function(e,a){return new Date(e.uploadDate)-new Date(a.uploadDate)})).reverse(),e.setState({filesCollection:t,showFiles:!0,typeId:o,selectedElement:a})):(e.setState({alertType:"filesNotFound",openAlertDialog:!0,subject:o}),e.setState({filesCollection:[]}))},e.confirmDeactivate=function(a){"Desativada"!==a.situacao?e.setState({openConfirmDialog:!0,confirmType:"deactivateEmpresa",element:(null===a||void 0===a?void 0:a.razaoSocial)||"",empresaToDeactivate:null===a||void 0===a?void 0:a.codigoEmpresa}):alert("A empresa ".concat(a.razaoSocial," j\xe1 foi desativada."))},e.deleteHandler=function(a){var t=e.state,o=t.dbTables,n=t.tablePKs,r=t.tab,i=o[r],l=n[r],c=A.a.camelize(l),s=a.codigoEmpresa;if("socios"!==i&&"procuradores"!==i||(s=JSON.stringify(null===a||void 0===a?void 0:a.empresas)),0===r){var d={table:i,tablePK:l,column:"situacao",requestArray:[{situacao:"Desativada",id:s=a}]};console.log(d),T.a.put("/api/editElements",d),e.closeConfirmDialog()}else T.a.delete("/api/delete?table=".concat(i,"&tablePK=").concat(l,"&id=").concat(a[c],"&codigoEmpresa=").concat(s,"&cpf_socio=").concat(a.cpfSocio,"&cpf_procurador=").concat(a.cpfProcurador)).then((function(e){return console.log(e.data)}))},e.showCertificate=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m,p,f;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.props.redux,n=o.laudos,r=o.parametros,i=t.veiculoId,l=t.anoCarroceria,c=t.situacao,s=t.vencimento,d=Ae()(s).isBefore(),u=(new Date).getFullYear(),!(u-l>=16)){a.next=7;break}if(m=n.find((function(e){return e.veiculoId===i})),Ae()(null===m||void 0===m?void 0:m.validade).isAfter(Ae()())){a.next=7;break}return a.next=6,e.setState({openAlertDialog:!0,customTitle:"Certificado de seguran\xe7a veicular pendente.",customMessage:"O laudo de seguran\xe7a veicular n\xe3o est\xe1 registrado no sistema ou se encontra vencido. Para regularizar, acesse Ve\xedculos -> Laudos."});case 6:return a.abrupt("return");case 7:if("Ativo"===c){a.next=11;break}return a.next=10,e.setState({alertType:"veiculoPendente",openAlertDialog:!0});case 10:return a.abrupt("return");case 11:if(!d){a.next=15;break}return a.next=14,e.setState({alertType:"seguroVencido",openAlertDialog:!0});case 14:return a.abrupt("return");case 15:p=window.location.origin+"/crv",localStorage.setItem("vehicle",JSON.stringify(t)),r&&r[0]&&(f=r[0].nomes,localStorage.setItem("nomes",JSON.stringify(f))),window.open(p,"noopener");case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.closeCertificate=function(){return e.setState({showCertificate:!e.state.showCertificate})},e.closeConfirmDialog=function(){return e.setState({openConfirmDialog:!1})},e.escFunction=function(a){27===a.keyCode&&(e.state.showDetails&&e.showDetails(),e.state.showFiles&&e.closeFiles(),e.state.showCertificate&&e.closeCertificate())},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1),zn()}},{key:"componentWillUnmount",value:function(){zn(!0),this.setState({})}},{key:"render",value:function(){var e,a=this.state,t=a.tab,r=a.options,i=a.items,l=a.showDetails,c=a.elementDetails,s=a.showFiles,d=a.selectedElement,u=a.filesCollection,m=a.typeId,p=a.tablePKs,f=a.showCertificate,h=a.certified,b=a.detailsTitle,g=a.detailsHeader,E=a.openAlertDialog,x=a.openConfirmDialog,S=a.alertType,O=a.confirmType,y=a.customTitle,j=a.customMessage,C=this.props,w=C.redux,k=C.user,D=w.empresas,I=w.procuracoes,N=w.procuradores,P=w.empresaDocs,T=w.altContrato,F=p.map((function(e){return A.a.camelize(e)})),z=Object(v.a)(this.props.redux[r[t]]);return 1!==t&&2!==t||(z=Ln(z,D,t)),c&&l&&(e=z.find((function(e){return e[F[t]]===c[F[t]]}))),n.a.createElement(o.Fragment,null,n.a.createElement(bn,{items:i,tab:t,changeTab:this.changeTab}),n.a.createElement(tn,{tab:t,items:i,collection:z,empresas:D,procuracoes:I,user:k,showDetails:this.showDetails,showFiles:this.showFiles,del:this.deleteHandler,showCertificate:this.showCertificate,confirmDeactivate:this.confirmDeactivate}),l&&n.a.createElement(uo,{close:this.showDetails,data:e||c,tab:t,title:b[t],header:g[t],empresas:D,procuracoes:I,procuradores:N,empresaDocs:P,altContrato:T}),f&&n.a.createElement(Nn,{vehicle:h}),s&&n.a.createElement(Tn,{tab:t,elementId:d,filesCollection:u,close:this.closeFiles,format:Mn,typeId:m,empresas:D,empresaDocs:P}),E&&n.a.createElement(Za,{open:E,close:this.closeAlert,alertType:S,tab:t,customMessage:j,customTitle:y}),x&&n.a.createElement(Ct,{open:x,close:this.closeConfirmDialog,confirm:this.deleteHandler,element:this.state.element,type:O,id:this.state.empresaToDeactivate}))}}]),t}(o.Component),qn=Object(c.c)(null,{updateCollection:V})(ce(["allVehicleFields","empresas","socios","procuradores","seguros","seguradoras","procuracoes","getFiles/vehicleDocs","getFiles/empresaDocs","equipamentos","acessibilidade","laudos","altContrato","parametros"],_n)),Vn=[{title:"Contrato Social",name:"contratoSocial"},{title:"CRC",name:"crc"}],Rn=function(e){var a=e.handleInput,t=e.handleBlur,o=e.data,r=e.handleFiles,i=e.removeFile,l=o.activeStep,c=o.stepTitles,s=o.form,d=o.fileToRemove;return n.a.createElement("div",{className:"flex paper"},n.a.createElement($e,{subtitle:c[l]}),n.a.createElement("main",null,n.a.createElement(We,{form:Zt,data:o,handleBlur:t,handleInput:a}),n.a.createElement("div",{className:"flex center"},Vn.map((function(e,a){var t=e.name,o=e.title;return n.a.createElement(pa,{key:a,name:t,formData:s,dropDisplay:"Clique ou arraste para anexar o ".concat(o),handleFiles:r,removeFile:i,fileToRemove:d,style:{width:"25%",marginRight:0===a?"12px":0}})})))))},Bn=[{field:"nomeSocio",label:"Nome do S\xf3cio",maxLength:90,width:195,disabled:!0},Object(h.a)(Object(h.a)({},Yt),{},{width:195,disabled:!0}),Object(h.a)(Object(h.a)({},Ht),{},{field:"telSocio",width:195}),Object(h.a)(Object(h.a)({},Jt),{},{field:"emailSocio",width:195}),{field:"share",label:"Participa\xe7\xe3o Societ\xe1ria (%)",type:"number",width:195}],Un=Object(X.a)((function(e){return{list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#999",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"}}})),Yn=function(e){var a=e.socios,t=e.empresas,r=e.handleInput,i=e.handleBlur,l=e.data,c=e.addSocio,s=e.enableEdit,d=e.handleEdit,u=e.removeSocio,m=l.activeStep,p=l.stepTitles,f=l.filteredSocios,v=l.selectedEmpresa,h=Un(),b=h.iconButton,g=h.list,E=!0,x=Bn;return p&&(E=!1,x=Qt),n.a.createElement(n.a.Fragment,null,n.a.createElement("main",{className:"flex center"},E&&n.a.createElement("header",{style:{marginBottom:"10px",width:"100%"}},n.a.createElement(Ye,{data:l,empresas:t,handleInput:r,handleBlur:i})),!v&&E||!E?p&&n.a.createElement("section",{className:"flex center paper"},n.a.createElement($e,{subtitle:p[m]}),n.a.createElement("div",{className:"flex center",style:{padding:"10px 0",width:"100%"}},n.a.createElement(We,{form:x,data:l,handleBlur:i,handleInput:r})),n.a.createElement("div",{style:{margin:"5px 0 7px 84.58%",width:"100%"}},n.a.createElement(Ze.a,{color:"primary",variant:"outlined",size:"small",onClick:c},n.a.createElement(ea.a,null)," Adicionar s\xf3cio"))):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"flexColumn",style:{alignItems:"center"}},n.a.createElement("h6",{style:{fontSize:"14px"}},"Altera\xe7\xe3o de informa\xe7\xf5es dos s\xf3cios"),n.a.createElement("p",{style:{fontSize:"12px",color:"#555"}}," Clique no l\xe1pis \xe0 direita do s\xf3cio para editar e clique novamente para salvar."),n.a.createElement("p",{style:{fontSize:"12px",color:"#555",marginTop:0}}," Para alterar a participa\xe7\xe3o societ\xe1ria, nome e CPF, v\xe1 para EMPRESAS \u2013 ALTERA\xc7\xc3O CADASTRAL")))),v&&0===f.length&&n.a.createElement("section",null,n.a.createElement("p",null,"Nenhum s\xf3cio cadastrado para ",v.razaoSocial)),(null===a||void 0===a?void 0:a.length)>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement("section",{className:"flexColumn center paper"},n.a.createElement("p",null," S\xf3cios cadastrados"),a.map((function(e,a){return n.a.createElement("div",{key:a},x.map((function(a,t){return n.a.createElement(o.Fragment,{key:t+1e3},n.a.createElement(Je.a,{value:e[a.field]||"",name:a.field,label:a.label,className:g,onChange:d,error:e.edit?Te(e[a.field],a):null,helperText:e.edit?Fe(e[a.field],a):null,type:null===a||void 0===a?void 0:a.type,disabled:!!("share"===a.field&&E||a.disabled)||!e.edit,InputLabelProps:{shrink:!0,style:{fontWeight:600,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",color:"#888"}},inputProps:{style:{fontSize:"13px",color:!0===e.edit?"#000":"new"===e.status?"green":"modified"===e.status?"#FF2500":"deleted"===e.status?"red":"#888",textDecoration:"deleted"!==e.status||e.edit?"":"line-through"}}}))})),n.a.createElement(Ze.a,{component:"span",className:b,title:"editar",onClick:function(){return s(a)}},n.a.createElement(Ao.a,null)),!E&&n.a.createElement(Ze.a,{className:b,color:"deleted"===e.status?"primary":"secondary",title:"deleted"===e.status?"Desfazer exclus\xe3o":"Remover",onClick:function(){return u(a)}},"deleted"===e.status?n.a.createElement("i",{className:"material-icons"},"undo"):n.a.createElement(It.a,null)))})))))},Hn=Object(X.a)((function(e){return{paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 5px 0",height:"auto"}}}));function Jn(e){var a,t=e.data,r=e.empresasForm,i=e.sociosForm,l=e.filesForm,c=e.files,s=t.socios,d=Hn().paper,u=[],m={},p=[];return r.forEach((function(e){t.hasOwnProperty([e.field])&&(Object.assign(m,Object(f.a)({},e.field,t[e.field])),p.push(e))})),u.push(m),a=[{subtitle:"Detalhes da empresa",form:p,data:u},{subtitle:"Informa\xe7\xf5es sobre os s\xf3cios",form:i,data:s}],n.a.createElement(n.a.Fragment,null,n.a.createElement(Na.a,{className:d},n.a.createElement("div",{className:"divTable"},a.map((function(e,a){var t=e.subtitle,r=e.form,i=e.data;return n.a.createElement(o.Fragment,{key:a},n.a.createElement("table",{style:1===a?{tableLayout:"fixed"}:{}},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"tHeader",colSpan:r.length},t)),n.a.createElement("tr",null,r.map((function(e,a){return n.a.createElement("th",{key:a},e.label)})))),n.a.createElement("tbody",null,0===a&&n.a.createElement("tr",null,i.map((function(e,a){return Object.values(e).map((function(e,a){return n.a.createElement("td",{className:"review",key:a},e)}))}))),0!==a&&i.map((function(e,a){return n.a.createElement("tr",{key:a},Object.values(e).map((function(e,a){return n.a.createElement("td",{className:"review",key:a},e)})))})))))}))),n.a.createElement("h3",{style:{margin:"30px 0 0 25px"}}," ",n.a.createElement(Pa.a,{style:{verticalAlign:"middle",padding:"0 0 0 8px"}})," Documentos "),c&&n.a.createElement(Da,{form:l,files:c})))}function Kn(e,a){return e.match("cnpj")?function(e){var a=function(e){return e.keyCode};document.addEventListener("keypress",a);var t,o=e.toString();return t=(o=(o=(o=o.replace(".","")).replace("/","")).replace("-","")).length+1,14!==a&&(3===t&&(e=o.substr(0,2)+"."),6===t&&(e=o.substr(0,2)+"."+o.substr(2,5)+"."),10===t&&(e=o.substr(0,2)+"."+o.substr(2,3)+"."+o.substr(6,3)+"/"),15===t&&(e=o.substr(0,2)+"."+o.substr(2,3)+"."+o.substr(6,3)+"/"+o.substr(9,4)+"-"+o.substr(13,2))),e}(a):e.match("cpf")?function(e){if(e)return e=e.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")}(a):e.match("tel")?function(e){if(e)return 13===(e=e.replace(/(?!\d)./g,"").replace(/(\d{2})/,"($1) ")).length&&(e=e.replace(/(\d{4})(\d)/,"$1-$2")),14===e.length&&(e=e.replace(/(\d{5})(\d)/,"$1-$2")),e}(a):e.match("share")?function(e){if(e)return e.length>=5&&(e=e.slice(0,5)),e}(a):a}var Wn=ce(["empresas"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(w.a)(this,t),(e=a.call(this)).state={activeStep:0,stepTitles:["Preencha os dados da empresa","Informa\xe7\xf5es sobre os s\xf3cios","Revis\xe3o"],steps:["Dados da Empresa","S\xf3cios","Revis\xe3o"],razaoSocial:"",toastMsg:"Empresa cadastrada!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,addedSocios:[0],totalShare:0,socios:[],showFiles:!1},e.setActiveStep=function(){var a=Object(C.a)(j.a.mark((function a(t){var o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.state.activeStep,"next"===t&&e.setState({activeStep:o+1}),"back"===t&&e.setState({activeStep:o-1}),"reset"===t&&e.setState({activeStep:0});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(a){var t=a.target,o=t.name,n=Kn(o,t.value);e.setState(Object(f.a)({},o,n))},e.addSocio=Object(C.a)(j.a.mark((function a(){var t,o,n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.state.socios,o={},n=0,r=0,Qt.forEach((function(a){""!==e.state[a.field]&&void 0!==e.state[a.field]||(n+=1)})),100!==n){a.next=7;break}return e.setState({alertType:"fieldsMissing",openAlertDialog:!0}),a.abrupt("return",null);case 7:if(Qt.forEach((function(a){Object.assign(o,Object(f.a)({},a.field,e.state[a.field]))})),t.push(o),t.forEach((function(e){r+=Number(e.share)})),!(r>100)){a.next=15;break}t.pop(),e.setState({alertType:"overShared",openAlertDialog:!0}),a.next=19;break;case 15:return a.next=17,e.setState({socios:t,totalShare:r});case 17:Qt.forEach((function(a){e.setState(Object(f.a)({},a.field,""))})),document.getElementsByName("nomeSocio")[0].focus();case 19:case"end":return a.stop()}}),a)}))),e.enableEdit=function(a){var t=e.state.socios;!0===t[a].edit?t[a].edit=!1:(t.forEach((function(e){return e.edit=!1})),t[a].edit=!0),e.setState({socios:t})},e.handleEdit=function(a){var t=a.target.name,o=e.state.socios,n=a.target.value;"share"===t&&(n=n.replace(",","."));var r=o.filter((function(e){return!0===e.edit}))[0],i=o.indexOf(r);r[t]=n;var l=o;l[i]=r,e.setState({filteredSocios:l})},e.removeSocio=function(a){var t=e.state.socios;t.splice(a,1),e.setState({socios:t})},e.getId=function(){var a=Object(C.a)(j.a.mark((function a(t,o,n,r,i,l,c){var s,d,u,m,p,v;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(d=n.filter((function(e){return e[i].toLowerCase().match(o.toLowerCase())})),""===o&&e.setState((s={},Object(f.a)(s,t,""),Object(f.a)(s,r,""),s)),!d[0]){a.next=10;break}if(u=d[0][i],m=d[0][l],""===o){a.next=8;break}return a.next=8,e.setState((p={},Object(f.a)(p,t,u),Object(f.a)(p,r,m),p));case 8:a.next=14;break;case 10:return a.next=12,e.setState((v={},Object(f.a)(v,t,""),Object(f.a)(v,r,""),v));case 12:alert(c+" n\xe3o cadastrado"),document.getElementsByName(t)[0].focus();case 14:case"end":return a.stop()}}),a)})));return function(e,t,o,n,r,i,l){return a.apply(this,arguments)}}(),e.handleBlur=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=t.target.name,n=t.target.value,(r=Pe())?e.setState({errors:r}):e.setState({errors:void 0}),a.t0=o,a.next="cnpj"===a.t0?7:"share"===a.t0?13:"numero"===a.t0?16:21;break;case 7:return a.next=9,T.a.get("/api/alreadyExists?table=empresas&column=cnpj&value=".concat(n));case 9:return i=a.sent,(null===i||void 0===i?void 0:i.data)&&("Empresa j\xe1 cadastrada.","O CNPJ informado corresponde a uma empresa j\xe1 est\xe1 cadastrada no sistema. Para alterar os dados da empresa, v\xe1 para Empresas -> Altera\xe7\xe3o de dados.",e.setState({cnpj:"",customTitle:"Empresa j\xe1 cadastrada.",customMsg:"O CNPJ informado corresponde a uma empresa j\xe1 est\xe1 cadastrada no sistema. Para alterar os dados da empresa, v\xe1 para Empresas -> Altera\xe7\xe3o de dados.",openAlertDialog:!0})),a.abrupt("break",22);case 13:return(n=n.replace(",","."))>100?e.setState({alertType:"overShared",openAlertDialog:!0}):(c=Number(e.state.totalShare)+Number(n),e.setState((l={},Object(f.a)(l,o,n),Object(f.a)(l,"totalShare",c),l))),a.abrupt("break",22);case 16:if(!n||n.match(/^\d+$/)){a.next=20;break}return a.next=19,e.setState({numero:""});case 19:e.setState({alertType:"numberNotValid",openAlertDialog:!0});case 20:case 21:return a.abrupt("break",22);case 22:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleSubmit=Object(C.a)(j.a.mark((function a(){var t,o,n,r,i,l;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state,o=t.socios,n=t.form,r={},Zt.forEach((function(a){e.state.hasOwnProperty([a.field])&&Object.assign(r,Object(f.a)({},a.field,e.state[a.field]))})),r.situacao="Ativo",Object.entries(r).forEach((function(e){var a=Object(Be.a)(e,2),t=a[0],o=a[1];o&&""!==o||delete r[t]})),o.forEach((function(e){delete e.edit,Object.entries(e).forEach((function(e){var a=Object(Be.a)(e,2),t=a[0],n=a[1];n&&""!==n||delete o[t]}))})),r=A.a.decamelizeKeys(r),(o=A.a.decamelizeKeys(o))&&o[0]?console.log(o):(console.log("Warning: No socios were registered!!!"),o=void 0),a.next=10,T.a.post("/api/empresaFullCad",{empresa:r,socios:o}).then((function(a){i=a.data.codigo_empresa,l=a.data.socioIds,console.log("\ud83d\ude80 ~ file: EmpresasContainer.jsx ~ line 249 ~ EmpresasContainer ~ handleSubmit= ~ empresaId",i),e.submitFile(i,l,n)}));case 10:e.toast(),e.resetState();case 12:case"end":return a.stop()}}),a)}))),e.handleFiles=function(){var a=Object(C.a)(j.a.mark((function a(t,o){var n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t||!t[0]){a.next=5;break}return a.next=3,e.setState(Object(f.a)({},o,t[0]));case 3:n=we(t,e.state,Vn),e.setState(Object(h.a)(Object(h.a)({},n),{},{fileToRemove:null}));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.submitFile=function(){var a=Object(C.a)(j.a.mark((function a(t,o){var n,r,i,l,c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state.form,r={empresaId:t,socios:o,tempFile:!1},!(n instanceof FormData)){a.next=24;break}i=new FormData,l=Object(je.a)(n),a.prev=4,l.s();case 6:if((c=l.n()).done){a.next=16;break}return s=c.value,r.fieldName=s[0],i.append("metadata",JSON.stringify(r)),i.set(s[0],s[1]),a.next=13,T.a.post("/api/empresaUpload",i).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 13:i=new FormData;case 14:a.next=6;break;case 16:a.next=21;break;case 18:a.prev=18,a.t0=a.catch(4),l.e(a.t0);case 21:return a.prev=21,l.f(),a.finish(21);case 24:case"end":return a.stop()}}),a,null,[[4,18,21,24]])})));return function(e,t){return a.apply(this,arguments)}}(),e.removeFile=function(a){var t=e.state.form,o=Ie(a,t);e.setState(Object(h.a)(Object(h.a)({},e.state),o))},e.resetState=function(){var a={},t={},o={};Zt.forEach((function(t){Object.keys(t).forEach((function(o){"field"===o&&e.state[t[o]]&&Object.assign(a,Object(f.a)({},t[o],void 0))}))})),Qt.forEach((function(a){Object.keys(a).forEach((function(o){"field"===o&&e.state[a[o]]&&Object.assign(t,Object(f.a)({},a[o],void 0))}))})),Vn.forEach((function(e){var a=e.name;Object.assign(o,Object(f.a)({},a,void 0))})),e.setState(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},a),t),o),{},{activeStep:0,razaoSocial:"",files:[],fileNames:[],addedSocios:[0],totalShare:0,socios:[],form:void 0,showFiles:!1}))},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.showFiles=function(){return e.setState({showFiles:!0})},e.closeFiles=function(){return e.setState({showFiles:!e.state.showFiles})},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.handleEquipa()},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1),document.querySelector("input[name='razaoSocial']").style.width="300px"}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.socios,t=e.activeStep,r=e.confirmToast,i=e.toastMsg,l=e.steps,c=e.openAlertDialog,s=e.alertType,d=e.form,u=e.customMsg,m=e.customTitle;return n.a.createElement(o.Fragment,null,n.a.createElement(_a,{links:["Empresas","/empresas"],text:"Cadastro de empresas"}),n.a.createElement(Ya,{activeStep:t,steps:l,setActiveStep:this.setActiveStep}),0===t?n.a.createElement(Rn,{data:this.state,handleInput:this.handleInput,handleBlur:this.handleBlur,handleFiles:this.handleFiles,removeFile:this.removeFile}):1===t?n.a.createElement(Yn,{data:this.state,socios:a,handleInput:this.handleInput,handleBlur:this.handleBlur,addSocio:this.addSocio,removeSocio:this.removeSocio,handleFiles:this.handleFiles,enableEdit:this.enableEdit,handleEdit:this.handleEdit}):2===t&&n.a.createElement(Jn,{data:this.state,files:d,filesForm:Vn,empresasForm:Zt,sociosForm:Qt}),n.a.createElement(Va,{activeStep:t,lastStep:l.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep}),n.a.createElement(ee,{open:r,close:this.toast,msg:i}),c&&n.a.createElement(Za,{open:c,close:this.closeAlert,alertType:s,customMessage:u,customTitle:m}))}}]),t}(o.Component)),$n=(t(556),[{title:"Cadastrar",description:"Cadastrar uma nova empresa no sistema.",imageUrl:"/images/addCompany21.png",link:"/empresas/cadastro"},{title:"Altera\xe7\xe3o Cadastral",description:"Altera\xe7\xe3o de dados da empresa ou contrato social",link:"/altContrato",imageUrl:"/images/pen2.png"},{title:"S\xf3cios",description:"Visualizar ou editar dados dos s\xf3cios",link:"/empresas/socios",imageUrl:"/images/socios3.png"},{title:"Procura\xe7\xf5es",description:"Cadastrar procura\xe7\xf5es e procuradores",link:"/empresas/procuradores",imageUrl:"/images/procuradores31.png"}]),Gn=ce([],(function(e){var a=e.user,t=null===a||void 0===a?void 0:a.role;return n.a.createElement(n.a.Fragment,null,n.a.createElement("section",{className:"jumbo"},n.a.createElement("div",null,n.a.createElement("h1",{className:"jumbo__title"},"Empresas"),n.a.createElement("p",{className:"jumbo__description"},"Selecione uma das op\xe7\xf5es abaixo."))),n.a.createElement("main",{className:"cardContainer",style:{width:"empresa"!==t?"100%":"90%",marginLeft:"empresa"!==t?"0":"5%"}},$n.map((function(e,a){var o=e.link,r=e.title,i=e.description,l=e.imageUrl;return"empresa"===t&&"/empresas/cadastro"===o?null:n.a.createElement(S.b,{to:o,style:{textDecoration:"none"},key:a},n.a.createElement("div",{className:"cardE"},n.a.createElement("div",{className:"cardE__text"},n.a.createElement("h3",null,r),n.a.createElement("p",null,i)),n.a.createElement("figure",{className:"cardE__image"},n.a.createElement("img",{src:l,alt:""}))))}))))})),Xn=t(424),Zn=t.n(Xn),Qn=[{field:"nomeProcurador",label:"Nome do Procurador",maxLength:90,width:220},Object(h.a)(Object(h.a)({},Yt),{},{field:"cpfProcurador",width:220}),Object(h.a)(Object(h.a)({},Ht),{},{field:"telProcurador",width:220}),Object(h.a)(Object(h.a)({},Jt),{},{field:"emailProcurador",width:220})],er=t(397),ar=t(385),tr=t(380),or=t(392),nr=t(386),rr=Object(Pt.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000",fontWeight:600,fontSize:14},body:{fontSize:14}}}))(tr.a),ir=Object(Pt.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000"},body:{fontSize:13}}}))(tr.a),lr=Object(Pt.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}}))(nr.a),cr=Object(X.a)((function(e){return{root:{flexGrow:"1",padding:"1%",textAlign:"center"},title:{marginTop:"2%",fontColor:"#000",fontSize:"0.9rem",backgroundColor:"#B2DCEA",textAlign:"center"},input:{textAlign:"center"},paper:{color:e.palette.text.secondary,margin:e.spacing(2),width:"100%",padding:"2% 0 1% 0",height:"auto"},table:{marginBottom:e.spacing(2),overflowX:"auto"}}}));function sr(e){var a=e.procuracao,t=e.procuradores,o=cr(),r=o.title,i=o.table,l=[];return a.procuradores.forEach((function(e){var a=t.find((function(a){return a.procuradorId===e}));l.push(a)})),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{width:"100%",align:"left"}},n.a.createElement(rn.a,{className:r}," Procuradores cadastrados ")),n.a.createElement(er.a,{className:i},n.a.createElement(or.a,null,n.a.createElement(lr,null,Qn.map((function(e,a){return n.a.createElement(rr,{key:a},e.label)})))),l.map((function(e,a){return e?n.a.createElement(ar.a,{key:a},n.a.createElement(nr.a,null,Qn.map((function(a,t){return n.a.createElement(ir,{key:t},e[a.field])})))):null}))))}var dr={textAlign:"center",alignItems:"flex-start",justify:"space-between",lineHeight:"40px",border:"1px #ccc solid",padding:"0 1%",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px",width:180},ur={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},mr={verticalAlign:"middle",padding:"0 0% 0 2%"},pr=Object(X.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},addButton:{padding:"5px 10px 5px 8px",height:"40px",margin:"5px",float:"right",fontSize:"0.8rem"}}})),fr=function(e){var a=e.redux,t=e.data,r=e.handleInput,i=e.addProc,l=e.removeProc,c=e.handleFiles,s=e.getFile,d=e.plusOne,u=e.minusOne,m=e.checkExpires,p=e.setShowPendencias,f=e.removeFile,v=t.dropDisplay,b=t.selectedEmpresa,g=t.procsToAdd,E=t.selectedDocs,x=t.procuracao,S=t.expires,O=t.demand,y=t.showPendencias,j=t.info,C=t.demandFiles,w=t.fileToRemove,k=a.empresas,D=a.procuradores,I=pr(),N=I.addButton,A=I.textField,P=function(e,a){var o=t[e.field+a];return(!e.errorHandler||!e.errorHandler(o))&&(!(!o||!e.errorHandler||e.errorHandler(o))||(e.pattern&&o?null===o.match(e.pattern):o>e.max||o<e.min||(null===o||void 0===o?void 0:o.length)<(null===e||void 0===e?void 0:e.minLength)))},T=function(e,a){var o=t[e.field+a];return e.errorHandler&&e.errorHandler(o)?"\u2713":o&&e.errorHandler&&!e.errorHandler(o)?"\u2718":o>e.max||o<e.min?"Valor inv\xe1lido":o&&null===o.match(e.pattern)?"\u2718":e.pattern&&o&&null!==o.match(e.pattern)?"\u2713":(null===o||void 0===o?void 0:o.length)<(null===e||void 0===e?void 0:e.minLength)?"\u2718":(null===o||void 0===o?void 0:o.length)>=(null===e||void 0===e?void 0:e.minLength)?"\u2713":void 0};return n.a.createElement("div",{className:"flex"},n.a.createElement("header",{className:"flex center",style:{marginBottom:"10px",width:"100%"}},n.a.createElement(Ye,{data:t,empresas:k,handleInput:r})),b&&n.a.createElement("section",{className:"paper flexColumn",style:{position:"relative",width:"100%"}},n.a.createElement("div",{className:"flexColumn",style:{alignItems:"center"}},n.a.createElement("h6",null," Cadastrar nova procura\xe7\xe3o "),n.a.createElement("h4",{style:{fontWeight:400,fontSize:"0.9em"}},' Se a procura\xe7\xe3o abranger mais de um procurador, clique em "+" para adicionar e anexe apenas 1 vez.')),g.map((function(e,a){return n.a.createElement("div",{className:"flex",key:a},Qn.map((function(e,i){return n.a.createElement(o.Fragment,{key:i},n.a.createElement(Je.a,{name:e.field+a,label:e.label,margin:"normal",className:A,onChange:function(e){return r(e)},type:e.type||"",error:P(e,a),helperText:T(e,a),select:e.select||!1,value:t[e.field+a]||"",disabled:e.disabled||!1,InputLabelProps:{className:A,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888"}},inputProps:{style:{background:e.disabled&&t.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#000",width:e.width||150,height:"7px"},value:"".concat(t[e.field+a]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1}),a===g.length-1&&3===i&&n.a.createElement(n.a.Fragment,null,n.a.createElement(To.a,{onClick:function(){return d()},style:{verticalAlign:"middle",position:"absolute",bottom:"112px",right:a>0?"40px":"68px",color:"#009688",fontSize:30,cursor:"pointer",zIndex:1}}),a>0&&n.a.createElement(Zn.a,{onClick:function(){return u()},style:{verticalAlign:"middle",position:"absolute",bottom:"112px",right:"70px",color:"red",fontSize:30,cursor:"pointer",zIndex:1}})))})))})),n.a.createElement("div",{className:"flex",style:{alignItems:"center",padding:"0 20px",width:"100%",margin:"12px 0 6px 0"}},n.a.createElement("div",{style:{width:"50%"}},O?n.a.createElement("div",{className:"flex"},n.a.createElement(Da,{demand:O,collection:"empresaDocs",demandFiles:C,form:bt,style:{minWidth:"220px"}})):n.a.createElement(pa,{name:"procuracao",formData:x,dropDisplay:v,handleFiles:c,demandFiles:C,removeFile:f,fileToRemove:w})),n.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"50%",paddingTop:"8px"}},n.a.createElement("div",{style:{marginTop:"12px"}},n.a.createElement(Xe.a,{control:n.a.createElement(Ge.a,{checked:!0===S,onChange:function(){return m()},value:S}),label:n.a.createElement("span",{style:{color:"#2979ff",fontSize:"0.8em",float:"right"}},"Procura\xe7\xe3o por prazo determinado?")})),n.a.createElement(Je.a,{name:"vencimento",label:"Vencimento",margin:"normal",className:A,onChange:function(e){return r(e)},type:"date",helper:"se indeterminado, deixar em branco",value:t.vencimento||"",disabled:!1===S,InputLabelProps:{className:A,shrink:!0,style:{fontSize:"0.8rem",color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:"#fafafa",fontSize:"0.8rem",textAlign:"center",color:"#000",height:"9px"}},variant:"filled"})))),n.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%"}},b&&!O?n.a.createElement(Ze.a,{className:N,size:"small",color:"secondary",variant:"contained",onClick:function(){return i()}},n.a.createElement(ea.a,null),"Cadastrar procura\xe7\xe3o"):b&&O?n.a.createElement(Va,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:O,setShowPendencias:p,showPendencias:y,info:j,handleSubmit:i,handleInput:r}):null),n.a.createElement("section",{className:"flexColumn",style:{width:"100%",paddingRight:"0"}},!b||E[0]||O?b&&E[0]&&n.a.createElement("h2",{style:{margin:"25px 0 0 15px"}},"Procura\xe7\xf5es cadastradas"):n.a.createElement("div",{className:"flex paper"},"Nenhum procurador cadastrado para ",b.razaoSocial),E.length>0&&E.map((function(e,a){return n.a.createElement("div",{key:.01*a,className:"flexColumn paper",style:{padding:"10px 15px 20px 15px"}},n.a.createElement("h5",null,"Procura\xe7\xe3o ",e.vencimento?"com vencimento em "+((t=e.vencimento)?Ae()(t).format("DD-MM-YYYY"):""):"por prazo indeterminado"),n.a.createElement(sr,{procuradores:D,procuracao:e}),n.a.createElement("div",{className:"flex center",style:{position:"relative"}},n.a.createElement("span",{style:dr},n.a.createElement(Oa.a,{style:mr}),n.a.createElement("span",{style:{verticalAlign:"middle"}}," "," Baixar arquivo"),n.a.createElement(xa.a,{style:ur,onClick:function(){return s(e.procuracaoId)}})),n.a.createElement("span",{style:Object(h.a)(Object(h.a)({},dr),{},{width:90,backgroundColor:"white",border:0,position:"absolute",right:0})},n.a.createElement(zo.a,{color:"secondary",style:ur,onClick:function(){return l(e)}}),"Apagar")));var t}))))},vr=ce(["empresas","procuradores","procuracoes","getFiles/empresaDocs"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(w.a)(this,t),(e=a.call(this)).state={empresas:[],razaoSocial:"",toastMsg:"Procura\xe7\xe3o cadastrada!",confirmToast:!1,fileNames:[],openDialog:!1,expires:!1,filteredProc:[],dropDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",procuradores:[],procsToAdd:[1],procuracoesArray:[],selectedDocs:[],showPendencias:!1},e.handleInput=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m,p;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=t.target.name,n=e.props.redux.empresas,r=Object(v.a)(e.props.redux.procuradores),i=JSON.parse(JSON.stringify(e.props.redux.procuracoes)),l=t.target.value,c=Kn(o,l),e.setState(Object(f.a)({},o,c)),"razaoSocial"!==o||!Array.isArray(r)){a.next=14;break}if(!(s=n.find((function(e){return e.razaoSocial===l})))){a.next=13;break}return d=i.filter((function(e){return e.codigoEmpresa===s.codigoEmpresa})),a.next=10,e.setState({selectedEmpresa:s,selectedDocs:d,razaoSocial:s.razaoSocial});case 10:l!==s.razaoSocial&&e.setState({selectedEmpresa:void 0,selectedDocs:[]}),a.next=14;break;case 13:e.setState({selectedEmpresa:void 0,selectedDocs:[]});case 14:o.match("cpfProcurador")&&(u=r.find((function(e){return e.cpfProcurador===l})))&&(m=o.charAt(o.length-1),Object.keys(e.state).forEach((function(a){a!==o&&e.state[a]===l&&(alert("Este CPF j\xe1 foi informado."),e.setState(Object(f.a)({},o,"")),p=!0)})),p||Qn.forEach((function(a){var t=a.field,o=t+m;e.setState(Object(f.a)({},o,u[t]))})));case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.addProc=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m,p,h,b,g,E,x,S;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.state,n=o.selectedEmpresa,r=o.demand,i=o.procuracao,l=o.vencimento,c=o.expires,s=o.info,d=n.codigoEmpresa,u=Object(v.a)(e.state.procsToAdd),m=[],p={},u.forEach((function(a,t){Qn.forEach((function(a){Object.assign(p,Object(f.a)({},a.field,e.state[a.field+t]))}));var o=0;Object.values(p).forEach((function(e){e&&(o+=1)})),o>0&&m.push(p),o=0,p={},Qn.forEach((function(a){e.setState(Object(f.a)({},a.field+t,""))}))})),h=[],b=[],g=j.a.mark((function e(){var a,t,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x[E],e.next=3,T.a.get("/api/getOne?table=procuradores&key=cpf_procurador&value='".concat(a.cpfProcurador,"'"));case 3:t=e.sent,o=A.a.camelizeKeys(null===t||void 0===t?void 0:t.data[0]),console.log("\ud83d\ude80 ~ file: Procuradores.jsx ~ line 222 ~ Procuradores ~ addProc= ~ existingProc",o),(null===o||void 0===o?void 0:o.procuradorId)?(a.empresas=o.empresas,(0===a.empresas[0]&&1===a.empresas.length||!a.empresas)&&(a.empresas=[d]),a.empresas&&a.empresas[0]&&!a.empresas.includes(d)&&a.empresas.push(d),Object.keys(a).forEach((function(e){a[e]===o[e]&&"empresas"!==e&&"cpfProcurador"!==e&&delete a[e]})),a.procuradorId=o.procuradorId,b.push(a)):h.push(a);case 7:case"end":return e.stop()}}),e)})),E=0,x=m;case 6:if(!(E<x.length)){a.next=11;break}return a.delegateYield(g(),"t0",8);case 8:E++,a.next=6;break;case 11:void 0===t&&(S={status:"Aguardando aprova\xe7\xe3o",empresaId:d,history:{files:i,newMembers:h,oldMembers:b,vencimento:l,expires:c},metadata:{fieldName:"procuracao",empresaId:d}},Object.entries(S).forEach((function(e){var a=Object(Be.a)(e,2),t=a[0];a[1]||delete S[t]})),S.approved=t,S.historyLength=0,Ve(S).then((function(e){return console.log(e)})),e.setState({toastMsg:"Solicita\xe7\xe3o de cadastro enviada",confirmToast:!0})),!1===t&&(Ve({id:r.id,empresaId:d,history:{info:s},declined:!0}).then((function(e){return console.log(e)})),e.setState({toastMsg:"Solicita\xe7\xe3o indeferida!",confirmToast:!0}),setTimeout((function(){e.props.history.push("/solicitacoes")}),1500)),!0===t&&(h=A.a.decamelizeKeys(h),b=A.a.decamelizeKeys(b),e.approveProc(h,b));case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.approveProc=function(){var a=Object(C.a)(j.a.mark((function a(t,o){var n,r,i,l,c,s,d,u,m,p,f,v;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,r=n.selectedEmpresa,i=n.demandFiles,l=n.vencimento,c=n.demand,s=r.codigoEmpresa,d=o.map((function(e){return e.procurador_id})),!(t.length>0)){a.next=7;break}return t.forEach((function(e){return e.empresas="{".concat(s,"}")})),t=A.a.decamelizeKeys(t),u={table:"procuradores",tablePK:"procurador_id",procuradores:t,empresas:[s]},a.next=7,T.a.post("/api/cadProcuradores",Object(h.a)(Object(h.a)({},u),{},{codigoEmpresa:s})).then((function(e){e.data.forEach((function(e){return d.push(e.procurador_id)}))}));case 7:return m={table:"procuradores",tablePK:"procurador_id",requestArray:o,keys:Qn.map((function(e){return A.a.decamelize(e.field)})),codigoEmpresa:s,updateUser:"insertEmpresa"},o&&o[0]&&(m.keys.push("empresas"),o.forEach((function(e){var a=e.empresas;a&&a[0]&&(a.includes(s)||e.empresas.push(s),e.empresas=a.toString())})),T.a.put("/api/editProc",m).then((function(e){return console.log(e)}))),p={codigo_empresa:s,vencimento:l,status:"vigente",procuradores:d},Object.entries(p).forEach((function(e){var a=Object(Be.a)(e,2),t=a[0],o=a[1];o&&""!==o||delete p[t]})),a.next=13,T.a.post("/api/cadProcuracao",p).then((function(e){return f=e.data[0].procuracao_id}));case 13:p.procuracaoId=f,v={id:c.id,demandFiles:i,history:{},approved:!0},i&&(v.metadata={fieldName:"procuracao",empresaId:r.codigoEmpresa,procuracaoId:f,procuradores:d}),Ve(v).then((function(e){return console.log(e)})),e.toast(),c&&setTimeout((function(){e.props.history.push("/solicitacoes")}),1500),e.resetState();case 20:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.removeProc=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d,u,m;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=t.procuracaoId,n=t.procuradores,r=t.codigoEmpresa,i=e.props.redux.procuradores,l=e.props.redux.procuracoes,c=e.props.redux.empresaDocs.find((function(e){return Number(e.metadata.procuracaoId)===o})),!n[0]){a.next=12;break}if(s=l.filter((function(e){return e.codigoEmpresa===r&&e.procuracaoId!==o})),d=new Set,s.forEach((function(e){return e.procuradores.forEach((function(e){return d.add(e)}))})),(u=i.filter((function(e){return n.includes(e.procuradorId)&&!d.has(e.procuradorId)}))).forEach((function(e){var a=e.empresas||[];a=a.filter((function(e){return e!==r})),e.empresas=a,0===a.length&&(e.empresas=[0])})),!u[0]){a.next=12;break}return u=A.a.decamelizeKeys(u),m={table:"procuradores",tablePK:"procurador_id",requestArray:u,keys:["empresas"],codigoEmpresa:r},T.a.put("/api/editProc",Object(h.a)({},m)).then((function(e){return console.log(e)})),a.next=12,T.a.patch("/api/removeEmpresa",{cpfsToRemove:u,codigoEmpresa:r}).then((function(e){return console.log(e)}));case 12:return a.next=14,T.a.delete("/api/delete?table=procuracoes&tablePK=procuracao_id&id=".concat(o,"&codigoEmpresa=").concat(r)).then((function(e){return console.log(e.data)}));case 14:c&&c.hasOwnProperty("id")&&T.a.delete("/api/deleteFile?collection=empresaDocs&id=".concat(c.id)).then((function(e){var a=e.data;return console.log(a)}));case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleFiles=function(a){if(!Ce(a)){var t=new FormData;t.append("procuracao",a[0]),e.setState({procuracao:t,fileToRemove:null})}},e.removeFile=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=e.state.procuracao,n=Ie(t,o),e.setState(Object(h.a)(Object(h.a)({},e.state),n));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.getFile=function(a){var t=e.props.redux.empresaDocs.find((function(e){return Number(e.metadata.procuracaoId)===a}));if(t){var o=t.id,n=t.filename;ya(o,n,"empresaDocs")}else e.setState({alertType:"filesNotFound",openAlertDialog:!0})},e.plusOne=function(){var a=Object(v.a)(e.state.procsToAdd);a.push(1),e.setState({procsToAdd:a})},e.minusOne=function(){var a=Object(v.a)(e.state.procsToAdd);a.pop(),e.setState({procsToAdd:a})},e.checkExpires=function(){!0===e.state.expires&&e.setState({vencimento:""}),e.setState({expires:!e.state.expires})},e.resetState=function(){var a=e.state.procsToAdd,t=Qn.map((function(e){return e.field})),o={};a.forEach((function(a,n){t.forEach((function(a){e.state.hasOwnProperty(a+n)&&(o[a+n]=void 0)}))})),e.removeFile("procuracao"),e.setState(Object(h.a)(Object(h.a)({},o),{},{dropDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",procsToAdd:[1],vencimento:void 0,procuracao:void 0,expires:!1}))},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.escFunction=function(a){27===a.keyCode&&e.state.openDialog&&e.toggleDialog()},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(C.a)(j.a.mark((function e(){var a,t,o,n,r,i,l,c,s,d,u,m,p,v,b,g,E,x,S,O,y=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.props.redux,r=n.empresas,i=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(o=t.state)||void 0===o?void 0:o.demand,l=JSON.parse(JSON.stringify(this.props.redux.procuracoes)),r&&1===r.length&&(c=r[0],s=l.filter((function(e){return e.codigoEmpresa===c.codigoEmpresa})),this.setState({selectedEmpresa:c,razaoSocial:null===c||void 0===c?void 0:c.razaoSocial,selectedDocs:s})),i&&(d=JSON.parse(JSON.stringify(n.procuradores)),u=Ot(i,n,d),m=u.latestDoc,p=Object(Y.a)(u,["latestDoc"]),v=i.history,b=v[0],g=b.vencimento,E=b.expires,x=v[0].newMembers||[],S=v[0].oldMembers||[],console.log(u),O=[],S[0]&&S.forEach((function(e){d.forEach((function(a){Object.keys(a).forEach((function(t){(null===e||void 0===e?void 0:e.procuradorId)!==(null===a||void 0===a?void 0:a.procuradorId)||e[t]||(e[t]=a[t])}))}))})),(x[0]||S[0])&&x.concat(S).forEach((function(e,a){O.push(a),Qn.forEach((function(t){var o=t.field;y.setState(Object(f.a)({},o+a,e[o]))}))})),this.setState({vencimento:g,expires:E,procsToAdd:O}),this.setState(Object(h.a)(Object(h.a)({},p),{},{demandFiles:[m]}))),document.addEventListener("keydown",this.escFunction,!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var a=this.state.selectedEmpresa,t=this.props.redux.procuracoes;if(a){var o,n=(null===(o=this.state)||void 0===o?void 0:o.selectedEmpresa).codigoEmpresa,r=JSON.parse(JSON.stringify(t));if(JSON.stringify(e.redux.procuracoes)!==JSON.stringify(r)){var i=r.filter((function(e){return e.codigoEmpresa===n}));this.setState({selectedDocs:i})}}}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.openAlertDialog,t=e.alertType,o=e.demand;return n.a.createElement(n.a.Fragment,null,n.a.createElement(_a,{links:["Empresas","/empresas"],text:"Cadastro de procura\xe7\xf5es",demand:o}),n.a.createElement(fr,{data:this.state,redux:this.props.redux,handleInput:this.handleInput,removeProc:this.removeProc,handleFiles:this.handleFiles,removeFile:this.removeFile,addProc:this.addProc,handleSubmit:this.handleSubmit,plusOne:this.plusOne,minusOne:this.minusOne,getFile:this.getFile,checkExpires:this.checkExpires,setShowPendencias:this.setShowPendencias}),n.a.createElement(ee,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}),a&&n.a.createElement(Za,{open:a,close:this.closeAlert,alertType:t,customMessage:this.state.customMsg}))}}]),t}(o.Component)),hr=ce(["empresas","socios","getFiles/empresaDocs"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;Object(w.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={razaoSocial:"",toastMsg:"Dados atualizados!",confirmToast:!1,openDialog:!1,dialogTitle:"",addedSocios:[0],filteredSocios:[]},e.handleInput=function(a){var t=e.props.redux,o=t.empresas,n=t.socios,r=a.target.name,i=a.target.value,l=Kn(r,i);if(e.setState(Object(f.a)({},r,l)),"razaoSocial"===r){var c=o.find((function(e){return e.razaoSocial===i}));if(c){var s=JSON.parse(JSON.stringify(n)).filter((function(e){return e.empresas&&e.empresas[0]&&e.empresas.some((function(e){return e.codigoEmpresa===c.codigoEmpresa}))}));e.setState({razaoSocial:c.razaoSocial,selectedEmpresa:c,filteredSocios:s}),i!==c.razaoSocial&&e.setState({selectedEmpresa:void 0})}else e.setState({selectedEmpresa:void 0,filteredSocios:[]})}},e.enableEdit=function(a){var t=e.state.filteredSocios,o=t[a];!0===o.edit?(e.handleSubmit(a),o.edit=!1,t[a]=o):(t.forEach((function(e){return e.edit=!1})),t[a].edit=!0),e.setState({filteredSocios:t})},e.handleEdit=function(a){var t=a.target.name,o=a.target.value;o=Kn(t,o);var n=e.state.filteredSocios.filter((function(e){return!0===e.edit}))[0],r=e.state.filteredSocios.indexOf(n);n[t]=o;var i=e.state.filteredSocios;i[r]=n,e.setState({filteredSocios:i})},e.handleSubmit=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=e.state,n=o.filteredSocios,r=o.selectedEmpresa,i=r.codigoEmpresa,"socios",l=["telSocio","emailSocio"],c=n[t],s={socioId:c.socioId},l.forEach((function(e){c[e]&&(s[e]=c[e])})),d=[A.a.decamelizeKeys(s)],a.next=6,T.a.put("/api/editSocios",{requestArray:d,table:"socios",keys:l,codigoEmpresa:i}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e,a=this.props.redux,t=a.socios,o=a.empresas,n=JSON.parse(JSON.stringify(t));o&&1===o.length?this.setState({selectedEmpresa:o[0],razaoSocial:null===(e=o[0])||void 0===e?void 0:e.razaoSocial,filteredSocios:t,originalSocios:n}):this.setState({originalSocios:n})}},{key:"render",value:function(){var e=this.state,a=e.filteredSocios,t=e.openAlertDialog,o=e.alertType,r=e.confirmToast,i=e.toastMsg,l=this.props.redux.empresas;return n.a.createElement(n.a.Fragment,null,n.a.createElement(_a,{links:["Empresas","/empresas"],text:"Altera\xe7\xe3o de dados dos s\xf3cios"}),n.a.createElement(Yn,{data:this.state,socios:a,empresas:l,handleInput:this.handleInput,enableEdit:this.enableEdit,handleEdit:this.handleEdit}),n.a.createElement(ee,{open:r,close:this.toast,msg:i}),t&&n.a.createElement(Za,{open:t,close:this.closeAlert,alertType:o}))}}]),t}(o.Component)),br=t(181),gr=t.n(br),Er={title:{text:"Ve\xedculos por ano de fabrica\xe7\xe3o",align:"center",marginTop:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:500,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}},legend:{show:!1},chart:{id:"veiculos_ano_fabricacao"},xaxis:{labels:{style:{fontSize:"9px",fontWeight:400,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}}},dataLabels:{enabled:!1},plotOptions:{bar:{horizontal:!1}}},xr={title:{text:"Percentual de ve\xedculos por ano de fabrica\xe7\xe3o",align:"center",marginTop:10,marginBottom:20,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"13px",fontWeight:500,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}},plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0,fontSize:"20px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif ",fontWeight:600,color:"#373d3f",offsetY:-10},value:{show:!0,fontSize:"15px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,color:"#373d3f",offsetY:16,formatter:function(e){return e}},total:{show:!0,showAlways:!0,label:"Total:",fontSize:"20px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:600,color:"#373d3f"}}}}},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},Sr=(t(558),function(e){var a=e.empresas,t=e.razaoSocial,o=e.selectedEmpresa,r=e.selectedVehicles,i=e.labels,l=e.values,c=e.tableLabels,s=e.tableData,d=e.mediaIdades,u=e.moda,m=e.handleInput,p=e.segurosVencidos,f=e.segurosVigentes,v=e.oldVehicles,b=e.veiculosNovos;return n.a.createElement("main",{className:"relatorios"},n.a.createElement(Ye,{empresas:a,data:{razaoSocial:t},handleInput:m}),r&&0!==r.length?n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",{style:{width:"100%",textAlign:"center"}},o?o.razaoSocial:"Exibindo todos os ve\xedculos"," - M\xe9dia de idade da frota: ",d," anos. Moda do ano de fabrica\xe7\xe3o: ",u,"."),n.a.createElement(Na.a,null,n.a.createElement("section",{className:"rowContainer"},n.a.createElement(gr.a,{options:Object(h.a)(Object(h.a)({},Er),{},{xaxis:Object(h.a)(Object(h.a)({},Er.xaxis),{},{categories:i})}),series:[{name:"Ve\xedculos",data:l}],type:"bar",width:"600"}),n.a.createElement(gr.a,{options:Object(h.a)(Object(h.a)({},xr),{},{labels:i,colors:["#ff7c43","#ffa600","#FF9800","#f95d6a","#f44336","#2E93fA","#3333ff","#66DA26","#669999","#E91E63","#d45087","#a05195","#665191","#2f4b7c","#003f5c"]}),series:l,type:"donut",width:"480"}))),n.a.createElement(Na.a,null,n.a.createElement("section",null,n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"tHeader",style:{color:"#fff",backgroundColor:"rgb(84, 110, 122, 0.7)"},colSpan:c.length},"Ve\xedculos por ano - ",o?o.razaoSocial:"Exibindo todos os ve\xedculos","  ")),n.a.createElement("tr",null,c.map((function(e,a){return n.a.createElement("th",{key:e},e)})))),n.a.createElement("tbody",null,s.map((function(e,a){return n.a.createElement("tr",{key:a},e.map((function(e,a){return n.a.createElement("td",{className:"review relatorioTD",key:a},e)})))})))))),n.a.createElement("section",{className:"rowContainer"},n.a.createElement(gr.a,{options:{title:Object(h.a)(Object(h.a)({},xr.title),{},{text:"Seguros vencidos: ".concat(p," / vigentes: ").concat(f)}),labels:["Seguros vencidos","Seguros vigentes"],colors:["#FF9800","#3333ff"]},series:[Number(p),Number(f)],type:"pie",width:"400"}),n.a.createElement(gr.a,{options:{title:Object(h.a)(Object(h.a)({},xr.title),{},{text:"Idade superior a 15 anos: ".concat(v," / inferior 15 anos: ").concat(b)}),labels:["Ve\xedculos com mais de 15 anos","Ve\xedculos com menos de 15 anos"],colors:["#f44336","#2E93fA"]},series:[Number(v),Number(b)],type:"pie",width:"420",height:"220"}))):n.a.createElement("p",null,"Nenhum ve\xedculo cadastrado para ",null===o||void 0===o?void 0:o.razaoSocial))}),Or=function(e){var a=Object(v.a)(e);if(a.shift(),a[0])return a.reduce((function(e,a){return e+a}))},yr=function(e){return e.filter((function(e){return!e.vencimento||Ae()(e.vencimento).isValid()&&Ae()(e.vencimento).isBefore(Ae()())&&e.veiculoId&&e})).length},jr=ce(["veiculos","empresas"],(function(e){var a,t,r=e.redux,i=r.veiculos,l=r.empresas,c=Object(o.useState)(""),s=Object(Be.a)(c,2),d=s[0],u=s[1],m=Object(o.useState)(void 0),p=Object(Be.a)(m,2),f=p[0],h=p[1],b=Object(o.useState)(""),g=Object(Be.a)(b,2),E=g[0],x=g[1],S=Object(o.useState)(""),O=Object(Be.a)(S,2),y=O[0],j=O[1],C=Object(o.useState)(""),w=Object(Be.a)(C,2),k=w[0],D=w[1];f&&""!==f?(a=f.codigoEmpresa,t=i.filter((function(e){return e.codigoEmpresa===a}))):t=i;var I=t.map((function(e){return e.anoCarroceria})).filter((function(e){return null!==e})).sort(),N=I.reduce((function(e,a){return e+a/I.length}),0);N=((new Date).getFullYear()-N).toFixed(2);var A={};I.forEach((function(e){void 0===A[e]&&(A[e]=0),A[e]+=1}));var P=Object.keys(A),T=Object(v.a)(P.sort((function(e,a){return e-a}))),F=Object.values(A),z={},L=[],M={};T.forEach((function(e){t.forEach((function(a){var t;a.anoCarroceria&&a.anoCarroceria.toString()===e&&(L.push({veiculoId:a.veiculoId,poltronas:a.poltronas}),z[e]?(t=z[e]).push.apply(t,Object(v.a)(L)):z[e]=L,L=[])})),M[e]=z[e],z={}}));var _=0,q=["Capacidade Total"],V=[],R=["Capacidade M\xe9dia"];Object.keys(M).forEach((function(e){M[e].forEach((function(e){_+=e.poltronas})),q.push(_),R.push((_/M[e].length).toFixed(2));var a=q.reduce((function(e,a){return e+a}),0);V.push(a),_=0})),q.push(Or(q));var B=["Ano"],U=["N\xba de Ve\xedculos"];B.push.apply(B,Object(v.a)(T).concat(["Total"])),U.push.apply(U,Object(v.a)(F)),U.push(Or(U)),R.push(function(e){var a=e.map((function(e){return Number(e)}));if(a.shift(),a[0])return(a.reduce((function(e,a){return e+a}))/a.length).toFixed(2)}(R));var Y=[U,R,q],H=P.sort((function(e,a){return A[e]-A[a]}));H=H[H.length-1];var J=(new Date).getFullYear();Object(o.useEffect)((function(){var e=(new Date).getFullYear(),a=yr(t),o=t.filter((function(a){return e-a.anoCarroceria>14&&null!==a.anoCarroceria})).length;x(a),j(t.length-a),D(o)}),[t]);var K,W,$,G=[];return d.length>2&&f?(G=yr(t),W=t.filter((function(e){return J-e.anoCarroceria>14&&null!==e.anoCarroceria})).length,K=t.length-G,$=t.length-W):(G=E,K=y,W=k,$=t.length-k),n.a.createElement(Sr,{empresas:l,razaoSocial:d,labels:T,values:F,tableLabels:B,tableData:Y,selectedEmpresa:f,selectedVehicles:t,mediaIdades:N,moda:H,handleInput:function(e){var a,t=e.target.value;u(t),t.length>2?(a=l.find((function(e){return e.razaoSocial===t})))&&h(a):h("")},segurosVencidos:G,segurosVigentes:K,oldVehicles:W,veiculosNovos:$})})),Cr=t(425),wr=t.n(Cr),kr=t(426),Dr=t.n(kr);function Ir(e){var a,t=e.tableData,o=e.staticFields,r=e.title,i=e.tableStyle,l=e.style,c=e.completed,s=e.showInfo,d=e.showFiles,u=e.setShowFiles,m=e.filesCollection,p=e.primaryKey,f=e.close,v=e.filesIds,b=e.razaoSocial;console.log(t[0].numeroDae||void 0);var g=[],E=[],x=[];if(t.forEach((function(e,a){o.forEach((function(t){g.includes(t.title)||g.push(t.title),"info"===t.field?x.push(Object(h.a)(Object(h.a)({},t),{},{index:a,files:null===e||void 0===e?void 0:e.files})):"files"===t.field?x.push(Object(h.a)(Object(h.a)({},t),{},{files:null===e||void 0===e?void 0:e.files})):t.action?x.push(Object(h.a)(Object(h.a)({},t),{},{id:null===e||void 0===e?void 0:e.id})):x.push(Object(h.a)(Object(h.a)({},t),{},{value:e[t.field]}))})),E.push(x),x=[]})),c){var S=g.indexOf("Analisar solicita\xe7\xe3o");g[S]="Conclu\xedda"}var O=(null===(a=E[0])||void 0===a?void 0:a.length)||"";return d?n.a.createElement(n.a.Fragment,null,n.a.createElement(Tn,{filesCollection:m,close:f,typeId:p,filesIds:v,razaoSocial:b}),n.a.createElement("footer",null,n.a.createElement("div",{className:"voltarDiv",style:{padding:"0px",margin:"30px 0 0 0",position:"absolute",bottom:"1%",zIndex:"10"}},n.a.createElement(Ze.a,{variant:"outlined",color:"primary",onClick:function(){return u(!1)}},n.a.createElement(_t.a,{size:"tiny"}),n.a.createElement("span",{style:{padding:"2px 0 0 2px",marginLeft:"2px",fontSize:".85rem"}},"Voltar"))))):n.a.createElement("table",{style:i||void 0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"tHeader",style:l,colSpan:O},r)),n.a.createElement("tr",null,g.map((function(e,a){return n.a.createElement("th",{key:a,style:l},e)})))),n.a.createElement("tbody",null,E.map((function(e,a){return n.a.createElement("tr",{key:a},e.map((function(e,a){return n.a.createElement("td",{key:a,style:(null===e||void 0===e?void 0:e.style)?e.style:l,className:"link"===e.type&&e.laudoDocId?"link2":"review",title:t[0].numeroDae||void 0},"date"===e.type?(o=e.value,Ae()(o,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?Ae()(o,Ae.a.ISO_8601,!0).format("DD/MM/YYYY, HH:mm[h]"):o):(null===e||void 0===e?void 0:e.action)?function(e,a,o){var r,i=!(null===(r=t[a])||void 0===r?void 0:r.info);switch(e){case"info":return n.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start"}},n.a.createElement("span",{className:"button",style:i?{cursor:"default"}:{},component:"span",title:i?"Nenhuma informa\xe7\xe3o adicional":"Ver informa\xe7\xf5es adicionais",onClick:function(){return s(a)}},n.a.createElement(wr.a,{color:i?"disabled":"primary"})),o?n.a.createElement("span",{className:"button",component:"span",title:"Ver arquivos",onClick:function(){u(o)}},n.a.createElement(Pa.a,null)):n.a.createElement("span",{style:{padding:"2px 10px 0 17px"}}," - "));case"completed":return n.a.createElement(Dr.a,{style:{color:"green"}});default:return}}(e.action,null===e||void 0===e?void 0:e.index,null===e||void 0===e?void 0:e.files):e.value);var o})))}))))}var Nr=[{field:"action",title:"Movimenta\xe7\xe3o"},{field:"user",title:"Usu\xe1rio"},{field:"createdAt",title:"Registro no sistema",type:"date"},{field:"info",title:"Informa\xe7\xf5es adicionais",action:"info",style:{textAlign:"center"}}];function Ar(e){var a=e.solicitacao,t=e.showInfo,o=e.historyLog,r=e.setHistoryLog,i=e.close,l=e.vehicleDocs,c=e.empresaDocs,s=e.showFiles,d=e.setShowFiles,u=e.filesIds,m=a.history,p=Ae()(null===o||void 0===o?void 0:o.createdAt).format("DD/MM/YYYY, HH:mm[h]"),f={};return f=a.hasOwnProperty("veiculoId")?{primaryKey:"veiculoId",filesCollection:l}:{primaryKey:"empresaId",filesCollection:c},n.a.createElement("main",{className:"popUpWindow",sytle:{width:"90%"}},o?n.a.createElement(n.a.Fragment,null,n.a.createElement("header",{className:"infoLogHeader"},n.a.createElement("h3",null,"Informa\xe7\xf5es adicionais"),n.a.createElement("hr",null),n.a.createElement("div",{className:"floatRight"},"Inserido por ",null===o||void 0===o?void 0:o.user," ",p?"\xe0s "+p:"")),n.a.createElement("section",null,n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",{style:{whiteSpace:"pre-line"}},o.info)),n.a.createElement("footer",null,n.a.createElement("div",{className:"voltarDiv",style:{padding:"0px",margin:"30px 0 0 0",position:"absolute",bottom:"1%"}},n.a.createElement(Ze.a,{variant:"outlined",color:"primary",onClick:function(){return r(!1)}},n.a.createElement(_t.a,{size:"tiny"}),n.a.createElement("span",{style:{padding:"2px 0 0 2px",marginLeft:"2px",fontSize:".85rem"}},"Voltar"))))):n.a.createElement(Ir,Object.assign({},f,{tableData:m,staticFields:Nr,length:Nr.length,title:"Solicita\xe7\xe3o n\xba ".concat(null===a||void 0===a?void 0:a.numero),id:a.id,razaoSocial:null===a||void 0===a?void 0:a.empresa,showInfo:t,style:{padding:"9px 4px"},tableStyle:{marginTop:"23px"},showFiles:s,setShowFiles:d,close:i,filesIds:u})),n.a.createElement(oa,{close:i}))}function Pr(e){var a=e.completed,t=e.showCompleted;return n.a.createElement("header",{style:{display:"flex",justifyContent:"flex-end",height:"50px",paddingBotom:"10px"}},n.a.createElement(Xe.a,{style:{marginTop:"20px"},control:n.a.createElement(Ge.a,{checked:!0===a,onChange:function(){return t(!a)},value:a}),label:n.a.createElement("p",{style:{color:"#2979ff",fontSize:"0.7rem",float:"right"}}," Mostrar solicita\xe7\xf5es conclu\xeddas")}))}var Tr=[{field:"numero",title:"N\xfamero",label:"N\xfamero"},{field:"subject",title:"Solicita\xe7\xe3o",label:"Solicita\xe7\xe3o"},{field:"empresa",title:"Empresa",label:"Empresa"},{field:"veiculo",title:"Ve\xedculo",label:"Ve\xedculo"},{field:"status",title:"Situa\xe7\xe3o",label:"Situa\xe7\xe3o"},{field:"updatedAt",title:"\xdaltima Atualiza\xe7\xe3o",label:"\xdaltima Atualiza\xe7\xe3o",type:"date"}],Fr=function(e){var a=e.rowData,t=e.user,o=a.status,n=t.role;return!(!o.match("indeferida")&&!o.match("conclu\xedda"))||(!("empresa"!==n||!o.match("Pend\xeancias"))||!("empresa"===n||!o.match("Aguardando")))},zr=function(e){var a=e.tableData,t=e.title,o=e.showDetails,r=e.assessDemand,i=e.completed,l=(e.showInfo,e.user),c=JSON.parse(JSON.stringify(a));return c.forEach((function(e){return delete e.history})),n.a.createElement("div",{style:{margin:"10px 0"},className:"noPrint"},n.a.createElement(Wo.a,{title:t,columns:Tr,data:c,style:{fontFamily:"Segoe UI",fontSize:"14px"},options:{filtering:!0,exportButton:!0,exportFileName:"Solicita\xe7\xf5es",exportCsv:function(e,a){return an("Solicita\xe7\xf5es",Tr,a)},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:10},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Nenhuma solicita\xe7\xe3o aberta no momento.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportCSVName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},actions:[{icon:"history_icon",iconProps:{color:"primary"},tooltip:"Ver hist\xf3rico",onClick:function(e,a){return o(a.id)}},function(e){return Fr({rowData:e,user:l})&&{icon:i?"Solicita\xe7\xe3o indeferida"===(null===e||void 0===e?void 0:e.status)?"clear":"done_icon":"assignment_turned_in_outlined",iconProps:{className:i?"":"assessDemandButton",color:"Solicita\xe7\xe3o indeferida"===(null===e||void 0===e?void 0:e.status)?"secondary":i?"action":"disabled"},tooltip:(null===e||void 0===e?void 0:e.status.match("Aguardando"))?"Analisar solicita\xe7\xe3o":(null===e||void 0===e?void 0:e.status.match("Pend\xeancias"))?"Abrir solicita\xe7\xe3o":"Solicita\xe7\xe3o indeferida"===(null===e||void 0===e?void 0:e.status)?"Indeferida":"Conclu\xedda",onClick:function(e,a){return i?null:r(a.id)}}}]}))};var Lr=ce(["veiculos","empresas","logs","getFiles/vehicleDocs","getFiles/empresaDocs"],(function(e){var a=e.redux,t=a.veiculos,r=a.empresas,i=a.vehicleDocs,l=a.empresaDocs,c=e.user,s=Object(o.useState)([]),d=Object(Be.a)(s,2),u=d[0],m=d[1],p=Object(o.useState)(!1),f=Object(Be.a)(p,2),b=f[0],g=f[1],E=Object(o.useState)(),x=Object(Be.a)(E,2),S=x[0],O=x[1],y=Object(o.useState)(!1),w=Object(Be.a)(y,2),k=w[0],D=w[1],I=Object(o.useState)(),N=Object(Be.a)(I,2),A=N[0],P=N[1],T=Object(o.useState)({openAlertDialog:!1,customMessage:"",customTitle:""}),F=Object(Be.a)(T,2),z=F[0],L=F[1],M=Object(o.useState)(!1),_=Object(Be.a)(M,2),q=_[0],V=_[1],R=Object(o.useState)(),B=Object(Be.a)(R,2),U=B[0],H=B[1],J=z.openAlertDialog,K=z.customTitle,W=z.customMessage;Object(o.useEffect)((function(){return zn(),function(){return zn(!0)}}),[]),Object(o.useEffect)((function(){function e(e){27===e.keyCode&&(q||A||g(),q?V(!1):A&&P())}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[A,q]),Object(o.useEffect)((function(){function a(){return(a=Object(C.a)(j.a.mark((function a(){var o,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=Object(v.a)(e.redux.logs),n=o.map((function(e){var a,o;e.empresa=null===(a=r.find((function(a){return a.codigoEmpresa===e.empresaId})))||void 0===a?void 0:a.razaoSocial,e.veiculo=null===(o=t.find((function(a){return a.veiculoId===e.veiculoId})))||void 0===o?void 0:o.placa;e.__v;return Object(Y.a)(e,["__v"])})),n=k?n.filter((function(e){return!0===e.completed})):n.filter((function(e){return!1===e.completed})),m(n);case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[t,r,k,e.redux.logs]);var $=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=u.find((function(e){return e.id===t})),O(n),(r=null===(o=qe.find((function(e){return null===n||void 0===n?void 0:n.subject.match(e.subject)})))||void 0===o?void 0:o.path).match("/solicitacoes")||(r="/solicitacoes"+r),e.history.push({pathname:r,state:{demand:n}});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),G=function(){var e=Object(C.a)(j.a.mark((function e(a){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!1),V(!1),t=u.find((function(e){return e.id===a})),e.next=5,O(t);case 5:g(!0);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,n.a.createElement(Pr,{completed:k,showCompleted:D}),n.a.createElement(zr,{tableData:u,title:k?"Solicita\xe7\xf5es conclu\xeddas":"Solicita\xe7\xf5es em andamento",user:c,showDetails:G,assessDemand:$,completed:k,style:{textAlign:"center"}}),b&&n.a.createElement(Ar,{solicitacao:S,close:function(){g(!1),V(!1)},showInfo:function(e){if(S&&(null===S||void 0===S?void 0:S.history)){var a=null===S||void 0===S?void 0:S.history[e];if(!(null===a||void 0===a?void 0:a.info))return;P(a)}},historyLog:A,setHistoryLog:P,vehicleDocs:i,empresaDocs:l,setShowFiles:function(e){e?(V(!0),H(e)):V(!1)},showFiles:q,filesIds:U}),J&&n.a.createElement(Za,{open:J,close:function(){return L(Object(h.a)(Object(h.a)({},z),{},{openAlertDialog:!J}))},customMessage:W,customTitle:K}))})),Mr=[{field:"numeroAlteracao",label:"N\xfamero da altera\xe7\xe3o",maxLength:3,pattern:"^\\d{1,3}$",width:"240px"},{field:"numeroRegistro",label:"Registro na junta comercial",maxLength:40,width:"240px"},{field:"numeroSei",label:"N\xfamero do registro SEI (se houver)",maxLength:30,width:"240px"},{field:"dataJunta",label:"Data de registro na Junta Comercial",type:"date",width:"240px"},{field:"vencimentoContrato",label:"Vencimento do Cadastro - CRC",type:"date"}],_r=t(427),qr=t.n(_r);t(559);function Vr(e){var a=e.data,t=e.forms,r=e.filesForm,i=e.files,l=e.demandFiles,c=a.filteredSocios;t.forEach((function(e){e.forEach((function(e){Object.entries(a).forEach((function(a){var t=Object(Be.a)(a,2),o=t[0],n=t[1];e.field===o&&(e.value=n)}))}))}));var s=t[0].findIndex((function(e){return"vencimentoContrato"===e.field}));if(-1!==s){var d=t[0][s].value;d&&Ae()(d).isValid()&&(d=Ae()(d).format("DD/MM/YYYY"),t[0][s].value=d)}var u=["Dados da empresa","Informa\xe7\xf5es sobre a altera\xe7\xe3o do contrato social"];return n.a.createElement(n.a.Fragment,null,n.a.createElement("section",{className:"flex"},n.a.createElement("div",{className:"divTable"},t.map((function(e,a){return n.a.createElement(o.Fragment,{key:a},n.a.createElement("table",{style:1===a?{tableLayout:"fixed"}:{}},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"tHeader",colSpan:e.length},u[a])),n.a.createElement("tr",null,e.map((function(e,a){var t=e.label;return n.a.createElement("th",{key:a},t)})))),n.a.createElement("tbody",null,n.a.createElement("tr",null,e.map((function(e,a){var t=e.value;return n.a.createElement("td",{className:"review",key:a},t)}))))))})))),n.a.createElement("section",{className:"socios_docs_container"},c&&c[0]&&c.some((function(e){return e.status}))&&n.a.createElement("section",{title:"S\xf3cios",className:"flexColumn socios__review__container"},n.a.createElement("h3",{className:"review__subtitle"},n.a.createElement(qr.a,{className:"socios__review__icon"}),"S\xf3cios"),c.map((function(e,a){var t=e.nomeSocio,o=e.status,r=e.outsider;return n.a.createElement("div",{key:a,className:"flex socios__review__div",style:{color:r||"new"===o?"green":"modified"===o?"orange":"deleted"===o?"red":""}},n.a.createElement("span",{className:"socios__review__prop"},t,r||"new"===o?"(inclu\xeddo)":"modified"===o?"(modificado)":"deleted"===o?"(exclu\xeddo)":""))}))),(i||l)&&n.a.createElement("section",{title:"Documentos",className:"flex docs"},n.a.createElement("h3",{className:"review__subtitle"},n.a.createElement(Pa.a,{className:"docs__icon"})," Documentos"),n.a.createElement(Da,{demandFiles:l,form:r,files:i,collection:"empresaDocs"}))))}var Rr=Object(X.a)((function(e){return{list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#999",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"}}})),Br=function(e){var a=e.handleInput,t=e.handleBlur,r=e.data,i=e.addSocio,l=e.enableEdit,c=e.handleEdit,s=e.removeSocio,d=r.selectedEmpresa,u=r.subtitles,m=r.activeStep,p=r.filteredSocios,f=Rr(),v=f.iconButton,h=f.list;return n.a.createElement(n.a.Fragment,null,d&&n.a.createElement("section",{className:"flex paper"},n.a.createElement($e,{subtitle:u[m]}),n.a.createElement("div",{className:"flex center"},n.a.createElement("div",{style:{padding:"10px 0",width:"100%"}},n.a.createElement(We,{form:Qt,data:r,handleBlur:t,handleInput:a})),n.a.createElement("div",{style:{margin:"5px 0 7px 84.58%",width:"100%"}},n.a.createElement(Ze.a,{color:"primary",variant:"outlined",size:"small",onClick:i},n.a.createElement(ea.a,null)," Adicionar s\xf3cio")))),d&&0===p.length&&n.a.createElement("section",null,n.a.createElement("p",null,"Nenhum s\xf3cio cadastrado para ",d.razaoSocial)),(null===p||void 0===p?void 0:p.length)>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement("section",{className:"flex center paper"},n.a.createElement("p",null," S\xf3cios cadastrados"),p.map((function(e,a){return n.a.createElement("div",{key:a},Qt.map((function(a,t){return n.a.createElement(o.Fragment,{key:t+1e3},n.a.createElement(Je.a,{value:e[a.field]||"",name:a.field,label:a.label,className:h,disabled:!e.edit,onChange:c,error:e.edit?Te(e[a.field],a):null,helperText:e.edit?Fe(e[a.field],a):null,type:null===a||void 0===a?void 0:a.type,InputLabelProps:{shrink:!0,style:{fontWeight:600,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",color:"#888"}},inputProps:{style:{fontSize:"13px",color:!0===e.edit?"#000":"new"===e.status||e.outsider?"green":"modified"===e.status?"#FF2500":"deleted"===e.status?"red":"#888",textDecoration:"deleted"!==e.status||e.edit?"":"line-through"}}}))})),n.a.createElement(Ze.a,{disabled:"deleted"===e.status,component:"span",className:v,title:"editar",onClick:function(){return l(a)}},n.a.createElement(Ao.a,null)),n.a.createElement(Ze.a,{className:v,color:"deleted"===e.status?"primary":"secondary",title:"deleted"===e.status?"Desfazer exclus\xe3o":"Remover",onClick:function(){return s(a)}},"deleted"===e.status?n.a.createElement("i",{className:"material-icons"},"undo"):n.a.createElement(It.a,null)))})))))},Ur=[{title:"Altera\xe7\xe3o do contrato social",name:"altContratoDoc"},{title:"CRC",name:"crc"}],Yr=function(e){var a=e.empresas,t=e.data,o=e.setActiveStep,r=e.enableEdit,i=e.handleEdit,l=e.addSocio,c=e.removeSocio,s=e.handleInput,d=e.handleBlur,u=e.handleSubmit,m=e.handleFiles,p=e.removeFile,f=e.setShowPendencias,v=JSON.parse(JSON.stringify(Zt)).filter((function(e){return"numeroContrato"!==e.field&&"vencimentoContrato"!==e.field})).map((function(e){return"razaoSocial"===e.field&&(e.disabled=!0),e})),h=t.selectedEmpresa,b=t.demand,g=t.demandFiles,E=t.activeStep,x=t.stepTitles,S=t.subtitles,O=t.form,y=t.fileToRemove,j=t.info,C=t.showPendencias,w="Altera\xe7\xe3o de contrato social - ".concat(null===h||void 0===h?void 0:h.razaoSocial),k=[v,Mr];return n.a.createElement("main",null,n.a.createElement("header",null,n.a.createElement(_a,{links:["Empresas","/empresas"],text:"Altera\xe7\xe3o de dados e contrato social",demand:b,selectedEmpresa:h}),n.a.createElement("section",null,n.a.createElement(Ya,{activeStep:E,steps:x,setActiveStep:o})),n.a.createElement("div",{className:"flex center"},n.a.createElement(Ye,{empresas:a,data:t,headerTitle:w,handleInput:s}))),h instanceof Object&&n.a.createElement(n.a.Fragment,null,2!==E?n.a.createElement("section",{className:"flex paper"},n.a.createElement($e,{subtitle:S[E]}),E<2?n.a.createElement(n.a.Fragment,null,n.a.createElement(We,{form:k[E],data:t,handleInput:s,style:{width:"100%"}}),n.a.createElement("div",{className:"flex center",style:{width:"100%"}},1===E&&Ur.map((function(e,a){var t=e.name,o=e.title;return n.a.createElement(pa,{key:a,name:t,formData:O,dropDisplay:"Clique ou arraste para anexar o ".concat(o," "),handleFiles:m,removeFile:p,fileToRemove:y,style:{width:0===a?"380px":"250px",marginRight:0===a?"12px":0}})})))):n.a.createElement(Vr,{data:t,forms:k,files:O,demandFiles:g,filesForm:bt})):n.a.createElement("section",null,n.a.createElement(Br,{data:t,handleInput:s,handleBlur:d,addSocio:l,removeSocio:c,handleFiles:m,enableEdit:r,handleEdit:i})),n.a.createElement("footer",null,n.a.createElement(Va,{demand:b,declineButtonLabel:"Indeferir",setShowPendencias:f,showPendencias:C,info:j,activeStep:E,lastStep:x.length-1,setActiveStep:o,handleInput:s,handleSubmit:u}))))},Hr=["Alterar dados da empresa","Informa\xe7\xf5es sobre altera\xe7\xe3o do contrato social","Informa\xe7\xf5es sobre s\xf3cios","Revis\xe3o"],Jr=["Utilize os campos abaixo caso deseje editar os dados da empresa","Informe as altera\xe7\xf5es no contrato social ou CRC e anexe uma c\xf3pia do documento","Adicione ou altere s\xf3cios e suas respectivas participa\xe7\xf5es.","Revise os dados informados."],Kr=ce(["empresas","socios","getFiles/empresaDocs"],(function(e){var a=e.redux.empresas,t=Object(v.a)(e.redux.socios),r=Object(o.useState)({razaoSocial:"",activeStep:0,stepTitles:Hr,subtitles:Jr,dropDisplay:"Clique ou arraste para anexar a c\xf3pia da altera\xe7\xe3o do contrato social ",demand:void 0,confirmToast:!1,filteredSocios:[],showPendencias:!1,openAlertDialog:!1}),i=Object(Be.a)(r,2),l=i[0],c=i[1];Object(o.useEffect)((function(){var o,n;if(a&&1===a.length){var r=Object(h.a)({},a[0]),i=null===r||void 0===r?void 0:r.vencimentoContrato;i&&i.length>0&&(r.vencimentoContrato=i.substr(0,10)),c(Object(h.a)(Object(h.a)(Object(h.a)({},l),r),{},{selectedEmpresa:r,filteredSocios:t}))}var s=null===e||void 0===e||null===(o=e.location)||void 0===o||null===(n=o.state)||void 0===n?void 0:n.demand;if(s&&s.history[0]){var d,u=e.redux.empresaDocs,m=null===s||void 0===s?void 0:s.history[0],p=m.altContrato,f=m.socioUpdates,v=m.files,b=a.find((function(e){return e.codigoEmpresa===s.empresaId})),g={},E=JSON.parse(JSON.stringify(t.filter((function(e){return e.empresas[0]&&e.empresas.some((function(e){return e.codigoEmpresa===b.codigoEmpresa}))}))));if(p&&Mr.forEach((function(e){var a=e.field;return g[a]=p[a]})),f&&f[0]){var x=[];f.forEach((function(e){"new"===e.status||e.outsider?x.push(e):E.forEach((function(a){if(e.socioId===a.socioId){var t=E.findIndex((function(a){return a.socioId===e.socioId}));-1!==t&&(E[t]=e)}}))})),E=E.concat(x).sort((function(e,a){return e.nomeSocio.localeCompare(a.nomeSocio)}))}v&&(d=u.filter((function(e){return v.includes(e.id)}))),c(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},l),p),b),{},{selectedEmpresa:b,demand:s,demandFiles:d,filteredSocios:E,activeStep:3}))}return function(){}}),[]),Object(o.useEffect)((function(){if(l.selectedEmpresa){var e=l.selectedEmpresa.codigoEmpresa,a=JSON.parse(JSON.stringify(t.filter((function(a){return a.empresas&&a.empresas.some((function(a){return a.codigoEmpresa===e}))}))))||[];c(Object(h.a)(Object(h.a)({},l),{},{originalSocios:a}))}}),[l.selectedEmpresa]);var s=function(){var e=Object(C.a)(j.a.mark((function e(){var a,t,o,n,r,i,s,d,u,m,p,b,g,E;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.selectedEmpresa,t=a.codigoEmpresa,o=Object(v.a)(l.filteredSocios),n={},r=0,i=0,Qt.forEach((function(e){""!==l[e.field]&&void 0!==l[e.field]||(r+=1)})),100!==r){e.next=6;break}return c(Object(h.a)(Object(h.a)({},l),{},{alertType:"fieldsMissing",openAlertDialog:!0})),e.abrupt("return");case 6:return Qt.forEach((function(e){Object.assign(n,Object(f.a)({},e.field,l[e.field]))})),e.next=9,T.a.post("/api/checkSocios",{newCpfs:[null===n||void 0===n?void 0:n.cpfSocio]});case 9:if(s=e.sent,d=null===s||void 0===s?void 0:s.data,n.status="new",d[0]&&(u=d[0],m=u.socio_id,p=u.empresas,b={socioId:m,status:"modified",outsider:!0,empresas:p},Object.assign(n,Object(h.a)({},b))),n.share&&(n.share=+n.share),g=n.share,n.empresas&&n.empresas[0]&&n.empresas.push({codigoEmpresa:t,share:g}),(n.empresas&&!n.empresas[0]||!n.empresas)&&(n.empresas=[{codigoEmpresa:t,share:g}]),o.push(n),o.sort((function(e,a){return e.nomeSocio.localeCompare(a.nomeSocio)})),o.forEach((function(e){"deleted"!==(null===e||void 0===e?void 0:e.status)&&(i+=Number(e.share))})),!(i>100)){e.next=25;break}return o.pop(),e.next=24,c(Object(h.a)(Object(h.a)({},l),{},{alertType:"overShared",openAlertDialog:!0}));case 24:return e.abrupt("return");case 25:return E={},Qt.forEach((function(e){return E[e.field]=""})),e.next=29,c(Object(h.a)(Object(h.a)(Object(h.a)({},l),E),{},{filteredSocios:o,totalShare:i}));case 29:setTimeout((function(){document.getElementsByName("nomeSocio")[0].focus()}),200);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var a=Object(C.a)(j.a.mark((function a(t){var o,n,r,i,c,s,d,f,v,g,x,w,k,D,I,N,A,P,F,z,L,M,_;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=l.demand,n=l.form,r=l.selectedEmpresa,i=r.codigoEmpresa,c=b(Mr),s=b(Zt),d=m(s),f=u(t),v=p({demand:o,altContrato:c,socioUpdates:f,approved:t}),g=[],x="Solicita\xe7\xe3o de altera\xe7\xe3o contratual enviada.",o||c||d||n||f){a.next=5;break}return alert("Nenhuma modifica\xe7\xe3o registrada!"),a.abrupt("return");case 5:if(!d){a.next=12;break}if(T.a.put("/api/editTableRow",d),x="Dados da empresa alterados com sucesso.",f||c||n){a.next=12;break}return O("Dados da empresa atualizados!"),setTimeout((function(){S()}),750),a.abrupt("return");case 12:if(!o||!t){a.next=29;break}if(c&&T.a.post("/api/altContrato",c),!f){a.next=29;break}if(w=f.newSocios,k=f.oldSocios,D=f.cpfsToAdd,I=f.cpfsToRemove,N={table:"socios",tablePK:"socio_id",codigoEmpresa:i,cpfsToAdd:D},!w[0]){a.next=19;break}return a.next=19,T.a.post("/api/cadSocios",{socios:w,codigoEmpresa:i}).then(function(){var e=Object(C.a)(j.a.mark((function e(a){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=null===a||void 0===a?void 0:a.data.map((function(e){return e.socio_id})))[0]&&(g=g.concat(t));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 19:if(!k[0]){a.next=27;break}return a.next=22,T.a.put("/api/editSocios",Object(h.a)({requestArray:k},N));case 22:if(!I[0]){a.next=25;break}return a.next=25,T.a.patch("/api/removeEmpresa",{cpfsToRemove:I,codigoEmpresa:i});case 25:A=k.map((function(e){return e.socio_id})),g=g.concat(A);case 27:g[0]&&(P=y.filter((function(e){return(null===e||void 0===e?void 0:e.socioId)&&!g.includes(e.socioId)&&"deleted"!==(null===e||void 0===e?void 0:e.status)})).map((function(e){return e.socioId})),F=g.concat(P),Object.assign(v,{metadata:{socios:F}})),x="Altera\xe7\xe3o de contrato social aprovada.";case 29:if(!1!==t){a.next=33;break}x="Solicita\xe7\xe3o indeferida.",a.next=39;break;case 33:if(t){a.next=39;break}return M=y.filter((function(e){return(null===e||void 0===e?void 0:e.socioId)&&!g.includes(e.socioId)&&"deleted"!==(null===e||void 0===e?void 0:e.status)})).map((function(e){return e.socioId})),_=g.concat(M),a.next=37,E(i,_);case 37:(z=a.sent)instanceof Array&&(L=z.map((function(e){return e.id})),v.history.files=L);case 39:Ve(v).then((function(e){console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),o?setTimeout((function(){e.history.push("/solicitacoes")}),1500):setTimeout((function(){S()}),900),O(x);case 42:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),u=function(e){var a=l.filteredSocios,t=l.selectedEmpresa,o=l.demand,n=t.codigoEmpresa,r=[],i=[],c=[];if(a.forEach((function(e){delete e.edit,delete e.createdAt,delete e.razaoSocial,Object.keys(e).forEach((function(a){e[a]&&""!==e[a]||delete e[a]})),e.status&&r.push(e)})),!r[0])return null;if(r.forEach((function(e){if(e.empresas&&e.empresas[0]&&!e.empresas.some((function(e){return e.codigoEmpresa===n})))e.empresas.push({codigoEmpresa:n,share:null===e||void 0===e?void 0:e.share}),console.log(e,e.empresas);else if(e.empresas&&e.empresas[0]&&e.empresas.some((function(e){return e.codigoEmpresa===n}))){var a=e.empresas.findIndex((function(e){return e.codigoEmpresa===n}));e.empresas[a].share=+e.share,console.log(e,e.empresas)}else e.empresas&&e.empresas[0]||(e.empresas=[{codigoEmpresa:n,share:null===e||void 0===e?void 0:e.share}]);"new"!==e.status&&!0!==e.outsider||c.push({cpf_socio:e.cpfSocio}),e.empresas instanceof Array&&"deleted"===e.status&&(e.empresas=e.empresas.filter((function(e){return e.codigoEmpresa!==n})),i.push({cpf_socio:e.cpfSocio}),e.empresas[0]||(e.empresas=[]))})),!o)return{socioUpdates:r,cpfsToAdd:c,cpfsToRemove:i};if(o&&e){r.forEach((function(e){delete e.outsider,delete e.razaoSocial,delete e.codigoEmpresa,delete e.originalStatus,delete e.nomeEmpresas,e.empresas=JSON.stringify(e.empresas)}));var s=(r=A.a.decamelizeKeys(r)).filter((function(e){return"new"===e.status})),d=r.filter((function(e){return"modified"===e.status||"deleted"===e.status}));return d.forEach((function(e){return delete e.status})),s.forEach((function(e){return delete e.status})),{newSocios:s,oldSocios:d,cpfsToAdd:c,cpfsToRemove:i}}},m=function(e){var a=l.selectedEmpresa,t=a.codigoEmpresa;if(e){for(var o in a)e[o]&&e[o]===a[o]&&delete e[o];if(Object.keys(e).length>0)return{id:t,table:"empresas",tablePK:"codigo_empresa",updates:A.a.decamelizeKeys(e)}}},p=function(e){var a,t=e.demand,o=e.altContrato,n=e.approved,r=e.socioUpdates,i=l.selectedEmpresa,c=l.info,s=i.codigoEmpresa;(t||(a={history:Object(h.a)({altContrato:o,info:c},r),empresaId:s,historyLength:0,approved:n},!1===n&&(a.declined=!0)),t&&!1===n)&&(a={id:t.id,empresaId:t.empresaId,history:{info:c},declined:!0});t&&!0===n&&(a={id:t.id,demandFiles:l.demandFiles,history:{},approved:n});return a},b=function(e){var a=l.selectedEmpresa,t=l.demand,o=a.codigoEmpresa,n=a.razaoSocial,r=t&&t.createdAt,i={codigoEmpresa:null===a||void 0===a?void 0:a.codigoEmpresa};e.forEach((function(e){var a=e.field;for(var t in l)t===a&&l[t]&&Object.assign(i,Object(f.a)({},t,l[t]))}));var c=Object.keys(i);return c.length>1?(c.includes("numeroAlteracao")&&t&&(i.createdAt=r,i.codigoEmpresa=o,i.razaoSocial=n),i):null},g=function(){var e=Object(C.a)(j.a.mark((function e(a,t){var o,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a&&a[0]&&(n=Object(h.a)(Object(h.a)({},l),{},Object(f.a)({},t,a[0])),r=we(a,n,Ur),c(Object(h.a)(Object(h.a)(Object(h.a)({},l),r),{},(o={},Object(f.a)(o,t,a[0]),Object(f.a)(o,"fileToRemove",null),o))));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),E=function(){var e=Object(C.a)(j.a.mark((function e(a,t){var o,n,r,i,c,s,d,u,m,p,f;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=l.form,n=l.numeroAlteracao,r=[],!(o instanceof FormData)){e.next=27;break}i={empresaId:a,tempFile:!0},c=new FormData,s=Object(je.a)(o),e.prev=5,s.s();case 7:if((d=s.n()).done){e.next=18;break}return u=d.value,m=u[0],console.log("\ud83d\ude80 ~ file: AltContrato.jsx ~ line 641 ~ submitFile ~ name",m),"altContratoDoc"===m?(p=Object(h.a)(Object(h.a)({},i),{},{fieldName:m,socios:t,numeroAlteracao:n}),c.append("metadata",JSON.stringify(p))):(f=Object(h.a)(Object(h.a)({},i),{},{fieldName:m}),c.append("metadata",JSON.stringify(f))),c.set(m,u[1]),e.next=15,T.a.post("/api/empresaUpload",c).then((function(e){var a,t;console.log(e),(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.file)instanceof Array&&r.push.apply(r,Object(v.a)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.file))})).catch((function(e){return console.log(e)}));case 15:c=new FormData;case 16:e.next=7;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(5),s.e(e.t0);case 23:return e.prev=23,s.f(),e.finish(23);case 26:return e.abrupt("return",r);case 27:case"end":return e.stop()}}),e,null,[[5,20,23,26]])})));return function(a,t){return e.apply(this,arguments)}}(),x=function(){var e=Object(C.a)(j.a.mark((function e(a){var t,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.form,o=Ie(a,t),c(Object(h.a)(Object(h.a)({},l),o));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=function(){var e={},o={};[Mr,Qt].forEach((function(a){a.forEach((function(a){var t=a.field;Object.assign(e,Object(f.a)({},t,""))}))})),a&&1===a.length&&(o=Object(h.a)(Object(h.a)({},a[0]),{},{selectedEmpresa:a[0],filteredSocios:t})),c(Object(h.a)(Object(h.a)({},e),{},{activeStep:0,stepTitles:Hr,subtitles:Jr,razaoSocial:"",selectedEmpresa:void 0,filteredSocios:[],form:void 0,fileToRemove:void 0},o))},O=function(e){return c(Object(h.a)(Object(h.a)({},l),{},{confirmToast:!l.confirmToast,toastMsg:e}))},y=l.filteredSocios,w=l.confirmToast,k=l.toastMsg,D=l.openAlertDialog,I=l.alertType,N=l.customMessage,P=l.customTitle;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Yr,{empresas:a,data:l,setActiveStep:function(e){var a=l.activeStep;"next"===e&&a++,"back"===e&&a--,"reset"===e&&(a=0),c(Object(h.a)(Object(h.a)({},l),{},{activeStep:a}))},handleInput:function(e){var o,n=e.target,r=n.name,i=n.value,s={};if("razaoSocial"===r){var d,u,m=null===(d=s=a.find((function(e){return e.razaoSocial===i})))||void 0===d?void 0:d.vencimentoContrato;if(m&&m.length>0&&(s.vencimentoContrato=m.substr(0,10)),null===(u=s)||void 0===u?void 0:u.codigoEmpresa){o=JSON.parse(JSON.stringify(t.filter((function(e){return e.empresas&&e.empresas[0]&&e.empresas.some((function(e){return e.codigoEmpresa===s.codigoEmpresa}))}))));var p=JSON.parse(JSON.stringify(t));p=p.filter((function(e){return e.empresas&&e.empresas[0]?e.empresas.includes(s.codigoEmpresa):null})),p=o.concat(p);var b,g=new Map,E=Object(je.a)(p);try{for(E.s();!(b=E.n()).done;){var x=b.value;g.set(x.socioId,x)}}catch(O){E.e(O)}finally{E.f()}(o=Object(v.a)(g.values())).forEach((function(e){var a;e.empresas[0]&&(a=e.empresas.find((function(e){return e.share&&e.codigoEmpresa===s.codigoEmpresa}))),a&&a.share&&(e.share=a.share)}))}c(s?Object(h.a)(Object(h.a)(Object(h.a)({},l),s),{},Object(f.a)({selectedEmpresa:s,filteredSocios:o},r,i)):Object(h.a)(Object(h.a)({},l),{},Object(f.a)({selectedEmpresa:void 0,filteredSocios:void 0},r,i)))}else{var S=Kn(r,i);c(Object(h.a)(Object(h.a)({},l),{},Object(f.a)({},r,S)))}},handleBlur:function(e){var a=e.target,t=a.name,o=a.value,n=l.filteredSocios;"cpfSocio"===t&&(n.some((function(e){return e.cpfSocio===o}))&&c(Object(h.a)(Object(h.a)({},l),{},{openAlertDialog:!0,customTitle:"Cpf j\xe1 cadastrado",customMessage:"O cpf informado corresponde a um s\xf3cio j\xe1 cadastrado. Para remover ou editar os dados do s\xf3cio, utilize as op\xe7\xf5es abaixo.",cpfSocio:""})))},handleSubmit:d,handleFiles:g,removeFile:x,socios:y,addSocio:s,removeSocio:function(e){var a=l.filteredSocios,t=l.demand,o=a[e];"new"===(null===o||void 0===o?void 0:o.status)||!t&&o.outsider?(a.splice(e,1),c(Object(h.a)(Object(h.a)({},l),{},{filteredSocios:a}))):((null===o||void 0===o?void 0:o.status)&&"deleted"!==(null===o||void 0===o?void 0:o.status)?(o.originalStatus=o.status,o.status="deleted"):"deleted"===(null===o||void 0===o?void 0:o.status)?o.status=null===o||void 0===o?void 0:o.originalStatus:o.status="deleted",c(Object(h.a)(Object(h.a)({},l),{},{filteredSocios:a})))},enableEdit:function(e){var a=l.filteredSocios;!0===a[e].edit?a[e].edit=!1:(a.forEach((function(e){return e.edit=!1})),a[e].edit=!0),c(Object(h.a)(Object(h.a)({},l),{},{filteredSocios:a}))},handleEdit:function(e){var a=e.target.name,t=l.filteredSocios,o=l.selectedEmpresa.codigoEmpresa,n=e.target.value;"share"===a&&(n=n.replace(",","."));var r=Object(v.a)(t),i=r.find((function(e){return!0===e.edit}));if(i){var s=Kn(a,n);if(i[a]=s,i.status||(i.status="modified"),"share"===a&&!isNaN(+n)){var d=i.empresas,u=d.findIndex((function(e){return e.codigoEmpresa===o}));-1!==u?d[u]=Object(h.a)(Object(h.a)({},d[u]),{},{share:+n}):d[0]?d.push({codigoEmpresa:o,share:+n}):i.empresas=[{codigoEmpresa:o,share:+n}]}c(Object(h.a)(Object(h.a)({},l),{},{filteredSocios:r}))}},setShowPendencias:function(){return c(Object(h.a)(Object(h.a)({},l),{},{showPendencias:!l.showPendencias}))}}),n.a.createElement(ee,{open:w,close:O,msg:k}),D&&n.a.createElement(Za,{open:D,alertType:I,close:function(){return c(Object(h.a)(Object(h.a)({},l),{},{openAlertDialog:!l.openAlertDialog}))},customMessage:N,customTitle:P}))})),Wr=(t(560),function(e){var a=e.data,t=e.changeTab,r=e.handleInput,i=e.handleSubmit,l=a.title,c=a.form,s=a.buttonLabel,d=a.tab;Object(o.useEffect)((function(){setTimeout((function(){var e=document.getElementById("email");e&&e.focus()}),600)}),[]);var u=function(e){var t,o=a[null===e||void 0===e?void 0:e.field];if(o)return(!e.errorHandler||!e.errorHandler(o))&&(!(!o||!e.errorHandler||e.errorHandler(o))||((null===(t=o)||void 0===t?void 0:t.length)<(null===e||void 0===e?void 0:e.minLength)||("string"!==typeof o&&(o=o.toString()),!!e.pattern&&null===o.match(e.pattern))))},m=function(e){var t,o,n=a[e.field];return n?e.errorHandler&&e.errorHandler(n)?"\u2713":n&&e.errorHandler&&!e.errorHandler(n)||(null===(t=n)||void 0===t?void 0:t.length)<(null===e||void 0===e?void 0:e.minLength)?"\u2718":(null===(o=n)||void 0===o?void 0:o.length)>=(null===e||void 0===e?void 0:e.minLength)?"\u2713":("string"!==typeof n&&(n=n.toString()),n>e.max||n<e.min?"Valor inv\xe1lido":null===n.match(e.pattern)?"\u2718":e.pattern&&null!==n.match(e.pattern)?"\u2713":" "):" "};return n.a.createElement("div",{className:"flexColumn login"},n.a.createElement("h2",{className:"login__title"},"CadTI - Cadastro do Transporte Intermunicipal - Seinfra MG"),n.a.createElement("div",{className:"login__form paper"},n.a.createElement("header",null,n.a.createElement("h4",{className:"header2 login__subtitle"},l),2===d&&n.a.createElement("h5",{className:"login__subtitle--forgotPassword"},"Insira o e-mail cadastrado para recuperar a senha.")),n.a.createElement("section",{className:"flexColumn center"},c.map((function(e,t){var o=e.name,i=e.label,l=e.options,c=e.type,s=void 0===c?"text":c,d=Object(Y.a)(e,["name","label","options","type"]);return n.a.createElement("div",{className:"input",key:t},n.a.createElement(Je.a,{id:o,name:o,label:i,value:a[o]||"",onChange:r,type:s,error:u(d),helperText:m(d),InputProps:{style:{width:"260px"}},InputLabelProps:{style:{fontSize:"10pt",color:"#223"}},select:!!l},l&&l.map((function(e,a){var t=e.optionLabel,o=e.optionValue;return n.a.createElement(He.a,{key:a,value:o},t)}))))})),n.a.createElement(Oo,{label:s,onClick:i})),n.a.createElement("footer",{className:"login__footer"},n.a.createElement("p",{onClick:function(){return t(0===d?1:0)}},0===d?"Ainda n\xe3o \xe9 cadastrado?":"Voltar para a tela de login"),0===d&&n.a.createElement("p",{onClick:function(){return t(2)}},"Esqueceu sua senha?"))))}),$r=[{name:"email",label:"E-mail"},{name:"password",label:"Senha",type:"password"}],Gr=[{title:"Fazer login",form:$r,buttonLabel:"entrar",endPoint:"/auth/login"},{title:"Cadastro de Usu\xe1rio",form:[{name:"name",label:"Nome Completo"},Object(h.a)(Object(h.a)({},Yt),{},{name:"cpf",field:"cpf"})].concat($r,[{name:"confirmPassword",label:"Confirme sua senha",type:"password"}]),buttonLabel:"Cadastrar",endPoint:"/auth/signUp",toastMsg:"Usu\xe1rio cadastrado."},{title:"Recupera\xe7\xe3o de senha",form:[{name:"email",label:"E-mail"}],buttonLabel:"Recuperar senha",endPoint:"/auth/forgotPassword",toastMsg:"Senha enviada para o e-mail registrado."}],Xr=function(e,a){var t=document.baseURI;return"\n    <p>\n    O usu\xe1rio ".concat(e," foi criado com sucesso no Sistema de Cadastro do Transporte Intermunicipal da Seinfra-MG - CadTI.\n    </p>\n    <p>\n    Para confirmar o endere\xe7o de e-mail e liberar o acesso ao sistema, <a href= ").concat(t,"auth/verifyUser/").concat(a,"> clique aqui </a>.\n    </p>\n    Caso n\xe3o tenha feito o cadastro, favor desconsiderar essa mensagem.")};var Zr=Object(c.c)((function(e){return{redux:Object(h.a)({},e.user)}}),(function(e){return Object(l.b)({logUser:re},e)}))((function(e){var a=Object(o.useState)(Object(h.a)({tab:0},Gr[0])),t=Object(Be.a)(a,2),r=t[0],i=t[1],l=r.tab,c=r.endPoint,s=r.toastMsg,d=r.toastStatus,u=r.confirmToast;Object(o.useEffect)((function(){var e=function(e){"Enter"===e.key&&b()};return document.addEventListener("keypress",e),function(){return document.removeEventListener("keypress",e)}}));var m=function(){var a=Object(C.a)(j.a.mark((function a(){var t,o,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.post(c,r);case 3:return a.next=5,T.a.get("/getUser");case 5:t=a.sent,o=null===t||void 0===t?void 0:t.data,ae("loggedIn",!0),e.logUser(o),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),g(null===a.t0||void 0===a.t0||null===(n=a.t0.response)||void 0===n?void 0:n.data,"error");case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(){return a.apply(this,arguments)}}(),p=function(){var e=Object(C.a)(j.a.mark((function e(){var a,t,o,n,l,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.form,a=r.endPoint,r.confirmToast,r.toastMsg,t=Object(Y.a)(r,["form","endPoint","confirmToast","toastMsg"]),n=1,t instanceof Object&&(t.role="empresa"),l=t.email,c=t.name,s={to:l,subject:"Confirma\xe7\xe3o de e-mail",vocativo:c},e.next=6,T.a.post(a,t).then((function(e){var a,t=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.id,o=Xr(l,t);s.message=o,T.a.post("/alerts/mail",s)})).catch((function(e){var a;g(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data,"error"),o=!0}));case 6:o||(n=0,g("Usu\xe1rio cadastrado."),setTimeout((function(){return i(Object(h.a)({tab:n},Gr[n]))}),1250));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(C.a)(j.a.mark((function e(){var a,t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.email,t=a,T.a.post(c,{recoveryMail:t}).then((function(e){g(e.data),setTimeout((function(){return i(Object(h.a)({tab:0},Gr[0]))}),1250)})).catch((function(e){var a;g(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data,"error")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){0===l&&m(),1===l&&p(),2===l&&v()},g=function(e,a){return i(Object(h.a)(Object(h.a)({},r),{},{confirmToast:!r.confirmToast,toastMsg:e,toastStatus:a}))};return n.a.createElement(n.a.Fragment,null,n.a.createElement(Wr,{data:r,handleInput:function(e){var a=e.target,t=a.name,o=Kn(t,a.value);i(Object(h.a)(Object(h.a)({},r),{},Object(f.a)({},t,o)))},handleSubmit:b,changeTab:function(e){return i(Object(h.a)(Object(h.a)({},r),{},{tab:e},Gr[e]))}}),n.a.createElement(ee,{open:u,close:g,msg:s,status:d}))})),Qr=[{field:"name",title:"Nome",label:"Nome"},{field:"cpf",title:"CPF",label:"CPF"},{field:"email",title:"E-mail",label:"E-mail"},{field:"role",name:"role",title:"Perfil",label:"Perfil",lookup:{admin:"Administrador",tecnico:"T\xe9cnico Seinfra",empresa:"Delegat\xe1rio"},editable:"always"}],ei=function(e){var a=e.collection,t=(e.showDetails,e.addUser),o=e.editUser,r=e.deleteUser;return Array.isArray(a)||(a=[]),a=Array.from(a).sort((function(e,a){return e.name.localeCompare(a.name)})),n.a.createElement("div",{style:{margin:"10px 0"},className:"noPrint"},n.a.createElement(Wo.a,{title:"Gerenciar dados de usu\xe1rios",columns:Qr,data:a,style:{fontFamily:"Segoe UI",fontSize:"14px"},options:{filtering:!0,exportButton:!0,exportFileName:"Usu\xe1rios",exportCsv:function(e,a){var t,o=null===(t=Qr.find((function(e){return e.lookup})))||void 0===t?void 0:t.lookup;Object(v.a)(a).forEach((function(e){Object.entries(o).forEach((function(a){var t=Object(Be.a)(a,2),o=t[0],n=t[1];o===(null===e||void 0===e?void 0:e.role)&&(e.role=n)}))})),an("Usu\xe1rios",Qr,a)},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:20,rowStyle:{fontSize:"0.5rem"}},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Registro n\xe3o encontrado.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",addTooltip:"Adicionar novo usu\xe1rio",editTooltip:"Editar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportCSVName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar para xlsx"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},editable:{onRowAdd:function(e){return new Promise((function(a,o){setTimeout((function(){t(e),a()}),1e3)}))},onRowUpdate:function(e,t){return new Promise((function(n,r){setTimeout((function(){Object(v.a)(a)[t.tableData.id]=e,o(e),n()}),500)}))},onRowDelete:function(e){return new Promise((function(a,t){setTimeout((function(){r(e),a()}),1e3)}))}}}))},ai=ce(["users","socios"],(function(e){var a=e.redux,t=a.users,r=a.socios,i=Object(o.useState)({confirmToast:!1}),l=Object(Be.a)(i,2),c=l[0],s=l[1];Object(o.useEffect)((function(){return zn(),function(){return zn(!0)}}),[]);var d=function(){var e=Object(C.a)(j.a.mark((function e(a){var t,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.cpf,(o=r.find((function(e){return e.cpfSocio===t})))&&(a.empresas=[o.codigoEmpresa]),T.a.post("/users/addUser",a).then((function(e){return console.log(e.data)})).catch((function(e){var a;return m((null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data)||"Erro")}));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),u=c.confirmToast,m=function(e,a){return s(Object(h.a)(Object(h.a)({},c),{},{confirmToast:!u,toastMsg:e,toastStatus:a}))};return n.a.createElement("div",null,n.a.createElement(ei,{collection:t,addUser:d,editUser:function(e){T.a.put("/users/editUser",e).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))},deleteUser:function(e){var a=e.id;T.a.delete("/users/deleteUser?id=".concat(a)).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))}}),n.a.createElement(ee,{open:u,close:m,msg:c.toastMsg,status:"warning"}))})),ti=[{field:"name",label:"Nome e sobrenome"},{field:"cpf",label:"CPF",disabled:!0},{field:"email",label:"E-mail",type:"email"},{field:"password",label:"Alterar senha",type:"password"},{field:"confirmPassword",label:"Confirme a nova senha",type:"password"}],oi=(t(561),function(e){var a=e.data,t=e.handleInput,o=e.handleSubmit,r=a.modified;return n.a.createElement("div",{className:"flexColumn center editAccount__container"},n.a.createElement("header",{className:"selectHeader"},n.a.createElement("h4",{className:"parametrosTitle"},"Alterar dados da conta"),n.a.createElement($e,{subtitle:"Caso deseje alterar apenas a senha, insira apenas a senha e a confirma\xe7\xe3o. N\xe3o \xe9 necess\xe1rio informar a senha para alterar os demais dados da conta."})),n.a.createElement("main",{className:"configForm"},n.a.createElement(We,{form:ti,data:a,handleInput:t,style:{width:"100%",flexDirection:"column"}})),n.a.createElement("div",{style:{minHeight:"60px",position:"flex"}},n.a.createElement(Oo,{action:"save",onClick:o,disabled:!r})))}),ni=Object(c.c)(null,{editUser:function(e){return function(a){a({type:"LOG_USER",payload:e})}}})(ce([],(function(e){var a=e.user,t=Object(o.useState)({initState:{confirmToast:!1},modified:!1}),r=Object(Be.a)(t,2),i=r[0],l=r[1],c=i.toastMsg,s=i.toastStatus,d=i.confirmToast;Object(o.useEffect)((function(){a instanceof Object&&l(Object(h.a)(Object(h.a)(Object(h.a)({},i),a),{},{initState:a}))}),[]);var u=function(e,a,t){var o,n,r,l,c=i.initState,s=!1;return"confirmPassword"===e&&(s=i.modified),t?l=c.toString()!==t.toString():(Object.keys(c).forEach((function(a){i[a]&&c[a]&&a!==e&&i[a].toString()!==c[a].toString()&&(o=!0)})),n=c[e]&&c[e].toString()!==a,r="password"===e&&i[e]&&""!==a),(n||o||l||r)&&(s=!0),s},m=function(e,a){return l(Object(h.a)(Object(h.a)({},i),{},{confirmToast:!i.confirmToast,toastMsg:e,toastStatus:a}))};return n.a.createElement(n.a.Fragment,null,n.a.createElement(oi,{data:i,handleInput:function(e){var a,t=e.target,o=t.name,n=t.value,r=u(o,n);l(Object(h.a)(Object(h.a)({},i),{},(a={},Object(f.a)(a,o,n),Object(f.a)(a,"modified",r),a)))},handleSubmit:function(){var a=u(null,null,i),t=i.name,o=i.cpf,n=i.email,r=i.password,c=i.confirmPassword,s={name:t,cpf:o,email:n,password:r};r===c?(s.id=i._id,T.a.put("/users/editUser",s).then((function(o){200===o.status&&(m(o.data),e.editUser({name:t,email:n}),setTimeout((function(){l(Object(h.a)(Object(h.a)({},i),{},{initState:i,modified:a,password:void 0,confirmPassword:void 0}))}),1200))})).catch((function(e){return m(e.message,"error")}))):m("Senhas n\xe3o conferem","error")}}),n.a.createElement(ee,{open:d,close:m,msg:c,status:s}))}))),ri=[{field:"placa",label:"Placa",autoComplete:!0,collection:"frota"},{field:"renavam",label:"Renavam",disabled:!0},{field:"nChassi",label:"N\xfamero do Chassi",maxLength:17,disabled:!0},{field:"utilizacao",label:"Utiliza\xe7\xe3o",disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",disabled:!0},{field:"compartilhado",label:"Delegat\xe1rio Compartilhado",itemProp:"razaoSocial",autoComplete:!0,collection:"compartilhados"}],ii=[{title:"Contrato de Compartilhamento",name:"contratoCompartilhamento"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"}],li=t(296),ci=t.n(li),si=function(e){var a=e.data,t=e.redux,o=e.handleInput,r=e.handleFiles,i=e.removeFile,l=e.handleSubmit,c=e.toggleAcceptTerms,s=t.empresas,d=t.compartilhados,u=a.razaoSocial,m=a.selectedEmpresa,p=a.motivoCompartilhamento,f=a.form,v=a.demand,b=a.compartilhamentoRemoved,g=a.termsAccepted,E=a.demandFiles,x=a.fileToRemove,S=ri.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{disabled:!0})})),O=ci.a.termoCiencia__div,y=ci.a.termoCiencia__text;return n.a.createElement(n.a.Fragment,null,n.a.createElement("header",null,n.a.createElement(_a,{links:["Ve\xedculos","/veiculos"],text:"Gerenciar compartilhamento de Ve\xedculos",demand:v}),n.a.createElement(Ye,{empresas:s,data:{razaoSocial:u,demand:v},handleInput:o})),m&&n.a.createElement(n.a.Fragment,null,n.a.createElement("main",{className:"paper",style:{margin:"0.5rem 0"}},n.a.createElement($e,{subtitle:v?"Informa\xe7\xf5es do ve\xedculo e do compartilhamento":"Insira a placa do ve\xedculo para gerenciar seu compartilhamento."}),b&&n.a.createElement("p",{className:"smallFont",style:{color:"red"}},"*Solicita\xe7\xe3o de t\xe9rmino do compartilhamento"),n.a.createElement(We,{form:v?S:ri,data:a,empresas:s,compartilhados:d,handleInput:o}),n.a.createElement("section",{className:"flexColumn",style:{margin:"0 6rem"}},n.a.createElement(co,{label:b?" Motivo do t\xe9rmino do compartilhamento":"Motivo do compartilhamento",name:"motivoCompartilhamento",id:"motivoCompartilhamento",disabled:!1,onChange:o,value:p,rows:"2"})),n.a.createElement("section",{className:"flexColumn"},n.a.createElement("div",{style:{margin:"3rem 0 0 0"}},n.a.createElement($e,{subtitle:v?"Documentos":"Anexe os arquivos solicitados.",style:{margin:0}})),n.a.createElement("div",{className:"flex",style:{margin:"0 0 0 6rem"}},v?n.a.createElement(Da,{demandFiles:E,form:ii,files:f,collection:"vehicleDocs"}):ii.map((function(e,a){var t=e.name,o=e.title;return n.a.createElement(pa,{key:a,name:t,formData:f,dropDisplay:"Clique ou arraste para anexar o ".concat(o," "),handleFiles:r,removeFile:i,fileToRemove:x,style:{width:"490px",marginRight:0===a?"12px":0}})})))),n.a.createElement("section",{className:O},n.a.createElement(Xe.a,{control:n.a.createElement(Ge.a,{checked:!0===g,onChange:function(){return c()},value:g}),label:n.a.createElement("span",{className:y},"Estou ciente de que a utiliza\xe7\xe3o de ve\xedculos de terceiros \xe9 autorizada desde que o ve\xedculo seja cadastrado na Superintend\xeancia de Transporte Intermunicipal, apresentando o Certificado de Registro da SEINFRA vigente,  e com as caracter\xedsticas necess\xe1rias para utiliza\xe7\xe3o naquela linha.")}))),n.a.createElement("footer",null,n.a.createElement(Oo,{label:v?"Aprovar":"Enviar",onClick:function(){return v?l(!0):l()},disabled:!v&&!g}),v&&n.a.createElement(Oo,{label:"Indeferir",color:"secondary",onClick:function(){return l(!1)}}))))},di=ce(["veiculos","empresas","compartilhados","getFiles/vehicleDocs"],(function(e){var a,t,r=e.redux,i=r.empresas,l=r.compartilhados,c=r.veiculos,s=r.vehicleDocs,d=Object(o.useState)({confirmToast:!1,compartilhadoAtual:null,termsAccepted:!1}),u=Object(Be.a)(d,2),m=u[0],p=u[1],v=null===e||void 0===e||null===(a=e.location)||void 0===a||null===(t=a.state)||void 0===t?void 0:t.demand;Object(o.useEffect)((function(){var e;if(i&&1===i.length&&p(Object(h.a)(Object(h.a)({},m),{},{selectedEmpresa:i[0],razaoSocial:null===(e=i[0])||void 0===e?void 0:e.razaoSocial,frota:c})),null===v||void 0===v?void 0:v.history){var a,t=v.empresaId,o=v.veiculoId,n=v.history.length&&v.history[0],r=n.motivoCompartilhamento,l=n.compartilhado,d=n.compartilhadoId,u=n.files,f=n.compartilhamentoRemoved,b=i.find((function(e){return e.codigoEmpresa===t})),g=c.filter((function(e){return e.codigoEmpresa===t})).find((function(e){return e.veiculoId===o}));u&&(a=s.filter((function(e){return u.includes(e.id)}))),p(Object(h.a)(Object(h.a)(Object(h.a)({},m),g),{},{selectedEmpresa:b,demand:v,demandFiles:a,razaoSocial:b.razaoSocial,motivoCompartilhamento:r,compartilhado:l,compartilhadoId:d,compartilhamentoRemoved:f}))}return function(){}}),[i,v]);var b=function(){var e=Object(C.a)(j.a.mark((function e(a){var t,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=m.form,o=Ie(a,t),p(Object(h.a)(Object(h.a)({},m),o));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),g=function(){var e={},a={};ri.forEach((function(a){var t=a.field;Object.assign(e,Object(f.a)({},t,void 0))})),i&&1===i.length&&(a=Object(h.a)(Object(h.a)({},i[0]),{},{selectedEmpresa:i[0]})),p(Object(h.a)(Object(h.a)(Object(h.a)({},e),{},{razaoSocial:"",selectedEmpresa:void 0,form:void 0,fileToRemove:void 0},a),{},{motivoCompartilhamento:""}))},E=function(e){return p(Object(h.a)(Object(h.a)({},m),{},{confirmToast:!m.confirmToast,toastMsg:e}))};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement(si,{redux:e.redux,data:m,handleInput:function(e){var a=e.target,t=a.name,o=a.value;switch(t){case"razaoSocial":var n=i.find((function(e){return e.razaoSocial===o}));if(n){var r=c.filter((function(e){return e.codigoEmpresa===n.codigoEmpresa}));p(Object(h.a)(Object(h.a)({},m),{},Object(f.a)({selectedEmpresa:n,frota:r,razaoSocial:n.razaoSocial},t,o)))}else p(Object(h.a)(Object(h.a)({},m),{},Object(f.a)({},t,o)));break;case"placa":var s=c.find((function(e){return e.placa===o})),d=(null===s||void 0===s?void 0:s.compartilhado)||"";p(s?Object(h.a)(Object(h.a)(Object(h.a)({},m),s),{},Object(f.a)({compartilhadoAtual:d},t,o)):Object(h.a)(Object(h.a)({},m),{},Object(f.a)({compartilhadoAtual:void 0},t,o)));break;case"compartilhado":var u=l.find((function(e){return e.razaoSocial===o&&""!==o}));if(u){var v=u.codigoEmpresa,b=u.razaoSocial;p(Object(h.a)(Object(h.a)({},m),{},Object(f.a)({compartilhadoId:v,compartilhado:b,compartilhamentoRemoved:!1},t,o)))}else if(o)p(Object(h.a)(Object(h.a)({},m),{},Object(f.a)({},t,o)));else{var g=m.compartilhadoAtual&&!o;p(Object(h.a)(Object(h.a)({},m),{},Object(f.a)({compartilhadoId:void 0,compartilhado:void 0,compartilhamentoRemoved:g},t,o)))}break;default:p(Object(h.a)(Object(h.a)({},m),{},Object(f.a)({},t,o)))}},handleFiles:function(e,a){if(e&&e[0]){var t,o=Object(h.a)(Object(h.a)({},m),{},Object(f.a)({},a,e[0])),n=we(e,o,ii);p(Object(h.a)(Object(h.a)(Object(h.a)({},m),n),{},(t={},Object(f.a)(t,a,e[0]),Object(f.a)(t,"fileToRemove",null),t)))}},removeFile:b,handleSubmit:function(a){var t;if(Ve(function(e){var a,t=e.demand,o=e.approved,n=m.selectedEmpresa,r=m.compartilhadoId,i=m.compartilhado,l=m.motivoCompartilhamento,c=m.info,s=m.form,d=m.veiculoId,u=m.compartilhamentoRemoved,p=n.codigoEmpresa;t||(a={history:{info:"".concat(u?"Motivo do t\xe9rmino do compartilhamento":"Motivo do compartilhamento",": ").concat(l),motivoCompartilhamento:l,files:s,compartilhadoId:r,compartilhado:i,compartilhamentoRemoved:u},metadata:{veiculoId:d},empresaId:p,veiculoId:d,historyLength:0,approved:o},!1===o&&(a.declined=!0));t&&!1===o&&(a={id:t.id,empresaId:t.empresaId,history:{info:c},declined:!0});t&&!0===o&&(a={id:t.id,veiculoId:d,demandFiles:m.demandFiles,history:{},approved:o});return a}({demand:v,approved:a})).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),a){var o=m.compartilhadoId;o||(o="NULL");var n=T.a.create({baseURL:"/api"}),r={table:"veiculos",tablePK:"veiculo_id",id:v.veiculoId,requestObject:{veiculo_id:v.veiculoId,compartilhado_id:o}};n.put("/updateVehicle",r).catch((function(e){return console.log(e)})).then((function(e){return console.log(e)})),t="Compartilhamento de ve\xedculo aprovado."}else!1===a?t="Solicita\xe7\xe3o indeferida.":a||(t="Solicita\xe7\xe3o enviada.");v?setTimeout((function(){e.history.push("/solicitacoes")}),1500):setTimeout((function(){g()}),900),E(t)},toggleAcceptTerms:function(){return p(Object(h.a)(Object(h.a)({},m),{},{termsAccepted:!m.termsAccepted}))}}),n.a.createElement(ee,{open:m.confirmToast,close:E,msg:m.toastMsg})))})),ui=function(e){var a=e.user;return n.a.createElement(O.d,null,n.a.createElement(O.b,{exact:!0,path:"/",component:ue}),n.a.createElement(O.b,{path:"/veiculos",exact:!0,component:xe}),n.a.createElement(O.b,{path:"/veiculos/cadastro",exact:!0,component:nt}),n.a.createElement(O.b,{path:"/veiculos/altDados",exact:!0,component:dt}),n.a.createElement(O.b,{path:"/veiculos/seguros",exact:!0,component:jt}),n.a.createElement(O.b,{path:"/veiculos/compartilhamento",exact:!0,component:di}),n.a.createElement(O.b,{path:"/veiculos/laudos",exact:!0,component:fo}),n.a.createElement(O.b,{path:"/veiculos/baixaVeiculo",exact:!0,component:Io}),n.a.createElement(O.b,{path:"/veiculos/config",exact:!0,component:Jo}),n.a.createElement(O.b,{path:"/consultas",component:qn}),n.a.createElement(O.b,{path:"/empresas",exact:!0,component:Gn}),n.a.createElement(O.b,{path:"/altContrato",exact:!0,component:Kr}),n.a.createElement(O.b,{path:"/empresas/cadastro",component:Wn}),n.a.createElement(O.b,{path:"/empresas/socios",component:hr}),n.a.createElement(O.b,{path:"/empresas/procuradores",component:vr}),n.a.createElement(O.b,{path:"/relatorios",component:jr}),n.a.createElement(O.b,{path:"/crv",component:Nn}),n.a.createElement(O.b,{path:"/solicitacoes",exact:!0,component:Lr}),n.a.createElement(O.b,{path:"/solicitacoes/cadastro",exact:!0,component:nt}),n.a.createElement(O.b,{path:"/solicitacoes/altDados",exact:!0,component:dt}),n.a.createElement(O.b,{path:"/solicitacoes/seguros",exact:!0,component:jt}),n.a.createElement(O.b,{path:"/solicitacoes/compartilhamento",exact:!0,component:di}),n.a.createElement(O.b,{path:"/solicitacoes/baixaVeiculo",exact:!0,component:Io}),n.a.createElement(O.b,{path:"/solicitacoes/laudos",exact:!0,component:fo}),n.a.createElement(O.b,{path:"/solicitacoes/altContrato",exact:!0,component:Kr}),n.a.createElement(O.b,{path:"/solicitacoes/socios",exact:!0,component:hr}),n.a.createElement(O.b,{path:"/solicitacoes/procuradores",exact:!0,component:vr}),n.a.createElement(O.b,{path:"/userAuth",exact:!0,component:Zr}),n.a.createElement(O.b,{path:"/editAccount",exact:!0,component:ni}),n.a.createElement(O.b,{path:"/parametros"},"admin"===a.role?n.a.createElement(Yo,null):n.a.createElement(O.a,{to:"/"})),n.a.createElement(O.b,{path:"/users"},"admin"===a.role?n.a.createElement(ai,null):n.a.createElement(O.a,{to:"/"})))},mi=t(601);var pi=Object(c.c)((function(e){return Object(h.a)({},e)}))((function(e){var a=oe("loggedIn").length>0,t=e.user;return a?n.a.createElement("div",{className:"app"},n.a.createElement(mi.a,{maxWidth:"lg",style:{minHeight:"100vh"}},n.a.createElement(S.a,null,n.a.createElement(pn,null),n.a.createElement(ui,{user:t})),n.a.createElement(fn,null))):n.a.createElement(Zr,null)})),fi=Object(l.a)(d.a,m.a,p.a)(l.e)(x,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var vi=function(){return n.a.createElement(c.a,{store:fi},n.a.createElement(pi,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(vi,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[436,1,2]]]);
//# sourceMappingURL=main.acf4886f.chunk.js.map