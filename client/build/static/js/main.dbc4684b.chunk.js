(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{160:function(e,a,t){},373:function(e,a,t){},399:function(e,a){},400:function(e,a,t){},434:function(e,a,t){e.exports=t(559)},486:function(e,a){},489:function(e,a,t){},491:function(e,a,t){},492:function(e,a,t){},493:function(e,a,t){},550:function(e,a){},551:function(e,a){},552:function(e,a,t){},553:function(e,a,t){},555:function(e,a,t){},556:function(e,a,t){},557:function(e,a,t){},558:function(e,a,t){},559:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(25),i=t.n(o),l=t(52),c=t(49),s=t(410),d=t.n(s),u=t(411),m=t.n(u),p=t(412),f=t(8),v=t(22),h=t(2),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"GET_DATA":return Object(h.a)(Object(h.a)({},e),n);case"INSERT_DATA":var r=n.collection,o=n.data;if(e[r]&&o){var i=Object(v.a)(e[r]);return o.forEach((function(e){r.match("logs")?i.push(e):i.unshift(e)})),Object(h.a)(Object(h.a)({},e),{},Object(f.a)({},r,i))}return e;case"UPDATE_DATA":var l=n.collection,c=n.data,s=n.id;if(e[l]&&c){var d=e[l].map((function(e){return c.forEach((function(a){e[s]!==a[s]&&e[s].toString()!==a[s].toString()||(e=a)})),e}));return Object(h.a)(Object(h.a)({},e),{},Object(f.a)({},l,d))}return e;case"UPDATE_COLLECTION":var u=n.data,m=n.collection;return Object(h.a)(Object(h.a)({},e),{},Object(f.a)({},m,u));case"REMOVE_FROM_INSURANCE":var p=n.apolice,b=n.placaIndex,g=n.vehicleIndex;if(e.seguros){var E=Object(v.a)(e.seguros),x=E.find((function(e){return e.apolice===p})),S=E.findIndex((function(e){return e.apolice===p}));return x.placas.splice(b,1),x.veiculos.splice(g,1),E[S]=x,Object(h.a)(Object(h.a)({},e),{},{seguros:E})}return e;case"DELETE_ONE":var y=n.tablePK,O=n.collection;if(e[O]){var j=n.id,w=Object(v.a)(e[O]);if(!j)return;O.match("Docs")||"users"===O||(j=Number(j)),"laudos"===O&&(j=j.toString());var C=w.find((function(e){return e[y]===j})),k=w.findIndex((function(e){return e[y]===C[y]}));if(-1===k)return;return w.splice(k,1),Object(h.a)(Object(h.a)({},e),{},Object(f.a)({},O,w))}return e;case"SET_COLOR":return Object(h.a)(Object(h.a)({},e),{},{setColor:a.payload});case"LOADING":return Object(h.a)(Object(h.a)({},e),{},{loading:a.payload});default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"LOG_USER":return Object(h.a)(Object(h.a)({},e),n);case"LOG_USER_OUT":return Object(h.a)(Object(h.a)({},e),{},{user:n});default:return e}},E=Object(l.c)({data:b,user:g}),x=function(e,a){return"LOG_USER_OUT"===a.type&&(e={data:{},user:{}}),E(e,a)},S=t(70),y=t(39),O=t(7),j=t.n(O),w=t(10),C=t(45),k=t(46),D=t(48),I=t(47),N=t(24),A=t.n(N),P=t(14),T=t.n(P),F=function(e,a,t){var n=[],r=[];return e.map((function(e){(null===e||void 0===e?void 0:e.equipamentosId)||(e.equipamentosId=[]),(null===e||void 0===e?void 0:e.acessibilidadeId)||(e.acessibilidadeId=[]),e.equipamentosId.forEach((function(e){a.forEach((function(a){var t=a.id,r=a.item;t===e&&n.push(r)}))})),e.acessibilidadeId.forEach((function(e){t.forEach((function(a){var t=a.id,n=a.item;t===e&&r.push(n)}))}));var o=Object(h.a)(Object(h.a)({},e),{},{equipamentos:n,acessibilidade:r});return n=[],r=[],o}))},z=function(e,a){var t=[];return a.forEach((function(a){e.forEach((function(e){var n=e.id,r=e.item;a===n&&t.push(r)}))})),t},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(){var a=Object(w.a)(j.a.mark((function a(t,n){var r,o,i,l,c,s,d,u,m;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=[],o={},!(e.length>0)){a.next=5;break}return e.forEach((function(e){r.push(T.a.get("/api/".concat(e)))})),a.next=5,Promise.all(r).then((function(e){return e.map((function(e){return A.a.camelizeKeys(e.data)}))})).then((function(a){a.forEach((function(a,t){var n=e[t].replace("getFiles/","").replace("lookUpTable/","").replace("logs/","");n=A.a.camelize(n),Object.assign(o,Object(f.a)({},n,a))}))})).catch((function(e){var a;console.log(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data),o=Object(h.a)(Object(h.a)({},o),{},{sessionExpired:!0})}));case 5:["acessibilidade","equipamentos"].every((function(e){return o.hasOwnProperty(e)}))&&(c=(l=o).acessibilidade,s=l.equipamentos,d=o.veiculos||o.allVehicleFields||(null===(i=n().data)||void 0===i?void 0:i.veiculos),u=F(d,s,c),o.veiculos=u),o.socios&&Array.isArray(o.socios)&&((m=Object(v.a)(o.socios)).forEach((function(e){if(e.empresas&&"string"===typeof e.empresas)if(e.empresas.match("object"))console.log(e);else try{e.empresas=JSON.parse(e.empresas)}catch(a){console.log("invalid socio id"+e.socioId+a.message)}})),o.socios=m),t({type:"GET_DATA",payload:o});case 8:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},M=function(e,a){return function(t,n){var r=A.a.camelizeKeys(e);console.log("\ud83d\ude80 ~ file: dataActions.js ~ line 73 ~ insertData ~ data",r);var o={collection:a,data:r},i=n().data.seguradoras;if("socios"===a&&r.forEach((function(e){if(e.empresas&&"string"===typeof e.empresas)if(e.empresas.match("object"))console.log(e);else try{e.empresas=JSON.parse(e.empresas)}catch(a){console.log("invalid socio id"+e.socioId+a.message)}})),i){if("veiculos"===a&&r[0]){var l,s,d=n().data,u=d.acessibilidade,m=d.equipamentos,p=[],f=[];(null===(l=r[0])||void 0===l?void 0:l.equipamentosId)&&r[0].equipamentosId.forEach((function(e){m.forEach((function(a){var t=a.id,n=a.item;e.toString()===t.toString()&&p.push(n)}))})),(null===(s=r[0])||void 0===s?void 0:s.acessibilidadeId)&&r[0].acessibilidadeId.forEach((function(e){u.forEach((function(a){var t=a.id,n=a.item;e.toString()===t.toString()&&f.push(n)}))})),r[0].equipamentos=p,r[0].acessibilidade=f}if("seguros"===a&&r[0]&&r[0].placas&&1===r[0].placas.length){var v=i.find((function(e){return e.id===r[0].seguradoraId})),h=r[0],b=[],g=[],E=n().data.veiculos,x=E.map((function(e){return e.apolice===h.apolice&&(e.seguradora=v.seguradora,e.dataEmissao=h.dataEmissao,e.vencimento=h.vencimento),e}));E.forEach((function(e){e.apolice===h.apolice&&(b.push(e.placa),g.push(e.veiculoId))})),h.placas=b,h.veiculos=g,h=[h];var S={data:x,collection:"veiculos"};Object(c.b)((function(){t({type:"INSERT_DATA",payload:{data:h,collection:"seguros"}}),t({type:"UPDATE_COLLECTION",payload:S})}))}else t({type:"INSERT_DATA",payload:o})}else t({type:"INSERT_DATA",payload:o})}},q=function(e,a,t){return function(n,r){var o=A.a.camelizeKeys(e);t=A.a.camelize(t);var i=r().data,l=i.equipamentos,c=i.acessibilidade;"veiculos"===a&&l&&c&&(o=F(o,l,c)),n({type:"UPDATE_DATA",payload:{collection:a,data:o,id:t}})}},V=function(e,a,t,n){return function(r,o){var i=o().data[t];if(e&&e[0]&&a){var l=i.filter((function(a){return e.some((function(e){return e===a[n]}))}));l.forEach((function(e){var t=Object.assign({},e.metadata,a);e.metadata=t})),r({type:"UPDATE_DATA",payload:{collection:t,data:l,id:n}})}}},_=function(e,a){return function(t){var n={data:e=A.a.camelizeKeys(e),collection:a};"socios"===a&&e.forEach((function(e){if(e.empresas&&"string"===typeof e.empresas)if(e.empresas.match("object"))console.log(e);else try{e.empresas=JSON.parse(e.empresas)}catch(a){console.log("invalid socio id"+e.socioId+a.message)}})),t({type:"UPDATE_COLLECTION",payload:n})}},R=function(e,a,t){return function(n){a=A.a.camelize(a),n({type:"DELETE_ONE",payload:{id:e,tablePK:a,collection:t}})}},B=function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("img",{src:"/images/loading.gif",alt:"",height:"60px",width:"60px"}),r.a.createElement("p",null," Carregando... "))},U=[{collection:"equipamentos",field:"item",label:"Equipamentos",name:"equipamentosId",table:"equipamentos"},{collection:"acessibilidade",field:"item",label:"Itens de acessibilidade",name:"acessibilidadeId",table:"acessibilidade"},{collection:"marcaCarroceria",field:"marca",label:"Marcas de Carroceria",name:"marcaCarroceria",table:"marca_carroceria"},{collection:"carrocerias",field:"modelo",label:"Modelos de Carroceria",name:"modeloCarroceria",table:"modelo_carroceria"},{collection:"marcaChassi",field:"marca",label:"Marcas de Chassi",name:"marcaChassi",table:"marca_chassi"},{collection:"modelosChassi",field:"modeloChassi",label:"Modelos de Chassi",name:"modeloChassi",table:"modelo_chassi"},{collection:"seguradoras",field:"seguradora",label:"Seguradoras",name:"seguradora",table:"seguradora"},{collection:"empresasLaudo",field:"empresa",label:"Empresas certificadas INMETRO",name:"empresa",table:"empresa_laudo"},{collection:"laudos",table:"laudos"}],Y=t(38),H=t(3),J=t(148),K=t(357),W=t(560),$=t(358),G=t(582),X=t(356),Z=Object(X.a)((function(e){return{success:{backgroundColor:J.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:K.a[700]},message:{display:"flex",alignItems:"center"}}}));function Q(e){var a=Z(),t=e.className,n=e.message,o=(e.onClose,e.variant),i=Object(Y.a)(e,["className","message","onClose","variant"]);return r.a.createElement(W.a,Object.assign({className:Object(H.a)(a[o],t),"aria-describedby":"client-snackbar",message:n&&r.a.createElement("span",{id:"client-snackbar",className:a.message},r.a.createElement($.a,null,"error"===e.variant?"close":"warning"===e.variant?"error_outlined":"check"),"    ",n)},i))}function ee(e){return r.a.createElement("div",null,r.a.createElement(G.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.open,autoHideDuration:1500,onClose:e.close},r.a.createElement(Q,{variant:e.status||"success",message:e.msg})))}function ae(e,a){var t=new Date;t.setTime(t.getTime()+36e5),t=t.toUTCString(),document.cookie="".concat(e,"=").concat(a,"; expires=").concat(t,"; path=/")}function te(e){var a=new Date;a.setTime(10),document.cookie="".concat(e,"=; expires=").concat(a.toUTCString(),"; path=/")}function ne(e){for(var a=e+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var r=t[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(a))return r.substring(a.length,r.length)}return""}var re,oe=function(e){return function(a){a({type:"LOG_USER",payload:e})}},ie=function(e){return function(){var e=Object(w.a)(j.a.mark((function e(a,t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/auth/logout",{method:"GET",credentials:"same-origin"}).then((function(e){te("loggedIn")})).catch((function(e){return console.log(e)}));case 2:a({type:"LOG_USER_OUT"});case 3:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()},le=t(465),ce=function(e,a){var t=[];["logs","parametros"].forEach((function(a){e.includes(a)||e.push(a)})),t=e.map((function(e){return e.replace("getFiles/","").replace("lookUpTable/","")}));var n=function(n){Object(D.a)(i,n);var o=Object(I.a)(i);function i(){var e;Object(C.a)(this,i);for(var a=arguments.length,t=new Array(a),n=0;n<a;n++)t[n]=arguments[n];return(e=o.call.apply(o,[this].concat(t))).state={confirmToast:!1},e.quitFn=function(a){a.ctrlKey&&17===a.keyCode&&e.props.logUserOut()},e.getUser=Object(w.a)(j.a.mark((function a(){var t,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,T.a.get("/getUser");case 2:t=a.sent,(n=null===t||void 0===t?void 0:t.data)&&e.props.logUser(n);case 5:case"end":return a.stop()}}),a)}))),e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e}return Object(k.a)(i,[{key:"componentDidMount",value:function(){var a=Object(w.a)(j.a.mark((function a(){var t,n,r=this;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(document.addEventListener("keypress",(function(e){return r.quitFn(e)})),t=this.props.redux,n=[],e.forEach((function(e){var a=e.replace("getFiles/","").replace("lookUpTable/","").replace("logs/","");t[a]&&t[a][0]||n.push(e)})),!n[0]){a.next=7;break}return a.next=7,this.props.getData(n);case 7:re||(re=le("ws://localhost:3001")),re.on("connect",(function(){var e;return re.emit("userDetails",null===(e=r.props)||void 0===e?void 0:e.user)})),re.on("insertVehicle",(function(e){return r.props.insertData(e,"veiculos")})),re.on("insertInsurance",(function(e){return r.props.insertData(e,"seguros")})),re.on("insertEmpresa",(function(e){return r.props.insertData(e,"empresas")})),re.on("insertSocios",(function(e){return r.props.insertData(e,"socios")})),re.on("insertProcuradores",(function(e){return r.props.insertData(e,"procuradores")})),re.on("insertElements",(function(e){var a=e.insertedObjects,t=e.collection;return r.props.insertData(a,t)})),re.on("addElements",(function(e){var a=e.insertedObjects,t=e.table,n=U.find((function(e){return e.table===t})).collection;r.props.insertData(a,n)})),re.on("updateVehicle",(function(e){return r.props.updateData(e,"veiculos","veiculoId")})),re.on("updateInsurance",(function(e){return r.props.updateCollection(e,"seguros")})),re.on("updateSocios",(function(e){return r.props.updateCollection(e,"socios")})),re.on("updateProcuradores",(function(e){var a=e.collection,t=e.data,n=e.primaryKey;return r.props.updateData(t,a,n)})),re.on("updateLogs",(function(e){return r.props.updateData(e,"logs","id")})),re.on("updateAny",(function(e){var a=e.updatedObjects,t=e.collection,n=e.primaryKey;return r.props.updateData(a,t,n)})),re.on("updateDocs",(function(e){var a=e.ids,t=e.metadata,n=e.collection,o=e.primaryKey;return r.props.updateDocs(a,t,n,o)})),re.on("updateElements",(function(e){var a=e.collection,t=e.updatedCollection;return r.props.updateCollection(t,a)})),re.on("deleteOne",(function(e){var a=e.id,t=e.tablePK,n=e.collection;console.log({id:a,tablePK:t,collection:n}),r.props.deleteOne(a,t,n)})),re.on("insertFiles",(function(e){var a=e.insertedObjects,t=e.collection;r.props.insertData(a,t)}));case 26:case"end":return a.stop()}}),a,this)})));return function(){return a.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){document.removeEventListener("keypress",this.quitFn),re||(re=le(":3001"));["insertVehicle","insertInsurance","insertEmpresa","insertSocios","insertFiles","addElements","insertElements","insertProcuradores","updateVehicle","updateInsurance","updateSocios","updateLogs","deleteOne","updateDocs","updateAny"].forEach((function(e){return re.off(e)})),re.disconnect(),re=void 0}},{key:"render",value:function(){var e=this;return ne("loggedIn").length>0&&!this.props.redux.sessionExpired?(this.props.user.name||this.getUser(),0!==(t=t.map((function(e){return A.a.camelize(e)}))).length&&t.every((function(a){return e.props.redux.hasOwnProperty(a)}))?r.a.createElement(a,this.props):r.a.createElement(B,null)):(setTimeout((function(){e.props.history.push("/"),e.props.logUserOut()}),1200),r.a.createElement(ee,{open:!0,close:this.toast,msg:"Sess\xe3o expirada.",status:"error"}))}}]),i}(r.a.Component);return Object(c.c)((function(e){return{redux:Object(h.a)({},e.data),user:e.user}}),(function(e){return Object(l.b)({getData:L,insertData:M,updateData:q,updateCollection:_,deleteOne:R,updateDocs:V,logUser:oe,logUserOut:ie},e)}))(n)},se=(t(489),[{title:"Ve\xedculos",date:"07/Nov",description:"Cadastre e altere os dados do ve\xedculo ou solicite sua baixa",link:"/veiculos",imageUrl:"/images/vehicles.jpg"},{title:"Empresas",date:"07/Nov",description:"Cadastre e gerencie dados de empresas, s\xf3cios e procuradores",link:"/empresas",imageUrl:"/images/empresas12.jpg"},{title:"Consultas",date:"03/Dez",description:"Consulte e gerencie dados de ve\xedculos, seguros e empresas",link:"/consultas",imageUrl:"/images/consultas2.jpg"},{title:"Relat\xf3rios",date:"03/Dez",description:"Acompanhe a situa\xe7\xe3o dos ve\xedculos por meio de gr\xe1ficos e tabelas",link:"/relatorios",imageUrl:"/images/relatorios.jpg"}]),de={nomeSistema:"Sistema de Cadastro do Transporte Intermunicipal de Minas Gerais",siglaSistema:"CadTI - MG"};var ue=ce(["logs","parametros"],(function(e){var a=e.redux.parametros[0].nomes;a&&(de.nomeSistema=null===a||void 0===a?void 0:a.sistema,de.siglaSistema=null===a||void 0===a?void 0:a.siglaSistema);var t=de.nomeSistema,n=de.siglaSistema;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{minHeight:"83vh",width:"100%",height:"auto"}},r.a.createElement("main",{className:"homeMainPost"},r.a.createElement("h1",null,n),r.a.createElement("h2",null,t)),r.a.createElement("section",{className:"homeCardsContainer"},se.map((function(e,a){var t=e.link,n=e.title,o=e.description,i=e.imageUrl;return r.a.createElement("div",{key:a,className:"homeCard"},r.a.createElement(S.b,{to:t,style:{textDecoration:"none"}},r.a.createElement("div",{className:"homeCard"},r.a.createElement("div",{className:"homeCardText"},r.a.createElement("h6",{className:"homeCardText",style:{fontWeight:500}},n),r.a.createElement("p",{className:"homeCardText"},o)),r.a.createElement("div",{className:"homeImage"},r.a.createElement("img",{src:i,alt:n,className:"homeImage"})))))})))))})),me=(t(160),[{title:"Cadastro de Ve\xedculos",description:"Cadastrar um novo ve\xedculo no sistema",imageUrl:"/images/add_new.jpg",link:"/cadastro"},{title:"Altera\xe7\xe3o de dados",description:"Alterar dados de um ve\xedculo",link:"/altDados",imageUrl:"/images/pen.png"},{title:"Seguros",description:"Cadastro e atualiza\xe7\xe3o de seguro",link:"/seguros",imageUrl:"/images/car_insurance2.png"},{title:"Laudos",description:"Laudos de seguran\xe7a veicular",link:"/laudos",imageUrl:"/images/laudos.png"},{title:"Baixa",description:"Baixa de ve\xedculos",link:"/baixaVeiculo",imageUrl:"/images/remove_doc.png"},{title:"Configura\xe7\xf5es",description:"Chassi, carrocerias, seguradoras, etc",link:"/config",imageUrl:"/images/config2.jpg"}]);var pe=ce([],(function(e){var a=e.match,t=e.user;return r.a.createElement("div",null,r.a.createElement("section",{className:"jumbotron"},r.a.createElement("h1",null,"Ve\xedculos"),r.a.createElement("p",null,"Selecione uma das op\xe7\xf5es abaixo.")),r.a.createElement("section",{className:"card"},me.map((function(e,n){var o=e.title,i=e.link,l=e.imageUrl,c=e.description;return"admin"!==(null===t||void 0===t?void 0:t.role)&&"/config"===i?null:r.a.createElement(S.b,{to:a.url+i,key:n,className:"card__container"},r.a.createElement("span",{className:"card__image"}," ",r.a.createElement("img",{src:l,alt:o})," "),r.a.createElement("div",{className:"card__text"},r.a.createElement("h3",null,o),r.a.createElement("p",null," ",c)))}))))})),fe=t(80),ve=function(e,a){var t,n,r=a.veiculos,o=a.empresas,i=a.vehicleDocs,l=a.equipamentos,c=a.acessibilidade,s=null===e||void 0===e?void 0:e.history,d=r.find((function(a){return a.veiculoId===e.veiculoId})),u=JSON.parse(JSON.stringify(d)),m=o.find((function(a){return a.razaoSocial===(null===e||void 0===e?void 0:e.empresa)})),p=null===m||void 0===m?void 0:m.razaoSocial,f=p,v=Object(h.a)({},d)||null;if(Array.isArray(s)&&(n=null===(t=s.reverse().find((function(e){return e.hasOwnProperty("alteracoes")})))||void 0===t?void 0:t.alteracoes),n){Object.keys(n).forEach((function(e){return v[e]=n[e]}));var b=n,g=b.equipamentosId,E=b.acessibilidadeId;g&&(v.equipamentos=z(l,g)),E&&(v.acessibilidade=z(c,E))}var x,S=[],y=[],O={};s.filter((function(e){return e.files})).map((function(e){return e.files})).forEach((function(e){e.forEach((function(e){return S.push(e)}))})),x=i.filter((function(e){return-1!==S.indexOf(e.id)}));var j=[];return x.forEach((function(e){var a=e.metadata.fieldName;j.includes(a)?O[a].push(e):(j.push(a),O[a]=[e])})),Object.keys(O).forEach((function(e){var a;a=O[e].reduce((function(e,a){return new Date(e.uploadDate)>new Date(a.uploadDate)?e:a})),y.push(a),a=[]})),Object(h.a)(Object(h.a)({},v),{},{originalVehicle:u,delegatario:f,razaoSocial:p,selectedEmpresa:m,demand:e,demandFiles:y,alteracoes:n,getUpdatedValues:he})};function he(e,a){return Object.keys(a).forEach((function(t){a[t]&&e[t]&&("equipamentosId"!==t&&"acessibilidadeId"!==t||a[t].sort((function(e,a){return e-a})),a[t].toString()===e[t].toString()&&delete a[t]),""!==a[t]&&"null"!==a[t]&&a[t]||delete a[t]})),a}var be=t(79),ge=function(e){if(e[0].size>3145728)return alert("Arquivo excedeu o limite permitido (3MB)"),!0},Ee=function(e,a,t){var n=new FormData;if(e&&e[0]){if(ge(e))return;return t.forEach((function(e){for(var t in console.log(e.name),a)t.match(e.name)&&a[e.name]&&n.set(e.name,a[e.name])})),{form:n}}},xe=function(){var e=Object(w.a)(j.a.mark((function e(a){var t,n,r,o,i,l,c,s,d,u,m,p,f=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:{},o=f.length>2?f[2]:void 0,i=f.length>3?f[3]:void 0,!(a instanceof FormData)){e.next=13;break}s=new FormData,r.tempFile=!o,console.log(r),s.append("metadata",JSON.stringify(r)),d=Object(be.a)(a);try{for(d.s();!(u=d.n()).done;)m=u.value,s.set(m[0],m[1]),console.log("\ud83d\ude80 ~ file: handleFiles.js ~ line 49 ~ postFilesReturnIds ~ pair[0], pair[1]",m[0],m[1])}catch(v){d.e(v)}finally{d.f()}return e.next=12,T.a.post("/api/".concat(i),s);case 12:l=e.sent;case 13:if(!(null===(t=l)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.file)){e.next=19;break}return p=l.data.file,c=p.map((function(e){return e.id})),e.abrupt("return",c);case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Se=function(){var e=Object(w.a)(j.a.mark((function e(a,t){var n,r,o,i,l,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.files,r=a.demandFiles,o={tempFile:!1},(null===a||void 0===a?void 0:a.metadata)instanceof Object&&(o=Object.assign(a.metadata,o)),r&&r[0])i=r.map((function(e){return e.id}));else if(n instanceof FormData){l=Object(be.a)(n);try{for(s=function(){var e=c.value;r.forEach((function(a,t){var n;e[0]===(null===a||void 0===a||null===(n=a.metadata)||void 0===n?void 0:n.fieldName)&&r.splice(t,1)}))},l.s();!(c=l.n()).done;)s()}catch(d){l.e(d)}finally{l.f()}i=r.map((function(e){return e.id}))}return e.next=6,T.a.put("/api/updateFilesMetadata",{ids:i,collection:t,metadata:o}).then((function(e){return console.log(e.data)}));case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),ye=function(e,a){var t=new FormData;if(a instanceof FormData&&a.has(e)){var n,r=Object(be.a)(a);try{for(r.s();!(n=r.n()).done;){var o=n.value;t.set(o[0],o[1])}}catch(l){r.e(l)}finally{r.f()}t.delete(e);var i=Object(f.a)({fileToRemove:e,form:t},e,void 0);return Array.from(a.keys(),(function(e){return e})).length<=1&&(a.has("veiculoId")||a.has("empresaId"))?Object(f.a)({fileToRemove:void 0,form:void 0},e,void 0):i}},Oe=t(18),je=t.n(Oe),we=function(e,a){var t=document.querySelectorAll("p"),n=document.querySelectorAll("input"),r=[],o=[],i="Favor verificar o preenchimento dos seguintes campos: ";return t&&t.forEach((function(e){if("Valor inv\xe1lido"===e.textContent||"\u2718"===e.textContent){var a=e.parentNode.querySelectorAll("label");r.push(a[0])}})),n&&!a&&n.forEach((function(e){if("date"===e.type&&!je()(e.value,"YYYY-MM-DD",!0).isValid()){var a=e.parentNode.previousSibling;r.push(a)}})),r[0]?(r.forEach((function(e){return o.push(e.textContent)})),o.forEach((function(e){return i+=e+", "})),i=i.replace("(kg)","").replace("(cm)","").slice(0,-2)+".",e?{openAlertDialog:!0,alertType:"inputError",customMsg:i,errors:o}:o):null},Ce=function(e,a){var t;if(e)return(!a.errorHandler||!a.errorHandler(e))&&(!(!e||!a.errorHandler||a.errorHandler(e))||((null===(t=e)||void 0===t?void 0:t.length)<(null===a||void 0===a?void 0:a.minLength)||("number"===a.type?e>a.max||e<a.min:("string"!==typeof e&&(e=e.toString()),!!a.pattern&&null===e.match(a.pattern)))))},ke=function(e,a){var t,n;if(e)return a.errorHandler&&a.errorHandler(e)?"\u2713":e&&a.errorHandler&&!a.errorHandler(e)||(null===(t=e)||void 0===t?void 0:t.length)<(null===a||void 0===a?void 0:a.minLength)?"\u2718":(null===(n=e)||void 0===n?void 0:n.length)>=(null===a||void 0===a?void 0:a.minLength)?"\u2713":("string"!==typeof e&&(e=e.toString()),e>a.max||e<a.min?"Valor inv\xe1lido":null===e.match(a.pattern)?"\u2718":a.pattern&&null!==e.match(a.pattern)?"\u2713":" ")},De={collection:"logs",docs:"vehicleDocs",primaryKey:"veiculoId"},Ie=De.collection,Ne=De.docs,Ae=De.primaryKey,Pe=[{subject:"Cadastro de ve\xedculo",path:"/solicitacoes/cadastro",requestAction:"Cadastro de ve\xedculo solicitado",responseAction:"Pend\xeancias para o cadastro do ve\xedculo",concludedAction:"Ve\xedculo cadastrado",collection:Ie,docs:Ne,primaryKey:Ae},{subject:"Reativa\xe7\xe3o de ve\xedculo",path:"/solicitacoes/cadastro",requestAction:"Reativa\xe7\xe3o de ve\xedculo solicitada",responseAction:"Pend\xeancias para a reativa\xe7\xe3o do ve\xedculo",concludedAction:"Ve\xedculo reativado",collection:Ie,docs:Ne,primaryKey:Ae},{subject:"Altera\xe7\xe3o de dados do ve\xedculo",path:"/solicitacoes/altDados",requestAction:"Altera\xe7\xe3o de dados de ve\xedculo solicitada",responseAction:"Pend\xeancias para a altera\xe7\xe3o de dados veicular",concludedAction:"Dados do ve\xedculo alterados",collection:Ie,docs:Ne,primaryKey:Ae},Object(h.a)(Object(h.a)({},De),{},{subject:"Cadastro/altera\xe7\xe3o de seguro",path:"/solicitacoes/seguros",requestAction:"Cadastro de seguro solicitado",responseAction:"Pend\xeancias para o cadastro do seguro",concludedAction:"Seguro cadastrado",primaryKey:"id",collection:Ie,docs:Ne}),Object(h.a)(Object(h.a)({},De),{},{subject:"Cadastro de laudo de seguran\xe7a veicular",collection:"logs",path:"/solicitacoes/laudos",requestAction:"Cadastro do laudo solicitado",responseAction:"Pend\xeancias para o cadastro do laudo",concludedAction:"Laudo veicular cadastrado"}),{subject:"Baixa de ve\xedculo",path:"/solicitacoes/baixaVeiculo",requestAction:"Baixa de ve\xedculo solicitada",collection:Ie,docs:Ne,primaryKey:Ae},{subject:"Configura\xe7\xf5es de Ve\xedculo",collection:"logs",path:"/veiculos/config"},{subject:"Consultas",path:"/consultas"},{subject:"Cadastro de empresa",collection:"empresaLogs",path:"/empresas/cadastro"},{subject:"Altera\xe7\xe3o no quadro/dados de s\xf3cios",requestAction:"Altera\xe7\xe3o no quadro/dados de s\xf3cios solicitada",concludedAction:"Altera\xe7\xe3o de s\xf3cios cadastrada",path:"/solicitacoes/socios",docs:"empresaDocs",primaryKey:"empresaId",collection:Ie},{subject:"Altera\xe7\xe3o estatut\xe1ria",requestAction:"Altera\xe7\xe3o estatut\xe1ria solicitada",responseAction:"Pend\xeancias para a altera\xe7\xe3o estatut\xe1ria",concludedAction:"Altera\xe7\xe3o estatut\xe1ria cadastrada",path:"/solicitacoes/altContrato",docs:"empresaDocs",primaryKey:"empresaId",collection:Ie},{subject:"Cadastro de procura\xe7\xf5es/procuradores",collection:Ie,path:"/solicitacoes/procuradores",docs:"empresaDocs",primaryKey:"empresaId",requestAction:"Cadastro de procura\xe7\xe3o solicitado",responseAction:"Procura\xe7\xe3o indeferida",concludedAction:"Procura\xe7\xe3o cadastrada"}];function Te(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(w.a)(j.a.mark((function e(a){var t,n,r,o,i,l,c,s,d,u,m,p,f,v,h,b,g,E,x,S,y,O,w,C,k;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=window.location.pathname,l=(null===(t=Jo.getState())||void 0===t||null===(n=t.user)||void 0===n?void 0:n.name)||"Usu\xe1rio n\xe3o identificado",c=a.empresaId,(s=JSON.parse(JSON.stringify(Pe))).forEach((function(e,a){return e.path=Pe[a].path.replace("/veiculos","").replace("/solicitacoes","").replace("/empresas","")})),d="logs",u=null===a||void 0===a?void 0:a.historyLength,m={user:l,createdAt:new Date},p=s.find((function(e){return i.match(e.path)})),f=JSON.parse(JSON.stringify(a)),a.subject&&a.subject.match("Reativa\xe7\xe3o")&&(p=s.find((function(e){return e.subject===a.subject}))),v="vehicleDocs",h="vehicleUpload",a.veiculoId||(v="empresaDocs",h="empresaUpload"),b=Object.assign(a.history,m),f.history=b||{},(u||0===u)&&(u%2===0||0===u?((null===a||void 0===a||null===(g=a.history)||void 0===g?void 0:g.action)||(f.history.action=null===(E=p)||void 0===E?void 0:E.requestAction),f.status="Aguardando an\xe1lise"):((null===a||void 0===a||null===(x=a.history)||void 0===x?void 0:x.action)||(f.history.action=null===(S=p)||void 0===S?void 0:S.responseAction),f.status="Pend\xeancias")),(null===a||void 0===a?void 0:a.id)&&f.veiculoId&&delete f.veiculoId,delete f.historyLength,a.id&&!a.subject||(f.subject=(null===a||void 0===a?void 0:a.subject)||(null===(r=p)||void 0===r?void 0:r.subject)),!a.declined){e.next=20;break}return f.history.action="Solicita\xe7\xe3o indeferida",f.status="Solicita\xe7\xe3o indeferida",f.completed=!0,y=T.a.post("/api/logs",{log:f,collection:d,codigoEmpresa:c}),e.abrupt("return",y);case 20:return a.approved&&!a.declined&&(f.history.action=(null===(O=p)||void 0===O?void 0:O.concludedAction)||"Solicita\xe7\xe3o conclu\xedda",f.status="Solicita\xe7\xe3o conclu\xedda",f.completed=!0,Se(a,v)),e.next=23,xe(null===a||void 0===a||null===(o=a.history)||void 0===o?void 0:o.files,null===a||void 0===a?void 0:a.metadata,null===f||void 0===f?void 0:f.completed,h);case 23:return(w=e.sent)&&(f.history.files=w),f.metadata,f.approved,f.demandFiles,C=Object(Y.a)(f,["metadata","approved","demandFiles"]),s=JSON.parse(JSON.stringify(Pe)),p=s.find((function(e){return i.match(e.path)})),k=T.a.post("/api/logs",{log:C,collection:d,codigoEmpresa:c}),e.abrupt("return",k);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ze=t(16);function Le(e){var a=e.collection,t=void 0===a?[]:a,n=e.datalist,o=e.value,i=e.empresas;return(null===o||void 0===o?void 0:o.length)>2&&"string"!==typeof t?("razaoSocial"===n&&i&&i[0]&&(t=i),r.a.createElement("datalist",{id:n},t.map((function(e,a){return r.a.createElement("option",{key:a},e[n])})))):null}t(491);var Me=Object(c.c)((function(e){return{user:e.user,redux:e.data}}))((function(e){var a=Object(n.useState)(!0),t=Object(ze.a)(a,2),o=t[0],i=t[1],l=e.empresas,c=e.compartilhados,s=e.handleInput,d=e.handleBlur,u=e.shared,m=e.headerTitle,p=e.data,f=p.razaoSocial,v=p.compartilhado,h=p.activeStep,b=p.demand,g=1===l.length,E="razaoSocial",x=[{title:"Selecione a Via\xe7\xe3o",list:E,name:E,value:f}];return u&&x.push({title:"Empresa autorizada a compartilhar",list:E,name:"compartilhado",value:v}),Object(n.useEffect)((function(){b||h>0||g?i(!1):0===h&&i(!0);var e=document.getElementsByName("razaoSocial");o&&e[0]&&e[0].focus()}),[b,h,o,g]),r.a.createElement("div",{className:e.hasOwnProperty("shared")?"flex center":"paper flex center",style:{flexDirection:0===h?"row":"column",width:"100%",marginBottom:0}},!o&&r.a.createElement("div",{className:"selectedEmpresa",style:{padding:u&&0===h&&"0 30px 33px 0"}},m||(null===b||void 0===b?void 0:b.empresa)||f||""),e.hasOwnProperty("shared")&&0!==h&&v&&r.a.createElement("div",{className:"compartilhadoHeader"},"Compartilhado por ",v),(!h||0===h)&&x.map((function(a,t){var n=a.title,o=a.list,i=a.name,u=a.value;return(g&&1===t||!g)&&r.a.createElement("div",{className:"flexColumn",key:t},r.a.createElement("h4",{style:{margin:"5px 0",textAlign:"center"}},n),r.a.createElement("input",{list:o,name:i,className:"selectEmpresa",value:u,onChange:s,onBlur:d,autoComplete:"off"}),r.a.createElement(Le,{collection:e.hasOwnProperty("shared")?c:l,datalist:o,value:u}))})))})),qe=t(372),Ve=t(371),_e=Object(X.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"1px",marginBottom:"1px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},select:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:"2px",marginBottom:"2px",background:"#fafafa",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},helperText:{margin:"2px 0",fontSize:"0.7rem"}}}));function Re(e){var a=e.handleInput,t=e.handleBlur,o=e.form,i=e.data,l=e.empresas,c=e.compartilhados,s=e.selectOptions,d=e.disableAll,u=e.style,m=void 0===u?{}:u,p=e.disableSome,f=void 0===p?[]:p,v=_e(),b=v.helperText,g=function(e){var a,t=i[e.field];if(t)return(!e.errorHandler||!e.errorHandler(t))&&(!(!t||!e.errorHandler||e.errorHandler(t))||((null===(a=t)||void 0===a?void 0:a.length)<(null===e||void 0===e?void 0:e.minLength)||("number"===e.type?t>e.max||t<e.min:("string"!==typeof t&&(t=t.toString()),!!e.pattern&&null===t.match(e.pattern)))))},E=function(e){var a,t,n=i[e.field];return n?e.errorHandler&&e.errorHandler(n)?"\u2713":n&&e.errorHandler&&!e.errorHandler(n)||(null===(a=n)||void 0===a?void 0:a.length)<(null===e||void 0===e?void 0:e.minLength)?"\u2718":(null===(t=n)||void 0===t?void 0:t.length)>=(null===e||void 0===e?void 0:e.minLength)?"\u2713":("string"!==typeof n&&(n=n.toString()),n>e.max||n<e.min?"Valor inv\xe1lido":null===n.match(e.pattern)?"\u2718":e.pattern&&null!==n.match(e.pattern)?"\u2713":" "):" "};return r.a.createElement("div",{className:"flex center",style:Object(h.a)({},m)},o.map((function(e,o){return r.a.createElement(n.Fragment,{key:o},r.a.createElement(Ve.a,{name:e.field,label:e.label,margin:e.margin,className:v.textField,onChange:a,onBlur:t,type:e.type||"",error:g(e),helperText:E(e),FormHelperTextProps:{className:b},select:e.select||!1,value:i[e.field]||"",disabled:e.disabled||d||f.includes(e.field)||!1,InputLabelProps:{className:v.textField,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"}},inputProps:{style:{background:e.disabled&&i.disable?"#fff":"#fafafa",fontSize:"0.85rem",textAlign:"center",color:"#000",width:e.width||300,height:"7px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"},value:"".concat(i[e.field]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1,SelectProps:{style:{background:e.disabled&&i.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#555",fontWeight:400,width:325,height:"44px"}}},!0===e.select?s?s.map((function(e,a){return r.a.createElement(qe.a,{key:a,value:e},e)})):e.options.map((function(e,a){return r.a.createElement(qe.a,{key:a,value:e},e)})):null),!0===e.autoComplete&&r.a.createElement(Le,{collection:i[e.collection],empresas:c||l,datalist:e.datalist,value:i[e.field]||""}))})))}function Be(e){var a=e.subtitle,t=e.style,n=void 0===t?{}:t;return r.a.createElement("div",{className:"subtitle",style:n},r.a.createElement("i",{className:"material-icons subtitle__helper"},"arrow_forward"),r.a.createElement("span",{className:"subtitle__text"},a))}var Ue=t(403),Ye=t(374),He=t(375),Je=t(63),Ke=t.n(Je),We=[{field:"cilindros",label:"Cilindros",margin:"normal",type:"number",max:12,step:1},{field:"potencia",label:"Pot\xeancia (cv)",margin:"normal",type:"number",max:600},{field:"eixos",label:"Eixos",margin:"normal",type:"number",max:8},{field:"pneumaticosDianteiro",label:"Pneum\xe1ticos Eixo Dianteiro",margin:"normal",type:"number",max:12},{field:"pneumaticosTraseiro",label:"Pneum\xe1ticos Eixo Traseiro",margin:"normal",type:"number",max:18},{field:"pesoDianteiro",label:"Peso Dianteiro (t)",margin:"normal",type:"number",max:12},{field:"pesoTraseiro",label:"Peso Traseiro (t)",margin:"normal",type:"number",max:15},{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piquesPoltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150}],$e=[[{field:"placa",label:"Placa",margin:"normal",maxLength:8,pattern:"[a-zA-Z]{3}[-]?[ ]?\\d{4}|[A-Z]{3}[-]?[ ]?[0-9]{1}[A-Z]{1}[0-9]{2}"},{field:"renavam",label:"Renavam",margin:"normal",maxLength:11,pattern:/^(\d{9}|\d{11})$/},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Comercial","Comercial Executivo","Convencional","Convencional Executivo","Leito","Leito e Executivo","Semi-Leito","Semi-Leito Executivo"]},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",datalist:"modeloChassi",autoComplete:!0,collection:"modelosChassi"},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",max:Number((new Date).getFullYear())},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",datalist:"modelo",autoComplete:!0,collection:"carrocerias"},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",max:Number((new Date).getFullYear()+1)},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50}]].concat([We]);function Ge(e){var a=e.close,t=e.title,n=void 0===t?"Fechar":t;return r.a.createElement("div",{style:{position:"absolute",top:"0.4%",right:"0.4%"}},r.a.createElement("div",null,r.a.createElement("i",{className:"material-icons right",title:n,style:{cursor:"pointer",color:"red"},onClick:a},"close")))}t(373);function Xe(e){var a,t=e.data,n=e.type,o=e.equipamentos,i=e.handleCheck,l=e.close;return Array.isArray(o)&&(null===(a=o[0])||void 0===a?void 0:a.item)&&(o=o.sort((function(e,a){return e.item.localeCompare(a.item)}))),r.a.createElement("div",{className:"popUpWindow",style:{right:"25%",left:"25%"}},r.a.createElement("h4",{className:"equipaHeader"},"equipamentos"===n?"Equipamentos":"Itens de Acessibilidade")," ",r.a.createElement("hr",null),r.a.createElement("div",{className:"checkListContainer"},o.map((function(e,a){return r.a.createElement("span",{className:"checkListEquipa",key:a},r.a.createElement(Ye.a,{control:r.a.createElement(Ue.a,{checked:t[e.item],value:e.item,onChange:function(){return i(e.item,n)}}),label:r.a.createElement("p",{className:"checkListLabel"},e.item)}))}))),r.a.createElement(Ge,{close:l}))}var Ze=Object(X.a)((function(e){return{button:{marginRight:"15px"}}})),Qe=function(e){var a=e.redux,t=e.data,o=e.handleInput,i=e.handleBlur,l=e.handleEquipa,c=e.handleCheck,s=e.closeEquipa,d=e.resetShared,u=e.removePartilha,m=Object(n.useState)(!1),p=Object(ze.a)(m,2),f=p[0],v=p[1],h=Ze().button,b=a.empresas,g=a.compartilhados,E=a.equipamentos,x=a.acessibilidade,S=a.modelosChassi,y=a.carrocerias,O=t.activeStep,j=t.demand,w=t.addEquipa,C=t.subtitle,k=t.selectedEmpresa,D=t.type,I=t.placa,N=t.reactivated,A=$e[O],P=E;"acessibilidade"===D&&(P=x),t.modelosChassi=S,t.carrocerias=y,Object(n.useEffect)((function(){d&&v(!1)}),[d]);var T=C[O];return N&&(T+=" (reativa\xe7\xe3o de ve\xedculo)"),r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:0!==O?"flex center":"paper flex center",style:{width:"100%"}},r.a.createElement("section",{className:"flexColumn",style:{marginBottom:"10px"}},r.a.createElement(Me,{data:t,shared:f,empresas:b,compartilhados:g,headerTitle:I&&k&&"Cadastro de ve\xedculo ".concat(I," - ").concat(null===k||void 0===k?void 0:k.razaoSocial),handleBlur:i,handleInput:o})),0===O&&!j&&r.a.createElement("section",{className:"flex center",style:{width:"100%",margin:"-7px 0 -4px 0"}},r.a.createElement(Ye.a,{control:r.a.createElement(Ue.a,{checked:!0===f,onChange:function(){return f&&u(),void v(!f)},value:f}),label:r.a.createElement("h4",{style:{color:"#2979ff",fontSize:"0.7rem"}},"Ve\xedculo Compartilhado?")}))),k&&r.a.createElement("main",null,O<2&&r.a.createElement("section",{className:"paper",style:{paddingBottom:"25px"}},r.a.createElement(Be,{subtitle:T}),r.a.createElement(Re,{form:A,data:t,handleBlur:i,handleInput:o})),0===O&&r.a.createElement("section",{className:"flex center",style:{marginTop:"15px"}},r.a.createElement(He.a,{variant:"outlined",size:"small",color:"primary",className:h,onClick:function(){return l("equipamentos")}},r.a.createElement(Ke.a,null),"Equipamentos"),r.a.createElement(He.a,{variant:"outlined",size:"small",color:"primary",className:h,onClick:function(){return l("acessibilidade")}},r.a.createElement(Ke.a,null),"Acessibilidade")),w&&r.a.createElement(Xe,{equipamentos:P,close:s,handleCheck:c,data:t})))},ea=t(426),aa=t(416),ta=t.n(aa),na=t(415),ra=t.n(na);function oa(e){var a=e.name,t=e.removeFile;return r.a.createElement("div",{style:{position:"absolute",top:"0.4%",right:"0.4%"}},r.a.createElement("div",null,r.a.createElement("i",{className:"material-icons right",title:"Remover arquivo",style:{cursor:"pointer",color:"red"},onClick:function(){return t(a)}},"close")))}function ia(e){var a=e.title,t=e.name,o=e.formData,i=e.handleFiles,l=e.dropDisplay,c=e.single,s=e.style,d=e.demandFiles,u=e.fileToRemove,m=e.removeFile,p=Object(n.useState)(),f=Object(ze.a)(p,2),v=f[0],h=f[1],b=Object(n.useState)(),g=Object(ze.a)(b,2),E=g[0],x=g[1];return Object(n.useEffect)((function(){d&&d[0]&&d.forEach((function(e){var a=e.filename,n=e.metadata;t===n.fieldName&&(h(a),x(!0))}))}),[d,t]),Object(n.useEffect)((function(){if(o instanceof FormData){var e,a=Object(be.a)(o.entries());try{for(a.s();!(e=a.n()).done;){var n=e.value;t===n[0]&&(h(n[1].name),x(!1),console.log(n[0],n[1]))}}catch(r){a.e(r)}finally{a.f()}}else o||d||h(null)}),[o,t,d,u]),Object(n.useEffect)((function(){if(u===t){var e=null===d||void 0===d?void 0:d.find((function(e){var a;return(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.fieldName)===u}));u&&e?(h(e.filename),x(!0)):u&&u===t&&h(void 0)}}),[d,u,i,t]),r.a.createElement("div",{style:s||null},r.a.createElement("div",{style:{position:"relative",marginRight:"8px"}},a?r.a.createElement("p",{className:"fileInput"},a||""):r.a.createElement("br",null),v&&!E&&r.a.createElement(oa,{removeFile:m,name:t})),r.a.createElement(ea.a,{onDrop:function(e){return i(e,t)}},(function(e){var a=e.getRootProps,t=e.getInputProps;return r.a.createElement("div",Object.assign({style:E?{backgroundColor:"#aaa"}:{},className:v?"dropBox fileAttached":c?"dropBox":"multipleDropBox"},a()),r.a.createElement("input",t()),v?r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(ra.a,{className:"icon"}),v),c&&r.a.createElement("span",null,"(clique ou arraste outro arquivo para alterar)")):r.a.createElement("div",null," ",r.a.createElement(ta.a,{className:"icon"}),r.a.createElement("span",null,"  ",l)))})))}var la=t(584),ca=[{title:"CRLV do Ve\xedculo",name:"crlv"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"DAE Quitada",name:"dae"},{title:"Laudo de Pesagem",name:"pesagem"}],sa=[{title:"Formul\xe1rio de Altera\xe7\xe3o de Cadastro",name:"transferenciaDoc"},{title:"Declara\xe7\xe3o de Responsabilidade de Manuten\xe7\xe3o",name:"declaracao"},{title:"Certificado de Vistoria",name:"vistoria"},{title:"DAE Quitada",name:"dae"},{title:"Laudo de Pesagem",name:"pesagem"},{title:"CRLV com nova placa",name:"newPlateDoc"}],da=Object(X.a)((function(e){return{root:{flexGrow:"1",margin:"5px",padding:"8px"},sendButton:{margin:"3% 0 3% 0",backgroundColor:"teal",float:"right"},text:{textAlign:"left",margin:e.spacing(2),fontSize:"0.9rem",fontWeight:"500",color:"#333"},item:{margin:"0 0 18px 0",padding:"0 5px"}}}));function ua(e){var a,t=e.handleFiles,o=e.parentComponent,i=e.dropDisplay,l=e.formData,c=e.insuranceExists,s=e.demandFiles,d=e.removeFile,u=e.fileToRemove,m=da(),p=m.root,f=m.item;return"cadastro"===o&&(a=ca),"altDados"===o&&(a=sa),r.a.createElement("div",{className:"paper",style:{color:"#555"}},r.a.createElement(Be,{subtitle:"Anexe os documentos solicitados nos campos abaixo"}),r.a.createElement(la.a,{container:!0,className:p},a.map((function(e,a){var o=e.title,m=e.name;return"apoliceDoc"===m&&c?null:r.a.createElement(n.Fragment,{key:a},r.a.createElement(la.a,{item:!0,xs:10,md:4,className:f},r.a.createElement(ia,{title:o,name:m,formData:l,dropDisplay:i,handleFiles:t,demandFiles:s,removeFile:d,fileToRemove:u})))}))))}var ma=t(231),pa=t.n(ma),fa=t(230),va=t.n(fa),ha=function(e,a,t,n){n&&"apoliceDoc"===n&&(t="empresaDocs"),T()({url:"/api/mongoDownload/?collection=".concat(t,"&id=").concat(e),method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download",a),document.body.appendChild(n),n.click()})).catch((function(e){console.log(e)}))},ba={display:"flex",justifyContent:"center",width:"100%",alignContent:"center",flexWrap:"wrap"},ga={textAlign:"center",alignItems:"flex-start",height:"40px",border:"1px #ccc solid",padding:"7px 8px 0 8px",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px"},Ea={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},xa={verticalAlign:"middle",padding:"0 0% 0 2%"};function Sa(e){var a=e.form,t=e.files,n=(e.demand,e.demandFiles),o=e.collection,i=e.style,l=void 0===i?{}:i,c=[];if(n&&n.forEach((function(e){a.forEach((function(a){var t,n=a.name,r=a.title;(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.fieldName)===n&&c.push({id:e.id,label:r,fieldName:n,fileName:e.filename,storage:"server"})}))})),t){var s,d=Object(be.a)(t.entries());try{var u=function(){var e=s.value;a.forEach((function(a){var t=a.name,n=a.title;if(t===e[0]&&e[1]&&e[1].name){var r=c.findIndex((function(e){return(null===e||void 0===e?void 0:e.fieldName)===t}));-1!==r?c[r]={label:n,fieldName:t,fileName:e[1].name,storage:"local"}:c.push({label:n,fieldName:t,fileName:e[1].name,storage:"local"})}}))};for(d.s();!(s=d.n()).done;)u()}catch(m){d.e(m)}finally{d.f()}}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:ba},c.map((function(e,a){return r.a.createElement("div",{style:Object(h.a)(Object(h.a)({},ga),l),key:a},r.a.createElement(va.a,{style:xa}),r.a.createElement("span",{style:{verticalAlign:"middle"}}," "," ",e.label),r.a.createElement(pa.a,{style:Ea,onClick:function(){return"local"===e.storage?function(e,a){var n=t.get(e),r=window.URL.createObjectURL(n),o=document.createElement("a");o.href=r,n&&("application/pdf"===n.type||n.type.match("image/"))?(o.setAttribute("rel","noopener"),o.setAttribute("target","_blank"),o.setAttribute("title",a)):o.setAttribute("download",a),document.body.appendChild(o),o.click()}(e.fieldName,e.fileName):ha(e.id,e.fileName,o,e.fieldName)}}))}))))}function ya(e){var a=e.length,t=e.title,n=e.labels,o=e.fields,i=e.values,l=e.style,c=e.docs,s=e.alteredElements,d=void 0===s?[]:s;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",style:l,colSpan:a},t)),r.a.createElement("tr",null,n.map((function(e,a){return r.a.createElement("th",{key:a,style:l},e)})))),r.a.createElement("tbody",null,r.a.createElement("tr",null,i.map((function(e,a){return r.a.createElement("td",{className:"review",key:a,style:Object(h.a)(Object(h.a)({},l),{},{color:d.includes(o[a])?"red":"#000"}),onClick:function(){return c&&c.id?ha(c.id,c.filename,"vehicleDocs",c.metadata.fieldName):null}},(t=e,je()(t,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?je()(t,je.a.ISO_8601,!0).format("DD/MM/YYYY"):t));var t})))))}var Oa=t(155),ja=t(119),wa=t.n(ja),Ca=Object(X.a)((function(e){return{paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 5px 0",height:"auto"}}}));function ka(e){var a,t=e.data,o=e.parentComponent,i=e.form,l=e.filesForm,c=e.files,s=Ca().paper,d=t.acessibilidade,u=t.equipamentos,m=t.alteracoes,p=t.demand,v=t.demandFiles,h=null===t||void 0===t?void 0:t.originalVehicle,b=[],g={},E=[],x=[],S=[];return i.forEach((function(e){e.forEach((function(e){t.hasOwnProperty([e.field])&&(Object.assign(g,Object(f.a)({},e.field,t[e.field])),E.push(e))})),b.push(g),x.push(E),g={},E=[]})),"cadastro"===o&&(a=[{subtitle:"Detalhes do ve\xedculo",form:x[0]||[],data:b[0]},{subtitle:"Detalhes do seguro",form:x[1]||[],data:b[1]},{subtitle:"Informa\xe7\xf5es sobre a vistoria",form:x[2]||[],data:b[2]}]),"altDados"===o&&(a=[{subtitle:"Detalhes do ve\xedculo",form:x[0],data:b[0]},{subtitle:"Informa\xe7\xf5es sobre a vistoria",form:x[1],data:b[1]}]),m&&"object"===typeof m&&(S=Object.keys(m)),h&&Object.keys(h).forEach((function(e){t[e]&&h[e]&&(t[e]===h[e]||S.includes(e)||S.push(e))})),r.a.createElement(r.a.Fragment,null,r.a.createElement(Oa.a,{className:s},r.a.createElement("main",{className:"divTable"},a.map((function(e,a){var t=e.subtitle,o=e.form,i=e.data;return o&&i&&r.a.createElement(n.Fragment,{key:a},r.a.createElement(ya,{length:(null===o||void 0===o?void 0:o.length)||1,title:t,labels:o.map((function(e){return e.label})),fields:o.map((function(e){return e.field})),values:Object.values(i),alteredElements:S}))}))),u&&u[0]&&r.a.createElement("section",{style:{margin:"0 0 13px 20px"}},r.a.createElement("p",{style:{fontWeight:500,color:"#555"}}," Equipamentos "),r.a.createElement("p",null,u&&u.map((function(e,a){return r.a.createElement("span",{style:{fontFamily:"Segoe UI, Tahoma, Geneva, Verdana",fontSize:"12px"},key:a},a!==u.length-1?e+", ":e)})))),d&&d[0]&&r.a.createElement("section",{style:{margin:"0 0 13px 20px"}},r.a.createElement("p",{style:{fontWeight:500,color:"#555"}}," Itens de acessibilidade "),r.a.createElement("p",null,d.map((function(e,a){return r.a.createElement("span",{style:{fontFamily:"Segoe UI, Tahoma, Geneva, Verdana",fontSize:"12px"},key:a},a!==d.length-1?e+", ":e)})))),(c||v)&&r.a.createElement("div",null,r.a.createElement("p",{style:{margin:"0 0 13px 11px",fontWeight:"500",color:"#555"}},r.a.createElement(wa.a,{style:{verticalAlign:"middle",padding:"0 0 0 8px"}})," Documentos"),r.a.createElement(Sa,{demand:p,collection:"vehicleDocs",demandFiles:v,form:l,files:c}))))}var Da=t(603),Ia=t(417),Na=t.n(Ia);function Aa(e){var a=e.links,t=e.text,n=e.demand;return n&&(a=["Solicita\xe7\xf5es","/solicitacoes"],t="solicita\xe7\xe3o n\xba ".concat(null===n||void 0===n?void 0:n.numero)),r.a.createElement(la.a,{style:{marginTop:"1%"}},r.a.createElement(Da.a,{separator:"\u203a","aria-label":"breadcrumb"},r.a.createElement(S.b,{to:"/",style:{}},r.a.createElement(Na.a,{style:{verticalAlign:"middle",marginRight:"5px",paddingBottom:"3px"}}),r.a.createElement("span",{style:{fontSize:"0.8rem"}},"P\xe1gina inicial")),r.a.createElement(S.b,{color:"primary",to:a[1],style:{fontSize:"0.8rem"}},a[0]),r.a.createElement("span",{style:{fontSize:"0.8rem"}},t)))}var Pa=Object(X.a)((function(e){return{button:{margin:e.spacing(1),float:"right"},backButton:{margin:e.spacing(1),float:"left",color:"#333",backgroundColor:"#eee"},textField:{marginTop:"20px",width:"100%"}}}));function Ta(e){var a,t=e.activeStep,o=e.setActiveStep,i=e.lastStep,l=e.handleSubmit,c=e.disabled,s=e.demand,d=e.uniqueStep,u=e.declineButtonLabel,m=e.setShowPendencias,p=e.showPendencias,f=e.handleInput,v=e.info,h=e.obs,b=e.addObs,g=Pa(),E=g.backButton,x=g.button,S=g.textField;return(null===s||void 0===s?void 0:s.status.match("Pend\xeancias"))&&(a="empresa"),(null===s||void 0===s?void 0:s.status.match("Aguardando"))&&(a="seinfra"),Object(n.useEffect)((function(){function e(e){37===e.keyCode&&e.ctrlKey&&0!==t&&o("back"),39===e.keyCode&&e.ctrlKey&&t!==i&&o("next"),13===e.keyCode&&e.ctrlKey&&l()}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}})),r.a.createElement("div",{style:{width:"100%"}},t<i?r.a.createElement(r.a.Fragment,null,r.a.createElement(He.a,{variant:"contained",className:E,title:0!==t?"Ctrl + \u2190":null,onClick:function(){return o("back")},disabled:0===t},"Voltar"),r.a.createElement(He.a,{variant:"contained",color:"primary",title:c?null:"Ctrl + \u2192",className:x,onClick:function(){return o("next")},disabled:c},"Avan\xe7ar")):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},"seinfra"!==a||p||b?r.a.createElement(Ve.a,{name:b?"obs":"info",className:S,value:b?h:v,label:s&&"empresa"!==a?s&&d?"Motivos para o indeferimento":p?"Pend\xeancias/irregularidades para a aprova\xe7\xe3o":"Observa\xe7\xf5es":"Observa\xe7\xf5es/informa\xe7\xf5es complementares",type:"text",onChange:f,InputLabelProps:{shrink:!0,style:{fontWeight:600,marginBottom:"5%"}},inputProps:{style:{paddingBottom:"2%"},maxLength:600},multiline:!0,rows:3,variant:"outlined"}):null,r.a.createElement("div",{style:{display:"flex",width:"100%"}},t===i&&!d&&r.a.createElement(He.a,{variant:"contained",className:E,title:0!==t?"Ctrl + \u2190":null,onClick:function(){return o("back")},disabled:0===t},"Voltar"),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%"}},s&&"empresa"!==a?r.a.createElement(r.a.Fragment,null,r.a.createElement(He.a,{variant:"outlined",color:"secondary",className:x,onClick:function(){return m()}},p?"Cancelar":u||"Registrar pendencias"),r.a.createElement(He.a,{variant:"contained",color:p?"secondary":"primary",className:x,onClick:function(){return l(!p)}},p?"Indeferir":"Aprovar")):r.a.createElement(He.a,{variant:"contained",color:"primary",className:x,onClick:function(){return l()}},"Enviar solicita\xe7\xe3o")))))}var Fa=t(585),za=t(586),La=t(587);function Ma(e){var a=e.activeStep,t=e.steps;return r.a.createElement("div",{className:"paper",style:{padding:"15px",margin:"10px 0"}},r.a.createElement(Fa.a,{activeStep:a},t.map((function(e,a){var t={};return r.a.createElement(za.a,Object.assign({key:e},{}),r.a.createElement(La.a,t,e))}))))}var qa=function(e,a){if(/\d/.test(e)){var t=new Date(e).getDate()+"/"+(new Date(e).getMonth()+1)+"/"+new Date(e).getFullYear();return a&&(t+=", "+new Date(e).getHours()+":"+(new Date(e).getMinutes()<10?"0"+new Date(e).getMinutes():new Date(e).getMinutes())+"h"),t.toString()}return e},Va=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.replace(/\D/g,"");return a=(a=(a=(a=(a/100).toFixed(2)+"").replace(".",",")).replace(/(\d)(\d{3})(\d{3}),/g,"$1.$2.$3,")).replace(/(\d)(\d{3}),/g,"$1.$2,")};var _a=t(588),Ra=t(592),Ba=t(590),Ua=t(591),Ya=t(589);function Ha(e){var a=e.open,t=e.alertType,n=e.close,o=e.confirm,i=e.customTitle,l=e.customMessage,c=e.tab,s=function(e){var a="";if((c||0===c)&&(a=["a empresa","o s\xf3cio","a procura\xe7\xe3o","o ve\xedculo","o seguro"][c]),i&&l)return{title:i,message:l};switch(e){case"plateNotFound":return{title:"Placa n\xe3o encontrada",message:'A placa informada n\xe3o corresponde a nenhum ve\xedculo da frota da via\xe7\xe3o selecionada. Para cadastrar um novo ve\xedculo, selecione a op\xe7\xe3o Ve\xedculos => "Cadastro de Ve\xedculo" no menu acima.'};case"invalidPlate":return{title:"Placa inv\xe1lida",message:"Certifique-se de que a placa informada \xe9 uma placa v\xe1lida, com tr\xeas letras seguidas de 4 n\xfameros (ex: AAA-0000)"};case"plateExists":return{title:"Placa j\xe1 cadastrada!",message:"A placa informada j\xe1 est\xe1 cadastrada. Para atualizar seguro, alterar dados ou solicitar baixa, utilize as op\xe7\xf5es acima. "};case"invalidModel":return{title:"Modelo n\xe3o cadastrado.",message:l};case"inputError":return{title:"Preenchimento inv\xe1lido.",message:l};case"fieldsMissing":return{title:"Favor preencher todos os campos.",message:"Os campos acima s\xe3o de preenchimento obrigat\xf3rio. Certifique-se de ter preenchido todos eles."};case"invalidInsurance":return{title:"Favor verificar os dados do seguro.",message:"As informa\xe7\xf5es referentes ao seguro do ve\xedculo s\xe3o obrigat\xf3rias. Certifique-se de ter informado todas elas."};case"filesNotFound":return{title:"Arquivos n\xe3o encontrados",message:"N\xe3o h\xe1 nenhum documento aprovado no sistema para ".concat(a," selecionad").concat(a.charAt(0),".\n          Caso haja uma solicita\xe7\xe3o em aberto para ").concat(a,', acesse a op\xe7\xe3o "Solicita\xe7\xf5es" no menu superior para ter acesso aos arquivos.')};case"empresaNotFound":return{title:"Empresa n\xe3o encontrada.",message:"A empresa informada n\xe3o est\xe1 registrada no sistema. Para cadastrar uma nova empresa, utilize a op\xe7\xe3o Empresas -> Cadastrar."};case"seguradoraNotFound":return{title:"Seguradora n\xe3o encontrada.",message:"A seguradora informada n\xe3o est\xe1 registrada no sistema. Favor verificar o nome da seguradora."};case"alreadyExists":return{title:"CPF j\xe1 cadastrado.",message:"O CPF informado corresponde a um s\xf3cio j\xe1 cadastrado. \n          Para remover ou editar as informa\xe7\xf5es dos s\xf3cios, utilize a respectiva op\xe7\xe3o abaixo."};case"numberNotValid":return{title:"N\xfamero inv\xe1lido.",message:"O n\xfamero digitado n\xe3o \xe9 v\xe1lido."};case"overShared":return{title:"Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",message:"A participa\xe7\xe3o societ\xe1ria informada excede a 100%."};case"subShared":return{title:"Participa\xe7\xe3o societ\xe1ria inv\xe1lida.",message:"A participa\xe7\xe3o societ\xe1ria informada n\xe3o soma 100%. Favor informar todos os s\xf3cios com suas respectivas participa\xe7\xf5es."};case"veiculoPendente":return{title:"Pend\xeancias encontradas para este ve\xedculo.",message:"Verifique se h\xe1 alguma aprova\xe7\xe3o pendente quanto ao cadastro, seguro, transfer\xeancia ou altera\xe7\xe3o de dados do ve\xedculo."};case"seguroVencido":return{title:"Pend\xeancias encontradas para o seguro deste ve\xedculo.",message:"Para regularizar o seguro deste ve\xedculo, acesse a op\xe7\xe3o Ve\xedculos=>Seguros no menu acima."};case"contratoVencido":return{title:"Contrato expirado.",message:"O contrato de concess\xe3o com o delegat\xe1rio selecionado est\xe1 expirado."};default:return{title:null,message:null}}}(t),d=s.title,u=s.message;return d&&u?r.a.createElement("div",null,r.a.createElement(_a.a,{open:a,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Ya.a,{id:"alert-dialog-title"},d),r.a.createElement(Ba.a,null,r.a.createElement(Ua.a,{id:"alert-dialog-description"},u)),r.a.createElement(Ra.a,null,r.a.createElement(He.a,{onClick:n,color:"primary"},o?"Cancelar":"Fechar"),o&&r.a.createElement(He.a,{onClick:n,color:"primary",autoFocus:!0},"Confirmar")))):null}var Ja=function(e,a,t){var n,r;return"leitoEExecutivo"===(e=A.a.camelize(e))&&(e="leitoExecutivo"),t[e]&&a&&""!==a&&(a=Number(a),n=(r=t[e])<=a),!n&&(r?'A dist\xe2ncia m\xednima para a utiliza\xe7\xe3o "'.concat(e,'" \xe9 de ').concat(r,' cent\xedmetros. Altere a dist\xe2ncia ou clique em "voltar" para alterar a utiliza\xe7\xe3o.'):void 0)},Ka=[{field:"veiculoId",label:"N\xfamero"},{field:"placa",label:"Placa"},{field:"renavam",label:"RENAVAM"},{field:"utilizacao",label:"Utiliza\xe7\xe3o"},{field:"codigoEmpresa",label:"C\xf3digo"},{field:"empresa",label:"Delegat\xe1rio"},{field:"dataRegistro",label:"Data de Registro"},{field:"situacao",label:"Situa\xe7\xe3o"},{field:"dataBaixa",label:"Data baixa"},{field:"nChassi",label:"N\xfamero chassi"},{field:"marcaChassi",label:"Marca chassi"},{field:"modeloChassi",label:"Modelo chassi"},{field:"anoChassi",label:"Ano chassi"},{field:"valorChassi",label:"Valor Chassi"},{field:"marcaCarroceria",label:"Marca carroceria"},{field:"modeloCarroceria",label:"Modelo carroceria"},{field:"anoCarroceria",label:"Ano carroceria"},{field:"indicadorIdade",label:"Indicador de Idade"},{field:"valorCarroceria",label:"Valor carroceria"},{field:"dominio",label:"Leasing"},{field:"delegatarioCompartilhado",label:"Empresas autorizadas a compartilhar"},{field:"cores",label:"Cores"},{field:"seguradora",label:"Seguradora"},{field:"apolice",label:"Ap\xf3lice"},{field:"dataEmissao",label:"Data Inicio"},{field:"vencimento",label:"Data Fim"},{field:"empresaLaudo",label:"Empresa Laudo"},{field:"numeroLaudo",label:"N\xfamero Laudo"},{field:"validade",label:"Validade Laudo"},{field:"cilindros",label:"Cilindros"},{field:"potencia",label:"Pot\xeancia"},{field:"eixos",label:"Eixos"},{field:"pneumaticosDianteiros",label:"Pneum\xe1ticos Dianteiros"},{field:"pneumaticosTraseiros",label:"Pneum\xe1ticos Traseiros"},{field:"pesoDianteiro",label:"Peso Dianteiro"},{field:"pesoTraseiro",label:"Peso Traseiro"},{field:"pbt",label:"PBT"},{field:"poltronas",label:"Poltronas"},{field:"piquesPoltrona",label:"Piques Poltrona"},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima"},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima"},{field:"equipamentos",label:"Equipamentos"},{field:"acessibilidade",label:"Acessibilidade"},{field:"sipro",label:"SIPRO"},{field:"obs",label:"Observa\xe7\xe3o"}],Wa=function(e){var a,t=e.props.redux.modelosChassi,n=e.state.modeloChassi;if(n){var r=null===(a=t.find((function(e){return e.modeloChassi===n})))||void 0===a?void 0:a.cmt;console.log("\ud83d\ude80 ~ file: CadVeiculo.jsx ~ line 190 ~ VeiculosContainer ~ cmt",r),e.setState({cmt:r})}},$a=function(e){if(e)return"0"!==(e=e.toString().replace(".",",").replace(",000","")).slice(-1)||","!==e.charAt(1)&&","!==e.charAt(2)||(e=e.slice(0,e.length-1)),"0"!==e.slice(-1)||","!==e.charAt(1)&&","!==e.charAt(2)||(e=e.slice(0,e.length-1)),console.log(e),e},Ga=function(e,a){var t=e.state,n=t.poltronas,r=t.pesoDianteiro,o=t.pesoTraseiro,i=t.cmt,l=t.modeloChassi;o=o||0;var c=.08*+(n=n||0)+(+((r=r||0)&&parseFloat(r.replace(",",".")).toFixed(3))+ +(o&&parseFloat(o.replace(",",".")).toFixed(3)));if(+i>=(c=isNaN(c)?void 0:c.toFixed(3)))console.log("Cmt, pbt ok.",i,c),c=Number($a(c).replace(",",".")),e.setState({pbt:c});else{var s=$a(c),d=i&&i.toString().replace(".",","),u="O n\xfamero de poltronas e os pesos dianteiro e traseiro informados formam um peso bruto total de ".concat(s,"t, superior \xe0 \n                Carga M\xe1xima de tra\xe7\xe3o permitida: modelo ").concat(l," -> ").concat(d,"t.");e.setState(Object(f.a)({openAlertDialog:!0,customTitle:"Peso total bruto superior ao permitido (CMT) para o modelo de chassi informado.",customMessage:u},a,0)),setTimeout((function(){document.getElementsByName(a)[0].focus()}),1550)}},Xa=ce(["veiculos","empresas","compartilhados","modelosChassi","carrocerias","equipamentos","acessibilidade","getFiles/vehicleDocs","parametros"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={activeStep:0,steps:["Dados do Ve\xedculo","Vistoria e laudos","Documentos","Revis\xe3o"],subtitle:["Informe os dados do ve\xedculo.","Preencha os campos abaixo conforme a vistoria realizada"],razaoSocial:"",frota:[],delegatarioCompartilhado:"",toastMsg:"Ve\xedculo cadastrado!",confirmToast:!1,addEquipa:!1,openAlertDialog:!1,dropDisplay:"Clique ou arraste para anexar"},e.setActiveStep=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==e.state.activeStep){a.next=7;break}if(!e.state.frota.filter((function(a){return a.placa===e.state.placa}))[0]){a.next=7;break}return a.next=5,e.setState({placa:""});case 5:return e.setState({alertType:"plateExists",openAlertDialog:!0}),a.abrupt("return",null);case 7:if(!(n=e.state.errors)||!n[0]){a.next=12;break}return a.next=11,e.setState(Object(h.a)(Object(h.a)({},e.state),we("setState")));case 11:return a.abrupt("return");case 12:r=e.state.activeStep,"next"===t&&e.setState({activeStep:r+1}),"back"===t&&e.setState({activeStep:r-1}),"reset"===t&&e.setState({activeStep:0});case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.props.redux,r=n.veiculos,o=n.empresas,i=t.target.name,l=t.target.value,e.setState(Object(f.a)({},i,l)),a.t0=i,a.next="razaoSocial"===a.t0?6:"placa"===a.t0?18:"utilizacao"===a.t0?23:"valorChassi"===a.t0?25:"valorCarroceria"===a.t0?27:29;break;case 6:if(!(c=o.find((function(e){return e.razaoSocial===l})))){a.next=16;break}return s=c.razaoSocial,d=c.codigoEmpresa,a.next=11,e.setState({selectedEmpresa:c,razaoSocial:s,codigoEmpresa:d});case 11:l!==c.razaoSocial&&e.setState({selectedEmpresa:void 0}),u=r.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:u}),a.next=17;break;case 16:e.setState({selectedEmpresa:void 0,frota:[],placa:void 0});case 17:return a.abrupt("break",30);case 18:if("string"!==typeof l){a.next=22;break}return l=l.toLocaleUpperCase(),a.next=22,e.setState(Object(f.a)({},i,l));case 22:return a.abrupt("break",30);case 23:return e.setState({distanciaMinima:void 0,distanciaMaxima:void 0}),a.abrupt("break",30);case 25:case 27:return e.setState(Object(f.a)({},i,Va(l))),a.abrupt("break",30);case 29:case 30:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.checkValid=function(){var a=Object(w.a)(j.a.mark((function a(t,n,r,o,i,l,c){var s,d,u,m,p,v;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((d=r.find((function(e){return e[i].toLowerCase()===n.toLowerCase()})))||!n||""===n){a.next=7;break}return a.next=4,e.setState((u={},Object(f.a)(u,t,""),Object(f.a)(u,o,""),u));case 4:return e.setState({alertType:"invalidModel",openAlertDialog:!0,customTitle:"Modelo inv\xe1lido.",customMessage:"O modelo de ".concat(c," n\xe3o est\xe1 cadastrado no sistema.")}),document.getElementsByName(t)[0].focus(),a.abrupt("return");case 7:if(""===n&&e.setState((s={},Object(f.a)(s,t,""),Object(f.a)(s,o,""),s)),!d){a.next=13;break}if(p=d[i],v=d[l],""===n){a.next=13;break}return a.next=13,e.setState((m={},Object(f.a)(m,t,p),Object(f.a)(m,o,v),m));case 13:case"end":return a.stop()}}),a)})));return function(e,t,n,r,o,i,l){return a.apply(this,arguments)}}(),e.handleBlur=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f,v,h,b,g,E,x,S,y,O,w,C,k,D,I,N,A,P,T,F;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.props.redux,r=n.empresas,o=n.modelosChassi,i=n.carrocerias,l=n.parametros,c=l[0],s=c.distanciaPoltronas,d=c.idadeBaixa,u=d.idadeMaxCad,m=d.difIdade,p=d.idadeBaixaAut,f=e.state,v=f.anoCarroceria,h=f.anoChassi,b=f.utilizacao,g=f.distanciaMinima,E=f.distanciaMaxima,x=f.situacao,S=t.target.name,y=Number(v),O=Number(h),w=(new Date).getFullYear(),C=t.target.value,I=w-u,x&&x.match("Reativa\xe7\xe3o")&&(I=w-p),(N=we())?e.setState({errors:N}):e.setState({errors:void 0}),a.t0=S,a.next="modeloChassi"===a.t0?8:"modeloCarroceria"===a.t0?13:"delegatarioCompartilhado"===a.t0?15:"anoChassi"===a.t0?17:"anoCarroceria"===a.t0?22:"distanciaMinima"===a.t0?27:"distanciaMaxima"===a.t0?31:"pesoDianteiro"===a.t0?35:"pesoTraseiro"===a.t0?37:"poltronas"===a.t0?39:41;break;case 8:return a.next=10,e.checkValid(S,C,o,"modeloChassiId","modeloChassi","id","chassi");case 10:return Wa(Object(fe.a)(e)),e.setState({pesoDianteiro:void 0,pesoTraseiro:void 0}),a.abrupt("break",42);case 13:return e.checkValid(S,C,i,"modeloCarroceriaId","modelo","id","carroceria"),a.abrupt("break",42);case 15:return e.checkValid(S,C,r,"compartilhadoId","razaoSocial","codigoEmpresa"),a.abrupt("break",42);case 17:return k="Ano de chassi inv\xe1lido.",O&&O<I-1&&(D="O ano de fabrica\xe7\xe3o do chassi informado \xe9 anterior \xe0 idade m\xe1xima permitida para cadastro."),y&&O&&(y<O||y>O+m)&&(D="O ano de chassi \xe9 incompat\xedvel com o ano da carroceria informado."),D&&e.setState({anoChassi:"",openAlertDialog:!0,customTitle:k,customMessage:D}),a.abrupt("break",42);case 22:return k="Ano de carroceria inv\xe1lido.",y&&y<I&&(D="O ano de fabrica\xe7\xe3o do carroceria informado \xe9 anterior \xe0 idade m\xe1xima permitida."),y&&O&&(y<O||y>O+m)&&(D="O ano de fabrica\xe7\xe3o carroceria \xe9 incompat\xedvel com o ano do chassi informado."),D&&e.setState({anoCarroceria:"",openAlertDialog:!0,customTitle:k,customMessage:D}),a.abrupt("break",42);case 27:return b&&(A=Ja(b,g,s)),g&&+g>+E&&(A="A Dist\xe2ncia m\xednima n\xe3o pode ser superior \xe0 dist\xe2ncia m\xe1xima."),A&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xednima inv\xe1lida.",customMessage:A,distanciaMinima:""}),a.abrupt("break",42);case 31:return b&&(P=Ja(b,E,s)),E&&+E<+g&&(P="A Dist\xe2ncia m\xe1xima n\xe3o pode ser inferior \xe0 dist\xe2ncia m\xednima."),P&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xe1xima inv\xe1lida.",customMessage:P,distanciaMaxima:""}),a.abrupt("break",42);case 35:case 37:case 39:return Ga(Object(fe.a)(e),S),a.abrupt("break",42);case 41:case 42:if("placa"!==S||"string"===typeof e.state.frota){a.next=54;break}if(7!==C.length){a.next=48;break}return T=C.replace(/(\w{3})/,"$1-"),a.next=47,e.setState({placa:T,reactivated:!1});case 47:C=T;case 48:if(8!==C.length){a.next=53;break}return F=C.replace(" ","-"),a.next=52,e.setState({placa:F,reactivated:!1});case 52:C=F;case 53:e.checkPlateConflict(C);case 54:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.checkPlateConflict=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,T.a.get("/api/alreadyExists?table=veiculos&column=placa&value=".concat(t));case 2:if(n=a.sent,r=null===n||void 0===n?void 0:n.data,o=null===r||void 0===r?void 0:r.vehicleFound,!r){a.next=22;break}if("existing"!==(c=r.status)){a.next=14;break}return(null===o||void 0===o?void 0:o.situacao.match(/Cadastro|Reativa\xe7\xe3o/g))?(i="Solicita\xe7\xe3o aberta.",l="J\xe1 existe uma solicita\xe7\xe3o de cadastro ou reativa\xe7\xe3o para a placa informada. Para acompanhar, acesse 'Solicita\xe7\xf5es' e filtre pela placa do ve\xedculo. "):(i="Ve\xedculo j\xe1 cadastrado.",l="A placa informada corresponde a um ve\xedculo j\xe1 cadastrado. Para alterar o cadastro, v\xe1 para Ve\xedculos -> 'Altera\xe7\xe3o de dados'."),e.setState({customTitle:i,customMessage:l,openAlertDialog:!0,placa:null,reactivated:!1}),t="",a.abrupt("return");case 14:if("Reativado"!==o["Situa\xe7\xe3o"]){a.next=21;break}return a.delegateYield(j.a.mark((function a(){var t,n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(r in t={},n=function(e){Ka.forEach((function(a){var n=a.field,r=a.label;e===r&&["renavam","nChassi","anoChassi","anoCarroceria"].includes(n)&&(t[n]=o[e])}))},o)n(r);return t.situacao="Reativa\xe7\xe3o solicitada",a.next=6,e.setState(Object(h.a)(Object(h.a)({},t),{},{reactivated:!0}));case 6:return a.abrupt("return",{v:void 0});case 7:case"end":return a.stop()}}),a)}))(),"t0",16);case 16:if("object"!==typeof(s=a.t0)){a.next=19;break}return a.abrupt("return",s.v);case 19:a.next=22;break;case 21:"discharged"===c&&(i="Ve\xedculo baixado.",l="A placa informada corresponde a um ve\xedculo baixado. Para reativar seu cadastro, v\xe1 para Ve\xedculos -> Baixa -> 'Gerenciar Ve\xedculos Baixados'.",e.setState({customTitle:i,customMessage:l,openAlertDialog:!0,placa:null,reactivated:!1}),t="");case 22:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleEquipa=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.props.redux[t],r=[],o=[],a.next=4,e.setState({type:t});case 4:!1===e.state.addEquipa&&(e.state[t]&&(o=e.state[t]),n.forEach((function(e){var a=e.item;o.forEach((function(e){e.toLowerCase()===a.toLowerCase()&&r.push(a)}))})),r.forEach((function(a){return e.setState(Object(f.a)({},a,!0))}))),e.setState({addEquipa:!e.state.addEquipa});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleCheck=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.state.type,o=e.props.redux[r]){a.next=3;break}return a.abrupt("return");case 3:return i=[],l=[],"equipamentos"===r&&(c="equipamentosId"),"acessibilidade"===r&&(c="acessibilidadeId"),a.next=8,e.setState(Object(h.a)(Object(h.a)({},e.state),{},Object(f.a)({},t,!e.state[t])));case 8:o.forEach((function(a){var t=a.id,n=a.item;!0===e.state[n]&&(i.push(n),l.push(t))})),i[0]?e.setState((n={},Object(f.a)(n,r,i),Object(f.a)(n,c,l),n)):"equipamentos"===r?e.setState(Object(f.a)({equipamentos:[]},c,[])):"acessibilidade"===r&&e.setState(Object(f.a)({acessibilidade:[]},c,[]));case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleCadastro=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,v,b,g,E,x,S,y,O,w,C,k,D,I,N,P,F,z,L,M;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(P in r=e.state,o=r.equipamentosId,i=r.acessibilidadeId,l=r.pbt,c=r.compartilhadoId,s=r.modeloChassiId,d=r.originalVehicle,u=r.getUpdatedValues,m=r.modeloCarroceriaId,p=r.selectedEmpresa,v=r.showPendencias,b=r.info,g=r.obs,E=r.form,x=r.demand,S=r.demandFiles,y=r.reactivated,O=p.codigoEmpresa,w=null===x||void 0===x?void 0:x.veiculoId,C=(null===x||void 0===x||null===(n=x.history)||void 0===n?void 0:n.length)||0,D="Cadastro solicitado",I={},$e.forEach((function(a){a.forEach((function(a){for(var t in e.state)t===a.field&&""!==e.state[t]&&Object.assign(I,Object(f.a)({},t,e.state[t]))}))})),I.delegatarioCompartilhado,I.modeloChassi,I.modeloCarroceria,I.apolice,N=Object(Y.a)(I,["delegatarioCompartilhado","modeloChassi","modeloCarroceria","apolice"]),Object.assign(N,{codigoEmpresa:O,situacao:D,pbt:l,modeloChassiId:s,modeloCarroceriaId:m,obs:g,equipamentosId:o,acessibilidadeId:i,apolice:"Seguro n\xe3o cadastrado"}),N)""===N[P]&&delete N[P];if(console.log(N),N.compartilhadoId=c&&c,x&&d&&(N=u(d,N)),F=A.a.decamelizeKeys(N),console.log(N,"437"),w){a.next=17;break}return a.next=15,T.a.post("/api/cadastroVeiculo",F).then((function(e){k=e.data})).catch((function(e){return console.log(e)}));case 15:a.next=22;break;case 17:return k=w,x&&t&&!v&&(D="Seguro n\xe3o cadastrado"),"veiculos","veiculo_id",z=Object(h.a)(Object(h.a)({},F),{},{situacao:D}),a.next=22,T.a.put("/api/updateVehicle",{requestObject:z,table:"veiculos",tablePK:"veiculo_id",id:k,codigoEmpresa:O});case 22:L={empresaId:null===p||void 0===p?void 0:p.codigoEmpresa,veiculoId:k,history:{info:b,files:E},metadata:{veiculoId:k},demandFiles:S,historyLength:C,approved:t},x&&(L.id=null===x||void 0===x?void 0:x.id),y&&(L.subject="Reativa\xe7\xe3o de ve\xedculo"),Te(L).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),t?e.toast():(M="Solicita\xe7\xe3o de cadastro enviada.",x&&x.status.match("Aguardando")&&(M="Pend\xeancias para o cadastro registradas."),e.toast(M)),x?setTimeout((function(){e.props.history.push("/solicitacoes")}),1500):e.resetState();case 28:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleFiles=function(){var a=Object(w.a)(j.a.mark((function a(t,n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t||!t[0]){a.next=5;break}return a.next=3,e.setState(Object(f.a)({},n,t[0]));case 3:r=Ee(t,e.state,ca),e.setState(Object(h.a)(Object(h.a)({},r),{},{fileToRemove:null}));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.removeFile=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.state.form,r=ye(t,n),e.setState(Object(h.a)(Object(h.a)({},e.state),r));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.resetState=function(){var a,t=e.props.redux,n=t.empresas,r=t.veiculos,o=t.equipamentos,i=t.acessibilidade,l=o.concat(i),c={},s={};$e.forEach((function(a){return a.forEach((function(a){return e.setState(Object(f.a)({},a.field,""))}))})),ca.forEach((function(e){var a=e.name;Object.assign(c,Object(f.a)({},a,void 0))})),l.forEach((function(a){return e.setState(Object(f.a)({},a.item,!1))})),n&&1===n.length&&(s={selectedEmpresa:n[0],razaoSocial:null===(a=n[0])||void 0===a?void 0:a.razaoSocial,frota:r}),e.setState(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},c),{acessibilidade:[],acessibilidadeId:[],equipamentos:[],equipamentosId:[]}),l),{},{form:void 0,info:void 0,activeStep:0},s))},e.closeEquipa=function(){return e.setState({addEquipa:!1})},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.removePartilha=function(){return e.setState({compartilhado:void 0})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.closeEquipa()},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,n,r,o,i,l,c,s,d,u,m,p,v;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.props.redux,i=o.equipamentos,l=o.acessibilidade,c=o.empresas,s=o.veiculos,d=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.demand,c&&1===c.length&&this.setState({selectedEmpresa:c[0],razaoSocial:null===(r=c[0])||void 0===r?void 0:r.razaoSocial,frota:s}),d&&(u=!1,(m=ve(d,o)).situacao.match("Reativa\xe7\xe3o")&&(u=!0),this.setState(Object(h.a)(Object(h.a)({},m),{},{activeStep:3,reactivated:u}))),p={},v={},i.forEach((function(e){return Object.assign(p,Object(f.a)({},null===e||void 0===e?void 0:e.item,!1))})),l.forEach((function(e){return Object.assign(v,Object(f.a)({},null===e||void 0===e?void 0:e.item,!1))})),e.next=8,this.setState(Object(h.a)(Object(h.a)({},p),v));case 8:document.addEventListener("keydown",this.escFunction,!1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({}),document.removeEventListener("keydown",this.escFunction,!1)}},{key:"render",value:function(){var e=this.state,a=e.confirmToast,t=e.toastMsg,o=e.activeStep,i=e.openAlertDialog,l=e.alertType,c=e.steps,s=e.selectedEmpresa,d=e.dropDisplay,u=e.form,m=e.demand,p=e.demandFiles,f=e.showPendencias,v=e.info,h=e.resetShared,b=e.customMessage,g=e.customTitle,E=e.obs,x=this.props.redux;return r.a.createElement(n.Fragment,null,r.a.createElement(Aa,{links:["Ve\xedculos","/veiculos"],text:"Cadastro de ve\xedculo",demand:m,selectedEmpresa:s}),r.a.createElement(Ma,{activeStep:o,steps:c,setActiveStep:this.setActiveStep}),r.a.createElement(Qe,{data:this.state,redux:x,handleInput:this.handleInput,handleBlur:this.handleBlur,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck,closeEquipa:this.closeEquipa,match:this.props.match,resetShared:h,removePartilha:this.removePartilha}),2===o&&r.a.createElement(ua,{parentComponent:"cadastro",dropDisplay:d,formData:u,handleFiles:this.handleFiles,demandFiles:p,fileToRemove:this.state.fileToRemove,removeFile:this.removeFile}),3===o&&r.a.createElement(ka,{parentComponent:"cadastro",data:this.state,files:this.state.form,filesForm:ca,form:$e}),s&&r.a.createElement(Ta,{activeStep:o,lastStep:c.length-1,setActiveStep:this.setActiveStep,demand:m,setShowPendencias:this.setShowPendencias,showPendencias:f,info:v,handleSubmit:this.handleCadastro,handleInput:this.handleInput,addObs:m&&!f,obs:E}),r.a.createElement(ee,{open:a,close:this.toast,msg:t}),i&&r.a.createElement(Ha,{open:i,close:this.toggleDialog,alertType:l,customMessage:b,customTitle:g}))}}]),t}(n.PureComponent)),Za=function(e,a){var t=window.location.pathname;Pe.forEach((function(e,a){return e.path=Pe[a].path.replace("/veiculos","").replace("/solicitacoes","").replace("/empresas","")}));var n=Pe.find((function(e){return t.match(null===e||void 0===e?void 0:e.path)})),r=null===n||void 0===n?void 0:n.subject,o=null===n||void 0===n?void 0:n.primaryKey,i=a.find((function(a){return a.subject===r&&a[o]==e&&!1===a.completed}));return i||!1},Qa=[[{field:"placa",label:"Placa",margin:"normal",datalist:"placa",autoComplete:!0,collection:"frota"},{field:"delegatario",label:"Delegat\xe1rio",margin:"normal",datalist:"razaoSocial",autoComplete:!0,collection:"empresas"},{field:"compartilhado",label:"Delegat\xe1rio Compartilhado",margin:"normal",datalist:"razaoSocial",autoComplete:!0,collection:"empresas"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Comercial","Comercial Executivo","Convencional","Convencional Executivo","Leito","Leito e Executivo","Semi-Leito","Semi-Leito Executivo"]},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50},{field:"renavam",label:"Renavam",margin:"normal",disabled:!0},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17,disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",disabled:!0},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",disabled:!0},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",disabled:!0},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",disabled:!0},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,disabled:!0}]].concat([[{field:"poltronas",label:"Poltronas",margin:"normal",type:"number",max:120},{field:"piquesPoltrona",label:"Piques poltrona",margin:"normal",type:"number",max:12},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)",margin:"normal",type:"number",max:150},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)",margin:"normal",type:"number",max:150},{field:"eixos",label:"Eixos",margin:"normal",type:"number",max:8},{field:"pneumaticosDianteiro",label:"Pneum\xe1ticos Eixo Dianteiro",margin:"normal",type:"number",max:12},{field:"pneumaticosTraseiro",label:"Pneum\xe1ticos Eixo Traseiro",margin:"normal",type:"number",max:18},{field:"pesoDianteiro",label:"Peso Dianteiro (kg)",margin:"normal",type:"number",max:12e3},{field:"pesoTraseiro",label:"Peso Traseiro (kg)",margin:"normal",type:"number",max:15e3},{field:"cilindros",label:"Cilindros",margin:"normal",type:"number",max:12,step:1,disabled:!0},{field:"potencia",label:"Pot\xeancia (cv)",margin:"normal",type:"number",max:600,disabled:!0}]]).concat([[]]).concat([[]]),et=Object(X.a)((function(e){return{button:{marginRight:"15px"}}})),at=function(e){var a=e.handleInput,t=e.handleBlur,n=e.data,o=e.handleCheck,i=e.handleEquipa,l=e.altPlacaOption,c=e.showAltPlaca,s=e.empresas,d=e.compartilhados,u=e.equipamentos,m=e.acessibilidade,p=e.close,f=n.activeStep,v=n.subtitle,h=n.placa,b=n.selectedEmpresa,g=n.addEquipa,E=n.demand,x=n.type,S=et().button,y=Qa[f],O=u;return"acessibilidade"===x&&(O=m),r.a.createElement("div",{className:"flex center"},r.a.createElement("header",{className:"flex center",style:{marginBottom:"10px",width:"100%"}},r.a.createElement(Me,{data:n,empresas:s,compartilhados:d,headerTitle:b&&"Altera\xe7\xe3o de dados ".concat(h||""," - ").concat(null===b||void 0===b?void 0:b.razaoSocial),handleInput:a,handleBlur:t})),b&&r.a.createElement("main",null,f<2&&r.a.createElement("section",{className:"paper"},r.a.createElement(Be,{subtitle:v[f]}),r.a.createElement(Re,{form:y,data:n,empresas:s,compartilhados:d,handleBlur:t,handleInput:a,disableSome:E?["placa","delegatario"]:["delegatario"]})),0===f&&r.a.createElement("section",{className:"flex center"},r.a.createElement(He.a,{variant:"outlined",size:"small",color:"primary",className:S,onClick:function(){return i("equipamentos")}},r.a.createElement(Ke.a,null),"Equipamentos"),r.a.createElement(He.a,{variant:"outlined",size:"small",color:"primary",className:S,onClick:function(){return i("acessibilidade")}},r.a.createElement(Ke.a,null),"Acessibilidade")),l&&h.match("[a-zA-Z]{3}[-]?\\d{4}")&&r.a.createElement("div",{className:"addNewDiv"},r.a.createElement("span",{onClick:function(){return c()}}," \u2192 Clique aqui para alterar a placa para o formato Mercosul.")),g&&r.a.createElement(Xe,{type:x,equipamentos:O,close:p,handleCheck:o,data:n})))};function tt(e){var a=e.open,t=e.close,n=e.title,o=e.header,i=e.inputNames,l=e.inputLabels,c=e.fileInputName,s=e.confirm,d=e.handleInput,u=e.handleFiles,m=e.values,p=e.formData,f=e.dropDisplay,v=e.type,h=void 0===v?"text":v,b=!0,g=function(e,a){if("newPlate"===e)return a.length<9&&a.match("[a-zA-Z]{3}?[-]\\d{1}\\w{1}\\d{2}")?(b=!1,!1):(b=!0,!0)};return r.a.createElement(_a.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ya.a,{id:"form-dialog-title"},n),r.a.createElement(Ba.a,null,r.a.createElement(Ua.a,null,o),r.a.createElement("br",null),i.map((function(e,a){return r.a.createElement(Ve.a,{key:a,autoFocus:"newPlate"===e&&!0,name:e,label:l[a],onChange:d,values:m[a],type:h,error:g(e,m[a]),fullWidth:!0,InputLabelProps:{shrink:!0}})})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ia,{title:"Anexar arquivo",name:c,formData:p,dropDisplay:f,handleFiles:u})),r.a.createElement(Ra.a,null,r.a.createElement(He.a,{onClick:t,color:"primary"},"Cancelar"),r.a.createElement(He.a,{onClick:s,color:"primary",disabled:b},"Confirmar")))}var nt=ce(["veiculos","empresas","compartilhados","equipamentos","acessibilidade","getFiles/vehicleDocs","parametros"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={stepTitles:["Informe a placa para alterar os dados abaixo ou mantenha as informa\xe7\xf5es atuais e clique em avan\xe7ar","Altere os dados desejados abaixo e clique em avan\xe7ar","Anexe os documentos solicitados","Revis\xe3o das informa\xe7\xf5es e deferimento"],steps:["Alterar dados do Ve\xedculo","Alterar dados adicionais","Documentos","Revis\xe3o"],subtitle:["Informe os dados do ve\xedculo.","Informa\xe7\xf5es adicionais","Anexe os arquivos solicitados","Revis\xe3o"],empresas:[],razaoSocial:"",compartilhadoId:"",frota:[],toastMsg:"Dados atualizados!",confirmToast:!1,activeStep:0,files:[],openAlertDialog:!1,altPlaca:!1,newPlate:"",placa:"",addEquipa:!1,dropDisplay:"Clique ou arraste para anexar",showPendencias:!1},e.setActiveStep=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(n=e.state.errors)||!n[0]){a.next=4;break}return e.setState(Object(h.a)(Object(h.a)({},e.state),we("setState"))),a.abrupt("return");case 4:r=e.state.activeStep,"next"===t&&e.setState({activeStep:r+1}),"back"===t&&e.setState({activeStep:r-1}),"reset"===t&&e.setState({activeStep:0});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.props.redux,r=n.veiculos,o=n.empresas,i=n.equipamentos,l=t.target,c=l.name,s=l.value,"razaoSocial"!==c){a.next=13;break}if(!(d=o.find((function(e){return e.razaoSocial===s})))){a.next=11;break}return a.next=6,e.setState({razaoSocial:d.razaoSocial,selectedEmpresa:d});case 6:s!==d.razaoSocial&&e.setState({selectedEmpresa:void 0}),u=r.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:u}),a.next=13;break;case 11:e.setState({selectedEmpresa:void 0,frota:[]}),e.reset();case 13:"placa"===c&&e.state.frota&&(e.state.frota.find((function(e){return e.placa===s}))||i.forEach((function(a){return e.setState(Object(f.a)({},a,!1))}))),"utilizacao"===c&&e.setState({distanciaMinima:void 0,distanciaMaxima:void 0}),"newPlate"===c?"string"===typeof(m=s)&&((m=m.replace(/[a-z]/g,(function(e){return e.toUpperCase()}))).match("[A-Z]{3}[0-9]{1}[A-Z]{1}[0-9]{2}")&&(m=m.replace(/(\w{3})/,"$1-")),e.setState(Object(h.a)(Object(h.a)({},e.state),{},{newPlate:m}))):e.setState(Object(f.a)({},c,s));case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.getId=function(){var a=Object(w.a)(j.a.mark((function a(t,n,r,o,i,l){var c,s,d,u,m,p;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=r.filter((function(e){return e[i].toLowerCase().match(n.toLowerCase())})),""===n&&e.setState((c={},Object(f.a)(c,t,""),Object(f.a)(c,o,""),c)),!s[0]){a.next=10;break}if(d=s[0][i],u=s[0][l],""===n){a.next=8;break}return a.next=8,e.setState((m={},Object(f.a)(m,t,d),Object(f.a)(m,o,u),m));case 8:a.next=14;break;case 10:return a.next=12,e.setState((p={},Object(f.a)(p,t,""),Object(f.a)(p,o,""),p));case 12:e.setState({openAlertDialog:!0,alertType:"empresaNotFound"}),document.getElementsByName(t)[0].focus();case 14:case"end":return a.stop()}}),a)})));return function(e,t,n,r,o,i){return a.apply(this,arguments)}}(),e.capitalize=function(e,a){if(a&&"string"===typeof a)return"utilizacao"===e&&("RODOVIARIO"===a&&(a="Convencional"),"EXECUTIVO"===a&&(a="Convencional Executivo"),"URBANO"===a&&(a="Comercial"),"URBANO EXECUTIVO"===a&&(a="Comercial Executivo"),"SEMI LEITO"===a&&(a="Semi-Leito"),"SEMI LEITO - EXECUTIVO"===a&&(a="Semi-Leito Executivo"),"LEITO"===a&&(a="Leito"),"LEITO E EXECUTIVO"===a&&(a="Leito e Executivo")),"dominio"===e&&"Sim"===a&&(a="Ve\xedculo pr\xf3prio"),"dominio"===e&&"N\xe3o"===a&&(a="Possuidor"),a},e.handleBlur=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,v,b,g,E,x,S,y,O,w,C,k,D,I,N,A,P,T,F;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.props.redux,r=n.empresas,o=n.compartilhados,i=n.logs,l=n.equipamentos,c=n.acessibilidade,s=n.parametros,d=s[0].distanciaPoltronas,u=e.state,m=u.frota,p=u.demand,v=u.utilizacao,b=u.distanciaMinima,g=u.distanciaMaxima,E=t.target.name,x=t.target.value,(S=we())?e.setState({errors:S}):e.setState({errors:void 0}),a.t0=E,a.next="compartilhado"===a.t0?7:"delegatario"===a.t0?9:"distanciaMinima"===a.t0?12:"distanciaMaxima"===a.t0?16:"pesoDianteiro"===a.t0?20:"pesoTraseiro"===a.t0?22:"poltronas"===a.t0?24:26;break;case 7:return e.getId(E,x,o,"compartilhadoId","razaoSocial","codigoEmpresa"),a.abrupt("break",27);case 9:return a.next=11,e.getId(E,x,r,"codigoEmpresa","razaoSocial","codigoEmpresa");case 11:return a.abrupt("break",27);case 12:return v&&(y=Ja(v,b,d)),b&&g&&+b>+g&&(y="A Dist\xe2ncia m\xednima n\xe3o pode ser superior \xe0 dist\xe2ncia m\xe1xima."),y&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xednima inv\xe1lida.",customMessage:y,distanciaMinima:""}),a.abrupt("break",27);case 16:return v&&(O=Ja(v,g,d)),g&&b&&+g<+b&&(O="A Dist\xe2ncia m\xe1xima n\xe3o pode ser inferior \xe0 dist\xe2ncia m\xednima."),O&&e.setState({openAlertDialog:!0,customTitle:"Dist\xe2ncia m\xe1xima inv\xe1lida.",customMessage:O,distanciaMaxima:""}),a.abrupt("break",27);case 20:case 22:case 24:return Ga(Object(fe.a)(e),E),a.abrupt("break",27);case 26:case 27:if(!("placa"===E&&x.length>2&&Array.isArray(e.state.frota))){a.next=47;break}if(!(w=e.state.frota.find((function(e){return"string"===typeof x?e.placa.toLowerCase().match(x.toLowerCase()):e.placa.match(x)})))||"object"!==typeof w){a.next=46;break}return D=e.capitalize("utilizacao",null===(C=w)||void 0===C?void 0:C.utilizacao)||null,I=e.capitalize("dominio",null===(k=w)||void 0===k?void 0:k.dominio)||null,N={},l.concat(c).forEach((function(e){var a=e.item;return Object.assign(N,Object(f.a)({},a,!1))})),w=Object.assign({},w,{utilizacao:D,dominio:I}),A=Object.freeze(w),a.next=37,e.setState(Object(h.a)(Object(h.a)(Object(h.a)({},N),w),{},{originalVehicle:A,disable:!0}));case 37:if(void 0!==w&&w.hasOwnProperty("empresa")&&e.setState({delegatario:w.empresa}),p){a.next=46;break}if("Solicita\xe7\xe3o j\xe1 cadastrada",T="J\xe1 existe uma demanda aberta para o ve\xedculo de placa ".concat(w.placa,'. Para acess\xe1-la, clique em "Solicita\xe7\xf5es" no menu superior.'),!Za(null===(P=w)||void 0===P?void 0:P.veiculoId,i)){a.next=46;break}return a.next=44,e.setState({customTitle:"Solicita\xe7\xe3o j\xe1 cadastrada",customMessage:T,openAlertDialog:!0,delegatario:""});case 44:return e.reset(),a.abrupt("return");case 46:""===e.state.placa||w||(F={},m[0]&&Object.keys(m[0]).forEach((function(e){return F[e]=""})),e.setState({alertType:"plateNotFound",openAlertDialog:!0}),e.setState(Object(h.a)(Object(h.a)({},F),{},{disable:!1})));case 47:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleEquipa=function(a){var t=e.props.redux[a],n=[],r=[];!1===e.state.addEquipa&&(e.state[a]&&(r=e.state[a]),t.forEach((function(e){var a=e.item;r.forEach((function(e){e.toLowerCase()===a.toLowerCase()&&n.push(a)}))})),n.forEach((function(a){return e.setState(Object(f.a)({},a,!0))})),console.log(e.state)),e.setState({addEquipa:!e.state.addEquipa,type:a})},e.handleCheck=function(){var a=Object(w.a)(j.a.mark((function a(t,n){var r,o,i,l,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.props.redux[n]){a.next=3;break}return a.abrupt("return");case 3:return i=[],l=[],"equipamentos"===n&&(c="equipamentosId"),"acessibilidade"===n&&(c="acessibilidadeId"),a.next=8,e.setState(Object(h.a)(Object(h.a)({},e.state),{},Object(f.a)({},t,!e.state[t])));case 8:o.forEach((function(a){var t=a.id,n=a.item;!0===e.state[n]&&(i.push(n),l.push(t))})),i[0]?e.setState((r={},Object(f.a)(r,n,i),Object(f.a)(r,c,l),r)):"equipamentos"===n?e.setState(Object(f.a)({equipamentos:[]},c,[])):"acessibilidade"===n&&e.setState(Object(f.a)({acessibilidade:[]},c,[]));case 10:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.showAltPlaca=function(){e.setState({altPlaca:!0,title:"Altera\xe7\xe3o de placa",header:"Para alterar a placa do ve\xedculo para o padr\xe3o Mercosul, digite a placa no campo abaixo e anexe o CRLV atualizado do ve\xedculo."})},e.updatePlate=function(){e.setState({placa:e.state.newPlate}),e.toggleDialog()},e.handleSubmit=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,v,h,b,g,E,x,S,y,O,w,C,k,D,I;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.state,o=r.veiculoId,i=r.pbt,l=r.codigoEmpresa,c=r.originalVehicle,s=r.showPendencias,d=r.getUpdatedValues,u=r.compartilhadoId,m=r.newPlate,p=r.selectedEmpresa,v=r.equipamentosId,h=r.acessibilidadeId,b=r.info,g=r.demand,E=r.form,x=r.demandFiles,S=(null===g||void 0===g||null===(n=g.history)||void 0===n?void 0:n.length)||0,y={},Qa.forEach((function(a){a.forEach((function(a){for(var t in e.state)t!==a.field||a.disabled||e.state[t]&&Object.assign(y,Object(f.a)({},t,e.state[t]))}))})),y=Object.assign(y,{codigoEmpresa:l,compartilhadoId:u,pbt:i,equipamentosId:v,acessibilidadeId:h}),g&&d&&(y=d(c,y)),(O=y).delegatario,O.compartilhado,w=Object(Y.a)(O,["delegatario","compartilhado"]),m&&""!==m&&(w.placa=m),e.state.compartilhado&&""!==e.state.compartilhado||!(null===c||void 0===c?void 0:c.compartilhadoId)||(w.compartilhadoId="NULL"),t||0!==Object.keys(w).length){a.next=11;break}return e.setState({openAlertDialog:!0,customTitle:"Nenhuma altera\xe7\xe3o",customMessage:"N\xe3o foi realizada nenhuma altera\xe7\xe3o na solicita\xe7\xe3o aberta. Para prosseguir, altere algum dos campos ou adicione uma justificativa."}),a.abrupt("return");case 11:if(C=A.a.decamelizeKeys(w),k={alteracoes:w,info:b,files:E},D={empresaId:null===p||void 0===p?void 0:p.codigoEmpresa,veiculoId:o,history:k,demandFiles:x,metadata:{veiculoId:o},historyLength:S,approved:t},g&&(D.id=null===g||void 0===g?void 0:g.id),Te(D).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),!g||!t||s){a.next=20;break}return p.codigoEmpresa!==l&&(C.apolice="Seguro n\xe3o cadastrado"),"veiculos","veiculo_id",a.next=20,T.a.put("/api/updateVehicle",{requestObject:C,table:"veiculos",tablePK:"veiculo_id",id:o,codigoEmpresa:l});case 20:t?e.toast():(I="Solicita\xe7\xe3o de altera\xe7\xe3o de dados enviada.",g&&g.status.match("Aguardando")&&(I="Pend\xeancias para a altera\xe7\xe3o de dados registradas."),e.toast(I)),g?setTimeout((function(){e.props.history.push("/solicitacoes")}),1500):setTimeout((function(){e.reset()}),1200);case 22:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleFiles=function(){var a=Object(w.a)(j.a.mark((function a(t,n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t||!t[0]){a.next=5;break}return a.next=3,e.setState(Object(f.a)({},n,t[0]));case 3:r=Ee(t,e.state,sa),e.setState(Object(h.a)(Object(h.a)({},r),{},{fileToRemove:null}));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.removeFile=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.state.form,r=ye(t,n),e.setState(Object(h.a)(Object(h.a)({},e.state),r));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({altPlaca:!e.state.altPlaca})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.closeEquipa=function(){return e.setState({addEquipa:!1})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e.reset=function(){var a,t=e.props.redux,n=t.empresas,r=t.veiculos,o=t.equipamentos,i=t.acessibilidade,l=o.concat(i),c={},s={};Qa.forEach((function(a){return a.forEach((function(a){return e.setState(Object(f.a)({},a.field,""))}))})),sa.forEach((function(e){var a=e.name;Object.assign(c,Object(f.a)({},a,void 0))})),l.forEach((function(a){return e.setState(Object(f.a)({},a.item,!1))})),n&&1===n.length&&(s={selectedEmpresa:n[0],razaoSocial:null===(a=n[0])||void 0===a?void 0:a.razaoSocial,frota:r}),e.setState(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},c),{acessibilidade:[],acessibilidadeId:[],equipamentos:[],equipamentosId:[]}),l),{},{form:void 0,info:void 0,activeStep:0},s))},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.closeEquipa()},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,n,r,o,i,l,c,s,d,u,m,p,v,b,g,E;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.props.redux,i=o.equipamentos,l=o.acessibilidade,c=o.empresas,s=o.veiculos,d=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.demand,c&&1===c.length&&this.setState({selectedEmpresa:c[0],razaoSocial:null===(r=c[0])||void 0===r?void 0:r.razaoSocial,frota:s}),d&&(u=ve(d,o),m=u.originalVehicle,p=u.getUpdatedValues,v=u.alteracoes,b=u.compartilhadoId,console.log("\ud83d\ude80 ~ file: AltDados.jsx ~ line 79 ~ AltDados ~ componentDidMount ~ demandState",u),p(m,v),"NULL"===b&&(u.compartilhado=""),this.setState(Object(h.a)(Object(h.a)({},u),{},{activeStep:3}))),g={},E={},i.forEach((function(e){return Object.assign(g,Object(f.a)({},null===e||void 0===e?void 0:e.item,!1))})),l.forEach((function(e){return Object.assign(E,Object(f.a)({},null===e||void 0===e?void 0:e.item,!1))})),e.next=8,this.setState(Object(h.a)(Object(h.a)({},g),E));case 8:document.addEventListener("keydown",this.escFunction,!1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.props.redux,a=e.empresas,t=e.compartilhados,o=e.equipamentos,i=e.acessibilidade,l=this.state,c=l.confirmToast,s=l.toastMsg,d=l.stepTitles,u=l.activeStep,m=l.steps,p=l.altPlaca,f=l.selectedEmpresa,v=l.openAlertDialog,h=l.alertType,b=l.customTitle,g=l.customMessage,E=l.dropDisplay,x=l.form,S=l.title,y=l.header,O=l.newPlate,j=l.demand,w=l.showPendencias,C=l.info,k=l.demandFiles;return r.a.createElement(n.Fragment,null,r.a.createElement(Aa,{links:["Ve\xedculos","/veiculos"],text:"Altera\xe7\xe3o de dados",demand:j}),r.a.createElement(Ma,{activeStep:u,steps:m,stepTitles:d,setActiveStep:this.setActiveStep}),r.a.createElement(at,{data:this.state,empresas:a,compartilhados:t,equipamentos:o,acessibilidade:i,setActiveStep:this.setActiveStep,altPlacaOption:0===u,handleInput:this.handleInput,handleBlur:this.handleBlur,showAltPlaca:this.showAltPlaca,handleEquipa:this.handleEquipa,handleCheck:this.handleCheck,close:this.closeEquipa}),2===u&&r.a.createElement(ua,{parentComponent:"altDados",dropDisplay:E,formData:x,handleFiles:this.handleFiles,demandFiles:k,fileToRemove:this.state.fileToRemove,removeFile:this.removeFile}),3===u&&r.a.createElement(ka,{parentComponent:"altDados",data:this.state,form:Qa,files:this.state.form,filesForm:sa}),f&&r.a.createElement(Ta,{activeStep:u,lastStep:m.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep,showPendencias:w,setShowPendencias:this.setShowPendencias,info:C,handleInput:this.handleInput,demand:j}),r.a.createElement(ee,{open:c,close:this.toast,msg:s}),r.a.createElement(tt,{open:p,close:this.toggleDialog,title:S,header:y,inputNames:["newPlate"],inputLabels:["Alterar Placa"],fileInputName:"newPlateDoc",values:[O],handleInput:this.handleInput,handleFiles:this.handleFiles,confirm:this.updatePlate,dropDisplay:E,formData:x}),v&&r.a.createElement(Ha,{open:v,close:this.closeAlert,alertType:h,customMessage:g,customTitle:b}))}}]),t}(n.Component)),rt=t(405),ot=t(232),it=t.n(ot),lt=t(150),ct=t.n(lt),st=[{field:"seguradora",label:"Seguradora",autoComplete:!0,datalist:"seguradora",collection:"seguradoras",width:225},{field:"apolice",label:"Ap\xf3lice",autoComplete:!0,datalist:"apolice",collection:"seguros",maxLength:25,width:225},{type:"date",field:"dataEmissao",label:"In\xedcio da vig\xeancia",width:225},{type:"date",field:"vencimento",label:"Vencimento",width:225}],dt=[{title:"Contrato Social",name:"contratoSocial"},{title:"Procura\xe7\xe3o",name:"procuracao"},{title:"Ap\xf3lice",name:"apoliceDoc"},{title:"Altera\xe7\xe3o de contrato social",name:"altContratoDoc"},{title:"CRC",name:"crc"}],ut=Object(X.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"25%",minWidth:310,fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"}}}));function mt(e){var a=e.empresas,t=e.data,o=e.seguros,i=e.seguradoras,l=e.enableAddPlaca,c=e.handleInput,s=e.handleBlur,d=e.addPlate,u=e.removeFromInsurance,m=e.handleFiles,p=e.handleSubmit,f=e.enableChangeApolice,v=e.showAllPlates,h=e.removeFile,b=e.setShowPendencias,g=t.selectedEmpresa,E=t.placa,x=t.apolice,S=t.addedPlaca,y=t.allVehicles,O=t.frota,j=t.demandFiles,w=t.fileToRemove,C=t.demand,k=t.insurance,D=t.dropDisplay,I=t.apoliceDoc,N=t.showPendencias,A=t.info,P=t.renderedPlacas;t.seguradoras=i;var T=ut(),F=T.textField,z=o.some((function(e){return e.apolice===x}));return r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column"}},r.a.createElement(Aa,{links:["Ve\xedculos","/veiculos"],text:"Seguros",demand:C}),r.a.createElement(Me,{data:t,empresas:a,handleInput:c,handleBlur:s}),g&&r.a.createElement("section",{className:"paper"},r.a.createElement(Be,{subtitle:"Informe os dados do seguro."}),r.a.createElement(Re,{form:st,data:t,handleBlur:s,handleInput:c}),z&&r.a.createElement("div",{className:"addNewDiv"},r.a.createElement("span",{onClick:function(){return f()}}," \u2192 Clique aqui para adicionar nova ap\xf3lice mantendo as placas abaixo selecionadas."))),g&&l&&r.a.createElement("main",{className:"paper",style:{textAlign:"center",color:"#555"}},r.a.createElement("p",null,"Utilize as op\xe7\xf5es abaixo para filtrar, adicionar ou excluir placas desta ap\xf3lice"),r.a.createElement("section",{className:"flex spaceBetween",style:{paddingTop:"17px"}},r.a.createElement("div",null,r.a.createElement(Ve.a,{inputProps:{name:"addedPlaca",list:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Insira a placa",className:F,value:S,onChange:c,onBlur:s}),r.a.createElement(Le,{collection:y,datalist:"placa",value:S}),r.a.createElement(He.a,{size:"small",variant:"contained",className:T.button,style:{margin:"10px 0 10px 0"},onClick:function(){return d(S)}},r.a.createElement(Ke.a,null)," Adicionar")),r.a.createElement("div",null,r.a.createElement(Ve.a,{inputProps:{name:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Filtrar",className:F,value:E||"",onChange:c,onBlur:s}),r.a.createElement(ct.a,{style:{marginTop:"18px"}})),C?j[0]&&r.a.createElement("div",{style:{width:"225px",marginTop:"15px"}},r.a.createElement(Sa,{demand:C,collection:"empresaDocs",demandFiles:j,form:dt,style:{width:"200px"}})):r.a.createElement(ia,{name:"apoliceDoc",formData:I,dropDisplay:D,handleFiles:m,demandFiles:j,removeFile:h,fileToRemove:w,style:{padding:"0 10px",margin:"0 10px",width:"28%",minWidth:"320px"}})),r.a.createElement("div",{className:"addNewDiv",style:{justifyContent:"flex-start",padding:"10px"}},r.a.createElement("span",{onClick:function(){return v()}},"\u2192 Clique aqui para selecionar placas")),(null===k||void 0===k?void 0:k.placas)&&(null===k||void 0===k?void 0:k.placas[0])?r.a.createElement("div",{style:{marginTop:"15px"}},"Placas vinculadas a ap\xf3lice ",k.apolice):r.a.createElement("div",{style:{marginTop:"30px"}}),k&&k.placas&&x&&x.length>2&&P&&P[0]&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:{fontSize:"0.7rem",marginBottom:"10px",marginTop:"3px",color:"#787b6e"}},"Selecionado",P.length>1?"s":""," ",P.length," ve\xedculo",P.length>1?"s":""," de ",null===O||void 0===O?void 0:O.length),r.a.createElement("div",{className:"placasChipContainer"},P.map((function(e,a){var t=e.placa,n=e.compartilhado,o=e.outsider,i=e.irregular,l=e.delCompartilhado,c=e.owner;return r.a.createElement("div",{onMouseOver:function(e){return function(e,a){var t=e.compartilhado,n=e.outsider,r=e.irregular,o=e.delCompartilhado,i=e.owner;a.target.title="Ve\xedculo pr\xf3prio",t&&(a.target.title="Ve\xedculo pr\xf3prio. Compartilhado por: ".concat(o)),n&&(a.target.title="Autorizado compartilhamento. Propriet\xe1rio: ".concat(i)),r&&(a.target.title="N\xc3O autorizado compartilhamento! Propriet\xe1rio: ".concat(i))}({compartilhado:n,outsider:o,irregular:i,delCompartilhado:l,owner:c},e)},key:a},r.a.createElement(rt.a,{key:a,label:t,onDelete:function(){return u(t)},className:n?"chip-compartilhado":o?"chip-outsider":i?"chip-irregular":"chip",variant:"outlined"}))})))))),x&&(k||l)&&!C?r.a.createElement("div",{style:{minHeight:"60px",position:"flex"}},r.a.createElement(He.a,{size:"small",color:"primary",className:"saveButton",variant:"contained",onClick:function(){return p()}},"Salvar ",r.a.createElement("span",null,"\xa0\xa0 ")," ",r.a.createElement(it.a,null))):g&&C?r.a.createElement(Ta,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:C,setShowPendencias:b,showPendencias:N,info:A,handleSubmit:p,handleInput:c}):null)}var pt=function(e){var a=e.items,t=e.title,n=e.data,o=e.close,i=e.selectAll,l=e.handleCheck,c=e.selectAllPlates;return r.a.createElement("div",{className:"popUpWindow row"},r.a.createElement("h6",null,t," Clique em \"X\" ou pressione 'esc' para voltar"),r.a.createElement("div",{style:{margin:"10px 0",fontSize:"0.8rem"}},r.a.createElement("input",{id:"all",type:"checkbox",checked:!0===i,onChange:function(){return c()}}),r.a.createElement("label",{htmlFor:"all"},i?"Desmarcar todas selecionadas":"Selecionar todas")),r.a.createElement("main",{className:"checkListContainer"},a.map((function(e,a){return r.a.createElement("div",{className:"checkListItem",key:a},r.a.createElement("input",{id:a,type:"checkbox",checked:!0===n[e],onChange:function(){return l(e)}}),r.a.createElement("label",{htmlFor:a},e))}))),r.a.createElement(Ge,{close:o}))};function ft(e){var a=e.open,t=e.close,n=e.title,o=e.helperMessage,i=e.marca,l=e.marcas,c=e.selectMarca,s=e.newElement,d=e.handleInput,u=e.addNewElement;return r.a.createElement("div",null,r.a.createElement(_a.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ya.a,{id:"form-dialog-title"},n),r.a.createElement(Ba.a,null,r.a.createElement(Ua.a,null,o),r.a.createElement("div",{className:"editFields"},l&&r.a.createElement("div",{className:"configMarca"},r.a.createElement(Ve.a,{onChange:c,value:i,label:"Selecione uma marca",select:!0,InputLabelProps:{shrink:!0},SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},l.map((function(e,a){var t=e.marca;return r.a.createElement(qe.a,{key:a,value:t},t)})))),r.a.createElement("div",{className:"configField"},r.a.createElement(Ve.a,{autoFocus:!0,margin:"dense",name:"newElement",label:"Inserir",type:"text",onChange:d,value:s,fullWidth:!0}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(Ra.a,null,r.a.createElement(He.a,{onClick:t,color:"primary"},"Cancelar"),r.a.createElement(He.a,{onClick:function(){return u()},color:"primary"},"Confirmar"))))}var vt=function(e,a,t){var n,r={name:"nomeSocio",id:"socioId"};document.location.pathname.match("procurador")&&(r={name:"nomeProcurador",id:"procuradorId"});var o,i,l,c,s=a.empresas,d=a.empresaDocs,u=r,m=u.name,p=u.id,f=(null===e||void 0===e?void 0:e.history)||[],v=null===f||void 0===f?void 0:f.length,h=s.find((function(a){return a.codigoEmpresa===(null===e||void 0===e?void 0:e.empresaId)})),b=null===h||void 0===h?void 0:h.razaoSocial,g=[],E=[];(f[0]&&(o=f[v-1]),o)&&(g=(null===(l=o)||void 0===l?void 0:l.newMembers)||[],E=(null===(c=o)||void 0===c?void 0:c.oldMembers)||[]);var x=(null===(n=f.reverse().find((function(e){return e.files})))||void 0===n?void 0:n.files)||[];x[0]&&(i=d.find((function(e){return e.id===x[0]}))),E[0]&&t.forEach((function(e){E.forEach((function(a){e[p]===a[p]&&Object.keys(a).forEach((function(t){e[t]=a[t]}))}))}));var S=t.concat(g).sort((function(e,a){return e[m].localeCompare(a[m])}));return{razaoSocial:b,selectedEmpresa:h,demand:e,latestDoc:i,newMembers:g,oldMembers:E,getUpdatedValues:ht,filteredSocios:S}};function ht(e,a){return Object.keys(a).forEach((function(t){a[t]&&e[t]&&("equipamentosId"!==t&&"acessibilidadeId"!==t||a[t].sort((function(e,a){return e-a})),a[t].toString()===e[t].toString()&&delete a[t]),""!==a[t]&&"null"!==a[t]&&a[t]||delete a[t]})),a}var bt=ce(["veiculos","empresas","seguradoras","seguros","getFiles/empresaDocs"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={addedPlaca:"",razaoSocial:"",seguradora:"",deletedVehicles:[],toastMsg:"Seguro atualizado!",confirmToast:!1,dropDisplay:"Clique ou arraste para anexar a ap\xf3lice",showAllPlates:!1,showPendencias:!1,selectAll:!1},e.filterInsurances=Object(w.a)(j.a.mark((function a(){var t,n,r,o,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.props.redux.seguros,n=e.state.selectedEmpresa,r=n.codigoEmpresa,o=t.filter((function(e){return e.codigoEmpresa===r})),a.next=6,T.a.get("/api/allVehicles?codigoEmpresa=".concat(r));case 6:i=a.sent,l=A.a.camelizeKeys(null===i||void 0===i?void 0:i.data)||[],c=l.map((function(e){return e.placa})).sort(),s=l.filter((function(e){return e.codigoEmpresa===r})),d=s.map((function(e){return e.placa})),e.setState({seguros:o,allVehicles:l,frota:s,ownedPlacas:d,allPlates:c});case 12:case"end":return a.stop()}}),a)}))),e.checkExistance=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=JSON.parse(JSON.stringify(e.props.redux.seguros)),r=e.state,o=r.selectedEmpresa,i=r.demand,l=o.codigoEmpresa,c=Object(v.a)(n.filter((function(e){return e.codigoEmpresa===l}))),s=Object(h.a)({},c.find((function(e){return e.apolice===t}))),i&&e.state.insurance&&(s=e.state.insurance),!(Object.keys(s).length>0)){a.next=11;break}return d=je()(s.dataEmissao).format("YYYY-MM-DD"),u=je()(s.vencimento).format("YYYY-MM-DD"),p=(m=s).seguradora,f=m.seguradoraId,a.next=8,e.setState({seguradora:p,seguradoraId:f,dataEmissao:d,vencimento:u,insurance:s});case 8:return a.abrupt("return");case 11:e.setState({dataEmissao:"",vencimento:"",deletedVehicles:[],insurance:{}});case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.renderPlacas=function(a){var t=e.state,n=t.allVehicles,r=t.insurance,o=t.ownedPlacas;if(r){a||(a=r.placas),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 133 ~ Seguro ~ placas",a);var i=[];a&&(a.forEach((function(a){var t=n.find((function(e){return e.placa===a}));if(t){var r=t.placa,l=t.empresa,c=t.compartilhado,s={placa:r,owner:l,delCompartilhado:c};o.includes(r)?s.compartilhado=!!c:c?Object.assign(s,{outsider:!0}):Object.assign(s,{irregular:!0}),i.push(s)}else e.setState({renderedPlacas:i})})),e.setState({renderedPlacas:i}))}},e.handleInput=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,v,h,b,g,E,x,S,y,O,w,C;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=t.target.value,r=t.target.name,o=e.props.redux,i=o.empresas,l=o.seguradoras,c=e.state,s=c.selectedEmpresa,d=c.allVehicles,u=c.insurance,m=c.apolice,p=c.dataEmissao,v=c.vencimento,h=c.newInsurance,b=c.seguradora,e.setState(Object(f.a)({},r,n)),a.t0=r,a.next="razaoSocial"===a.t0?6:"apolice"===a.t0?17:"seguradora"===a.t0?22:"placa"===a.t0?25:"addedPlaca"===a.t0?28:31;break;case 6:if(!(g=i.find((function(e){return e.razaoSocial===n})))){a.next=14;break}return a.next=10,e.setState({razaoSocial:g.razaoSocial,selectedEmpresa:g});case 10:n!==g.razaoSocial&&e.setState({selectedEmpresa:void 0}),e.filterInsurances(),a.next=16;break;case 14:e.setState({selectedEmpresa:void 0,frota:[]}),e.clearFields();case 16:return a.abrupt("break",32);case 17:return d||e.filterInsurances(),a.next=20,e.checkExistance(n);case 20:return e.renderPlacas(),a.abrupt("break",32);case 22:return(E=l.find((function(e){return e.seguradora===n})))&&e.setState({seguradoraId:E.id}),a.abrupt("break",32);case 25:return x=[],(null===u||void 0===u?void 0:u.placas)&&(u.placas[0]&&null!==u.placas[0]&&(x=u.placas.sort()),void 0!==n&&n.length>2&&x[0]&&(x="string"===typeof n?u.placas.filter((function(e){return e.toLowerCase().match(n.toLowerCase())})).sort():u.placas.filter((function(e){return e.match(n)})).sort()),e.renderPlacas(x)),a.abrupt("break",32);case 28:return(S=d.find((function(e){return e.placa===n})))&&e.setState({vehicleFound:S}),a.abrupt("break",32);case 31:case 32:if(y=["seguradora","apolice","dataEmissao","vencimento"].every((function(a){return e.state[a]&&""!==e.state[a]})),"razaoSocial"===r||h||!y||u){a.next=40;break}return(w=l.find((function(a){return a.seguradora===e.state.seguradora})))&&(O=w.id),C={empresa:s.razaoSocial,codigoEmpresa:s.codigoEmpresa,apolice:m,seguradora:b,seguradoraId:O,dataEmissao:p,vencimento:v,placas:[],veiculos:[]},a.next=40,e.setState({insurance:C,seguradoraId:O});case 40:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleBlur=function(a){var t=e.props.redux,n=t.seguradoras,r=t.seguros,o=e.state,i=o.seguradora,l=o.selectedEmpresa,c=a.target.name,s=null===l||void 0===l?void 0:l.codigoEmpresa;if("seguradora"===c){var d=[],u=n.find((function(e){return e.seguradora.toLowerCase().match(i.toLowerCase())}));u&&i.length>2&&e.setState({seguradora:u.seguradora,seguradoraId:u.id}),!u&&i.length>2&&e.setState({openAlertDialog:!0,alertType:"seguradoraNotFound",seguradora:void 0}),l&&!i?(d=r.filter((function(e){return e.codigoEmpresa===s})),e.setState({seguros:d})):l||""===i?l&&""!==i&&(d=r.filter((function(e){return e.codigoEmpresa===s})).filter((function(e){return e.seguradora===i})),e.setState({seguros:d})):(d=r.filter((function(e){return e.seguradora===i})),e.setState({seguros:d}))}if("dataEmissao"===c||"vencimento"===c){var m=we();m?e.setState({errors:m}):e.setState({errors:void 0})}},e.showAllPlates=function(){var a=e.state,t=a.insurance,n=a.allPlates,r=[],o={};(null===t||void 0===t?void 0:t.placas)&&(r=t.placas),n.forEach((function(e){return Object.assign(o,Object(f.a)({},e,!1))})),r.forEach((function(e){return Object.assign(o,Object(f.a)({},e,!0))})),e.setState({allPlatesObj:o,insuredPlates:r,showAllPlates:!e.state.showAllPlates})},e.handleCheck=function(){var a=Object(w.a)(j.a.mark((function a(t){var n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:(n=Object(h.a)({},e.state.allPlatesObj))[t]=!n[t],!0===n[t]?e.addPlate(t):e.removeFromInsurance(t),e.setState({allPlatesObj:n});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.selectAllPlates=function(){var a=e.state,t=a.allPlates,n=a.selectAll,r={};t&&t.forEach((function(a){n?(r[a]=!1,e.removeFromInsurance(a)):(r[a]=!0,e.addPlate(a,!0))})),e.setState({selectAll:!n,allPlatesObj:r})},e.addPlate=function(){var a=Object(w.a)(j.a.mark((function a(t,n){var r,o,i,l,c,s,d,u,m;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.state,o=r.apolice,i=r.allVehicles,l=r.deletedVehicles,c=r.insurance,s=i.find((function(e){return e.placa===t})),t&&""!==t){a.next=3;break}return a.abrupt("return");case 3:if(void 0!==s&&!1!==s.hasOwnProperty("veiculoId")){a.next=8;break}return e.setState({openAlertDialog:!0,alertType:"plateNotFound"}),a.abrupt("return",null);case 8:if(!(c&&c.placas&&s.placa)||n){a.next=13;break}if(!c.placas.find((function(e){return e===s.placa}))){a.next=13;break}return e.setState({openAlertDialog:!0,alertType:"plateExists"}),a.abrupt("return",null);case 13:o&&c&&(d=Object(h.a)({},c),u=s.veiculoId,d.placas&&d.placas[0]||(d.placas=[]),d.veiculos&&d.veiculos[0]||(d.veiculos=[]),d.placas.includes(t)||d.placas.push(t),d.veiculos.includes(u)||d.veiculos.push(u),l.includes(u)&&(m=l.indexOf(u),l.splice(m,1)),e.renderPlacas(null===d||void 0===d?void 0:d.placas),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 374 ~ Seguro ~ addPlate= ~ update",d),e.setState({insurance:d,addedPlaca:"",deletedVehicles:l}));case 14:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.removeFromInsurance=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f,b,g,E,x;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.state,r=n.apolice,o=n.allVehicles,i=o.find((function(e){return e.placa===t})),l=i.veiculoId,c=i.placa,s=Object(h.a)({},e.state.insurance),d=Object(v.a)(e.state.deletedVehicles),u=[],m=[],(f=e.props.redux.seguros.find((function(e){return e.apolice===r})))&&f.placas&&(p=f.placas.includes(c)),p&&(b=s.veiculos,g=b.indexOf(l),d.includes(b[g])||(d.push(b[g]),e.setState({deletedVehicles:d}))),s.placas&&(u=s.placas),s.veiculos&&(m=s.veiculos),E=u.indexOf(c),x=m.indexOf(l),s.placas.splice(E,1),s.veiculos.splice(x,1),a.next=12,e.setState({insurance:s});case 12:e.renderPlacas();case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.updateInsurance=function(){var a=e.state,t=a.insurance,n=a.dataEmissao,r=a.vencimento,o=a.seguradoraId,i=t.id,l=t.veiculos,c={},s=!je()(n).isSame(je()(t.dataEmissao)),d=!je()(r).isSame(je()(t.vencimento)),u=o!==t.seguradoraId;if(!s&&!d&&u)return null;s&&(c.data_emissao=n),d&&(c.vencimento=r),u&&(c.seguradora_id=o);var m={id:i,columns:Object.keys(c),updates:c,vehicleIds:l};T.a.put("/api/updateInsurance",m).then((function(e){return console.log(e.data)}))},e.handleSubmit=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f,v,b,g,E,x,S,y,O,w,C,k,D,I,N;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state,r=n.seguradora,o=n.insurance,i=n.errors,l=n.deletedVehicles,c=n.seguradoraId,s=n.apolice,d=n.dataEmissao,u=n.vencimento,m=n.selectedEmpresa,p=n.demand,f=n.demandFiles,v=n.apoliceDoc,b=n.info,g=[],!i||!i[0]){a.next=5;break}return e.setState(Object(h.a)(Object(h.a)({},e.state),we("setState"))),a.abrupt("return");case 5:if(r&&""!==r){a.next=8;break}return e.setState({openAlertDialog:!0,alertType:"seguradoraNotFound",seguradora:void 0}),a.abrupt("return");case 8:if((null===o||void 0===o?void 0:o.veiculos)&&o.veiculos[0]){a.next=11;break}return e.setState({openAlertDialog:!0,customTitle:"Nenhum ve\xedculo inserido",customMsg:'N\xe3o foi inserido nenhum ve\xedculo para o seguro informado. Para inserir, digite a placa no campo "Insira a placa" ou clique para selecionar a(s) placa(s) do(s) ve\xedculo(s) coberto(s) por esse seguro.'}),a.abrupt("return");case 11:if(E={apolice:s,seguradora_id:c,codigo_empresa:m.codigoEmpresa},x=je()(d,"YYYY-MM-DD",!0),S=je()(u,"YYYY-MM-DD",!0),y=x.isValid(),O=S.isValid(),w=S.isSameOrBefore(x,"day"),C=S.isBefore(je()(),"day"),k=x.isAfter(je()(),"day"),D=x.isSameOrBefore(je()(),"day"),!w){a.next=15;break}return alert("A data de vencimento informada \xe9 anterior ao in\xedcio da vig\xeancia."),a.abrupt("return");case 15:if(!C){a.next=18;break}return alert("O seguro informado est\xe1 vencido."),a.abrupt("return");case 18:if(k&&(E.situacao="Aguardando in\xedcio da vig\xeancia"),D&&(E.situacao="Vigente"),y&&(E.data_emissao=d),O&&(E.vencimento=u),p){a.next=32;break}return o&&(g=o.veiculos),E.codigoEmpresa,(I=Object(Y.a)(E,["codigoEmpresa"])).seguradora=r,I=A.a.camelizeKeys(I),N={empresaId:null===m||void 0===m?void 0:m.codigoEmpresa,history:Object(h.a)(Object(h.a)({},I),{},{vehicleIds:g,files:v}),demandFiles:f,metadata:{fieldName:"apoliceDoc",apolice:s,empresaId:null===m||void 0===m?void 0:m.codigoEmpresa},historyLength:0,approved:t},l[0]&&(N.history.deletedVehicles=l),Te(N),e.confirmAndResetState("Solicita\xe7\xe3o de cadastro de seguro enviada"),a.abrupt("return");case 32:!1===t&&(Te({id:p.id,history:{info:b},declined:!0}).then((function(e){return console.log(e)})),e.confirmAndResetState("Solicita\xe7\xe3o indeferida!")),!0===t&&e.approveInsurance(E);case 34:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.approveInsurance=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f,v,b,g,E,x,S,y,O;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.props.redux.seguros,r=e.state,o=r.apolice,i=r.vencimento,l=r.dataEmissao,c=r.seguradoraId,s=r.insurance,d=r.demand,u=r.demandFiles,m=s.veiculos,p={table:"veiculos",column:"apolice",value:o,tablePK:"veiculo_id",ids:m},!(f=n.find((function(e){return e.apolice===o})))){a.next=17;break}if(v=je()(f.dataEmissao).isSame(je()(l)),b=je()(f.vencimento).isSame(je()(i)),g=JSON.stringify(m)===JSON.stringify(f.veiculos),console.log("\ud83d\ude80 ~ file: Seguros.jsx ~ line 579 ~ Seguro ~ JSON.stringify(vehicleIds)",f),!(v&&b&&g)){a.next=9;break}return e.setState({openAlertDialog:!0,customTitle:"Seguro existente",customMsg:"O seguro informado j\xe1 existe no sistema. Para cadastrar um novo seguro, altere o n\xfamero da ap\xf3lice, ou as datas de emiss\xe3o e vencimento."}),a.abrupt("return");case 9:if("Vigente"!==t.situacao){a.next=17;break}return x={dataEmissao:l,vencimento:i,seguradoraId:c,situacao:t.situacao},x=A.a.decamelizeKeys(x),S=Object.keys(x),y={id:null===f||void 0===f?void 0:f.id,vehicleIds:m,columns:S,updates:x},a.next=15,T.a.put("/api/updateInsurance",Object(h.a)({},y));case 15:(O=null===d||void 0===d||null===(E=d.history[0])||void 0===E?void 0:E.deletedVehicles)&&(p.deletedVehicles=O);case 17:if("Aguardando in\xedcio da vig\xeancia"!==t.situacao){a.next=22;break}return t.veiculos=m,console.log(Object(h.a)({},t)),a.next=22,T.a.post("/api/cadSeguroMongo",Object(h.a)({},t));case 22:if("Vigente"!==t.situacao||f){a.next=25;break}return a.next=25,T.a.post("/api/cadSeguro",t).then((function(e){200===e.status&&console.log(e.status,"cadSeguroOk")}));case 25:return a.next=27,T.a.put("/api/updateInsurances",p).then((function(a){console.log(a.data),e.setState({dontUpdateProps:!0})}));case 27:Te({id:d.id,demandFiles:u,history:{},metadata:{},approved:!0}),e.confirmAndResetState();case 30:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.confirmAndResetState=function(a){var t=e.state.demand;e.toast(a),e.clearFields(),t&&setTimeout((function(){e.props.history.push("/solicitacoes")}),1500)},e.handleFiles=function(){var a=Object(w.a)(j.a.mark((function a(t){var n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!ge(t)){a.next=2;break}return a.abrupt("return");case 2:return(n=new FormData).append("apoliceDoc",t[0]),a.next=6,e.setState({apoliceDoc:n,fileToRemove:null});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.removeFile=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.state.apoliceDoc,r=ye(t,n),e.setState(Object(h.a)(Object(h.a)({},e.state),r));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.addNewElement=function(){return e.setState({apolice:e.state.newElement,openAddDialog:!1})},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({openAddDialog:!e.state.openAddDialog})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.clearFields=Object(w.a)(j.a.mark((function a(){var t,n,r,o,i,l;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.props.redux,r=n.empresas,o=n.veiculos,i={seguradora:"",insurance:void 0,apolice:"",dataEmissao:"",vencimento:"",apoliceDoc:null,deletedVehicles:[],dropDisplay:"Clique ou arraste para anexar a ap\xf3lice"},l={selectedEmpresa:r[0],razaoSocial:null===(t=r[0])||void 0===t?void 0:t.razaoSocial,frota:o},!r||1!==r.length){a.next=7;break}return a.next=4,e.setState(Object(h.a)(Object(h.a)({},i),l));case 4:e.filterInsurances(),a.next=8;break;case 7:r&&e.setState(Object(h.a)({},i));case 8:case"end":return a.stop()}}),a)}))),e.escFunction=function(a){27===a.keyCode&&(e.state.openAddDialog&&e.toggleDialog(),e.state.showAllPlates&&e.setState({showAllPlates:!1}))},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,n,r,o,i,l,c,s,d,u,m,p,f,v;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.redux,o=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.demand,i=r.empresas,l=r.veiculos,!i||1!==i.length){e.next=5;break}return e.next=4,this.setState({selectedEmpresa:i[0],razaoSocial:null===(c=i[0])||void 0===c?void 0:c.razaoSocial,frota:l});case 4:this.filterInsurances();case 5:if(!o){e.next=17;break}return s=vt(o,r,[]),d=s.latestDoc,s.newMembers,s.oldMembers,s.filteredSocios,u=Object(Y.a)(s,["latestDoc","newMembers","oldMembers","filteredSocios"]),m=null===o||void 0===o?void 0:o.history[0],p={},st.forEach((function(e){var a=e.field;m.hasOwnProperty(a)&&(p[a]=m[a])})),f=r.veiculos.filter((function(e){return m.vehicleIds.some((function(a){return a===e.veiculoId}))})),p.placas=f.map((function(e){return e.placa})),p.veiculos=f.map((function(e){return e.veiculoId})),v=null===m||void 0===m?void 0:m.seguradoraId,e.next=14,this.setState(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},this.state),u),p),{},{insurance:p,demand:o,seguradoraId:v,demandFiles:[d]}));case 14:return e.next=16,this.filterInsurances();case 16:this.renderPlacas();case 17:document.addEventListener("keydown",this.escFunction,!1);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.openAlertDialog,o=a.alertType,i=a.openAddDialog,l=a.showAllPlates,c=a.allPlates,s=a.allPlatesObj,d=a.selectAll,u=a.customTitle,m=a.customMsg,p=this.props.redux,f=p.empresas,v=p.seguradoras,h=p.seguros,b=st.every((function(a){return e.state.hasOwnProperty(a.field)&&""!==e.state[a.field]}));return r.a.createElement(n.Fragment,null,r.a.createElement(mt,{data:this.state,empresas:f,seguros:h,seguradoras:v,enableAddPlaca:b,handleInput:this.handleInput,handleBlur:this.handleBlur,addPlate:this.addPlate,removeFromInsurance:this.removeFromInsurance,enableChangeApolice:this.toggleDialog,handleFiles:this.handleFiles,handleSubmit:this.handleSubmit,showAllPlates:this.showAllPlates,setShowPendencias:this.setShowPendencias,removeFile:this.removeFile}),i&&r.a.createElement(ft,{open:i,close:this.toggleDialog,title:"Alterar n\xfamero da ap\xf3lice",helperMessage:"Informe o n\xfamero atualizado da ap\xf3lice.",handleInput:this.handleInput,addNewElement:this.addNewElement}),l&&r.a.createElement(pt,{items:c,close:this.showAllPlates,title:"Selecione as placas para adicionar \xe0 ap\xf3lice.",handleCheck:this.handleCheck,data:s,selectAll:d,selectAllPlates:this.selectAllPlates}),t&&r.a.createElement(Ha,{open:t,close:this.closeAlert,alertType:o,customTitle:u,customMessage:m}),r.a.createElement(ee,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}))}}]),t}(n.Component));function gt(e){var a,t,o=e.open,i=e.type,l=e.close,c=e.confirm,s=e.element,d=e.id,u=e.index;e.customTitle,e.customMessage;return"delete"===i&&(a="Confirmar exclus\xe3o",t="Tem certeza que deseja excluir esse registro?",s&&(t=t.replace("?",": "))),a&&t?r.a.createElement("div",null,r.a.createElement(_a.a,{open:o,onClose:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Ya.a,{id:"alert-dialog-title"},a),r.a.createElement(Ba.a,null,r.a.createElement(Ua.a,{id:"alert-dialog-description"},s?r.a.createElement(n.Fragment,null,t,r.a.createElement("strong",null,"  ",s,"    "),"?"):t)),r.a.createElement(Ra.a,null,r.a.createElement(He.a,{onClick:l,autoFocus:!0}," Cancelar "),r.a.createElement(He.a,{onClick:function(){return c(d||u)},color:"primary"}," Confirmar ")))):null}var Et=[{field:"id",label:"N\xfamero do laudo",maxLength:30},{field:"validade",label:"Data de validade",type:"date"},{field:"empresaLaudo",label:"Empresa emissora",select:!0}],xt=function(e){var a=e.veiculoId,t=e.city,n=e.placa,o=e.onClick,i=e.style;return r.a.createElement("div",{id:a,onClick:o,style:i,className:"placaContainer"},r.a.createElement("div",{className:"placaCity"},t),r.a.createElement("div",{className:"placaCode"},n))},St=t(120),yt=t.n(St);function Ot(e){var a=e.table,t=e.docsCollection,n=e.length,o=e.title,i=e.style,l=e.idIndex,c=void 0===l?0:l,s=e.filePK,d=e.deleteIconProperties,u=void 0===d?{}:d,m=e.deleteFunction,p=a.tableHeaders,f=a.arrayOfRows,v=a.docs;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",style:i,colSpan:n},o)),r.a.createElement("tr",null,p.map((function(e,a){return r.a.createElement("th",{key:a,style:i},e)})))),r.a.createElement("tbody",null,f.map((function(e,a){return r.a.createElement("tr",{key:a},e.map((function(a,n){var o,l;return r.a.createElement("td",{key:n,style:i,className:"link"===a.type&&a.fileId?"link2":"review",onClick:function(){var n;return a.field===s&&a.fileId?function(e){var a=v.find((function(a){return a.id===e}));e&&a&&ha(a.id,a.filename,t,a.metadata.fieldName)}(a.fileId):"delete"===(null===a||void 0===a?void 0:a.action)?m(null===(n=e[c])||void 0===n?void 0:n.value):null}},"date"===a.type?(l=a.value,je()(l,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?je()(l,je.a.ISO_8601,!0).format("DD/MM/YYYY"):l):"delete"===(null===a||void 0===a?void 0:a.action)&&(null===(o=e[c])||void 0===o?void 0:o.value)?r.a.createElement(yt.a,u):a.value)})))}))))}var jt=t(214),wt=t(6),Ct=Object(wt.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return r.a.createElement(jt.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"}},e))})),kt=function(e){var a=e.anchorEl,t=e.handleClose,n=e.menuOptions;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ct,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:t},n.map((function(e,a){var t=e.title,n=e.onClick;return r.a.createElement(qe.a,{key:a,onClick:n},t)}))))},Dt=t(246),It=t.n(Dt),Nt=t(151),At=t.n(Nt),Pt=r.a.memo((function(e){var a=e.empresas,t=e.razaoSocial,n=e.selectedEmpresa,o=e.filteredVehicles,i=e.selectedVehicle,l=e.stateInputs,c=e.selectOptions,s=e.table,d=e.anchorEl,u=e.laudoDoc,m=e.dropDisplay,p=e.functions,f=e.demand,v=e.demandFiles,b=e.showPendencias,g=e.info,E=e.fileToRemove,x=null===i||void 0===i?void 0:i.placa,S=p.handleInput,y=p.clickOnPlate,O=p.showDetails,j=p.handleFiles,w=p.handleSubmit,C=p.closeMenu,k=p.clear,D=p.removeFile,I=p.deleteLaudo,N=p.setShowPendencias,A=function(e){if(!(e&&e[0]&&e[0].validade))return{backgroundColor:"rgb(136, 13, 13)"};var a=e[0].validade;return je()(a,je.a.ISO_8601).isValid()&&je()(a).isAfter(je()().toDate())?{backgroundColor:"rgb(13, 136, 13)"}:je()(a,je.a.ISO_8601).isValid()&&je()(a).isBefore(je()().toDate())?{backgroundColor:"rgb(197, 128, 0)"}:void 0};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Aa,{links:["Ve\xedculos","/veiculos"],text:"Laudos",demand:f,selectedEmpresa:n}),r.a.createElement("div",{style:f?{marginTop:"15px"}:{}},r.a.createElement(Me,{empresas:a,data:{razaoSocial:t,demand:f},headerTitle:x&&n&&"Cadastro de laudo veicular ".concat(x," - ").concat(null===n||void 0===n?void 0:n.razaoSocial),handleInput:S})),n&&!Array.isArray(n)&&r.a.createElement(r.a.Fragment,null,!f&&r.a.createElement("header",{className:"flex",style:{marginBottom:"15px",justifyContent:"space-between"}},i?r.a.createElement(xt,{veiculoId:i.veiculoId,onClick:y,style:Object(h.a)(Object(h.a)({},A(i.laudos)),{},{marginLeft:0}),city:n.cidade,placa:i.placa}):r.a.createElement(Be,{subtitle:"Selecione o ve\xedculo para atualizar consultar ou inserir o laudo de seguran\xe7a veicular.",style:{marginTop:"25px"}}),r.a.createElement("div",null,r.a.createElement(Ve.a,{inputProps:{name:"placa"},InputLabelProps:{style:{fontSize:"0.8rem"}},label:"Filtrar",onChange:S}),r.a.createElement(ct.a,{style:{marginTop:"10px"}}))),i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"paper",style:f?{marginTop:"15px"}:{}},r.a.createElement(Be,{subtitle:f?"Verifique as informa\xe7\xf5es abaixo, confira com o laudo anexo e escolha uma das op\xe7\xf5es abaixo.":"Para inserir novo laudo, informe o n\xfamero, a data de vencimento, a empresa que emitiu e anexe o documento referente ao laudo."}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Re,{form:Et,data:l,handleInput:S,selectOptions:c}),f?v&&r.a.createElement(Sa,{demand:f,collection:"vehicleDocs",demandFiles:v,form:[{title:"Laudo veicular",name:"laudoDoc"}]}):r.a.createElement(ia,{name:"laudoDoc",formData:u,dropDisplay:m,handleFiles:j,removeFile:D,fileToRemove:E,single:!0,style:{width:"400px",margin:"15px auto 0 auto"}})),r.a.createElement("section",null,n&&!f?r.a.createElement(He.a,{size:"small",color:"primary",className:"saveButton",variant:"contained",onClick:function(){return w()}},"Cadastrar Laudo"):n&&f?r.a.createElement(Ta,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:f,setShowPendencias:function(){return N(!b)},showPendencias:b,info:g,handleSubmit:w,handleInput:S}):null)),r.a.createElement("section",null,r.a.createElement("h4",null,i?null:r.a.createElement("div",{className:"flex",style:{justifyContent:"space-between"}},r.a.createElement("div",null,"Exibindo ".concat(o.length," ve\xedculos com mais de 15 anos.")),r.a.createElement("div",{className:"flex placasCaption",style:{fontSize:"0.8rem"}},r.a.createElement("span",null,r.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(13, 136, 13)"}},r.a.createElement(It.a,null))," Laudo vigente"),r.a.createElement("span",null,r.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(197, 128, 0)"}},r.a.createElement(It.a,null))," Laudo vencido                                            "),r.a.createElement("span",null,r.a.createElement("span",{style:{paddingTop:"5px",color:"rgb(136, 13, 13)"}},r.a.createElement(It.a,null))," Nenhum Laudo cadastrado"))))),!i&&r.a.createElement("section",{className:"center flex paper"},o.map((function(e,a){return r.a.createElement(xt,{key:a,veiculoId:e.veiculoId,onClick:y,style:A(e.laudos),city:n.cidade,placa:e.placa})}))),r.a.createElement(kt,{anchorEl:d,handleClose:C,menuOptions:[{title:"Detalhes",onClick:O}]})),i&&i.laudos&&!f&&r.a.createElement(r.a.Fragment,null,"object"===typeof s?r.a.createElement("div",{className:"paper",style:{marginTop:"52px",width:"100%",padding:"0",borderRadius:"5px",overflow:"hidden"}},r.a.createElement(Ot,{length:s.tableHeaders.length,title:"Laudos vinculados ao ve\xedculo placa ".concat(i.placa),table:s,style:{textAlign:"center",padding:"8px 0"},deleteIconProperties:{color:"secondary",title:"Apagar Laudo",style:{cursor:"pointer"}},deleteFunction:I,idIndex:1,filePK:"laudoDoc",docsCollection:"vehicleDocs"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,s)),r.a.createElement("div",{className:"voltarDiv",onClick:k},r.a.createElement(At.a,{size:"small"}),r.a.createElement("span",{style:{padding:"2px 0 0 2px",marginLeft:"2px",fontSize:"1rem"}},"Voltar"))))}));var Tt={field:"razaoSocial",label:"Empresa",width:"340px"},Ft={field:"createdAt",label:"Data do registro no sistema",type:"date",width:"190px"},zt={field:"cnpj",label:"CNPJ",maxLength:18,pattern:/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/,errorHandler:function(e){return function(e){if(""===(e=e.replace(/[^\d]+/g,"")))return!1;if(14!==e.length)return!1;if("00000000000000"===e||"11111111111111"===e||"22222222222222"===e||"33333333333333"===e||"44444444444444"===e||"55555555555555"===e||"66666666666666"===e||"77777777777777"===e||"88888888888888"===e||"99999999999999"===e)return!1;for(var a=e.length-2,t=e.substring(0,a),n=e.substring(a),r=0,o=a-7,i=a;i>=1;i--)r+=t.charAt(a-i)*o--,o<2&&(o=9);if((r%11<2?0:11-r%11).toString()!==n.charAt(0))return!1;a+=1,t=e.substring(0,a),r=0,o=a-7;for(var l=a;l>=1;l--)r+=t.charAt(a-l)*o--,o<2&&(o=9);return(r%11<2?0:11-r%11).toString()===n.charAt(1)}(e)}},Lt={field:"cpfSocio",label:"CPF",maxLength:14,width:190,errorHandler:function(e){return function(e){if(e){var a,t;if(a=0,"00000000000"===e)return!1;for(var n=1;n<=9;n++)a+=parseInt(e.substring(n-1,n))*(11-n);if(10!==(t=10*a%11)&&11!==t||(t=0),t!==parseInt(e.substring(9,10)))return!1;a=0;for(var r=1;r<=10;r++)a+=parseInt(e.substring(r-1,r))*(12-r);return 10!==(t=10*a%11)&&11!==t||(t=0),t===parseInt(e.substring(10,11))}}((a=e)?a.replace(/(\.|\/|-)/g,""):void 0);var a}},Mt={label:"Telefone",maxLength:15,pattern:"((([+][0-9]{1,3})?[ ]?[-]?[(]?[0-9]{2,3}[)]?[ ]?[-]?[0-9]{4,5}[ ]?[-]?[0-9]{4}))"},qt={label:"E-mail",type:"email",maxLength:60,pattern:"[a-zA-Z0-9]@[a-zA-Z0-9]{1,20}?[.]([a-zA-Z0-9])"},Vt=[{field:"razaoSocial",width:"540px"},{field:"rua",width:"540px"},{field:"situacao",label:"Situa\xe7\xe3o"},{field:"codigoEmpresa",label:"C\xf3digo da Empresa"},Object(h.a)(Object(h.a)({},Ft),{},{width:"150px"}),{field:"frota",label:"Tamanho da Frota"}],_t=[Object(h.a)({},Tt),Object(h.a)({},Ft)],Rt=[Object(h.a)({},Tt),Object(h.a)({},Ft),Object(h.a)({},{field:"placas",label:"Ve\xedculos cadastrados",width:"340px"}),{field:"segurados",label:"N\xfamero de ve\xedculos segurados"}],Bt=[{field:"dataRegistro",label:"Data do registro no sistema",type:"date"},{field:"cmt",label:"CMT (t)"},{field:"pbt",label:"Peso Bruto Total"},{field:"situacao",label:"Situa\xe7\xe3o"},{field:"indicadorIdade",label:"Indicador de idade"},{field:"equipamentos",label:"Equipamentos"},{field:"marcaChassi",label:"Marca do Chassi"},{field:"marcaCarroceria",label:"Marca da Carroceria"},{field:"sipro",label:"SEI"},{field:"compartilhado",label:"Compartilhado por"},{field:"codigoCompartilhado",label:"C\xf3digo Del. Compartilhado"},{field:"empresaLaudo",label:"Empresa Laudo"},{field:"numeroLaudo",label:"N\xfamero do Laudo"},{field:"vencimentoLaudo",label:"Validade do Laudo",type:"date"}],Ut=[[{field:"placa",label:"Placa",margin:"normal",maxLength:8,pattern:"[a-zA-Z]{3}[-]?[ ]?\\d{4}|[A-Z]{3}[-]?[ ]?[0-9]{1}[A-Z]{1}[0-9]{2}"},{field:"renavam",label:"Renavam",margin:"normal",maxLength:11,pattern:/^(\d{9}|\d{11})$/},{field:"utilizacao",label:"Utiliza\xe7\xe3o",margin:"normal",select:!0,options:["Comercial","Comercial Executivo","Convencional","Convencional Executivo","Leito","Leito e Executivo","Semi-Leito","Semi-Leito Executivo"]},{field:"nChassi",label:"N\xfamero do Chassi",margin:"normal",maxLength:17},{field:"modeloChassi",label:"Modelo do Chassi",margin:"normal",datalist:"modeloChassi",autoComplete:!0,collection:"modelosChassi"},{field:"anoChassi",label:"Ano do Chassi",margin:"normal",type:"number",max:Number((new Date).getFullYear()),min:Number((new Date).getFullYear())-10},{field:"valorChassi",label:"Valor do Chassi (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"modeloCarroceria",label:"Modelo da Carroceria",margin:"normal",datalist:"modelo",autoComplete:!0,collection:"carrocerias"},{type:"number",field:"anoCarroceria",label:"Ano da Carroceria",margin:"normal",max:Number((new Date).getFullYear()+1),min:Number((new Date).getFullYear())-10},{field:"valorCarroceria",label:"Valor da Carroceria (R$)",margin:"normal",zero:!0,pattern:"^.{9,12}$",minLength:8,maxLength:11},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",margin:"normal",select:!0,options:["Ve\xedculo pr\xf3prio","Leasing","Possuidor"]},{field:"cores",label:"Cores",margin:"normal",maxLength:50}]].concat([st]).concat([We]),Yt=[{field:"razaoSocial",label:"Raz\xe3o Social"},Object(h.a)(Object(h.a)({},zt),{},{maxLength:18,pattern:/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/}),{field:"inscricaoEstadual",label:"Inscri\xe7\xe3o Estadual",maxLength:13,pattern:"\\d{13}"},Object(h.a)(Object(h.a)({},Mt),{},{field:"telefone",label:"Telefone"}),Object(h.a)(Object(h.a)({},qt),{},{field:"email",label:"E-mail"}),{field:"cep",label:"CEP",maxLength:10},{field:"rua",label:"Rua",maxLength:100},{field:"numero",label:"N\xfamero",type:"number",max:32e3},{field:"complemento",label:"Complemento",maxLength:20},{field:"bairro",label:"Bairro",maxLength:40},{field:"cidade",label:"Cidade",maxLength:60},{field:"uf",label:"Estado",maxLength:2,pattern:"[A-Z]{2}"},{field:"numeroContrato",label:"N\xfamero do Contrato Social"},{field:"vencimentoContrato",label:"Vencimento do Cadastro - CRC",type:"date"}],Ht=[{field:"nomeSocio",label:"Nome do S\xf3cio",maxLength:90,width:195},Object(h.a)(Object(h.a)({},Lt),{},{width:195}),Object(h.a)(Object(h.a)({},Mt),{},{field:"telSocio",width:195}),Object(h.a)(Object(h.a)({},qt),{},{field:"emailSocio",width:195}),{field:"share",label:"Participa\xe7\xe3o Societ\xe1ria (%)",type:"number",max:100,width:195}],Jt=[{field:"nomeProcurador",label:"Nome do Procurador",maxLength:90,width:220},Object(h.a)(Object(h.a)({},Lt),{},{field:"cpfProcurador",width:220}),Object(h.a)(Object(h.a)({},Mt),{},{field:"telProcurador",width:220}),Object(h.a)(Object(h.a)({},qt),{},{field:"emailProcurador",width:220}),{field:"createdAt",label:"Data de inclus\xe3o no sistema",type:"date",width:220}],Kt=function(e,a){if(a){delete a.tableData;var t=[],n=Wt(e);return Object.keys(a).forEach((function(r){if(3===e){var o=a,i=(o.veiculoId,o.laudoId,o.tableData,o.modeloChassiId,o.modeloCarroceriaId,o.codigoEmpresa,o.vencimentoContrato,o.delegatarioCompartilhado,o.acessibilidadeId,o.equipamentosId,o.compartilhadoId,Object(Y.a)(o,["veiculoId","laudoId","tableData","modeloChassiId","modeloCarroceriaId","codigoEmpresa","vencimentoContrato","delegatarioCompartilhado","acessibilidadeId","equipamentosId","compartilhadoId"]));a=i}n.forEach((function(e){var n=e.field,o=e.label,i=e.type,l=e.width;e.fullWidth;if(r===n){var c={};Object.assign(c,{field:n,label:o,value:a[r]}),i&&Object.assign(c,{type:i}),l&&Object.assign(c,{width:l}),t.push(c),c={}}}))})),Object.keys(a).forEach((function(n){t.find((function(e){return e.field===n}))||3!==e||t.push({field:n,label:n,value:a[n]})})),t}};function Wt(e){var a;switch(e){case 0:return a=function(e,a){var t,n=[],r=Object(v.a)(a);return e.forEach((function(e){r.forEach((function(a,o){e.field===a.field?(t=Object.assign({},e,a),r.splice(o,1),n.push(t)):n.find((function(a){return a.field===e.field}))||n.push(e)}))})),n=n.concat(r)}(Yt,Vt);case 1:return a=Ht.concat(_t);case 2:return a=Jt;case 3:var t=[];return Ut.forEach((function(e){t.push.apply(t,Object(v.a)(e))})),a=t.concat.apply(t,Object(v.a)(Bt));case 4:return a=st.concat(Rt);default:return a}}var $t=[{field:"nomeProcurador",title:"Nome"},{field:"cpfProcurador",title:"CPF"},{field:"emailProcurador",title:"E-mail"},{field:"telProcurador",title:"Telefone"},{field:"vencimento",title:"Validade da procura\xe7\xe3o",type:"date",format:function(e){return e||"Prazo indeterminado"}},{field:"fileId",title:"Baixar Procura\xe7\xe3o",type:"link"}],Gt=[{field:"numeroAlteracao",label:"N\xfamero da altera\xe7\xe3o"},{field:"numeroRegistro",label:"Registro na junta comercial"},{field:"numeroSei",label:"N\xfamero do registro SEI"},{field:"createdAt",label:"Registro no CadTI",type:"date",format:function(e){return e||"Nenhuma data informada"}},{field:"dataJunta",label:"Registro na Junta Comercial",type:"date",format:function(e){return e||"Nenhuma data informada"}},{field:"fileId",label:"Baixar altera\xe7\xe3o contratual",value:"Clique para baixar o arquivo",type:"link"}],Xt=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:e.id,className:"obs__label"},e.label),r.a.createElement("textarea",Object.assign({className:"obs__textArea",cols:"30",disabled:!0},e)))},Zt=[{field:"razaoSocial",title:"Empresa",maxLength:90,width:220},{field:"codigoEmpresa",title:"C\xf3digo da empresa",width:220},{field:"status",title:"Status",width:220},{field:"vencimento",title:"Validade da procura\xe7\xe3o",type:"date",format:function(e){return e||"Prazo indeterminado"}},{field:"fileId",title:"Baixar Procura\xe7\xe3o",type:"link"}];function Qt(e){var a=e.data,t=e.tab,o=e.title,i=e.header,l=e.close,c=e.empresas,s=e.procuracoes,d=e.procuradores,u=e.empresaDocs,m=e.altContrato,p=Object(n.useState)(),f=Object(ze.a)(p,2),v=f[0],b=f[1],g=Object(n.useState)(),E=Object(ze.a)(g,2),x=E[0],S=E[1],y=Object(n.useState)([]),O=Object(ze.a)(y,2),C=O[0],k=O[1],D=Kt(t,a)||[],I=D.find((function(e){return"obs"===e.field})),N=D.find((function(e){return"equipamentos"===e.field})),A=D.find((function(e){return"acessibilidade"===e.field}));Object(n.useEffect)((function(){var e,n,r,o=null===(e=D.find((function(e){return"razaoSocial"===e.field})))||void 0===e?void 0:e.value,i=null===(n=c.find((function(e){return e.razaoSocial===o})))||void 0===n?void 0:n.codigoEmpresa,l=s.filter((function(e){return e.codigoEmpresa===i})),m=u.filter((function(e){var a,t;return"procuracao"===(null===(a=e.metadata)||void 0===a?void 0:a.fieldName)&&(null===(t=e.metadata)||void 0===t?void 0:t.empresaId)===i})),p=[],f=[],v=[],g=[];if(function(e){0===e&&(d.forEach((function(e){l.forEach((function(a){if(a.procuradores.some((function(a){return a===e.procuradorId}))){var t=Object(h.a)(Object(h.a)({},e),{},{vencimento:a.vencimento}),n=u.find((function(e){return e.metadata.procuracaoId===a.procuracaoId}));n&&(t.fileId=null===n||void 0===n?void 0:n.id),p.push(t)}}))})),p.forEach((function(e){$t.forEach((function(a){var t=a.field;if(f.some((function(e){return e===a.title}))||f.push(a.title),e.hasOwnProperty(t)&&!g.some((function(e){return e.hasOwnProperty(t)}))){if(r="fileId"===t&&e.fileId?Object(h.a)(Object(h.a)({},a),{},{value:"Clique para baixar a procura\xe7\xe3o",fileId:e.fileId}):Object(h.a)(Object(h.a)({},a),{},{value:e[t]}),a.format){var n=a.format(e[t]);r=Object(h.a)(Object(h.a)({},a),{},{value:n})}g.push(r)}})),v.push(g),g=[]})),p[0]&&b({mainTitle:"Procuradores cadastrados para ".concat(null===a||void 0===a?void 0:a.razaoSocial),tableHeaders:f,arrayOfRows:v,docs:m}),P())}(t),2===t){var E,x=null===a||void 0===a?void 0:a.procuradorId,S=s.filter((function(e){return e.procuradores.includes(x)}));S.forEach((function(e){var a;E=u.find((function(a){var t=a.metadata;return(null===t||void 0===t?void 0:t.procuracaoId)===e.procuracaoId})),e.fileId=null===(a=E)||void 0===a?void 0:a.id})),S.forEach((function(e){Zt.forEach((function(a){var t=a.field;if(f.some((function(e){return e===a.title}))||f.push(a.title),e.hasOwnProperty(t)&&!g.some((function(e){return e.hasOwnProperty(t)}))){if(r="fileId"===t&&e.fileId?Object(h.a)(Object(h.a)({},a),{},{value:"Clique para baixar a procura\xe7\xe3o",fileId:e.fileId}):Object(h.a)(Object(h.a)({},a),{},{value:e[t]}),a.format){var n=a.format(e[t]);r=Object(h.a)(Object(h.a)({},a),{},{value:n})}g.push(r)}})),v.push(g),g=[]})),S[0]&&b({mainTitle:"Procura\xe7\xf5es cadastrados para ".concat(null===a||void 0===a?void 0:a.nomeProcurador),tableHeaders:f,arrayOfRows:v,docs:u})}}),[t,m]);var P=function(){var e=Object(w.a)(j.a.mark((function e(){var t,n,r,o,i,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m&&(t=m.filter((function(e){return e.codigoEmpresa===a.codigoEmpresa})),n=u.filter((function(e){var t;return"altContratoDoc"===(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.fieldName)&&(null===e||void 0===e?void 0:e.metadata.empresaId)===a.codigoEmpresa})),r=[],o=[],i=[],l={},t.forEach((function(e){Gt.forEach((function(a){var t=a.field;if(r.includes(a.label)||r.push(a.label),"fileId"===t||e.hasOwnProperty(t)&&!i.some((function(e){return e.hasOwnProperty(t)}))){if("fileId"===t){var o,c=n.find((function(a){return a.metadata.numeroAlteracao===e.numeroAlteracao}));c=null===(o=c)||void 0===o?void 0:o.id,l=c?Object(h.a)(Object(h.a)({},a),{},{value:null===a||void 0===a?void 0:a.value,fileId:c}):Object(h.a)(Object(h.a)({},a),{},{value:"-"})}else l=Object(h.a)(Object(h.a)({},a),{},{value:e[t]});if(a.format){var s=a.format(e[t]);l=Object(h.a)(Object(h.a)({},a),{},{value:s})}i.push(l)}})),o.push(i),i=[]})),t[0]&&S({mainTitle:"Altera\xe7\xf5es do contrato social - ".concat(null===a||void 0===a?void 0:a.razaoSocial),tableHeaders:r,arrayOfRows:o,docs:n}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=[];v&&e.push(v),x&&e.unshift(x),e[0]&&k(e)}),[v,x]),r.a.createElement("div",{className:"popUpWindow",style:{left:"20%",right:"20%"}},r.a.createElement("h4",{className:"equipaHeader"},o," ",a[i])," ",r.a.createElement("hr",null),r.a.createElement("main",{className:"checkListContainer",style:{justifyContent:"flex-start"}},D.map((function(e,a){var t=e.field,n=e.label,o=e.value,i=e.type,l=e.width;return"obs"!==t&&"equipamentos"!==t&&"acessibilidade"!==t&&r.a.createElement("div",{className:"showDetailsItem",style:{width:l||150},key:a},r.a.createElement(Ve.a,{name:t,label:n,value:"date"!==i?o||"":je()(o).isValid()?je()(o).format("DD/MM/YYYY"):"",InputLabelProps:{shrink:!0,style:{fontSize:"0.9rem",fontWeight:500}},inputProps:{style:{fontSize:"0.7rem",width:l||150,fontColor:"#bbb",textAlign:"center"}},variant:"outlined"}))}))),C[0]&&C.map((function(e,a){return r.a.createElement("section",{key:a},r.a.createElement("hr",{style:{margin:"12px 0"}}),r.a.createElement(Ot,{length:e.tableHeaders.length,title:e.mainTitle,table:e,style:{textAlign:"center",padding:"8px 0"},idIndex:1,filePK:"fileId",docsCollection:"empresaDocs"}))})),3===t&&r.a.createElement("footer",{className:"flexColumn"},(null===N||void 0===N?void 0:N.value)&&r.a.createElement(Xt,{label:"Equipamentos:",name:"equipamentos",id:"equipamentos",defaultValue:null===N||void 0===N?void 0:N.value,rows:"2"}),(null===A||void 0===A?void 0:A.value)&&r.a.createElement(Xt,{label:"Itens de acessibilidade:",name:"acessibilidade",id:"acessibilidade",defaultValue:null===A||void 0===A?void 0:A.value,rows:"2"}),(null===I||void 0===I?void 0:I.value)&&r.a.createElement(Xt,{label:"Observa\xe7\xf5es:",name:"obs",id:"obs",defaultValue:null===I||void 0===I?void 0:I.value,rows:"6"})),r.a.createElement(Ge,{close:l}))}var en=[{field:"empresaLaudo",title:"Empresa Emissora"},{field:"id",title:"N\xfamero do Laudo"},{field:"createdAt",title:"Registro no sistema",type:"date"},{field:"validade",title:"Data de validade",type:"date"},{field:"laudoDoc",title:"Laudo",type:"link"},{field:"delete",title:"Remover",action:"delete",deleteFile:!0}],an=1,tn=ce(["veiculos","empresas","empresasLaudo","laudos","getFiles/vehicleDocs"],(function(e){var a,t,o,i=e.user,l=e.redux,c=l.veiculos,s=l.empresas,d=l.empresasLaudo,u=l.laudos,m=l.vehicleDocs,p=l.logs,b=null===e||void 0===e||null===(a=e.location)||void 0===a||null===(t=a.state)||void 0===t?void 0:t.demand,g=Object.freeze({dropDisplay:"Clique ou arraste o arquivo para anexar o laudo",stateInputs:{id:void 0,validade:"",empresaLaudo:""}}),E=Object(n.useState)(""),x=Object(ze.a)(E,2),S=x[0],y=x[1],O=Object(n.useState)(),C=Object(ze.a)(O,2),k=C[0],D=C[1],I=Object(n.useState)(),N=Object(ze.a)(I,2),A=N[0],P=N[1],F=Object(n.useState)([]),z=Object(ze.a)(F,2),L=z[0],M=z[1],q=Object(n.useState)(!1),V=Object(ze.a)(q,2),_=V[0],R=V[1],B=Object(n.useState)(),U=Object(ze.a)(B,2),H=U[0],J=U[1],K=Object(n.useState)(null),W=Object(ze.a)(K,2),$=W[0],G=W[1],X=Object(n.useState)(g.dropDisplay),Z=Object(ze.a)(X,2),Q=Z[0],ae=Z[1],te=Object(n.useState)(),ne=Object(ze.a)(te,2),re=ne[0],oe=ne[1],ie=Object(n.useState)(Object(h.a)({},g.stateInputs)),le=Object(ze.a)(ie,2),ce=le[0],se=le[1],de=Object(n.useState)(!1),ue=Object(ze.a)(de,2),me=ue[0],pe=ue[1],fe=Object(n.useState)("Laudo enviado com sucesso."),he=Object(ze.a)(fe,2),be=he[0],Ee=he[1],xe=Object(n.useState)(),Se=Object(ze.a)(xe,2),ye=Se[0],Oe=Se[1],je=Object(n.useState)(),Ce=Object(ze.a)(je,2),ke=Ce[0],De=Ce[1],Ie=Object(n.useState)(),Ne=Object(ze.a)(Ie,2),Ae=Ne[0],Pe=Ne[1],Fe=Object(n.useState)(!1),Le=Object(ze.a)(Fe,2),Me=Le[0],qe=Le[1],Ve=Object(n.useState)({open:!1,type:"inputError",msg:""}),_e=Object(ze.a)(Ve,2),Re=_e[0],Be=_e[1],Ue=Object(n.useState)({open:!1,type:"delete",element:void 0}),Ye=Object(ze.a)(Ue,2),He=Ye[0],Je=Ye[1];s&&1===s.length&&1===an&&(an++,D(s[0]),y(null===(o=s[0])||void 0===o?void 0:o.razaoSocial));if(Object(n.useEffect)((function(){document.addEventListener("keydown",(function(e){27===e.keyCode&&R(!1),G(null)}))}),[]),b&&1===an){an++;var Ke=b.history,We={},$e=ve(b,e.redux),Ge=$e.selectedEmpresa,Xe=$e.demandFiles,Ze=$e.originalVehicle;Object.entries(Ke[0]).forEach((function(e){var a=Object(ze.a)(e,2),t=a[0],n=a[1];ce.hasOwnProperty(t)&&(We[t]=n)})),D(Ge),y(Ge.razaoSocial),se(We),De(Xe),J(Ze)}Object(n.useEffect)((function(){(function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,n,r,o,i,l,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k||""===k){e.next=18;break}return a=(new Date).getFullYear(),t=c.filter((function(e){return e.empresa===k.razaoSocial})),n=t.filter((function(e){return a-e.anoCarroceria>15&&null!==e.anoCarroceria})).sort((function(e,a){return e.placa.localeCompare(a.placa)})),r=[],o=[],n.forEach((function(e){u.forEach((function(a){e.veiculoId===a.veiculoId&&o.push(a)})),o.sort((function(e,a){var t=new Date(e.validade);return new Date(a.validade)-t})),r.push(Object(h.a)(Object(h.a)({},e),{},{laudos:o})),o=[]})),e.next=6,P(r);case 6:return e.next=8,M(r);case 8:if(!(H&&(null===r||void 0===r?void 0:r.length)>0)){e.next=16;break}if((null===(s=r.find((function(e){return e.veiculoId===H.veiculoId})))||void 0===s||null===(i=s.laudos)||void 0===i?void 0:i.length)===(null===H||void 0===H||null===(l=H.laudos)||void 0===l?void 0:l.length)){e.next=15;break}return e.next=13,J(s);case 13:e.next=16;break;case 15:return e.abrupt("return");case 16:e.next=21;break;case 18:P(),M([]),D();case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[k,c,u,H]);var Qe=Object(n.useCallback)((function(e){var a=e.target.name,t=e.target.value;if("razaoSocial"!==a){if("placa"===a&&A[0]){if("string"===typeof t&&(t=t.toLocaleUpperCase()),t&&""!==t){var n,r=A.filter((function(e){return e.placa.match(t)}));return 1===r.length&&(n=r[0]),M(r),void J(n)}M(A)}se(Object(h.a)(Object(h.a)({},ce),{},Object(f.a)({},a,t)))}else{y(t);var o=s.find((function(e){return e.razaoSocial===t}));D(o)}}),[y,s,A,ce]),ea=function(){var e=Object(w.a)(j.a.mark((function e(a){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.currentTarget.id,!Za(t,p)){e.next=4;break}return alert("Solicita\xe7\xe3o de cadastro do laudo j\xe1 realizada para este ve\xedculo."),e.abrupt("return");case 4:H?(a.persist(),G(a.target)):((n=a.currentTarget.id)&&(r=A.find((function(e){return e.veiculoId.toString()===n}))),J(r),M([r]));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){if(H&&!b)if(H.laudos&&H.laudos[0]){var e=null===H||void 0===H?void 0:H.laudos,a=m.filter((function(e){return"laudoDoc"===e.metadata.fieldName})),t=[],n=[],r=[],o=Object(v.a)(en);"empresa"===i.role&&o.pop(),e.forEach((function(e){o.forEach((function(t){var o,i=a.find((function(a){var t;return(null===a||void 0===a||null===(t=a.metadata)||void 0===t?void 0:t.laudoId)==(null===e||void 0===e?void 0:e.id)}));i&&(o=i.id),n.includes(t.title)||n.push(t.title);t.title;var l=Object(Y.a)(t,["title"]);"laudoDoc"===t.field?r.push(Object(h.a)(Object(h.a)({},l),{},{value:e[t.field],fileId:o})):r.push(Object(h.a)(Object(h.a)({},l),{},{value:e[t.field]}))})),r[4].fileId?r[4].value="Clique para visualizar o laudo":r[4].value="Nenhum arquivo encontrado",t.push(r),r=[]})),o=Object(v.a)(en),Oe({tableHeaders:n,arrayOfRows:t,docs:a})}else Oe("Nenhum laudo cadastrado para o ve\xedculo placa ".concat(H.placa,"."))}),[H,u,m,b,i.role]),Object(n.useEffect)((function(){an=1}),[]);var aa=function(){H?(R(!_),G(null)):(R(!1),J(void 0),G(null))},ta=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,m,p,f,v;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=null===k||void 0===k?void 0:k.codigoEmpresa,r=null===H||void 0===H?void 0:H.veiculoId,o=ce.empresaLaudo,i=Object(Y.a)(ce,["empresaLaudo"]),l=we()||[],!(c=u.find((function(e){return e.id===ce.id})))){a.next=7;break}return Be(Object(h.a)(Object(h.a)({},Re),{},{open:!0,msg:"O laudo informado j\xe1 existe no sistema. Laudo n\xba "+c.id.toString()})),ia(),a.abrupt("return");case 7:if(Object.keys(ce).forEach((function(e){if("validade"!==e&&(!ce[e]||""===ce[e])){var a,t=null===(a=Et.find((function(a){return a.field===e})))||void 0===a?void 0:a.label;l.push(t)}})),!l[0]){a.next=12;break}return Be(Object(h.a)(Object(h.a)({},Re),{},{open:!0,msg:"Favor verificar o preenchimento dos seguintes campos: "+l.toString()})),ia(),a.abrupt("return");case 12:if(void 0!==t){a.next=20;break}return s=Object(h.a)({},ce),m={empresaId:n,veiculoId:r,history:s,historyLength:0,metadata:{fieldName:"laudoDoc",veiculoId:r}},re&&(m.history.files=re),Te(m).then((function(e){return console.log(null===e||void 0===e?void 0:e.data)})),ia("all fields, reset state please!"),na("laudoDoc"),ra(),a.abrupt("return");case 20:if(!1===t&&(Te({id:b.id,empresaId:n,history:{info:null===ce||void 0===ce?void 0:ce.info},declined:!0}).then((function(e){return console.log(e)})),Ee("Solicita\xe7\xe3o indeferida!"),ra(),setTimeout((function(){e.history.push("/solicitacoes")}),1500)),!0!==t){a.next=35;break}return(p=d.find((function(e){return e.empresa===o})))&&(i.empresa_id=p.id),i.veiculo_id=H.veiculoId,i.codigo_empresa=n,v={table:"laudos",requestElement:i},a.next=29,T.a.post("/api/addElement",v).then((function(e){var a;f=null===e||void 0===e||null===(a=e.data[0])||void 0===a?void 0:a.id,console.log(e.data)})).catch((function(e){return console.log(e)}));case 29:Te({id:b.id,veiculoId:r,demandFiles:ke,history:{},metadata:{laudoId:f,tempFile:"false"},approved:t}).then((function(e){return console.log(e.data)})),setTimeout((function(){e.history.push("/solicitacoes")}),1500),Ee("Laudo aprovado!"),ra(),ia("Clear all Of It!!!");case 35:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();var na=function(){var e=Object(w.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Pe(a),oe(void 0);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ra=function(){return pe(!me)},oa=function(){return Je(Object(h.a)(Object(h.a)({},He),{},{open:!1}))},ia=function(e){e&&se(Object(h.a)({},g.stateInputs)),oe(),ae(g.dropDisplay),P(),M()},la=e.redux.empresasLaudo.map((function(e){return e.empresa}));return r.a.createElement(n.Fragment,null,r.a.createElement(Pt,{empresas:s,razaoSocial:S,selectedEmpresa:k,filteredVehicles:L,selectedVehicle:H,anchorEl:$,stateInputs:ce,selectOptions:la,dropDisplay:Q,laudoDoc:re,table:ye,demand:b,demandFiles:ke,showPendencias:Me,fileToRemove:Ae,functions:{handleInput:Qe,clickOnPlate:ea,showDetails:aa,handleFiles:function(e,a){if(!ge(e)&&e&&e[0]){var t=new FormData;t.append("fieldName","laudoDoc"),t.append("laudoId",ce.id),t.append("veiculoId",H.veiculoId),t.append(a,e[0]),oe(t),Pe(void 0)}},handleSubmit:ta,closeMenu:function(){return G(null)},clear:function(){document.querySelector('[name = "placa"]').value="",M(A),J()},removeFile:na,setShowPendencias:qe,deleteLaudo:function(e){Je(Object(h.a)(Object(h.a)({},He),{},{open:!0,element:"laudo n\xba ".concat(e),laudoId:e}))}}}),_&&r.a.createElement(Qt,{close:aa,data:Object(h.a)(Object(h.a)({},H),{},{tableData:""}),tab:3,title:"Ve\xedculo",header:"- informa\xe7\xf5es"}),He.open&&r.a.createElement(gt,Object.assign({},He,{close:oa,confirm:function(e){var a=H.veiculoId,t=k.codigoEmpresa;if(e){oa(),T.a.delete("/api/delete?table=laudos&tablePK=id&id=".concat(e,"&veiculoId=").concat(a,"&codigoEmpresa=").concat(t)).then((function(e){var a=e.data;return console.log(a)}));var n=m.find((function(a){return"laudoDoc"===a.metadata.fieldName&&a.metadata.laudoId===e.toString()}));n&&T.a.delete("/api/deleteFile?collection=vehicleDocs&id=".concat(null===n||void 0===n?void 0:n.id,"&codigoEmpresa=").concat(t)).then((function(e){var a=e.data;return console.log(a)}))}},id:He.laudoId})),Re.open&&r.a.createElement(Ha,{open:Re.open,close:function(){return Be(Object(h.a)(Object(h.a)({},Re),{},{open:!Re.open}))},alertType:Re.type,customMessage:Re.msg}),r.a.createElement(ee,{open:me,close:ra,msg:be}))})),nn=Object(n.createContext)(null);function rn(e){var a=e.motivosBaixa,t=e.selectMotivo,n=e.selectedMotivo,o=e.demand;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flexColumn"},!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Selecione o motivo da baixa"),r.a.createElement(Ve.a,{className:"config__selector",onChange:t,name:"selectedOption",value:n||"",select:!0,placeholder:"Clique para selecionar...",SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},a.map((function(e,a){return r.a.createElement(qe.a,{key:a,value:e},e)}))))))}var on=t(602),ln=t(376),cn=t(285),sn=(t(492),[{value:"baixar",label:"Baixar ve\xedculo"},{value:"gerenciar",label:"Gerenciar ve\xedculos baixados"}]);function dn(e){e.empresas;var a=e.selectOption;e.parametros,e.demand,e.checked,e.delegaTransf,e.justificativa,e.pendencias,e.handleInput,e.handleBlur,e.handleCheck,e.handleSubmit;return r.a.createElement("div",{className:"flex center"},r.a.createElement("div",{className:"flexColumn "},r.a.createElement("h3",{className:"radio__title"},"Selecione uma das op\xe7\xf5es abaixo"),r.a.createElement(cn.a,{component:"fieldset"},r.a.createElement(ln.a,{"aria-label":"position",name:"position",onChange:a,row:!0,style:{width:"auto"},className:"radio"},sn.map((function(e,a){var t=e.value,n=e.label;return r.a.createElement(Ye.a,{key:a,className:"radio",value:t,label:r.a.createElement("span",{className:"radio__legend"}," ",n," "),control:r.a.createElement(on.a,{color:"primary",size:"small"})})}))))))}var un=function(e){var a=e.action,t=e.onClick,n=e.disabled,o=function(){return null},i="";return"save"===a&&(o=function(){return r.a.createElement(it.a,null)},i="Salvar"),r.a.createElement(He.a,{size:"small",color:"primary",className:"saveButton",variant:"contained",onClick:function(){return t()},disabled:n},e.label||i," ",r.a.createElement("span",null,"\xa0\xa0 ")," ",o())},mn=function(e){var a=e.data,t=e.user,n=e.handleInput,o=e.searchDischarged,i=e.downloadXls,l=e.reactivateVehicle,c=t.role,s=a.placaBaixada,d=a.dischargedFound,u=a.notFound,m=a.reactivate,p=a.selectedOption,f=JSON.parse(JSON.stringify(Ka)),v=f.find((function(e){return"Observa\xe7\xe3o"===e.label})),h=f.indexOf(v);return f.splice(h,1),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex center paper"},r.a.createElement("header",{className:"searchDischarged__header"},r.a.createElement("div",{className:"searchDischarged"},r.a.createElement("div",null,r.a.createElement("form",{onSubmit:o},r.a.createElement(Ve.a,{type:"text",name:"placaBaixada",label:"Pesquisar pela placa do ve\xedculo",value:s||"",onChange:n,placeholder:"Digite a placa",InputLabelProps:{style:{fontSize:"0.7rem"}},InputProps:{style:{width:"250px",marginRight:"10px",fontSize:"0.9rem",textAlign:"center"}}})),r.a.createElement("span",{action:"search",onClick:o,style:{marginTop:"18px"}},r.a.createElement(ct.a,{className:"pointer"}))),"empresa"!==c&&r.a.createElement("div",{className:"downloadXls",onClick:i},r.a.createElement("img",{className:"downloadXls__icon",src:"baixar"===p?"":"/images/excel.png",alt:"Fazer o download do arquivo xlsx",title:"Arquivo xlsx com todos os ve\xedculos baixados"})))),d&&r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"dischargedContainer"},f.map((function(e,a){var t=e.label;return r.a.createElement(Ve.a,{label:t,key:a,value:d[t],disabled:!0,InputLabelProps:{style:{fontSize:"0.7rem"},shrink:!0},InputProps:{style:{width:"250px",margin:"8px 10px 0 0",fontSize:"0.7rem",color:"Situa\xe7\xe3o"===t&&"Reativado"===d[t]?"red":"#444"}}})}))),r.a.createElement("section",{className:"obs"},r.a.createElement("label",{htmlFor:"obs",className:"obs__label"},"Observa\xe7\xf5es:"),r.a.createElement("textarea",{name:"obs",id:"obs",className:"obs__textArea",defaultValue:d["Observa\xe7\xe3o"],cols:"30",rows:"6"})),m&&r.a.createElement("footer",{className:"reactivate"},r.a.createElement(un,{action:"save",label:"Reativar",onClick:function(){return l()}})))),u&&r.a.createElement("h3",null,"Ve\xedculo n\xe3o encontrado."))},pn=t(418),fn=t.n(pn),vn=[{field:"placa",label:"Placa",datalist:"placa",autoComplete:!0,collection:"frota",maxLength:8},{field:"renavam",label:"Renavam"},{field:"nChassi",label:"N\xfamero do Chassi",maxLength:17},{field:"utilizacao",label:"Utiliza\xe7\xe3o",disabled:!0},{field:"dominio",label:"Situa\xe7\xe3o da Propriedade",disabled:!0},{field:"marcaChassi",label:"Marca do Chassi",disabled:!0},{field:"modeloChassi",label:"Modelo do Chassi",disabled:!0},{field:"marcaCarroceria",label:"Marca da Carroceria",disabled:!0},{field:"modeloCarroceria",label:"Modelo da Carroceria",disabled:!0},{type:"number",field:"indicadorIdade",label:"Indicador de idade",disabled:!0}],hn=function(e){var a=e.user,t=e.selectOption,o=e.handleInput,i=e.handleBlur,l=e.handleCheck,c=e.handleSubmit,s=e.selectMotivo,d=e.data,u=e.empresas,m=e.motivosBaixa,p=e.searchDischarged,f=e.downloadXls,v=e.reactivateVehicle,h=e.setShowPendencias,b=d.selectedEmpresa,g=d.selectedOption,E=d.checked,x=d.delegaTransf,S=d.justificativa,y=d.selectedMotivo,O=d.demand,j=d.info,w=d.motivo,C=d.showPendencias;return r.a.createElement(n.Fragment,null,r.a.createElement(Aa,{links:["Ve\xedculos","/veiculos"],text:"Baixa de ve\xedculo",demand:O}),r.a.createElement(Me,{data:d,empresas:u,handleInput:o,handleBlur:i}),r.a.createElement("div",{className:"flexColumn"},b&&r.a.createElement(r.a.Fragment,null,!O&&r.a.createElement(dn,{demand:O,checked:E,delegaTransf:x,justificativa:S,empresas:u,selectOption:t,handleInput:o,handleBlur:i,handleCheck:l,handleSubmit:c}),"baixar"===g?r.a.createElement("div",{className:"flex"},r.a.createElement("section",{className:"paper"},r.a.createElement("h3",{style:{marginBottom:"7px"}},O?"Solicita\xe7\xe3o n\xba".concat(null===O||void 0===O?void 0:O.numero," - ").concat(null===O||void 0===O?void 0:O.subject):"Informe os dados para a baixa"),O&&r.a.createElement("h4",null,w),O&&r.a.createElement("h4",null,"Situa\xe7\xe3o: ",null===O||void 0===O?void 0:O.status),r.a.createElement(Re,{form:vn,data:d,handleBlur:i,handleInput:o,disableAll:!!O})),r.a.createElement(rn,{demand:O,selectedOption:g,motivosBaixa:m,selectMotivo:s,selectedMotivo:y,info:j,empresas:u,handleInput:o,handleBlur:i,handleSubmit:c,setShowPendencias:h,showPendencias:C})):"gerenciar"===g?r.a.createElement(mn,{data:d,user:a,handleInput:o,searchDischarged:p,downloadXls:f,reactivateVehicle:v}):null,O||"baixar"!==g?O?r.a.createElement(Ta,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:O,setShowPendencias:h,showPendencias:C,info:j,handleSubmit:c,handleInput:o}):null:r.a.createElement("div",{className:"flexEnd"},r.a.createElement(He.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"10px 0 10px 0"},onClick:function(){return c()}},"Confirmar ",r.a.createElement("span",null,"\xa0\xa0 ")," ",r.a.createElement(fn.a,null))))))},bn=function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={empresas:[],razaoSocial:"",frota:[],placa:"",form:{},check:"",delegaTransf:"",toastMsg:"Solicita\xe7\xe3o de Baixa Enviada",confirmToast:!1,openDialog:!1,showPendencias:!1},e.selectOption=function(a){return e.setState({selectedOption:a.target.value})},e.selectMotivo=function(a){return e.setState({selectedMotivo:a.target.value})},e.handleInput=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.target,r=n.name,o=n.value,i=e.props.redux,l=i.veiculos,c=i.empresas,e.setState(Object(f.a)({},r,o)),!("razaoSocial"===r&&o.length>2)){a.next=15;break}if(!(s=c.find((function(e){return e.razaoSocial===o})))){a.next=12;break}return a.next=7,e.setState({razaoSocial:s.razaoSocial,selectedEmpresa:s});case 7:o!==s.razaoSocial&&e.setState({selectedEmpresa:void 0}),d=l.filter((function(a){return a.empresa===e.state.razaoSocial})),e.setState({frota:d}),a.next=15;break;case 12:return a.next=14,e.setState({selectedEmpresa:void 0,frota:[]});case 14:e.reset();case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleBlur=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f,v,b,g;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.props.redux,r=n.empresas,o=n.logs,i=e.state,l=i.frota,c=i.demand,s=t.target.name,d=t.target.value,"delegaTransf"!==s){a.next=14;break}if(!(d.length>0)){a.next=14;break}if(!(u=r.find((function(e){return e.razaoSocial===d})))){a.next=13;break}return m=u.razaoSocial,p=u.codigoEmpresa,a.next=9,e.setState({delegaTransf:m,delegaTransfId:p,disableSubmit:!0});case 9:console.log(e.state),a.next=14;break;case 13:e.setState({openAlertDialog:!0,alertType:"empresaNotFound",delegaTransf:""});case 14:if("placa"!==s||"string"===typeof l){a.next=29;break}if(d&&""!==d||e.setState({disableSubmit:!0}),d.length>2&&(f=l.find((function(e){return"string"===typeof d?e.placa.toLowerCase().match(d.toLowerCase()):e.placa.match(d)}))),!f){a.next=28;break}if(c){a.next=24;break}if("Solicita\xe7\xe3o j\xe1 cadastrada",b="J\xe1 existe uma demanda aberta para o ve\xedculo de placa ".concat(f.placa,'. Para acess\xe1-la, clique em "Solicita\xe7\xf5es" no menu superior.'),!Za(null===(v=f)||void 0===v?void 0:v.veiculoId,o)){a.next=24;break}return e.setState({customTitle:"Solicita\xe7\xe3o j\xe1 cadastrada",customMessage:b,openAlertDialog:!0,delegatario:"",placa:void 0}),a.abrupt("return");case 24:return a.next=26,e.setState(Object(h.a)(Object(h.a)({},f),{},{selectedVehicle:f}));case 26:a.next=29;break;case 28:""!==e.state.placa&&(g={},l[0]&&Object.keys(l[0]).forEach((function(e){return g[e]=""})),e.setState({alertType:"plateNotFound",openAlertDialog:!0,disableSubmit:!0}),e.setState(Object(h.a)({},g)));case 29:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleSubmit=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f,v,b,g,E,x,S,y;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.props.redux,r=n.empresas,o=n.veiculos,i=e.state,l=i.selectedEmpresa,c=i.veiculoId,s=i.selectedMotivo,d=i.demand,u=i.selectedVehicle,m=i.info,p=i.motivo,f=u.dataEmissao,v=u.vencimento,b=u.dataRegistro,g=l.codigoEmpresa,E={empresaId:g,veiculoId:c,history:{info:s?"Motivo da baixa: ".concat(s):p},historyLength:0,approved:t},d&&(E.id=null===d||void 0===d?void 0:d.id),!1!==t){a.next=8;break}return E.declined=!0,E.history.info=m,a.next=8,e.setState({toastMsg:"Baixa de ve\xedculo indeferida."});case 8:if(Te(E).then((function(e){return console.log(e.data)})),!t){a.next=19;break}return"veiculos","veiculo_id",x={},Ka.forEach((function(e){var a=e.field,t=e.label;u[a]&&(x[t]=u[a].toString())})),Object.assign(x,{"Situa\xe7\xe3o":"Baixado","Data de Registro":new Date(b).toLocaleDateString(),"Data baixa":(new Date).toLocaleDateString(),"Data Inicio":new Date(f).toLocaleDateString(),"Data Fim":new Date(v).toLocaleDateString(),"Observa\xe7\xe3o":"".concat(p)}),console.log(x),T.a.post("/api/baixaVeiculo",x),a.next=17,T.a.delete("/api/delete?table=".concat("veiculos","&tablePK=").concat("veiculo_id","&id=").concat(c,"&codigoEmpresa=").concat(g)).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 17:return a.next=19,e.setState({toastMsg:"Baixa realizada com sucesso."});case 19:if(e.toast(),!r||1!==r.length){a.next=26;break}return y={selectedEmpresa:r[0],razaoSocial:null===(S=r[0])||void 0===S?void 0:S.razaoSocial,frota:o},a.next=24,e.setState(Object(h.a)(Object(h.a)({},y),{},{selectedMotivo:void 0}));case 24:a.next=28;break;case 26:return a.next=28,e.setState({selectedEmpresa:void 0,frota:[],razaoSocial:"",selectedMotivo:void 0});case 28:e.reset(),d&&setTimeout((function(){e.props.history.push("/solicitacoes")}),1500);case 30:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.searchDischarged=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),r=e.state.placaBaixada,o=e.props.redux.parametros,i=null===(n=o[0])||void 0===n?void 0:n.idadeBaixa,l=i.idadeBaixaAut,a.next=7,T.a.get("/api/getOldVehicles?placa=".concat(r));case 7:c=a.sent,(s=null===c||void 0===c?void 0:c.data)[0]?(d=s[0],u=(new Date).getFullYear(),m=+d["Ano carroceria"],p=!0,(u-m>l||"Reativado"===d["Situa\xe7\xe3o"])&&(p=!1),e.setState({dischargedFound:s[0],notFound:!1,reactivate:p})):e.setState({notFound:!0,dischargedFound:void 0});case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.reactivateVehicle=function(){var a=e.state.dischargedFound,t={placa:null===a||void 0===a?void 0:a.Placa,"Situa\xe7\xe3o":"Reativado"},n="O ve\xedculo de placa ".concat(null===a||void 0===a?void 0:a.Placa," poder\xe1 ser recadastrado no sistema acessando as op\xe7\xf5es Ve\xedculos -> Cadastro de Ve\xedculos.");T.a.patch("/api/reactivateVehicle",t).then((function(a){200===a.status&&e.setState({customMessage:n,customTitle:"Ve\xedculo reativado.",openAlertDialog:!0,placaBaixada:"",dischargedFound:void 0}),console.log(a.data)}))},e.reset=function(){vn.forEach((function(a){return e.setState(Object(f.a)({},a.field,""))})),e.setState({delegaTransf:"",check:"",justificativa:"",checked:!1,demand:void 0})},e.downloadXls=function(){e.setState({loading:!0}),T()({url:"/api/oldVehiclesXls",method:"GET",responseType:"blob",onDownloadProgress:function(e){Math.round(e.loaded)}}).then((function(a){var t=a.headers["content-disposition"],n=t.indexOf("=")+1,r=t.slice(n),o=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");i.href=o,i.setAttribute("download",r),document.body.appendChild(i),i.click(),e.setState({loading:!1})})).catch((function(e){console.log(e)}))},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.handleCheck=function(a){return e.setState({checked:a.target.value})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,n,r,o,i,l,c,s,d,u,m,p,f,v,b,g,E;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.props.redux,i=o.empresas,l=o.veiculos,i&&1===i.length&&this.setState({selectedEmpresa:i[0],razaoSocial:null===(a=i[0])||void 0===a?void 0:a.razaoSocial,frota:l}),!(c=null===(t=this.props)||void 0===t||null===(n=t.location)||void 0===n||null===(r=n.state)||void 0===r?void 0:r.demand)){e.next=7;break}return d=this.props.redux,u=d.empresas,m=d.veiculos,p=c.empresa,f=c.veiculo,v=u.find((function(e){return e.razaoSocial===p})),b=m.filter((function(e){return e.placa===f})),g=b.find((function(e){return e.placa===f})),E=null===c||void 0===c||null===(s=c.history[0])||void 0===s?void 0:s.info,e.next=7,this.setState(Object(h.a)(Object(h.a)({razaoSocial:p,selectedEmpresa:v,placa:f,frota:b},g),{},{selectedVehicle:g,demand:c,selectedOption:"baixar",motivo:E}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.user,a=this.props.redux,t=a.empresas,o=a.parametros[0].motivosBaixa,i=this.state,l=i.delegaTransf,c=i.confirmToast,s=i.toastMsg,d=i.checked,u=i.openAlertDialog,m=i.customTitle,p=i.customMessage,f=i.alertType,v=i.loading;return r.a.createElement(n.Fragment,null,r.a.createElement(hn,{data:this.state,empresas:t,user:e,motivosBaixa:o,checked:d,selectOption:this.selectOption,selectMotivo:this.selectMotivo,delegaTransf:l,handleInput:this.handleInput,handleBlur:this.handleBlur,handleCheck:this.handleCheck,handleSubmit:this.handleSubmit,searchDischarged:this.searchDischarged,downloadXls:this.downloadXls,reactivateVehicle:this.reactivateVehicle,setShowPendencias:this.setShowPendencias}),u&&r.a.createElement(Ha,{open:u,close:this.closeAlert,alertType:f,customTitle:m,customMessage:p}),r.a.createElement(ee,{open:c,close:this.toast,msg:s}),v&&r.a.createElement(B,null))}}]),t}(n.Component);bn.contextType=nn;var gn=ce(["veiculos","empresas","parametros","equipamentos","acessibilidade"],bn),En=t(152),xn=t.n(En);t(493);function Sn(e){var a=e.collections,t=e.collection,o=e.data,i=e.staticData,l=e.selectCollection,c=e.handleChange,s=e.enableEdit,d=e.confirmDelete,u=(e.handleSubmit,e.openAddDialog);return r.a.createElement(n.Fragment,null,r.a.createElement(Aa,{links:["Ve\xedculos","/veiculos"],text:"Alterar configura\xe7\xf5es de ve\xedculos"}),r.a.createElement("center",null,r.a.createElement("h4",null,"Selecione uma das op\xe7\xf5es abaixo.")),r.a.createElement("header",{className:"selectHeader"},r.a.createElement(Ve.a,{className:"config__selector",onChange:l,value:t,select:!0,SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},a.map((function(e,a){return r.a.createElement(qe.a,{key:a,value:e},e)})))),i&&t&&r.a.createElement("div",{className:"divHeader"},r.a.createElement(He.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"10px 0 10px 0"},onClick:function(){return u()}},r.a.createElement(Ke.a,null)," Adicionar")),r.a.createElement("div",{className:"container"},o&&i&&o.map((function(e,a){return r.a.createElement("div",{className:"divCell",key:a},r.a.createElement(Ve.a,{value:e.edit?e[i.field]:e[i.field]+" ("+e.count+")",onChange:c,name:e.field,type:"text",inputProps:{autoCorrect:"off",spellCheck:!1,style:{fontSize:"0.8rem",color:!0===e.edit?"#000":"#999"}},className:"config__textField",disabled:!1===e.edit}),r.a.createElement("button",{component:"span",className:"configVehicleIcon",title:"Editar",onClick:function(){return s(a)},display:"none"},r.a.createElement(xn.a,{className:"confIcon",color:"primary"})),r.a.createElement("button",{className:"configVehicleIcon",title:"Remover",onClick:function(){return d(a)}},r.a.createElement(yt.a,{className:"confIcon",color:"secondary"})))}))))}var yn=ce(["seguradoras","lookUpTable/marca_chassi","modelosChassi","lookUpTable/marca_carroceria","carrocerias","equipamentos","veiculos","acessibilidade","empresasLaudo"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={collection:"",marca:"",options:[],openAddDialog:!1,confirmToast:!1,toastMsg:"Dados atualizados!",confirmDialogProps:{open:!1}},e.addCounter=function(e,a,t){var n=a.name,r=a.field,o=a.label;return t.forEach((function(a){var t=e.filter((function(e){return!e.hasOwnProperty(n)||"Itens de acessibilidade"!==o&&"Equipamentos"!==o?e[n]===a[r]:e[n].find((function(e){return e===a.id}))})).length;Object.assign(a,{count:t})})),t=t.sort((function(e,a){return e[r].localeCompare(a[r])}))},e.selectCollection=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.target.value,r=e.props.redux,o=r.veiculos,i=r.marcaChassi,l=r.marcaCarroceria,c=U.find((function(e){return e.label===n})),s=JSON.parse(JSON.stringify(e.props.redux[c.collection])),(s=e.addCounter(o,c,s)).forEach((function(e){return e.edit=!1})),e.setState({marcas:void 0,marca:""}),"modelosChassi"===c.collection&&e.setState({marcas:i}),"carrocerias"===c.collection&&e.setState({marcas:l}),a.next=9,e.setState({collection:n,data:s,staticData:c});case 9:case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.enableEdit=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f,v,h,b,g,E,x;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(x=function(){return(x=Object(w.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.forEach((function(e){return e.edit=!1})),p[t].edit=!0,e.next=4,this.setState({data:p,editIndex:t});case 4:s.focus();case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)},E=function(){return x.apply(this,arguments)},i=JSON.parse(JSON.stringify(e.props.redux)),l=document.querySelectorAll(".divCell"),c=l[t].childNodes[0],s=c.querySelectorAll("input")[0],d=e.state,u=d.updatedObj,m=d.staticData,p=JSON.parse(JSON.stringify(e.state.data)),f=p[t],v=null===(n=e.state)||void 0===n||null===(r=n.staticData)||void 0===r?void 0:r.field,void 0===(null===f||void 0===f?void 0:f.edit)&&(f.edit=!1),h=i[m.collection].find((function(e){return e.id===f.id?Object.freeze(e):{}})),b=p[t][v]===h[v],g=p.some((function(e,a){return a!==t&&!0===e.edit&&(o=p.indexOf(e),e)}))){a.next=18;break}if(!1!==f.edit){a.next=14;break}return p[t].edit=!0,a.next=11,e.setState({data:p});case 11:s.focus(),a.next=17;break;case 14:p[t].edit=!1,u&&!b&&e.handleSubmit(u),e.setState({data:p,editIndex:void 0});case 17:return a.abrupt("return");case 18:g&&!f.edit&&(E.call(Object(fe.a)(e)),h=i[m.collection].find((function(e){var a;return e.id===(null===(a=p[o])||void 0===a?void 0:a.id)})),b=p[o][v]===h[v],u&&!b&&e.handleSubmit(u));case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.selectMarca=function(a){var t,n=a.target.value,r=e.state.staticData.collection,o=e.props.redux,i=o.marcaChassi,l=o.marcaCarroceria;"modelosChassi"===r&&(t=i),"carrocerias"===r&&(t=l);var c=t.find((function(e){return e.marca===n})).id;e.setState({marca:n,marcaId:c})},e.handleChange=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=t.target.value,r=e.state,o=r.staticData,i=r.data,l=o.field,c=i.find((function(e){return!0===e.edit})),s=i.indexOf(c),c[l]=n,(d=Object(v.a)(e.state.data))[s]=c,u=Object(f.a)({id:null===c||void 0===c?void 0:c.id},l,n),e.setState({data:d,updatedObj:u});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(a){var t=a.target.value;e.setState({newElement:t})},e.addNewElement=Object(w.a)(j.a.mark((function a(){var t,n,r,o,i,l,c,s,d,u;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state,n=t.staticData,r=t.newElement,o=t.marcaId,i=n.table,l=n.field,c=n.collection,s=e.props.redux.veiculos,d=Object(f.a)({},l,r),o&&(d.marcaId=o),d=A.a.decamelizeKeys(d),console.log("\ud83d\ude80 ~ file: Config.jsx ~ line 205 ~ VehicleConfig ~ addNewElement= ~ requestElement",d),a.next=7,T.a.post("/api/addElement",{table:i,requestElement:d});case 7:u=e.props.redux[c],u=e.addCounter(s,n,u),e.setState({openAddDialog:!1,data:u,marcaId:void 0});case 10:case"end":return a.stop()}}),a)}))),e.confirmDelete=function(a){var t=e.state,n=t.data,r=t.staticData.field,o=n[a][r],i={open:!0,type:"delete",element:"".concat(o),index:a};e.setState({confirmDialogProps:i})},e.removeItem=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.closeConfirmDialog(),r=Object(v.a)(e.state.data),!((null===(n=r[t])||void 0===n?void 0:n.count)>0)){a.next=6;break}return alert("O item selecionado n\xe3o pode ser apagado por haver v\xednculo com um ou mais ve\xedculos cadastrados no sistema."),a.abrupt("return");case 6:if(o=e.state.staticData,i=o.collection,l=o.table,c=r[t].id,s=e.props.redux[i],!s.find((function(e){return e.id===c}))){a.next=10;break}return a.next=10,T.a.delete("/api/delete?table=".concat(l,"&tablePK=id&id=").concat(c)).catch((function(e){return console.log(e)}));case 10:r.splice(t,1),e.setState({data:r});case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleSubmit=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.state.staticData,r=n.field,o=n.table,"id",i=A.a.decamelize(r),l=[A.a.decamelizeKeys(t)],a.next=3,T.a.put("/api/editElements",{requestArray:l,table:o,tablePK:"id",column:i}).catch((function(e){return console.log(e)}));case 3:e.setState({updatedObj:void 0});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.closeConfirmDialog=function(){var a=Object(h.a)({},e.state.confirmDialogProps);a.open=!1,e.setState({confirmDialogProps:a})},e.toggleDialog=function(){return e.setState({openAddDialog:!e.state.openAddDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=[];U.forEach((function(a){e.push(a.label)})),this.setState({options:e})}},{key:"componentDidUpdate",value:function(e){var a=JSON.parse(JSON.stringify(this.props.redux)),t=a.veiculos,n=this.state,r=n.staticData,o=n.data,i=n.editIndex;if(!r||!o)return null;var l=r.collection;if(JSON.stringify(e.redux[l])!==JSON.stringify(a[l])){var c=this.addCounter(t,r,a[l]);(i||0===i)&&(c[i].edit=!0),this.setState({data:c})}}},{key:"render",value:function(){var e=this.state,a=e.options,t=e.collection,o=e.data,i=e.staticData,l=e.openAddDialog,c=e.marca,s=e.marcas,d=e.confirmToast,u=e.toastMsg,m=e.confirmDialogProps;return r.a.createElement(n.Fragment,null,r.a.createElement(Sn,{collections:a,collection:t,data:o,staticData:i,selectCollection:this.selectCollection,enableEdit:this.enableEdit,handleChange:this.handleChange,handleSubmit:this.handleSubmit,openAddDialog:this.toggleDialog,confirmDelete:this.confirmDelete}),l&&r.a.createElement(ft,{open:l,close:this.toggleDialog,title:i.label,helperMessage:'Para adicionar, insira o nome no campo abaixo e clique em "Confirmar".',marca:c,marcas:s,selectMarca:this.selectMarca,handleInput:this.handleInput,addNewElement:this.addNewElement}),m.open&&r.a.createElement(gt,Object.assign({},m,{close:this.closeConfirmDialog,confirm:this.removeItem})),r.a.createElement(ee,{open:d,close:this.toast,msg:u}))}}]),t}(n.PureComponent)),On=t(153),jn=t.n(On),wn=[{field:"placa",title:"Placa"},{field:"empresa",title:"Delegat\xe1rio"},{field:"seguradora",title:"Seguradora"},{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"vencimento",title:"Vencimento Seguro",render:function(e){return qa(e.vencimento)}},{field:"situacao",title:"Situa\xe7\xe3o"},{field:"compartilhado",title:"Compartilhado por"},{field:"indicadorIdade",title:"Indicador de idade",render:function(e){var a=e.indicadorIdade,t=" anos";if(a||0===a)return-1===a&&(a=0),1!==a&&0!==a||(t=" ano"),a.toString()+t}}],Cn=[{field:"apolice",title:"N\xfamero da Ap\xf3lice"},{field:"seguradora",title:"Seguradora"},{field:"empresa",title:"Segurado"},{field:"situacao",title:"Situa\xe7\xe3o"},{field:"segurados",title:"N\xfamero de ve\xedculos"},{field:"dataEmissao",title:"In\xedcio da vig\xeancia",filtering:!1,render:function(e){return qa(e.dataEmissao)}},{field:"vencimento",title:"Vencimento",filtering:!1,render:function(e){return qa(e.vencimento)}}],kn=[[{field:"codigoEmpresa",title:"C\xf3digo da Empresa"},{field:"razaoSocial",title:"Raz\xe3o Social"},{field:"vencimentoContrato",title:"Vencimento do Contrato",filtering:!1,render:function(e){return qa(e.vencimentoContrato)}},{field:"cnpj",title:"CNPJ"},{field:"frota",title:"Tamanho da frota"}]].concat([[{field:"nomeSocio",title:"Nome"},{field:"cpfSocio",title:"CPF"},{field:"nomeEmpresas",title:"Delegat\xe1rio(s)"},{field:"emailSocio",title:"E-mail"},{field:"telSocio",title:"Telefone"},{field:"share",title:"Participa\xe7\xe3o Societ\xe1ria (%)",filtering:!1}]]).concat([[{field:"nomeProcurador",title:"Nome"},{field:"cpfProcurador",title:"CPF"},{field:"emailProcurador",title:"E-mail"},{field:"telProcurador",title:"Telefone"},{field:"createdAt",title:"Data de inclus\xe3o no sistema",type:"date"},{field:"nomeEmpresas",title:"Empresas"}]]).concat([wn]).concat([Cn]),Dn=t(420),In=t(294);var Nn=function(e,a,t){var n=e,r=function(e,a){var t=JSON.parse(JSON.stringify(a));Array.isArray(t)&&t.forEach((function(a,t){Object.entries(a).forEach((function(t){var n=Object(ze.a)(t,2),r=n[0],o=n[1],i=e.find((function(e){return e.field===r}));if(i){var l=null===i||void 0===i?void 0:i.label;o=function(e){return je()(e,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()&&(e=je()(e).format("DD/MM/YYYY")),e}(o),a[l]=o,delete a[r]}else delete a[r]}))}));return t}(a,t),o={Sheets:{data:In.utils.json_to_sheet(r)},SheetNames:["data"]},i=In.write(o,{bookType:"xlsx",type:"array"}),l=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Dn.saveAs(l,n+".xlsx")},An=function(e){var a=e.tab,t=e.collection,n=e.user,o=e.showDetails,i=e.showFiles,l=e.showCertificate,c=e.del,s=["codigoEmpresa","socioId","procuradorId","veiculoId","apolice"][a],d=["empresas","s\xf3cios","procuradores","ve\xedculos","seguros"],u=Wt(a);return Array.isArray(t)||(t=[]),t=t.map((function(e){return Object(h.a)({},e)})),r.a.createElement("div",{style:{margin:"10px 0"},className:"noPrint"},r.a.createElement(jn.a,{title:"Pesquisar dados de ".concat(d[a]),columns:kn[a],data:t,style:{fontFamily:"Segoe UI",fontSize:"14px"},options:{filtering:!0,exportFileName:d[a],exportButton:!0,exportCsv:function(e,t){Nn(d[a],u,t)},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:20,rowStyle:{fontSize:"0.5rem"}},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Registro n\xe3o encontrado.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportCSVName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},actions:[{icon:"info",iconProps:{color:"primary"},tooltip:"Mais informa\xe7\xf5es",onClick:function(e,a){return o(e,a)}},{icon:"file_copy_outline",iconProps:{color:"secondary"},tooltip:"Ver arquivos",onClick:function(e,a){return i(a[s])}},{icon:"class_outlined",iconProps:{color:"action"},tooltip:"Emitir certificado",hidden:3!==a,onClick:function(e,a){return l(a)}}],editable:{isDeleteHidden:function(e){return"admin"!==n.role},onRowDelete:function(){var e=Object(w.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}}))},Pn=t(599),Tn=t(379),Fn=t(88),zn=t(600),Ln=t(597),Mn=(t(400),Object(X.a)((function(e){return{toolbarTitle:{flex:1},toolbarSecondary:{justifyContent:"space-between",overflowX:"auto",backgroundColor:"#0398c1",color:"white"},toolbarLink:{padding:"12px 55px 13px 55px",flexShrink:0}}}))),qn=[{title:"P\xe1gina Inicial",link:"/"},{title:"Consultas",link:"/consultas"},{title:"Ve\xedculos",link:"/veiculos"},{title:"Empresas",link:"/empresas"},{title:"Relat\xf3rios",link:"/relatorios"},{title:"Solicita\xe7\xf5es ",link:"/solicitacoes"}],Vn=[{title:"Alterar par\xe2metros do sistema",link:"/parametros",icon:"settings"},{title:"Gest\xe3o de usu\xe1rios",link:"/users",icon:"group"}],_n=Object(wt.a)((function(e){return{badge:{right:-8,top:-1,padding:"0 4px"}}}))(Ln.a);var Rn=Object(c.c)((function(e){var a,t;return{logs:null===(a=e.data)||void 0===a?void 0:a.logs,parametros:null===(t=e.data)||void 0===t?void 0:t.parametros,user:e.user}}),(function(e){return Object(l.b)({logUserOut:ie},e)}))(Object(y.f)((function(e){var a=null===e||void 0===e?void 0:e.logs,t=e.parametros,o=e.location.pathname,i=e.user,l=localStorage.getItem("demand"),c=Mn(),s=c.toolbarTitle,d=c.toolbarSecondary,u=c.toolbarLink,m=Object(n.useState)(document.location.pathname),p=Object(ze.a)(m,2),f=p[0],v=p[1],h=Object(n.useState)(),b=Object(ze.a)(h,2),g=b[0],E=b[1];Object(n.useEffect)((function(){if(a&&Array.isArray(a)){var e=a.filter((function(e){return!1===(null===e||void 0===e?void 0:e.completed)})).length;E(e)}v(o)}),[o,g,a]);var x=function(e){var a,t=null===(a=document.querySelector("a[href='/solicitacoes']"))||void 0===a?void 0:a.style,n="",r="";return"/solicitacoes"===f||l?t&&(t["background-color"]="#11a7d2",t["border-bottom"]="1.5px solid #ccc"):f.match(e)&&"/"!==e&&(n="#11a7d2",r="1.5px solid #ccc",t&&(t["background-color"]="",t["border-bottom"]="")),{bgColor:n,borderB:r,borderT:"",fontW:"400"}},y="",O="";if(t&&t[0]){var C=t[0].nomes;y=C.secretaria,O=C.siglaSecretaria}var k=function(){var a=Object(w.a)(j.a.mark((function a(){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",e.logUserOut(null===i||void 0===i?void 0:i.socketId));case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pn.a,null),r.a.createElement(Tn.a,null,r.a.createElement(Fn.a,{component:"h2",variant:"h6",color:"inherit",align:"center",noWrap:!0,className:s},O," - ",y),r.a.createElement(He.a,{variant:"outlined",size:"small",onClick:function(){return k()}},"Sair")),r.a.createElement(Tn.a,{component:"nav",variant:"dense",className:d},qn.map((function(e,a){var t=e.link,n=e.title;return r.a.createElement(zn.a,{component:S.b,to:t,key:a,color:"inherit",noWrap:!0,variant:"body2",href:"",style:{fontFamily:"Segoe UI, Tahoma, Geneva, Verdana, sans-serif",fontSize:"15px",backgroundColor:x(t).bgColor,borderBottom:x(t).borderB,fontWeight:x(t).fontW,borderTop:x(t).borderT},className:u,onClick:function(){return v(t)}},"Solicita\xe7\xf5es "===n?r.a.createElement(_n,{badgeContent:g,color:"secondary"},r.a.createElement("span",null,n)):n)})),"admin"===i.role&&Vn.map((function(e,a){var t=e.title,n=e.link,o=e.icon;return r.a.createElement(zn.a,{component:S.b,to:n,key:a},r.a.createElement("span",{className:"material-icons adminLink",style:{color:"white",cursor:"pointer"},title:t},o))}))))}))),Bn=function(){return null},Un=t(601),Yn=t(594),Hn=function(e){var a=e.items,t=e.tab,n=e.changeTab;return r.a.createElement("div",{className:"tabMenu"},r.a.createElement(Un.a,{value:t,indicatorColor:"primary",textColor:"primary",centered:!0,onChange:n},a.map((function(e,a){return r.a.createElement(Yn.a,{key:a,label:e})}))))},Jn=[[{field:"empresa",label:"Delegat\xe1rio",width:"100mm",left:"50mm"},{field:"codigoEmpresa",label:"C\xf3digo do Delegat\xe1rio",width:"35mm",left:"5mm"},{field:"dataExpedicaoCRV",label:"Data de emiss\xe3o",width:"25mm",value:je()().format("DD/MM/YYYY")}]],Kn=[[{field:"placa",label:"Placa",width:"25mm",left:"8mm"},{field:"renavam",label:"Renavam",width:"42mm",left:"14mm"},{field:"utilizacao",label:"Utiliza\xe7\xe3o",width:"35mm",left:"11mm"},{field:"nChassi",label:"N\xfamero do Chassi",width:"50mm",left:"15mm"}]],Wn=[[{field:"poltronas",label:"Poltronas",width:"16mm",left:"2mm"},{field:"piquesPoltrona",label:"Piques poltrona",width:"19mm"},{field:"distanciaMinima",label:"Dist\xe2ncia M\xednima (cm)"},{field:"distanciaMaxima",label:"Dist\xe2ncia M\xe1xima (cm)"},{field:"eixos",label:"Eixos",width:"12mm",left:"2mm"},{field:"pneumaticosDianteiro",label:"Pneum\xe1ticos Dianteiro"},{field:"pneumaticosTraseiro",label:"Pneum\xe1ticos Traseiro"},{field:"potencia",label:"Pot\xeancia (cv)",width:"15mm"}],[{field:"marcaChassi",label:"Marca do Chassi",width:"40mm",left:"4mm"},{field:"modeloChassi",label:"Modelo do Chassi",width:"40mm",left:"3mm"},{field:"anoChassi",label:"Ano do chassi"},{field:"marcaCarroceria",label:"Marca da Carroceria",width:"40mm",left:"2mm"},{field:"modeloCarroceria",label:"Modelo da Carroceria",width:"40mm",left:"1mm"},{field:"anoCarroceria",label:"Ano da carroceria"}]],$n=[[{field:"seguradora",label:"Seguradora",width:"75mm",left:"27.5mm"},{field:"apolice",label:"Ap\xf3lice",width:"35mm",left:"11mm"},{type:"date",field:"dataEmissao",label:"In\xedcio de vig\xeancia",width:"25mm"},{type:"date",field:"vencimento",label:"Vencimento",width:"25mm",left:"5mm"}]],Gn=[[{field:"numeroLaudo",label:"N\xfamero do Laudo",width:"45mm",left:"10mm"},{field:"empresaLaudo",label:"Empresa Respons\xe1vel",width:"80mm",left:"26mm"},{field:"vencimentoLaudo",label:"Vencimento",type:"date",width:"35mm",left:"9mm"}]],Xn=[[{field:"eixos",label:"N\xba Eixos",width:"15mm",left:"2mm"},{field:"cmt",label:"PBT / CMT Legal (t)",width:"27mm"},{field:"pesoDianteiro",label:"Peso Dianteiro (t)",width:"25mm"},{field:"pesoTraseiro",label:"Peso Traseiro (t)",width:"25mm"},{field:"pbt",label:"Peso Bruto Total (t)",width:"28mm",left:"3mm"},{field:"pesoPassageiros",label:"Passag/Bagagem (t)",width:"28mm",left:"3mm"}]],Zn=[[{field:"dataRegistro",label:"Data de Registro",type:"date",width:"30mm",left:"4mm"},{field:"vencimento",label:"Validade do CRV",type:"date",width:"25mm"},{field:"cores",label:"Cores",width:"50mm",left:"15mm"},{field:"compartilhado",label:"Empresa autorizada a compartilhar",width:"80mm",left:"11mm"}]],Qn=t(421),er=t.n(Qn),ar=(t(552),function(e){var a=e.nomes,t=a.secretaria,n=a.subsecretaria,o=a.superintendencia;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"certHeader__container"},r.a.createElement("div",{className:"certHeader__brasao"},r.a.createElement("img",{src:"/images/brasao.png",alt:"Bras\xe3o de Minas Gerais",className:"certHeader__img"})),r.a.createElement("div",{className:"certHeader__text"},r.a.createElement("p",null,t),r.a.createElement("p",null,n),r.a.createElement("p",null,o),r.a.createElement("h2",null,"Certificado de Registro e Seguro"))))}),tr=Object(X.a)((function(e){return{textField:{paddingRight:"25px",fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"}}})),nr=function(e){var a=e.vehicle,t=e.nomes,o=e.checkMulti,i=e.redirect,l=e.delega,c=e.carac,s=e.dadosVeiculo,d=e.seg,u=e.vistoria,m=e.peso,p=e.info,f=tr().textField,v=a.acessibilidade,h=a.equipamentos,b=a.obs,g=[{title:"Delegat\xe1rio",form:l},{title:"Dados do Ve\xedculo",form:s},{title:"Caracter\xedsticas do Ve\xedculo",form:c},{title:"Seguro",form:d},{title:"Vistoria",form:u},{title:"Pesagem",form:m},{title:"Informa\xe7\xf5es gerais",form:p},{title:"Observa\xe7\xf5es",form:b}];return r.a.createElement(n.Fragment,null,r.a.createElement("div",{id:"pdfPage",className:"A4"},r.a.createElement("header",{className:"header"},r.a.createElement(ar,{nomes:t})),g.map((function(e,a){var t=e.title,n=e.form;return"Observa\xe7\xf5es"!==t&&r.a.createElement("section",{className:"Delegat\xe1rio"!==t?"box":"firstBox",key:a},"Delegat\xe1rio"!==t&&r.a.createElement("span",{className:"boxTitle"},t),n.map((function(e,a){return r.a.createElement("div",{key:a,className:"Delegat\xe1rio"!==t?"divLine":"firstDivLine",style:{marginTop:0===a?"7mm":"3mm"}},e.map((function(e,a){return r.a.createElement(Ve.a,{disabled:!0,key:a,name:e.field,label:e.label,className:f,multiline:!!("equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50),rows:e.value&&e.value.length<86?"2":e.value&&e.value.length<140?"3":"4",variant:"equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50?"outlined":"standard",value:"date"===e.type?je()(e.value).isValid()?je()(e.value).format("DD/MM/YYYY"):"":"dataExpedicao"===e.field?je()().format("DD-MM-YYYY"):e.value||"",inputProps:{className:o(e.field),style:{width:e.width||"18mm",fontSize:"2.7mm",padding:"0 0 1px 0",margin:"0",flex:"1",color:"#000"}},InputProps:{style:{padding:"equipamentosId"===e.field||"observacoes"===e.field&&e.value&&e.value.length>50?"1mm":""}},InputLabelProps:{shrink:!0,style:{fontSize:"13px",textAlign:"center !important",left:e.left||"0",color:"#000"}}})})))})))})),r.a.createElement("div",{className:"box"},r.a.createElement("span",{className:"boxTitle"},"Equipamentos / Itens de acessibilidade"),(h||v)&&r.a.createElement("div",{className:"divLine flex",style:{overflow:"unset"}},h.map((function(e,a){return v[0]||a!==h.length-1?r.a.createElement("span",{className:"equipa"},e,",\xa0"):r.a.createElement("span",{className:"equipa"},e,".")})),v.map((function(e,a){return a!==v.length-1?r.a.createElement("span",{className:"equipa",key:a},"".concat(e,", ")):r.a.createElement("span",{className:"equipa",key:a},"".concat(e,"."))})))),b&&r.a.createElement("div",{className:"flexColumn"},r.a.createElement(Xt,{label:"Observa\xe7\xf5es:",name:"obs",id:"obs",defaultValue:b,rows:"7",style:{color:"#000",fontSize:"0.55 rem",padding:"5px",overflow:"hidden"}})),r.a.createElement("footer",{className:"certFooter"},r.a.createElement("h1",{className:"certFooter__title"},"PORTE OBRIGAT\xd3RIO"),r.a.createElement("p",{className:"certFooter__text"},"Este certificado pode ser verificado em ",r.a.createElement("span",{className:"link",onClick:function(){return i()}}," http://www.cadti.mg.gov.br ")))),r.a.createElement("button",{title:"Imprimir / salvar PDF",className:"noprint printButton",onClick:function(){return window.print()}},r.a.createElement(er.a,{style:{cursor:"pointer",color:"rgb(161, 161, 180)",fontSize:"40pt"}})))};function rr(){var e=Object(n.useState)({}),a=Object(ze.a)(e,2),t=a[0],o=a[1],i=Object(n.useState)({}),l=Object(ze.a)(i,2),c=l[0],s=l[1];Object(n.useEffect)((function(){function e(){return(e=Object(w.a)(j.a.mark((function e(){var a,t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("vehicle")),t=JSON.parse(localStorage.getItem("nomes")),document.querySelectorAll(".MuiToolbar-root").forEach((function(e){return e.style.display="none"})),e.next=5,o(a);case 5:if(!t){e.next=8;break}return e.next=8,s(t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),localStorage.removeItem("vehicle")}),[]);var d=[Wn,Kn,Jn,$n,Gn,Xn,Zn],u={};if(t){var m=t.poltronas,p=t.pesoDianteiro,f=80*m/1e3;t.pesoPassageiros=f,t.pesoDianteiro=+p,d.forEach((function(e){Object.entries(t).forEach((function(a){var t=Object(ze.a)(a,2),n=t[0],r=t[1];e.forEach((function(a,t){a.forEach((function(a,o){a.field===n&&(u=Object.assign(a,{value:r}),e[t][o]=u,u={})}))}))}))}))}if(!t){var v=window.location.origin;return window.location.replace(v),null}return r.a.createElement(nr,{vehicle:t,nomes:c,checkMulti:function(e){return"equipamentosId"===e||"equipamentosId"===e?void 0:"certificate"},redirect:function(){document.querySelectorAll(".MuiToolbar-root").forEach((function(e){return e.style.display="none"}));var e=window.location.origin;window.location.href=e},delega:Jn,carac:Wn,dadosVeiculo:Kn,seg:$n,vistoria:Gn,peso:Xn,info:Zn})}var or=function(e){return e>1024&&e<1048576?Math.round(e/1024)+" KB":e>=1048576&&e<1073741824?(e/1024/1024).toFixed(2)+" MB":e+" bytes"},ir={marginBottom:0,display:"grid",grid:"50px / 4% 40% 25% 25%",width:"99%",margin:"auto",padding:"10px 0 0 0",justifyItems:"auto"},lr=function(e){var a=e.filesCollection,t=e.close,n=e.typeId,o=e.empresas,i=e.filesIds,l=e.razaoSocial,c=[],s="empresaDocs",d=Object(v.a)(dt);switch(n){case"veiculoId":s="vehicleDocs",(d=Object(v.a)(ca)).find((function(e){return"transferenciaDoc"===e.name}))||d.push({title:"Documento de Transfer\xeancia",name:"transferenciaDoc"}),d.find((function(e){return"newPlateDoc"===e.name}))||d.push({title:"CRLV com nova placa",name:"newPlateDoc"}),d.find((function(e){return"apoliceDoc"===e.name}))||d.push({title:"Ap\xf3lice de seguro",name:"apoliceDoc"}),d.find((function(e){return"laudoDoc"===e.name}))||d.push({title:"Laudo de seguran\xe7a veicular",name:"laudoDoc"})}i&&(a=a.filter((function(e){return-1!==i.indexOf(e.id)}))),a&&a[0]&&a.forEach((function(e){d.forEach((function(a){e.metadata&&a.name===e.metadata.fieldName&&c.push(Object(h.a)(Object(h.a)({},e),{},{label:a.title}))}))}));return c[0]?r.a.createElement("div",{className:i?"":"popUpWindow"},r.a.createElement("h5",null,r.a.createElement("img",{alt:"",src:"/images/folderIcon2.jpg",style:{paddingLeft:"20px",marginRight:"20px"}})," Arquivos"),r.a.createElement("hr",{style:{marginBottom:"5px"}}),r.a.createElement("div",{style:ir},r.a.createElement("div",null,r.a.createElement("img",{alt:"",src:"/images/multipleFiles2.png",height:"50%"})),["Arquivo","Data de Upload","Tamanho"].map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement("span",{style:{fontSize:"1.2em",fontWeight:500}},e))}))),r.a.createElement("hr",{style:{margin:"0 0 20px 0"}}),c.map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement("div",{style:ir},r.a.createElement("div",{className:"col s1"},r.a.createElement("img",{alt:"",src:"/images/genericFile.png"})),r.a.createElement("div",{className:"col s11"},r.a.createElement("span",{style:{textDecoration:"underline",cursor:"pointer",color:"blue"},onClick:function(){return ha(e.id,e.filename,s,e.metadata.fieldName)}},function(e){var a=e.metadata,t=e.label;switch(a.fieldName){case"procuracao":if(l)return t+" - "+l;var n=o.find((function(e){return e.codigoEmpresa===Number(a.empresaId)}));return t+" - "+(null===n||void 0===n?void 0:n.razaoSocial)||"";case"apoliceDoc":return a.apolice?t+" n\xfamero "+a.apolice:t;case"altContratoDoc":return a.numeroAlteracao?"".concat(a.numeroAlteracao,"\xaa ")+t:t;default:return t}}(e))),r.a.createElement("div",{className:"col s3"},qa(e.uploadDate,!0)),r.a.createElement("div",{className:"col s3"},or(e.length))))})),r.a.createElement(Ge,{close:t})):null},cr=new MutationObserver((function(e,a){e.forEach((function(e){e.addedNodes.forEach((function(e){if(e.nodeType===Node.ELEMENT_NODE){var a=e;a.classList.contains("MuiPopover-root")&&Array.from(a.getElementsByClassName("MuiMenuItem-root")).forEach((function(e){"Export as PDF"===e.textContent&&e.remove()}))}}))}))})),sr=function(e){return e?cr.disconnect():cr.observe(document.body,{childList:!0})},dr=function(e,a,t){var n;return e.forEach((function(e){if(e.empresas instanceof Array){var r=e.empresas;1===t&&(r=e.empresas.map((function(e){return null===e||void 0===e?void 0:e.codigoEmpresa}))),(n=a.filter((function(e){return r.includes(e.codigoEmpresa)})).map((function(e){return e.razaoSocial})).toString().replace(",",", "))&&(e.nomeEmpresas=n)}})),e},ur={top:"5%",left:"10%",right:"10%"},mr=function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={tab:0,items:["Empresas","S\xf3cios","Procuradores","Ve\xedculos","Seguros"],tablePKs:["codigo_empresa","socio_id","procurador_id","veiculo_id","id"],dbTables:["empresas","socios","procuradores","veiculos","seguros"],options:["empresas","socios","procuradores","veiculos","seguros"],detailsTitle:["Empresa","S\xf3cio","Procurador","Placa","Ap\xf3lice"],detailsHeader:["razaoSocial","nomeSocio","nomeProcurador","placa","apolice"],empresas:[],seguros:[],razaoSocial:"",showDetails:!1,showFiles:!1,openDialog:!1,filesCollection:[],elementDetails:"",vehicleDocs:[],showCertificate:!1},e.changeTab=function(){var a=Object(w.a)(j.a.mark((function a(t,n){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.setState({tab:n});case 2:return a.abrupt("return");case 3:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.showDetails=function(){var a=Object(w.a)(j.a.mark((function a(t,n){var r,o,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.props.redux,o=e.state,i=o.options,l=o.tab,c=o.tablePKs,s=c.map((function(e){return A.a.camelize(e)})),n&&(d=r[i[l]].find((function(e){return e[s[l]]===n[s[l]]}))),void 0===n||!d){a.next=8;break}return a.next=5,e.setState({showDetails:!e.state.showDetails,elementDetails:d});case 5:a.next=9;break;case 8:e.setState({showDetails:!e.state.showDetails,elementDetails:void 0});case 9:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.closeFiles=function(){e.setState({showFiles:!e.state.showFiles})},e.showFiles=function(a){var t,n,r=e.state.tab,o=e.props.redux,i=o.allVehicleFields,l=o.socios,c=o.empresaDocs,s=o.vehicleDocs;switch(r){case 0:t=c.filter((function(e){var t;return e.metadata.empresaId===a&&!1===(null===(t=e.metadata)||void 0===t?void 0:t.tempFile)})),n="empresaId";break;case 1:t=c.filter((function(e){return e.metadata.empresaId===a}));var d=l.find((function(e){return e.socioId===a}));if(d){var u=[];t=c.filter((function(e){return d.empresas.some((function(a){return a.codigoEmpresa===e.metadata.empresaId&&"crc"!==e.metadata.fieldName}))})).forEach((function(e){e.metadata.socios&&e.metadata.socios.includes(a)&&u.push(e)})),t=u}break;case 2:n="procuracaoId";var m=[];c.forEach((function(e){var t,n;"procuracao"===(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.fieldName)&&((null===e||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.procuradores)&&e.metadata.procuradores.forEach((function(t){t===a&&m.push(e)})))})),t=m;break;case 3:n="veiculoId",t=s.filter((function(e){return e.metadata.veiculoId===a}));var p=i.find((function(e){return e.veiculoId===a}));if(p){var f=c.find((function(e){var a,t;return(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.apolice)===(null===p||void 0===p||null===(t=p.apolice)||void 0===t?void 0:t.toString())}));f&&t.push(f)}break;case 4:t=c.filter((function(e){return e.metadata.apolice===a}))}t=t.filter((function(e){var a;return!1===(null===e||void 0===e||null===(a=e.metadata)||void 0===a?void 0:a.tempFile)})),console.log(t),t[0]?(t=t.sort((function(e,a){return new Date(e.uploadDate)-new Date(a.uploadDate)})).reverse(),e.setState({filesCollection:t,showFiles:!0,typeId:n,selectedElement:a})):(e.setState({alertType:"filesNotFound",openAlertDialog:!0,subject:n}),e.setState({filesCollection:[]}))},e.deleteHandler=function(a){var t=e.state,n=t.dbTables,r=t.tablePKs,o=t.tab,i=n[o],l=r[o],c=A.a.camelize(l),s=a.codigoEmpresa;"socios"!==i&&"procuradores"!==i||(s=JSON.stringify(null===a||void 0===a?void 0:a.empresas)),console.log("\ud83d\ude80 ~ file: ConsultasContainer.jsx ~ line 172 ~ ConsultasContainer ~ codigoEmpresa",s),T.a.delete("/api/delete?table=".concat(i,"&tablePK=").concat(l,"&id=").concat(a[c],"&codigoEmpresa=").concat(s,"&cpf_socio=").concat(a.cpfSocio,"&cpf_procurador=").concat(a.cpfProcurador)).then((function(e){return console.log(e.data)}))},e.showCertificate=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,f;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.props.redux,r=n.laudos,o=n.parametros,i=t.veiculoId,l=t.anoCarroceria,c=t.situacao,s=t.vencimento,d=je()(s).isBefore(),u=(new Date).getFullYear(),!(u-l>=16)){a.next=7;break}if(m=r.find((function(e){return e.veiculoId===i})),je()(null===m||void 0===m?void 0:m.validade).isAfter(je()())){a.next=7;break}return a.next=6,e.setState({openAlertDialog:!0,customTitle:"Certificado de seguran\xe7a veicular pendente.",customMessage:"O laudo de seguran\xe7a veicular n\xe3o est\xe1 registrado no sistema ou se encontra vencido. Para regularizar, acesse Ve\xedculos -> Laudos."});case 6:return a.abrupt("return");case 7:if("Ativo"===c){a.next=11;break}return a.next=10,e.setState({alertType:"veiculoPendente",openAlertDialog:!0});case 10:return a.abrupt("return");case 11:if(!d){a.next=15;break}return a.next=14,e.setState({alertType:"seguroVencido",openAlertDialog:!0});case 14:return a.abrupt("return");case 15:p=window.location.origin+"/crv",localStorage.setItem("vehicle",JSON.stringify(t)),o&&o[0]&&(f=o[0].nomes,localStorage.setItem("nomes",JSON.stringify(f))),window.open(p,"noopener");case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.closeCertificate=function(){return e.setState({showCertificate:!e.state.showCertificate})},e.escFunction=function(a){27===a.keyCode&&(e.state.showDetails&&e.showDetails(),e.state.showFiles&&e.closeFiles(),e.state.showCertificate&&e.closeCertificate())},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1),sr()}},{key:"componentWillUnmount",value:function(){sr(!0),this.setState({})}},{key:"render",value:function(){var e,a=this.state,t=a.tab,o=a.options,i=a.items,l=a.showDetails,c=a.elementDetails,s=a.showFiles,d=a.selectedElement,u=a.filesCollection,m=a.typeId,p=a.tablePKs,f=a.showCertificate,h=a.certified,b=a.detailsTitle,g=a.detailsHeader,E=a.openAlertDialog,x=a.alertType,S=a.customTitle,y=a.customMessage,O=this.props,j=O.redux,w=O.user,C=j.empresas,k=j.procuracoes,D=j.procuradores,I=j.empresaDocs,N=j.altContrato,P=p.map((function(e){return A.a.camelize(e)})),T=Object(v.a)(this.props.redux[o[t]]);return 1!==t&&2!==t||(T=dr(T,C,t)),c&&l&&(e=T.find((function(e){return e[P[t]]===c[P[t]]}))),r.a.createElement(n.Fragment,null,r.a.createElement(Hn,{items:i,tab:t,changeTab:this.changeTab}),r.a.createElement(An,{tab:t,items:i,collection:T,empresas:C,user:w,showDetails:this.showDetails,showFiles:this.showFiles,del:this.deleteHandler,showCertificate:this.showCertificate}),l&&r.a.createElement(Qt,{close:this.showDetails,data:e||c,tab:t,title:b[t],header:g[t],empresas:C,procuracoes:k,procuradores:D,empresaDocs:I,altContrato:N}),f&&r.a.createElement(rr,{vehicle:h}),s&&r.a.createElement(lr,{tab:t,elementId:d,filesCollection:u,close:this.closeFiles,format:ur,typeId:m,empresas:C,empresaDocs:I}),E&&r.a.createElement(Ha,{open:E,close:this.closeAlert,alertType:x,tab:t,customMessage:y,customTitle:S}))}}]),t}(n.Component),pr=Object(c.c)(null,{updateCollection:_})(ce(["allVehicleFields","empresas","socios","procuradores","seguros","seguradoras","procuracoes","getFiles/vehicleDocs","getFiles/empresaDocs","equipamentos","acessibilidade","laudos","altContrato","parametros"],mr)),fr=[{title:"Contrato Social",name:"contratoSocial"},{title:"CRC",name:"crc"}],vr=function(e){var a=e.handleInput,t=e.handleBlur,n=e.data,o=e.handleFiles,i=e.removeFile,l=n.activeStep,c=n.stepTitles,s=n.form,d=n.fileToRemove;return r.a.createElement("div",{className:"flex paper"},r.a.createElement(Be,{subtitle:c[l]}),r.a.createElement("main",null,r.a.createElement(Re,{form:Yt,data:n,handleBlur:t,handleInput:a}),r.a.createElement("div",{className:"flex center"},fr.map((function(e,a){var t=e.name,n=e.title;return r.a.createElement(ia,{key:a,name:t,formData:s,dropDisplay:"Clique ou arraste para anexar o ".concat(n),handleFiles:o,removeFile:i,fileToRemove:d,style:{width:"25%",marginRight:0===a?"12px":0}})})))))},hr=[{field:"nomeSocio",label:"Nome do S\xf3cio",maxLength:90,width:195,disabled:!0},Object(h.a)(Object(h.a)({},Lt),{},{width:195,disabled:!0}),Object(h.a)(Object(h.a)({},Mt),{},{field:"telSocio",width:195}),Object(h.a)(Object(h.a)({},qt),{},{field:"emailSocio",width:195}),{field:"share",label:"Participa\xe7\xe3o Societ\xe1ria (%)",type:"number",width:195}],br=Object(X.a)((function(e){return{list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#999",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"}}})),gr=function(e){var a=e.socios,t=e.empresas,o=e.handleInput,i=e.handleBlur,l=e.data,c=e.addSocio,s=e.enableEdit,d=e.handleEdit,u=e.removeSocio,m=l.activeStep,p=l.stepTitles,f=l.filteredSocios,v=l.selectedEmpresa,h=br(),b=h.iconButton,g=h.list,E=!0;return p&&(E=!1),r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"flex center"},E&&r.a.createElement("header",{style:{marginBottom:"10px",width:"100%"}},r.a.createElement(Me,{data:l,empresas:t,handleInput:o,handleBlur:i})),!v&&E||!E?p&&r.a.createElement("section",{className:"flex center paper"},r.a.createElement(Be,{subtitle:p[m]}),r.a.createElement("div",{className:"flex center",style:{padding:"10px 0",width:"100%"}},r.a.createElement(Re,{form:E?hr:Ht,data:l,handleBlur:i,handleInput:o})),r.a.createElement("div",{style:{margin:"5px 0 7px 84.58%",width:"100%"}},r.a.createElement(He.a,{color:"primary",variant:"outlined",size:"small",onClick:c},r.a.createElement(Ke.a,null)," Adicionar s\xf3cio"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flexColumn",style:{alignItems:"center"}},r.a.createElement("h6",{style:{fontSize:"14px"}},"Altera\xe7\xe3o de informa\xe7\xf5es dos s\xf3cios"),r.a.createElement("p",{style:{fontSize:"12px",color:"#555"}}," Clique no l\xe1pis \xe0 direita do s\xf3cio para editar e clique novamente para salvar."),r.a.createElement("p",{style:{fontSize:"12px",color:"#555",marginTop:0}}," Para alterar participa\xe7\xe3o societ\xe1ria e nome, v\xe1 para Empresas ","->"," Alterea\xe7\xe3o de Contrato")))),v&&0===f.length&&r.a.createElement("section",null,r.a.createElement("p",null,"Nenhum s\xf3cio cadastrado para ",v.razaoSocial)),(null===a||void 0===a?void 0:a.length)>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"flexColumn center paper"},r.a.createElement("p",null," S\xf3cios cadastrados"),a.map((function(e,a){return r.a.createElement("div",{key:a},hr.map((function(a,t){return r.a.createElement(n.Fragment,{key:t+1e3},r.a.createElement(Ve.a,{value:e[a.field]||"",name:a.field,label:a.label,className:g,onChange:d,error:e.edit?Ce(e[a.field],a):null,helperText:e.edit?ke(e[a.field],a):null,type:null===a||void 0===a?void 0:a.type,disabled:!!("share"===a.field&&E||a.disabled)||!e.edit,InputLabelProps:{shrink:!0,style:{fontWeight:600,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",color:"#888"}},inputProps:{style:{fontSize:"13px",color:!0===e.edit?"#000":"new"===e.status?"green":"modified"===e.status?"#FF2500":"deleted"===e.status?"red":"#888",textDecoration:"deleted"!==e.status||e.edit?"":"line-through"}}}))})),r.a.createElement(He.a,{component:"span",className:b,title:"editar",onClick:function(){return s(a)}},r.a.createElement(xn.a,null)),!E&&r.a.createElement(He.a,{className:b,color:"deleted"===e.status?"primary":"secondary",title:"deleted"===e.status?"Desfazer exclus\xe3o":"Remover",onClick:function(){return u(a)}},"deleted"===e.status?r.a.createElement("i",{className:"material-icons"},"undo"):r.a.createElement(yt.a,null)))})))))},Er=Object(X.a)((function(e){return{paper:{color:e.palette.text.secondary,width:"100%",padding:"8px 0 5px 0",height:"auto"}}}));function xr(e){var a,t=e.data,o=e.empresasForm,i=e.sociosForm,l=e.filesForm,c=e.files,s=t.socios,d=Er().paper,u=[],m={},p=[];return o.forEach((function(e){t.hasOwnProperty([e.field])&&(Object.assign(m,Object(f.a)({},e.field,t[e.field])),p.push(e))})),u.push(m),a=[{subtitle:"Detalhes da empresa",form:p,data:u},{subtitle:"Informa\xe7\xf5es sobre os s\xf3cios",form:i,data:s}],r.a.createElement(r.a.Fragment,null,r.a.createElement(Oa.a,{className:d},r.a.createElement("div",{className:"divTable"},a.map((function(e,a){var t=e.subtitle,o=e.form,i=e.data;return r.a.createElement(n.Fragment,{key:a},r.a.createElement("table",{style:1===a?{tableLayout:"fixed"}:{}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",colSpan:o.length},t)),r.a.createElement("tr",null,o.map((function(e,a){return r.a.createElement("th",{key:a},e.label)})))),r.a.createElement("tbody",null,0===a&&r.a.createElement("tr",null,i.map((function(e,a){return Object.values(e).map((function(e,a){return r.a.createElement("td",{className:"review",key:a},e)}))}))),0!==a&&i.map((function(e,a){return r.a.createElement("tr",{key:a},Object.values(e).map((function(e,a){return r.a.createElement("td",{className:"review",key:a},e)})))})))))}))),r.a.createElement("h3",{style:{margin:"30px 0 0 25px"}}," ",r.a.createElement(wa.a,{style:{verticalAlign:"middle",padding:"0 0 0 8px"}})," Documentos "),c&&r.a.createElement(Sa,{form:l,files:c})))}function Sr(e,a){return e.match("cnpj")?function(e){var a=function(e){return e.keyCode};document.addEventListener("keypress",a);var t,n=e.toString();return t=(n=(n=(n=n.replace(".","")).replace("/","")).replace("-","")).length+1,14!==a&&(3===t&&(e=n.substr(0,2)+"."),6===t&&(e=n.substr(0,2)+"."+n.substr(2,5)+"."),10===t&&(e=n.substr(0,2)+"."+n.substr(2,3)+"."+n.substr(6,3)+"/"),15===t&&(e=n.substr(0,2)+"."+n.substr(2,3)+"."+n.substr(6,3)+"/"+n.substr(9,4)+"-"+n.substr(13,2))),e}(a):e.match("cpf")?function(e){if(e)return e=e.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")}(a):e.match("tel")?function(e){if(e)return 13===(e=e.replace(/(?!\d)./g,"").replace(/(\d{2})/,"($1) ")).length&&(e=e.replace(/(\d{4})(\d)/,"$1-$2")),14===e.length&&(e=e.replace(/(\d{5})(\d)/,"$1-$2")),e}(a):e.match("share")?function(e){if(e)return e.length>=5&&(e=e.slice(0,5)),e}(a):a}var yr=ce(["empresas"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={activeStep:0,stepTitles:["Preencha os dados da empresa","Informa\xe7\xf5es sobre os s\xf3cios","Revis\xe3o"],steps:["Dados da Empresa","S\xf3cios","Revis\xe3o"],razaoSocial:"",toastMsg:"Empresa cadastrada!",confirmToast:!1,files:[],fileNames:[],openDialog:!1,addedSocios:[0],totalShare:0,socios:[],showFiles:!1},e.setActiveStep=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.state.activeStep,"next"===t&&e.setState({activeStep:n+1}),"back"===t&&e.setState({activeStep:n-1}),"reset"===t&&e.setState({activeStep:0}),!(r=e.state.errors)||!r[0]){a.next=9;break}return a.next=8,e.setState(Object(h.a)(Object(h.a)({},e.state),we("setState")));case 8:return a.abrupt("return");case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleInput=function(a){var t=a.target,n=t.name,r=Sr(n,t.value);e.setState(Object(f.a)({},n,r))},e.addSocio=Object(w.a)(j.a.mark((function a(){var t,n,r,o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.state.socios,n={},r=0,o=0,Ht.forEach((function(a){""!==e.state[a.field]&&void 0!==e.state[a.field]||(r+=1)})),100!==r){a.next=7;break}return e.setState({alertType:"fieldsMissing",openAlertDialog:!0}),a.abrupt("return",null);case 7:if(Ht.forEach((function(a){Object.assign(n,Object(f.a)({},a.field,e.state[a.field]))})),t.push(n),t.forEach((function(e){o+=Number(e.share)})),!(o>100)){a.next=15;break}t.pop(),e.setState({alertType:"overShared",openAlertDialog:!0}),a.next=19;break;case 15:return a.next=17,e.setState({socios:t,totalShare:o});case 17:Ht.forEach((function(a){e.setState(Object(f.a)({},a.field,""))})),document.getElementsByName("nomeSocio")[0].focus();case 19:case"end":return a.stop()}}),a)}))),e.enableEdit=function(a){var t=e.state.socios;!0===t[a].edit?t[a].edit=!1:(t.forEach((function(e){return e.edit=!1})),t[a].edit=!0),e.setState({socios:t})},e.handleEdit=function(a){var t=a.target.name,n=e.state.socios,r=a.target.value;"share"===t&&(r=r.replace(",","."));var o=n.filter((function(e){return!0===e.edit}))[0],i=n.indexOf(o);o[t]=r;var l=n;l[i]=o,e.setState({filteredSocios:l})},e.removeSocio=function(a){var t=e.state.socios;t.splice(a,1),e.setState({socios:t})},e.getId=function(){var a=Object(w.a)(j.a.mark((function a(t,n,r,o,i,l,c){var s,d,u,m,p,v;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(d=r.filter((function(e){return e[i].toLowerCase().match(n.toLowerCase())})),""===n&&e.setState((s={},Object(f.a)(s,t,""),Object(f.a)(s,o,""),s)),!d[0]){a.next=10;break}if(u=d[0][i],m=d[0][l],""===n){a.next=8;break}return a.next=8,e.setState((p={},Object(f.a)(p,t,u),Object(f.a)(p,o,m),p));case 8:a.next=14;break;case 10:return a.next=12,e.setState((v={},Object(f.a)(v,t,""),Object(f.a)(v,o,""),v));case 12:alert(c+" n\xe3o cadastrado"),document.getElementsByName(t)[0].focus();case 14:case"end":return a.stop()}}),a)})));return function(e,t,n,r,o,i,l){return a.apply(this,arguments)}}(),e.handleBlur=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=t.target.name,r=t.target.value,(o=we())?e.setState({errors:o}):e.setState({errors:void 0}),a.t0=n,a.next="cnpj"===a.t0?7:"share"===a.t0?13:"numero"===a.t0?16:21;break;case 7:return a.next=9,T.a.get("/api/alreadyExists?table=empresas&column=cnpj&value=".concat(r));case 9:return i=a.sent,(null===i||void 0===i?void 0:i.data)&&("Empresa j\xe1 cadastrada.","O CNPJ informado corresponde a uma empresa j\xe1 est\xe1 cadastrada no sistema. Para alterar os dados da empresa, v\xe1 para Empresas -> Altera\xe7\xe3o de dados.",e.setState({cnpj:"",customTitle:"Empresa j\xe1 cadastrada.",customMsg:"O CNPJ informado corresponde a uma empresa j\xe1 est\xe1 cadastrada no sistema. Para alterar os dados da empresa, v\xe1 para Empresas -> Altera\xe7\xe3o de dados.",openAlertDialog:!0})),a.abrupt("break",22);case 13:return(r=r.replace(",","."))>100?e.setState({alertType:"overShared",openAlertDialog:!0}):(c=Number(e.state.totalShare)+Number(r),e.setState((l={},Object(f.a)(l,n,r),Object(f.a)(l,"totalShare",c),l))),a.abrupt("break",22);case 16:if(!r||r.match(/^\d+$/)){a.next=20;break}return a.next=19,e.setState({numero:""});case 19:e.setState({alertType:"numberNotValid",openAlertDialog:!0});case 20:case 21:return a.abrupt("break",22);case 22:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleSubmit=Object(w.a)(j.a.mark((function a(){var t,n,r,o,i,l;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state,n=t.socios,r=t.form,o={},Yt.forEach((function(a){e.state.hasOwnProperty([a.field])&&Object.assign(o,Object(f.a)({},a.field,e.state[a.field]))})),o.situacao="Ativo",Object.entries(o).forEach((function(e){var a=Object(ze.a)(e,2),t=a[0],n=a[1];n&&""!==n||delete o[t]})),n.forEach((function(e){delete e.edit,Object.entries(e).forEach((function(e){var a=Object(ze.a)(e,2),t=a[0],r=a[1];r&&""!==r||delete n[t]}))})),o=A.a.decamelizeKeys(o),(n=A.a.decamelizeKeys(n))&&n[0]?console.log(n):(console.log("Warning: No socios were registered!!!"),n=void 0),a.next=10,T.a.post("/api/empresaFullCad",{empresa:o,socios:n}).then((function(a){i=a.data.codigo_empresa,l=a.data.socioIds,console.log("\ud83d\ude80 ~ file: EmpresasContainer.jsx ~ line 249 ~ EmpresasContainer ~ handleSubmit= ~ empresaId",i),e.submitFile(i,l,r)}));case 10:e.toast(),e.resetState();case 12:case"end":return a.stop()}}),a)}))),e.handleFiles=function(){var a=Object(w.a)(j.a.mark((function a(t,n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t||!t[0]){a.next=5;break}return a.next=3,e.setState(Object(f.a)({},n,t[0]));case 3:r=Ee(t,e.state,fr),e.setState(Object(h.a)(Object(h.a)({},r),{},{fileToRemove:null}));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.submitFile=function(){var a=Object(w.a)(j.a.mark((function a(t,n){var r,o,i,l,c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.state.form,o={empresaId:t,socios:n,tempFile:!1},!(r instanceof FormData)){a.next=24;break}i=new FormData,l=Object(be.a)(r),a.prev=4,l.s();case 6:if((c=l.n()).done){a.next=16;break}return s=c.value,o.fieldName=s[0],i.append("metadata",JSON.stringify(o)),i.set(s[0],s[1]),a.next=13,T.a.post("/api/empresaUpload",i).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 13:i=new FormData;case 14:a.next=6;break;case 16:a.next=21;break;case 18:a.prev=18,a.t0=a.catch(4),l.e(a.t0);case 21:return a.prev=21,l.f(),a.finish(21);case 24:case"end":return a.stop()}}),a,null,[[4,18,21,24]])})));return function(e,t){return a.apply(this,arguments)}}(),e.removeFile=function(a){var t=e.state.form,n=ye(a,t);e.setState(Object(h.a)(Object(h.a)({},e.state),n))},e.resetState=function(){var a={},t={},n={};Yt.forEach((function(t){Object.keys(t).forEach((function(n){"field"===n&&e.state[t[n]]&&Object.assign(a,Object(f.a)({},t[n],void 0))}))})),Ht.forEach((function(a){Object.keys(a).forEach((function(n){"field"===n&&e.state[a[n]]&&Object.assign(t,Object(f.a)({},a[n],void 0))}))})),fr.forEach((function(e){var a=e.name;Object.assign(n,Object(f.a)({},a,void 0))})),e.setState(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},a),t),n),{},{activeStep:0,razaoSocial:"",files:[],fileNames:[],addedSocios:[0],totalShare:0,socios:[],form:void 0,showFiles:!1}))},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.showFiles=function(){return e.setState({showFiles:!0})},e.closeFiles=function(){return e.setState({showFiles:!e.state.showFiles})},e.escFunction=function(a){27===a.keyCode&&e.state.addEquipa&&e.handleEquipa()},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1),document.querySelector("input[name='razaoSocial']").style.width="300px"}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.socios,t=e.activeStep,o=e.confirmToast,i=e.toastMsg,l=e.steps,c=e.openAlertDialog,s=e.alertType,d=e.form,u=e.customMsg,m=e.customTitle;return r.a.createElement(n.Fragment,null,r.a.createElement(Aa,{links:["Empresas","/empresas"],text:"Cadastro de empresas"}),r.a.createElement(Ma,{activeStep:t,steps:l,setActiveStep:this.setActiveStep}),0===t?r.a.createElement(vr,{data:this.state,handleInput:this.handleInput,handleBlur:this.handleBlur,handleFiles:this.handleFiles,removeFile:this.removeFile}):1===t?r.a.createElement(gr,{data:this.state,socios:a,handleInput:this.handleInput,handleBlur:this.handleBlur,addSocio:this.addSocio,removeSocio:this.removeSocio,handleFiles:this.handleFiles,enableEdit:this.enableEdit,handleEdit:this.handleEdit}):2===t&&r.a.createElement(xr,{data:this.state,files:d,filesForm:fr,empresasForm:Yt,sociosForm:Ht}),r.a.createElement(Ta,{activeStep:t,lastStep:l.length-1,handleSubmit:this.handleSubmit,setActiveStep:this.setActiveStep}),r.a.createElement(ee,{open:o,close:this.toast,msg:i}),c&&r.a.createElement(Ha,{open:c,close:this.closeAlert,alertType:s,customMessage:u,customTitle:m}))}}]),t}(n.Component)),Or=(t(553),[{title:"Cadastrar",description:"Cadastrar uma nova empresa no sistema.",imageUrl:"/images/addCompany21.png",link:"/empresas/cadastro"},{title:"Altera\xe7\xe3o do Cadastral",description:"Altera\xe7\xe3o de dados da empresa ou contrato social",link:"/altContrato",imageUrl:"/images/pen2.png"},{title:"S\xf3cios",description:"Visualizar ou editar dados dos s\xf3cios",link:"/empresas/socios",imageUrl:"/images/socios3.png"},{title:"Procura\xe7\xf5es",description:"Cadastrar procura\xe7\xf5es e procuradores",link:"/empresas/procuradores",imageUrl:"/images/procuradores31.png"}]),jr=ce([],(function(e){var a=e.user,t=null===a||void 0===a?void 0:a.role;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"jumbo"},r.a.createElement("div",null,r.a.createElement("h1",{className:"jumbo__title"},"Empresas"),r.a.createElement("p",{className:"jumbo__description"},"Selecione uma das op\xe7\xf5es abaixo."))),r.a.createElement("main",{className:"cardContainer",style:{width:"empresa"!==t?"100%":"90%",marginLeft:"empresa"!==t?"0":"5%"}},Or.map((function(e,a){var n=e.link,o=e.title,i=e.description,l=e.imageUrl;return"empresa"===t&&"/empresas/cadastro"===n?null:r.a.createElement(S.b,{to:n,style:{textDecoration:"none"},key:a},r.a.createElement("div",{className:"cardE"},r.a.createElement("div",{className:"cardE__text"},r.a.createElement("h3",null,o),r.a.createElement("p",null,i)),r.a.createElement("figure",{className:"cardE__image"},r.a.createElement("img",{src:l,alt:""}))))}))))})),wr=t(239),Cr=t.n(wr),kr=t(422),Dr=t.n(kr),Ir=t(240),Nr=t.n(Ir),Ar=[{field:"nomeProcurador",label:"Nome do Procurador",maxLength:90,width:220},Object(h.a)(Object(h.a)({},Lt),{},{field:"cpfProcurador",width:220}),Object(h.a)(Object(h.a)({},Mt),{},{field:"telProcurador",width:220}),Object(h.a)(Object(h.a)({},qt),{},{field:"emailProcurador",width:220})],Pr=t(395),Tr=t(383),Fr=t(378),zr=t(390),Lr=t(384),Mr=Object(wt.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000",fontWeight:600,fontSize:14},body:{fontSize:14}}}))(Fr.a),qr=Object(wt.a)((function(e){return{head:{backgroundColor:"#e1f5fe",color:"#00000"},body:{fontSize:13}}}))(Fr.a),Vr=Object(wt.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}}))(Lr.a),_r=Object(X.a)((function(e){return{root:{flexGrow:"1",padding:"1%",textAlign:"center"},title:{marginTop:"2%",fontColor:"#000",fontSize:"0.9rem",backgroundColor:"#B2DCEA",textAlign:"center"},input:{textAlign:"center"},paper:{color:e.palette.text.secondary,margin:e.spacing(2),width:"100%",padding:"2% 0 1% 0",height:"auto"},table:{marginBottom:e.spacing(2),overflowX:"auto"}}}));function Rr(e){var a=e.procuracao,t=e.procuradores,n=_r(),o=n.title,i=n.table,l=[];return a.procuradores.forEach((function(e){var a=t.find((function(a){return a.procuradorId===e}));l.push(a)})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:"100%",align:"left"}},r.a.createElement(Fn.a,{className:o}," Procuradores cadastrados ")),r.a.createElement(Pr.a,{className:i},r.a.createElement(zr.a,null,r.a.createElement(Vr,null,Ar.map((function(e,a){return r.a.createElement(Mr,{key:a},e.label)})))),l.map((function(e,a){return e?r.a.createElement(Tr.a,{key:a},r.a.createElement(Lr.a,null,Ar.map((function(a,t){return r.a.createElement(qr,{key:t},e[a.field])})))):null}))))}var Br={textAlign:"center",alignItems:"flex-start",justify:"space-between",lineHeight:"40px",border:"1px #ccc solid",padding:"0 1%",margin:"1% 1% 0.5% 1%",fontSize:"0.8rem",backgroundColor:"#f6f6f6",borderRadius:"6px",width:180},Ur={verticalAlign:"middle",cursor:"pointer",paddingLeft:"2%"},Yr={verticalAlign:"middle",padding:"0 0% 0 2%"},Hr=Object(X.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:"0.8rem",fontColor:"#bbb",textAlign:"center"},addButton:{padding:"5px 10px 5px 8px",height:"40px",margin:"5px",float:"right",fontSize:"0.8rem"}}})),Jr=function(e){var a=e.redux,t=e.data,o=e.handleInput,i=e.addProc,l=e.removeProc,c=e.handleFiles,s=e.getFile,d=e.plusOne,u=e.minusOne,m=e.checkExpires,p=e.setShowPendencias,f=e.removeFile,v=t.dropDisplay,b=t.selectedEmpresa,g=t.procsToAdd,E=t.selectedDocs,x=t.procuracao,S=t.expires,y=t.demand,O=t.showPendencias,j=t.info,w=t.demandFiles,C=t.fileToRemove,k=a.empresas,D=a.procuradores,I=Hr(),N=I.addButton,A=I.textField,P=function(e,a){var n=t[e.field+a];return(!e.errorHandler||!e.errorHandler(n))&&(!(!n||!e.errorHandler||e.errorHandler(n))||(e.pattern&&n?null===n.match(e.pattern):n>e.max||n<e.min||(null===n||void 0===n?void 0:n.length)<(null===e||void 0===e?void 0:e.minLength)))},T=function(e,a){var n=t[e.field+a];return e.errorHandler&&e.errorHandler(n)?"\u2713":n&&e.errorHandler&&!e.errorHandler(n)?"\u2718":n>e.max||n<e.min?"Valor inv\xe1lido":n&&null===n.match(e.pattern)?"\u2718":e.pattern&&n&&null!==n.match(e.pattern)?"\u2713":(null===n||void 0===n?void 0:n.length)<(null===e||void 0===e?void 0:e.minLength)?"\u2718":(null===n||void 0===n?void 0:n.length)>=(null===e||void 0===e?void 0:e.minLength)?"\u2713":void 0};return r.a.createElement("div",{className:"flex"},r.a.createElement("header",{className:"flex center",style:{marginBottom:"10px",width:"100%"}},r.a.createElement(Me,{data:t,empresas:k,handleInput:o})),b&&r.a.createElement("section",{className:"paper flexColumn",style:{position:"relative",width:"100%"}},r.a.createElement("div",{className:"flexColumn",style:{alignItems:"center"}},r.a.createElement("h6",null," Cadastrar nova procura\xe7\xe3o "),r.a.createElement("h4",{style:{fontWeight:400,fontSize:"0.9em"}},' Se a procura\xe7\xe3o abranger mais de um procurador, clique em "+" para adicionar e anexe apenas 1 vez.')),g.map((function(e,a){return r.a.createElement("div",{className:"flex",key:a},Ar.map((function(e,i){return r.a.createElement(n.Fragment,{key:i},r.a.createElement(Ve.a,{name:e.field+a,label:e.label,margin:"normal",className:A,onChange:function(e){return o(e)},type:e.type||"",error:P(e,a),helperText:T(e,a),select:e.select||!1,value:t[e.field+a]||"",disabled:e.disabled||!1,InputLabelProps:{className:A,shrink:"date"===e.type||void 0,style:{fontSize:"0.7rem",fontWeight:400,color:"#888"}},inputProps:{style:{background:e.disabled&&t.disable?"#fff":"#fafafa",fontSize:"0.9rem",textAlign:"center",color:"#000",width:e.width||150,height:"7px"},value:"".concat(t[e.field+a]||""),list:e.datalist||"",maxLength:e.maxLength||"",minLength:e.minLength||"",max:e.max||""},multiline:e.multiline||!1,rows:e.rows||null,variant:e.variant||"filled",fullWidth:e.fullWidth||!1}),a===g.length-1&&3===i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Cr.a,{onClick:function(){return d()},style:{verticalAlign:"middle",position:"absolute",bottom:"112px",right:a>0?"40px":"68px",color:"#009688",fontSize:30,cursor:"pointer",zIndex:1}}),a>0&&r.a.createElement(Dr.a,{onClick:function(){return u()},style:{verticalAlign:"middle",position:"absolute",bottom:"112px",right:"70px",color:"red",fontSize:30,cursor:"pointer",zIndex:1}})))})))})),r.a.createElement("div",{className:"flex",style:{alignItems:"center",padding:"0 20px",width:"100%",margin:"12px 0 6px 0"}},r.a.createElement("div",{style:{width:"50%"}},y?r.a.createElement("div",{className:"flex"},r.a.createElement(Sa,{demand:y,collection:"empresaDocs",demandFiles:w,form:dt,style:{minWidth:"220px"}})):r.a.createElement(ia,{name:"procuracao",formData:x,dropDisplay:v,handleFiles:c,demandFiles:w,removeFile:f,fileToRemove:C})),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"50%",paddingTop:"8px"}},r.a.createElement("div",{style:{marginTop:"12px"}},r.a.createElement(Ye.a,{control:r.a.createElement(Ue.a,{checked:!0===S,onChange:function(){return m()},value:S}),label:r.a.createElement("span",{style:{color:"#2979ff",fontSize:"0.8em",float:"right"}},"Procura\xe7\xe3o por prazo determinado?")})),r.a.createElement(Ve.a,{name:"vencimento",label:"Vencimento",margin:"normal",className:A,onChange:function(e){return o(e)},type:"date",helper:"se indeterminado, deixar em branco",value:t.vencimento||"",disabled:!1===S,InputLabelProps:{className:A,shrink:!0,style:{fontSize:"0.8rem",color:"#455a64",marginBottom:"5%"}},inputProps:{style:{background:"#fafafa",fontSize:"0.8rem",textAlign:"center",color:"#000",height:"9px"}},variant:"filled"})))),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%"}},b&&!y?r.a.createElement(He.a,{className:N,size:"small",color:"secondary",variant:"contained",onClick:function(){return i()}},r.a.createElement(Ke.a,null),"Cadastrar procura\xe7\xe3o"):b&&y?r.a.createElement(Ta,{uniqueStep:!0,declineButtonLabel:"Indeferir",demand:y,setShowPendencias:p,showPendencias:O,info:j,handleSubmit:i,handleInput:o}):null),r.a.createElement("section",{className:"flexColumn",style:{width:"100%",paddingRight:"0"}},!b||E[0]||y?b&&E[0]&&r.a.createElement("h2",{style:{margin:"25px 0 0 15px"}},"Procura\xe7\xf5es cadastradas"):r.a.createElement("div",{className:"flex paper"},"Nenhum procurador cadastrado para ",b.razaoSocial),E.length>0&&E.map((function(e,a){return r.a.createElement("div",{key:.01*a,className:"flexColumn paper",style:{padding:"10px 15px 20px 15px"}},r.a.createElement("h5",null,"Procura\xe7\xe3o ",e.vencimento?"com vencimento em "+((t=e.vencimento)?je()(t).format("DD-MM-YYYY"):""):"por prazo indeterminado"),r.a.createElement(Rr,{procuradores:D,procuracao:e}),r.a.createElement("div",{className:"flex center",style:{position:"relative"}},r.a.createElement("span",{style:Br},r.a.createElement(va.a,{style:Yr}),r.a.createElement("span",{style:{verticalAlign:"middle"}}," "," Baixar arquivo"),r.a.createElement(pa.a,{style:Ur,onClick:function(){return s(e.procuracaoId)}})),r.a.createElement("span",{style:Object(h.a)(Object(h.a)({},Br),{},{width:90,backgroundColor:"white",border:0,position:"absolute",right:0})},r.a.createElement(Nr.a,{color:"secondary",style:Ur,onClick:function(){return l(e)}}),"Apagar")));var t}))))},Kr=ce(["empresas","procuradores","procuracoes","getFiles/empresaDocs"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;return Object(C.a)(this,t),(e=a.call(this)).state={empresas:[],razaoSocial:"",toastMsg:"Procura\xe7\xe3o cadastrada!",confirmToast:!1,fileNames:[],openDialog:!1,expires:!1,filteredProc:[],dropDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",procuradores:[],procsToAdd:[1],procuracoesArray:[],selectedDocs:[],showPendencias:!1},e.handleInput=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.target.name,r=e.props.redux.empresas,o=Object(v.a)(e.props.redux.procuradores),i=JSON.parse(JSON.stringify(e.props.redux.procuracoes)),l=t.target.value,c=Sr(n,l),e.setState(Object(f.a)({},n,c)),"razaoSocial"!==n||!Array.isArray(o)){a.next=14;break}if(!(s=r.find((function(e){return e.razaoSocial===l})))){a.next=13;break}return d=i.filter((function(e){return e.codigoEmpresa===s.codigoEmpresa})),a.next=10,e.setState({selectedEmpresa:s,selectedDocs:d,razaoSocial:s.razaoSocial});case 10:l!==s.razaoSocial&&e.setState({selectedEmpresa:void 0,selectedDocs:[]}),a.next=14;break;case 13:e.setState({selectedEmpresa:void 0,selectedDocs:[]});case 14:n.match("cpfProcurador")&&(u=o.find((function(e){return e.cpfProcurador===l})))&&(m=n.charAt(n.length-1),Object.keys(e.state).forEach((function(a){a!==n&&e.state[a]===l&&(alert("Este CPF j\xe1 foi informado."),e.setState(Object(f.a)({},n,"")),p=!0)})),p||Ar.forEach((function(a){var t=a.field,n=t+m;e.setState(Object(f.a)({},n,u[t]))})));case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.addProc=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m,p,h,b,g,E,x,S;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.state,r=n.selectedEmpresa,o=n.demand,i=n.procuracao,l=n.vencimento,c=n.expires,s=n.info,d=r.codigoEmpresa,u=Object(v.a)(e.state.procsToAdd),m=[],p={},u.forEach((function(a,t){Ar.forEach((function(a){Object.assign(p,Object(f.a)({},a.field,e.state[a.field+t]))}));var n=0;Object.values(p).forEach((function(e){e&&(n+=1)})),n>0&&m.push(p),n=0,p={},Ar.forEach((function(a){e.setState(Object(f.a)({},a.field+t,""))}))})),h=[],b=[],g=j.a.mark((function e(){var a,t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x[E],e.next=3,T.a.get("/api/getOne?table=procuradores&key=cpf_procurador&value='".concat(a.cpfProcurador,"'"));case 3:t=e.sent,n=A.a.camelizeKeys(null===t||void 0===t?void 0:t.data[0]),console.log("\ud83d\ude80 ~ file: Procuradores.jsx ~ line 222 ~ Procuradores ~ addProc= ~ existingProc",n),(null===n||void 0===n?void 0:n.procuradorId)?(a.empresas=n.empresas,(0===a.empresas[0]&&1===a.empresas.length||!a.empresas)&&(a.empresas=[d]),a.empresas&&a.empresas[0]&&!a.empresas.includes(d)&&a.empresas.push(d),Object.keys(a).forEach((function(e){a[e]===n[e]&&"empresas"!==e&&"cpfProcurador"!==e&&delete a[e]})),a.procuradorId=n.procuradorId,b.push(a)):h.push(a);case 7:case"end":return e.stop()}}),e)})),E=0,x=m;case 6:if(!(E<x.length)){a.next=11;break}return a.delegateYield(g(),"t0",8);case 8:E++,a.next=6;break;case 11:void 0===t&&(S={status:"Aguardando aprova\xe7\xe3o",empresaId:d,history:{files:i,newMembers:h,oldMembers:b,vencimento:l,expires:c},metadata:{fieldName:"procuracao",empresaId:d}},Object.entries(S).forEach((function(e){var a=Object(ze.a)(e,2),t=a[0];a[1]||delete S[t]})),S.approved=t,S.historyLength=0,Te(S).then((function(e){return console.log(e)})),e.setState({toastMsg:"Solicita\xe7\xe3o de cadastro enviada",confirmToast:!0}),setTimeout((function(){e.resetState()}),1500)),!1===t&&(Te({id:o.id,empresaId:d,history:{info:s},declined:!0}).then((function(e){return console.log(e)})),e.setState({toastMsg:"Solicita\xe7\xe3o indeferida!",confirmToast:!0}),setTimeout((function(){e.props.history.push("/solicitacoes")}),1500)),!0===t&&(h=A.a.decamelizeKeys(h),b=A.a.decamelizeKeys(b),e.approveProc(h,b));case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.approveProc=function(){var a=Object(w.a)(j.a.mark((function a(t,n){var r,o,i,l,c,s,d,u,m,p,f,v;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.state,o=r.selectedEmpresa,i=r.demandFiles,l=r.vencimento,c=r.demand,s=o.codigoEmpresa,d=n.map((function(e){return e.procurador_id})),!(t.length>0)){a.next=7;break}return t.forEach((function(e){return e.empresas="{".concat(s,"}")})),t=A.a.decamelizeKeys(t),u={table:"procuradores",tablePK:"procurador_id",procuradores:t,empresas:[s]},a.next=7,T.a.post("/api/cadProcuradores",Object(h.a)(Object(h.a)({},u),{},{codigoEmpresa:s})).then((function(e){e.data.forEach((function(e){return d.push(e.procurador_id)}))}));case 7:return m={table:"procuradores",tablePK:"procurador_id",requestArray:n,keys:Ar.map((function(e){return A.a.decamelize(e.field)})),codigoEmpresa:s,updateUser:"insertEmpresa"},n&&n[0]&&(m.keys.push("empresas"),n.forEach((function(e){var a=e.empresas;a&&a[0]&&(a.includes(s)||e.empresas.push(s),e.empresas=a.toString())})),T.a.put("/api/editProc",m).then((function(e){return console.log(e)}))),p={codigo_empresa:s,vencimento:l,status:"vigente",procuradores:d},Object.entries(p).forEach((function(e){var a=Object(ze.a)(e,2),t=a[0],n=a[1];n&&""!==n||delete p[t]})),a.next=13,T.a.post("/api/cadProcuracao",p).then((function(e){return f=e.data[0].procuracao_id}));case 13:p.procuracaoId=f,v={id:c.id,demandFiles:i,history:{},approved:!0},i&&(v.metadata={fieldName:"procuracao",empresaId:o.codigoEmpresa,procuracaoId:f,procuradores:d}),Te(v).then((function(e){return console.log(e)})),e.toast(),c&&setTimeout((function(){e.props.history.push("/solicitacoes")}),1500),e.resetState();case 20:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),e.removeProc=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d,u,m;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.procuracaoId,r=t.procuradores,o=t.codigoEmpresa,i=e.props.redux.procuradores,l=e.props.redux.procuracoes,c=e.props.redux.empresaDocs.find((function(e){return Number(e.metadata.procuracaoId)===n})),!r[0]){a.next=12;break}if(s=l.filter((function(e){return e.codigoEmpresa===o&&e.procuracaoId!==n})),d=new Set,s.forEach((function(e){return e.procuradores.forEach((function(e){return d.add(e)}))})),(u=i.filter((function(e){return r.includes(e.procuradorId)&&!d.has(e.procuradorId)}))).forEach((function(e){var a=e.empresas||[];a=a.filter((function(e){return e!==o})),e.empresas=a,0===a.length&&(e.empresas=[0])})),!u[0]){a.next=12;break}return u=A.a.decamelizeKeys(u),m={table:"procuradores",tablePK:"procurador_id",requestArray:u,keys:["empresas"],codigoEmpresa:o},T.a.put("/api/editProc",Object(h.a)({},m)).then((function(e){return console.log(e)})),a.next=12,T.a.patch("/api/removeEmpresa",{cpfsToRemove:u,codigoEmpresa:o}).then((function(e){return console.log(e)}));case 12:return a.next=14,T.a.delete("/api/delete?table=procuracoes&tablePK=procuracao_id&id=".concat(n,"&codigoEmpresa=").concat(o)).then((function(e){return console.log(e.data)}));case 14:c&&c.hasOwnProperty("id")&&T.a.delete("/api/deleteFile?collection=empresaDocs&id=".concat(c.id)).then((function(e){var a=e.data;return console.log(a)}));case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleFiles=function(a){if(!ge(a)){var t=new FormData;t.append("procuracao",a[0]),e.setState({procuracao:t,fileToRemove:null})}},e.removeFile=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=e.state.procuracao,r=ye(t,n),e.setState(Object(h.a)(Object(h.a)({},e.state),r));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.getFile=function(a){var t=e.props.redux.empresaDocs.find((function(e){return Number(e.metadata.procuracaoId)===a}));if(t){var n=t.id,r=t.filename;ha(n,r,"empresaDocs")}else e.setState({alertType:"filesNotFound",openAlertDialog:!0})},e.plusOne=function(){var a=Object(v.a)(e.state.procsToAdd);a.push(1),e.setState({procsToAdd:a})},e.minusOne=function(){var a=Object(v.a)(e.state.procsToAdd);a.pop(),e.setState({procsToAdd:a})},e.checkExpires=function(){!0===e.state.expires&&e.setState({vencimento:""}),e.setState({expires:!e.state.expires})},e.resetState=function(){var a=e.state.procsToAdd,t=Ar.map((function(e){return e.field})),n={};a.forEach((function(a,r){t.forEach((function(a){e.state.hasOwnProperty(a+r)&&(n[a+r]=void 0)}))})),e.removeFile("procuracao"),e.setState(Object(h.a)(Object(h.a)({},n),{},{dropDisplay:"Clique ou arraste para anexar a procura\xe7\xe3o referente a este(s) procurador(es).",procsToAdd:[1],vencimento:void 0,procuracao:void 0,expires:!1}))},e.setShowPendencias=function(){return e.setState({showPendencias:!e.state.showPendencias})},e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(){return e.setState({confirmToast:!e.state.confirmToast})},e.escFunction=function(a){27===a.keyCode&&e.state.openDialog&&e.toggleDialog()},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,n,r,o,i,l,c,s,d,u,m,p,v,b,g,E,x,S,y,O=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.props.redux,o=r.empresas,i=null===(a=this.props)||void 0===a||null===(t=a.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.demand,l=JSON.parse(JSON.stringify(this.props.redux.procuracoes)),o&&1===o.length&&(c=o[0],s=l.filter((function(e){return e.codigoEmpresa===c.codigoEmpresa})),this.setState({selectedEmpresa:c,razaoSocial:null===c||void 0===c?void 0:c.razaoSocial,selectedDocs:s})),i&&(d=JSON.parse(JSON.stringify(r.procuradores)),u=vt(i,r,d),m=u.latestDoc,p=Object(Y.a)(u,["latestDoc"]),v=i.history,b=v[0],g=b.vencimento,E=b.expires,x=v[0].newMembers||[],S=v[0].oldMembers||[],console.log(u),y=[],S[0]&&S.forEach((function(e){d.forEach((function(a){Object.keys(a).forEach((function(t){(null===e||void 0===e?void 0:e.procuradorId)!==(null===a||void 0===a?void 0:a.procuradorId)||e[t]||(e[t]=a[t])}))}))})),(x[0]||S[0])&&x.concat(S).forEach((function(e,a){y.push(a),Ar.forEach((function(t){var n=t.field;O.setState(Object(f.a)({},n+a,e[n]))}))})),this.setState({vencimento:g,expires:E,procsToAdd:y}),this.setState(Object(h.a)(Object(h.a)({},p),{},{demandFiles:[m]}))),document.addEventListener("keydown",this.escFunction,!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var a=this.state.selectedEmpresa,t=this.props.redux.procuracoes;if(a){var n,r=(null===(n=this.state)||void 0===n?void 0:n.selectedEmpresa).codigoEmpresa,o=JSON.parse(JSON.stringify(t));if(JSON.stringify(e.redux.procuracoes)!==JSON.stringify(o)){var i=o.filter((function(e){return e.codigoEmpresa===r}));this.setState({selectedDocs:i})}}}},{key:"componentWillUnmount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this.state,a=e.openAlertDialog,t=e.alertType,n=e.demand;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Aa,{links:["Empresas","/empresas"],text:"Cadastro de procura\xe7\xf5es",demand:n}),r.a.createElement(Jr,{data:this.state,redux:this.props.redux,handleInput:this.handleInput,removeProc:this.removeProc,handleFiles:this.handleFiles,removeFile:this.removeFile,addProc:this.addProc,handleSubmit:this.handleSubmit,plusOne:this.plusOne,minusOne:this.minusOne,getFile:this.getFile,checkExpires:this.checkExpires,setShowPendencias:this.setShowPendencias}),r.a.createElement(ee,{open:this.state.confirmToast,close:this.toast,msg:this.state.toastMsg}),a&&r.a.createElement(Ha,{open:a,close:this.closeAlert,alertType:t,customMessage:this.state.customMsg}))}}]),t}(n.Component)),Wr=ce(["empresas","socios","getFiles/empresaDocs"],function(e){Object(D.a)(t,e);var a=Object(I.a)(t);function t(){var e;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={razaoSocial:"",toastMsg:"Dados atualizados!",confirmToast:!1,openDialog:!1,dialogTitle:"",addedSocios:[0],filteredSocios:[]},e.handleInput=function(a){var t=e.props.redux,n=t.empresas,r=t.socios,o=a.target.name,i=a.target.value,l=Sr(o,i);if(e.setState(Object(f.a)({},o,l)),"razaoSocial"===o){var c=n.find((function(e){return e.razaoSocial===i}));if(c){var s=JSON.parse(JSON.stringify(r)).filter((function(e){return e.empresas&&e.empresas[0]&&e.empresas.some((function(e){return e.codigoEmpresa===c.codigoEmpresa}))}));e.setState({razaoSocial:c.razaoSocial,selectedEmpresa:c,filteredSocios:s}),i!==c.razaoSocial&&e.setState({selectedEmpresa:void 0})}else e.setState({selectedEmpresa:void 0,filteredSocios:[]})}},e.enableEdit=function(a){var t=e.state.filteredSocios,n=t[a];!0===n.edit?(e.handleSubmit(a),n.edit=!1,t[a]=n):(t.forEach((function(e){return e.edit=!1})),t[a].edit=!0),e.setState({filteredSocios:t})},e.handleEdit=function(a){var t=a.target.name,n=a.target.value;n=Sr(t,n);var r=e.state.filteredSocios.filter((function(e){return!0===e.edit}))[0],o=e.state.filteredSocios.indexOf(r);r[t]=n;var i=e.state.filteredSocios;i[o]=r,e.setState({filteredSocios:i})},e.handleSubmit=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,l,c,s,d;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.state,r=n.filteredSocios,o=n.selectedEmpresa,i=o.codigoEmpresa,"socios",l=["telSocio","emailSocio"],c=r[t],s={socioId:c.socioId},l.forEach((function(e){c[e]&&(s[e]=c[e])})),d=[A.a.decamelizeKeys(s)],a.next=6,T.a.put("/api/editSocios",{requestArray:d,table:"socios",keys:l,codigoEmpresa:i}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.toggleDialog=function(){return e.setState({openDialog:!e.state.openDialog})},e.closeAlert=function(){return e.setState({openAlertDialog:!e.state.openAlertDialog})},e.toast=function(a){return e.setState({confirmToast:!e.state.confirmToast,toastMsg:a||e.state.toastMsg})},e}return Object(k.a)(t,[{key:"componentDidMount",value:function(){var e,a=this.props.redux,t=a.socios,n=a.empresas,r=JSON.parse(JSON.stringify(t));n&&1===n.length?this.setState({selectedEmpresa:n[0],razaoSocial:null===(e=n[0])||void 0===e?void 0:e.razaoSocial,filteredSocios:t,originalSocios:r}):this.setState({originalSocios:r})}},{key:"render",value:function(){var e=this.state,a=e.filteredSocios,t=e.openAlertDialog,n=e.alertType,o=e.confirmToast,i=e.toastMsg,l=this.props.redux.empresas;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Aa,{links:["Empresas","/empresas"],text:"Altera\xe7\xe3o de dados dos s\xf3cios"}),r.a.createElement(gr,{data:this.state,socios:a,empresas:l,handleInput:this.handleInput,enableEdit:this.enableEdit,handleEdit:this.handleEdit}),r.a.createElement(ee,{open:o,close:this.toast,msg:i}),t&&r.a.createElement(Ha,{open:t,close:this.closeAlert,alertType:n}))}}]),t}(n.Component)),$r=t(181),Gr=t.n($r),Xr={title:{text:"Ve\xedculos por ano de fabrica\xe7\xe3o",align:"center",marginTop:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:500,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}},legend:{show:!1},chart:{id:"veiculos_ano_fabricacao"},xaxis:{labels:{style:{fontSize:"9px",fontWeight:400,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}}},dataLabels:{enabled:!1},plotOptions:{bar:{horizontal:!1}}},Zr={title:{text:"Percentual de ve\xedculos por ano de fabrica\xe7\xe3o",align:"center",marginTop:10,marginBottom:20,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"13px",fontWeight:500,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif "}},plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!0,fontSize:"20px",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif ",fontWeight:600,color:"#373d3f",offsetY:-10},value:{show:!0,fontSize:"15px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,color:"#373d3f",offsetY:16,formatter:function(e){return e}},total:{show:!0,showAlways:!0,label:"Total:",fontSize:"20px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:600,color:"#373d3f"}}}}},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},Qr=(t(555),function(e){var a=e.empresas,t=e.razaoSocial,n=e.selectedEmpresa,o=e.selectedVehicles,i=e.labels,l=e.values,c=e.tableLabels,s=e.tableData,d=e.mediaIdades,u=e.moda,m=e.handleInput,p=e.segurosVencidos,f=e.segurosVigentes,v=e.oldVehicles,b=e.veiculosNovos;return r.a.createElement("main",{className:"relatorios"},r.a.createElement(Me,{empresas:a,data:{razaoSocial:t},handleInput:m}),o&&0!==o.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{width:"100%",textAlign:"center"}},n?n.razaoSocial:"Exibindo todos os ve\xedculos"," - M\xe9dia de idade da frota: ",d," anos. Moda do ano de fabrica\xe7\xe3o: ",u,"."),r.a.createElement(Oa.a,null,r.a.createElement("section",{className:"rowContainer"},r.a.createElement(Gr.a,{options:Object(h.a)(Object(h.a)({},Xr),{},{xaxis:Object(h.a)(Object(h.a)({},Xr.xaxis),{},{categories:i})}),series:[{name:"Ve\xedculos",data:l}],type:"bar",width:"600"}),r.a.createElement(Gr.a,{options:Object(h.a)(Object(h.a)({},Zr),{},{labels:i,colors:["#ff7c43","#ffa600","#FF9800","#f95d6a","#f44336","#2E93fA","#3333ff","#66DA26","#669999","#E91E63","#d45087","#a05195","#665191","#2f4b7c","#003f5c"]}),series:l,type:"donut",width:"480"}))),r.a.createElement(Oa.a,null,r.a.createElement("section",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",style:{color:"#fff",backgroundColor:"rgb(84, 110, 122, 0.7)"},colSpan:c.length},"Ve\xedculos por ano - ",n?n.razaoSocial:"Exibindo todos os ve\xedculos","  ")),r.a.createElement("tr",null,c.map((function(e,a){return r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,s.map((function(e,a){return r.a.createElement("tr",{key:a},e.map((function(e,a){return r.a.createElement("td",{className:"review relatorioTD",key:a},e)})))})))))),r.a.createElement("section",{className:"rowContainer"},r.a.createElement(Gr.a,{options:{title:Object(h.a)(Object(h.a)({},Zr.title),{},{text:"Seguros vencidos: ".concat(p," / vigentes: ").concat(f)}),labels:["Seguros vencidos","Seguros vigentes"],colors:["#FF9800","#3333ff"]},series:[Number(p),Number(f)],type:"pie",width:"400"}),r.a.createElement(Gr.a,{options:{title:Object(h.a)(Object(h.a)({},Zr.title),{},{text:"Idade superior a 15 anos: ".concat(v," / inferior 15 anos: ").concat(b)}),labels:["Ve\xedculos com mais de 15 anos","Ve\xedculos com menos de 15 anos"],colors:["#f44336","#2E93fA"]},series:[Number(v),Number(b)],type:"pie",width:"420",height:"220"}))):r.a.createElement("p",null,"Nenhum ve\xedculo cadastrado para ",null===n||void 0===n?void 0:n.razaoSocial))}),eo=function(e){var a=Object(v.a)(e);if(a.shift(),a[0])return a.reduce((function(e,a){return e+a}))},ao=function(e){return e.filter((function(e){return!e.vencimento||je()(e.vencimento).isValid()&&je()(e.vencimento).isBefore(je()())&&e.veiculoId&&e})).length},to=ce(["veiculos","empresas"],(function(e){var a,t,o=e.redux,i=o.veiculos,l=o.empresas,c=Object(n.useState)(""),s=Object(ze.a)(c,2),d=s[0],u=s[1],m=Object(n.useState)(void 0),p=Object(ze.a)(m,2),f=p[0],h=p[1],b=Object(n.useState)(""),g=Object(ze.a)(b,2),E=g[0],x=g[1],S=Object(n.useState)(""),y=Object(ze.a)(S,2),O=y[0],j=y[1],w=Object(n.useState)(""),C=Object(ze.a)(w,2),k=C[0],D=C[1];f&&""!==f?(a=f.codigoEmpresa,t=i.filter((function(e){return e.codigoEmpresa===a}))):t=i;var I=t.map((function(e){return e.anoCarroceria})).filter((function(e){return null!==e})).sort(),N=I.reduce((function(e,a){return e+a/I.length}),0);N=((new Date).getFullYear()-N).toFixed(2);var A={};I.forEach((function(e){void 0===A[e]&&(A[e]=0),A[e]+=1}));var P=Object.keys(A),T=Object(v.a)(P.sort((function(e,a){return e-a}))),F=Object.values(A),z={},L=[],M={};T.forEach((function(e){t.forEach((function(a){var t;a.anoCarroceria&&a.anoCarroceria.toString()===e&&(L.push({veiculoId:a.veiculoId,poltronas:a.poltronas}),z[e]?(t=z[e]).push.apply(t,Object(v.a)(L)):z[e]=L,L=[])})),M[e]=z[e],z={}}));var q=0,V=["Capacidade Total"],_=[],R=["Capacidade M\xe9dia"];Object.keys(M).forEach((function(e){M[e].forEach((function(e){q+=e.poltronas})),V.push(q),R.push((q/M[e].length).toFixed(2));var a=V.reduce((function(e,a){return e+a}),0);_.push(a),q=0})),V.push(eo(V));var B=["Ano"],U=["N\xba de Ve\xedculos"];B.push.apply(B,Object(v.a)(T).concat(["Total"])),U.push.apply(U,Object(v.a)(F)),U.push(eo(U)),R.push(function(e){var a=e.map((function(e){return Number(e)}));if(a.shift(),a[0])return(a.reduce((function(e,a){return e+a}))/a.length).toFixed(2)}(R));var Y=[U,R,V],H=P.sort((function(e,a){return A[e]-A[a]}));H=H[H.length-1];var J=(new Date).getFullYear();Object(n.useEffect)((function(){var e=(new Date).getFullYear(),a=ao(t),n=t.filter((function(a){return e-a.anoCarroceria>14&&null!==a.anoCarroceria})).length;x(a),j(t.length-a),D(n)}),[t]);var K,W,$,G=[];return d.length>2&&f?(G=ao(t),W=t.filter((function(e){return J-e.anoCarroceria>14&&null!==e.anoCarroceria})).length,K=t.length-G,$=t.length-W):(G=E,K=O,W=k,$=t.length-k),r.a.createElement(Qr,{empresas:l,razaoSocial:d,labels:T,values:F,tableLabels:B,tableData:Y,selectedEmpresa:f,selectedVehicles:t,mediaIdades:N,moda:H,handleInput:function(e){var a,t=e.target.value;u(t),t.length>2?(a=l.find((function(e){return e.razaoSocial===t})))&&h(a):h("")},segurosVencidos:G,segurosVigentes:K,oldVehicles:W,veiculosNovos:$})})),no=t(423),ro=t.n(no),oo=t(424),io=t.n(oo);function lo(e){var a,t=e.tableData,n=e.staticFields,o=e.title,i=e.tableStyle,l=e.style,c=e.completed,s=e.showInfo,d=e.showFiles,u=e.setShowFiles,m=e.filesCollection,p=e.primaryKey,f=e.close,v=e.filesIds,b=e.razaoSocial,g=[],E=[],x=[];if(t.forEach((function(e,a){n.forEach((function(t){g.includes(t.title)||g.push(t.title),"info"===t.field?x.push(Object(h.a)(Object(h.a)({},t),{},{index:a,files:null===e||void 0===e?void 0:e.files})):"files"===t.field?x.push(Object(h.a)(Object(h.a)({},t),{},{files:null===e||void 0===e?void 0:e.files})):t.action?x.push(Object(h.a)(Object(h.a)({},t),{},{id:null===e||void 0===e?void 0:e.id})):x.push(Object(h.a)(Object(h.a)({},t),{},{value:e[t.field]}))})),E.push(x),x=[]})),c){var S=g.indexOf("Analisar solicita\xe7\xe3o");g[S]="Conclu\xedda"}var y=(null===(a=E[0])||void 0===a?void 0:a.length)||"";return d?r.a.createElement(r.a.Fragment,null,r.a.createElement(lr,{filesCollection:m,close:f,typeId:p,filesIds:v,razaoSocial:b}),r.a.createElement("footer",null,r.a.createElement("div",{className:"voltarDiv",style:{padding:"0px",margin:"30px 0 0 0",position:"absolute",bottom:"1%",zIndex:"10"}},r.a.createElement(He.a,{variant:"outlined",color:"primary",onClick:function(){return u(!1)}},r.a.createElement(At.a,{size:"tiny"}),r.a.createElement("span",{style:{padding:"2px 0 0 2px",marginLeft:"2px",fontSize:".85rem"}},"Voltar"))))):r.a.createElement("table",{style:i||void 0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",style:l,colSpan:y},o)),r.a.createElement("tr",null,g.map((function(e,a){return r.a.createElement("th",{key:a,style:l},e)})))),r.a.createElement("tbody",null,E.map((function(e,a){return r.a.createElement("tr",{key:a},e.map((function(e,a){return r.a.createElement("td",{key:a,style:(null===e||void 0===e?void 0:e.style)?e.style:l,className:"link"===e.type&&e.laudoDocId?"link2":"review"},"date"===e.type?(n=e.value,je()(n,"YYYY-MM-DDTHH:mm:ss.SSSZZ",!0).isValid()?je()(n,je.a.ISO_8601,!0).format("DD/MM/YYYY, HH:mm[h]"):n):(null===e||void 0===e?void 0:e.action)?function(e,a,n){var o,i=!(null===(o=t[a])||void 0===o?void 0:o.info);switch(e){case"info":return r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start"}},r.a.createElement("span",{className:"button",style:i?{cursor:"default"}:{},component:"span",title:i?"Nenhuma informa\xe7\xe3o adicional":"Ver informa\xe7\xf5es adicionais",onClick:function(){return s(a)}},r.a.createElement(ro.a,{color:i?"disabled":"primary"})),n?r.a.createElement("span",{className:"button",component:"span",title:"Ver arquivos",onClick:function(){u(n)}},r.a.createElement(wa.a,null)):r.a.createElement("span",{style:{padding:"2px 10px 0 17px"}}," - "));case"completed":return r.a.createElement(io.a,{style:{color:"green"}});default:return}}(e.action,null===e||void 0===e?void 0:e.index,null===e||void 0===e?void 0:e.files):e.value);var n})))}))))}var co=[{field:"action",title:"Movimenta\xe7\xe3o"},{field:"user",title:"Usu\xe1rio"},{field:"createdAt",title:"Registro no sistema",type:"date"},{field:"info",title:"Informa\xe7\xf5es adicionais",action:"info",style:{textAlign:"center"}}];function so(e){var a=e.solicitacao,t=e.showInfo,n=e.historyLog,o=e.setHistoryLog,i=e.close,l=e.vehicleDocs,c=e.empresaDocs,s=e.showFiles,d=e.setShowFiles,u=e.filesIds,m=a.history,p=je()(null===n||void 0===n?void 0:n.createdAt).format("DD/MM/YYYY, HH:mm[h]"),f={};return f=a.hasOwnProperty("veiculoId")?{primaryKey:"veiculoId",filesCollection:l}:{primaryKey:"empresaId",filesCollection:c},r.a.createElement("main",{className:"popUpWindow",sytle:{width:"90%"}},n?r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"infoLogHeader"},r.a.createElement("h3",null,"Informa\xe7\xf5es adicionais"),r.a.createElement("hr",null),r.a.createElement("div",{className:"floatRight"},"Inserido por ",null===n||void 0===n?void 0:n.user," ",p?"\xe0s "+p:"")),r.a.createElement("section",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,n.info)),r.a.createElement("footer",null,r.a.createElement("div",{className:"voltarDiv",style:{padding:"0px",margin:"30px 0 0 0",position:"absolute",bottom:"1%"}},r.a.createElement(He.a,{variant:"outlined",color:"primary",onClick:function(){return o(!1)}},r.a.createElement(At.a,{size:"tiny"}),r.a.createElement("span",{style:{padding:"2px 0 0 2px",marginLeft:"2px",fontSize:".85rem"}},"Voltar"))))):r.a.createElement(lo,Object.assign({},f,{tableData:m,staticFields:co,length:co.length,title:"Solicita\xe7\xe3o n\xba ".concat(null===a||void 0===a?void 0:a.numero),id:a.id,razaoSocial:null===a||void 0===a?void 0:a.empresa,showInfo:t,style:{padding:"9px 4px"},tableStyle:{marginTop:"23px"},showFiles:s,setShowFiles:d,close:i,filesIds:u})),r.a.createElement(Ge,{close:i}))}function uo(e){var a=e.completed,t=e.showCompleted;return r.a.createElement("header",{style:{display:"flex",justifyContent:"flex-end",height:"50px",paddingBotom:"10px"}},r.a.createElement(Ye.a,{style:{marginTop:"20px"},control:r.a.createElement(Ue.a,{checked:!0===a,onChange:function(){return t(!a)},value:a}),label:r.a.createElement("p",{style:{color:"#2979ff",fontSize:"0.7rem",float:"right"}}," Mostrar solicita\xe7\xf5es conclu\xeddas")}))}var mo=[{field:"numero",title:"N\xfamero",label:"N\xfamero"},{field:"subject",title:"Solicita\xe7\xe3o",label:"Solicita\xe7\xe3o"},{field:"empresa",title:"Empresa",label:"Empresa"},{field:"veiculo",title:"Ve\xedculo",label:"Ve\xedculo"},{field:"status",title:"Situa\xe7\xe3o",label:"Situa\xe7\xe3o"},{field:"updatedAt",title:"\xdaltima Atualiza\xe7\xe3o",label:"\xdaltima Atualiza\xe7\xe3o",type:"date"}],po=function(e){var a=e.rowData,t=e.user,n=a.status,r=t.role;return!(!n.match("indeferida")&&!n.match("conclu\xedda"))||(!("empresa"!==r||!n.match("Pend\xeancias"))||!("empresa"===r||!n.match("Aguardando")))},fo=function(e){var a=e.tableData,t=e.title,n=e.showDetails,o=e.assessDemand,i=e.completed,l=(e.showInfo,e.user),c=JSON.parse(JSON.stringify(a));return c.forEach((function(e){return delete e.history})),r.a.createElement("div",{style:{margin:"10px 0"},className:"noPrint"},r.a.createElement(jn.a,{title:t,columns:mo,data:c,style:{fontFamily:"Segoe UI",fontSize:"14px"},options:{filtering:!0,exportButton:!0,exportFileName:"Solicita\xe7\xf5es",exportCsv:function(e,a){return Nn("Solicita\xe7\xf5es",mo,a)},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:10},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Nenhuma solicita\xe7\xe3o aberta no momento.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportCSVName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},actions:[{icon:"history_icon",iconProps:{color:"primary"},tooltip:"Ver hist\xf3rico",onClick:function(e,a){return n(a.id)}},function(e){return po({rowData:e,user:l})&&{icon:i?"Solicita\xe7\xe3o indeferida"===(null===e||void 0===e?void 0:e.status)?"clear":"done_icon":"assignment_turned_in_outlined",iconProps:{className:i?"":"assessDemandButton",color:"Solicita\xe7\xe3o indeferida"===(null===e||void 0===e?void 0:e.status)?"secondary":i?"action":"disabled"},tooltip:(null===e||void 0===e?void 0:e.status.match("Aguardando"))?"Analisar solicita\xe7\xe3o":(null===e||void 0===e?void 0:e.status.match("Pend\xeancias"))?"Abrir solicita\xe7\xe3o":"Solicita\xe7\xe3o indeferida"===(null===e||void 0===e?void 0:e.status)?"Indeferida":"Conclu\xedda",onClick:function(e,a){return i?null:o(a.id)}}}]}))};var vo=ce(["veiculos","empresas","logs","getFiles/vehicleDocs","getFiles/empresaDocs"],(function(e){var a=e.redux,t=a.veiculos,o=a.empresas,i=a.vehicleDocs,l=a.empresaDocs,c=e.user,s=Object(n.useState)([]),d=Object(ze.a)(s,2),u=d[0],m=d[1],p=Object(n.useState)(!1),f=Object(ze.a)(p,2),b=f[0],g=f[1],E=Object(n.useState)(),x=Object(ze.a)(E,2),S=x[0],y=x[1],O=Object(n.useState)(!1),C=Object(ze.a)(O,2),k=C[0],D=C[1],I=Object(n.useState)(),N=Object(ze.a)(I,2),A=N[0],P=N[1],T=Object(n.useState)({openAlertDialog:!1,customMessage:"",customTitle:""}),F=Object(ze.a)(T,2),z=F[0],L=F[1],M=Object(n.useState)(!1),q=Object(ze.a)(M,2),V=q[0],_=q[1],R=Object(n.useState)(),B=Object(ze.a)(R,2),U=B[0],H=B[1],J=z.openAlertDialog,K=z.customTitle,W=z.customMessage;Object(n.useEffect)((function(){return sr(),function(){return sr(!0)}}),[]),Object(n.useEffect)((function(){function e(e){27===e.keyCode&&(V||A||g(),V?_(!1):A&&P())}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[A,V]),Object(n.useEffect)((function(){function a(){return(a=Object(w.a)(j.a.mark((function a(){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=Object(v.a)(e.redux.logs),r=n.map((function(e){var a,n;e.empresa=null===(a=o.find((function(a){return a.codigoEmpresa===e.empresaId})))||void 0===a?void 0:a.razaoSocial,e.veiculo=null===(n=t.find((function(a){return a.veiculoId===e.veiculoId})))||void 0===n?void 0:n.placa;e.__v;return Object(Y.a)(e,["__v"])})),r=k?r.filter((function(e){return!0===e.completed})):r.filter((function(e){return!1===e.completed})),m(r);case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[t,o,k,e.redux.logs]);var $=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=u.find((function(e){return e.id===t})),y(r),(o=null===(n=Pe.find((function(e){return null===r||void 0===r?void 0:r.subject.match(e.subject)})))||void 0===n?void 0:n.path).match("/solicitacoes")||(o="/solicitacoes"+o),e.history.push({pathname:o,state:{demand:r}});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),G=function(){var e=Object(w.a)(j.a.mark((function e(a){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!1),_(!1),t=u.find((function(e){return e.id===a})),e.next=5,y(t);case 5:g(!0);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(uo,{completed:k,showCompleted:D}),r.a.createElement(fo,{tableData:u,title:k?"Solicita\xe7\xf5es conclu\xeddas":"Solicita\xe7\xf5es em andamento",user:c,showDetails:G,assessDemand:$,completed:k,style:{textAlign:"center"}}),b&&r.a.createElement(so,{solicitacao:S,close:function(){g(!1),_(!1)},showInfo:function(e){if(S&&(null===S||void 0===S?void 0:S.history)){var a=null===S||void 0===S?void 0:S.history[e];if(!(null===a||void 0===a?void 0:a.info))return;P(a)}},historyLog:A,setHistoryLog:P,vehicleDocs:i,empresaDocs:l,setShowFiles:function(e){e?(_(!0),H(e)):_(!1)},showFiles:V,filesIds:U}),J&&r.a.createElement(Ha,{open:J,close:function(){return L(Object(h.a)(Object(h.a)({},z),{},{openAlertDialog:!J}))},customMessage:W,customTitle:K}))})),ho=[{field:"numeroAlteracao",label:"N\xfamero da altera\xe7\xe3o",maxLength:3,pattern:"^\\d{1,3}$",width:"240px"},{field:"numeroRegistro",label:"Registro na junta comercial",maxLength:40,width:"240px"},{field:"numeroSei",label:"N\xfamero do registro SEI (se houver)",maxLength:30,width:"240px"},{field:"dataJunta",label:"Data de registro na Junta Comercial",type:"date",width:"240px"}],bo=t(425),go=t.n(bo);t(556);function Eo(e){var a=e.data,t=e.forms,o=e.filesForm,i=e.files,l=e.demandFiles,c=a.filteredSocios;t.forEach((function(e){e.forEach((function(e){Object.entries(a).forEach((function(a){var t=Object(ze.a)(a,2),n=t[0],r=t[1];e.field===n&&(e.value=r)}))}))}));var s=t[0].findIndex((function(e){return"vencimentoContrato"===e.field}));if(-1!==s){var d=t[0][s].value;d&&je()(d).isValid()&&(d=je()(d).format("DD/MM/YYYY"),t[0][s].value=d)}var u=["Dados da empresa","Informa\xe7\xf5es sobre a altera\xe7\xe3o do contrato social"];return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"flex"},r.a.createElement("div",{className:"divTable"},t.map((function(e,a){return r.a.createElement(n.Fragment,{key:a},r.a.createElement("table",{style:1===a?{tableLayout:"fixed"}:{}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"tHeader",colSpan:e.length},u[a])),r.a.createElement("tr",null,e.map((function(e,a){var t=e.label;return r.a.createElement("th",{key:a},t)})))),r.a.createElement("tbody",null,r.a.createElement("tr",null,e.map((function(e,a){var t=e.value;return r.a.createElement("td",{className:"review",key:a},t)}))))))})))),r.a.createElement("section",{className:"socios_docs_container"},c&&c[0]&&c.some((function(e){return e.status}))&&r.a.createElement("section",{title:"S\xf3cios",className:"flexColumn socios__review__container"},r.a.createElement("h3",{className:"review__subtitle"},r.a.createElement(go.a,{className:"socios__review__icon"}),"S\xf3cios"),c.map((function(e,a){var t=e.nomeSocio,n=e.status,o=e.outsider;return r.a.createElement("div",{key:a,className:"flex socios__review__div",style:{color:o||"new"===n?"green":"modified"===n?"orange":"deleted"===n?"red":""}},r.a.createElement("span",{className:"socios__review__prop"},t,o||"new"===n?"(inclu\xeddo)":"modified"===n?"(modificado)":"deleted"===n?"(exclu\xeddo)":""))}))),(i||l)&&r.a.createElement("section",{title:"Documentos",className:"flex docs"},r.a.createElement("h3",{className:"review__subtitle"},r.a.createElement(wa.a,{className:"docs__icon"})," Documentos"),r.a.createElement(Sa,{demandFiles:l,form:o,files:i,collection:"empresaDocs"}))))}var xo=Object(X.a)((function(e){return{list:{margin:e.spacing(1),width:180,fontSize:"0.7rem",fontColor:"#999",textAlign:"center"},iconButton:{marginTop:"17px",padding:"6px 0px"}}})),So=function(e){var a=e.handleInput,t=e.handleBlur,o=e.data,i=e.addSocio,l=e.enableEdit,c=e.handleEdit,s=e.removeSocio,d=o.selectedEmpresa,u=o.subtitles,m=o.activeStep,p=o.filteredSocios,f=xo(),v=f.iconButton,h=f.list;return r.a.createElement(r.a.Fragment,null,d&&r.a.createElement("section",{className:"flex paper"},r.a.createElement(Be,{subtitle:u[m]}),r.a.createElement("div",{className:"flex center"},r.a.createElement("div",{style:{padding:"10px 0",width:"100%"}},r.a.createElement(Re,{form:Ht,data:o,handleBlur:t,handleInput:a})),r.a.createElement("div",{style:{margin:"5px 0 7px 84.58%",width:"100%"}},r.a.createElement(He.a,{color:"primary",variant:"outlined",size:"small",onClick:i},r.a.createElement(Ke.a,null)," Adicionar s\xf3cio")))),d&&0===p.length&&r.a.createElement("section",null,r.a.createElement("p",null,"Nenhum s\xf3cio cadastrado para ",d.razaoSocial)),(null===p||void 0===p?void 0:p.length)>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"flex center paper"},r.a.createElement("p",null," S\xf3cios cadastrados"),p.map((function(e,a){return r.a.createElement("div",{key:a},Ht.map((function(a,t){return r.a.createElement(n.Fragment,{key:t+1e3},r.a.createElement(Ve.a,{value:e[a.field]||"",name:a.field,label:a.label,className:h,disabled:!e.edit||"cpfSocio"===a.field,onChange:c,error:e.edit?Ce(e[a.field],a):null,helperText:e.edit?ke(e[a.field],a):null,type:null===a||void 0===a?void 0:a.type,InputLabelProps:{shrink:!0,style:{fontWeight:600,fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",color:"#888"}},inputProps:{style:{fontSize:"13px",color:!0===e.edit?"#000":"new"===e.status||e.outsider?"green":"modified"===e.status?"#FF2500":"deleted"===e.status?"red":"#888",textDecoration:"deleted"!==e.status||e.edit?"":"line-through"}}}))})),r.a.createElement(He.a,{disabled:"deleted"===e.status,component:"span",className:v,title:"editar",onClick:function(){return l(a)}},r.a.createElement(xn.a,null)),r.a.createElement(He.a,{className:v,color:"deleted"===e.status?"primary":"secondary",title:"deleted"===e.status?"Desfazer exclus\xe3o":"Remover",onClick:function(){return s(a)}},"deleted"===e.status?r.a.createElement("i",{className:"material-icons"},"undo"):r.a.createElement(yt.a,null)))})))))},yo=[{title:"Altera\xe7\xe3o do contrato social",name:"altContratoDoc"},{title:"CRC",name:"crc"}],Oo=function(e){var a=e.empresas,t=e.data,n=e.setActiveStep,o=e.enableEdit,i=e.handleEdit,l=e.addSocio,c=e.removeSocio,s=e.handleInput,d=e.handleBlur,u=e.handleSubmit,m=e.handleFiles,p=e.removeFile,f=e.setShowPendencias,v=t.selectedEmpresa,h=t.demand,b=t.demandFiles,g=t.activeStep,E=t.stepTitles,x=t.subtitles,S=t.form,y=t.fileToRemove,O=t.info,j=t.showPendencias,w="Altera\xe7\xe3o de contrato social - ".concat(null===v||void 0===v?void 0:v.razaoSocial),C=[Yt,ho];return r.a.createElement("main",null,r.a.createElement("header",null,r.a.createElement(Aa,{links:["Empresas","/empresas"],text:"Altera\xe7\xe3o de dados e contrato social",demand:h,selectedEmpresa:v}),r.a.createElement("section",null,r.a.createElement(Ma,{activeStep:g,steps:E,setActiveStep:n})),r.a.createElement("div",{className:"flex center"},r.a.createElement(Me,{empresas:a,data:t,headerTitle:w,handleInput:s}))),(null===v||void 0===v?void 0:v.cnpj)&&r.a.createElement(r.a.Fragment,null,2!==g?r.a.createElement("section",{className:"flex paper"},r.a.createElement(Be,{subtitle:x[g]}),g<2?r.a.createElement(r.a.Fragment,null,r.a.createElement(Re,{form:C[g],data:t,handleInput:s,style:{width:"100%"}}),r.a.createElement("div",{className:"flex center",style:{width:"100%"}},0===g&&yo.map((function(e,a){var t=e.name,n=e.title;return r.a.createElement(ia,{key:a,name:t,formData:S,dropDisplay:"Clique ou arraste para anexar o ".concat(n," "),handleFiles:m,removeFile:p,fileToRemove:y,style:{width:0===a?"380px":"250px",marginRight:0===a?"12px":0}})})))):r.a.createElement(Eo,{data:t,forms:C,files:S,demandFiles:b,filesForm:dt})):r.a.createElement("section",null,r.a.createElement(So,{data:t,handleInput:s,handleBlur:d,addSocio:l,removeSocio:c,handleFiles:m,enableEdit:o,handleEdit:i})),r.a.createElement("footer",null,r.a.createElement(Ta,{demand:h,declineButtonLabel:"Indeferir",setShowPendencias:f,showPendencias:j,info:O,activeStep:g,lastStep:E.length-1,setActiveStep:n,handleInput:s,handleSubmit:u}))))},jo=["Alterar dados da empresa","Informa\xe7\xf5es sobre altera\xe7\xe3o do contrato social","Informa\xe7\xf5es sobre s\xf3cios","Revis\xe3o"],wo=["Utilize os campos abaixo caso deseje editar os dados da empresa","Informe as altera\xe7\xf5es no contrato social e anexe uma c\xf3pia do documento","Adicione ou altere s\xf3cios e suas respectivas participa\xe7\xf5es.","Revise os dados informados."],Co=ce(["empresas","socios","getFiles/empresaDocs"],(function(e){var a=e.redux.empresas,t=Object(v.a)(e.redux.socios),o=Object(n.useState)({razaoSocial:"",activeStep:0,stepTitles:jo,subtitles:wo,dropDisplay:"Clique ou arraste para anexar a c\xf3pia da altera\xe7\xe3o do contrato social ",demand:void 0,confirmToast:!1,filteredSocios:[],showPendencias:!1,openAlertDialog:!1}),i=Object(ze.a)(o,2),l=i[0],c=i[1];Object(n.useEffect)((function(){var n,r;if(a&&1===a.length){var o=Object(h.a)({},a[0]),i=null===o||void 0===o?void 0:o.vencimentoContrato;i&&i.length>0&&(o.vencimentoContrato=i.substr(0,10)),c(Object(h.a)(Object(h.a)(Object(h.a)({},l),o),{},{selectedEmpresa:o,filteredSocios:t}))}var s=null===e||void 0===e||null===(n=e.location)||void 0===n||null===(r=n.state)||void 0===r?void 0:r.demand;if(s&&s.history[0]){var d,u=e.redux.empresaDocs,m=null===s||void 0===s?void 0:s.history[0],p=m.altContrato,f=m.socioUpdates,v=m.files,b=a.find((function(e){return e.codigoEmpresa===s.empresaId})),g={},E=JSON.parse(JSON.stringify(t.filter((function(e){return e.empresas[0]&&e.empresas.some((function(e){return e.codigoEmpresa===b.codigoEmpresa}))}))));if(p&&ho.forEach((function(e){var a=e.field;return g[a]=p[a]})),f&&f[0]){var x=[];f.forEach((function(e){"new"===e.status||e.outsider?x.push(e):E.forEach((function(a){if(e.socioId===a.socioId){var t=E.findIndex((function(a){return a.socioId===e.socioId}));-1!==t&&(E[t]=e)}}))})),E=E.concat(x).sort((function(e,a){return e.nomeSocio.localeCompare(a.nomeSocio)}))}v&&(d=u.filter((function(e){return v.includes(e.id)}))),c(Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},l),p),b),{},{selectedEmpresa:b,demand:s,demandFiles:d,filteredSocios:E,activeStep:3}))}}),[]),Object(n.useEffect)((function(){if(l.selectedEmpresa){var e=l.selectedEmpresa.codigoEmpresa,a=JSON.parse(JSON.stringify(t.filter((function(a){return a.empresas&&a.empresas.some((function(a){return a.codigoEmpresa===e}))}))))||[];c(Object(h.a)(Object(h.a)({},l),{},{originalSocios:a}))}}),[l.selectedEmpresa]);var s=function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,n,r,o,i,s,d,u,m,p,b,g,E;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.selectedEmpresa,t=a.codigoEmpresa,n=Object(v.a)(l.filteredSocios),r={},o=0,i=0,Ht.forEach((function(e){""!==l[e.field]&&void 0!==l[e.field]||(o+=1)})),100!==o){e.next=6;break}return c(Object(h.a)(Object(h.a)({},l),{},{alertType:"fieldsMissing",openAlertDialog:!0})),e.abrupt("return");case 6:return Ht.forEach((function(e){Object.assign(r,Object(f.a)({},e.field,l[e.field]))})),e.next=9,T.a.post("/api/checkSocios",{newCpfs:[null===r||void 0===r?void 0:r.cpfSocio]});case 9:if(s=e.sent,d=null===s||void 0===s?void 0:s.data,r.status="new",d[0]&&(u=d[0],m=u.socio_id,p=u.empresas,b={socioId:m,status:"modified",outsider:!0,empresas:p},Object.assign(r,Object(h.a)({},b))),r.share&&(r.share=+r.share),g=r.share,r.empresas&&r.empresas[0]&&r.empresas.push({codigoEmpresa:t,share:g}),(r.empresas&&!r.empresas[0]||!r.empresas)&&(r.empresas=[{codigoEmpresa:t,share:g}]),n.push(r),n.sort((function(e,a){return e.nomeSocio.localeCompare(a.nomeSocio)})),n.forEach((function(e){"deleted"!==(null===e||void 0===e?void 0:e.status)&&(i+=Number(e.share))})),!(i>100)){e.next=25;break}return n.pop(),e.next=24,c(Object(h.a)(Object(h.a)({},l),{},{alertType:"overShared",openAlertDialog:!0}));case 24:return e.abrupt("return");case 25:return E={},Ht.forEach((function(e){return E[e.field]=""})),e.next=29,c(Object(h.a)(Object(h.a)(Object(h.a)({},l),E),{},{filteredSocios:n,totalShare:i}));case 29:setTimeout((function(){document.getElementsByName("nomeSocio")[0].focus()}),200);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var a=Object(w.a)(j.a.mark((function a(t){var n,r,o,i,c,s,d,f,v,g,x,O,C,k,D,I,N,A,P;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=l.demand,r=l.form,o=l.selectedEmpresa,i=o.codigoEmpresa,c=b(ho),s=b(Yt),d=m(s),f=u(t),v=p({demand:n,altContrato:c,socioUpdates:f,approved:t}),g=[],x="Solicita\xe7\xe3o de altera\xe7\xe3o contratual enviada.",n||c||d||r||f){a.next=5;break}return alert("Nenhuma modifica\xe7\xe3o registrada!"),a.abrupt("return");case 5:if(!d){a.next=12;break}if(T.a.put("/api/editTableRow",d),x="Dados da empresa alterados com sucesso.",f||c||r){a.next=12;break}return y("Dados da empresa atualizados!"),setTimeout((function(){S()}),750),a.abrupt("return");case 12:if(!n||!t){a.next=29;break}if(c&&T.a.post("/api/altContrato",c),!f){a.next=29;break}if(O=f.newSocios,C=f.oldSocios,k=f.cpfsToAdd,D=f.cpfsToRemove,I={table:"socios",tablePK:"socio_id",codigoEmpresa:i,cpfsToAdd:k},!O[0]){a.next=19;break}return a.next=19,T.a.post("/api/cadSocios",{socios:O,codigoEmpresa:i}).then(function(){var e=Object(w.a)(j.a.mark((function e(a){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=null===a||void 0===a?void 0:a.data.map((function(e){return e.socio_id})))[0]&&(g=g.concat(t));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 19:if(!C[0]){a.next=27;break}return a.next=22,T.a.put("/api/editSocios",Object(h.a)({requestArray:C},I));case 22:if(!D[0]){a.next=25;break}return a.next=25,T.a.patch("/api/removeEmpresa",{cpfsToRemove:D,codigoEmpresa:i});case 25:N=C.map((function(e){return e.socio_id})),g=g.concat(N);case 27:g[0]&&Object.assign(v,{metadata:{socios:g}}),x="Altera\xe7\xe3o de contrato social aprovada.";case 29:if(!1!==t){a.next=33;break}x="Solicita\xe7\xe3o indeferida.",a.next=38;break;case 33:if(t){a.next=38;break}return a.next=36,E(i,g);case 36:(A=a.sent)instanceof Array&&(P=A.map((function(e){return e.id})),v.history.files=P);case 38:console.log("\ud83d\ude80 ~ file: AltContrato.jsx ~ line 438 ~ log",v),Te(v).then((function(e){console.log(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)})),n?setTimeout((function(){e.history.push("/solicitacoes")}),1500):setTimeout((function(){S()}),900),y(x);case 42:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),u=function(e){var a=l.filteredSocios,t=l.selectedEmpresa,n=l.demand,r=t.codigoEmpresa,o=[],i=[],c=[];if(a.forEach((function(e){delete e.edit,delete e.createdAt,delete e.razaoSocial,Object.keys(e).forEach((function(a){e[a]&&""!==e[a]||delete e[a]})),e.status&&o.push(e)})),!o[0])return null;if(o.forEach((function(e){if(e.empresas&&e.empresas[0]&&!e.empresas.some((function(e){return e.codigoEmpresa===r})))e.empresas.push({codigoEmpresa:r,share:null===e||void 0===e?void 0:e.share}),console.log(e,e.empresas);else if(e.empresas&&e.empresas[0]&&e.empresas.some((function(e){return e.codigoEmpresa===r}))){var a=e.empresas.findIndex((function(e){return e.codigoEmpresa===r}));e.empresas[a].share=+e.share,console.log(e,e.empresas)}else e.empresas&&e.empresas[0]||(e.empresas=[{codigoEmpresa:r,share:null===e||void 0===e?void 0:e.share}]);"new"!==e.status&&!0!==e.outsider||c.push({cpf_socio:e.cpfSocio}),e.empresas instanceof Array&&"deleted"===e.status&&(e.empresas=e.empresas.filter((function(e){return e.codigoEmpresa!==r})),i.push({cpf_socio:e.cpfSocio}),e.empresas[0]||(e.empresas=[]))})),!n)return{socioUpdates:o,cpfsToAdd:c,cpfsToRemove:i};if(n&&e){o.forEach((function(e){delete e.outsider,delete e.razaoSocial,delete e.codigoEmpresa,delete e.originalStatus,delete e.nomeEmpresas,e.empresas=JSON.stringify(e.empresas)}));var s=(o=A.a.decamelizeKeys(o)).filter((function(e){return"new"===e.status})),d=o.filter((function(e){return"modified"===e.status||"deleted"===e.status}));return d.forEach((function(e){return delete e.status})),s.forEach((function(e){return delete e.status})),{newSocios:s,oldSocios:d,cpfsToAdd:c,cpfsToRemove:i}}},m=function(e){var a=l.selectedEmpresa,t=a.codigoEmpresa;if(e){for(var n in a)e[n]&&e[n]===a[n]&&delete e[n];if(Object.keys(e).length>0)return{id:t,table:"empresas",tablePK:"codigo_empresa",updates:A.a.decamelizeKeys(e)}}},p=function(e){var a,t=e.demand,n=e.altContrato,r=e.approved,o=e.socioUpdates,i=l.selectedEmpresa,c=l.info,s=i.codigoEmpresa;(t||(a={history:Object(h.a)({altContrato:n,info:c},o),empresaId:s,historyLength:0,approved:r},!1===r&&(a.declined=!0)),t&&!1===r)&&(a={id:t.id,empresaId:t.empresaId,history:{info:c},declined:!0});t&&!0===r&&(a={id:t.id,demandFiles:l.demandFiles,history:{},approved:r});return a},b=function(e){var a=l.selectedEmpresa,t=l.demand,n=a.codigoEmpresa,r=t&&t.createdAt,o={codigoEmpresa:null===a||void 0===a?void 0:a.codigoEmpresa};e.forEach((function(e){var a=e.field;for(var t in l)t===a&&l[t]&&Object.assign(o,Object(f.a)({},t,l[t]))})),console.log("\ud83d\ude80 ~ file: AltContrato.jsx ~ line 620 ~ returnObj",o);var i=Object.keys(o);return i.length>1?(i.includes("numeroAlteracao")&&t&&(o.createdAt=r,o.codigoEmpresa=n),o):null},g=function(){var e=Object(w.a)(j.a.mark((function e(a,t){var n,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a&&a[0]&&(r=Object(h.a)(Object(h.a)({},l),{},Object(f.a)({},t,a[0])),o=Ee(a,r,yo),c(Object(h.a)(Object(h.a)(Object(h.a)({},l),o),{},(n={},Object(f.a)(n,t,a[0]),Object(f.a)(n,"fileToRemove",null),n))));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),E=function(){var e=Object(w.a)(j.a.mark((function e(a,t){var n,r,o,i,c,s,d,u,m,p,f;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.form,r=l.numeroAlteracao,o=[],!(n instanceof FormData)){e.next=27;break}i={empresaId:a,tempFile:!0},c=new FormData,s=Object(be.a)(n),e.prev=5,s.s();case 7:if((d=s.n()).done){e.next=18;break}return u=d.value,m=u[0],console.log("\ud83d\ude80 ~ file: AltContrato.jsx ~ line 641 ~ submitFile ~ name",m),"altContratoDoc"===m?(p=Object(h.a)(Object(h.a)({},i),{},{fieldName:m,socios:t,numeroAlteracao:r}),c.append("metadata",JSON.stringify(p))):(f=Object(h.a)(Object(h.a)({},i),{},{fieldName:m}),c.append("metadata",JSON.stringify(f))),c.set(m,u[1]),e.next=15,T.a.post("/api/empresaUpload",c).then((function(e){var a,t;console.log(e),(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.file)instanceof Array&&o.push.apply(o,Object(v.a)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.file))})).catch((function(e){return console.log(e)}));case 15:c=new FormData;case 16:e.next=7;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(5),s.e(e.t0);case 23:return e.prev=23,s.f(),e.finish(23);case 26:return e.abrupt("return",o);case 27:case"end":return e.stop()}}),e,null,[[5,20,23,26]])})));return function(a,t){return e.apply(this,arguments)}}(),x=function(){var e=Object(w.a)(j.a.mark((function e(a){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.form,n=ye(a,t),c(Object(h.a)(Object(h.a)({},l),n));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=function(){var e={},n={};[ho,Ht].forEach((function(a){a.forEach((function(a){var t=a.field;Object.assign(e,Object(f.a)({},t,""))}))})),a&&1===a.length&&(n=Object(h.a)(Object(h.a)({},a[0]),{},{selectedEmpresa:a[0],filteredSocios:t})),c(Object(h.a)(Object(h.a)({},e),{},{activeStep:0,stepTitles:jo,subtitles:wo,razaoSocial:"",selectedEmpresa:void 0,filteredSocios:[],form:void 0,fileToRemove:void 0},n))},y=function(e){return c(Object(h.a)(Object(h.a)({},l),{},{confirmToast:!l.confirmToast,toastMsg:e}))},O=l.filteredSocios,C=l.confirmToast,k=l.toastMsg,D=l.openAlertDialog,I=l.alertType,N=l.customMessage,P=l.customTitle;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oo,{empresas:a,data:l,setActiveStep:function(e){var a=l.activeStep;"next"===e&&a++,"back"===e&&a--,"reset"===e&&(a=0),c(Object(h.a)(Object(h.a)({},l),{},{activeStep:a}))},handleInput:function(e){var n,r=e.target,o=r.name,i=r.value,s={};if("razaoSocial"===o){var d,u,m=null===(d=s=a.find((function(e){return e.razaoSocial===i}))||{})||void 0===d?void 0:d.vencimentoContrato;if(m&&m.length>0&&(s.vencimentoContrato=m.substr(0,10)),null===(u=s)||void 0===u?void 0:u.codigoEmpresa){n=JSON.parse(JSON.stringify(t.filter((function(e){return e.empresas&&e.empresas[0]&&e.empresas.some((function(e){return e.codigoEmpresa===s.codigoEmpresa}))}))));var p=JSON.parse(JSON.stringify(t));p=p.filter((function(e){return e.empresas&&e.empresas[0]?e.empresas.includes(s.codigoEmpresa):null})),p=n.concat(p);var b,g=new Map,E=Object(be.a)(p);try{for(E.s();!(b=E.n()).done;){var x=b.value;g.set(x.socioId,x)}}catch(y){E.e(y)}finally{E.f()}(n=Object(v.a)(g.values())).forEach((function(e){var a;e.empresas[0]&&(a=e.empresas.find((function(e){return e.share&&e.codigoEmpresa===s.codigoEmpresa}))),a&&a.share&&(e.share=a.share)}))}c(Object(h.a)(Object(h.a)(Object(h.a)({},l),s),{},Object(f.a)({selectedEmpresa:s,filteredSocios:n},o,i)))}else{var S=Sr(o,i);c(Object(h.a)(Object(h.a)({},l),{},Object(f.a)({},o,S)))}},handleBlur:function(e){var a=e.target,t=a.name,n=a.value,r=l.filteredSocios;"cpfSocio"===t&&(r.some((function(e){return e.cpfSocio===n}))&&c(Object(h.a)(Object(h.a)({},l),{},{openAlertDialog:!0,customTitle:"Cpf j\xe1 cadastrado",customMessage:"O cpf informado corresponde a um s\xf3cio j\xe1 cadastrado. Para remover ou editar os dados do s\xf3cio, utilize as op\xe7\xf5es abaixo.",cpfSocio:""})))},handleSubmit:d,handleFiles:g,removeFile:x,socios:O,addSocio:s,removeSocio:function(e){var a=l.filteredSocios,t=l.demand,n=a[e];"new"===(null===n||void 0===n?void 0:n.status)||!t&&n.outsider?(a.splice(e,1),c(Object(h.a)(Object(h.a)({},l),{},{filteredSocios:a}))):((null===n||void 0===n?void 0:n.status)&&"deleted"!==(null===n||void 0===n?void 0:n.status)?(n.originalStatus=n.status,n.status="deleted"):"deleted"===(null===n||void 0===n?void 0:n.status)?n.status=null===n||void 0===n?void 0:n.originalStatus:n.status="deleted",c(Object(h.a)(Object(h.a)({},l),{},{filteredSocios:a})))},enableEdit:function(e){var a=l.filteredSocios;!0===a[e].edit?a[e].edit=!1:(a.forEach((function(e){return e.edit=!1})),a[e].edit=!0),c(Object(h.a)(Object(h.a)({},l),{},{filteredSocios:a}))},handleEdit:function(e){var a=e.target.name,t=l.filteredSocios,n=l.selectedEmpresa.codigoEmpresa,r=e.target.value;"share"===a&&(r=r.replace(",","."));var o=Object(v.a)(t),i=o.find((function(e){return!0===e.edit}));if(i){var s=Sr(a,r);if(i[a]=s,i.status||(i.status="modified"),"share"===a&&!isNaN(+r)){var d=i.empresas,u=d.findIndex((function(e){return e.codigoEmpresa===n}));-1!==u?d[u]=Object(h.a)(Object(h.a)({},d[u]),{},{share:+r}):d[0]?d.push({codigoEmpresa:n,share:+r}):i.empresas=[{codigoEmpresa:n,share:+r}]}c(Object(h.a)(Object(h.a)({},l),{},{filteredSocios:o}))}},setShowPendencias:function(){return c(Object(h.a)(Object(h.a)({},l),{},{showPendencias:!l.showPendencias}))}}),r.a.createElement(ee,{open:C,close:y,msg:k}),D&&r.a.createElement(Ha,{open:D,alertType:I,close:function(){return c(Object(h.a)(Object(h.a)({},l),{},{openAlertDialog:!l.openAlertDialog}))},customMessage:N,customTitle:P}))})),ko=function(e){var a=e.data,t=e.handleInput,n=e.plusOne,o=e.removeOne,i=Object(v.a)(null===a||void 0===a?void 0:a.newState)||[];return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("h4",{className:"singleParams__title"},"Clique nos campos abaixo para editar e/ou adicione novos.")),i.map((function(e,a){return r.a.createElement("section",{className:"singleParams__container",key:a},r.a.createElement("div",{className:"singleParams__rowContainer"},r.a.createElement(Ve.a,{name:a.toString(),value:i[a],onChange:t,variant:"filled",InputProps:{style:{margin:"8px 0"}},inputProps:{style:{width:"300px",textAlign:"center",fontSize:"10pt",height:"30px",padding:"5px 0"}}}),r.a.createElement("div",{className:"singleParams__deleteIcon",title:"Remover",onClick:function(){return o(a)}},r.a.createElement(Nr.a,null))))})),r.a.createElement("div",{className:"addIcon"},r.a.createElement("div",{className:"addIcon__container",onClick:function(){return n()}},r.a.createElement("span",{className:"addIcon__text"},"Adicionar"),r.a.createElement(Cr.a,{className:"addIcon__icon"}))))},Do=(t(557),function(e){var a=e.data,t=e.selectOption,n=e.handleInput,o=e.handleSubmit,i=e.plusOne,l=e.removeOne,c=a.tab,s=a.options,d=a.selectedOption,u=a.form,m=a.modified;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Aa,{links:["Par\xe2metros","/parametros"],text:"Alterar par\xe2metros do sistema"}),r.a.createElement("header",{className:"selectHeader"},r.a.createElement("h4",{className:"parametrosTitle"},"Alterar par\xe2metros do sistema - Selecione uma das op\xe7\xf5es abaixo."),r.a.createElement(Ve.a,{className:"config__selector",onChange:t,name:"selectedOption",value:d||"",select:!0,placeholder:"Clique para selecionar...",SelectProps:{style:{fontSize:"0.9rem",color:"#555",fontWeight:400,width:325,height:"44px"}}},s.map((function(e,a){return r.a.createElement(qe.a,{key:a,value:e},e)})))),u&&c<3&&r.a.createElement("main",{className:"configForm"},r.a.createElement(Re,{form:u,data:a,handleInput:n,style:{width:"100%",flexDirection:"column"}})),3===c&&r.a.createElement(ko,{form:u,data:a,plusOne:i,removeOne:l,handleInput:n,style:{width:"100%",flexDirection:"column"}}),d&&r.a.createElement("div",{style:{minHeight:"60px",position:"flex"}},r.a.createElement(un,{action:"save",onClick:o,disabled:!m})))}),Io={variant:"outlined",pattern:/^[0-9]*$/,maxLength:2},No=Io.variant,Ao=[Object(h.a)({field:"idadeMaxCad",label:"Idade m\xe1xima para cadastro (anos)"},Io),Object(h.a)(Object(h.a)({field:"difIdade",label:"Diferen\xe7a toler\xe1vel de idade da carroceria e chassi (anos)"},Io),{},{maxLength:1}),Object(h.a)({field:"idadeBaixaAut",label:"Idade para baixa autom\xe1tica (anos)"},Io),{field:"diaBaixaAut",label:"Dia para baixa autom\xe1tica (dd/mm)",maxLength:5,pattern:/^(0[1-9]|[12][0-9]|30(?!\/02)|31(?!\/(0[2469]|11)))\/(0[1-9]|1[0-2])$/,variant:No},Object(h.a)(Object(h.a)({field:"prazoAvisoBaixa",label:"Prazo para aviso de baixa (dias)"},Io),{},{maxLength:3})],Po=[{field:"comercial",label:"Comercial"},{field:"comercialExecutivo",label:"Comercial Executivo"},{field:"convencional",label:"Convencional"},{field:"convencionalExecutivo",label:"Convencional Executivo"},{field:"leito",label:"Leito"},{field:"leitoExecutivo",label:"Leito e Executivo"},{field:"semiLeito",label:"Semi-Leito"},{field:"semiLeitoExecutivo",label:"Semi-Leito Executivo"}],To=[{field:"secretaria",label:"Nome da Secretaria"},{field:"subsecretaria",label:"Nome da Subsecretaria"},{field:"superintendencia",label:"Nome da Superintendencia"},{field:"diretoria",label:"Nome da diretoria"},{field:"sistema",label:"Nome do sistema"},{field:"siglaSecretaria",label:"Sigla da Secretaria"},{field:"siglaSistema",label:"Sigla do Sistema"}],Fo=[{field:"motivoBaixa",label:"Inserir novo motivo"}],zo=ce(["parametros"],(function(e){var a=Object(n.useState)({options:["Idade e prazos para baixa","Dist\xe2ncia m\xednima entre poltronas","Nomenclaturas","Motivos para baixa do ve\xedculo"],params:["idadeBaixa","distanciaPoltronas","nomes","motivosBaixa"],forms:[Ao,Po,To,Fo]}),t=Object(ze.a)(a,2),o=t[0],i=t[1],l=Object(n.useCallback)((function(a){var t,n,r,l=a.target,c=l.name,s=l.value,d=e.redux.parametros,u=o.options,m=o.forms,p=o.params,v=u.indexOf(s),b=m[v],g=d[0][p[v]];g&&(null===(t=d[0])||void 0===t?void 0:t.id)&&(g.id=d[0].id),i(3===v?Object(h.a)(Object(h.a)({},o),{},(n={initState:g,newState:g},Object(f.a)(n,c,s),Object(f.a)(n,"tab",v),Object(f.a)(n,"form",b),Object(f.a)(n,"modified",!1),n)):Object(h.a)(Object(h.a)(Object(h.a)({},o),g),{},(r={initState:g},Object(f.a)(r,c,s),Object(f.a)(r,"tab",v),Object(f.a)(r,"form",b),Object(f.a)(r,"newState",void 0),Object(f.a)(r,"modified",!1),r)))}),[e.redux,o]),c=function(){var e=Object(w.a)(j.a.mark((function e(a){var t,n,r,l,c,d,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.tab,n=a.target,r=n.name,l=n.value,3===t?((d=Object(v.a)(o.newState))[r]=l,c=s(null,null,d),i(Object(h.a)(Object(h.a)({},o),{},{newState:d,modified:c}))):(c=s(r,l),i(Object(h.a)(Object(h.a)({},o),{},(u={},Object(f.a)(u,r,l),Object(f.a)(u,"modified",c),u))));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),s=function(e,a,t){var n,r,i,l=o.initState,c=!1;return t?i=l.toString()!==t.toString():(Object.keys(l).forEach((function(a){a!==e&&o[a].toString()!==l[a].toString()&&(n=!0)})),r=l[e]&&l[e].toString()!==a),(r||n||i)&&(c=!0),c};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Do,{data:o,selectOption:l,plusOne:function(){var e=Object(v.a)(o.initState);o.newState&&(e=Object(v.a)(o.newState)),e[e.length]="",i(Object(h.a)(Object(h.a)({},o),{},{newState:e}))},removeOne:function(e){var a=o.initState,t=o.newState,n=Object(v.a)(a);t&&(n=Object(v.a)(t)),n.splice(e,1);var r=s(null,null,n);i(Object(h.a)(Object(h.a)({},o),{},{newState:n,modified:r}))},handleInput:c,handleSubmit:function(){var e,a=o.tab,t=o.forms,n=o.params,r=o.initState,l=o.newState,c=r.id,s=t[a].map((function(e){return e.field})),d=n[a],u={};3===a?(l.forEach((function(e,a){""===e&&l.splice(a,1)})),i(Object(h.a)(Object(h.a)({},o),{},{newState:l})),u=l):s.forEach((function(e){return Object.assign(u,Object(f.a)({},e,o[e]))})),T.a.put("/api/parametros",(e={},Object(f.a)(e,d,u),Object(f.a)(e,"id",c),e)).catch((function(e){return console.log(e)})),i(Object(h.a)(Object(h.a)({},o),{},{modified:!1}))}}))})),Lo=(t(558),function(e){var a=e.data,t=e.changeTab,o=e.handleInput,i=e.handleSubmit,l=a.title,c=a.form,s=a.buttonLabel,d=a.tab;Object(n.useEffect)((function(){setTimeout((function(){var e=document.getElementById("email");e&&e.focus()}),600)}),[]);var u=function(e){var t,n=a[null===e||void 0===e?void 0:e.field];if(n)return(!e.errorHandler||!e.errorHandler(n))&&(!(!n||!e.errorHandler||e.errorHandler(n))||((null===(t=n)||void 0===t?void 0:t.length)<(null===e||void 0===e?void 0:e.minLength)||("string"!==typeof n&&(n=n.toString()),!!e.pattern&&null===n.match(e.pattern))))},m=function(e){var t,n,r=a[e.field];return r?e.errorHandler&&e.errorHandler(r)?"\u2713":r&&e.errorHandler&&!e.errorHandler(r)||(null===(t=r)||void 0===t?void 0:t.length)<(null===e||void 0===e?void 0:e.minLength)?"\u2718":(null===(n=r)||void 0===n?void 0:n.length)>=(null===e||void 0===e?void 0:e.minLength)?"\u2713":("string"!==typeof r&&(r=r.toString()),r>e.max||r<e.min?"Valor inv\xe1lido":null===r.match(e.pattern)?"\u2718":e.pattern&&null!==r.match(e.pattern)?"\u2713":" "):" "};return r.a.createElement("div",{className:"flexColumn login"},r.a.createElement("h2",{className:"login__title"},"CadTI - Cadastro do Transporte Intermunicipal - Seinfra MG"),r.a.createElement("div",{className:"login__form paper"},r.a.createElement("header",null,r.a.createElement("h4",{className:"header2 login__subtitle"},l),2===d&&r.a.createElement("h5",{className:"login__subtitle--forgotPassword"},"Insira o e-mail cadastrado para recuperar a senha.")),r.a.createElement("section",{className:"flexColumn center"},c.map((function(e,t){var n=e.name,i=e.label,l=e.options,c=e.type,s=void 0===c?"text":c,d=Object(Y.a)(e,["name","label","options","type"]);return r.a.createElement("div",{className:"input",key:t},r.a.createElement(Ve.a,{id:n,name:n,label:i,value:a[n]||"",onChange:o,type:s,error:u(d),helperText:m(d),InputProps:{style:{width:"260px"}},InputLabelProps:{style:{fontSize:"10pt",color:"#223"}},select:!!l},l&&l.map((function(e,a){var t=e.optionLabel,n=e.optionValue;return r.a.createElement(qe.a,{key:a,value:n},t)}))))})),r.a.createElement(un,{label:s,onClick:i})),r.a.createElement("footer",{className:"login__footer"},r.a.createElement("p",{onClick:function(){return t(0===d?1:0)}},0===d?"Ainda n\xe3o \xe9 cadastrado?":"Voltar para a tela de login"))))}),Mo=[{name:"email",label:"E-mail"},{name:"password",label:"Senha",type:"password"}],qo=[{title:"Fazer login",form:Mo,buttonLabel:"entrar",endPoint:"/auth/login"},{title:"Cadastro de Usu\xe1rio",form:[{name:"name",label:"Nome Completo"},Object(h.a)(Object(h.a)({},Lt),{},{name:"cpf",field:"cpf"})].concat(Mo,[{name:"confirmPassword",label:"Confirme sua senha",type:"password"}]),buttonLabel:"Cadastrar",endPoint:"/auth/signUp",toastMsg:"Usu\xe1rio cadastrado."},{title:"Recupera\xe7\xe3o de senha",form:[{name:"email",label:"E-mail"}],buttonLabel:"Recuperar senha",endPoint:"/auth/forgotPassword",toastMsg:"Senha enviada para o e-mail registrado."}];var Vo=Object(c.c)((function(e){return{redux:Object(h.a)({},e.user)}}),(function(e){return Object(l.b)({logUser:oe},e)}))((function(e){var a=Object(n.useState)(Object(h.a)({tab:0},qo[0])),t=Object(ze.a)(a,2),o=t[0],i=t[1],l=o.tab,c=o.endPoint,s=o.toastMsg,d=o.toastStatus,u=o.confirmToast;Object(n.useEffect)((function(){var e=function(e){"Enter"===e.key&&v()};return document.addEventListener("keypress",e),function(){return document.removeEventListener("keypress",e)}}));var m=function(){var a=Object(w.a)(j.a.mark((function a(){var t,n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.post(c,o);case 3:return a.next=5,T.a.get("/getUser");case 5:t=a.sent,n=null===t||void 0===t?void 0:t.data,ae("loggedIn",!0),e.logUser(n),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),b(null===a.t0||void 0===a.t0||null===(r=a.t0.response)||void 0===r?void 0:r.data,"error");case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(){return a.apply(this,arguments)}}(),p=function(){var e=Object(w.a)(j.a.mark((function e(){var a,t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.form,a=o.endPoint,o.confirmToast,o.toastMsg,t=Object(Y.a)(o,["form","endPoint","confirmToast","toastMsg"]),r=1,t instanceof Object&&(t.role="empresa"),e.next=5,T.a.post(a,t).then((function(e){return console.log(e)})).catch((function(e){var a;b(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data,"error"),n=!0}));case 5:n||(r=0,b("Usu\xe1rio cadastrado."),setTimeout((function(){return i(Object(h.a)({tab:r},qo[r]))}),1250));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){0===l&&m(),1===l&&p()},b=function(e,a){return i(Object(h.a)(Object(h.a)({},o),{},{confirmToast:!o.confirmToast,toastMsg:e,toastStatus:a}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Lo,{data:o,handleInput:function(e){var a=e.target,t=a.name,n=Sr(t,a.value);i(Object(h.a)(Object(h.a)({},o),{},Object(f.a)({},t,n)))},handleSubmit:v,changeTab:function(e){return i(Object(h.a)(Object(h.a)({},o),{},{tab:e},qo[e]))}}),r.a.createElement(ee,{open:u,close:b,msg:s,status:d}))})),_o=[{field:"name",title:"Nome",label:"Nome"},{field:"cpf",title:"CPF",label:"CPF"},{field:"email",title:"E-mail",label:"E-mail"},{field:"role",name:"role",title:"Perfil",label:"Perfil",lookup:{admin:"Administrador",tecnico:"T\xe9cnico Seinfra",empresa:"Delegat\xe1rio"},editable:"always"}],Ro=function(e){var a=e.collection,t=(e.showDetails,e.addUser),n=e.editUser,o=e.deleteUser;return Array.isArray(a)||(a=[]),a=Array.from(a).sort((function(e,a){return e.name.localeCompare(a.name)})),r.a.createElement("div",{style:{margin:"10px 0"},className:"noPrint"},r.a.createElement(jn.a,{title:"Gerenciar dados de usu\xe1rios",columns:_o,data:a,style:{fontFamily:"Segoe UI",fontSize:"14px"},options:{filtering:!0,exportButton:!0,exportFileName:"Usu\xe1rios",exportCsv:function(e,a){var t,n=null===(t=_o.find((function(e){return e.lookup})))||void 0===t?void 0:t.lookup;Object(v.a)(a).forEach((function(e){Object.entries(n).forEach((function(a){var t=Object(ze.a)(a,2),n=t[0],r=t[1];n===(null===e||void 0===e?void 0:e.role)&&(e.role=r)}))})),Nn("Usu\xe1rios",_o,a)},actionsColumnIndex:-1,searchFieldStyle:{color:"#024",fontSize:"14px"},headerStyle:{backgroundColor:"#FAFAFC"},emptyRowsWhenPaging:!1,pageSize:20,rowStyle:{fontSize:"0.5rem"}},localization:{header:{actions:"Op\xe7\xf5es"},body:{emptyDataSourceMessage:"Registro n\xe3o encontrado.",editRow:{deleteText:"Tem certeza que deseja apagar esse registro ?"},deleteTooltip:"Apagar",addTooltip:"Adicionar novo usu\xe1rio",editTooltip:"Editar",filterRow:{filterTooltip:"Filtrar"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportCSVName:"Salvar como arquivo do excel",exportAriaLabel:"Exportar",exportTitle:"Exportar para xlsx"},pagination:{labelRowsSelect:"Resultados por p\xe1gina",labelDisplayedRows:" {from}-{to} a {count}",firstTooltip:"Primeira p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima P\xe1gina",lastTooltip:"\xdaltima P\xe1gina"}},editable:{onRowAdd:function(e){return new Promise((function(a,n){setTimeout((function(){t(e),a()}),1e3)}))},onRowUpdate:function(e,t){return new Promise((function(r,o){setTimeout((function(){Object(v.a)(a)[t.tableData.id]=e,n(e),r()}),500)}))},onRowDelete:function(e){return new Promise((function(a,t){setTimeout((function(){o(e),a()}),1e3)}))}}}))},Bo=ce(["users","socios"],(function(e){var a=e.redux,t=a.users,o=a.socios,i=Object(n.useState)({confirmToast:!1}),l=Object(ze.a)(i,2),c=l[0],s=l[1];Object(n.useEffect)((function(){return sr(),function(){return sr(!0)}}),[]);var d=function(){var e=Object(w.a)(j.a.mark((function e(a){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.cpf,(n=o.find((function(e){return e.cpfSocio===t})))&&(a.empresas=[n.codigoEmpresa]),T.a.post("/users/addUser",a).then((function(e){return console.log(e.data)})).catch((function(e){var a;return m((null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data)||"Erro")}));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),u=c.confirmToast,m=function(e,a){return s(Object(h.a)(Object(h.a)({},c),{},{confirmToast:!u,toastMsg:e,toastStatus:a}))};return r.a.createElement("div",null,r.a.createElement(Ro,{collection:t,addUser:d,editUser:function(e){T.a.put("/users/editUser",e).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))},deleteUser:function(e){var a=e.id;T.a.delete("/users/deleteUser?id=".concat(a)).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))}}),r.a.createElement(ee,{open:u,close:m,msg:c.toastMsg,status:"warning"}))})),Uo=function(){return r.a.createElement(y.c,null,r.a.createElement(y.a,{exact:!0,path:"/",component:ue}),r.a.createElement(y.a,{path:"/veiculos",exact:!0,component:pe}),r.a.createElement(y.a,{path:"/veiculos/cadastro",exact:!0,component:Xa}),r.a.createElement(y.a,{path:"/veiculos/altDados",exact:!0,component:nt}),r.a.createElement(y.a,{path:"/veiculos/seguros",exact:!0,component:bt}),r.a.createElement(y.a,{path:"/veiculos/laudos",exact:!0,component:tn}),r.a.createElement(y.a,{path:"/veiculos/baixaVeiculo",exact:!0,component:gn}),r.a.createElement(y.a,{path:"/veiculos/config",exact:!0,component:yn}),r.a.createElement(y.a,{path:"/consultas",component:pr}),r.a.createElement(y.a,{path:"/empresas",exact:!0,component:jr}),r.a.createElement(y.a,{path:"/altContrato",exact:!0,component:Co}),r.a.createElement(y.a,{path:"/empresas/cadastro",component:yr}),r.a.createElement(y.a,{path:"/empresas/socios",component:Wr}),r.a.createElement(y.a,{path:"/empresas/procuradores",component:Kr}),r.a.createElement(y.a,{path:"/relatorios",component:to}),r.a.createElement(y.a,{path:"/crv",component:rr}),r.a.createElement(y.a,{path:"/solicitacoes",exact:!0,component:vo}),r.a.createElement(y.a,{path:"/solicitacoes/cadastro",exact:!0,component:Xa}),r.a.createElement(y.a,{path:"/solicitacoes/altDados",exact:!0,component:nt}),r.a.createElement(y.a,{path:"/solicitacoes/seguros",exact:!0,component:bt}),r.a.createElement(y.a,{path:"/solicitacoes/baixaVeiculo",exact:!0,component:gn}),r.a.createElement(y.a,{path:"/solicitacoes/laudos",exact:!0,component:tn}),r.a.createElement(y.a,{path:"/solicitacoes/altContrato",exact:!0,component:Co}),r.a.createElement(y.a,{path:"/solicitacoes/socios",exact:!0,component:Wr}),r.a.createElement(y.a,{path:"/solicitacoes/procuradores",exact:!0,component:Kr}),r.a.createElement(y.a,{path:"/parametros",exact:!0,component:zo}),r.a.createElement(y.a,{path:"/userAuth",exact:!0,component:Vo}),r.a.createElement(y.a,{path:"/users",exact:!0,component:Bo}))},Yo=t(598);var Ho=Object(c.c)((function(e){return{redux:Object(h.a)({},e.user)}}))((function(){return ne("loggedIn").length>0?r.a.createElement("div",{className:"app"},r.a.createElement(Yo.a,{maxWidth:"lg",style:{minHeight:"100vh"}},r.a.createElement(S.a,null,r.a.createElement(Rn,null),r.a.createElement(Uo,null)),r.a.createElement(Bn,null))):r.a.createElement(Vo,null)})),Jo=Object(l.a)(d.a,m.a,p.a)(l.e)(x,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var Ko=function(){return r.a.createElement(c.a,{store:Jo},r.a.createElement(Ho,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Ko,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[434,1,2]]]);
//# sourceMappingURL=main.dbc4684b.chunk.js.map